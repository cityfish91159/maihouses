# ============================================
# Maihouses 專案環境變數配置
# ============================================

# --------------------------------------------
# 1. Replicate API (必須)
# --------------------------------------------
# 用於 AI 圖片生成、物件偵測、X-Ray 透視
# 申請網址: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=r8_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Replicate Deployments (可選，使用自己部署的模型)
# 格式: username/deployment-name
# 生成模型 (Flux)
REPLICATE_DEPLOYMENT=cityfish91159/maihouses-flux-dev
# 偵測模型 (YOLO World / Grounding DINO)
REPLICATE_DEPLOYMENT_DETECT=cityfish91159/maihouses-yoloworld

# --------------------------------------------
# 2. OpenAI API (必須 - Chat 功能)
# --------------------------------------------
# 用於 AI 聊天助理、圖片分析
# 申請網址: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# OpenAI 模型選擇 (可選)
OPENAI_MODEL=gpt-4o-mini

# --------------------------------------------
# 2.5 Anthropic Claude API (可選 - 進階 AI 功能)
# --------------------------------------------
# 用於 GitHub Copilot 整合、進階對話
# 申請網址: https://console.anthropic.com/account/keys
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Claude 模型選擇 (可選)
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# --------------------------------------------
# 3. Imgix (可選 - 圖片 CDN)
# --------------------------------------------
# 用於圖片上傳和 CDN 加速
# 申請網址: https://imgix.com/
IMGIX_API_KEY=your_imgix_api_key_here
IMGIX_DOMAIN=your-domain.imgix.net

# --------------------------------------------
# 4. Web Push 推播設定 (WP-1 ~ WP-4)
# --------------------------------------------
# 用於瀏覽器推播通知
# 生成 VAPID 金鑰: npx web-push generate-vapid-keys
#
# 公鑰：前端 + 後端共用，存 Vercel 環境變數
VITE_VAPID_PUBLIC_KEY=your_vapid_public_key_here
#
# 私鑰：只有後端用，存 Supabase Vault（不要放這裡！）
# 在 Supabase Dashboard > Vault 建立 secret，名稱為 VAPID_PRIVATE_KEY

# --------------------------------------------
# 5. Security Configuration (REQUIRED FOR PRODUCTION)
# --------------------------------------------
# Team Oscar-2: P0-5 修復
# 此環境變數在生產環境為必填項，否則 build 會失敗
# 請使用至少 32 字元的隨機字串作為 AES-256 加密金鑰
VITE_STORAGE_SECRET=your-32-char-random-secret-key-here

# 產生安全金鑰的方法：
# Node.js: require('crypto').randomBytes(32).toString('hex')
# OpenSSL: openssl rand -hex 32
# Online: https://www.random.org/strings/ (32 chars, alphanumeric)

# --------------------------------------------
# 5.1 Session Recovery Security (P1)
# --------------------------------------------
# 一次性 Session Recovery token 簽章密鑰（建議至少 32 字元）
SESSION_RECOVERY_TOKEN_SECRET=your-session-recovery-token-secret

# 一次性 token 有效期（毫秒）
SESSION_RECOVERY_TOKEN_TTL_MS=120000

# /api/session-recovery 查找模式速率限制（每 window 允許數）
RATE_LIMIT_SESSION_RECOVERY_LOOKUP_MAX=5
RATE_LIMIT_SESSION_RECOVERY_LOOKUP_WINDOW_MS=60000

# /api/session-recovery 兌換模式速率限制（每 window 允許數）
RATE_LIMIT_SESSION_RECOVERY_REDEEM_MAX=20
RATE_LIMIT_SESSION_RECOVERY_REDEEM_WINDOW_MS=60000

# --------------------------------------------
# 6. Vercel 部署設定 (自動)
# --------------------------------------------
# 以下變數由 Vercel 自動設定，無需手動配置
# VERCEL=1
# VERCEL_ENV=production
# VERCEL_URL=your-project.vercel.app
