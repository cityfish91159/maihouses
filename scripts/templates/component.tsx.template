/**
 * ğŸ† æœ€ä½³å¯¦è¸ React çµ„ä»¶æ¨¡æ¿
 *
 * é€™å€‹æ¨¡æ¿å±•ç¤ºäº†ç²å¾—æœ€é«˜åˆ†çš„ä»£ç¢¼çµæ§‹ï¼š
 * - æ­£ç¢ºçš„é¡å‹å®šç¾© (+8 åˆ†)
 * - React.memo å„ªåŒ– (+5 åˆ†)
 * - useCallback/useMemo (+5 åˆ†)
 * - i18n åœ‹éš›åŒ– (+10 åˆ†)
 * - å®Œæ•´ a11y (+8 åˆ†)
 * - early return (+3 åˆ†)
 * - JSDoc (+3 åˆ†)
 *
 * ç¸½æ½›åœ¨çå‹µ: +42 åˆ†
 */

import { memo, useCallback, useMemo } from 'react';
import { useTranslation } from 'react-i18next';

// âœ… æ­£ç¢ºçš„é¡å‹å®šç¾©ï¼ˆç„¡ anyï¼‰
interface ComponentNameProps {
  /** çµ„ä»¶æ¨™é¡Œ */
  title: string;
  /** é …ç›®åˆ—è¡¨ */
  items: ReadonlyArray<ItemType>;
  /** é»æ“Šè™•ç†å‡½æ•¸ */
  onItemClick?: (id: string) => void;
  /** æ˜¯å¦è¼‰å…¥ä¸­ */
  isLoading?: boolean;
}

interface ItemType {
  id: string;
  label: string;
}

/**
 * ComponentName - çµ„ä»¶æè¿°
 *
 * @example
 * <ComponentName
 *   title="æ¨™é¡Œ"
 *   items={items}
 *   onItemClick={handleClick}
 * />
 */
export const ComponentName = memo(function ComponentName({
  title,
  items,
  onItemClick,
  isLoading = false,
}: ComponentNameProps) {
  const { t } = useTranslation();

  // âœ… Early return è™•ç†é‚Šç•Œæƒ…æ³
  if (isLoading) {
    return <div aria-busy="true">{t('common.loading')}</div>;
  }

  if (items.length === 0) {
    return <div role="status">{t('common.noData')}</div>;
  }

  // âœ… useCallback å„ªåŒ–å›èª¿å‡½æ•¸
  const handleClick = useCallback(
    (id: string) => {
      onItemClick?.(id);
    },
    [onItemClick]
  );

  // âœ… useMemo å„ªåŒ–è¨ˆç®—
  const sortedItems = useMemo(
    () => [...items].sort((a, b) => a.label.localeCompare(b.label)),
    [items]
  );

  return (
    <section aria-labelledby="component-title">
      <h2 id="component-title">{title}</h2>
      <ul role="list" aria-label={t('component.itemList')}>
        {sortedItems.map((item) => (
          <li key={item.id}>
            <button
              type="button"
              onClick={() => handleClick(item.id)}
              aria-label={t('component.selectItem', { name: item.label })}
            >
              {item.label}
            </button>
          </li>
        ))}
      </ul>
    </section>
  );
});

// âœ… é è¨­ displayNameï¼ˆæ–¹ä¾¿ DevTools é™¤éŒ¯ï¼‰
ComponentName.displayName = 'ComponentName';
