╔═══════════════════════════════════════════════════════════════════════════╗
║              🚀 AI 顏色回填模組 - 快速設定指南                           ║
╚═══════════════════════════════════════════════════════════════════════════╝

✅ 已完成的設定:
───────────────────────────────────────────────────────────────────────────
✓ AWS SDK (@aws-sdk/client-s3) 已安裝
✓ .env 檔案已建立並填入所有設定項目
✓ Replicate API Token 已設定 ✓
✓ Replicate 部署路徑已設定 ✓

⚠️  需要你手動填入的 API 金鑰:
───────────────────────────────────────────────────────────────────────────

1️⃣  OpenAI API Key (必要 - 用於圖像分析)
   
   取得方式:
   a. 前往 https://platform.openai.com/api-keys
   b. 登入你的 OpenAI 帳號
   c. 點擊 "Create new secret key"
   d. 複製金鑰 (格式: sk-proj-xxxx...)
   
   填入位置:
   nano .env
   找到 OPENAI_API_KEY=sk-proj-your_openai_api_key_here
   替換成你的實際金鑰

2️⃣  AWS S3 設定 (可選 - 用於圖片儲存)
   
   如果你有 AWS 帳號:
   
   a. 建立 S3 Bucket:
      - 前往 https://console.aws.amazon.com/s3/
      - 點擊 "Create bucket"
      - 輸入名稱 (如 maihouses-uploads)
      - 區域選擇 us-east-1 或其他
      - 設定公開讀取權限
   
   b. 建立 IAM 使用者:
      - 前往 https://console.aws.amazon.com/iam/
      - 點擊 "Users" → "Add user"
      - 賦予 S3 權限 (AmazonS3FullAccess 或 s3:PutObject)
      - 建立 Access Key
      - 複製 Access Key ID 和 Secret Access Key
   
   c. 填入 .env:
      AWS_S3_BUCKET=你的bucket名稱
      AWS_S3_REGION=us-east-1
      AWS_ACCESS_KEY_ID=AKIA...
      AWS_SECRET_ACCESS_KEY=xxx...
   
   如果沒有 AWS 帳號:
   → 系統會自動使用 base64 模式 (適合開發測試)

3️⃣  imgix 設定 (可選 - 用於圖片優化)
   
   如果你有 imgix 帳號:
   
   a. 前往 https://dashboard.imgix.com/
   b. 建立或選擇 Source
   c. 連接到你的 S3 bucket
   d. 複製 imgix 網域
   
   填入 .env:
   IMGIX_DOMAIN=你的網域.imgix.net
   
   如果沒有 imgix:
   → 系統仍可運作，但無法使用圖片優化功能

═══════════════════════════════════════════════════════════════════════════

📝 編輯環境變數:
───────────────────────────────────────────────────────────────────────────

使用文字編輯器:
nano .env

或使用 VS Code:
code .env

填入你的實際 API 金鑰後存檔

═══════════════════════════════════════════════════════════════════════════

🧪 測試設定:
───────────────────────────────────────────────────────────────────────────

1. 測試所有 API:
   ./test-ai-recolor-apis.sh

2. 測試單一 API:
   # OpenAI
   curl -X POST http://localhost:3000/api/openai-proxy \
     -H "Content-Type: application/json" \
     -d '{"model":"gpt-4o","messages":[{"role":"user","content":"test"}]}'

3. 檢查環境變數:
   cat .env

═══════════════════════════════════════════════════════════════════════════

🚀 啟動應用:
───────────────────────────────────────────────────────────────────────────

1. 啟動開發伺服器:
   npm run dev

2. 開啟瀏覽器:
   http://localhost:5173/tools/cake-reveal/ai-color-recolor-m.html

3. 測試功能:
   - 上傳圖片
   - 等待 AI 處理
   - 檢查結果

═══════════════════════════════════════════════════════════════════════════

💡 提示:
───────────────────────────────────────────────────────────────────────────

• 只有 OpenAI API Key 是必須的
• AWS S3 和 imgix 是可選的 (沒有也能運作)
• 開發階段可以只設定 OpenAI，使用 base64 模式測試
• 生產環境建議設定完整的 S3 + imgix

═══════════════════════════════════════════════════════════════════════════

📚 更多資訊:
───────────────────────────────────────────────────────────────────────────

完整 API 指南: cat AI_COLOR_RECOLOR_API_GUIDE.txt
快速參考: cat AI_RECOLOR_QUICK_REF.txt
修正報告: cat API_FIX_REPORT.txt

═══════════════════════════════════════════════════════════════════════════
