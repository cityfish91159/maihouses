# MCP Servers é…ç½®æŒ‡å—

é€™å€‹æª”æ¡ˆèªªæ˜ maihouses å°ˆæ¡ˆçš„ MCP (Model Context Protocol) é…ç½®ã€‚

## ğŸ¯ ä»€éº¼æ˜¯ MCPï¼Ÿ

**MCP = Model Context Protocol**

MCP æ˜¯é€£æ¥ Claude èˆ‡å¤–éƒ¨å·¥å…·ã€APIã€æ•¸æ“šåº«çš„é–‹æ”¾æ¨™æº–å”è­°ã€‚

### MCP vs Skills å°æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Claude Agent                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ§  Skills (å¦‚ä½•åš)                             â”‚
â”‚  â”œâ”€â”€ code-validator                             â”‚
â”‚  â”œâ”€â”€ type-checker                               â”‚
â”‚  â”œâ”€â”€ pre-commit-validator                       â”‚
â”‚  â””â”€â”€ read-before-edit                           â”‚
â”‚                                                 â”‚
â”‚  ğŸ”§ MCP Servers (èƒ½åŠ›)                          â”‚
â”‚  â”œâ”€â”€ filesystem (æª”æ¡ˆç³»çµ±è¨ªå•)                  â”‚
â”‚  â”œâ”€â”€ puppeteer (Web è‡ªå‹•åŒ–)                     â”‚
â”‚  â”œâ”€â”€ fetch (HTTP è«‹æ±‚)                          â”‚
â”‚  â””â”€â”€ git (Git æ“ä½œ)                             â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—œä¿‚ï¼š**

- **Skills** å®šç¾©ã€Œæµç¨‹å’Œè¦ç¯„ã€ï¼ˆä½¿ç”¨ Read, Grep, Bash ç­‰å…§å»ºå·¥å…·ï¼‰
- **MCP** æä¾›ã€Œå¤–éƒ¨èƒ½åŠ›ã€ï¼ˆè¨ªå•æ•¸æ“šåº«ã€APIã€æœå‹™ç­‰ï¼‰

---

## ğŸ“‹ å·²é…ç½®çš„ MCP Servers

### 1. filesystem

**åŠŸèƒ½ï¼š** æª”æ¡ˆç³»çµ±è¨ªå•ï¼ˆè¶…è¶Š Claude Code å…§å»ºçš„ Read/Writeï¼‰

**ç”¨é€”ï¼š**

- æ‰¹é‡æ–‡ä»¶æ“ä½œ
- ç›®éŒ„éæ­·
- æ–‡ä»¶æœå°‹
- æ¬Šé™ç®¡ç†

**ç¯„ä¾‹ï¼š**

```
ã€Œæœå°‹æ‰€æœ‰åŒ…å« 'TODO' çš„æª”æ¡ˆä¸¦åˆ—å‡ºã€
ã€Œæ‰¹é‡é‡å‘½å src/components ä¸‹çš„æª”æ¡ˆã€
```

---

### 2. puppeteer

**åŠŸèƒ½ï¼š** Web è‡ªå‹•åŒ–å’Œç¶²é æˆªåœ–

**ç”¨é€”ï¼š**

- ç¶²é æˆªåœ–
- è¡¨å–®è‡ªå‹•å¡«å¯«
- ç¶²é æ¸¬è©¦
- æ•¸æ“šæŠ“å–

**ç¯„ä¾‹ï¼š**

```
ã€Œæ‰“é–‹æˆ‘å€‘çš„ç¶²ç«™ä¸¦æˆªåœ–ã€
ã€Œæ¸¬è©¦ç™»å…¥æµç¨‹æ˜¯å¦æ­£å¸¸ã€
ã€ŒæŠ“å–ç«¶å“ç¶²ç«™çš„åƒ¹æ ¼ä¿¡æ¯ã€
```

---

### 3. fetch

**åŠŸèƒ½ï¼š** HTTP è«‹æ±‚ï¼ˆGET, POST, PUT, DELETEï¼‰

**ç”¨é€”ï¼š**

- èª¿ç”¨å¤–éƒ¨ API
- æ¸¬è©¦ API endpoints
- æ•¸æ“šç²å–
- Webhook æ¸¬è©¦

**ç¯„ä¾‹ï¼š**

```
ã€Œèª¿ç”¨ /api/users ä¸¦é¡¯ç¤ºè¿”å›çµæœã€
ã€Œæ¸¬è©¦æˆ‘å€‘çš„ API æ˜¯å¦æ­£å¸¸é‹ä½œã€
ã€Œå¾ GitHub API ç²å–æœ€æ–° issuesã€
```

---

### 4. git

**åŠŸèƒ½ï¼š** Git æ“ä½œï¼ˆè¶…è¶Š Bash git å‘½ä»¤ï¼‰

**ç”¨é€”ï¼š**

- è¤‡é›œçš„ Git æ“ä½œ
- å¤šå€‰åº«ç®¡ç†
- Git æ­·å²åˆ†æ
- åˆ†æ”¯ç­–ç•¥åŸ·è¡Œ

**ç¯„ä¾‹ï¼š**

```
ã€Œåˆ†ææœ€è¿‘ 30 å¤©çš„æäº¤è¨˜éŒ„ã€
ã€Œæ‰¾å‡ºä¿®æ”¹æœ€é »ç¹çš„æª”æ¡ˆã€
ã€Œè‡ªå‹•å‰µå»º release branchã€
```

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### è‡ªå‹•ä½¿ç”¨ï¼ˆæ¨è–¦ï¼‰

Claude æœƒè‡ªå‹•åˆ¤æ–·ä½•æ™‚ä½¿ç”¨ MCP serversï¼š

```
æ‚¨ï¼šã€ŒæŠ“å–æˆ‘å€‘ç¶²ç«™çš„é¦–é æˆªåœ–ã€
Claudeï¼šâœ“ è‡ªå‹•ä½¿ç”¨ puppeteer MCP server
       âœ“ æ‰“é–‹ç¶²é 
       âœ“ æˆªåœ–
       âœ“ è¿”å›åœ–ç‰‡
```

### çµåˆ Skills ä½¿ç”¨

MCP å’Œ Skills å¯ä»¥å”åŒå·¥ä½œï¼š

```
æ‚¨ï¼šã€Œæª¢æŸ¥ç¶²ç«™ä¸Šçš„ç™»å…¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œä¸¦å¯©æŸ¥ç›¸é—œä»£ç¢¼ã€
Claudeï¼šâœ“ ä½¿ç”¨ puppeteer MCP - æ¸¬è©¦ç¶²é ç™»å…¥
       âœ“ ä½¿ç”¨ filesystem MCP - è®€å–ç›¸é—œä»£ç¢¼
       âœ“ ä½¿ç”¨ code-validator skill - å¯©æŸ¥ä»£ç¢¼å“è³ª
       âœ“ ä½¿ç”¨ read-before-edit skill - å¦‚éœ€ä¿®æ”¹å…ˆé–±è®€
```

---

## ğŸ”§ é…ç½®æª”æ¡ˆ

### ä½ç½®ï¼š`.mcp.json`

```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/home/user/maihouses"],
      "env": {}
    },
    "puppeteer": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-puppeteer"],
      "env": {}
    },
    "fetch": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-fetch"],
      "env": {}
    },
    "git": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-git", "/home/user/maihouses"],
      "env": {}
    }
  }
}
```

**èªªæ˜ï¼š**

- `command`: åŸ·è¡Œå‘½ä»¤ï¼ˆnpx, uvx, node ç­‰ï¼‰
- `args`: å‘½ä»¤åƒæ•¸
- `env`: ç’°å¢ƒè®Šæ•¸ï¼ˆAPI keys ç­‰ï¼‰

---

## ğŸ“¦ æ·»åŠ æ›´å¤š MCP Servers

### å¸¸ç”¨ MCP Servers

```bash
# PostgreSQL æ•¸æ“šåº«
{
  "postgres": {
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-postgres"],
    "env": {
      "POSTGRES_CONNECTION_STRING": "postgresql://user:pass@localhost:5432/db"
    }
  }
}

# SQLite æ•¸æ“šåº«
{
  "sqlite": {
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-sqlite"],
    "env": {
      "DB_PATH": "./data/app.db"
    }
  }
}

# Google Drive
{
  "google-drive": {
    "command": "npx",
    "args": ["-y", "google-drive-mcp"],
    "env": {
      "GOOGLE_API_KEY": "your-api-key"
    }
  }
}

# Slack
{
  "slack": {
    "command": "npx",
    "args": ["-y", "slack-mcp"],
    "env": {
      "SLACK_TOKEN": "xoxb-your-token"
    }
  }
}
```

### æ‰‹å‹•æ·»åŠ  Server

ç·¨è¼¯ `.mcp.json`ï¼Œåœ¨ `mcpServers` ä¸­æ·»åŠ æ–°çš„ server é…ç½®ã€‚

---

## ğŸ” å®‰å…¨æ³¨æ„äº‹é …

### API Keys ç®¡ç†

**âŒ ç¦æ­¢ï¼š** ç›´æ¥å¯«åœ¨ `.mcp.json` ä¸­ä¸¦æäº¤åˆ° git

```json
// âŒ ä¸è¦é€™æ¨£åš
{
  "env": {
    "API_KEY": "sk_live_12345" // æœƒæ´©éœ²
  }
}
```

**âœ… æ­£ç¢ºï¼š** ä½¿ç”¨ç’°å¢ƒè®Šæ•¸

```json
// âœ… é€™æ¨£åš
{
  "env": {
    "API_KEY": "${OPENAI_API_KEY}" // å¾ç’°å¢ƒè®Šæ•¸è®€å–
  }
}
```

ç„¶å¾Œåœ¨ `.env` æˆ–ç³»çµ±ç’°å¢ƒè®Šæ•¸ä¸­è¨­ç½®ï¼š

```bash
export OPENAI_API_KEY=sk_live_12345
```

### .gitignore

ç¢ºä¿æ•æ„Ÿé…ç½®ä¸è¢«æäº¤ï¼š

```gitignore
# åœ¨ .gitignore ä¸­æ·»åŠ 
.mcp.local.json
.claude/settings.local.json
.env
```

---

## ğŸ“Š è¼¸å‡ºé™åˆ¶

MCP tool è¼¸å‡ºæœ‰ token é™åˆ¶ï¼š

- **è­¦å‘Šé–¾å€¼**: 10,000 tokens
- **é»˜èªä¸Šé™**: 25,000 tokens
- **å¯é…ç½®ä¸Šé™**: `MAX_MCP_OUTPUT_TOKENS` ç’°å¢ƒè®Šæ•¸

```bash
# æé«˜ä¸Šé™åˆ° 50,000 tokens
export MAX_MCP_OUTPUT_TOKENS=50000
```

---

## ğŸ“ æœ€ä½³å¯¦è¸

1. **å°ˆæ¡ˆç´š vs ç”¨æˆ¶ç´š**
   - åœ˜éšŠå…±ç”¨çš„ MCP â†’ `.mcp.json`ï¼ˆæäº¤åˆ° gitï¼‰
   - å€‹äººä½¿ç”¨çš„ MCP â†’ `.claude/settings.local.json`ï¼ˆä¸æäº¤ï¼‰

2. **ä¿è­·æ•æ„Ÿè³‡è¨Š**
   - API keys ç”¨ç’°å¢ƒè®Šæ•¸
   - ä¸æäº¤ tokens åˆ° git

3. **æ¸¬è©¦é€£æ¥**

   ```bash
   # ä½¿ç”¨ CLI æ¸¬è©¦ï¼ˆå¦‚æœæœ‰ï¼‰
   claude mcp get filesystem
   ```

4. **æ–‡æª”èªªæ˜**
   - åœ¨ README ä¸­åˆ—å‡ºå°ˆæ¡ˆéœ€è¦çš„ MCP servers
   - èªªæ˜å¦‚ä½•è¨­ç½®ç’°å¢ƒè®Šæ•¸

5. **åˆç†ä½¿ç”¨**
   - ç°¡å–®æ“ä½œç”¨ Skills + å…§å»ºå·¥å…·
   - éœ€è¦å¤–éƒ¨é›†æˆæ™‚ç”¨ MCP
   - å…©è€…çµåˆä½¿ç”¨æœ€ä½³

---

## ğŸŒ æ›´å¤š MCP Servers

å®˜æ–¹ MCP Servers åˆ—è¡¨ï¼š

- https://github.com/modelcontextprotocol/servers

ç¤¾ç¾¤è²¢ç»çš„ MCP Serversï¼š

- https://github.com/topics/mcp-server
- https://mcpcat.io/ (MCP Servers ç›®éŒ„)

**å¯ç”¨è¶…é 3 è¬å€‹å·¥å…·åŒ…ï¼**

---

## ğŸ“ ç¯„ä¾‹ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: è‡ªå‹•åŒ–æ¸¬è©¦

```
æ‚¨ï¼šã€Œç”¨ puppeteer æ¸¬è©¦æˆ‘å€‘çš„è¨»å†Šæµç¨‹ï¼Œç„¶å¾Œç”¨ code-validator å¯©æŸ¥ç›¸é—œä»£ç¢¼ã€

Claude åŸ·è¡Œï¼š
1. [MCP puppeteer] æ‰“é–‹ç¶²ç«™
2. [MCP puppeteer] å¡«å¯«è¨»å†Šè¡¨å–®
3. [MCP puppeteer] æäº¤ä¸¦æª¢æŸ¥çµæœ
4. [Skill read-before-edit] é–±è®€ç›¸é—œä»£ç¢¼
5. [Skill code-validator] å¯©æŸ¥ä»£ç¢¼å“è³ª
6. [å›å ±] æ¸¬è©¦çµæœ + ä»£ç¢¼å¯©æŸ¥å ±å‘Š
```

### å ´æ™¯ 2: API é–‹ç™¼

```
æ‚¨ï¼šã€Œæ¸¬è©¦ /api/users endpointï¼Œå¦‚æœæœ‰å•é¡Œå¹«æˆ‘ä¿®å¾©ã€

Claude åŸ·è¡Œï¼š
1. [MCP fetch] èª¿ç”¨ API
2. [åˆ†æ] æª¢æŸ¥è¿”å›çµæœ
3. [Skill read-before-edit] é–±è®€ API ä»£ç¢¼
4. [Skill type-checker] æª¢æŸ¥é¡å‹å®šç¾©
5. [Edit] ä¿®å¾©å•é¡Œ
6. [MCP fetch] é‡æ–°æ¸¬è©¦
```

### å ´æ™¯ 3: æ•¸æ“šåˆ†æ

```
æ‚¨ï¼šã€Œåˆ†ææœ€è¿‘ä¸€å€‹æœˆçš„ git commitï¼Œæ‰¾å‡ºæœ€æ´»èºçš„æª”æ¡ˆã€

Claude åŸ·è¡Œï¼š
1. [MCP git] ç²å– commit æ­·å²
2. [åˆ†æ] çµ±è¨ˆæª”æ¡ˆä¿®æ”¹æ¬¡æ•¸
3. [MCP filesystem] è®€å–ç†±é»æª”æ¡ˆ
4. [Skill code-validator] å¯©æŸ¥é€™äº›æª”æ¡ˆ
5. [å›å ±] åˆ†æå ±å‘Š + å„ªåŒ–å»ºè­°
```

---

## âœ… é©—è­‰æ¸…å–®

- [x] `.mcp.json` å·²å‰µå»º
- [x] 4 å€‹åŸºç¤ MCP servers å·²é…ç½®
  - [x] filesystem
  - [x] puppeteer
  - [x] fetch
  - [x] git
- [x] èˆ‡ Skills å”åŒå·¥ä½œ
- [x] å®‰å…¨é…ç½®ï¼ˆç„¡æ•æ„Ÿè³‡è¨Šï¼‰

---

## ğŸ¯ ç¸½çµ

**ç¾åœ¨æ‚¨æ“æœ‰ï¼š**

1. **4 å€‹ Skills** - å®šç¾©ä»£ç¢¼å“è³ªæ¨™æº–å’Œæµç¨‹
2. **4 å€‹ MCP Servers** - æä¾›å¤–éƒ¨èƒ½åŠ›å’Œé›†æˆ
3. **å®Œæ•´é…ç½®** - è‡ªå‹•è§¸ç™¼ï¼Œç„¡éœ€æ‰‹å‹•æŒ‡å®š

**é€™å½¢æˆäº†ä¸€å€‹å®Œæ•´çš„ AI è¼”åŠ©é–‹ç™¼ç”Ÿæ…‹ç³»çµ±ï¼** ğŸš€

---

**Skills æ•™ Claude å¦‚ä½•åšï¼ŒMCP çµ¦ Claude èƒ½åŠ›ã€‚å…©è€…çµåˆ = ç„¡é™å¯èƒ½ï¼**
