const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BCF8hNmt.js","assets/react-vendor-COAx946C.js","assets/ui-libs-CLHr7fYe.js","assets/supabase-CYJXZqBa.js"])))=>i.map(i=>d[i]);
var Pa=e=>{throw TypeError(e)};var sn=(e,t,r)=>t.has(e)||Pa("Cannot "+r);var v=(e,t,r)=>(sn(e,t,"read from private field"),r?r.call(e):t.get(e)),K=(e,t,r)=>t.has(e)?Pa("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),B=(e,t,r,n)=>(sn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),te=(e,t,r)=>(sn(e,t,"access private method"),r);var cr=(e,t,r,n)=>({set _(a){B(e,t,a,r)},get _(){return v(e,t,n)}});import{r as h,a as _c,R as $,b as Sc,u as Br,c as Ur,d as Xn,e as So,L as Bs,f as Cc,h as Ye,B as Ec}from"./react-vendor-COAx946C.js";import{L as Ma,a as Ra,U as $a,X as As,M as Ic,S as gn,P as Dt,b as Tc,H as Co,c as zc,d as Ac,K as Pc,C as Mc,e as Rc,A as $c,f as Eo,E as Zr,g as ea,B as Us,D as Hr,h as Lc,i as Xs,j as Lt,k as ta,l as Io,m as Oc,Z as bn,R as Dc,n as Fc,o as Bc,p as To,q as et,I as Uc,r as He,F as Zc,s as Hc,t as Cr,u as zo,v as Ft,w as Nr,x as tt,y as Wc,z as qc,G as ss,J as Vc,N as vn,O as La,Q as yn,T as Wr,V as Qc,W as Er,Y as wn,_ as Ir,$ as Ts,a0 as Gc,a1 as Ao,a2 as Kc,a3 as sa,a4 as Yc,a5 as rn,a6 as Jc,a7 as Ct,a8 as Xc,a9 as ed,aa as td,ab as sd}from"./ui-libs-CLHr7fYe.js";import{c as rd}from"./supabase-CYJXZqBa.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Po={exports:{}},qr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=h,ad=Symbol.for("react.element"),id=Symbol.for("react.fragment"),od=Object.prototype.hasOwnProperty,ld=nd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cd={key:!0,ref:!0,__self:!0,__source:!0};function Mo(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)od.call(t,n)&&!cd.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:ad,type:e,key:i,ref:o,props:a,_owner:ld.current}}qr.Fragment=id;qr.jsx=Mo;qr.jsxs=Mo;Po.exports=qr;var s=Po.exports,jn={},Oa=_c;jn.createRoot=Oa.createRoot,jn.hydrateRoot=Oa.hydrateRoot;var Ps=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dd={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Et,Jn,fo,ud=(fo=class{constructor(){K(this,Et,dd);K(this,Jn,!1)}setTimeoutProvider(e){B(this,Et,e)}setTimeout(e,t){return v(this,Et).setTimeout(e,t)}clearTimeout(e){v(this,Et).clearTimeout(e)}setInterval(e,t){return v(this,Et).setInterval(e,t)}clearInterval(e){v(this,Et).clearInterval(e)}},Et=new WeakMap,Jn=new WeakMap,fo),Wt=new ud;function md(e){setTimeout(e,0)}var rs=typeof window>"u"||"Deno"in globalThis;function Fe(){}function hd(e,t){return typeof e=="function"?e(t):e}function Nn(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ro(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ot(e,t){return typeof e=="function"?e(t):e}function Xe(e,t){return typeof e=="function"?e(t):e}function Da(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==ra(o,t.options))return!1}else if(!Zs(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Fa(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ns(t.options.mutationKey)!==ns(i))return!1}else if(!Zs(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function ra(e,t){return((t==null?void 0:t.queryKeyHashFn)||ns)(e)}function ns(e){return JSON.stringify(e,(t,r)=>kn(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Zs(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Zs(e[r],t[r])):!1}var pd=Object.prototype.hasOwnProperty;function $o(e,t){if(e===t)return e;const r=Ba(e)&&Ba(t);if(!r&&!(kn(e)&&kn(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let d=0;for(let c=0;c<o;c++){const m=r?c:i[c],u=e[m],x=t[m];if(u===x){l[m]=u,(r?c<a:pd.call(e,m))&&d++;continue}if(u===null||x===null||typeof u!="object"||typeof x!="object"){l[m]=x;continue}const p=$o(u,x);l[m]=p,p===u&&d++}return a===o&&d===a?e:l}function Tr(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Ba(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kn(e){if(!Ua(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ua(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ua(e){return Object.prototype.toString.call(e)==="[object Object]"}function fd(e){return new Promise(t=>{Wt.setTimeout(t,e)})}function _n(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?$o(e,t):t}function xd(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function gd(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var na=Symbol();function Lo(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===na?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Oo(e,t){return typeof e=="function"?e(...t):!!e}var qt,It,bs,xo,bd=(xo=class extends Ps{constructor(){super();K(this,qt);K(this,It);K(this,bs);B(this,bs,t=>{if(!rs&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){v(this,It)||this.setEventListener(v(this,bs))}onUnsubscribe(){var t;this.hasListeners()||((t=v(this,It))==null||t.call(this),B(this,It,void 0))}setEventListener(t){var r;B(this,bs,t),(r=v(this,It))==null||r.call(this),B(this,It,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){v(this,qt)!==t&&(B(this,qt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof v(this,qt)=="boolean"?v(this,qt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qt=new WeakMap,It=new WeakMap,bs=new WeakMap,xo),aa=new bd;function Sn(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var vd=md;function yd(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=vd;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var _e=yd(),vs,Tt,ys,go,wd=(go=class extends Ps{constructor(){super();K(this,vs,!0);K(this,Tt);K(this,ys);B(this,ys,t=>{if(!rs&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){v(this,Tt)||this.setEventListener(v(this,ys))}onUnsubscribe(){var t;this.hasListeners()||((t=v(this,Tt))==null||t.call(this),B(this,Tt,void 0))}setEventListener(t){var r;B(this,ys,t),(r=v(this,Tt))==null||r.call(this),B(this,Tt,t(this.setOnline.bind(this)))}setOnline(t){v(this,vs)!==t&&(B(this,vs,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return v(this,vs)}},vs=new WeakMap,Tt=new WeakMap,ys=new WeakMap,go),zr=new wd;function jd(e){return Math.min(1e3*2**e,3e4)}function Do(e){return(e??"online")==="online"?zr.isOnline():!0}var Cn=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Fo(e){let t=!1,r=0,n;const a=Sn(),i=()=>a.status!=="pending",o=g=>{var y;if(!i()){const f=new Cn(g);x(f),(y=e.onCancel)==null||y.call(e,f)}},l=()=>{t=!0},d=()=>{t=!1},c=()=>aa.isFocused()&&(e.networkMode==="always"||zr.isOnline())&&e.canRun(),m=()=>Do(e.networkMode)&&e.canRun(),u=g=>{i()||(n==null||n(),a.resolve(g))},x=g=>{i()||(n==null||n(),a.reject(g))},p=()=>new Promise(g=>{var y;n=f=>{(i()||c())&&g(f)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(i())return;let g;const y=r===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(f){g=Promise.reject(f)}Promise.resolve(g).then(u).catch(f=>{var k;if(i())return;const j=e.retry??(rs?0:3),S=e.retryDelay??jd,N=typeof S=="function"?S(r,f):S,I=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,f);if(t||!I){x(f);return}r++,(k=e.onFail)==null||k.call(e,r,f),fd(N).then(()=>c()?void 0:p()).then(()=>{t?x(f):b()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:d,canStart:m,start:()=>(m()?b():p().then(b),a)}}var Vt,bo,Bo=(bo=class{constructor(){K(this,Vt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nn(this.gcTime)&&B(this,Vt,Wt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rs?1/0:5*60*1e3))}clearGcTimeout(){v(this,Vt)&&(Wt.clearTimeout(v(this,Vt)),B(this,Vt,void 0))}},Vt=new WeakMap,bo),Qt,ws,Je,Gt,Ce,Qs,Kt,ct,gt,vo,Nd=(vo=class extends Bo{constructor(t){super();K(this,ct);K(this,Qt);K(this,ws);K(this,Je);K(this,Gt);K(this,Ce);K(this,Qs);K(this,Kt);B(this,Kt,!1),B(this,Qs,t.defaultOptions),this.setOptions(t.options),this.observers=[],B(this,Gt,t.client),B(this,Je,v(this,Gt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,B(this,Qt,Ha(this.options)),this.state=t.state??v(this,Qt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=v(this,Ce))==null?void 0:t.promise}setOptions(t){if(this.options={...v(this,Qs),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Ha(this.options);r.data!==void 0&&(this.setState(Za(r.data,r.dataUpdatedAt)),B(this,Qt,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&v(this,Je).remove(this)}setData(t,r){const n=_n(this.state.data,t,this.options);return te(this,ct,gt).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){te(this,ct,gt).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=v(this,Ce))==null?void 0:n.promise;return(a=v(this,Ce))==null||a.cancel(t),r?r.then(Fe).catch(Fe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(v(this,Qt))}isActive(){return this.observers.some(t=>Xe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===na||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ot(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ro(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=v(this,Ce))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=v(this,Ce))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),v(this,Je).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(v(this,Ce)&&(v(this,Kt)?v(this,Ce).cancel({revert:!0}):v(this,Ce).cancelRetry()),this.scheduleGc()),v(this,Je).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||te(this,ct,gt).call(this,{type:"invalidate"})}async fetch(t,r){var d,c,m,u,x,p,b,g,y,f,j,S;if(this.state.fetchStatus!=="idle"&&((d=v(this,Ce))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(v(this,Ce))return v(this,Ce).continueRetry(),v(this,Ce).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(I=>I.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(B(this,Kt,!0),n.signal)})},i=()=>{const N=Lo(this.options,r),k=(()=>{const M={client:v(this,Gt),queryKey:this.queryKey,meta:this.meta};return a(M),M})();return B(this,Kt,!1),this.options.persister?this.options.persister(N,k,this):N(k)},l=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:v(this,Gt),state:this.state,fetchFn:i};return a(N),N})();(c=this.options.behavior)==null||c.onFetch(l,this),B(this,ws,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&te(this,ct,gt).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta}),B(this,Ce,Fo({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof Cn&&N.revert&&this.setState({...v(this,ws),fetchStatus:"idle"}),n.abort()},onFail:(N,I)=>{te(this,ct,gt).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{te(this,ct,gt).call(this,{type:"pause"})},onContinue:()=>{te(this,ct,gt).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await v(this,Ce).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(p=(x=v(this,Je).config).onSuccess)==null||p.call(x,N,this),(g=(b=v(this,Je).config).onSettled)==null||g.call(b,N,this.state.error,this),N}catch(N){if(N instanceof Cn){if(N.silent)return v(this,Ce).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw te(this,ct,gt).call(this,{type:"error",error:N}),(f=(y=v(this,Je).config).onError)==null||f.call(y,N,this),(S=(j=v(this,Je).config).onSettled)==null||S.call(j,this.state.data,N,this),N}finally{this.scheduleGc()}}},Qt=new WeakMap,ws=new WeakMap,Je=new WeakMap,Gt=new WeakMap,Ce=new WeakMap,Qs=new WeakMap,Kt=new WeakMap,ct=new WeakSet,gt=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Uo(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...Za(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return B(this,ws,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),_e.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),v(this,Je).notify({query:this,type:"updated",action:t})})},vo);function Uo(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Do(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Za(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ha(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Be,ie,Gs,Oe,Yt,js,bt,zt,Ks,Ns,ks,Jt,Xt,At,_s,ue,Os,En,In,Tn,zn,An,Pn,Mn,Zo,yo,kd=(yo=class extends Ps{constructor(t,r){super();K(this,ue);K(this,Be);K(this,ie);K(this,Gs);K(this,Oe);K(this,Yt);K(this,js);K(this,bt);K(this,zt);K(this,Ks);K(this,Ns);K(this,ks);K(this,Jt);K(this,Xt);K(this,At);K(this,_s,new Set);this.options=r,B(this,Be,t),B(this,zt,null),B(this,bt,Sn()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(v(this,ie).addObserver(this),Wa(v(this,ie),this.options)?te(this,ue,Os).call(this):this.updateResult(),te(this,ue,zn).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rn(v(this,ie),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rn(v(this,ie),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,te(this,ue,An).call(this),te(this,ue,Pn).call(this),v(this,ie).removeObserver(this)}setOptions(t){const r=this.options,n=v(this,ie);if(this.options=v(this,Be).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xe(this.options.enabled,v(this,ie))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");te(this,ue,Mn).call(this),v(this,ie).setOptions(this.options),r._defaulted&&!Tr(this.options,r)&&v(this,Be).getQueryCache().notify({type:"observerOptionsUpdated",query:v(this,ie),observer:this});const a=this.hasListeners();a&&qa(v(this,ie),n,this.options,r)&&te(this,ue,Os).call(this),this.updateResult(),a&&(v(this,ie)!==n||Xe(this.options.enabled,v(this,ie))!==Xe(r.enabled,v(this,ie))||Ot(this.options.staleTime,v(this,ie))!==Ot(r.staleTime,v(this,ie)))&&te(this,ue,En).call(this);const i=te(this,ue,In).call(this);a&&(v(this,ie)!==n||Xe(this.options.enabled,v(this,ie))!==Xe(r.enabled,v(this,ie))||i!==v(this,At))&&te(this,ue,Tn).call(this,i)}getOptimisticResult(t){const r=v(this,Be).getQueryCache().build(v(this,Be),t),n=this.createResult(r,t);return Sd(this,n)&&(B(this,Oe,n),B(this,js,this.options),B(this,Yt,v(this,ie).state)),n}getCurrentResult(){return v(this,Oe)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&v(this,bt).status==="pending"&&v(this,bt).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){v(this,_s).add(t)}getCurrentQuery(){return v(this,ie)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=v(this,Be).defaultQueryOptions(t),n=v(this,Be).getQueryCache().build(v(this,Be),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return te(this,ue,Os).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),v(this,Oe)))}createResult(t,r){var D;const n=v(this,ie),a=this.options,i=v(this,Oe),o=v(this,Yt),l=v(this,js),c=t!==n?t.state:v(this,Gs),{state:m}=t;let u={...m},x=!1,p;if(r._optimisticResults){const w=this.hasListeners(),T=!w&&Wa(t,r),O=w&&qa(t,n,r,a);(T||O)&&(u={...u,...Uo(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:y}=u;p=u.data;let f=!1;if(r.placeholderData!==void 0&&p===void 0&&y==="pending"){let w;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(w=i.data,f=!0):w=typeof r.placeholderData=="function"?r.placeholderData((D=v(this,ks))==null?void 0:D.state.data,v(this,ks)):r.placeholderData,w!==void 0&&(y="success",p=_n(i==null?void 0:i.data,w,r),x=!0)}if(r.select&&p!==void 0&&!f)if(i&&p===(o==null?void 0:o.data)&&r.select===v(this,Ks))p=v(this,Ns);else try{B(this,Ks,r.select),p=r.select(p),p=_n(i==null?void 0:i.data,p,r),B(this,Ns,p),B(this,zt,null)}catch(w){B(this,zt,w)}v(this,zt)&&(b=v(this,zt),p=v(this,Ns),g=Date.now(),y="error");const j=u.fetchStatus==="fetching",S=y==="pending",N=y==="error",I=S&&j,k=p!==void 0,C={status:y,fetchStatus:u.fetchStatus,isPending:S,isSuccess:y==="success",isError:N,isInitialLoading:I,isLoading:I,data:p,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:j,isRefetching:j&&!S,isLoadingError:N&&!k,isPaused:u.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:N&&k,isStale:ia(t,r),refetch:this.refetch,promise:v(this,bt),isEnabled:Xe(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const w=A=>{C.status==="error"?A.reject(C.error):C.data!==void 0&&A.resolve(C.data)},T=()=>{const A=B(this,bt,C.promise=Sn());w(A)},O=v(this,bt);switch(O.status){case"pending":t.queryHash===n.queryHash&&w(O);break;case"fulfilled":(C.status==="error"||C.data!==O.value)&&T();break;case"rejected":(C.status!=="error"||C.error!==O.reason)&&T();break}}return C}updateResult(){const t=v(this,Oe),r=this.createResult(v(this,ie),this.options);if(B(this,Yt,v(this,ie).state),B(this,js,this.options),v(this,Yt).data!==void 0&&B(this,ks,v(this,ie)),Tr(r,t))return;B(this,Oe,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!v(this,_s).size)return!0;const o=new Set(i??v(this,_s));return this.options.throwOnError&&o.add("error"),Object.keys(v(this,Oe)).some(l=>{const d=l;return v(this,Oe)[d]!==t[d]&&o.has(d)})};te(this,ue,Zo).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&te(this,ue,zn).call(this)}},Be=new WeakMap,ie=new WeakMap,Gs=new WeakMap,Oe=new WeakMap,Yt=new WeakMap,js=new WeakMap,bt=new WeakMap,zt=new WeakMap,Ks=new WeakMap,Ns=new WeakMap,ks=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,At=new WeakMap,_s=new WeakMap,ue=new WeakSet,Os=function(t){te(this,ue,Mn).call(this);let r=v(this,ie).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Fe)),r},En=function(){te(this,ue,An).call(this);const t=Ot(this.options.staleTime,v(this,ie));if(rs||v(this,Oe).isStale||!Nn(t))return;const n=Ro(v(this,Oe).dataUpdatedAt,t)+1;B(this,Jt,Wt.setTimeout(()=>{v(this,Oe).isStale||this.updateResult()},n))},In=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(v(this,ie)):this.options.refetchInterval)??!1},Tn=function(t){te(this,ue,Pn).call(this),B(this,At,t),!(rs||Xe(this.options.enabled,v(this,ie))===!1||!Nn(v(this,At))||v(this,At)===0)&&B(this,Xt,Wt.setInterval(()=>{(this.options.refetchIntervalInBackground||aa.isFocused())&&te(this,ue,Os).call(this)},v(this,At)))},zn=function(){te(this,ue,En).call(this),te(this,ue,Tn).call(this,te(this,ue,In).call(this))},An=function(){v(this,Jt)&&(Wt.clearTimeout(v(this,Jt)),B(this,Jt,void 0))},Pn=function(){v(this,Xt)&&(Wt.clearInterval(v(this,Xt)),B(this,Xt,void 0))},Mn=function(){const t=v(this,Be).getQueryCache().build(v(this,Be),this.options);if(t===v(this,ie))return;const r=v(this,ie);B(this,ie,t),B(this,Gs,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Zo=function(t){_e.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(v(this,Oe))}),v(this,Be).getQueryCache().notify({query:v(this,ie),type:"observerResultsUpdated"})})},yo);function _d(e,t){return Xe(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Wa(e,t){return _d(e,t)||e.state.data!==void 0&&Rn(e,t,t.refetchOnMount)}function Rn(e,t,r){if(Xe(t.enabled,e)!==!1&&Ot(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&ia(e,t)}return!1}function qa(e,t,r,n){return(e!==t||Xe(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ia(e,r)}function ia(e,t){return Xe(t.enabled,e)!==!1&&e.isStaleByTime(Ot(t.staleTime,e))}function Sd(e,t){return!Tr(e.getCurrentResult(),t)}function Va(e){return{onFetch:(t,r)=>{var m,u,x,p,b;const n=t.options,a=(x=(u=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:u.fetchMore)==null?void 0:x.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const c=async()=>{let g=!1;const y=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},f=Lo(t.options,t.fetchOptions),j=async(S,N,I)=>{if(g)return Promise.reject();if(N==null&&S.pages.length)return Promise.resolve(S);const M=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:N,direction:I?"backward":"forward",meta:t.options.meta};return y(T),T})(),C=await f(M),{maxPages:D}=t.options,w=I?gd:xd;return{pages:w(S.pages,C,D),pageParams:w(S.pageParams,N,D)}};if(a&&i.length){const S=a==="backward",N=S?Cd:Qa,I={pages:i,pageParams:o},k=N(n,I);l=await j(I,k,S)}else{const S=e??i.length;do{const N=d===0?o[0]??n.initialPageParam:Qa(n,l);if(d>0&&N==null)break;l=await j(l,N),d++}while(d<S)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function Qa(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Cd(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ys,ht,De,es,pt,St,wo,Ed=(wo=class extends Bo{constructor(t){super();K(this,pt);K(this,Ys);K(this,ht);K(this,De);K(this,es);B(this,Ys,t.client),this.mutationId=t.mutationId,B(this,De,t.mutationCache),B(this,ht,[]),this.state=t.state||Ho(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){v(this,ht).includes(t)||(v(this,ht).push(t),this.clearGcTimeout(),v(this,De).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){B(this,ht,v(this,ht).filter(r=>r!==t)),this.scheduleGc(),v(this,De).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){v(this,ht).length||(this.state.status==="pending"?this.scheduleGc():v(this,De).remove(this))}continue(){var t;return((t=v(this,es))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,d,c,m,u,x,p,b,g,y,f,j,S,N,I,k,M,C,D;const r=()=>{te(this,pt,St).call(this,{type:"continue"})},n={client:v(this,Ys),meta:this.options.meta,mutationKey:this.options.mutationKey};B(this,es,Fo({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(w,T)=>{te(this,pt,St).call(this,{type:"failed",failureCount:w,error:T})},onPause:()=>{te(this,pt,St).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>v(this,De).canRun(this)}));const a=this.state.status==="pending",i=!v(this,es).canStart();try{if(a)r();else{te(this,pt,St).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=v(this,De).config).onMutate)==null?void 0:l.call(o,t,this,n));const T=await((c=(d=this.options).onMutate)==null?void 0:c.call(d,t,n));T!==this.state.context&&te(this,pt,St).call(this,{type:"pending",context:T,variables:t,isPaused:i})}const w=await v(this,es).start();return await((u=(m=v(this,De).config).onSuccess)==null?void 0:u.call(m,w,t,this.state.context,this,n)),await((p=(x=this.options).onSuccess)==null?void 0:p.call(x,w,t,this.state.context,n)),await((g=(b=v(this,De).config).onSettled)==null?void 0:g.call(b,w,null,this.state.variables,this.state.context,this,n)),await((f=(y=this.options).onSettled)==null?void 0:f.call(y,w,null,t,this.state.context,n)),te(this,pt,St).call(this,{type:"success",data:w}),w}catch(w){try{throw await((S=(j=v(this,De).config).onError)==null?void 0:S.call(j,w,t,this.state.context,this,n)),await((I=(N=this.options).onError)==null?void 0:I.call(N,w,t,this.state.context,n)),await((M=(k=v(this,De).config).onSettled)==null?void 0:M.call(k,void 0,w,this.state.variables,this.state.context,this,n)),await((D=(C=this.options).onSettled)==null?void 0:D.call(C,void 0,w,t,this.state.context,n)),w}finally{te(this,pt,St).call(this,{type:"error",error:w})}}finally{v(this,De).runNext(this)}}},Ys=new WeakMap,ht=new WeakMap,De=new WeakMap,es=new WeakMap,pt=new WeakSet,St=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_e.batch(()=>{v(this,ht).forEach(n=>{n.onMutationUpdate(t)}),v(this,De).notify({mutation:this,type:"updated",action:t})})},wo);function Ho(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vt,dt,Js,jo,Id=(jo=class extends Ps{constructor(t={}){super();K(this,vt);K(this,dt);K(this,Js);this.config=t,B(this,vt,new Set),B(this,dt,new Map),B(this,Js,0)}build(t,r,n){const a=new Ed({client:t,mutationCache:this,mutationId:++cr(this,Js)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){v(this,vt).add(t);const r=dr(t);if(typeof r=="string"){const n=v(this,dt).get(r);n?n.push(t):v(this,dt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(v(this,vt).delete(t)){const r=dr(t);if(typeof r=="string"){const n=v(this,dt).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&v(this,dt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=dr(t);if(typeof r=="string"){const n=v(this,dt).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=dr(t);if(typeof r=="string"){const a=(n=v(this,dt).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_e.batch(()=>{v(this,vt).forEach(t=>{this.notify({type:"removed",mutation:t})}),v(this,vt).clear(),v(this,dt).clear()})}getAll(){return Array.from(v(this,vt))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Fa(r,n))}findAll(t={}){return this.getAll().filter(r=>Fa(t,r))}notify(t){_e.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return _e.batch(()=>Promise.all(t.map(r=>r.continue().catch(Fe))))}},vt=new WeakMap,dt=new WeakMap,Js=new WeakMap,jo);function dr(e){var t;return(t=e.options.scope)==null?void 0:t.id}var yt,Pt,Ue,wt,jt,kr,$n,No,Td=(No=class extends Ps{constructor(r,n){super();K(this,jt);K(this,yt);K(this,Pt);K(this,Ue);K(this,wt);B(this,yt,r),this.setOptions(n),this.bindMethods(),te(this,jt,kr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=v(this,yt).defaultMutationOptions(r),Tr(this.options,n)||v(this,yt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:v(this,Ue),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ns(n.mutationKey)!==ns(this.options.mutationKey)?this.reset():((a=v(this,Ue))==null?void 0:a.state.status)==="pending"&&v(this,Ue).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=v(this,Ue))==null||r.removeObserver(this)}onMutationUpdate(r){te(this,jt,kr).call(this),te(this,jt,$n).call(this,r)}getCurrentResult(){return v(this,Pt)}reset(){var r;(r=v(this,Ue))==null||r.removeObserver(this),B(this,Ue,void 0),te(this,jt,kr).call(this),te(this,jt,$n).call(this)}mutate(r,n){var a;return B(this,wt,n),(a=v(this,Ue))==null||a.removeObserver(this),B(this,Ue,v(this,yt).getMutationCache().build(v(this,yt),this.options)),v(this,Ue).addObserver(this),v(this,Ue).execute(r)}},yt=new WeakMap,Pt=new WeakMap,Ue=new WeakMap,wt=new WeakMap,jt=new WeakSet,kr=function(){var n;const r=((n=v(this,Ue))==null?void 0:n.state)??Ho();B(this,Pt,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},$n=function(r){_e.batch(()=>{var n,a,i,o,l,d,c,m;if(v(this,wt)&&this.hasListeners()){const u=v(this,Pt).variables,x=v(this,Pt).context,p={client:v(this,yt),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=v(this,wt)).onSuccess)==null||a.call(n,r.data,u,x,p),(o=(i=v(this,wt)).onSettled)==null||o.call(i,r.data,null,u,x,p)):(r==null?void 0:r.type)==="error"&&((d=(l=v(this,wt)).onError)==null||d.call(l,r.error,u,x,p),(m=(c=v(this,wt)).onSettled)==null||m.call(c,void 0,r.error,u,x,p))}this.listeners.forEach(u=>{u(v(this,Pt))})})},No),ft,ko,zd=(ko=class extends Ps{constructor(t={}){super();K(this,ft);this.config=t,B(this,ft,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??ra(a,r);let o=this.get(i);return o||(o=new Nd({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){v(this,ft).has(t.queryHash)||(v(this,ft).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=v(this,ft).get(t.queryHash);r&&(t.destroy(),r===t&&v(this,ft).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return v(this,ft).get(t)}getAll(){return[...v(this,ft).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Da(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Da(t,n)):r}notify(t){_e.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){_e.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_e.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ft=new WeakMap,ko),ye,Mt,Rt,Ss,Cs,$t,Es,Is,_o,Ad=(_o=class{constructor(e={}){K(this,ye);K(this,Mt);K(this,Rt);K(this,Ss);K(this,Cs);K(this,$t);K(this,Es);K(this,Is);B(this,ye,e.queryCache||new zd),B(this,Mt,e.mutationCache||new Id),B(this,Rt,e.defaultOptions||{}),B(this,Ss,new Map),B(this,Cs,new Map),B(this,$t,0)}mount(){cr(this,$t)._++,v(this,$t)===1&&(B(this,Es,aa.subscribe(async e=>{e&&(await this.resumePausedMutations(),v(this,ye).onFocus())})),B(this,Is,zr.subscribe(async e=>{e&&(await this.resumePausedMutations(),v(this,ye).onOnline())})))}unmount(){var e,t;cr(this,$t)._--,v(this,$t)===0&&((e=v(this,Es))==null||e.call(this),B(this,Es,void 0),(t=v(this,Is))==null||t.call(this),B(this,Is,void 0))}isFetching(e){return v(this,ye).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return v(this,Mt).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=v(this,ye).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=v(this,ye).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ot(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return v(this,ye).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=v(this,ye).get(n.queryHash),i=a==null?void 0:a.state.data,o=hd(t,i);if(o!==void 0)return v(this,ye).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return _e.batch(()=>v(this,ye).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=v(this,ye).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=v(this,ye);_e.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=v(this,ye);return _e.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=_e.batch(()=>v(this,ye).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Fe).catch(Fe)}invalidateQueries(e,t={}){return _e.batch(()=>(v(this,ye).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=_e.batch(()=>v(this,ye).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Fe)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Fe)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=v(this,ye).build(this,t);return r.isStaleByTime(Ot(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Fe).catch(Fe)}fetchInfiniteQuery(e){return e.behavior=Va(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Fe).catch(Fe)}ensureInfiniteQueryData(e){return e.behavior=Va(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zr.isOnline()?v(this,Mt).resumePausedMutations():Promise.resolve()}getQueryCache(){return v(this,ye)}getMutationCache(){return v(this,Mt)}getDefaultOptions(){return v(this,Rt)}setDefaultOptions(e){B(this,Rt,e)}setQueryDefaults(e,t){v(this,Ss).set(ns(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...v(this,Ss).values()],r={};return t.forEach(n=>{Zs(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){v(this,Cs).set(ns(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...v(this,Cs).values()],r={};return t.forEach(n=>{Zs(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...v(this,Rt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ra(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===na&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...v(this,Rt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){v(this,ye).clear(),v(this,Mt).clear()}},ye=new WeakMap,Mt=new WeakMap,Rt=new WeakMap,Ss=new WeakMap,Cs=new WeakMap,$t=new WeakMap,Es=new WeakMap,Is=new WeakMap,_o),Wo=h.createContext(void 0),Vr=e=>{const t=h.useContext(Wo);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Pd=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Wo.Provider,{value:e,children:t})),qo=h.createContext(!1),Md=()=>h.useContext(qo);qo.Provider;function Vo(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Qo=h.createContext(Vo()),Rd=()=>h.useContext(Qo),$d=({children:e})=>{const[t]=h.useState(()=>Vo());return s.jsx(Qo.Provider,{value:t,children:typeof e=="function"?e(t):e})},Ld=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Od=e=>{h.useEffect(()=>{e.clearReset()},[e])},Dd=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Oo(r,[e.error,n])),Fd=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Bd=(e,t)=>e.isLoading&&e.isFetching&&!t,Ud=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ga=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Zd(e,t,r){var u,x,p,b,g;const n=Md(),a=Rd(),i=Vr(),o=i.defaultQueryOptions(e);(x=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||x.call(u,o),o._optimisticResults=n?"isRestoring":"optimistic",Fd(o),Ld(o,a),Od(a);const l=!i.getQueryCache().get(o.queryHash),[d]=h.useState(()=>new t(i,o)),c=d.getOptimisticResult(o),m=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(y=>{const f=m?d.subscribe(_e.batchCalls(y)):Fe;return d.updateResult(),f},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),h.useEffect(()=>{d.setOptions(o)},[o,d]),Ud(o,c))throw Ga(o,d,a);if(Dd({result:c,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((b=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||b.call(p,o,c),o.experimental_prefetchInRender&&!rs&&Bd(c,n)){const y=l?Ga(o,d,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(Fe).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?c:d.trackResult(c)}function Go(e,t){return Zd(e,kd)}function Ds(e,t){const r=Vr(),[n]=h.useState(()=>new Td(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const a=h.useSyncExternalStore(h.useCallback(o=>n.subscribe(_e.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((o,l)=>{n.mutate(o,l).catch(Fe)},[n]);if(a.error&&Oo(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const Hd="modulepreload",Wd=function(e){return"/maihouses/"+e},Ka={},qd=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(d=>{if(d=Wd(d),d in Ka)return;Ka[d]=!0;const c=d.endsWith(".css"),m=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Hd,c||(u.as="script"),u.crossOrigin="",u.href=d,l&&u.setAttribute("nonce",l),document.head.appendChild(u),c)return new Promise((x,p)=>{u.addEventListener("load",x),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Vd(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const Qd=e=>{switch(e){case"success":return Yd;case"info":return Xd;case"warning":return Jd;case"error":return eu;default:return null}},Gd=Array(12).fill(0),Kd=({visible:e,className:t})=>$.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$.createElement("div",{className:"sonner-spinner"},Gd.map((r,n)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Yd=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Jd=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Xd=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),eu=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tu=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),su=()=>{const[e,t]=$.useState(document.hidden);return $.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let Ln=1;class ru{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Ln++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:n}),{...d,...t,id:i,dismissible:l,title:n}):d):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=a.then(async c=>{if(o=["resolve",c],$.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(au(c)&&!c.ok){i=!1;const u=typeof r.error=="function"?await r.error(`HTTP error! status: ${c.status}`):r.error,x=typeof r.description=="function"?await r.description(`HTTP error! status: ${c.status}`):r.description,b=typeof u=="object"&&!$.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:x,...b})}else if(c instanceof Error){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,x=typeof r.description=="function"?await r.description(c):r.description,b=typeof u=="object"&&!$.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:x,...b})}else if(r.success!==void 0){i=!1;const u=typeof r.success=="function"?await r.success(c):r.success,x=typeof r.description=="function"?await r.description(c):r.description,b=typeof u=="object"&&!$.isValidElement(u)?u:{message:u};this.create({id:n,type:"success",description:x,...b})}}).catch(async c=>{if(o=["reject",c],r.error!==void 0){i=!1;const m=typeof r.error=="function"?await r.error(c):r.error,u=typeof r.description=="function"?await r.description(c):r.description,p=typeof m=="object"&&!$.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:u,...p})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((c,m)=>l.then(()=>o[0]==="reject"?m(o[1]):c(o[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||Ln++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ze=new ru,nu=(e,t)=>{const r=(t==null?void 0:t.id)||Ln++;return Ze.addToast({title:e,...t,id:r}),r},au=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",iu=nu,ou=()=>Ze.toasts,lu=()=>Ze.getActiveToasts(),Zt=Object.assign(iu,{success:Ze.success,info:Ze.info,warning:Ze.warning,error:Ze.error,custom:Ze.custom,message:Ze.message,promise:Ze.promise,dismiss:Ze.dismiss,loading:Ze.loading},{getHistory:ou,getToasts:lu});Vd("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ur(e){return e.label!==void 0}const cu=3,du="24px",uu="16px",Ya=4e3,mu=356,hu=14,pu=45,fu=200;function mt(...e){return e.filter(Boolean).join(" ")}function xu(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}const gu=e=>{var t,r,n,a,i,o,l,d,c;const{invert:m,toast:u,unstyled:x,interacting:p,setHeights:b,visibleToasts:g,heights:y,index:f,toasts:j,expanded:S,removeToast:N,defaultRichColors:I,closeButton:k,style:M,cancelButtonStyle:C,actionButtonStyle:D,className:w="",descriptionClassName:T="",duration:O,position:A,gap:E,expandByDefault:_,classNames:L,icons:U,closeButtonAriaLabel:z="Close toast"}=e,[W,H]=$.useState(null),[Z,ce]=$.useState(null),[G,X]=$.useState(!1),[re,xe]=$.useState(!1),[ne,oe]=$.useState(!1),[$e,ze]=$.useState(!1),[ae,de]=$.useState(!1),[Nt,$s]=$.useState(0),[Jr,ar]=$.useState(0),Q=$.useRef(u.duration||O||Ya),me=$.useRef(null),ge=$.useRef(null),he=f===0,Le=f+1<=g,we=u.type,ut=u.dismissible!==!1,Xr=u.className||"",bc=u.descriptionClassName||"",ir=$.useMemo(()=>y.findIndex(ee=>ee.toastId===u.id)||0,[y,u.id]),vc=$.useMemo(()=>{var ee;return(ee=u.closeButton)!=null?ee:k},[u.closeButton,k]),Sa=$.useMemo(()=>u.duration||O||Ya,[u.duration,O]),en=$.useRef(0),cs=$.useRef(0),Ca=$.useRef(0),ds=$.useRef(null),[yc,wc]=A.split("-"),Ea=$.useMemo(()=>y.reduce((ee,Se,Ae)=>Ae>=ir?ee:ee+Se.height,0),[y,ir]),Ia=su(),jc=u.invert||m,tn=we==="loading";cs.current=$.useMemo(()=>ir*E+Ea,[ir,Ea]),$.useEffect(()=>{Q.current=Sa},[Sa]),$.useEffect(()=>{X(!0)},[]),$.useEffect(()=>{const ee=ge.current;if(ee){const Se=ee.getBoundingClientRect().height;return ar(Se),b(Ae=>[{toastId:u.id,height:Se,position:u.position},...Ae]),()=>b(Ae=>Ae.filter(Qe=>Qe.toastId!==u.id))}},[b,u.id]),$.useLayoutEffect(()=>{if(!G)return;const ee=ge.current,Se=ee.style.height;ee.style.height="auto";const Ae=ee.getBoundingClientRect().height;ee.style.height=Se,ar(Ae),b(Qe=>Qe.find(Ee=>Ee.toastId===u.id)?Qe.map(Ee=>Ee.toastId===u.id?{...Ee,height:Ae}:Ee):[{toastId:u.id,height:Ae,position:u.position},...Qe])},[G,u.title,u.description,b,u.id,u.jsx,u.action,u.cancel]);const kt=$.useCallback(()=>{xe(!0),$s(cs.current),b(ee=>ee.filter(Se=>Se.toastId!==u.id)),setTimeout(()=>{N(u)},fu)},[u,N,b,cs]);$.useEffect(()=>{if(u.promise&&we==="loading"||u.duration===1/0||u.type==="loading")return;let ee;return S||p||Ia?(()=>{if(Ca.current<en.current){const Qe=new Date().getTime()-en.current;Q.current=Q.current-Qe}Ca.current=new Date().getTime()})():(()=>{Q.current!==1/0&&(en.current=new Date().getTime(),ee=setTimeout(()=>{u.onAutoClose==null||u.onAutoClose.call(u,u),kt()},Q.current))})(),()=>clearTimeout(ee)},[S,p,u,we,Ia,kt]),$.useEffect(()=>{u.delete&&(kt(),u.onDismiss==null||u.onDismiss.call(u,u))},[kt,u.delete]);function Nc(){var ee;if(U!=null&&U.loading){var Se;return $.createElement("div",{className:mt(L==null?void 0:L.loader,u==null||(Se=u.classNames)==null?void 0:Se.loader,"sonner-loader"),"data-visible":we==="loading"},U.loading)}return $.createElement(Kd,{className:mt(L==null?void 0:L.loader,u==null||(ee=u.classNames)==null?void 0:ee.loader),visible:we==="loading"})}const kc=u.icon||(U==null?void 0:U[we])||Qd(we);var Ta,za;return $.createElement("li",{tabIndex:0,ref:ge,className:mt(w,Xr,L==null?void 0:L.toast,u==null||(t=u.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[we],u==null||(r=u.classNames)==null?void 0:r[we]),"data-sonner-toast":"","data-rich-colors":(Ta=u.richColors)!=null?Ta:I,"data-styled":!(u.jsx||u.unstyled||x),"data-mounted":G,"data-promise":!!u.promise,"data-swiped":ae,"data-removed":re,"data-visible":Le,"data-y-position":yc,"data-x-position":wc,"data-index":f,"data-front":he,"data-swiping":ne,"data-dismissible":ut,"data-type":we,"data-invert":jc,"data-swipe-out":$e,"data-swipe-direction":Z,"data-expanded":!!(S||_&&G),"data-testid":u.testId,style:{"--index":f,"--toasts-before":f,"--z-index":j.length-f,"--offset":`${re?Nt:cs.current}px`,"--initial-height":_?"auto":`${Jr}px`,...M,...u.style},onDragEnd:()=>{oe(!1),H(null),ds.current=null},onPointerDown:ee=>{ee.button!==2&&(tn||!ut||(me.current=new Date,$s(cs.current),ee.target.setPointerCapture(ee.pointerId),ee.target.tagName!=="BUTTON"&&(oe(!0),ds.current={x:ee.clientX,y:ee.clientY})))},onPointerUp:()=>{var ee,Se,Ae;if($e||!ut)return;ds.current=null;const Qe=Number(((ee=ge.current)==null?void 0:ee.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),or=Number(((Se=ge.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ee=new Date().getTime()-((Ae=me.current)==null?void 0:Ae.getTime()),Ke=W==="x"?Qe:or,lr=Math.abs(Ke)/Ee;if(Math.abs(Ke)>=pu||lr>.11){$s(cs.current),u.onDismiss==null||u.onDismiss.call(u,u),ce(W==="x"?Qe>0?"right":"left":or>0?"down":"up"),kt(),ze(!0);return}else{var nt,at;(nt=ge.current)==null||nt.style.setProperty("--swipe-amount-x","0px"),(at=ge.current)==null||at.style.setProperty("--swipe-amount-y","0px")}de(!1),oe(!1),H(null)},onPointerMove:ee=>{var Se,Ae,Qe;if(!ds.current||!ut||((Se=window.getSelection())==null?void 0:Se.toString().length)>0)return;const Ee=ee.clientY-ds.current.y,Ke=ee.clientX-ds.current.x;var lr;const nt=(lr=e.swipeDirections)!=null?lr:xu(A);!W&&(Math.abs(Ke)>1||Math.abs(Ee)>1)&&H(Math.abs(Ke)>Math.abs(Ee)?"x":"y");let at={x:0,y:0};const Aa=Ut=>1/(1.5+Math.abs(Ut)/20);if(W==="y"){if(nt.includes("top")||nt.includes("bottom"))if(nt.includes("top")&&Ee<0||nt.includes("bottom")&&Ee>0)at.y=Ee;else{const Ut=Ee*Aa(Ee);at.y=Math.abs(Ut)<Math.abs(Ee)?Ut:Ee}}else if(W==="x"&&(nt.includes("left")||nt.includes("right")))if(nt.includes("left")&&Ke<0||nt.includes("right")&&Ke>0)at.x=Ke;else{const Ut=Ke*Aa(Ke);at.x=Math.abs(Ut)<Math.abs(Ke)?Ut:Ke}(Math.abs(at.x)>0||Math.abs(at.y)>0)&&de(!0),(Ae=ge.current)==null||Ae.style.setProperty("--swipe-amount-x",`${at.x}px`),(Qe=ge.current)==null||Qe.style.setProperty("--swipe-amount-y",`${at.y}px`)}},vc&&!u.jsx&&we!=="loading"?$.createElement("button",{"aria-label":z,"data-disabled":tn,"data-close-button":!0,onClick:tn||!ut?()=>{}:()=>{kt(),u.onDismiss==null||u.onDismiss.call(u,u)},className:mt(L==null?void 0:L.closeButton,u==null||(n=u.classNames)==null?void 0:n.closeButton)},(za=U==null?void 0:U.close)!=null?za:tu):null,(we||u.icon||u.promise)&&u.icon!==null&&((U==null?void 0:U[we])!==null||u.icon)?$.createElement("div",{"data-icon":"",className:mt(L==null?void 0:L.icon,u==null||(a=u.classNames)==null?void 0:a.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||Nc():null,u.type!=="loading"?kc:null):null,$.createElement("div",{"data-content":"",className:mt(L==null?void 0:L.content,u==null||(i=u.classNames)==null?void 0:i.content)},$.createElement("div",{"data-title":"",className:mt(L==null?void 0:L.title,u==null||(o=u.classNames)==null?void 0:o.title)},u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title),u.description?$.createElement("div",{"data-description":"",className:mt(T,bc,L==null?void 0:L.description,u==null||(l=u.classNames)==null?void 0:l.description)},typeof u.description=="function"?u.description():u.description):null),$.isValidElement(u.cancel)?u.cancel:u.cancel&&ur(u.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||C,onClick:ee=>{ur(u.cancel)&&ut&&(u.cancel.onClick==null||u.cancel.onClick.call(u.cancel,ee),kt())},className:mt(L==null?void 0:L.cancelButton,u==null||(d=u.classNames)==null?void 0:d.cancelButton)},u.cancel.label):null,$.isValidElement(u.action)?u.action:u.action&&ur(u.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||D,onClick:ee=>{ur(u.action)&&(u.action.onClick==null||u.action.onClick.call(u.action,ee),!ee.defaultPrevented&&kt())},className:mt(L==null?void 0:L.actionButton,u==null||(c=u.classNames)==null?void 0:c.actionButton)},u.action.label):null)};function Ja(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function bu(e,t){const r={};return[e,t].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?uu:du;function d(c){["top","right","bottom","left"].forEach(m=>{r[`${o}-${m}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?r[`${o}-${c}`]=l:r[`${o}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):d(l)}),r}const vu=$.forwardRef(function(t,r){const{id:n,invert:a,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:d,className:c,offset:m,mobileOffset:u,theme:x="light",richColors:p,duration:b,style:g,visibleToasts:y=cu,toastOptions:f,dir:j=Ja(),gap:S=hu,icons:N,containerAriaLabel:I="Notifications"}=t,[k,M]=$.useState([]),C=$.useMemo(()=>n?k.filter(G=>G.toasterId===n):k.filter(G=>!G.toasterId),[k,n]),D=$.useMemo(()=>Array.from(new Set([i].concat(C.filter(G=>G.position).map(G=>G.position)))),[C,i]),[w,T]=$.useState([]),[O,A]=$.useState(!1),[E,_]=$.useState(!1),[L,U]=$.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=$.useRef(null),W=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=$.useRef(null),Z=$.useRef(!1),ce=$.useCallback(G=>{M(X=>{var re;return(re=X.find(xe=>xe.id===G.id))!=null&&re.delete||Ze.dismiss(G.id),X.filter(({id:xe})=>xe!==G.id)})},[]);return $.useEffect(()=>Ze.subscribe(G=>{if(G.dismiss){requestAnimationFrame(()=>{M(X=>X.map(re=>re.id===G.id?{...re,delete:!0}:re))});return}setTimeout(()=>{Sc.flushSync(()=>{M(X=>{const re=X.findIndex(xe=>xe.id===G.id);return re!==-1?[...X.slice(0,re),{...X[re],...G},...X.slice(re+1)]:[G,...X]})})})}),[k]),$.useEffect(()=>{if(x!=="system"){U(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;const G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:X})=>{U(X?"dark":"light")})}catch{G.addListener(({matches:re})=>{try{U(re?"dark":"light")}catch(xe){console.error(xe)}})}},[x]),$.useEffect(()=>{k.length<=1&&A(!1)},[k]),$.useEffect(()=>{const G=X=>{var re;if(o.every(oe=>X[oe]||X.code===oe)){var ne;A(!0),(ne=z.current)==null||ne.focus()}X.code==="Escape"&&(document.activeElement===z.current||(re=z.current)!=null&&re.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[o]),$.useEffect(()=>{if(z.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,Z.current=!1)}},[z.current]),$.createElement("section",{ref:r,"aria-label":`${I} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((G,X)=>{var re;const[xe,ne]=G.split("-");return C.length?$.createElement("ol",{key:G,dir:j==="auto"?Ja():j,tabIndex:-1,ref:z,className:c,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":xe,"data-x-position":ne,style:{"--front-toast-height":`${((re=w[0])==null?void 0:re.height)||0}px`,"--width":`${mu}px`,"--gap":`${S}px`,...g,...bu(m,u)},onBlur:oe=>{Z.current&&!oe.currentTarget.contains(oe.relatedTarget)&&(Z.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,H.current=oe.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{E||A(!1)},onDragEnd:()=>A(!1),onPointerDown:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||_(!0)},onPointerUp:()=>_(!1)},C.filter(oe=>!oe.position&&X===0||oe.position===G).map((oe,$e)=>{var ze,ae;return $.createElement(gu,{key:oe.id,icons:N,index:$e,toast:oe,defaultRichColors:p,duration:(ze=f==null?void 0:f.duration)!=null?ze:b,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:a,visibleToasts:y,closeButton:(ae=f==null?void 0:f.closeButton)!=null?ae:d,interacting:E,position:G,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,closeButtonAriaLabel:f==null?void 0:f.closeButtonAriaLabel,removeToast:ce,toasts:C.filter(de=>de.position==oe.position),heights:w.filter(de=>de.position==oe.position),setHeights:T,expandByDefault:l,gap:S,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),Ko="maihouse_config";async function yu(e){return(await fetch(e)).json()}function wu(e){return e&&typeof e=="object"&&typeof e.apiBaseUrl=="string"&&typeof e.appVersion=="string"&&typeof e.minBackend=="string"&&typeof e.features=="object"}async function ju(){try{const r=localStorage.getItem(Ko);if(r){const n=JSON.parse(r);if(wu(n))return{...n,...Yo()}}}catch{}const t=`${window.location.origin}/maihouses/app.config.json`;return yu(t)}function it(e){const t=new URLSearchParams(location.search).get(e),r=location.hash.indexOf("?");return(r>-1?new URLSearchParams(location.hash.slice(r)).get(e):null)??t??void 0}function Yo(){const e=it("slots"),t=e?e.split(",").reduce((r,n)=>(r[n.trim()]=!0,r),{}):void 0;return{apiBaseUrl:it("api"),features:t,mock:it("mock")?it("mock")==="1":void 0,latency:it("latency")?+it("latency"):void 0,error:it("error")?+it("error"):void 0,q:it("q"),devtools:it("devtools"),mockSeed:it("seed")}}async function Jo(){const e=await ju(),t=Yo(),r={...e,...t,mock:t.mock??e.mock??!0,latency:t.latency??e.latency??0,error:t.error??e.error??0};try{localStorage.setItem(Ko,JSON.stringify(r))}catch{}return r}let mr;const Nu=new Uint8Array(16);function ku(){if(!mr&&(mr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mr(Nu)}const Ie=[];for(let e=0;e<256;++e)Ie.push((e+256).toString(16).slice(1));function _u(e,t=0){return Ie[e[t+0]]+Ie[e[t+1]]+Ie[e[t+2]]+Ie[e[t+3]]+"-"+Ie[e[t+4]]+Ie[e[t+5]]+"-"+Ie[e[t+6]]+Ie[e[t+7]]+"-"+Ie[e[t+8]]+Ie[e[t+9]]+"-"+Ie[e[t+10]]+Ie[e[t+11]]+Ie[e[t+12]]+Ie[e[t+13]]+Ie[e[t+14]]+Ie[e[t+15]]}const Su=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xa={randomUUID:Su};function On(e,t,r){if(Xa.randomUUID&&!e)return Xa.randomUUID();e=e||{};const n=e.random||(e.rng||ku)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,_u(n)}function We(e,t){try{console.debug("[track]",e,t||{})}catch{}}const qe={QuietOn:"user.needs_quiet_space",QuietOff:"user.back_to_explore",QuietAutoOff:"user.quiet_space_timeout",QuietTurnUsed:"user.quiet_space_turn_used",WarmbarView:"ui.warmbar_view",WarmbarContinue:"ui.warmbar_click_continue",WarmbarDismiss:"ui.warmbar_click_dismiss",MoodPick:"user.feeling_set",NoteSaved:"user.reflects_on_viewing",DebriefGen:"user.debrief_mna_generated",DebriefSave:"user.debrief_saved",BudgetCopy:"user.seeks_budget_clarity",ELI5Open:"user.needs_plain_explain",RewriteGen:"user.needs_polite_message_generated",RewriteAdopt:"user.polite_message_adopted"},Xo="mai-quiet-mode-v1",Cu=h.createContext(null);function ei(){try{const e=localStorage.getItem(Xo);return e?JSON.parse(e):{isQuiet:!1,untilTs:null,remainingTurns:null}}catch{return{isQuiet:!1,untilTs:null,remainingTurns:null}}}function us(e){localStorage.setItem(Xo,JSON.stringify(e))}const Eu=({children:e})=>{const[t,r]=h.useState(()=>ei()),n=h.useRef(null),a=h.useCallback(()=>{if(!t.isQuiet)return!1;const c=Date.now();return!(t.untilTs&&c>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)},[t]);h.useEffect(()=>{const c=Date.now();t.isQuiet&&t.untilTs&&c>t.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),us({isQuiet:!1,untilTs:null,remainingTurns:null}))},[t]),h.useEffect(()=>(n.current&&window.clearInterval(n.current),n.current=window.setInterval(()=>{const c=Date.now(),m=ei();m.isQuiet&&m.untilTs&&c>m.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),us({isQuiet:!1,untilTs:null,remainingTurns:null}))},3e4),()=>{n.current&&window.clearInterval(n.current)}),[]);const i=h.useCallback(c=>{const m=(c==null?void 0:c.minutes)??null,u=(c==null?void 0:c.turns)??10,x=c==null?void 0:c.reason,p=m?Date.now()+m*6e4:null,b={isQuiet:!0,...x&&{reason:x},untilTs:p,remainingTurns:u};r(b),us(b),We(qe.QuietOn,{reason:x,minutes:m,turns:u})},[]),o=h.useCallback(()=>{const c={isQuiet:!1,untilTs:null,remainingTurns:null};r(c),us(c),We(qe.QuietOff,{})},[]),l=h.useCallback(()=>{r(c=>{if(!c.isQuiet||c.remainingTurns===null)return c;const m=Math.max(0,(c.remainingTurns??0)-1),u={...c,remainingTurns:m};if(us(u),m===0){const x={isQuiet:!1,untilTs:null,remainingTurns:null};return us(x),We(qe.QuietAutoOff,{reason:"turns_exhausted"}),x}return u})},[]),d=h.useMemo(()=>({state:t,startQuiet:i,clearQuiet:o,decrementTurn:l,isActive:a}),[t,i,o,l,a]);return s.jsx(Cu.Provider,{value:d,children:e})};function Iu(){try{const e=localStorage.getItem("mai-quiet-mode-v1");if(!e)return!1;const t=JSON.parse(e),r=Date.now();return!(!t.isQuiet||t.untilTs&&r>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)}catch{return!1}}const el="mai-user-profile-v1",ti="mai-first-seen-ts",tl="mai-warmbar-dismissed-date";function er(){try{const e=localStorage.getItem(el);return e?JSON.parse(e):{tags:[]}}catch{return{tags:[]}}}function sl(e){localStorage.setItem(el,JSON.stringify(e))}function Tu(e){const t=er(),r=new Set([...t.tags||[],...e].filter(Boolean));t.tags=Array.from(r).slice(0,8),sl(t)}function zu(e){const t=er();t.lastMood=e,sl(t)}function Au(){return localStorage.getItem(ti)?{isFirstVisit:!1}:(localStorage.setItem(ti,String(Date.now())),{isFirstVisit:!0})}function Pu(){localStorage.setItem(tl,rl())}function Mu(){return localStorage.getItem(tl)===rl()}function Ru(e=3){return(er().tags||[]).slice(0,e)}function rl(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function $u(e,t){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((n-a)/864e5)}function Lu(e){if(!e)return null;const t=new Date;if(e.birthday){const r=si(e.birthday,t,7);if(r)return r}if(e.move_in_date){const r=si(e.move_in_date,t,7,"");if(r)return r}return null}function si(e,t,r=7,n){const[a,i,o]=e.split("-").map(c=>Number(c));if(!a||!i||!o)return null;const l=new Date(t.getFullYear(),i-1,o);return Math.abs($u(l,t))<=r?n===""?"":"":null}const Ou=` 20 





- 
-  emoji 1 
- 1-3  4-5 
- 

 




- 80% 20% 
- 
- 
- 


-  2  3 
- 
- ...
- 


- 
- 
- 

 



   
  ...
   24  
  ... 



 


[[:]]


... [[:...]] 



 




- 
- 
- 



 


...
...


 

[[::]]

  

 

 5 
- 
- 
-  OK 




 
[[::]]



 

 
[[::ID]]


 

 
[[:]]


 MaiMai v6.0 5


  


  


  

 

### 
- 
- 
- 
- 
- 

### 
- 
- 
-  2 
-  3 

### 
 
 
 
  5 

### 

- 
- 
-  2-3 


- 
- 
- 
-  AI
- 
- 



`,Du=["","","",""],Fu=["","","",""];function Bu(e,t){const r=e.toLowerCase();if(["","","","","","","","","","","","","","","",""].some(i=>r.includes(i)))return"explicit";let a=0;return t.forEach(i=>{a+=i}),a>=3?"semi-warm":"exploring"}let ri=[];function Uu(){if(typeof window<"u"){const e=localStorage.getItem("maimai_pain_points");if(e)try{ri=JSON.parse(e)}catch{ri=[]}}}const Zu={:{weight:1,category:"education"},:{weight:1,category:"education"},:{weight:2,category:"education"},:{weight:3,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:1,category:"education"},:{weight:1,category:"commute"},:{weight:3,category:"commute"},:{weight:2,category:"commute"},:{weight:2,category:"commute"},:{weight:1,category:"commute"},:{weight:2,category:"commute"},:{weight:2,category:"commute"},:{weight:3,category:"noise"},:{weight:3,category:"noise"},:{weight:2,category:"noise"},:{weight:1,category:"noise"},:{weight:1,category:"noise"},:{weight:2,category:"noise"},:{weight:2,category:"pet"},:{weight:2,category:"pet"},:{weight:3,category:"pet"},:{weight:3,category:"pet"},:{weight:2,category:"pet"},:{weight:2,category:"life-change"},:{weight:3,category:"life-change"},:{weight:3,category:"life-change"},:{weight:2,category:"life-change"},:{weight:1,category:"life-change"},:{weight:2,category:"life-change"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:1,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:3,category:"quality"},:{weight:3,category:"quality"},:{weight:2,category:"quality"},:{weight:1,category:"quality"},:{weight:2,category:"quality"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:2,category:"healing"},:{weight:2,category:"healing"},:{weight:1,category:"healing"},:{weight:1,category:"healing"},:{weight:1,category:"healing"}};let ts=new Map;function Hu(e){const t=e.toLowerCase();return Object.entries(Zu).forEach(([r,{weight:n,category:a}])=>{if(t.includes(r)){const i=ts.get(a)||0;ts.set(a,i+n)}}),ts}function Wu(){return ts}function qu(){let e=0;return ts.forEach(t=>{e+=t}),e}function Vu(){let e=null,t=0;return ts.forEach((r,n)=>{r>t&&(t=r,e=n)}),t>=3?e:null}function Qu(){ts=new Map}const Gu={"no-need":[//,//,//,//,//,//,//,/.*/,/.*/,//,//],budget:[//,//,//,//,//,//,//,//,//],later:[//,//,//,//,//,//,//,//,//,//,//],"negative-emotion":[//,//,//,//,//,//,//,//,//]};function Ku(e){const t=e.toLowerCase();for(const[r,n]of Object.entries(Gu))if(n.some(a=>a.test(t)))return r;return null}let Pe={};function Yu(e){const t=e.toLowerCase(),r={},n=[/(?:||).*?(?:|)(.+?)(?:||||$)/,/(.+?)(?:|)/];for(const o of n){const l=t.match(o);if(l&&l[1]){Pe.workArea=l[1].trim(),r.workArea=l[1].trim();break}}const a=[/(?:|).*?(?:|)(.+?)(?:||||$)/,/(.+?)$/];for(const o of a){const l=t.match(o);if(l&&l[1]){Pe.homeArea=l[1].trim(),r.homeArea=l[1].trim();break}}/.*(?:||30||||)/.test(t)&&(Pe.commutePain=e,r.commutePain=e),/||||/.test(t)?(Pe.familyStatus="newlywed",r.familyStatus="newlywed"):/|||||/.test(t)?(Pe.familyStatus="with-kids",r.familyStatus="with-kids"):/||/.test(t)?(Pe.familyStatus="single",r.familyStatus="single"):/|||||/.test(t)?(Pe.familyStatus="couple",r.familyStatus="couple"):/|||/.test(t)&&(Pe.familyStatus="with-parents",r.familyStatus="with-parents");const i={"|||":"fitness","|||":"homebody","||":"social","||":"workaholic","||":"early-bird","||":"night-owl"};for(const[o,l]of Object.entries(i))new RegExp(o).test(t)&&(Pe.lifestyle=[...Pe.lifestyle||[],l],r.lifestyle=Pe.lifestyle);return Object.keys(r).length>0&&(Pe.lastUpdated=Date.now(),Xu()),r}function Ju(){return Pe}function Xu(){typeof window<"u"&&localStorage.setItem("maimai_user_profile",JSON.stringify(Pe))}function em(){if(typeof window<"u"){const e=localStorage.getItem("maimai_user_profile");if(e)try{Pe=JSON.parse(e)}catch{Pe={}}}}function tm(){const e=qu();return Hs>=10&&e>=5?{level:"intimate",label:"",tactics:["","",""],canRecommend:!0}:e>=4?{level:"hot",label:"",tactics:["","",""],canRecommend:!0}:e>=2?{level:"warm",label:"",tactics:["","",""],canRecommend:!1}:{level:"cold",label:"",tactics:["","",""],canRecommend:!1}}function sm(){const e=new Date().getHours();return e>=6&&e<10?"morning":e>=10&&e<14?"lunch":e>=14&&e<17?"afternoon":e>=17&&e<21?"evening":"night"}const rm={morning:"",lunch:"",afternoon:"",evening:"",night:""};function nm(){return rm[sm()]}function am(e){const t=e.toLowerCase();return["","","","?","","","",""].some(i=>t.includes(i))?"good":["","","","","","","..."].filter(i=>t.includes(i)).length>=2?"bad":"neutral"}let _r=0,Hs=0;function im(e){return Hs++,e==="exploring"?_r++:_r=0,_r}function om(){_r=0}function ni(){const t=(typeof window<"u"?parseInt(localStorage.getItem("mai-intimacy-rounds")||"0",10):0)+Hs;return t>=50?{level:"soulmate",label:"",emoji:""}:t>=30?{level:"bestie",label:"",emoji:""}:t>=15?{level:"close",label:"",emoji:""}:t>=6?{level:"familiar",label:"",emoji:""}:{level:"new",label:"",emoji:""}}function lm(){if(typeof window<"u"){const e=parseInt(localStorage.getItem("mai-intimacy-rounds")||"0",10);localStorage.setItem("mai-intimacy-rounds",String(e+Hs)),Hs=0}}const ai=["",""," OK ","",""];function cm(){const e=Math.floor(Math.random()*ai.length),t=ai[e];return t!==void 0?t:""}function dm(e){const t=e.toLowerCase();if(["","","","",""].filter(d=>t.includes(d)).length>=2)return"storytelling";const n=["","","","","","","",""],a=["","","","","","","",""],i=["","","","","","",""],o=["","","","","",""],l=["","","","","","","","",""];return n.some(d=>t.includes(d))?"frustrated":a.some(d=>t.includes(d))?"stressed":i.some(d=>t.includes(d))?"confused":o.some(d=>t.includes(d))?"curious":l.some(d=>t.includes(d))?"happy":"neutral"}let xs=!1,oa=null;function um(e){xs=!0,oa=e}function mm(){return{hasPaved:xs,category:oa}}function nl(){xs=!1,oa=null}function hm(e){return["","","","","","","","","","","","",""].some(r=>e.includes(r))}let al=null;function pm(e){al=e}function fm(){return al}function xm(e,t,r,n,a,i,o){return r==="storytelling"||r==="frustrated"||r==="stressed"||t==="bad"?"none":e==="explicit"&&r==="curious"?"card":e==="explicit"?xs?"card":"pave":e==="semi-warm"&&xs&&i?"card":e==="semi-warm"&&t==="good"&&a&&!xs?"pave":e==="exploring"&&n>=5?"seed":"none"}const gm={education:{name:"",topic:"",pavePhrase:"..."},commute:{name:"",topic:"5",pavePhrase:"..."},noise:{name:"",topic:"",pavePhrase:"... "},pet:{name:"",topic:"",pavePhrase:"..."},"life-change":{name:"",topic:"",pavePhrase:"..."},rental:{name:"",topic:"",pavePhrase:"... "},stress:{name:"",topic:"",pavePhrase:"..."},quality:{name:"",topic:"",pavePhrase:"... "},amenity:{name:"",topic:"",pavePhrase:"..."},healing:{name:"",topic:"",pavePhrase:"..."}};function ii(e){return gm[e]}function bm(e){const t=/[\u{1F300}-\u{1F9FF}]/u.test(e),r=e.length;return r<10&&!t?"brief":t||r>30?"expressive":"neutral"}function vm(e){return["","","","","","","",""].some(r=>e.includes(r))}function ym(){Qu(),om(),nl(),pm(null)}function wm(e,t,r,n,a,i){let o=Ou;const l={exploring:`

 

- 
- 
- `,"semi-warm":`

 
${n||""}
- 
- 
- `,explicit:`

 

- 
- 
- `}[e];switch(o+=l,t==="storytelling"?o+=`

 
`:t==="frustrated"?o+=`

 


`:t==="stressed"&&(o+=`

 


`),r){case"seed":const c=cm();o+=`

 
 ${a} 
${c}
`;break;case"pave":const m=fm();if(m)o+=`

 
${m.script.topic}

${m.script.bridge}

${m.script.feature}
 `;else if(n){const u=ii(n);o+=`

 
${n}
${u.pavePhrase}
 `}break;case"card":if(n){const u=ii(n);o+=`

 
${n}

[[:${u.name}:${u.topic}]]`}break;case"listing":o+=`

 


[[::MH-2024-001]]`;break;default:o+=`

 
`}const d={brief:`

1-2`,expressive:`

`,neutral:""}[i];return d&&(o+=d),o}function jm(e){if(e.size<2)return null;const t={education:"",commute:"",noise:"",pet:"","life-change":"",rental:"",stress:"",quality:"",amenity:"",healing:""},r=[];return e.forEach((n,a)=>{n>=2&&t[a]&&r.push(t[a])}),r.length===0?null:`
 ${r.join("")}

`}function Nm(e){typeof window<"u"&&localStorage.setItem("maimai_visit_memory",JSON.stringify(e))}function il(){if(typeof window<"u"){const e=localStorage.getItem("maimai_visit_memory");if(e)try{return JSON.parse(e)}catch{return null}}return null}function km(){const e=il();if(!e)return null;const t=Math.floor((Date.now()-e.lastVisit)/(1e3*60*60*24));if(t<1||t>7)return null;const r={commute:" ",education:"",noise:"",rental:"",pet:"","life-change":"",stress:"",quality:"",amenity:"",healing:""};return e.dominantCategory&&r[e.dominantCategory]?r[e.dominantCategory]:""}function _m(e){const t=il(),r={lastVisit:Date.now(),dominantCategory:e||(t==null?void 0:t.dominantCategory)||null,keywords:(t==null?void 0:t.keywords)||[],chitchatTopics:(t==null?void 0:t.chitchatTopics)||[]};Nm(r)}const oi={rentalToWall:`
  


  


...


...

 


[[::]]


`,explicitToListing:`
   + 











 
 
 


[[::NH-2024-001]]

 5 


`};function Sm(e,t,r){return e==="semi-warm"&&t>=3&&r==="good"}const Cm={commute:{communities:["","","",""],features:["","",""]},education:{communities:["","",""],features:["","",""]},noise:{communities:["","",""],features:["","",""]},pet:{communities:["","",""],features:["","",""]},rental:{communities:["","",""],features:["","",""]},quality:{communities:["","",""],features:["","",""]},"life-change":{communities:["","",""],features:["","",""]}};function Em(e){return e&&Cm[e]||null}const Im=[//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//];function Tm(e){return Im.some(t=>t.test(e))}function zm(){const e=["...  ","... ","","... "," "],t=Math.floor(Math.random()*e.length),r=e[t];return r===void 0?"":r}let Ge={hasArea:!1,hasBudget:!1,hasTimeline:!1,hasViewedCommunity:!1,hasViewedListing:!1,hasFamilyNeeds:!1};function Am(e){const t=e.toLowerCase();/.*?|||.*|.*/.test(t)&&(Ge.hasArea=!0),/||||/.test(t)&&(Ge.hasBudget=!0),/||||||/.test(t)&&(Ge.hasTimeline=!0),/||||||/.test(t)&&(Ge.hasFamilyNeeds=!0),Mm()}function ol(){let e=0;return Ge.hasArea&&e++,Ge.hasBudget&&e++,Ge.hasTimeline&&e++,Ge.hasViewedCommunity&&e++,Ge.hasViewedListing&&e++,Ge.hasFamilyNeeds&&e++,e}function Pm(){return ol()>=4}function Mm(){typeof window<"u"&&localStorage.setItem("maimai_buying_readiness",JSON.stringify(Ge))}function Rm(){if(typeof window<"u"){const e=localStorage.getItem("maimai_buying_readiness");if(e)try{Ge={...Ge,...JSON.parse(e)}}catch{}}}const nn=[{id:"priority",question:"",options:[{key:"A",text:"",category:"commute"},{key:"B",text:"",category:"education"},{key:"C",text:"",category:"noise"},{key:"D",text:"",category:"rental"}],followUp:"{type}..."},{id:"lifestyle",question:"",options:[{key:"A",text:"",category:"noise"},{key:"B",text:"",category:"amenity"},{key:"C",text:"",category:"education"},{key:"D",text:"",category:"pet"}],followUp:"{feature}"},{id:"dealbreaker",question:"",options:[{key:"A",text:" 1 ",category:"commute"},{key:"B",text:"",category:"noise"},{key:"C",text:"",category:"rental"},{key:"D",text:"",category:"quality"}],followUp:" "}];let ll=!1;function $m(e){return ll||e<4||e>6?!1:Math.random()>.6}function Lm(){const e=Math.floor(Math.random()*nn.length),t=nn[e];if(ll=!0,t===void 0){const r=nn[0];return r===void 0?{id:"default",question:"",options:[{key:"A",text:"",category:"commute"},{key:"B",text:"",category:"education"},{key:"C",text:"",category:"noise"},{key:"D",text:"",category:"rental"}],followUp:""}:r}return t}const Om="100%  12 //";let Dn=!1;const an=` 20 


- 
- 
- 
- 


- 
-  emoji 1 
-  1-3 
- 

`;function Dm(e){Dn=e,ym()}function Fm(e){return["","","","","",""].some(r=>e.includes(r))}function Bm(e){var L,U,z,W,H;if(Iu())return Om;const r=localStorage.getItem("mai-mood-v1")||"neutral",a=(er().tags||[]).slice(0,5),i=((L=e==null?void 0:e.filter(Z=>Z.role==="user").pop())==null?void 0:L.content)||"";if(em(),Rm(),Tm(i)){const Z=zm();return an+`

 

${Z}`}if(Dn)if(Fm(i))Dn=!1;else return an;const o=Ku(i);if(o&&(o==="no-need"||o==="negative-emotion"))return an+`

${o==="no-need"?"":""} 100% `;Yu(i),Am(i),Hu(i);const l=Wu(),d=Vu();_m(d);const c=Bu(i,l),m=im(c),u=dm(i),x=am(i),p=mm();let b=!1;p.hasPaved&&(b=hm(i),vm(i)&&nl());const g=xm(c,x,u,m,d,b);g==="pave"&&d&&um(d);const y=bm(i);let f=wm(c,u,g,d,m,y),j=0;if(l.forEach(Z=>{j+=Z}),Sm(c,j,x)){const Z=jm(l);Z&&(f+=`

 




${Z}`)}c==="semi-warm"&&g==="pave"?f+=`

 
${oi.rentalToWall}`:c==="explicit"&&(f+=`

 
${oi.explicitToListing}`);const S=tm();let N=`

 ${S.label}
`;S.tactics.forEach(Z=>{N+=`
- ${Z}`}),S.canRecommend||(N+=`
 `);const I=`

${nm()}`,k=Ju();let M="";(k.workArea||k.homeArea||k.commutePain||k.familyStatus)&&(M=`

 `,k.workArea&&(M+=`
- ${k.workArea}`),k.homeArea&&(M+=`
- ${k.homeArea}`),k.commutePain&&(M+=`
- `),k.familyStatus&&(M+=`
- ${{single:"",couple:"",newlywed:"","with-kids":"","with-parents":""}[k.familyStatus]||k.familyStatus}`),M+=`
 `);let C="";const D=Em(d);D&&g==="pave"&&(C=`

 
${d}
- ${D.communities.slice(0,2).join("")}
- ${D.features.join("")}
 `);let w="";const T=ol();Pm()?w=`

 ${T}/6 - 

`:T>=2&&(w=`

 ${T}/6
`);let O="";if($m(m)){const Z=Lm();Z&&Z.options.length>=4&&(O=`

 
${Z.question}
A) ${((U=Z.options[0])==null?void 0:U.text)??""}  B) ${((z=Z.options[1])==null?void 0:z.text)??""}
C) ${((W=Z.options[2])==null?void 0:W.text)??""}  D) ${((H=Z.options[3])==null?void 0:H.text)??""}
 `)}const A=r==="stress"?`
localStorage `:r==="rest"?`
localStorage `:"",E=a.length?`
${a.join("")}`:"",_=`

[DEBUG] ${c} | ${u} | ${g} | ${d||""} | ${m} | ${S.level} | ${T}/6`;return f+N+I+M+C+w+O+A+E+_}async function tr(e,t,r){var c,m,u,x,p,b;const n=typeof t=="function"?t:void 0,a=typeof t=="object"?t:r,i=Bm(e),o=await fetch("/api/openai-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:i},...e],temperature:(a==null?void 0:a.temperature)??.85,max_tokens:(a==null?void 0:a.max_tokens)??350,stream:!!n})});if(!o.ok)throw new Error(`LLM proxy error: ${o.status}`);if(n&&o.body){const g=o.body.getReader(),y=new TextDecoder;let f="";for(;;){const{done:j,value:S}=await g.read();if(j)break;const I=y.decode(S,{stream:!0}).split(`
`);for(const k of I)if(k.startsWith("data: ")){const M=k.slice(6);if(M==="[DONE]")continue;try{const C=JSON.parse(M),D=(u=(m=(c=C==null?void 0:C.choices)==null?void 0:c[0])==null?void 0:m.delta)==null?void 0:u.content;D&&(f+=D,n(D))}catch{}}}return f}const l=await o.json();return((b=(p=(x=l==null?void 0:l.choices)==null?void 0:x[0])==null?void 0:p.message)==null?void 0:b.content)??""}async function Um(e,t){const r=(t==null?void 0:t.audience)==="owner"?"":"",n=(()=>{switch(t==null?void 0:t.intent){case"view":return"";case"detail":return"";case"pet":return"";case"price":return"";default:return""}})(),a=`V1/V2${r}${n}
---
${e}
---

V1...
V2...`;return tr([{role:"user",content:a}],{max_tokens:220})}async function Zm(e){const t=` 12 
${e}`;return tr([{role:"user",content:t}],{max_tokens:80})}async function Hm(e){const t=`/122
${e}`;return tr([{role:"user",content:t}],{max_tokens:120})}async function Wm(e,t,r){const n=`(Must)(Nice)(Avoid)232 #tags:  35 /
${e}
${t}
${r}`;return tr([{role:"user",content:n}],{max_tokens:160})}let cl=On();const dl=()=>cl;async function ul(e,t={}){const r=await Jo(),n=`${r.apiBaseUrl}${e}`,a=(t.method||"GET").toUpperCase(),i={Accept:"application/json","X-API-Version":"v1","X-App-Version":r.appVersion,"X-Session-Id":cl,"X-Request-Id":On(),"Accept-Language":"zh-Hant-TW"},o=(()=>{const m=t.headers;if(!m)return{};if(m instanceof Headers){const u={};for(const[x,p]of m)u[x]=p;return u}return Array.isArray(m)?Object.fromEntries(m):m})();a==="POST"&&!o["Idempotency-Key"]&&!o["idempotency-key"]&&(o["Idempotency-Key"]=On());const l={...i,...o};if(r.mock){const{mockHandler:m}=await qd(async()=>{const{mockHandler:u}=await import("./index-BCF8hNmt.js");return{mockHandler:u}},__vite__mapDeps([0,1,2,3]));return m(e,{...t,headers:l})}const d=new AbortController,c=setTimeout(()=>d.abort(),8e3);try{const m=await fetch(n,{...t,headers:l,signal:d.signal});return m.ok?{ok:!0,data:await m.json()}:{ok:!1,error:{code:"API_ERROR",message:"API "}}}catch(m){return(m==null?void 0:m.name)==="AbortError"?{ok:!1,error:{code:"NETWORK_TIMEOUT",message:""}}:{ok:!1,error:{code:"NETWORK_ERROR",message:m.message}}}finally{clearTimeout(c)}}const ml=()=>ul("/api/v1/meta");function qm({config:e}){const[t,r]=h.useState(!0),[n,a]=h.useState(!!e.mock),[i,o]=h.useState(e.latency??0),[l,d]=h.useState(e.error??0),[c,m]=h.useState(e.q??""),[u,x]=h.useState(""),[p,b]=h.useState(e.mockSeed??"");if(h.useEffect(()=>{ml().then(f=>x(f.ok&&f.data?f.data.backendVersion:""))},[]),!t)return null;const g=()=>{const f={...e,mock:n,latency:i,error:l,q:c,mockSeed:p,devtools:"1"};try{localStorage.setItem("maihouse_config",JSON.stringify(f))}catch{}location.reload()},y=()=>{const f=String(Date.now());b(f);try{localStorage.setItem("maihouse_config",JSON.stringify({...e,mockSeed:f,mock:n,latency:i,error:l,q:c,devtools:"1"}))}catch{}location.reload()};return s.jsxs("aside",{className:"fixed bottom-4 right-4 z-[var(--z-overlay)] w-[320px] rounded-[var(--r-lg)] bg-white p-4 text-sm shadow-[var(--shadow-card)]",children:[s.jsx("div",{className:"mb-2 font-medium",children:"Developer HUD"}),s.jsxs("div",{className:"space-y-1 text-[var(--text-secondary)]",children:[s.jsxs("div",{children:["API",e.apiBaseUrl]}),s.jsxs("div",{children:["App",e.appVersion]}),s.jsxs("div",{children:["Backend",u]}),s.jsxs("div",{children:["Session",dl()]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:f=>a(f.target.checked)})," Mock"]}),s.jsxs("label",{className:"flex items-center gap-2",children:["Latency",s.jsx("input",{className:"w-20 rounded border p-1",type:"number",value:i,onChange:f=>o(+f.target.value||0)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["Error",s.jsx("input",{className:"w-20 rounded border p-1",step:"0.1",type:"number",value:l,onChange:f=>d(+f.target.value||0)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["q ",s.jsx("input",{className:"flex-1 rounded border p-1",value:c,onChange:f=>m(f.target.value)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["seed",s.jsx("input",{className:"flex-1 rounded border p-1",value:p,onChange:f=>b(f.target.value)})]})]}),s.jsxs("div",{className:"mt-3 flex justify-between",children:[s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-100)] px-3 py-1",onClick:()=>r(!1),children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-300)] px-3 py-1",onClick:y,children:" "}),s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--brand)] px-3 py-1 text-[var(--brand-fg)]",onClick:g,children:""})]})]})]})}const hl="uag_queue",Fn=1e4,Vm=200,pe=globalThis.__UAG__||(globalThis.__UAG__={queue:[],backoff:1e4,attempts:0});try{pe.queue=JSON.parse(localStorage.getItem(hl)||"[]")}catch{pe.queue=[]}const pl=()=>{try{localStorage.setItem(hl,JSON.stringify(pe.queue.slice(-Fn)))}catch{}},la=3e5;async function fl(e){var r;const t=await ul("/api/v1/uag/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const n=new Set(e.map(a=>a.requestId));pe.queue=pe.queue.filter(a=>!n.has(a.requestId)),pl(),pe.attempts=0,pe.backoff=1e4}else{pe.attempts++;const n=(r=t==null?void 0:t.data)==null?void 0:r.retryAfterMs;pe.backoff=Math.min(n??pe.backoff*2,la)}}function Ar(){pe.timer&&clearTimeout(pe.timer),pe.timer=setTimeout(Qm,pe.backoff)}function Qm(){if(pe.queue.length){const e=pe.queue.slice(0,Vm);fl(e).catch(()=>{pe.attempts++,pe.backoff=Math.min(pe.backoff*2,la)}).finally(Ar)}else Ar()}Ar();function Gm(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:t&3|8).toString(16)})}function ca(e,t,r){if(!(e!=null&&e.trim())||!(t!=null&&t.trim())){console.warn("[UAG] ");return}const n={event:e,page:t,sessionId:dl(),userId:null,ts:new Date().toISOString(),meta:{origin:"gh-pages"},requestId:Gm()};r&&(n.targetId=r),pe.queue.push(n),pe.queue.length>Fn&&(pe.queue=pe.queue.slice(-Fn)),pl(),fl([n]).catch(()=>{pe.attempts++,pe.backoff=Math.min(pe.backoff*2,la),Ar()})}const Km=({showSlogan:e=!0,className:t="",onClick:r,href:n="/maihouses/"})=>{const a=()=>s.jsxs("div",{className:`flex items-center gap-3 group cursor-pointer ${t}`,children:[s.jsxs("div",{className:"relative w-[42px] h-[42px] bg-gradient-to-br from-brand-700 to-[#005282] rounded-xl flex items-center justify-center shadow-lg shadow-brand-700/20 overflow-hidden transition-all duration-300 group-hover:scale-105 group-hover:shadow-brand-700/30",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent translate-y-full group-hover:translate-y-0 transition-transform duration-700 ease-out"}),s.jsxs("svg",{className:"w-[22px] h-[22px] text-white relative z-10 drop-shadow-sm transform transition-transform duration-300 group-hover:-translate-y-[1px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 9.5L12 3L21 9.5V20.5C21 21.0523 20.5523 21.5 20 21.5H4C3.44772 21.5 3 21.0523 3 20.5V9.5Z"}),s.jsx("path",{d:"M9 21.5V13H15V21.5"})]}),s.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[#FF6B6B] rounded-full shadow-[0_0_0_1.5px_#004E7C]"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-[24px] font-bold font-serif text-brand-700 tracking-wide leading-none",children:""})}),e&&s.jsx("div",{className:"hidden sm:flex items-center ml-3 pl-3 border-l-2 border-brand-100/80 h-5",children:s.jsx("span",{className:"text-[15px] font-bold text-brand-500 tracking-[0.15em] uppercase group-hover:text-brand-700 transition-colors leading-none pt-[1px]",children:""})})]})]});return n?s.jsx("a",{href:n,onClick:r,className:"no-underline",children:s.jsx(a,{})}):s.jsx("div",{onClick:r,children:s.jsx(a,{})})};function Ym({onOpenAIStudio:e}){const[t,r]=h.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sticky top-0 z-50 border-b border-brand-100 bg-white/95 shadow-sm backdrop-blur-sm transition-all",children:[s.jsxs("div",{className:"mx-auto flex h-16 max-w-[1120px] items-center justify-between px-4",children:[s.jsx(Km,{showSlogan:!0,onClick:()=>window.scrollTo({top:0,behavior:"smooth"})}),s.jsxs("nav",{className:"hidden items-center gap-1 md:flex md:gap-2","aria-label":"",children:[s.jsxs("a",{href:"/maihouses/property.html",className:"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]",children:[s.jsx(Ma,{size:18,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"/maihouses/auth.html?mode=login",className:"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]",children:[s.jsx(Ra,{size:18,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"/maihouses/auth.html?mode=signup",className:"ml-1 flex items-center gap-2 rounded-xl border border-transparent bg-brand-700 px-5 py-2.5 text-[15px] font-bold text-white shadow-md shadow-brand-700/10 transition-all hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-lg hover:shadow-brand-700/20 active:scale-[0.98]",children:[s.jsx($a,{size:18,strokeWidth:2.5}),s.jsx("span",{children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[s.jsx("a",{href:"/maihouses/auth.html?mode=login",className:"flex items-center justify-center rounded-lg px-3 py-2 text-sm font-bold text-brand-700 transition-all hover:bg-brand-50 active:scale-95",children:s.jsx(Ra,{size:18,strokeWidth:2.5})}),s.jsxs("a",{href:"/maihouses/auth.html?mode=signup",className:"flex items-center gap-1.5 rounded-lg bg-brand-700 px-3 py-2 text-sm font-bold text-white shadow-sm transition-all hover:bg-brand-600 active:scale-95",children:[s.jsx($a,{size:16,strokeWidth:2.5}),s.jsx("span",{children:""})]}),s.jsx("button",{onClick:()=>r(!t),className:"flex items-center justify-center rounded-lg p-2 text-brand-700 transition-all hover:bg-brand-50 active:scale-95","aria-label":"",children:t?s.jsx(As,{size:22,strokeWidth:2.5}):s.jsx(Ic,{size:22,strokeWidth:2.5})})]})]}),t&&s.jsx("div",{className:"absolute left-0 right-0 top-full border-b border-brand-100 bg-white shadow-lg md:hidden",children:s.jsxs("nav",{className:"mx-auto max-w-[1120px] px-4 py-3",children:[s.jsxs("a",{href:"/maihouses/property.html",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsx(Ma,{size:20,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"/maihouses/community-wall_mvp.html",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsxs("svg",{className:"size-5 opacity-80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"https://maihouses.vercel.app/maihouses/uag",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsxs("svg",{className:"size-5 opacity-80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),s.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),s.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),s.jsx("span",{children:""})]})]})})]}),s.jsx("div",{className:"relative border-b border-brand-100/50 bg-brand-50",children:s.jsx("div",{className:"relative z-10 mx-auto max-w-[1120px] px-4 pb-6 pt-24",children:s.jsxs("div",{className:"relative mx-auto max-w-3xl",children:[s.jsxs("div",{className:"pointer-events-none absolute top-[-44px] right-[5%] z-0 animate-float select-none md:right-[10%] md:animate-float-desktop",children:[s.jsxs("div",{className:"absolute bottom-[92%] right-[55%] w-[260px] origin-bottom-right animate-fadeIn whitespace-normal rounded-2xl rounded-br-none border-2 border-brand-100 bg-white px-5 py-2 shadow-lg md:bottom-[94%] md:right-[65%] md:w-auto md:max-w-none md:whitespace-nowrap md:py-3",children:[s.jsxs("p",{className:"text-left text-[11px] font-bold leading-relaxed text-ink-700 md:text-sm",children:[" ",s.jsx("span",{className:"font-black text-brand-700",children:""}),""]}),s.jsx("div",{className:"absolute -bottom-2.5 right-3 size-5 rotate-45 border-b-2 border-r-2 border-brand-100 bg-white"})]}),s.jsx("div",{className:"relative z-10 size-20 md:size-24",children:s.jsxs("svg",{viewBox:"0 0 200 240",className:"size-full drop-shadow-sm",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"#00385a",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"#00385a",strokeWidth:"6",fill:"#F6F9FF",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 55 130 L 35 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 145 130 L 165 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"})]})})]}),s.jsx("div",{className:"group relative z-20",children:s.jsxs("div",{className:"flex h-[60px] items-center rounded-full border border-brand-100 bg-white pl-[28px] pr-2 shadow-[0_8px_30px_rgba(0,56,90,0.08)] transition-all duration-300 focus-within:border-brand-300 focus-within:ring-4 focus-within:ring-brand-50 group-hover:shadow-[0_12px_40px_rgba(0,56,90,0.12)]",children:[s.jsx("div",{className:"pr-4 text-gray-400 transition-colors group-focus-within:text-gray-600",children:s.jsx(gn,{size:22,strokeWidth:2.5})}),s.jsx("input",{type:"text",placeholder:"...",className:"size-full bg-transparent text-lg font-bold text-gray-700 outline-none placeholder:font-medium placeholder:text-gray-400"}),s.jsx("button",{className:"flex h-[46px] items-center justify-center whitespace-nowrap rounded-full bg-brand-700 px-8 text-base font-bold tracking-wide text-white shadow-md transition-colors hover:bg-brand-600 hover:shadow-lg active:translate-y-px",children:""})]})}),s.jsx("div",{className:"relative z-10 mt-6 grid grid-cols-3 gap-2",children:["","",""].map(n=>{const i=(l=>l===""?"/maihouses/community-wall_mvp.html":l===""?"https://maihouses.vercel.app/maihouses/uag":"#")(n),o=n===""?"_blank":void 0;return s.jsx("a",{href:i,target:o,rel:o?"noopener noreferrer":void 0,className:"flex items-center justify-center rounded-2xl border border-brand-700 bg-brand-700 py-3 text-lg font-bold tracking-wide text-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-md active:scale-[0.98]",children:n},n)})})]})})})]})}function Jm({animated:e=!0}){const[t,r]=h.useState(0);h.useEffect(()=>{if(!e)return;const l=setInterval(()=>{r(d=>(d+1)%6)},2500);return()=>clearInterval(l)},[e]);const a=(()=>{switch(t){case 0:return{leftArm:"M 55 130 L 25 100",rightArm:"M 145 130 L 175 90",eyeY:125,mouthCurve:"smile"};case 1:return{leftArm:"M 55 130 L 30 130",rightArm:"M 145 130 L 170 130",eyeY:123,eyeSize:6,mouthCurve:"wow"};case 2:return{leftArm:"M 55 130 L 45 150",rightArm:"M 145 130 L 155 145",eyeY:125,mouthCurve:"focused"};case 3:return{leftArm:"M 55 130 L 30 105",rightArm:"M 145 130 L 170 105",eyeY:124,mouthCurve:"hopeful"};case 4:return{leftArm:"M 55 130 L 20 95",rightArm:"M 145 130 L 180 95",eyeY:122,mouthCurve:"happy",bounce:!0};case 5:return{leftArm:"M 55 130 L 25 120",rightArm:"M 145 130 L 175 120",eyeY:125,mouthCurve:"proud"};default:return{leftArm:"M 55 130 L 25 110",rightArm:"M 145 130 L 175 110",eyeY:125,mouthCurve:"smile"}}})(),i=a.eyeSize||4,o=()=>{switch(a.mouthCurve){case"smile":return s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"wow":return s.jsx("ellipse",{cx:"100",cy:"148",rx:"6",ry:"8",stroke:"currentColor",strokeWidth:"3",fill:"none"});case"focused":return s.jsx("path",{d:"M 92 145 Q 100 152 108 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"hopeful":return s.jsx("path",{d:"M 90 144 Q 100 156 110 144",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"happy":return s.jsx("path",{d:"M 85 142 Q 100 165 115 142",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"proud":return s.jsx("path",{d:"M 88 145 Q 100 158 112 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});default:return s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"})}};return s.jsxs("svg",{viewBox:"0 0 200 240",className:`w-full h-full drop-shadow-sm text-brand transition-transform duration-500 ${e?"hover:scale-105":""} ${a.bounce?"animate-bounce":""}`,children:[t===4&&s.jsxs(s.Fragment,{children:[s.jsx("text",{x:"25",y:"70",className:"text-xl animate-ping",fill:"#FF6B9D",children:""}),s.jsx("text",{x:"165",y:"75",className:"text-xl animate-ping",style:{animationDelay:"0.3s"},fill:"#FF6B9D",children:""})]}),s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:t===4?"animate-pulse":""}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),t===1?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 75 105 Q 85 98 95 105",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 105 105 Q 115 98 125 105",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):t===2?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 108 Q 85 105 92 109",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 107 Q 115 104 122 109",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):t===3?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 76 108 Q 85 103 94 108",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 106 108 Q 115 103 124 108",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),s.jsx("circle",{cx:"85",cy:a.eyeY,r:i,stroke:"currentColor",strokeWidth:"3",fill:t===4?"currentColor":"none",className:"transition-all duration-300"}),s.jsx("circle",{cx:"115",cy:a.eyeY,r:i,stroke:"currentColor",strokeWidth:"3",fill:t===4?"currentColor":"none",className:"transition-all duration-300"}),t===4&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 122 Q 85 128 92 122",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 122 Q 115 128 122 122",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round"})]}),o(),s.jsx("path",{d:a.leftArm,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:a.rightArm,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:t%2===0?"M 85 180 L 85 215 L 75 215":"M 85 180 L 80 215 L 70 212",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300"}),s.jsx("path",{d:t%2===0?"M 115 180 L 115 215 L 125 215":"M 115 180 L 120 215 L 130 212",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300"}),t===5&&s.jsxs("g",{className:"animate-pulse",children:[s.jsx("circle",{cx:"175",cy:"100",r:"8",stroke:"#FFB800",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 175 108 L 175 130 M 172 120 L 178 120 M 172 125 L 178 125",stroke:"#FFB800",strokeWidth:"3",fill:"none",strokeLinecap:"round"})]})]})}const li=[{id:"01",title:"",desc:"",icon:Dt},{id:"02",title:"",desc:"",icon:Tc},{id:"03",title:"",desc:"",icon:Co},{id:"04",title:"",desc:"",icon:zc},{id:"05",title:"",desc:"",icon:Ac},{id:"06",title:"",desc:"",icon:Pc}],Xm=[{id:"J",name:"J*** ",rating:5,tags:["#/"],content:""},{id:"W",name:"W*** ",rating:4,tags:["#"],content:""},{id:"L",name:"L*** ",rating:4,tags:["#/"],content:""},{id:"A",name:"A*** ",rating:5,tags:["#/"],content:""},{id:"H",name:"H*** ",rating:3,tags:["#/"],content:""},{id:"K",name:"K*** ",rating:4,tags:["#/"],content:""}],eh=[{id:1,image:"https://images.unsplash.com/photo-1600585154526-990dced4db0d?q=80&w=1600&auto=format&fit=crop",badge:" 5 ",title:"",tags:["34.2 ","3  2 ",""],price:"1,288",location:"  ",reviews:[{avatar:"A",name:"",role:"3",tag:"",text:""},{avatar:"B",name:"",role:"",tag:"",text:""}]},{id:2,image:"https://images.unsplash.com/photo-1575517111478-7f6afd0973db?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["28.6 ","2  2 ",""],price:"1,052",location:"  ",reviews:[{avatar:"C",name:"",role:"5",tag:"",text:""},{avatar:"D",name:"",role:"",tag:"",text:" 3 "}]},{id:3,image:"https://images.unsplash.com/photo-1515263487990-61b07816b324?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["22.1 ","2  1 ",""],price:"838",location:"  ",reviews:[{avatar:"E",name:"",role:"",tag:"",text:" 6 "},{avatar:"F",name:"",role:"",tag:"",text:""}]},{id:4,image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["36.8 ","3  2 ",""],price:"1,560",location:"  ",reviews:[{avatar:"G",name:"",role:"",tag:"",text:""},{avatar:"H",name:"",role:"",tag:"",text:" 2 "}]},{id:5,image:"https://images.unsplash.com/photo-1501183638710-841dd1904471?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["27.4 ","2  2 ",""],price:"968",location:"  ",reviews:[{avatar:"I",name:"",role:"",tag:"",text:""},{avatar:"J",name:"",role:"",tag:"",text:""}]},{id:6,image:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["24.9 ","2  1 ",""],price:"898",location:"  ",reviews:[{avatar:"K",name:"",role:"",tag:"",text:""},{avatar:"L",name:"",role:"",tag:"",text:""}]}];function xl(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=xl(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function th(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=xl(e))&&(n&&(n+=" "),n+=t);return n}const sh=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},rh=(e,t)=>({classGroupId:e,validator:t}),gl=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Pr="-",ci=[],nh="arbitrary..",ah=e=>{const t=oh(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return ih(o);const l=o.split(Pr),d=l[0]===""&&l.length>1?1:0;return bl(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=n[o],c=r[o];return d?c?sh(c,d):d:c||ci}return r[o]||ci}}},bl=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],i=r.nextPart.get(a);if(i){const c=bl(e,t+1,i);if(c)return c}const o=r.validators;if(o===null)return;const l=t===0?e.join(Pr):e.slice(t).join(Pr),d=o.length;for(let c=0;c<d;c++){const m=o[c];if(m.validator(l))return m.classGroupId}},ih=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?nh+n:void 0})(),oh=e=>{const{theme:t,classGroups:r}=e;return lh(r,t)},lh=(e,t)=>{const r=gl();for(const n in e){const a=e[n];da(a,r,n,t)}return r},da=(e,t,r,n)=>{const a=e.length;for(let i=0;i<a;i++){const o=e[i];ch(o,t,r,n)}},ch=(e,t,r,n)=>{if(typeof e=="string"){dh(e,t,r);return}if(typeof e=="function"){uh(e,t,r,n);return}mh(e,t,r,n)},dh=(e,t,r)=>{const n=e===""?t:vl(t,e);n.classGroupId=r},uh=(e,t,r,n)=>{if(hh(e)){da(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(rh(r,e))},mh=(e,t,r,n)=>{const a=Object.entries(e),i=a.length;for(let o=0;o<i;o++){const[l,d]=a[o];da(d,vl(t,l),r,n)}},vl=(e,t)=>{let r=e;const n=t.split(Pr),a=n.length;for(let i=0;i<a;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=gl(),r.nextPart.set(o,l)),r=l}return r},hh=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,ph=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const a=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return a(i,o),o},set(i,o){i in r?r[i]=o:a(i,o)}}},Bn="!",di=":",fh=[],ui=(e,t,r,n,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:a}),xh=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=a=>{const i=[];let o=0,l=0,d=0,c;const m=a.length;for(let g=0;g<m;g++){const y=a[g];if(o===0&&l===0){if(y===di){i.push(a.slice(d,g)),d=g+1;continue}if(y==="/"){c=g;continue}}y==="["?o++:y==="]"?o--:y==="("?l++:y===")"&&l--}const u=i.length===0?a:a.slice(d);let x=u,p=!1;u.endsWith(Bn)?(x=u.slice(0,-1),p=!0):u.startsWith(Bn)&&(x=u.slice(1),p=!0);const b=c&&c>d?c-d:void 0;return ui(i,p,x,b)};if(t){const a=t+di,i=n;n=o=>o.startsWith(a)?i(o.slice(a.length)):ui(fh,!1,o,void 0,!0)}if(r){const a=n;n=i=>r({className:i,parseClassName:a})}return n},gh=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let a=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(o)):a.push(o)}return a.length>0&&(a.sort(),n.push(...a)),n}},bh=e=>({cache:ph(e.cacheSize),parseClassName:xh(e),sortModifiers:gh(e),...ah(e)}),vh=/\s+/,yh=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],l=e.trim().split(vh);let d="";for(let c=l.length-1;c>=0;c-=1){const m=l[c],{isExternal:u,modifiers:x,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:g}=r(m);if(u){d=m+(d.length>0?" "+d:d);continue}let y=!!g,f=n(y?b.substring(0,g):b);if(!f){if(!y){d=m+(d.length>0?" "+d:d);continue}if(f=n(b),!f){d=m+(d.length>0?" "+d:d);continue}y=!1}const j=x.length===0?"":x.length===1?x[0]:i(x).join(":"),S=p?j+Bn:j,N=S+f;if(o.indexOf(N)>-1)continue;o.push(N);const I=a(f,y);for(let k=0;k<I.length;++k){const M=I[k];o.push(S+M)}d=m+(d.length>0?" "+d:d)}return d},wh=(...e)=>{let t=0,r,n,a="";for(;t<e.length;)(r=e[t++])&&(n=yl(r))&&(a&&(a+=" "),a+=n);return a},yl=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=yl(e[n]))&&(r&&(r+=" "),r+=t);return r},jh=(e,...t)=>{let r,n,a,i;const o=d=>{const c=t.reduce((m,u)=>u(m),e());return r=bh(c),n=r.cache.get,a=r.cache.set,i=l,l(d)},l=d=>{const c=n(d);if(c)return c;const m=yh(d,r);return a(d,m),m};return i=o,(...d)=>i(wh(...d))},Nh=[],ke=e=>{const t=r=>r[e]||Nh;return t.isThemeGetter=!0,t},wl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jl=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kh=/^\d+\/\d+$/,_h=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sh=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ch=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Eh=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ih=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ms=e=>kh.test(e),se=e=>!!e&&!Number.isNaN(Number(e)),_t=e=>!!e&&Number.isInteger(Number(e)),on=e=>e.endsWith("%")&&se(e.slice(0,-1)),xt=e=>_h.test(e),Th=()=>!0,zh=e=>Sh.test(e)&&!Ch.test(e),Nl=()=>!1,Ah=e=>Eh.test(e),Ph=e=>Ih.test(e),Mh=e=>!q(e)&&!V(e),Rh=e=>Ms(e,Sl,Nl),q=e=>wl.test(e),Ht=e=>Ms(e,Cl,zh),ln=e=>Ms(e,Fh,se),mi=e=>Ms(e,kl,Nl),$h=e=>Ms(e,_l,Ph),hr=e=>Ms(e,El,Ah),V=e=>jl.test(e),Ls=e=>Rs(e,Cl),Lh=e=>Rs(e,Bh),hi=e=>Rs(e,kl),Oh=e=>Rs(e,Sl),Dh=e=>Rs(e,_l),pr=e=>Rs(e,El,!0),Ms=(e,t,r)=>{const n=wl.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Rs=(e,t,r=!1)=>{const n=jl.exec(e);return n?n[1]?t(n[1]):r:!1},kl=e=>e==="position"||e==="percentage",_l=e=>e==="image"||e==="url",Sl=e=>e==="length"||e==="size"||e==="bg-size",Cl=e=>e==="length",Fh=e=>e==="number",Bh=e=>e==="family-name",El=e=>e==="shadow",Uh=()=>{const e=ke("color"),t=ke("font"),r=ke("text"),n=ke("font-weight"),a=ke("tracking"),i=ke("leading"),o=ke("breakpoint"),l=ke("container"),d=ke("spacing"),c=ke("radius"),m=ke("shadow"),u=ke("inset-shadow"),x=ke("text-shadow"),p=ke("drop-shadow"),b=ke("blur"),g=ke("perspective"),y=ke("aspect"),f=ke("ease"),j=ke("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...N(),V,q],k=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],C=()=>[V,q,d],D=()=>[ms,"full","auto",...C()],w=()=>[_t,"none","subgrid",V,q],T=()=>["auto",{span:["full",_t,V,q]},_t,V,q],O=()=>[_t,"auto",V,q],A=()=>["auto","min","max","fr",V,q],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...C()],U=()=>[ms,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[e,V,q],W=()=>[...N(),hi,mi,{position:[V,q]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",Oh,Rh,{size:[V,q]}],ce=()=>[on,Ls,Ht],G=()=>["","none","full",c,V,q],X=()=>["",se,Ls,Ht],re=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[se,on,hi,mi],oe=()=>["","none",b,V,q],$e=()=>["none",se,V,q],ze=()=>["none",se,V,q],ae=()=>[se,V,q],de=()=>[ms,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xt],breakpoint:[xt],color:[Th],container:[xt],"drop-shadow":[xt],ease:["in","out","in-out"],font:[Mh],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xt],shadow:[xt],spacing:["px",se],text:[xt],"text-shadow":[xt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ms,q,V,y]}],container:["container"],columns:[{columns:[se,q,V,l]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[_t,"auto",V,q]}],basis:[{basis:[ms,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[se,ms,"auto","initial","none",q]}],grow:[{grow:["",se,V,q]}],shrink:[{shrink:["",se,V,q]}],order:[{order:[_t,"first","last","none",V,q]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[..._(),"normal"]}],"justify-self":[{"justify-self":["auto",..._()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[..._(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[..._(),"baseline"]}],"place-self":[{"place-self":["auto",..._()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[l,"screen",...U()]}],"min-w":[{"min-w":[l,"screen","none",...U()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",r,Ls,Ht]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,V,ln]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",on,q]}],"font-family":[{font:[Lh,q,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,V,q]}],"line-clamp":[{"line-clamp":[se,"none",V,ln]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",V,q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",V,q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[se,"from-font","auto",V,Ht]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[se,"auto",V,q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V,q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V,q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_t,V,q],radial:["",V,q],conic:[_t,V,q]},Dh,$h]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:ce()}],"gradient-via-pos":[{via:ce()}],"gradient-to-pos":[{to:ce()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:X()}],"border-w-x":[{"border-x":X()}],"border-w-y":[{"border-y":X()}],"border-w-s":[{"border-s":X()}],"border-w-e":[{"border-e":X()}],"border-w-t":[{"border-t":X()}],"border-w-r":[{"border-r":X()}],"border-w-b":[{"border-b":X()}],"border-w-l":[{"border-l":X()}],"divide-x":[{"divide-x":X()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":X()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[se,V,q]}],"outline-w":[{outline:["",se,Ls,Ht]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",m,pr,hr]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",u,pr,hr]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[se,Ht]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":X()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",x,pr,hr]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[se,V,q]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[se]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[V,q]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[se]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",V,q]}],filter:[{filter:["","none",V,q]}],blur:[{blur:oe()}],brightness:[{brightness:[se,V,q]}],contrast:[{contrast:[se,V,q]}],"drop-shadow":[{"drop-shadow":["","none",p,pr,hr]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",se,V,q]}],"hue-rotate":[{"hue-rotate":[se,V,q]}],invert:[{invert:["",se,V,q]}],saturate:[{saturate:[se,V,q]}],sepia:[{sepia:["",se,V,q]}],"backdrop-filter":[{"backdrop-filter":["","none",V,q]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[se,V,q]}],"backdrop-contrast":[{"backdrop-contrast":[se,V,q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",se,V,q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[se,V,q]}],"backdrop-invert":[{"backdrop-invert":["",se,V,q]}],"backdrop-opacity":[{"backdrop-opacity":[se,V,q]}],"backdrop-saturate":[{"backdrop-saturate":[se,V,q]}],"backdrop-sepia":[{"backdrop-sepia":["",se,V,q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",V,q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[se,"initial",V,q]}],ease:[{ease:["linear","initial",f,V,q]}],delay:[{delay:[se,V,q]}],animate:[{animate:["none",j,V,q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,V,q]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:$e()}],"rotate-x":[{"rotate-x":$e()}],"rotate-y":[{"rotate-y":$e()}],"rotate-z":[{"rotate-z":$e()}],scale:[{scale:ze()}],"scale-x":[{"scale-x":ze()}],"scale-y":[{"scale-y":ze()}],"scale-z":[{"scale-z":ze()}],"scale-3d":["scale-3d"],skew:[{skew:ae()}],"skew-x":[{"skew-x":ae()}],"skew-y":[{"skew-y":ae()}],transform:[{transform:[V,q,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:de()}],"translate-x":[{"translate-x":de()}],"translate-y":[{"translate-y":de()}],"translate-z":[{"translate-z":de()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V,q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V,q]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[se,Ls,Ht,ln]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Zh=jh(Uh);function Hh(...e){return Zh(th(e))}const Wh=(e,t)=>{const r=e.split(".").map(a=>+a||0),n=t.split(".").map(a=>+a||0);for(let a=0;a<3;a++){const i=r[a]??0,o=n[a]??0;if(i<o)return-1;if(i>o)return 1}return 0},ua=$.forwardRef(({className:e,variant:t="default",children:r,...n},a)=>{const i="transition-all duration-200 bg-white border border-border-light",o={default:"mh-card p-4 md:p-6",hero:"mh-card mh-card--hero p-6 md:p-10 bg-gradient-to-br from-white to-brand-50",ai:"mh-ai-card"};return s.jsx("section",{ref:a,className:Hh(i,o[t],e),...n,children:r})});ua.displayName="HomeCard";const Il=$.memo(({index:e,title:t,desc:r,icon:n,isLast:a})=>s.jsxs("div",{className:"group relative flex md:flex-col items-center md:items-center gap-4 md:gap-4 p-2 rounded-xl hover:bg-bg-soft transition-colors duration-300 cursor-default",children:[s.jsxs("div",{className:"relative z-10 flex-shrink-0",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-border-light text-text-muted flex items-center justify-center group-hover:border-brand group-hover:text-brand group-hover:scale-110 transition-all duration-300 shadow-sm",children:s.jsx(n,{size:20})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-brand text-white text-[10px] font-bold flex items-center justify-center ring-2 ring-white",children:e+1})]}),s.jsxs("div",{className:"flex-1 md:text-center",children:[s.jsx("h4",{className:"text-base font-black text-text-ink mb-1 group-hover:text-brand transition-colors",children:t}),s.jsx("p",{className:"text-xs text-text-muted font-medium leading-relaxed",children:r})]}),s.jsx("div",{className:"md:hidden ml-auto text-border-light group-hover:text-brand transition-colors",children:!a&&s.jsx(Mc,{size:16,className:"opacity-0 group-hover:opacity-20"})})]}));Il.displayName="HeroStep";function qh(){return s.jsxs(ua,{variant:"hero",className:"group/container relative overflow-hidden",children:[s.jsxs("div",{className:"relative z-10 mb-10 flex flex-col items-center gap-6 md:flex-row md:gap-10",children:[s.jsx("div",{className:"relative h-32 w-28 shrink-0",children:s.jsx(Jm,{})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full border border-[var(--brand)]/20 bg-[var(--bg-page)] px-3 py-1 text-xs font-bold text-[var(--brand)]",children:[s.jsx(Rc,{size:14}),s.jsx("span",{children:""})]}),s.jsx("h3",{className:"mb-3 text-2xl font-black tracking-tight text-[var(--brand)] md:text-3xl",children:""}),s.jsxs("p",{className:"max-w-2xl text-sm font-medium leading-relaxed text-[var(--text-secondary)] md:text-base",children:[" ",s.jsx("br",{className:"hidden md:block"}),""]})]}),s.jsxs("a",{href:"/#policy",className:"hidden shrink-0 items-center gap-2 rounded-xl border-2 border-[var(--brand)] bg-white px-5 py-2.5 text-sm font-bold text-[var(--brand)] shadow-sm transition-all hover:bg-[var(--brand)] hover:text-white md:flex",children:[" ",s.jsx($c,{size:16})]})]}),s.jsxs("div",{className:"relative mt-4 pl-2 md:pl-0",children:[s.jsx("div",{className:"absolute left-0 top-8 -z-0 hidden h-0.5 w-full bg-border-light md:block"}),s.jsx("div",{className:"absolute inset-y-0 left-8 -z-0 w-0.5 bg-border-light md:hidden"}),s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-6 md:gap-2",children:li.map((e,t)=>s.jsx(Il,{...e,index:t,isLast:t===li.length-1},e.id))})]})]})}function Vh(){const[e,t]=h.useState(0);h.useEffect(()=>{const a=setInterval(()=>{t(i=>(i+1)%3)},3e3);return()=>clearInterval(a)},[]);const n=(()=>{switch(e){case 0:return{left:"M 55 130 L 35 145",right:"M 145 130 L 165 145"};case 1:return{left:"M 55 130 L 35 145",right:"M 145 130 L 175 100"};case 2:return{left:"M 55 130 L 25 115",right:"M 145 130 L 175 115"};default:return{left:"M 55 130 L 35 145",right:"M 145 130 L 165 145"}}})();return s.jsxs("div",{className:"w-32 h-40 mb-4 text-brand relative",children:[s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-brand-100/50 rounded-full blur-2xl -z-10"}),s.jsxs("svg",{viewBox:"0 0 200 240",className:"w-full h-full drop-shadow-sm animate-float",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"100",cy:"85",r:"4",fill:"currentColor"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:n.left,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:n.right,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:"M 85 180 L 85 215 L 75 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 115 180 L 115 215 L 125 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}const pi={:{reviewCount:28,rating:4.3},:{reviewCount:45,rating:4.1},:{reviewCount:67,rating:3.9},:{reviewCount:19,rating:4.5},:{reviewCount:32,rating:4.2},:{reviewCount:24,rating:4.4},default:{reviewCount:12,rating:4.2}};function Qh(e){return pi[e]||pi.default}function Gh({name:e,topic:t="",reviewCount:r,rating:n}){const a=Qh(e),i=r??(a==null?void 0:a.reviewCount)??10,o=n??(a==null?void 0:a.rating)??4;return s.jsxs("a",{href:"/maihouses/community-wall_mvp.html",target:"_blank",rel:"noopener noreferrer",className:"block mt-3 p-4 rounded-xl bg-gradient-to-br from-brand-50 to-white border-2 border-brand-100 hover:border-brand-300 hover:shadow-md transition-all group",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-brand-100 flex items-center justify-center",children:s.jsx(Eo,{size:16,className:"text-brand-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-black text-brand-700 text-sm",children:e}),s.jsx("p",{className:"text-[11px] text-ink-500 font-medium",children:""})]})]}),s.jsx(Zr,{size:16,className:"text-brand-400 group-hover:text-brand-600 transition-colors"})]}),s.jsxs("p",{className:"text-xs text-ink-600 font-medium mb-3 line-clamp-2",children:[" ",t]}),s.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-ink-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ea,{size:12,className:"text-amber-500 fill-amber-500"}),s.jsx("span",{className:"font-bold text-ink-700",children:o})]}),s.jsxs("span",{children:[i," "]})]}),s.jsx("div",{className:"mt-3 py-2 px-3 rounded-lg bg-brand-700 text-white text-center text-xs font-bold group-hover:bg-brand-600 transition-colors",children:" "})]})}const fi={"MH-2024-001":{title:" 3",price:"2,180",size:"35.8",rooms:"322",address:"16812",highlight:"3"},"MH-2024-002":{title:" ",price:"3,280",size:"52.6",rooms:"422",address:"8818",highlight:""},"MH-2024-003":{title:" ",price:"1,480",size:"26.2",rooms:"211",address:"668",highlight:""},"MH-2024-004":{title:" ",price:"1,980",size:"32.1",rooms:"321",address:"18815",highlight:""},default:{title:"",price:"",size:"-",rooms:"-",address:"",highlight:""}};function Kh(e){return fi[e]??fi.default??{title:"",price:"",size:"-",rooms:"-",address:"",highlight:""}}function Yh({community:e,propertyId:t}){const r=Kh(t);return s.jsxs("a",{href:"/property.html",target:"_blank",rel:"noopener noreferrer",className:"block mt-3 p-4 rounded-xl bg-gradient-to-br from-orange-50 to-white border-2 border-orange-100 hover:border-orange-300 hover:shadow-md transition-all group max-w-sm",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Us,{size:14,className:"text-orange-500"}),s.jsx("span",{className:"text-[11px] text-ink-500 font-medium",children:e})]}),s.jsx("p",{className:"font-bold text-ink-800 text-sm group-hover:text-orange-600 transition-colors",children:r.title})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.highlight&&s.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-2 py-0.5 rounded-full whitespace-nowrap font-medium",children:r.highlight}),s.jsx(Zr,{size:14,className:"text-orange-400 group-hover:text-orange-600 transition-colors"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Hr,{size:12,className:"text-orange-400"}),s.jsx("span",{className:"font-bold text-orange-600",children:r.price})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-ink-600",children:[s.jsx(Lc,{size:12,className:"text-ink-400"}),s.jsx("span",{children:r.size})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-ink-500",children:[s.jsx(Xs,{size:11}),s.jsx("span",{children:r.address})]}),s.jsx("div",{className:"mt-1 text-[11px] text-ink-400",children:r.rooms}),s.jsx("div",{className:"mt-3 pt-2 border-t border-orange-100 text-[11px] text-orange-500 font-medium opacity-0 group-hover:opacity-100 transition-opacity text-center",children:" "})]})}function Jh(e){const t=/\[\[:([^:]+):([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;){const a=n[1],i=n[2];a&&i&&r.push({name:a.trim(),topic:i.trim()})}return r}function Xh(e){const t=/\[\[:([^:]+):([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;){const a=n[1],i=n[2];a&&i&&r.push({community:a.trim(),propertyId:i.trim()})}return r}function ep(e){const t=/\[\[:([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;)n[1]&&r.push(n[1].trim());return r}function tp(e){return e.replace(/\[\[:[^:]+:[^\]]+\]\]/g,"").replace(/\[\[:[^:]+:[^\]]+\]\]/g,"").replace(/\[\[:[^\]]+\]\]/g,"").trim()}function sp({description:e}){return s.jsxs("div",{className:"my-3 border-l-4 border-orange-300 pl-3 italic text-gray-600 bg-gradient-to-r from-orange-50/80 to-amber-50/50 p-3 rounded-r-lg",children:[s.jsx("span",{className:"text-lg mr-2",children:""}),s.jsx("span",{className:"leading-relaxed",children:e})]})}function rp({role:e,content:t,timestamp:r}){const n=e==="assistant"?Jh(t):[],a=e==="assistant"?Xh(t):[],i=e==="assistant"?ep(t):[],o=e==="assistant"?tp(t):t;return s.jsx("div",{className:`flex ${e==="user"?"justify-end":"justify-start"} animate-fadeIn`,children:s.jsxs("div",{className:`max-w-[85%] rounded-2xl px-5 py-3.5 text-[15px] font-medium leading-relaxed shadow-sm ${e==="user"?"bg-brand-700 text-white rounded-br-sm":"bg-white text-ink-900 border border-brand-100 rounded-bl-sm"}`,children:[s.jsx("div",{className:"whitespace-pre-wrap",children:o}),i.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:i.map((l,d)=>s.jsx(sp,{description:l},`scenario-${d}`))}),n.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:n.map((l,d)=>s.jsx(Gh,{name:l.name,topic:l.topic},`community-${d}`))}),a.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:a.map((l,d)=>s.jsx(Yh,{community:l.community,propertyId:l.propertyId},`property-${d}`))}),r&&s.jsx("div",{className:`mt-1.5 text-[11px] font-bold ${e==="user"?"text-brand-300":"text-brand-600/60"} text-right`,children:new Date(r).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})})]})})}function Tl(){const[e,t]=h.useState([]),[r,n]=h.useState(""),[a,i]=h.useState(!1),[o,l]=h.useState(null),[d,c]=h.useState(ni()),m=h.useRef(null),x=e.filter(b=>b.role==="user").length>=3?Fu:Du;h.useEffect(()=>{Uu();const b=localStorage.getItem("mai-last-chat"),g=new Date().toDateString();if(!b||b!==g){const y=km();y&&l(y);const f=setTimeout(()=>{t([{role:"assistant",content:y||"",timestamp:new Date().toISOString()}]),localStorage.setItem("mai-last-chat",g)},1500);return()=>clearTimeout(f)}},[]),h.useEffect(()=>{const b=new Date,g=b.getHours(),y=b.getMinutes();if(g===22&&y<30&&!localStorage.getItem("mai-goodnight-"+b.toDateString())&&e.length>0){const j=setTimeout(()=>{t(S=>[...S,{role:"assistant",content:` 
...`,timestamp:new Date().toISOString()}]),localStorage.setItem("mai-goodnight-"+b.toDateString(),"1")},5e3);return()=>clearTimeout(j)}},[e.length]),h.useEffect(()=>{c(ni())},[e.length]),h.useEffect(()=>{const b=()=>{lm()};return window.addEventListener("beforeunload",b),()=>window.removeEventListener("beforeunload",b)},[]),h.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[e]);const p=async(b=r)=>{if(!b.trim()||a)return;b===""&&Dm(!0);const g={role:"user",content:b.trim(),timestamp:new Date().toISOString()};t(f=>[...f,g]),n(""),i(!0);const y={role:"assistant",content:"",timestamp:new Date().toISOString()};t(f=>[...f,y]);try{const f=await tr([...e,g],j=>{t(S=>{const N=[...S],I=N[N.length-1];return I&&I.role==="assistant"&&(I.content+=j),N})})}catch(f){console.error(f),t(j=>{const S=[...j],N=S[S.length-1];return N&&(N.content=""),S})}finally{i(!1)}};return s.jsxs("section",{className:"group relative bg-gradient-to-br from-white via-[#F8FAFC] to-[#00385a08] rounded-[24px] border border-brand-100 shadow-[0_8px_24px_rgba(0,56,90,0.06)] overflow-hidden hover:shadow-[0_12px_32px_rgba(0,56,90,0.1)] transition-all duration-300 isolate",children:[s.jsx("div",{className:"absolute -top-24 -right-24 w-80 h-80 bg-brand-100/30 rounded-full blur-3xl pointer-events-none mix-blend-multiply"}),s.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-brand-700/5 rounded-full blur-3xl pointer-events-none mix-blend-multiply"}),s.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#00385a08_1px,transparent_1px),linear-gradient(to_bottom,#00385a08_1px,transparent_1px)] bg-[size:24px_24px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none z-0"}),s.jsx("div",{className:"h-1.5 w-full bg-gradient-to-r from-brand-700 via-brand-600 to-brand-500 relative z-20"}),s.jsxs("div",{className:"p-5 md:p-8 md:pt-6 relative z-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/80 border border-brand-100 flex items-center justify-center text-brand-700 relative overflow-hidden shrink-0 shadow-sm backdrop-blur-sm group-hover:scale-105 transition-transform duration-300",children:s.jsx(Lt,{size:26,strokeWidth:2})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-black text-brand-700 text-xl tracking-tight flex items-center gap-2",children:["MaiMai ",s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gradient-to-r from-brand-700 to-brand-600 text-white text-[10px] font-bold tracking-wider uppercase shadow-sm",children:[s.jsx(ta,{size:10})," v6.0"]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsx("p",{className:"text-xs text-ink-600 font-bold tracking-wide",children:" "}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-50 border border-pink-200 text-pink-600 text-[10px] font-bold",children:[s.jsx(Io,{size:10,fill:"currentColor"})," ",d.label," ",d.emoji]})]})]})]}),s.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:x.map(b=>s.jsx("button",{onClick:()=>p(b),className:"px-3.5 py-1.5 rounded-full bg-white border border-brand-100 text-brand-700 text-xs font-bold hover:bg-brand-700 hover:text-white hover:border-brand-700 transition-all active:scale-95 shadow-sm hover:shadow-md backdrop-blur-sm",children:b},b))})]}),s.jsxs("div",{ref:m,className:"h-[380px] overflow-y-auto rounded-2xl bg-white/50 border border-brand-100/60 p-5 shadow-inner mb-4 flex flex-col gap-4 scroll-smooth backdrop-blur-md",role:"log","aria-live":"polite",children:[e.length===0?s.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-center p-4 opacity-80",children:[s.jsx(Vh,{}),s.jsx("p",{className:"mb-2 font-black text-brand-700 text-base",children:o?o.split("")[0]+"":" "}),s.jsx("p",{className:"text-sm leading-relaxed text-ink-600 max-w-xs mx-auto font-medium",children:o?o.includes("")?o.split("").slice(1).join(""):"":s.jsxs(s.Fragment,{children:["",s.jsx("br",{}),""]})})]}):e.map((b,g)=>s.jsx(rp,{role:b.role,content:b.content,timestamp:b.timestamp},g)),a&&s.jsx("div",{className:"flex justify-start animate-fadeIn",children:s.jsxs("div",{className:"rounded-2xl rounded-bl-sm px-4 py-3 bg-white border border-brand-100 text-brand-600 text-sm flex items-center gap-2 shadow-sm",children:[s.jsx("span",{className:"font-bold",children:"..."}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_ease-in-out_both]"}),s.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_ease-in-out_both_0.2s]"}),s.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_ease-in-out_both_0.4s]"})]})]})})]}),s.jsxs("div",{className:"relative group/input",children:[s.jsx("input",{type:"text",className:"w-full pl-5 pr-14 py-4 rounded-xl border-2 border-brand-100 bg-white/80 text-ink-900 font-bold text-[15px] placeholder:text-ink-400/80 transition-all focus:outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-50/50 hover:border-brand-300 shadow-sm backdrop-blur-sm",placeholder:"...",value:r,onChange:b=>n(b.target.value),onKeyDown:b=>b.key==="Enter"&&!b.shiftKey&&p(),disabled:a}),s.jsx("button",{onClick:()=>p(),disabled:a||!r.trim(),className:"absolute right-2 top-2 bottom-2 aspect-square rounded-lg bg-brand-700 text-white flex items-center justify-center shadow-md transition-all hover:bg-brand-600 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:transform-none disabled:shadow-none",children:s.jsx(Oc,{size:20,strokeWidth:2.5,className:"-ml-0.5 translate-y-[1px]"})})]})]})]})}const zl=$.memo(({id:e,name:t,rating:r,tags:n,content:a})=>s.jsxs("article",{className:"flex gap-3 border border-[#E6EDF7] rounded-2xl p-3.5 bg-white relative hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] transition-all duration-200 hover:-translate-y-0.5",children:[s.jsx("div",{className:"w-[38px] h-[38px] rounded-full bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] border border-[#E6EDF7] flex items-center justify-center font-black text-[#00385a] text-[15px] shrink-0 shadow-[inset_0_1px_2px_rgba(255,255,255,0.8),0_2px_4px_rgba(0,56,90,0.05)]",children:e}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("div",{className:"font-black text-[15px] text-[#0A2246] flex items-center gap-1.5",children:t}),s.jsx("div",{className:"flex gap-0.5","aria-label":`${r} stars`,children:Array.from({length:5}).map((i,o)=>s.jsx("span",{className:`text-xs ${o<r?"text-[#00385a]":"text-[#E6EDF7]"}`,children:""},o))})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:n.map(i=>s.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-md bg-[#F6F9FF] border border-[#E6EDF7] text-[#00385a] font-bold tracking-wide",children:i},i))}),s.jsx("p",{className:"text-[13px] leading-relaxed text-[#4B5563] font-medium text-justify",children:a})]})]}));zl.displayName="ReviewCard";function np(){return s.jsxs(ua,{className:"bg-white/96 backdrop-blur-md border border-[#E6EDF7] shadow-[0_4px_20px_rgba(0,56,90,0.03)] p-3",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#00385a] to-[#005585] rounded-2xl px-4 py-3 mb-4 flex justify-between items-center shadow-[0_2px_8px_rgba(0,56,90,0.15)] relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-6 -top-6 w-24 h-24 bg-white/5 rounded-full blur-2xl pointer-events-none"}),s.jsxs("div",{className:"flex items-center gap-2.5 relative z-10",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E63946] shadow-[0_0_8px_rgba(230,57,70,0.6)]"}),s.jsx("h3",{className:"text-lg font-black m-0 text-white tracking-wide text-shadow-sm",children:""}),s.jsx("span",{className:"text-[11px] font-bold text-[#00385a] bg-white/95 backdrop-blur-sm px-2.5 py-0.5 rounded-full shadow-sm border border-white/20",children:""})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Xm.map(e=>s.jsx(zl,{...e},e.id))}),s.jsxs("a",{className:"mt-4 flex items-center gap-2.5 bg-gradient-to-b from-white to-[#F6F9FF] border border-[#E6EDF7] p-3.5 rounded-xl font-black text-[#00385a] no-underline relative lg:justify-center lg:text-center group hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] hover:border-[#00385a]/20 transition-all duration-200 active:translate-y-px",href:"/maihouses/community-wall_mvp.html","aria-label":"",children:[s.jsx("span",{className:"text-[15px] tracking-wide lg:mx-auto group-hover:text-[#004E7C] transition-colors",children:""}),s.jsx("span",{className:"ml-auto bg-[#00385a] text-white rounded-lg text-xs font-bold px-3 py-1.5 lg:absolute lg:right-[14px] lg:top-1/2 lg:-translate-y-1/2 lg:ml-0 group-hover:bg-[#004E7C] transition-colors shadow-sm",children:" "})]})]})}function ap({property:e}){return s.jsxs("article",{className:"bg-white border border-[#E6EDF7] rounded-2xl overflow-hidden relative transition-all duration-[180ms] ease-out shadow-none hover:shadow-[0_10px_26px_rgba(13,39,94,0.12)] hover:-translate-y-0.5 hover:border-[#1749d738] group isolate",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(60%_60%_at_80%_-10%,rgba(23,73,215,0.12),transparent_60%)] opacity-80"}),s.jsxs("a",{href:`/property/${e.id}`,className:"block aspect-[4/3] bg-[#e9ecf5] relative overflow-hidden",children:[s.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover block transform scale-100 transition-transform duration-[600ms] cubic-bezier(0.2,0.65,0.2,1) group-hover:scale-105"}),s.jsx("span",{className:"absolute left-2.5 top-2.5 bg-black/75 text-white text-xs font-extrabold px-2 py-1 rounded-full tracking-[0.2px] shadow-[0_4px_10px_rgba(0,0,0,0.18)]",children:e.badge})]}),s.jsxs("div",{className:"p-3 pb-3.5",children:[s.jsx("div",{className:"font-extrabold text-base leading-[1.35] my-0.5 mb-2 tracking-[0.3px] text-[#0A2246] lg:text-[21px]",children:e.title}),s.jsx("div",{className:"flex flex-wrap gap-2 items-center text-[#6C7B91] text-[13px] mb-1.5",children:e.tags.map((t,r)=>s.jsx("span",{className:"px-2.5 py-0.5 rounded-full bg-[#F6F9FF] border border-[#E6EDF7] font-extrabold text-[#2A2F3A] transition-all duration-120 ease-out group-hover:-translate-y-px group-hover:shadow-[0_4px_10px_rgba(0,56,90,0.10)]",children:t},r))}),s.jsxs("div",{className:"text-[19px] font-black text-[#111] my-2 mb-1 tracking-[0.2px]",children:["NT$ ",e.price," "]}),s.jsx("div",{className:"text-[13px] text-[#6C7B91]",children:e.location}),s.jsxs("div",{className:"mt-2.5 px-3 py-2.5 border border-[#E6EDF7] rounded-xl bg-gradient-to-b from-[#F6F9FF] to-white",children:[s.jsx("div",{className:"flex items-center gap-2 text-[13px] font-black mb-2 text-black/85 before:content-[''] before:text-xs before:leading-none before:text-[#00385a] before:drop-shadow-[0_1px_0_rgba(0,56,90,0.12)]",children:""}),e.reviews.map((t,r)=>s.jsxs("div",{className:`flex gap-2.5 items-start py-2 ${r!==0?"border-t border-dashed border-black/10":""}`,children:[s.jsx("div",{className:"w-[30px] h-[30px] rounded-full grid place-items-center text-xs font-black bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-[#00385a] flex-none shadow-[inset_0_0_0_1px_rgba(0,56,90,0.15)]",children:t.avatar}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 text-xs text-black/60",children:[s.jsxs("span",{className:"font-black text-black/85",children:[t.name,"  ",t.role]}),s.jsx("span",{className:"w-1 h-1 rounded-full bg-black/20 inline-block"}),s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#00385a]/10 text-[#00385a] font-black",children:t.tag})]}),s.jsx("div",{className:"text-[13px] leading-[1.6] text-black/85",children:t.text})]})]},r)),s.jsx("button",{type:"button",className:"mt-2.5 w-full px-3 py-2.5 rounded-xl border border-[#00385a]/30 bg-gradient-to-b from-white to-[#F5F7FA] cursor-pointer text-[13px] font-black text-[#00385a] transition-all duration-150 ease-out hover:from-white hover:to-[#E8F0FF] hover:shadow-[0_6px_14px_rgba(0,56,90,0.18)] active:translate-y-px",children:""})]})]})]})}function ip(){return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center gap-2.5 my-[18px] mb-3","aria-label":"",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 border border-[#E6EDF7] rounded-full bg-gradient-to-b from-white to-[#F6F9FF] text-[#00385a] font-black text-sm tracking-[0.2px]",children:[s.jsx("span",{className:"w-[18px] h-[18px] rounded-md grid place-items-center bg-gradient-to-b from-[#00385a] to-[#004E7C] text-white text-xs font-black shadow-[0_2px_6px_rgba(0,56,90,0.18)]",children:""}),s.jsx("span",{className:"leading-none text-base md:text-lg md:font-bold",children:""}),s.jsx("span",{className:"ml-1.5 text-sm text-[#6C7B91] font-bold",children:""})]}),s.jsx("div",{className:"h-1.5 rounded-full flex-1 bg-gradient-to-r from-[#00385a] via-[#004E7C] to-[#7EA5FF] bg-[length:200%_100%] opacity-25 ml-2.5 animate-mhRecoBar","aria-hidden":"true"})]}),s.jsx("div",{className:"grid grid-cols-1 gap-[18px] md:grid-cols-2 lg:grid-cols-3","aria-label":"",title:"",children:eh.map(e=>s.jsx(ap,{property:e},e.id))})]})}const op=()=>{const[e,t]=h.useState(!1),r=h.useMemo(()=>er(),[]),n=h.useMemo(()=>Ru(3),[]),a=h.useMemo(()=>Lu(r.milestones),[r.milestones]);if(h.useEffect(()=>{const{isFirstVisit:m}=Au(),u=n&&n.length>0||!!a||!!r.lastMood,x=!m&&!Mu()&&u;t(x),x&&We(qe.WarmbarView,{tags:n,milestone:!!a,lastMood:r.lastMood})},[n,a,r.lastMood]),!e)return null;const i=m=>m==="stress"?"":m==="rest"?"":"",o=n&&n.length>0?`${n.join("")}`:null,l=a||(o?`${i(r.lastMood)}${o}`:`${i(r.lastMood)}`),d=()=>{We(qe.WarmbarContinue,{tags:n,milestone:!!a});const m=a?"":n&&n.length>0?` ${n.join("")}`:"";window.dispatchEvent(new CustomEvent("mai:chat:start",{detail:{text:m}}))},c=()=>{Pu(),t(!1),We(qe.WarmbarDismiss,{})};return s.jsxs("div",{className:"w-full bg-[#F5F8FF] text-[#0a2246] text-sm leading-[34px] h-[34px] text-center tracking-wide border-b border-[#E6ECFF] flex items-center justify-center gap-3",role:"status","aria-live":"polite",children:[s.jsx("span",{children:l}),s.jsx("button",{className:"px-2.5 py-0.5 rounded-full border border-[#1749D7] bg-[#1749D7] text-white cursor-pointer leading-6 h-[26px] hover:bg-[#123cb3] transition-colors",onClick:d,children:""}),s.jsx("button",{className:"px-2.5 py-0.5 rounded-full border border-[#C9D5FF] bg-white text-[#1749D7] cursor-pointer leading-6 h-[26px] hover:bg-gray-50 transition-colors",onClick:c,children:""})]})};function lp({config:e}){const[t,r]=h.useState(null);h.useEffect(()=>{ml().then(a=>{a.ok&&a.data&&(a.data.maintenance||Wh(a.data.backendVersion,e.minBackend)<0)&&(console.warn(""),r(""))})},[e.minBackend]),h.useEffect(()=>{const a=i=>{var o;try{ca("unhandled_promise_rejection","/",((o=i.reason)==null?void 0:o.message)||String(i.reason))}catch{}};return globalThis.addEventListener("unhandledrejection",a),()=>globalThis.removeEventListener("unhandledrejection",a)},[]);const n=e.features||{};return s.jsxs(s.Fragment,{children:[s.jsx(Ym,{}),s.jsx(op,{}),t&&s.jsx("div",{className:"mx-auto mt-4 max-w-container rounded-md bg-yellow-500 p-3 text-sm text-white",children:t}),s.jsxs("main",{className:"relative mx-auto max-w-container space-y-6 p-4 md:space-y-8 md:p-6",children:[n.heroAssure!==!1&&s.jsx(qh,{}),n.smartAsk!==!1&&s.jsx(Tl,{}),s.jsx(np,{}),n.propertyGrid!==!1&&s.jsx(ip,{})]})]})}function fr({communityName:e}){return s.jsxs("header",{className:"sticky top-0 z-50 flex items-center gap-2.5 border-b border-[rgba(230,237,247,0.8)] bg-[rgba(246,249,255,0.95)] px-4 py-2 backdrop-blur-[12px]",children:[s.jsxs("a",{href:"/maihouses/",className:"flex items-center gap-2 rounded-[10px] px-2.5 py-1.5 text-sm font-bold text-[var(--primary)] no-underline transition-colors hover:bg-[rgba(0,56,90,0.06)]","aria-label":"",children:[s.jsx("svg",{className:"h-[18px] w-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:s.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"m-0 text-base font-extrabold text-[var(--primary-dark)]",children:e}),s.jsx("p",{className:"m-0 text-[11px] text-[var(--text-secondary)]",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"relative inline-flex items-center gap-1.5 rounded-xl border border-[var(--line)] bg-white px-2 py-2 text-sm text-[#173a7c] transition-all hover:bg-[#f6f9ff]","aria-label":"2 ",children:["",s.jsx("span",{className:"absolute -right-1.5 -top-1.5 flex h-[18px] min-w-[18px] items-center justify-center rounded-full border-2 border-white bg-[#e02626] text-[11px] font-bold text-white","aria-hidden":"true",children:"2"})]}),s.jsx("button",{className:"flex items-center gap-1 rounded-[14px] border border-[var(--line)] bg-white px-2.5 py-1.5 text-[13px] font-bold text-[#173a7c]","aria-label":"",children:" "})]})]})}function sr(e){const t=e==="guest",r=e==="member",n=e==="resident",a=e==="agent";return{isGuest:t,isMember:r,isResident:n,isAgent:a,isLoggedIn:!t,canSeeAllReviews:!t,canSeeAllPosts:!t,canAccessPrivate:n||a,canPostPublic:n||a,canPostPrivate:n,canAskQuestion:!t,canAnswer:n||a,showExpertBadge:a}}const cp=2,dp=3,up=2;function ma(e,t,r=cp){return h.useMemo(()=>{if(t)return{visible:e,hiddenCount:0,nextHidden:null};const n=e.slice(0,r),a=Math.max(0,e.length-r),i=a>0?e[r]??null:null;return{visible:n,hiddenCount:a,nextHidden:i}},[e,t,r])}function ha({children:e,hiddenCount:t,countLabel:r,benefits:n=["",""],ctaText:a=" / ",onCtaClick:i,visible:o=!0}){if(t<=0)return null;const l=!o;return s.jsxs("div",{className:`relative transition-opacity duration-200 ${l?"pointer-events-none opacity-0":"opacity-100"}`,"aria-hidden":l,children:[s.jsx("div",{className:"pointer-events-none select-none blur-[4px]","aria-hidden":"true",children:e}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center rounded-[14px] bg-white/85 p-5 text-center",children:[s.jsxs("h4",{className:"mb-1 text-sm font-extrabold text-brand-700",children:["  ",t," ",r]}),s.jsx("p",{className:"mb-2.5 text-xs text-ink-600",children:n.map((d,c)=>s.jsxs("span",{children:[c>0&&""," ",d]},c))}),s.jsx("button",{onClick:i,className:"rounded-full bg-gradient-to-br from-brand to-brand-600 px-6 py-2.5 text-[13px] font-bold text-white transition-transform hover:scale-[1.02]",children:a})]})]})}function xi({entry:e}){const t=e.type==="pro",r=e.visits>0,n=e.deals>0;return s.jsxs("div",{className:"rounded-[14px] border border-border-light bg-white p-3.5 transition-all hover:border-brand/15 hover:shadow-[0_2px_8px_rgba(0,56,90,0.04)]",children:[s.jsxs("div",{className:"mb-2.5 flex items-center gap-2.5",children:[s.jsx("div",{className:"flex h-[38px] w-[38px] items-center justify-center rounded-full border-2 border-brand bg-gradient-to-br from-brand-100/50 to-white text-sm font-extrabold text-brand","aria-hidden":"true",children:e.author.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-[13px] font-bold text-ink-900",children:[e.author,e.company?`${e.company}`:""]}),(r||n)&&s.jsxs("div",{className:"text-[11px] text-ink-600",children:[r&&` ${e.visits} `,r&&n&&"  ",n&&` ${e.deals} `]})]})]}),s.jsxs("div",{className:`flex items-start gap-2.5 rounded-[10px] p-2 text-[13px] leading-relaxed ${t?"bg-gradient-to-br from-brand-50 to-brand-100/50":"bg-gradient-to-br from-brand-100/30 to-brand-100"}`,children:[s.jsx("span",{className:"flex h-6 w-6 shrink-0 items-center justify-center text-base","aria-hidden":"true",children:t?"":""}),s.jsx("span",{className:"flex-1 text-ink-900",children:e.text})]})]})}function mp({role:e,reviews:t,onUnlock:r}){const n=Array.isArray(t)?t:(t==null?void 0:t.items)??[],a=sr(e),i=h.useMemo(()=>{const c=[];return n.forEach(m=>{m.pros.forEach((x,p)=>{x&&c.push({id:`${m.id}-pro-${p}`,type:"pro",text:x,author:m.author,company:m.company,visits:m.visits,deals:m.deals})}),(Array.isArray(m.cons)?m.cons:[m.cons]).forEach((x,p)=>{x&&c.push({id:`${m.id}-con-${p}`,type:"con",text:x,author:m.author,company:m.company,visits:m.visits,deals:m.deals})})}),c},[n]),{visible:o,hiddenCount:l,nextHidden:d}=ma(i,a.canSeeAllReviews);return s.jsxs("section",{className:"overflow-hidden rounded-[18px] border border-border-light bg-white/98 shadow-[0_2px_12px_rgba(0,51,102,0.04)]","aria-labelledby":"reviews-heading",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-brand/5 bg-gradient-to-br from-brand/8 to-brand-600/4 px-4 py-3.5",children:[s.jsxs("div",{children:[s.jsx("h2",{id:"reviews-heading",className:"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700",children:" "}),s.jsx("p",{className:"mt-0.5 text-[11px] text-ink-600",children:""})]}),s.jsxs("span",{className:"flex items-center gap-1 rounded-full border border-brand-600 bg-brand/8 px-2.5 py-1 text-[10px] font-bold text-brand",children:[n.length," "]})]}),s.jsxs("div",{className:"flex flex-col gap-2.5 p-3.5",children:[o.map(c=>s.jsx(xi,{entry:c},c.id)),s.jsx(ha,{visible:l>0&&!!d,hiddenCount:l,countLabel:"",benefits:["",""],...r?{onCtaClick:r}:{},children:d&&s.jsx(xi,{entry:d})})]})]})}function hp({isOpen:e,onClose:t,onSubmit:r,visibility:n,minLength:a=5,maxLength:i=500,role:o}){const[l,d]=h.useState(""),[c,m]=h.useState(""),[u,x]=h.useState(!1),p=h.useRef(null),b=h.useRef(null),g=h.useRef(null),y=n==="private",f=y?"":"",j=y?"...":"...",S=o==="guest",N=u,I=h.useCallback(()=>{d(""),m(""),x(!1)},[]),k=h.useCallback(()=>{u||(I(),t())},[u,I,t]),M=()=>{const E=l.trim();return E.length<a?` ${a} `:E.length>i?` ${i} `:null},C=async()=>{if(S){m("");return}const E=M();if(E){m(E);return}x(!0),m("");try{await r(l.trim()),I(),t()}catch(_){m(_ instanceof Error?_.message:"")}finally{x(!1)}},D=E=>{const _=["button:not([disabled])","textarea:not([disabled])","input:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(E.querySelectorAll(_))},w=h.useCallback(E=>{if(E.key!=="Tab"||!p.current)return;const _=D(p.current);if(!_.length)return;const L=_[0],U=_[_.length-1],z=document.activeElement;!E.shiftKey&&z===U&&(L==null||L.focus(),E.preventDefault()),E.shiftKey&&z===L&&(U==null||U.focus(),E.preventDefault())},[]),T=h.useCallback(E=>{E.key==="Escape"&&!u&&k(),w(E)},[u,k,w]);if(h.useEffect(()=>{var E;e?(g.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{var _;return(_=b.current)==null?void 0:_.focus()},10)):(document.body.style.overflow="",(E=g.current)!=null&&E.focus&&g.current.focus())},[e]),h.useEffect(()=>{if(e)return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[e,T]),h.useEffect(()=>{e&&S&&t()},[e,S,t]),!e||S)return null;const O=l.length,A=O>i;return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"post-modal-title",onClick:E=>{E.target===E.currentTarget&&k()},children:s.jsxs("div",{ref:p,className:"w-full max-w-md rounded-2xl bg-white shadow-xl",onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-border-light px-4 py-3",children:[s.jsxs("h2",{id:"post-modal-title",className:"flex items-center gap-2 text-base font-bold text-brand-700",children:[y?"":""," ",f]}),s.jsx("button",{type:"button",onClick:k,disabled:u,className:"rounded-full p-1 text-ink-600 hover:bg-brand/10 hover:text-brand disabled:opacity-50","aria-label":"",children:""})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("textarea",{ref:b,value:l,onChange:E=>{d(E.target.value),c&&m("")},placeholder:j,disabled:N,rows:5,className:`w-full resize-none rounded-xl border bg-brand/3 p-3 text-sm text-ink-900 placeholder:text-ink-400 focus:border-brand focus:outline-none focus:ring-2 focus:ring-brand/20 disabled:opacity-50 ${c?"border-red-400":"border-border-light"}`,"aria-describedby":c?"post-modal-error":void 0,"aria-invalid":!!c}),s.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[s.jsxs("span",{className:A?"text-red-500":"text-ink-500",children:[O," / ",i," "]}),y&&s.jsx("span",{className:"text-brand-600",children:" "})]}),c&&s.jsxs("p",{id:"post-modal-error",className:"mt-2 text-sm text-red-500",role:"alert",children:[" ",c]})]}),s.jsxs("div",{className:"flex justify-end gap-2 border-t border-border-light px-4 py-3",children:[s.jsx("button",{type:"button",onClick:k,disabled:N,className:"rounded-lg border border-border-light px-4 py-2 text-sm font-medium text-ink-600 hover:bg-brand/5 disabled:opacity-50",children:""}),s.jsx("button",{type:"button",onClick:C,disabled:N||A,className:"rounded-lg bg-brand px-4 py-2 text-sm font-bold text-white hover:bg-brand-700 disabled:opacity-50","aria-busy":u,children:u?"...":""})]})]})})}const hs=new Intl.RelativeTimeFormat("zh-TW",{numeric:"auto"}),Mr=60*1e3,Un=60*Mr,Ws=24*Un,gi=7*Ws,bi=30*Ws,vi=365*Ws,pp=e=>{if(e instanceof Date)return Number.isNaN(e.getTime())?null:e;if(typeof e=="number"){const r=new Date(e);return Number.isNaN(r.getTime())?null:r}const t=new Date(e);return Number.isNaN(t.getTime())?null:t};function Al(e){const t=pp(e);if(!t)return typeof e=="string"&&e.trim()?e:"";const r=Date.now()-t.getTime();if(r<0)return t.toLocaleDateString("zh-TW");if(r<Mr)return"";if(r<Un){const a=Math.round(r/Mr);return hs.format(-a,"minute")}if(r<Ws){const a=Math.round(r/Un);return hs.format(-a,"hour")}if(r<gi){const a=Math.round(r/Ws);return hs.format(-a,"day")}if(r<bi){const a=Math.round(r/gi);return hs.format(-a,"week")}if(r<vi){const a=Math.round(r/bi);return hs.format(-a,"month")}const n=Math.round(r/vi);return hs.format(-n,"year")}function st(e){const t=Date.now()-e*Mr;return new Date(t).toISOString()}const ps=(e={},t,r=3200)=>{const n={duration:e.duration??r,dismissible:e.dismissible??!0};return e.id!==void 0&&(n.id=e.id),t!==void 0?n.description=t:e.description!==void 0&&(n.description=e.description),e.actionLabel&&e.onAction&&(n.action={label:e.actionLabel,onClick:e.onAction}),n},J={success:(e,t,r)=>Zt.success(e,ps(r,t,3200)),error:(e,t,r)=>Zt.error(e,ps(r,t,(r==null?void 0:r.duration)??5e3)),warning:(e,t,r)=>Zt.warning(e,ps(r,t,(r==null?void 0:r.duration)??4500)),info:(e,t,r)=>Zt.info(e,ps(r,t,3200)),loading:(e,t)=>Zt.loading(e,ps(t,t==null?void 0:t.description,(t==null?void 0:t.duration)??1/0)),dev:(e="",t)=>Zt.info("",ps(t,e,(t==null?void 0:t.duration)??2200)),dismiss:e=>Zt.dismiss(e)};function cn({post:e,onLike:t}){const[r,n]=h.useState(!1),a=h.useRef(null),i=h.useRef(!0),o=e.type==="agent",l=e.type==="official",d=Al(e.time),c=o?s.jsx("span",{className:"rounded bg-brand-100 px-1.5 py-0.5 text-[9px] font-bold text-brand-600",children:""}):l?s.jsx("span",{className:"rounded bg-brand-50 px-1.5 py-0.5 text-[9px] font-bold text-brand",children:""}):e.floor?s.jsxs("span",{className:"rounded bg-brand-100 px-1.5 py-0.5 text-[9px] font-bold text-brand",children:[e.floor," "]}):null,m=e.likes!==void 0?s.jsxs("span",{className:"flex items-center gap-1",children:[" ",e.likes]}):e.views!==void 0?s.jsxs("span",{className:"flex items-center gap-1",children:[" ",e.views]}):null,u=e.comments!==void 0?s.jsxs("span",{className:"flex items-center gap-1",children:[" ",e.comments]}):null;h.useEffect(()=>(i.current=!0,()=>{i.current=!1,a.current&&clearTimeout(a.current)}),[]);const x=h.useCallback(()=>{!t||r||a.current||(a.current=setTimeout(async()=>{a.current=null,n(!0);try{await t(e.id)}catch(p){console.error("Failed to toggle like",p)}finally{i.current&&n(!1)}},250))},[t,e.id,r]);return s.jsxs("article",{className:"flex gap-2.5 rounded-[14px] border border-border-light bg-white p-3 transition-all hover:border-brand-600 hover:shadow-[0_2px_8px_rgba(0,56,90,0.06)]",children:[s.jsx("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 bg-gradient-to-br from-brand-100/50 to-white text-base font-extrabold ${o?"border-brand-light text-brand-600":"border-brand text-brand"}`,"aria-hidden":"true",children:e.author.charAt(0)}),s.jsxs("div",{className:"flex flex-1 flex-col gap-1.5",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-[13px] font-bold text-ink-900",children:e.author}),c,s.jsx("span",{className:"text-[11px] text-ink-600",children:d})]}),s.jsxs("div",{className:"text-[13px] leading-relaxed text-ink-900",children:[s.jsx("b",{children:e.title}),s.jsx("br",{}),e.content]}),s.jsxs("div",{className:"flex gap-3 text-[11px] text-ink-600",children:[m,u,e.private&&s.jsx("span",{className:"flex items-center gap-1",children:" "})]}),s.jsx("div",{className:"mt-1 flex gap-2",children:o?s.jsx("button",{className:"flex items-center gap-1 rounded-lg border border-brand/10 bg-brand/6 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition-all hover:bg-brand/12","aria-label":"",children:" "}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"flex items-center gap-1 rounded-lg border border-brand/10 bg-brand/6 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition-all hover:bg-brand/12 disabled:cursor-not-allowed disabled:opacity-60",onClick:x,"aria-label":"","aria-busy":r,disabled:r,children:r?" ":" "}),s.jsx("button",{className:"flex items-center gap-1 rounded-lg border border-brand/10 bg-brand/6 px-2.5 py-1.5 text-[11px] font-semibold text-brand/50 cursor-not-allowed opacity-60 transition-all","aria-label":"",title:" ",disabled:!0,children:" "})]})})]})]})}function fp({role:e,isAuthenticated:t,currentTab:r,onTabChange:n,publicPosts:a,privatePosts:i,onLike:o,onCreatePost:l,onUnlock:d}){const c=sr(e),m=c.isGuest,u=h.useId(),x=`${u}-public`,p=`${u}-private`,b=`${u}-panel`,g=h.useRef({public:null,private:null}),[y,f]=h.useState(!1),[j,S]=h.useState("public"),N=A=>{if(m){J.error("","");return}if(A==="public"&&!c.canPostPublic){J.error("","");return}if(A==="private"&&!c.canPostPrivate){J.error("");return}S(A),f(!0)},I=async A=>{if(m){J.error("","");return}l&&l(A,j)},{visible:k,hiddenCount:M,nextHidden:C}=ma(a,c.canSeeAllPosts),D=h.useCallback(A=>{var E;(E=g.current[A])==null||E.focus()},[]),w=h.useMemo(()=>c.canAccessPrivate?["public","private"]:["public"],[c.canAccessPrivate]),T=()=>{if(!c.canAccessPrivate){J.error(c.isGuest?"":"",c.isGuest?" /":" ");return}n("private")},O=h.useCallback((A,E)=>{if(!["ArrowLeft","ArrowRight","Home","End"].includes(A.key))return;A.preventDefault();const _=w[w.length-1];if(A.key==="Home"){D("public"),r!=="public"&&n("public");return}if(A.key==="End"){_&&_!==r?(D(_),n(_)):_&&D(_);return}const L=w.indexOf(E);if(L===-1)return;const U=A.key==="ArrowLeft"?-1:1,z=(L+U+w.length)%w.length,W=w[z];if(W){if(W==="private"&&!c.canAccessPrivate){D("public"),n("public");return}D(W),n(W)}},[w,r,D,n,c.canAccessPrivate]);return s.jsxs("section",{id:"public-wall",className:"scroll-mt-20 overflow-hidden rounded-[18px] border border-border-light bg-white/98 shadow-[0_2px_12px_rgba(0,51,102,0.04)]","aria-labelledby":"posts-heading",children:[s.jsx("div",{className:"flex items-center justify-between border-b border-brand/5 bg-gradient-to-br from-brand/3 to-brand-600/1 px-4 py-3.5",children:s.jsx("h2",{id:"posts-heading",className:"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700",children:" "})}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 px-3.5 pb-3.5 pt-2",role:"tablist","aria-label":"",children:[s.jsx("button",{role:"tab",id:x,ref:A=>{g.current.public=A},"aria-selected":r==="public","aria-controls":b,onClick:()=>n("public"),onKeyDown:A=>O(A,"public"),tabIndex:r==="public"?0:-1,className:`rounded-full border px-3.5 py-1.5 text-xs font-semibold transition-all ${r==="public"?"border-brand-600 bg-brand/10 font-bold text-brand":"border-transparent bg-brand-100/80 text-ink-600 hover:bg-brand/8 hover:text-brand"}`,children:""}),s.jsxs("button",{role:"tab",id:p,ref:A=>{g.current.private=A},"aria-selected":r==="private","aria-controls":b,"aria-disabled":!c.canAccessPrivate,onClick:T,onKeyDown:A=>O(A,"private"),tabIndex:c.canAccessPrivate&&r==="private"?0:-1,className:`rounded-full border px-3.5 py-1.5 text-xs font-semibold transition-all ${r==="private"?"border-brand-600 bg-brand/10 font-bold text-brand":"border-transparent bg-brand-100/80 text-ink-600 hover:bg-brand/8 hover:text-brand"} ${c.canAccessPrivate?"":"opacity-60"}`,children:[" ",!c.canAccessPrivate&&""]})]}),s.jsx("div",{id:b,role:"tabpanel","aria-labelledby":r==="public"?x:p,tabIndex:0,className:"flex flex-col gap-2.5 px-3.5 pb-3.5",children:r==="public"?s.jsxs(s.Fragment,{children:[k.map(A=>s.jsx(cn,{post:A,...o?{onLike:o}:{}},A.id)),s.jsx(ha,{visible:M>0&&!!C,hiddenCount:M,countLabel:"",benefits:["",""],...d?{onCtaClick:d}:{},children:C&&s.jsx(cn,{post:C})}),c.canPostPublic?s.jsx("div",{className:"flex justify-center rounded-[14px] border border-dashed border-border-light bg-brand/3 p-5",children:s.jsx("button",{onClick:()=>N("public"),className:"flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 bg-brand/6 px-2.5 py-1.5 text-[11px] font-semibold text-brand hover:bg-brand/12",children:" "})}):s.jsxs("div",{className:"flex flex-col gap-2 rounded-[14px] border border-dashed border-border-light bg-brand/3 p-4 text-center text-[11px] text-ink-700",children:[s.jsx("span",{children:" "}),s.jsx("button",{onClick:()=>{d?d():J.error("","")},className:"mx-auto rounded-full bg-brand px-4 py-2 font-bold text-white",children:" / "})]})]}):c.canAccessPrivate?s.jsxs(s.Fragment,{children:[i.map(A=>s.jsx(cn,{post:A,...o?{onLike:o}:{}},A.id)),c.canPostPrivate?s.jsx("div",{className:"flex justify-center rounded-[14px] border border-dashed border-border-light bg-brand/3 p-5",children:s.jsx("button",{onClick:()=>N("private"),className:"flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 bg-brand/6 px-2.5 py-1.5 text-[11px] font-semibold text-brand hover:bg-brand/12",children:" "})}):s.jsx("p",{className:"py-3 text-center text-[11px] text-ink-600",children:" "})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[14px] bg-brand/3 px-5 py-10 text-center",children:[s.jsx("div",{className:"mb-3 text-5xl opacity-50","aria-hidden":"true",children:""}),s.jsx("h4",{className:"mb-1.5 text-sm font-bold text-brand-700",children:""}),s.jsx("p",{className:"mb-4 text-xs text-ink-600",children:c.isGuest?"":""}),s.jsx("button",{onClick:d,className:"rounded-full bg-brand px-5 py-2.5 text-xs font-bold text-white",children:c.isGuest?" / ":""})]})}),s.jsx(hp,{isOpen:y,onClose:()=>f(!1),onSubmit:I,visibility:j,role:m?"guest":e})]})}function dn({q:e,perm:t,isUnanswered:r=!1,onAnswer:n,isAnswering:a,onUnlock:i,hideUnlockButton:o=!1}){const l=Al(e.time);return s.jsxs("article",{className:`rounded-[12px] border p-3 transition-all hover:border-brand/15 ${r?"border-brand-light/30 bg-gradient-to-br from-brand-50 to-brand-100/30":"border-border-light bg-white"}`,children:[s.jsxs("div",{className:"mb-1.5 text-[13px] font-bold leading-snug text-brand-700",children:["Q: ",e.question]}),s.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-1.5 text-[11px] text-ink-600",children:[s.jsx("span",{children:" "}),s.jsxs("span",{children:[" ",l]}),r?s.jsx("span",{className:"font-bold text-brand-light",children:" "}):s.jsxs("span",{children:[" ",e.answersCount," "]})]}),r?s.jsx("div",{className:"mt-2 rounded-[10px] bg-brand/2 p-4 text-center text-[13px] text-ink-600",children:" "}):s.jsxs("div",{className:"flex flex-col gap-1.5 border-l-[3px] border-border-light pl-3",children:[e.answers.map((d,c)=>s.jsxs("div",{className:"py-1.5 text-[12px] leading-relaxed",children:[s.jsxs("div",{className:"mb-1 flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:`rounded px-2 py-0.5 text-[10px] font-bold ${d.type==="agent"?"bg-brand-100 text-brand-600":d.type==="official"?"bg-brand-50 text-brand":"bg-brand-100 text-brand"}`,children:d.type==="agent"?" ":d.type==="official"?` ${d.author}`:` ${d.author}`}),d.expert&&s.jsx("span",{className:"rounded bg-brand-100 px-2 py-0.5 text-[10px] font-bold text-brand-600",children:" "})]}),d.content]},c)),!o&&e.hasMoreAnswers&&e.totalAnswers&&s.jsxs("div",{className:"mt-2 rounded-lg border border-brand/10 bg-gradient-to-r from-brand-50 to-brand-100/50 p-3 text-center",children:[s.jsxs("p",{className:"mb-2 text-[13px] text-ink-700",children:["  ",s.jsx("span",{className:"font-bold text-brand",children:e.totalAnswers-e.answers.length})," "]}),s.jsx("button",{type:"button",onClick:i,className:"rounded-lg bg-brand px-4 py-2 text-[12px] font-bold text-white shadow-sm transition-all hover:bg-brand-dark hover:shadow-md",children:" /  "})]})]}),t.canAnswer&&s.jsx("div",{className:"mt-2",children:s.jsx("button",{type:"button",className:`flex w-full items-center justify-center gap-1 rounded-lg border px-2.5 py-1.5 text-[11px] font-semibold transition-all ${r?"border-brand-light/30 bg-brand-light/10 text-brand-600":"border-brand/10 bg-brand/6 text-brand"} hover:bg-brand/12`,onClick:()=>n==null?void 0:n(e),disabled:a,"aria-busy":a,"aria-label":r?"":"",children:a?" ":` ${r?"":""}${t.isAgent?"":""}`})})]})}function xp({role:e,questions:t,onAskQuestion:r,onAnswerQuestion:n,feedbackDurationMs:a=5e3,onUnlock:i}){const o=Array.isArray(t)?t:(t==null?void 0:t.items)||[],l=sr(e),[d,c]=h.useState(!1),[m,u]=h.useState(""),[x,p]=h.useState(!1),[b,g]=h.useState(""),[y,f]=h.useState(null),[j,S]=h.useState(null),[N,I]=h.useState(""),[k,M]=h.useState(""),[C,D]=h.useState(""),w=h.useRef(null),T=h.useRef(null),O=h.useRef(null),A=h.useRef(null),E=h.useRef(null),_=h.useRef(null),L=o.filter(Q=>(Q.totalAnswers??Q.answersCount??Q.answers.length)>0),U=o.filter(Q=>(Q.totalAnswers??Q.answersCount??Q.answers.length)===0),{visible:z,hiddenCount:W,nextHidden:H}=ma(L,l.isLoggedIn),Z=L.length-z.length,ce=!l.isLoggedIn,G=!!i&&(ce||W>0||Z>0),X=10,re=5,xe=()=>{u(""),I("")},ne=()=>{g(""),M(""),f(null)},oe=()=>{_.current=document.activeElement},$e=()=>{if(!l.canAskQuestion){if(i){i();return}D(" ");return}oe(),xe(),c(!0)},ze=Q=>{if(!l.canAnswer){if(i){i();return}D(" ");return}oe(),ne(),f(Q),p(!0)},ae=()=>d?w.current:x?T.current:null,de=Q=>Q?Array.from(Q.querySelectorAll("a[href], button, textarea, input, select, [tabindex]")).filter(ge=>{const he=ge.getAttribute("tabindex"),Le=typeof he=="string"?Number(he):void 0,we=ge.hasAttribute("disabled")||ge.getAttribute("aria-disabled")==="true",ut=ge.hasAttribute("aria-hidden"),Xr=typeof Le=="number"&&Le<0;return!we&&!ut&&!Xr}):[],Nt=()=>{const Q=[document.querySelector("main"),document.querySelector("[data-app-root]"),document.getElementById("root"),document.body];for(const me of Q)if(me instanceof HTMLElement){const ge=me.getAttribute("tabindex");me.dataset.prevTabindex=ge??"",me.tabIndex=-1,me.focus(),setTimeout(()=>{const he=me.dataset.prevTabindex;he===""?me.removeAttribute("tabindex"):he!==void 0&&(me.tabIndex=Number(he)),delete me.dataset.prevTabindex},0);return}},$s=Q=>{if(Q.key!=="Tab")return;const me=ae();if(!me)return;const ge=de(me);if(!ge.length){const ut=me.getAttribute("tabindex");me.dataset.prevTabindex=ut??"",me.tabIndex=-1,me.focus(),Q.preventDefault();return}const[he]=ge,Le=ge[ge.length-1],we=document.activeElement;if(!we||!me.contains(we)){he==null||he.focus(),Q.preventDefault();return}!Q.shiftKey&&we===Le&&(he==null||he.focus(),Q.preventDefault()),Q.shiftKey&&we===he&&(Le==null||Le.focus(),Q.preventDefault())};h.useEffect(()=>{const Q=ae();if(!Q){document.body.style.overflow="";return}document.body.style.overflow="hidden";const me=he=>{he.key==="Escape"&&j!=="ask"&&j!=="answer"&&(d&&(c(!1),xe()),x&&(p(!1),ne())),$s(he)},ge=he=>{var Le;Q.contains(he.target)||((Le=de(Q)[0])==null||Le.focus(),he.preventDefault(),he.stopPropagation())};return document.addEventListener("keydown",me),document.addEventListener("focusin",ge),()=>{if(document.body.style.overflow="",document.removeEventListener("keydown",me),document.removeEventListener("focusin",ge),Q&&Q.dataset.prevTabindex!==void 0){const Le=Q.dataset.prevTabindex;Le===""?Q.removeAttribute("tabindex"):Q.tabIndex=Number(Le),delete Q.dataset.prevTabindex}const he=_.current;he&&document.body.contains(he)?he.focus():Nt(),_.current=null}},[d,x,j]),h.useEffect(()=>C?(E.current&&clearTimeout(E.current),E.current=window.setTimeout(()=>{D("")},a),()=>{E.current&&(clearTimeout(E.current),E.current=null)}):()=>{},[C,a]),h.useEffect(()=>{d&&requestAnimationFrame(()=>{var Q;(Q=O.current)==null||Q.focus()})},[d]),h.useEffect(()=>{x&&requestAnimationFrame(()=>{var Q;(Q=A.current)==null||Q.focus()})},[x]);const Jr=async()=>{const Q=m.trim();if(Q.length<X){I(` ${X} `);return}if(!r){I("");return}S("ask"),I("");try{await r(Q),c(!1),xe(),D(" ")}catch(me){console.error("Failed to submit question",me),I("")}finally{S(null)}},ar=async()=>{const Q=b.trim();if(!y){M("");return}if(Q.length<re){M(` ${re} `);return}if(!n){M("");return}S("answer"),M("");try{await n(String(y.id),Q),p(!1),ne(),D(" ")}catch(me){console.error("Failed to submit answer",me),M("")}finally{S(null)}};return s.jsxs("section",{className:"scroll-mt-20 overflow-hidden rounded-[18px] border border-border-light bg-white/98 shadow-[0_2px_12px_rgba(0,51,102,0.04)]","aria-labelledby":"qa-heading",id:"qa-section",children:[s.jsx("div",{className:"flex items-center justify-between border-b border-brand/5 bg-gradient-to-br from-brand/3 to-brand-600/1 px-4 py-3.5",children:s.jsxs("div",{children:[s.jsxs("h2",{id:"qa-heading",className:"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700",children:[" ",U.length>0&&s.jsxs("span",{className:"ml-1.5 rounded-full bg-brand-100 px-2 py-0.5 text-xs font-bold text-brand-600",children:[U.length," "]})]}),s.jsx("p",{className:"mt-0.5 text-[11px] text-ink-600",children:""})]})}),s.jsxs("div",{className:"flex flex-col gap-2.5 p-3.5 pb-12",children:[z.map(Q=>s.jsx(dn,{q:Q,perm:l,onAnswer:ze,isAnswering:j==="answer"&&(y==null?void 0:y.id)===Q.id,...i&&{onUnlock:i}},Q.id)),s.jsx(ha,{visible:W>0&&!!H,hiddenCount:W,countLabel:"",benefits:["",""],...i?{onCtaClick:i}:{},children:H&&s.jsx(dn,{q:H,perm:l,onAnswer:ze,isAnswering:j==="answer"&&(y==null?void 0:y.id)===H.id,hideUnlockButton:!0})}),s.jsxs("div",{className:"rounded-[14px] border border-dashed border-border-light bg-brand/3 p-3.5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-[12px] font-semibold text-brand-700",children:""}),U.length>0?U.map(Q=>s.jsx(dn,{q:Q,perm:l,isUnanswered:!0,onAnswer:ze,isAnswering:j==="answer"&&(y==null?void 0:y.id)===Q.id,...i&&{onUnlock:i}},Q.id)):s.jsx("div",{className:"rounded-[10px] border border-dashed border-border-light bg-white/80 p-3 text-center text-[12px] text-ink-600",children:""})]}),s.jsxs("div",{className:"mt-3 flex flex-col gap-1",children:[s.jsx("div",{className:"text-sm font-bold text-ink-600",children:" "}),s.jsx("p",{className:"text-xs text-ink-600",children:" 24 "}),s.jsx("button",{type:"button",onClick:$e,className:"flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 bg-brand/6 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition hover:bg-brand/12",children:l.canAskQuestion?"":""})]})]}),G&&s.jsxs("div",{className:"rounded-[12px] border border-brand/10 bg-brand/4 p-3 text-center",children:[s.jsx("div",{className:"text-sm font-bold text-brand-700",children:" / "}),s.jsx("p",{className:"mt-1 text-[12px] text-ink-600",children:Z>0?` ${Z} `:""}),s.jsx("button",{type:"button",onClick:i,className:"mt-2 w-full rounded-lg bg-brand px-3 py-2 text-[12px] font-semibold text-white shadow-sm transition hover:bg-brand-dark",children:""})]}),C&&s.jsx("p",{className:"text-center text-[11px] text-brand-600",role:"status","aria-live":"polite",children:C})]}),d&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:s.jsxs("div",{ref:w,role:"dialog","aria-modal":"true","aria-labelledby":"ask-modal-title",className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{id:"ask-modal-title",className:"text-base font-bold text-ink-700",children:""}),s.jsx("p",{className:"text-xs text-ink-500",children:""})]}),s.jsx("button",{type:"button",className:"text-sm text-ink-400 transition hover:text-ink-700",onClick:()=>{j!=="ask"&&(c(!1),xe())},"aria-label":"",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-ink-600",htmlFor:"qa-ask-textarea",children:""}),s.jsx("textarea",{ref:O,id:"qa-ask-textarea",className:"h-28 w-full rounded-xl border border-border-light bg-ink-50/40 p-3 text-sm outline-none focus:border-brand",placeholder:"",value:m,onChange:Q=>u(Q.target.value),maxLength:500,disabled:j==="ask"}),N&&s.jsx("p",{className:"text-xs text-error-500",role:"alert",children:N}),s.jsxs("div",{className:"flex items-center justify-between text-[11px] text-ink-400",children:[s.jsxs("span",{children:[" ",X," "]}),s.jsxs("span",{children:[m.length,"/500"]})]}),s.jsx("button",{type:"button",onClick:Jr,disabled:j==="ask",className:`w-full rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white transition ${j==="ask"?"opacity-70":"hover:bg-brand-600"}`,children:j==="ask"?"":""})]})]})}),x&&y&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:s.jsxs("div",{ref:T,role:"dialog","aria-modal":"true","aria-labelledby":"answer-modal-title",className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{id:"answer-modal-title",className:"text-base font-bold text-ink-700",children:""}),s.jsx("p",{className:"text-xs text-ink-500",children:y.question})]}),s.jsx("button",{type:"button",className:"text-sm text-ink-400 transition hover:text-ink-700",onClick:()=>{j!=="answer"&&(p(!1),ne())},"aria-label":"",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-ink-600",htmlFor:"qa-answer-textarea",children:""}),s.jsx("textarea",{ref:A,id:"qa-answer-textarea",className:"h-32 w-full rounded-xl border border-border-light bg-ink-50/40 p-3 text-sm outline-none focus:border-brand",placeholder:"",value:b,onChange:Q=>g(Q.target.value),maxLength:800,disabled:j==="answer"}),k&&s.jsx("p",{className:"text-xs text-error-500",role:"alert",children:k}),s.jsxs("div",{className:"flex items-center justify-between text-[11px] text-ink-400",children:[s.jsxs("span",{children:[" ",re," "]}),s.jsxs("span",{children:[b.length,"/800"]})]}),s.jsx("button",{type:"button",onClick:ar,disabled:j==="answer",className:`w-full rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white transition ${j==="answer"?"opacity-70":"hover:bg-brand-600"}`,children:j==="answer"?"":""})]})]})})]})}function xr(e,t=""){return e==null?"-":`${e}${t}`}function gp({info:e,questions:t,posts:r}){const n=h.useMemo(()=>Array.isArray(t)?t:(t==null?void 0:t.items)||[],[t]),a=h.useMemo(()=>n.slice(0,dp),[n]),i=h.useMemo(()=>[...r].sort((o,l)=>{const d=(o.likes||0)+(o.views||0)*.1;return(l.likes||0)+(l.views||0)*.1-d}).slice(0,up),[r]);return s.jsxs("aside",{className:"hidden w-[280px] shrink-0 flex-col gap-3 self-start lg:sticky lg:top-[70px] lg:flex",children:[s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"mt-2.5 grid grid-cols-2 gap-2",children:[[xr(e.members),""],[xr(e.avgRating),""],[xr(e.monthlyInteractions),""],[xr(e.forSale),""]].map(([o,l])=>s.jsxs("div",{className:"rounded-[10px] bg-gradient-to-br from-[#f8faff] to-[#f0f5ff] p-3 text-center",children:[s.jsx("div",{className:"text-xl font-black text-[var(--brand)]",children:o}),s.jsx("div",{className:"mt-0.5 text-[11px] text-[var(--text-secondary)]",children:l})]},l))})]}),s.jsxs("nav",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]","aria-label":"",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"flex flex-col gap-1",children:[" "," "," "].map(o=>s.jsx("a",{href:"#",className:"flex items-center gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]",children:o},o))})]}),s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"flex flex-col gap-1",children:a.map(o=>s.jsxs("a",{href:"#qa-section",className:"flex items-start gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]",children:[s.jsx("span",{className:"shrink-0","aria-hidden":"true",children:""}),s.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:o.question.length>18?o.question.substring(0,18)+"...":o.question})]},o.id))}),s.jsx("a",{href:"#qa-section",className:"mt-2 block text-center text-xs text-[var(--brand-light)] no-underline",children:" "})]}),s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"flex flex-col gap-1",children:i.map(o=>s.jsxs("a",{href:"#public-wall",className:"flex items-start gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]",children:[s.jsxs("span",{className:"shrink-0","aria-hidden":"true",children:[" ",o.likes]}),s.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:o.title.length>15?o.title.substring(0,15)+"...":o.title})]},o.id))}),s.jsx("a",{href:"#public-wall",className:"mt-2 block text-center text-xs text-[var(--brand-light)] no-underline",children:" "})]}),s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-gradient-to-br from-[#f0f7ff] to-[#e8f4ff] p-3.5 text-center shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsxs("svg",{className:"mx-auto mb-2 h-24 w-20 text-[#00385a]",viewBox:"0 0 200 240","aria-hidden":"true",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 55 130 L 25 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{className:"origin-[85%_60%] animate-[wave_2.5s_ease-in-out_infinite]",d:"M 145 130 L 175 100",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{className:"origin-[85%_60%] animate-[wave_2.5s_ease-in-out_infinite]",cx:"180",cy:"95",r:"6",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 85 180 L 85 210 L 75 210",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 115 180 L 115 210 L 125 210",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]}),s.jsx("p",{className:"mb-2.5 text-[13px] font-bold text-[var(--brand)]",children:""}),s.jsx("a",{href:"#qa-section",className:"inline-block rounded-full bg-[var(--brand)] px-4 py-2 text-xs font-bold text-white no-underline",children:" "})]})]})}const yi={guest:"",member:"",resident:"",agent:""},wi={guest:" ",member:" ",resident:" ",agent:" "};function bp({role:e,onRoleChange:t}){const[r,n]=h.useState(!1);return s.jsxs("div",{className:"fixed bottom-5 right-5 z-[1000]",children:[s.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-1.5 rounded-xl bg-gradient-to-br from-[#1a1a2e] to-[#16213e] px-4 py-2.5 text-xs font-bold text-white shadow-[0_4px_20px_rgba(0,0,0,0.3)]","aria-expanded":r,"aria-haspopup":"listbox","aria-label":`${yi[e]}`,children:[" ",s.jsx("span",{children:yi[e]})," "]}),r&&s.jsx("div",{className:"absolute bottom-[50px] right-0 min-w-[180px] rounded-xl border border-[var(--border)] bg-white p-2 shadow-[0_8px_30px_rgba(0,0,0,0.15)]",role:"listbox","aria-label":"",children:Object.keys(wi).map(a=>s.jsx("button",{role:"option","aria-selected":e===a,onClick:()=>{t(a),n(!1)},className:`block w-full rounded-lg px-3 py-2.5 text-left text-xs ${e===a?"bg-[rgba(0,56,90,0.1)] font-bold text-[var(--primary)]":"text-[var(--text-primary)] hover:bg-[#f6f9ff]"}`,children:wi[a]},a))})]})}function vp({role:e}){const t=sr(e);if(t.canAccessPrivate)return null;t.isGuest;const r=t.isMember;return s.jsxs("div",{className:"fixed inset-x-0 bottom-0 z-50 flex items-center justify-center gap-3 border-t border-[var(--border)] bg-[rgba(255,255,255,0.95)] px-4 py-3 backdrop-blur-[12px]",children:[s.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:r?" ":"  + "}),s.jsx("button",{className:"rounded-full bg-gradient-to-br from-[var(--primary)] to-[#005282] px-5 py-2.5 text-[13px] font-bold text-white",children:r?"":""})]})}function un(){return s.jsxs("div",{className:"flex gap-2.5 rounded-[14px] border border-border-light bg-white p-3 animate-pulse",children:[s.jsx("div",{className:"h-10 w-10 shrink-0 rounded-full bg-gray-200"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-16 rounded bg-gray-200"}),s.jsx("div",{className:"h-3 w-12 rounded bg-gray-200"})]}),s.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),s.jsx("div",{className:"h-12 w-full rounded bg-gray-200"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-3 w-10 rounded bg-gray-200"}),s.jsx("div",{className:"h-3 w-10 rounded bg-gray-200"})]})]})]})}function ji(){return s.jsxs("div",{role:"status","aria-live":"polite","aria-busy":"true","aria-label":"",className:"flex flex-col gap-3",children:[s.jsx("span",{className:"sr-only",children:"..."}),s.jsxs("div",{className:"overflow-hidden rounded-[18px] border border-border-light bg-white/98 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[s.jsx("div",{className:"h-5 w-24 rounded bg-gray-200 animate-pulse"}),s.jsx("div",{className:"h-4 w-16 rounded bg-gray-200 animate-pulse"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"h-24 w-full rounded-[14px] bg-gray-100 animate-pulse"}),s.jsx("div",{className:"h-24 w-full rounded-[14px] bg-gray-100 animate-pulse"})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-[18px] border border-border-light bg-white/98 p-4",children:[s.jsx("div",{className:"mb-3 flex items-center gap-2",children:s.jsx("div",{className:"h-5 w-24 rounded bg-gray-200 animate-pulse"})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(un,{}),s.jsx(un,{}),s.jsx(un,{})]})]})]})}const yp=e=>{const t=[e.message];let r=e.cause;for(;r instanceof Error;)t.push(r.message),r=r.cause;return t.join(" ").toLowerCase()},wp=e=>{const t=yp(e);return t.includes("401")||t.includes("403")||t.includes("unauthorized")?{category:"permission",title:"",message:"",actionText:"",actionHref:"/auth"}:t.includes("404")||t.includes("not found")?{category:"notFound",title:"",message:"",actionText:"",actionHref:"/maihouses/"}:t.includes("network")||t.includes("fetch")||t.includes("timeout")?{category:"network",title:"",message:"",actionText:"",onAction:()=>window.location.reload()}:{category:"runtime",title:"",message:e.message||"",actionText:""}};class jp extends $.Component{constructor(t){super(t),this.resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})},this.copyErrorToClipboard=()=>{if(!this.state.error)return;const{error:r,errorInfo:n,errorId:a}=this.state,i=[`Message: ${r.message}`,`Stack: ${r.stack??"N/A"}`,`Component Stack: ${(n==null?void 0:n.componentStack)??"N/A"}`,`URL: ${typeof window<"u"?window.location.href:"N/A"}`,`Timestamp: ${new Date().toISOString()}`,a?`Error ID: ${a}`:null].filter(Boolean).join(`
`);navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(i).catch(()=>{console.warn("[WallErrorBoundary] Failed to copy error details")})},this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var n,a;this.setState({errorInfo:r}),typeof window<"u"&&fetch("/api/log-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:{message:t.message,stack:t.stack,name:t.name},componentStack:r.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(i=>{console.error("[WallErrorBoundary] Failed to report error",i)}),(a=(n=this.props).onError)==null||a.call(n,t,r)}render(){if(this.state.hasError&&this.state.error){if(this.props.fallback)return this.props.fallback;const t=wp(this.state.error);return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-b from-bg-base to-bg-soft px-4",children:s.jsxs("div",{className:"max-w-md rounded-2xl border border-error-200 bg-white p-8 text-center shadow-xl",children:[s.jsxs("div",{className:"mb-4 text-5xl",children:[t.category==="network"&&"",t.category==="permission"&&"",t.category==="notFound"&&"",t.category==="runtime"&&"",t.category==="unknown"&&""]}),s.jsx("h2",{className:"mb-2 text-xl font-bold text-ink-900",children:t.title}),s.jsx("p",{className:"mb-6 text-sm text-ink-600",children:t.message}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[t.onAction&&s.jsx("button",{onClick:t.onAction??this.resetErrorBoundary,className:"rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand/10",children:t.actionText}),t.actionHref&&s.jsx("a",{href:t.actionHref,className:"inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-600",children:t.actionText}),!t.onAction&&!t.actionHref&&s.jsx("button",{onClick:this.resetErrorBoundary,className:"rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand/10",children:" "})]}),!1]})})}return this.props.children}}const Np="4411c6a",kp="2025-12-07T09:15:28.958Z",_p=(()=>{const e=new Date(kp);return Number.isNaN(e.getTime())?null:e})(),Pl=_p??new Date,Sp=e=>new Intl.DateTimeFormat("zh-TW",{dateStyle:"short",timeStyle:"medium",hour12:!1,timeZone:"Asia/Taipei"}).format(e),Ml=Np;Pl.toISOString();const Rl=Sp(Pl),Cp=`v${Ml}`,Ni=` ${Ml}   ${Rl}`,ki="inline-flex items-center gap-2 rounded-full border border-ink/10 bg-white/90 px-4 py-2 text-[11px] font-medium text-ink-600 shadow-md backdrop-blur";function _i({variant:e="floating",className:t=""}){const r=s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"uppercase tracking-wider text-[10px] text-ink-400",children:""}),s.jsx("span",{className:"font-mono text-sm text-ink-900","aria-label":"build-version",children:Cp}),s.jsx("span",{className:"text-[10px] text-ink-500","aria-label":"build-time",children:Rl})]});return e==="inline"?s.jsx("div",{className:`${ki} ${t}`,title:Ni,children:r}):s.jsx("div",{className:`${ki} pointer-events-auto fixed bottom-5 right-5 z-40 ${t}`,title:Ni,children:r})}function Ep({useMock:e,onToggle:t,disabled:r=!1}){const n=()=>{r||t()};return s.jsx("button",{onClick:n,disabled:r,"aria-disabled":r,title:r?" Mock ":void 0,className:`fixed bottom-5 left-5 z-[1000] flex items-center gap-1.5 rounded-xl bg-gradient-to-br from-[#1a1a2e] to-[#16213e] px-4 py-2.5 text-xs font-bold text-white shadow-[0_4px_20px_rgba(0,0,0,0.3)] ${r?"cursor-not-allowed opacity-60":"hover:brightness-110"}`,"aria-label":e?" API ":" Mock ",children:e?" Mock ":" API "})}const Zn="mock",pa="mh_mock_mode",fa=e=>{if(e==null)return null;const t=e.trim().toLowerCase();return["true","1","yes","on"].includes(t)?!0:["false","0","no","off"].includes(t)?!1:null},Ip=()=>{if(typeof window>"u")return null;const e=new URLSearchParams(window.location.search);return fa(e.get(Zn))},Tp=()=>{if(typeof window>"u"||!window.localStorage)return null;try{return fa(window.localStorage.getItem(pa))}catch{return null}},zp=e=>{if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(pa,String(e))}catch{}},Ap=e=>{if(!(typeof window>"u"))try{const t=new URL(window.location.href);e?t.searchParams.set(Zn,"true"):t.searchParams.delete(Zn),window.history.replaceState(null,"",t.toString())}catch{}},Sr={isMockEnabled(){const e=Ip();if(e!==null)return e;const t=Tp();return t!==null?t:!1},setMock(e,t){return(t==null?void 0:t.persist)!==!1&&zp(e),(t==null?void 0:t.updateUrl)!==!1&&Ap(e),e},subscribe(e){if(typeof window>"u")return()=>{};const t=r=>{if(r.storageArea!==window.localStorage||r.key!==pa)return;const n=fa(r.newValue);n!==null&&e(n)};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)}},Pp={BASE_URL:"/maihouses/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Mp=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],Si="/api/community",Rp=e=>e.replace(/\/+$/,""),Ci=e=>{try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}},$p=()=>{const e="/maihouses/";return e.endsWith("/")?e:`${e}/`},Ei=(e,t)=>{if(typeof document<"u"&&document.body){const r=$p();document.body.innerHTML=`
      <div style="display:flex;align-items:center;justify-content:center;height:100vh;font-family:system-ui,-apple-system,sans-serif;background:#f8fafc;">
        <div style="text-align:center;max-width:400px;padding:2rem;">
          <div style="font-size:3rem;margin-bottom:1rem;"></div>
          <h1 style="font-size:1.25rem;font-weight:600;color:#1e293b;margin-bottom:0.5rem;">${e}</h1>
          <p style="color:#64748b;margin-bottom:1.5rem;">${t}</p>
          <a href="${r}" style="display:inline-block;padding:0.75rem 1.5rem;background:#3b82f6;color:white;border-radius:0.5rem;text-decoration:none;font-weight:500;"></a>
        </div>
      </div>
    `}};function Lp(){const e=Mp.filter(n=>!Pp[n]);if(e.length>0){const n=`${e.join(", ")}`;throw Ei("",""),new Error(n)}const t=void 0;if(!Ci(t)){const n="VITE_SUPABASE_URL  HTTP(S) URL";throw Ei("",""),new Error(n)}const r={VITE_SUPABASE_URL:t,VITE_SUPABASE_ANON_KEY:void 0,VITE_API_BASE_URL:void 0,VITE_APP_URL:void 0};return r.VITE_API_BASE_URL&&!Ci(r.VITE_API_BASE_URL)&&!r.VITE_API_BASE_URL.startsWith("/")&&console.warn("[env] VITE_API_BASE_URL  HTTP(S) URL  / "),r.VITE_API_BASE_URL,r}const Hn=Lp();function Op(e){if(!e.VITE_API_BASE_URL)return console.warn("[env] VITE_API_BASE_URL  /api/community"),Si;const t=e.VITE_API_BASE_URL.trim();return t?`${Rp(t)}/community`:(console.warn("[env] VITE_API_BASE_URL  /api/community"),Si)}const Dp=Op(Hn),le=rd(Hn.VITE_SUPABASE_URL,Hn.VITE_SUPABASE_ANON_KEY,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),Fp=Dp;async function Bp(){const{data:{session:e}}=await le.auth.getSession();return(e==null?void 0:e.access_token)??null}async function rr(e,t={}){var i;const r=await Bp(),n={"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},a=await fetch(`${Fp}${e}`,{...t,headers:n});if(!a.ok){const o=await a.json().catch(()=>({error:""}));let l="";typeof o.error=="string"?l=o.error:(i=o.error)!=null&&i.message?l=o.error.message:o.message?l=o.message:Array.isArray(o.error)&&(l=o.error.map(c=>c.message||c).join(", "));const d=new Error(l||`HTTP ${a.status}`);throw d.status=a.status,d.code=o.code,d}return a.json()}async function Up(e,t={}){const{includePrivate:r=!1}=t;return rr(`/wall?communityId=${e}&type=all&includePrivate=${r?"1":"0"}`)}async function Zp(e,t,r="public"){return rr("/post",{method:"POST",body:JSON.stringify({communityId:e,content:t,visibility:r})})}async function Hp(e){return rr("/like",{method:"POST",body:JSON.stringify({postId:e})})}async function Wp(e,t){return rr("/question",{method:"POST",body:JSON.stringify({communityId:e,question:t})})}async function qp(e,t){return rr("/question",{method:"POST",body:JSON.stringify({action:"answer",questionId:e,content:t})})}const lt={all:["communityWall"],wall:(e,t)=>[...lt.all,"wall",e,t],posts:(e,t)=>[...lt.all,"posts",e,t]};function Vp(e,t={}){const{includePrivate:r=!1,staleTime:n=5*60*1e3,refetchOnWindowFocus:a=!0,enabled:i=!0,currentUserId:o}=t,l=Vr(),[d,c]=h.useState(!1),m=!!o,u=o??"",{data:x,isLoading:p,isFetching:b,error:g,refetch:y}=Go({queryKey:lt.wall(e||"",r),queryFn:()=>Up(e,{includePrivate:r}),enabled:i&&!!e,staleTime:n,refetchOnWindowFocus:a,retry:(w,T)=>{const O=T==null?void 0:T.status;return O&&[400,401,403,404].includes(O)?!1:w<1},retryDelay:1e3}),f=h.useCallback(async()=>{e&&await y()},[e,y]),j=Ds({mutationFn:Hp,onMutate:async w=>{if(!m)return{previousData:void 0};c(!0),await l.cancelQueries({queryKey:lt.wall(e||"",r)});const T=l.getQueryData(lt.wall(e||"",r));if(T){const O=A=>A.map(E=>{if(E.id!==w)return E;const _=E.liked_by.includes(u);return{...E,likes_count:_?Math.max(0,E.likes_count-1):E.likes_count+1,liked_by:_?E.liked_by.filter(L=>L!==u):[...E.liked_by,u]}});l.setQueryData(lt.wall(e||"",r),{...T,posts:{...T.posts,public:O(T.posts.public),private:O(T.posts.private)}})}return{previousData:T}},onError:(w,T,O)=>{O!=null&&O.previousData&&l.setQueryData(lt.wall(e||"",r),O.previousData)},onSettled:()=>{c(!1),l.invalidateQueries({queryKey:lt.wall(e||"",r)})}}),S=Ds({mutationFn:({content:w,visibility:T})=>Zp(e,w,T),onSuccess:()=>{l.invalidateQueries({queryKey:lt.wall(e||"",r)})}}),N=Ds({mutationFn:w=>Wp(e,w),onSuccess:()=>{l.invalidateQueries({queryKey:lt.wall(e||"",r)})}}),I=Ds({mutationFn:({questionId:w,content:T})=>qp(w,T),onSuccess:()=>{l.invalidateQueries({queryKey:lt.wall(e||"",r)})}}),k=h.useCallback(async w=>{await j.mutateAsync(w)},[j]),M=h.useCallback(async(w,T="public")=>{if(!e)throw new Error(" ID");await S.mutateAsync({content:w,visibility:T})},[e,S]),C=h.useCallback(async w=>{if(!e)throw new Error(" ID");await N.mutateAsync(w)},[e,N]),D=h.useCallback(async(w,T)=>{await I.mutateAsync({questionId:w,content:T})},[I]);return{data:x,isLoading:p,isFetching:b,error:g,refresh:f,toggleLike:k,createPost:M,askQuestion:C,answerQuestion:D,isOptimisticUpdating:d}}const Ii=[{id:1,author:"",floor:"12F",type:"resident",time:st(120),title:"",content:" iRobot  5 ",likes:31,comments:14},{id:2,author:"",type:"agent",time:st(1440),title:"  12F",content:" 50 ",views:89,likes:0,comments:5},{id:3,author:"",floor:"8F",type:"resident",time:st(3*24*60),title:" ",content:" B2-128  B1 ",likes:12,comments:8},{id:4,author:"",floor:"5F",type:"resident",time:st(7*24*60),title:"",content:"",likes:25,comments:6},{id:5,author:"",type:"agent",time:st(8*24*60),title:"  8F",content:"",views:156,likes:0,comments:12}],Ti=[{id:101,author:"",type:"official",time:st(3*24*60),title:" ",content:"12/15 10:00 ",pinned:!0,likes:0,comments:0},{id:102,author:"15F ",floor:"15F",type:"resident",time:st(8*24*60),title:"",content:" 2,800  3,200...",likes:0,comments:28,private:!0},{id:103,author:"3F ",floor:"3F",type:"resident",time:st(14*24*60),title:"",content:"",likes:0,comments:15,private:!0}],zi=[{id:1,author:"",company:"21",visits:12,deals:3,pros:["",""],cons:""},{id:2,author:"",company:"",visits:8,deals:2,pros:["",""],cons:""},{id:3,author:"",company:"",visits:6,deals:1,pros:["",""],cons:""},{id:4,author:"",company:"",visits:10,deals:2,pros:["5",""],cons:""},{id:5,author:"",company:"",visits:5,deals:1,pros:["",""],cons:""}],Ai=[{id:1,question:"",time:st(2*24*60),answersCount:2,answers:[{author:"12F ",type:"resident",content:"B2 B1 "},{author:"",type:"agent",content:" 1:1.2",expert:!0}]},{id:2,question:"",time:st(5*24*60),answersCount:2,answers:[{author:"3F ",type:"resident",content:""},{author:"10F ",type:"resident",content:""}]},{id:3,question:"",time:st(7*24*60),answersCount:1,answers:[{author:"",type:"official",content:" 85  24 "}]},{id:4,question:"",time:st(3*24*60),answersCount:0,answers:[]}],Qp={communityInfo:{name:"",year:2018,units:280,managementFee:85,builder:"",members:88,avgRating:4.2,monthlyInteractions:156,forSale:23},posts:{public:Ii,private:Ti,publicTotal:Ii.length,privateTotal:Ti.length},reviews:{items:zi,total:zi.length},questions:{items:Ai,total:Ai.length}},Gp=(e,t)=>({id:Date.now(),author:"",type:"resident",time:new Date().toISOString(),title:e.substring(0,20)+(e.length>20?"...":""),content:e,likes:0,comments:0,pinned:!1,private:t==="private"}),Kp=e=>({id:Date.now(),question:e,time:new Date().toISOString(),answersCount:0,answers:[]}),Yp=e=>({author:"",type:"resident",content:e,expert:!1}),Jp=["","","N/A","","-"],Xp={resident:"",member:"",agent:"",official:""};function ef(e){return e==="agent"?"agent":e==="official"?"official":e==="member"?"member":"resident"}function tf(e){return e?e.length>=6?e.slice(0,6):e:""}function sf(e,t){const r=Xp[e],n=tf(t);return n?`${r}-${n}`:r}function xa(e,t){var o,l;const r=ef(t==null?void 0:t.role),n=sf(r,e),a=((o=t==null?void 0:t.name)==null?void 0:o.trim())||n,i=(l=t==null?void 0:t.floor)==null?void 0:l.trim();return{name:a,role:r,...i?{floor:i}:{}}}function Rr(e){return e.map((t,r)=>({post:t,index:r})).sort((t,r)=>{const n=(r.post.pinned?1:0)-(t.post.pinned?1:0);return n!==0?n:t.index-r.index}).map(({post:t})=>t)}function $l(e){const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date().getTime()-t.getTime(),a=Math.floor(n/6e4),i=Math.floor(a/60),o=Math.floor(i/24),l=Math.floor(o/7);return n<0?t.toLocaleDateString("zh-TW"):a<1?"":a<60?`${a}`:i<24?`${i}`:o<7?`${o}`:l<4?`${l}`:t.toLocaleDateString("zh-TW")}function Pi(e){const t=xa(e.author_id,e.author);return{id:e.id,author:t.name,...t.floor?{floor:t.floor}:{},type:t.role,time:$l(e.created_at),title:e.content.substring(0,20)+(e.content.length>20?"...":""),content:e.content,likes:e.likes_count,comments:e.comments_count??0,pinned:e.is_pinned??!1,private:e.visibility==="private",liked_by:e.liked_by}}function rf(e){var i,o,l,d,c;const t=e.agent,r=((i=t==null?void 0:t.company)==null?void 0:i.trim())??"",n=xa(e.author_id,{name:(t==null?void 0:t.name)??null,role:"agent"}),a=Jp.includes(r)?"":r;return{id:e.id,author:n.name,company:a,visits:((o=t==null?void 0:t.stats)==null?void 0:o.visits)??0,deals:((l=t==null?void 0:t.stats)==null?void 0:l.deals)??0,pros:((d=e.content)==null?void 0:d.pros)??[],cons:((c=e.content)==null?void 0:c.cons)??""}}function nf(e){const t=e.answers??[];return{id:e.id,question:e.question,time:$l(e.created_at),answersCount:t.length,answers:t.map(r=>{const n=xa(r.author_id,r.author);return{author:n.name,type:n.role,content:r.content,expert:r.is_expert}}),hasMoreAnswers:e.hasMoreAnswers??!1,totalAnswers:e.totalAnswers??e.answers_count??t.length}}function af(e){var m,u,x,p,b,g,y,f;const t=((m=e.posts)==null?void 0:m.public)??[],r=((u=e.posts)==null?void 0:u.private)??[],n=((x=e.reviews)==null?void 0:x.items)??[],a=((p=e.questions)==null?void 0:p.items)??[],i=t.map(Pi),o=r.map(Pi),l=Rr(i),d=Rr(o);return{communityInfo:e.communityInfo?{name:e.communityInfo.name??"",year:e.communityInfo.year??null,units:e.communityInfo.units??null,managementFee:e.communityInfo.managementFee??null,builder:e.communityInfo.builder??null,members:e.communityInfo.members??null,avgRating:e.communityInfo.avgRating??null,monthlyInteractions:e.communityInfo.monthlyInteractions??null,forSale:e.communityInfo.forSale??null}:{name:"",year:null,units:null,managementFee:null,builder:null,members:null,avgRating:null,monthlyInteractions:null,forSale:null},posts:{public:l,private:d,publicTotal:((b=e.posts)==null?void 0:b.publicTotal)??0,privateTotal:((g=e.posts)==null?void 0:g.privateTotal)??0},reviews:{items:n.map(rf),total:((y=e.reviews)==null?void 0:y.total)??0},questions:{items:a.map(nf),total:((f=e.questions)==null?void 0:f.total)??0}}}const Ll="community-wall-mock-data-v1",of=250,Mi={communityInfo:{name:"...",year:null,units:null,managementFee:null,builder:null,members:null,avgRating:null,monthlyInteractions:null,forSale:null},posts:{public:[],private:[],publicTotal:0,privateTotal:0},reviews:{items:[],total:0},questions:{items:[],total:0}},lf=e=>new Promise(t=>setTimeout(t,e)),Ol=()=>{try{return typeof window<"u"&&typeof window.localStorage<"u"}catch{return!1}},cf=(e,t)=>{var r,n,a,i;return t?{...e,...t,communityInfo:{...e.communityInfo,...t.communityInfo??{}},posts:{public:((r=t.posts)==null?void 0:r.public)??e.posts.public,private:((n=t.posts)==null?void 0:n.private)??e.posts.private,publicTotal:((a=t.posts)==null?void 0:a.publicTotal)??e.posts.publicTotal,privateTotal:((i=t.posts)==null?void 0:i.privateTotal)??e.posts.privateTotal},reviews:t.reviews??e.reviews,questions:t.questions??e.questions}:e},Ri=e=>{if(!Ol())return e;try{const t=window.localStorage.getItem(Ll);if(!t)return e;const r=JSON.parse(t);return cf(e,r)}catch(t){return console.error("Failed to load community wall mock state",t),e}},df=e=>{if(Ol())try{window.localStorage.setItem(Ll,JSON.stringify(e))}catch(t){console.error("Failed to persist community wall mock state",t)}},uf=["guest","member","resident","agent"],mf=(e,t)=>typeof e=="string"&&uf.includes(e)?e:t?"member":"guest";function hf(e,t={}){const{includePrivate:r=!1,initialMockData:n=Qp,persistMockState:a=!0}=t,[i,o]=h.useState(()=>Sr.isMockEnabled());h.useEffect(()=>Sr.subscribe(o),[]);const[l,d]=h.useState(void 0);h.useEffect(()=>{let z=!0;(async()=>{try{const{data:{user:Z}}=await le.auth.getUser();z&&(Z!=null&&Z.id)&&d(Z.id)}catch{}})();const{data:{subscription:H}}=le.auth.onAuthStateChange((Z,ce)=>{var G;z&&d((G=ce==null?void 0:ce.user)==null?void 0:G.id)});return()=>{z=!1,H.unsubscribe()}},[]);const[c,m]=h.useState(()=>a?Ri(n):n),u=h.useRef(!1),[x,p]=h.useState(()=>new Set),b=!!l,g=h.useRef(null);h.useEffect(()=>{g.current=null},[e]),h.useEffect(()=>{i||p(new Set)},[i]),h.useEffect(()=>{if(!(!a||!i)){if(!u.current){u.current=!0;return}m(Ri(n))}},[i,a,n]),h.useEffect(()=>{!a||!i||df(c)},[c,a,i]);const{data:y,isLoading:f,error:j,refresh:S,toggleLike:N,createPost:I,askQuestion:k,answerQuestion:M}=Vp(e,{enabled:!i,includePrivate:r,currentUserId:l}),C=h.useMemo(()=>{var z;if(i)return{...c,posts:{...c.posts,public:Rr(c.posts.public),private:Rr(c.posts.private)}};if(y){const W=af(y),H=(z=W.communityInfo)!=null&&z.name?W.communityInfo:{...Mi.communityInfo,name:""},Z={...W,communityInfo:H};return g.current=Z,Z}return g.current??Mi},[i,y,c]),D=h.useCallback(async()=>{if(i){m(z=>({...z}));return}await S()},[i,S]),w=h.useMemo(()=>i?b?"member":"guest":mf(y==null?void 0:y.viewerRole,b),[i,y==null?void 0:y.viewerRole,b]),T=w!=="guest",O=h.useCallback(()=>{if(l)return l;const z="mock_user_id";let W=localStorage.getItem(z);return W||(W=`mock-user-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,localStorage.setItem(z,W)),W},[l]),A=h.useCallback(async z=>{if(i){await lf(of);const W=O(),H=x.has(z);m(Z=>{const ce=G=>G.map(X=>{if(X.id!==z)return X;const re=X.likes??0,xe=X.liked_by??[];return{...X,likes:H?Math.max(0,re-1):re+1,liked_by:H?xe.filter(ne=>ne!==W):[...xe,W]}});return{...Z,posts:{...Z.posts,public:ce(Z.posts.public),private:ce(Z.posts.private)}}}),p(Z=>{const ce=new Set(Z);return ce.has(z)?ce.delete(z):ce.add(z),ce});return}await N(String(z))},[i,N,x,O]),E=h.useCallback(async(z,W="public")=>{if(i){const H=Gp(z,W);m(Z=>{const ce=W==="private"?"private":"public",G=W==="private"?"privateTotal":"publicTotal";return{...Z,posts:{...Z.posts,[ce]:[H,...Z.posts[ce]],[G]:Z.posts[G]+1}}});return}await I(z,W)},[i,I]),_=h.useCallback(async z=>{if(i){const W=Kp(z);m(H=>({...H,questions:{...H.questions,items:[W,...H.questions.items],total:H.questions.total+1}}));return}await k(z)},[i,k]),L=h.useCallback(async(z,W)=>{if(i){m(H=>({...H,questions:{...H.questions,items:H.questions.items.map(Z=>{if(Z.id.toString()!==z)return Z;const ce=Yp(W);return{...Z,answers:[...Z.answers,ce],answersCount:Z.answersCount+1}})}}));return}await M(z,W)},[i,M]),U=h.useCallback(z=>{const W=Sr.setMock(z);o(W)},[]);return{data:C,useMock:i,setUseMock:U,isLoading:!i&&f,error:i?null:j,refresh:D,toggleLike:A,createPost:E,askQuestion:_,answerQuestion:L,viewerRole:w,isAuthenticated:T}}const pf=e=>{var r,n;if(!e)return"guest";const t=((r=e.app_metadata)==null?void 0:r.role)??((n=e.user_metadata)==null?void 0:n.role);return t==="resident"||t==="agent"||t==="member"?t:"member"};function Dl(){const[e,t]=h.useState({session:null,user:null,role:"guest",isAuthenticated:!1,loading:!0,error:null});return h.useEffect(()=>{let n=!0;const a=(l,d=null)=>{if(!n)return;const c=(l==null?void 0:l.user)??null,m=pf(c);t({session:l,user:c,role:m,isAuthenticated:!!l,loading:!1,error:d})};(async()=>{try{const{data:l,error:d}=await le.auth.getSession();if(d){a(null,d);return}a(l.session,null)}catch(l){a(null,l instanceof Error?l:new Error("Failed to fetch session"))}})();const{data:{subscription:o}}=le.auth.onAuthStateChange((l,d)=>{a(d,null)});return()=>{n=!1,o.unsubscribe()}},[]),{...e,signOut:async()=>{const{error:n}=await le.auth.signOut();if(n)throw n}}}const ff="".trim().toLowerCase(),xf=ff!=="false";function gf(){const e=Br(),[t,r]=Ur(),n=Xn(),a=e.id,i=h.useRef(t);if(h.useEffect(()=>{i.current=t},[t]),!a)return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:s.jsxs("div",{className:"rounded-2xl border border-brand/10 bg-white px-8 py-10 text-center shadow-[0_10px_30px_rgba(0,34,73,0.08)]",children:[s.jsx("div",{className:"mb-3 text-4xl",children:""}),s.jsx("p",{className:"mb-4 text-base font-semibold text-ink-900",children:""}),s.jsx("p",{className:"mb-6 text-sm text-ink-600",children:""}),s.jsx("a",{href:"/maihouses/",className:"inline-flex items-center justify-center rounded-full bg-brand px-5 py-2.5 text-sm font-bold text-white shadow hover:bg-brand-600",children:""})]})});const o=h.useMemo(()=>"guest",[]),[l,d]=h.useState(o),[c,m]=h.useState("public"),[u,x]=h.useState(!1),{isAuthenticated:p,role:b,loading:g,error:y}=Dl();if(g)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(fr,{communityName:"..."}),s.jsx("div",{className:"mx-auto max-w-[960px] p-2.5",children:s.jsx(ji,{})})]});if(h.useEffect(()=>{y&&J.error("",y.message)},[y]),y)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(fr,{communityName:""}),s.jsx("div",{className:"mx-auto max-w-[960px] p-4",children:s.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-center shadow-sm",children:[s.jsx("p",{className:"text-lg font-semibold text-red-700",children:""}),s.jsx("p",{className:"mt-2 text-sm text-red-600",children:y.message}),s.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"mt-4 inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-bold text-white hover:bg-brand-700",children:""})]})})]});const f=h.useMemo(()=>p?b:"guest",[b,p,l]),j=sr(f),S=xf,{data:N,useMock:I,setUseMock:k,isLoading:M,error:C,refresh:D,toggleLike:w,createPost:T,askQuestion:O,answerQuestion:A,viewerRole:E}=hf(a,{includePrivate:j.canAccessPrivate}),_=S||I,L=I,U=!_&&!I;h.useEffect(()=>{I||E&&E!==l&&d(E)},[E,l,I]);const z=h.useCallback(()=>{const ae=Sr.setMock(!0);k(ae)},[k]),W=h.useCallback(ae=>{L&&d(ae)},[L,r]);h.useEffect(()=>{},[l,t,d]),h.useEffect(()=>{if(typeof window>"u")return;const ae=de=>{de.storageArea!==window.localStorage||de.newValue};return window.addEventListener("storage",ae),()=>window.removeEventListener("storage",ae)},[l,d]);const H=h.useCallback(()=>{n("/auth")},[n]),Z=h.useCallback(ae=>{ae==="private"&&!j.canAccessPrivate||m(ae)},[j.canAccessPrivate]);h.useEffect(()=>{c==="private"&&!j.canAccessPrivate&&m("public")},[c,j.canAccessPrivate]);const ce=h.useCallback(async ae=>{if(!p){J.error("","");return}try{await w(ae)}catch(de){console.error("Failed to toggle like",de),J.error("","")}},[w,p]),G=h.useCallback(async(ae,de="public")=>{try{await T(ae,de)}catch(Nt){console.error("Failed to create post",Nt),J.error("","")}},[T]),X=h.useCallback(async ae=>{try{await O(ae)}catch(de){throw console.error("Failed to submit question",de),J.error("",""),de}},[O]),re=h.useCallback(async(ae,de)=>{try{await A(ae,de)}catch(Nt){throw console.error("Failed to submit answer",Nt),J.error("",""),Nt}},[A]),xe=h.useCallback(async()=>{if(!u){x(!0);try{await D()}catch(ae){console.error("Failed to refresh community wall",ae)}finally{x(!1)}}},[u,D]);if(M)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(fr,{communityName:"..."}),s.jsx("div",{className:"mx-auto max-w-[960px] p-2.5",children:s.jsx(ji,{})})]});if(C){const ae=C.message||"",de=ae.includes("401")||ae.includes("403")||ae.includes("");return s.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-b from-bg-base to-bg-soft",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-2 text-2xl",children:de?"":""}),s.jsx("div",{className:"mb-2 text-sm text-ink-600",children:de?"":""}),de?s.jsx("button",{onClick:()=>window.location.href="/auth",className:"rounded-lg bg-brand px-4 py-2 text-sm text-white",children:""}):s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[s.jsx("button",{onClick:xe,disabled:u,"aria-busy":u,className:`rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold transition hover:bg-brand/10 ${u?"cursor-not-allowed text-brand/60":"text-brand"}`,children:u?" ":" "}),s.jsx("button",{onClick:z,className:"rounded-lg bg-[#1a1a2e] px-4 py-2 text-sm font-semibold text-white shadow hover:brightness-110",children:" "})]})]}),s.jsx(_i,{})]})}const{communityInfo:ne,posts:oe,reviews:$e,questions:ze}=N;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(fr,{communityName:ne.name}),s.jsxs("div",{className:"mx-auto flex max-w-[960px] gap-5 p-2.5 pb-[calc(80px+env(safe-area-inset-bottom,20px))] lg:p-2.5",children:[s.jsxs("main",{className:"flex max-w-[600px] flex-1 animate-[fadeInUp_0.5s_ease-out] flex-col gap-3",children:[s.jsx(mp,{role:l,reviews:$e,onUnlock:H}),s.jsx(fp,{role:f,isAuthenticated:p,currentTab:c,onTabChange:Z,publicPosts:oe.public,privatePosts:oe.private,onLike:ce,onCreatePost:G,onUnlock:H}),s.jsx(xp,{role:l,questions:ze,onAskQuestion:X,onAnswerQuestion:re,onUnlock:H})]}),s.jsx(gp,{info:ne,questions:ze,posts:oe.public})]}),s.jsx(vp,{role:l}),(S||I)&&s.jsx(Ep,{useMock:I,onToggle:()=>k(!I),disabled:U}),I&&s.jsx(bp,{role:l,onRoleChange:W}),s.jsx(_i,{}),s.jsx("style",{children:`
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes wave {
          0%, 100% { transform: rotate(0deg); }
          20% { transform: rotate(-25deg); }
          40% { transform: rotate(10deg); }
          60% { transform: rotate(-20deg); }
          80% { transform: rotate(5deg); }
        }
      `})]})}function bf(){return s.jsx(jp,{children:s.jsx(gf,{})})}function vf(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""})]})}function yf(e,t,r){const n=t/12/100,a=r*12;return n===0?e/a:e*n/(1-Math.pow(1+n,-a))}const wf=()=>{const[e,t]=h.useState(1500),[r,n]=h.useState(30),[a,i]=h.useState(2.25),[o,l]=h.useState(20),[d,c]=h.useState(""),m=h.useMemo(()=>Math.max(0,e*(1-r/100)),[e,r]),u=h.useMemo(()=>Math.round(yf(m*1e4,a,o)),[m,a,o]),x=3e3,p=h.useMemo(()=>typeof d!="number"||d<=0?null:Math.round((u+x)/d*100),[d,u]),b=()=>{const y=`
${e}${r}%  ${m.toFixed(0)}${o}${a}%   ${u}  ${x} `+(p!==null?`
 ${p}%`:"");navigator.clipboard.writeText(y).then(()=>We(qe.BudgetCopy,{}))},g=p===null?"":p>=50?"":p>=35?"/":"";return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Lite"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8},children:[s.jsxs("label",{children:["()",s.jsx("input",{type:"number",value:e,onChange:y=>t(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["(%)",s.jsx("input",{type:"number",value:r,onChange:y=>n(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["(%)",s.jsx("input",{type:"number",value:a,onChange:y=>i(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["",s.jsx("input",{type:"number",value:o,onChange:y=>l(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["()",s.jsx("input",{type:"number",value:typeof d=="number"?d:"",onChange:y=>{const f=Number(y.target.value);c(Number.isFinite(f)?f:"")},style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]})]}),s.jsxs("div",{style:{marginTop:10,fontSize:14,color:"#0a2246"},children:[" ",s.jsx("b",{children:u.toLocaleString()}),"  ",s.jsx("b",{children:m.toFixed(0)})," ",p!==null&&s.jsxs(s.Fragment,{children:[" ",s.jsxs("b",{children:[p,"%"]}),""]})]}),s.jsx("div",{style:{marginTop:8,color:"#6b7280"},children:g}),s.jsx("button",{onClick:b,style:{marginTop:8,padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:""})]})},jf=({onAdopt:e})=>{const[t,r]=h.useState(""),[n,a]=h.useState("agent"),[i,o]=h.useState("detail"),[l,d]=h.useState(null),[c,m]=h.useState(null),[u,x]=h.useState(!1),[p,b]=h.useState(!1),g=async()=>{const f=t.trim();if(f){x(!0);try{const S=(await Um(f,{audience:n,intent:i})).split(/\n+/).map(k=>k.trim()).filter(Boolean),N=S.find(k=>/^V1/.test(k))||"",I=S.find(k=>/^V2/.test(k))||"";d(N.replace(/^V1[:]\s?/,"")),m(I.replace(/^V2[:]\s?/,"")),We(qe.RewriteGen,{audience:n,intent:i})}finally{x(!1)}}},y=f=>{e==null||e(f),b(!0),We(qe.RewriteAdopt,{audience:n,intent:i}),setTimeout(()=>b(!1),2500)};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:""}),s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[s.jsxs("label",{children:["",s.jsxs("select",{value:n,onChange:f=>a(f.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[s.jsx("option",{value:"agent",children:""}),s.jsx("option",{value:"owner",children:""})]})]}),s.jsxs("label",{children:["",s.jsxs("select",{value:i,onChange:f=>o(f.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[s.jsx("option",{value:"detail",children:""}),s.jsx("option",{value:"view",children:""}),s.jsx("option",{value:"pet",children:""}),s.jsx("option",{value:"price",children:"/"})]})]})]}),s.jsx("textarea",{rows:3,placeholder:"/",value:t,onChange:f=>r(f.target.value),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:s.jsx("button",{onClick:g,disabled:u,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:u?"":""})}),(l||c)&&s.jsxs("div",{style:{marginTop:10,display:"grid",gap:8},children:[l&&s.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:""}),s.jsx("div",{style:{marginBottom:6},children:l}),s.jsx("button",{onClick:()=>y(l),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"/"})]}),c&&s.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:""}),s.jsx("div",{style:{marginBottom:6},children:c}),s.jsx("button",{onClick:()=>y(c),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"/"})]}),p&&s.jsx("div",{style:{color:"#16a34a"},children:" "})]})]})},Fl="mai-notes-v1";function Nf(){try{const e=localStorage.getItem(Fl);return e?JSON.parse(e):[]}catch{return[]}}function kf(e){localStorage.setItem(Fl,JSON.stringify(e))}function Wn(e,t){const r=Nf(),n={id:Math.random().toString(36).slice(2),createdAt:Date.now(),note:e,...t&&{echo:t}};return r.unshift(n),kf(r),n}const _f=()=>{const[e,t]=h.useState(""),[r,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(!1),d=async()=>{const c=e.trim();if(c){i(!0);try{const m=await Zm(c);n(m),Wn(c,m),We(qe.NoteSaved,{})}catch{Wn(c)}finally{i(!1)}}};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:""}),s.jsx("textarea",{rows:3,placeholder:"",value:e,onChange:c=>t(c.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),o&&s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:4},children:""}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{onClick:d,disabled:a,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:a?"":""}),r&&s.jsxs("span",{style:{color:"#6b7280"},children:["AI ",r]})]})]})};function Sf(e){const t=e.split(`
`).find(n=>n.trim().startsWith("#tags"));return t?t.replace(/^#tags\s*[:]\s*/i,"").split(",").map(n=>n.trim()).filter(Boolean).slice(0,5):[]}const Cf=()=>{const[e,t]=h.useState(""),[r,n]=h.useState(""),[a,i]=h.useState(""),[o,l]=h.useState(null),[d,c]=h.useState(!1),m=async()=>{c(!0);try{const x=await Wm(e,r,a);l(x);const p=Sf(x);p.length&&Tu(p),We(qe.DebriefGen,{tags:p})}finally{c(!1)}},u=()=>{const x=`
${e}
${r}
${a}
---
${o??""}`;Wn(x),We(qe.DebriefSave,{})};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Mini Debrief"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("input",{value:e,onChange:x=>t(x.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("input",{value:r,onChange:x=>n(x.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("input",{value:a,onChange:x=>i(x.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{onClick:m,disabled:d,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:d?"":" Must/Nice/Avoid + #tags"}),o&&s.jsx("button",{onClick:u,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:""})]}),o&&s.jsx("div",{style:{marginTop:10,whiteSpace:"pre-wrap",color:"#0a2246"},children:o})]})},Ef=["","","","","",""],$i=({text:e})=>{const[t,r]=h.useState(!1),[n,a]=h.useState(""),[i,o]=h.useState(!1),l=async()=>{if(!n){o(!0);try{const c=await Hm(e);a(c),We(qe.ELI5Open,{term:e})}finally{o(!1)}}};h.useEffect(()=>{const m=`mai-eli5-suggest-${new Date().toISOString().slice(0,10)}`;Ef.some(x=>e.includes(x))&&!localStorage.getItem(m)&&(localStorage.setItem(m,"1"),r(!0),l())},[]);const d=async()=>{const c=!t;r(c),c&&await l()};return s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",position:"relative"},children:[s.jsx("button",{"aria-label":"",onClick:d,style:{marginLeft:6,width:18,height:18,borderRadius:999,border:"1px solid #C9D5FF",background:"#F5F8FF",color:"#1749D7",fontSize:12,cursor:"pointer"},children:"?"}),t&&s.jsxs("div",{style:{position:"absolute",top:"120%",left:0,background:"#fff",border:"1px solid #E6ECFF",borderRadius:8,padding:10,width:280,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",zIndex:50},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:6},children:""}),s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:i?"":n})]})]})};function If(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container space-y-6 rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(wf,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(jf,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(_f,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Cf,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",s.jsx($i,{text:""})," ",s.jsx($i,{text:""})," "]})]})]})}const Tf={5:30*1e3},qn=e=>({id:e,currentStep:1,isPaid:!1,steps:{1:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},2:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,data:{risks:{water:!1,wall:!1,structure:!1,other:!1}}},3:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},4:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},5:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,paymentStatus:"pending",paymentDeadline:null,data:{}},6:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,checklist:[],data:{}}},supplements:[]}),Li=e=>{if(typeof window>"u")return qn(e);const t=sessionStorage.getItem(`mock_tx_${e}`);return t?JSON.parse(t):qn(e)},Oi=e=>{typeof window<"u"&&sessionStorage.setItem(`mock_tx_${e.id}`,JSON.stringify(e))},gr={fetchData:async e=>Li(e),dispatch:async(e,t,r,n)=>{var l,d,c;await new Promise(m=>setTimeout(m,600));const a=Li(t),i=JSON.parse(JSON.stringify(a)),o=parseInt(n.step||i.currentStep);try{switch(e){case"submit":if(r!=="agent")throw new Error("");i.steps[o]&&(i.steps[o].data={...i.steps[o].data,...n.data},i.steps[o].agentStatus="submitted");break;case"confirm":if(r!=="buyer")throw new Error("");if(i.steps[o]&&(i.steps[o].buyerStatus="confirmed",n.note&&(i.steps[o].data={...i.steps[o].data,buyerNote:n.note})),o===5)i.steps[5]&&(i.steps[5].paymentStatus="initiated",i.steps[5].paymentDeadline=Date.now()+(Tf[5]||3e4));else if(o===6){if(!((d=(l=i.steps[6])==null?void 0:l.checklist)==null?void 0:d.every(p=>p.checked)))throw new Error("");i.steps[6]&&(i.steps[6].locked=!0)}else i.steps[o]&&(i.steps[o].locked=!0),i.currentStep+=1;break;case"payment":if(r!=="agent")throw new Error("");if(((c=i.steps[5])==null?void 0:c.paymentStatus)!=="initiated")throw new Error("");i.isPaid=!0,i.steps[5]&&(i.steps[5].paymentStatus="completed",i.steps[5].locked=!0),i.currentStep=6,i.steps[6]&&(i.steps[6].checklist=[{id:"utilities",label:" ",checked:!1},{id:"security",label:" ",checked:!1},{id:"keys",label:" ",checked:!1},{id:"condition",label:"  (/)",checked:!1}]);break;case"checklist":const m=i.steps[6];if(m&&m.checklist){const x=m.checklist.find(p=>p.id===n.itemId);x&&(x.checked=n.checked)}break;case"supplement":i.supplements.push({role:r,content:n.content,timestamp:Date.now()});break;case"reset":const u=qn(t);return Oi(u),{success:!0,tx:u}}return Oi(i),{success:!0,tx:i}}catch(m){return{success:!1,error:m.message}}}},mn={fetchData:async(e,t)=>{try{const r=await fetch(`/api/trust/status?id=${e}`);if(r.ok)return await r.json();if(r.status===401||r.status===403)throw new Error("UNAUTHORIZED");return null}catch(r){if(r.message==="UNAUTHORIZED")throw r;return console.error(r),null}},dispatch:async(e,t,r,n)=>{try{const a=await fetch(`/api/trust/${e}?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.status===401||a.status===403)return{success:!1,error:"UNAUTHORIZED"};const i=await a.json();return i.error?{success:!1,error:i.error}:{success:!0,tx:i.state||i}}catch(a){return{success:!1,error:a.message}}}};function zf(){const[e,t]=h.useState(!1),[r,n]=h.useState(""),[a,i]=h.useState("agent"),[o,l]=h.useState(null),[d,c]=h.useState(!0),[m,u]=h.useState(!1),[x,p]=h.useState("--:--:--"),[b,g]=h.useState(!1);h.useEffect(()=>{if(typeof window>"u")return;(async()=>{const N=window.location.hash;if(N.includes("token=")){const I=N.split("token=")[1];window.history.replaceState(null,"",window.location.pathname);try{await fetch("/api/trust/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:I})})}catch(k){console.error("Session exchange failed",k),J.error("")}}try{const I=await fetch("/api/trust/me");if(I.ok){const k=await I.json();i(k.role),n(k.caseId),t(!1),g(!1),await f(k.caseId)}else c(!1)}catch(I){console.error(I),c(!1)}})()},[]);const y=h.useCallback(async()=>{t(!0),g(!1);const S="MOCK-DEMO-01";n(S),i("agent");const N=await gr.fetchData(S);l(N),J.success(" ()")},[]),f=h.useCallback(async S=>{const N=S||r;if(N&&!(b&&!e)){c(!0);try{let I;e?I=await gr.fetchData(N):I=await mn.fetchData(N,""),I&&(l(I),g(!1))}catch(I){console.error(I),I.message==="UNAUTHORIZED"&&(g(!0),J.error(""))}finally{c(!1)}}},[e,r,b]);h.useEffect(()=>{if(!e&&r&&!b){const S=setInterval(()=>f(),5e3);return()=>clearInterval(S)}},[r,e,f,b]),h.useEffect(()=>{const S=setInterval(()=>{var N,I;if(((I=(N=o==null?void 0:o.steps)==null?void 0:N[5])==null?void 0:I.paymentStatus)==="initiated"&&o.steps[5].paymentDeadline){const k=o.steps[5].paymentDeadline-Date.now();if(k<=0)p(""),e||f();else{const M=Math.floor(k/36e5),C=Math.floor(k%36e5/6e4),D=Math.floor(k%6e4/1e3);p(`${M}:${C.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`)}}},1e3);return()=>clearInterval(S)},[o,e,f]);const j=h.useCallback(async(S,N={})=>{if(!m){u(!0);try{const I=e?gr:mn;let k;return e?k=await gr.dispatch(S,r,a,N):k=await mn.dispatch(S,r,"",N),k.success?(k.tx&&l(k.tx),await f(),J.success(""),!0):(k.error==="UNAUTHORIZED"?(g(!0),J.error("")):J.error(k.error||""),!1)}catch(I){return console.error(I),J.error(""),!1}finally{u(!1)}}},[e,r,a,f,m]);return{isMock:e,caseId:r,setCaseId:n,role:a,setRole:i,setToken:()=>{},token:"",tx:o,setTx:l,loading:d,isBusy:m,timeLeft:x,startMockMode:y,dispatchAction:j,fetchData:f}}function Di(){So();const{isMock:e,caseId:t,role:r,setRole:n,tx:a,loading:i,isBusy:o,timeLeft:l,startMockMode:d,dispatchAction:c}=zf(),[m,u]=h.useState(""),[x,p]=h.useState("");typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"));const b=async(M,C={})=>{await c(M,C)&&(u(""),p(""))},g=M=>b("submit",{step:M,data:{note:m}}),y=M=>b("confirm",{step:M,note:m}),f=()=>{confirm("")&&b("payment")},j=(M,C)=>{r==="buyer"&&b("checklist",{itemId:M,checked:C})},S=()=>b("supplement",{content:x}),N=()=>{confirm("")&&b("reset")},I=()=>{n(r==="agent"?"buyer":"agent")};if(!a&&!i)return s.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-4 font-sans",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-sm w-full text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(bn,{size:32})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:" Trust Room"}),s.jsx("p",{className:"text-sm text-gray-500 mb-6",children:" (Token)"}),s.jsxs("button",{onClick:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition shadow-lg flex items-center justify-center gap-2",children:[s.jsx(bn,{size:18})," (Demo Mode)"]}),s.jsx("p",{className:"text-xs text-gray-400 mt-4",children:""})]})});if(!a)return s.jsx("div",{className:"p-8 text-center",children:"..."});const k=M=>{switch(M){case"1":return s.jsx(Dt,{size:14});case"2":return s.jsx(Hc,{size:14});case"3":return s.jsx(Co,{size:14});case"4":return s.jsx(Eo,{size:14});case"5":return s.jsx(Zc,{size:14});case"6":return s.jsx(He,{size:14});default:return s.jsx(Uc,{size:14})}};return s.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-white shadow-2xl relative pb-24 font-sans text-gray-800",children:[s.jsxs("header",{className:`${e?"bg-indigo-900":"bg-slate-900"} text-white p-4 sticky top-0 z-50 flex justify-between items-center shadow-lg transition-colors`,children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"font-bold text-lg tracking-wide flex items-center gap-2",children:["MaiHouses ",s.jsx("span",{className:`text-xs px-1 rounded ${e?"bg-yellow-500 text-black":"bg-blue-600"}`,children:e?"DEMO":"V10"})]}),s.jsxs("div",{className:"flex items-center text-[10px] text-gray-400 gap-2",children:[s.jsxs("span",{children:[": ",t]}),i&&s.jsx("span",{className:"animate-pulse",children:""})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:N,className:"bg-white/10 hover:bg-white/20 w-8 h-8 rounded flex items-center justify-center transition",children:s.jsx(Dc,{size:14})}),s.jsxs("button",{onClick:I,className:`px-3 py-1 rounded-md text-xs font-bold border border-white/20 flex items-center gap-1 transition ${r==="agent"?"bg-blue-600":"bg-green-600"}`,children:[r==="agent"?s.jsx(Fc,{size:12}):s.jsx(Bc,{size:12}),r==="agent"?"":""]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-b sticky top-[60px] z-40",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[" ",a.currentStep,"/6"]}),a.isPaid&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full font-bold",children:""})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-700",style:{width:`${a.currentStep/6*100}%`}})})]}),s.jsxs("div",{className:"p-4 space-y-0",children:[Object.entries(a.steps).map(([M,C])=>{var E;const D=parseInt(M),w=D===a.currentStep,T=D<a.currentStep,O=D>a.currentStep;let A="bg-gray-300 border-gray-300";return T||C.locked?A="bg-green-500 border-green-500":w&&(A="bg-blue-600 border-blue-600"),s.jsxs("div",{className:`relative pl-14 py-3 ${O?"opacity-50 grayscale":""}`,children:[s.jsx("div",{className:`absolute left-0 top-3 z-10 w-10 h-10 rounded-full flex items-center justify-center border-4 border-white shadow-sm transition-colors text-white ${A}`,children:k(M)}),M!=="6"&&s.jsx("div",{className:"absolute left-[24px] top-[50px] bottom-[-20px] w-[2px] bg-gray-200 z-0"}),s.jsxs("div",{className:`bg-white border rounded-xl p-4 shadow-sm transition-all ${w?"border-blue-500 ring-2 ring-blue-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[C.name,M==="5"&&C.paymentStatus==="initiated"&&!C.locked&&s.jsx("span",{className:"text-[10px] text-orange-500 bg-orange-50 px-2 rounded animate-pulse",children:""}),M==="5"&&C.paymentStatus==="expired"&&s.jsx("span",{className:"text-[10px] text-red-500 bg-red-50 px-2 rounded",children:""})]}),C.locked&&s.jsx(To,{size:14,className:"text-green-600"})]}),M==="2"&&C.data.note&&s.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded border border-gray-100",children:[s.jsx("p",{className:"text-xs font-bold text-gray-500 mb-2 border-b pb-1",children:" "}),s.jsx("div",{className:"text-sm whitespace-pre-wrap",children:C.data.note})]}),M==="5"&&C.paymentStatus==="initiated"&&!C.locked&&s.jsxs("div",{className:"mb-4 text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-2xl font-mono text-orange-600 font-bold mb-1",children:l}),s.jsx("div",{className:"text-xs text-orange-400 mb-3",children:""}),r==="agent"?s.jsx("button",{onClick:f,disabled:o||l==="",className:`w-full text-white font-bold py-2 rounded shadow ${l===""?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-red-500 hover:shadow-lg"}`,children:l===""?"":o?"...":" NT$ 2,000"}):s.jsx("div",{className:"text-xs text-gray-400",children:"..."})]}),M==="6"&&!C.locked&&a.isPaid&&s.jsxs("div",{className:"space-y-2 mt-2",children:[(E=C.checklist)==null?void 0:E.map(_=>s.jsxs("div",{onClick:()=>j(_.id,!_.checked),className:`flex items-center p-4 border rounded transition cursor-pointer ${_.checked?"bg-indigo-50 border-indigo-200":"hover:bg-gray-50"}`,children:[s.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center bg-white ${_.checked?"bg-indigo-600 border-indigo-600":""}`,children:_.checked&&s.jsx(et,{size:12,className:"text-white"})}),s.jsx("span",{className:`ml-3 text-sm ${_.checked?"text-indigo-800 font-bold":""}`,children:_.label})]},_.id)),s.jsx("button",{onClick:()=>y("6"),className:"w-full bg-indigo-600 text-white py-2 rounded font-bold mt-2",children:""})]}),!C.locked&&w&&M!=="5"&&M!=="6"&&s.jsxs("div",{children:[r==="agent"&&(C.agentStatus==="pending"?s.jsxs("div",{children:[s.jsx("textarea",{value:m,onChange:_=>u(_.target.value),className:"w-full border p-2 rounded text-sm mb-2 focus:ring-2 ring-blue-200 outline-none",placeholder:"..."}),s.jsx("button",{onClick:()=>g(M),disabled:o,className:"w-full bg-slate-800 text-white py-2 rounded text-sm",children:o?"...":""})]}):s.jsx("div",{className:"text-center text-xs text-gray-400 py-2 bg-gray-50 rounded",children:"..."})),r==="buyer"&&(C.agentStatus==="submitted"?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:""}),s.jsx("div",{className:"p-2 bg-gray-50 rounded border text-sm mb-2 whitespace-pre-wrap",children:C.data.note||""}),s.jsx("textarea",{value:m,onChange:_=>u(_.target.value),className:"w-full border p-2 rounded text-sm mb-2 focus:ring-2 ring-green-200 outline-none",placeholder:" ()..."}),s.jsx("button",{onClick:()=>y(M),disabled:o,className:"w-full bg-green-600 text-white py-2 rounded text-sm",children:o?"...":""})]}):s.jsx("div",{className:"text-center text-xs text-gray-400 py-2",children:"..."}))]}),C.data.buyerNote&&s.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded border border-green-100 text-xs",children:[s.jsx("span",{className:"font-bold text-green-700",children:""})," ",C.data.buyerNote]}),M==="5"&&!C.locked&&C.paymentStatus==="pending"&&s.jsxs("div",{children:[r==="agent"&&C.agentStatus==="pending"&&s.jsx("button",{onClick:()=>g("5"),className:"w-full bg-slate-800 text-white py-2 rounded",children:""}),r==="buyer"&&C.agentStatus==="submitted"&&s.jsx("button",{onClick:()=>y("5"),className:"w-full bg-green-600 text-white py-2 rounded",children:" ()"})]}),a.supplements.length>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-dashed",children:a.supplements.map((_,L)=>s.jsxs("div",{className:"text-xs mb-1 p-2 bg-gray-50 rounded border border-gray-100 flex gap-2",children:[s.jsx("span",{className:"font-bold",children:_.role==="agent"?"":""}),s.jsx("span",{className:"flex-1",children:_.content})]},L))})]})]},M)}),s.jsxs("div",{className:"mt-8 bg-white p-4 rounded-xl shadow-sm border",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-2",children:"  (/)"}),s.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:x,onChange:M=>p(M.target.value),className:"flex-1 border rounded px-3 py-2 text-sm",placeholder:"..."}),s.jsx("button",{onClick:S,disabled:!x,className:"bg-gray-800 text-white px-4 rounded text-sm",children:""})]})]})]})]})}function Af(){return s.jsx("main",{className:"mx-auto max-w-container p-4 md:p-6",children:s.jsx(Tl,{})})}let ot=class extends h.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.error(t);try{ca("error_boundary","*",String(t.message||t))}catch{}}render(){return this.state.hasError?s.jsx("div",{className:"rounded-[var(--r-lg)] bg-white p-4 text-[var(--danger)] shadow-[var(--shadow-card)]",children:""}):this.props.children}};const Pf=h.createContext(null),Mf=({children:e})=>{const[t,r]=h.useState(()=>localStorage.getItem("mai-mood-v1")||"neutral"),n=l=>{r(l),localStorage.setItem("mai-mood-v1",l),zu(l),We(qe.MoodPick,{mood:l})},a=t==="stress"?"soothe":t==="rest"?"warm":"light",i=t==="stress"?2:t==="rest"?1:0,o=h.useMemo(()=>({mood:t,setMood:n,tone:a,throttleLevel:i}),[t]);return s.jsx(Pf.Provider,{value:o,children:e})};function Rf(){const[e,t]=h.useState(!1);h.useEffect(()=>{localStorage.getItem("cookie-consent")||t(!0)},[]);const r=()=>{localStorage.setItem("cookie-consent","true"),t(!1)};return e?s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-gray-900 p-4 text-white shadow-lg md:p-6",children:s.jsxs("div",{className:"mx-auto flex max-w-container flex-col items-center justify-between gap-4 md:flex-row",children:[s.jsx("div",{className:"text-sm text-gray-300",children:" Cookie "}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:r,className:"rounded-full bg-brand px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",children:""})})]})}):null}const $f=h.createContext(null),hn={didCatch:!1,error:null};class Lf extends h.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=hn}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(hn)}}componentDidCatch(t,r){var n,a;(n=(a=this.props).onError)===null||n===void 0||n.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:a}=this.props;if(n&&r.error!==null&&Of(t.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(hn)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let l=t;if(i){const d={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(d);else if(n)l=h.createElement(n,d);else if(a!==void 0)l=a;else throw o}return h.createElement($f.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function Of(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}const Df="_primary_10s9u_154",Ff="_float_10s9u_1",Bf="_pulse_10s9u_1",Uf="_selected_10s9u_210",Zf="_urgent_10s9u_288",Hf="_shimmer_10s9u_1",R={"uag-page":"_uag-page_10s9u_26","uag-header":"_uag-header_10s9u_51","uag-header-inner":"_uag-header-inner_10s9u_58","uag-logo":"_uag-logo_10s9u_63","uag-logo-badge":"_uag-logo-badge_10s9u_64","uag-container":"_uag-container_10s9u_70","uag-grid":"_uag-grid_10s9u_71","k-span-2":"_k-span-2_10s9u_74","k-span-3":"_k-span-3_10s9u_75","k-span-4":"_k-span-4_10s9u_76","k-span-6":"_k-span-6_10s9u_77","uag-breadcrumb":"_uag-breadcrumb_10s9u_87","uag-badge--pro":"_uag-badge--pro_10s9u_101","uag-card":"_uag-card_10s9u_108","uag-card-header":"_uag-card-header_10s9u_122","uag-card-title":"_uag-card-title_10s9u_123","uag-card-sub":"_uag-card-sub_10s9u_128","uag-actions":"_uag-actions_10s9u_133","uag-btn":"_uag-btn_10s9u_144",primary:Df,"uag-badge":"_uag-badge_10s9u_101","uag-badge--s":"_uag-badge--s_10s9u_169","uag-badge--a":"_uag-badge--a_10s9u_170","uag-cluster":"_uag-cluster_10s9u_173","uag-bubble":"_uag-bubble_10s9u_199",float:Ff,pulse:Bf,selected:Uf,"uag-bubble-grade":"_uag-bubble-grade_10s9u_222","uag-bubble-label":"_uag-bubble-label_10s9u_227","uag-action-panel":"_uag-action-panel_10s9u_240","ap-head":"_ap-head_10s9u_247","ap-body":"_ap-body_10s9u_253","ap-stats-group":"_ap-stats-group_10s9u_262","ai-box":"_ai-box_10s9u_263","action-zone":"_action-zone_10s9u_264","ap-stat":"_ap-stat_10s9u_262",urgent:Zf,"btn-attack":"_btn-attack_10s9u_295",shimmer:Hf,"monitor-table":"_monitor-table_10s9u_335","progress-bg":"_progress-bg_10s9u_358","progress-fill":"_progress-fill_10s9u_359","t-countdown":"_t-countdown_10s9u_360","listing-item":"_listing-item_10s9u_363","l-thumb":"_l-thumb_10s9u_369","l-title":"_l-title_10s9u_370","l-tags":"_l-tags_10s9u_371","l-tag":"_l-tag_10s9u_371","l-kpi":"_l-kpi_10s9u_373","feed-post":"_feed-post_10s9u_382","fp-title":"_fp-title_10s9u_384","fp-meta":"_fp-meta_10s9u_385","fp-body":"_fp-body_10s9u_386","mai-card":"_mai-card_10s9u_389","mai-head":"_mai-head_10s9u_403","mai-tag":"_mai-tag_10s9u_408","mai-title":"_mai-title_10s9u_409","mai-sub":"_mai-sub_10s9u_410","mai-body":"_mai-body_10s9u_411","mai-left":"_mai-left_10s9u_412","mai-price":"_mai-price_10s9u_413","mai-price-label":"_mai-price-label_10s9u_414","mai-price-value":"_mai-price-value_10s9u_415","mai-price-unit":"_mai-price-unit_10s9u_416","mai-stats":"_mai-stats_10s9u_417","mai-right":"_mai-right_10s9u_420","mai-thumb":"_mai-thumb_10s9u_421","mai-mini":"_mai-mini_10s9u_422","mai-actions":"_mai-actions_10s9u_424","mai-btn":"_mai-btn_10s9u_425","flow-stage":"_flow-stage_10s9u_445","uag-footer-bar":"_uag-footer-bar_10s9u_448"};function P(e,t,r){function n(l,d){var c;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(c=l._zod).traits??(c.traits=new Set),l._zod.traits.add(e),t(l,d);for(const m in o.prototype)m in l||Object.defineProperty(l,m,{value:o.prototype[m].bind(l)});l._zod.constr=o,l._zod.def=d}const a=(r==null?void 0:r.Parent)??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(l){var d;const c=r!=null&&r.Parent?new i:this;n(c,l),(d=c._zod).deferred??(d.deferred=[]);for(const m of c._zod.deferred)m();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>{var d,c;return r!=null&&r.Parent&&l instanceof r.Parent?!0:(c=(d=l==null?void 0:l._zod)==null?void 0:d.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class gs extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Bl extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Ul={};function as(e){return Ul}function Wf(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function Vn(e,t){return typeof t=="bigint"?t.toString():t}function ga(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ba(e){return e==null}function va(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function qf(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let a=(n.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(n)){const d=n.match(/\d?e-(\d?)/);d!=null&&d[1]&&(a=Number.parseInt(d[1]))}const i=r>a?r:a,o=Number.parseInt(e.toFixed(i).replace(".","")),l=Number.parseInt(t.toFixed(i).replace(".",""));return o%l/10**i}const Fi=Symbol("evaluating");function fe(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==Fi)return n===void 0&&(n=Fi,n=r()),n},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function os(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ls(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function Bi(e){return JSON.stringify(e)}const Zl="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function $r(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Vf=ga(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function qs(e){if($r(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!($r(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Hl(e){return qs(e)?{...e}:Array.isArray(e)?[...e]:e}const Qf=new Set(["string","number","symbol"]);function Qr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bt(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function Y(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Gf(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Kf={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Yf(e,t){const r=e._zod.def,n=ls(e._zod.def,{get shape(){const a={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(a[i]=r.shape[i])}return os(this,"shape",a),a},checks:[]});return Bt(e,n)}function Jf(e,t){const r=e._zod.def,n=ls(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete a[i]}return os(this,"shape",a),a},checks:[]});return Bt(e,n)}function Xf(e,t){if(!qs(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=ls(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return os(this,"shape",i),i},checks:[]});return Bt(e,a)}function ex(e,t){if(!qs(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return os(this,"shape",n),n},checks:e._zod.def.checks};return Bt(e,r)}function tx(e,t){const r=ls(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return os(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Bt(e,r)}function sx(e,t,r){const n=ls(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:a[o]}):a[o])}else for(const o in a)i[o]=e?new e({type:"optional",innerType:a[o]}):a[o];return os(this,"shape",i),i},checks:[]});return Bt(t,n)}function rx(e,t,r){const n=ls(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:a[o]}))}else for(const o in a)i[o]=new e({type:"nonoptional",innerType:a[o]});return os(this,"shape",i),i},checks:[]});return Bt(t,n)}function fs(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Wl(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function br(e){return typeof e=="string"?e:e==null?void 0:e.message}function is(e,t,r){var a,i,o,l,d,c;const n={...e,path:e.path??[]};if(!e.message){const m=br((o=(i=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??br((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??br((d=r.customError)==null?void 0:d.call(r,e))??br((c=r.localeError)==null?void 0:c.call(r,e))??"Invalid input";n.message=m}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function ya(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Vs(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const ql=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Vn,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Vl=P("$ZodError",ql),Ql=P("$ZodError",ql,{Parent:Error});function nx(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function ax(e,t=r=>r.message){const r={_errors:[]},n=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>n({issues:o}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let o=r,l=0;for(;l<i.path.length;){const d=i.path[l];l===i.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(i))):o[d]=o[d]||{_errors:[]},o=o[d],l++}}};return n(e),r}const wa=e=>(t,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new gs;if(o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(d=>is(d,i,as())));throw Zl(l,a==null?void 0:a.callee),l}return o.value},ja=e=>async(t,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(d=>is(d,i,as())));throw Zl(l,a==null?void 0:a.callee),l}return o.value},Gr=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new gs;return i.issues.length?{success:!1,error:new(e??Vl)(i.issues.map(o=>is(o,a,as())))}:{success:!0,data:i.value}},ix=Gr(Ql),Kr=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>is(o,a,as())))}:{success:!0,data:i.value}},ox=Kr(Ql),lx=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return wa(e)(t,r,a)},cx=e=>(t,r,n)=>wa(e)(t,r,n),dx=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ja(e)(t,r,a)},ux=e=>async(t,r,n)=>ja(e)(t,r,n),mx=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Gr(e)(t,r,a)},hx=e=>(t,r,n)=>Gr(e)(t,r,n),px=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Kr(e)(t,r,a)},fx=e=>async(t,r,n)=>Kr(e)(t,r,n),xx=/^[cC][^\s-]{8,}$/,gx=/^[0-9a-z]+$/,bx=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,vx=/^[0-9a-vA-V]{20}$/,yx=/^[A-Za-z0-9]{27}$/,wx=/^[a-zA-Z0-9_-]{21}$/,jx=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Nx=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ui=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,kx=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_x="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Sx(){return new RegExp(_x,"u")}const Cx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ex=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ix=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Tx=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zx=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Gl=/^[A-Za-z0-9_-]*$/,Ax=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Px=/^\+(?:[0-9]){6,14}[0-9]$/,Kl="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Mx=new RegExp(`^${Kl}$`);function Yl(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Rx(e){return new RegExp(`^${Yl(e)}$`)}function $x(e){const t=Yl({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${Kl}T(?:${n})$`)}const Lx=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Ox=/^-?\d+$/,Dx=/^-?\d+(?:\.\d+)?/,Fx=/^null$/i,Bx=/^[^A-Z]*$/,Ux=/^[^a-z]*$/,Ve=P("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Jl={number:"number",bigint:"bigint",object:"date"},Xl=P("$ZodCheckLessThan",(e,t)=>{Ve.init(e,t);const r=Jl[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ec=P("$ZodCheckGreaterThan",(e,t)=>{Ve.init(e,t);const r=Jl[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Zx=P("$ZodCheckMultipleOf",(e,t)=>{Ve.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):qf(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Hx=P("$ZodCheckNumberFormat",(e,t)=>{var o;Ve.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[a,i]=Kf[t.format];e._zod.onattach.push(l=>{const d=l._zod.bag;d.format=t.format,d.minimum=a,d.maximum=i,r&&(d.pattern=Ox)}),e._zod.check=l=>{const d=l.value;if(r){if(!Number.isInteger(d)){l.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?l.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):l.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}d<a&&l.issues.push({origin:"number",input:d,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),d>i&&l.issues.push({origin:"number",input:d,code:"too_big",maximum:i,inst:e})}}),Wx=P("$ZodCheckMaxLength",(e,t)=>{var r;Ve.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!ba(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const o=ya(a);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),qx=P("$ZodCheckMinLength",(e,t)=>{var r;Ve.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!ba(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const o=ya(a);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Vx=P("$ZodCheckLengthEquals",(e,t)=>{var r;Ve.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!ba(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,i=a.length;if(i===t.length)return;const o=ya(a),l=i>t.length;n.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Yr=P("$ZodCheckStringFormat",(e,t)=>{var r,n;Ve.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Qx=P("$ZodCheckRegex",(e,t)=>{Yr.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Gx=P("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Bx),Yr.init(e,t)}),Kx=P("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Ux),Yr.init(e,t)}),Yx=P("$ZodCheckIncludes",(e,t)=>{Ve.init(e,t);const r=Qr(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),Jx=P("$ZodCheckStartsWith",(e,t)=>{Ve.init(e,t);const r=new RegExp(`^${Qr(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Xx=P("$ZodCheckEndsWith",(e,t)=>{Ve.init(e,t);const r=new RegExp(`.*${Qr(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),eg=P("$ZodCheckOverwrite",(e,t)=>{Ve.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class tg{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const sg={major:4,minor:1,patch:12},je=P("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=sg;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const i=(l,d,c)=>{let m=fs(l),u;for(const x of d){if(x._zod.def.when){if(!x._zod.def.when(l))continue}else if(m)continue;const p=l.issues.length,b=x._zod.check(l);if(b instanceof Promise&&(c==null?void 0:c.async)===!1)throw new gs;if(u||b instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await b,l.issues.length!==p&&(m||(m=fs(l,p)))});else{if(l.issues.length===p)continue;m||(m=fs(l,p))}}return u?u.then(()=>l):l},o=(l,d,c)=>{if(fs(l))return l.aborted=!0,l;const m=i(d,n,c);if(m instanceof Promise){if(c.async===!1)throw new gs;return m.then(u=>e._zod.parse(u,c))}return e._zod.parse(m,c)};e._zod.run=(l,d)=>{if(d.skipChecks)return e._zod.parse(l,d);if(d.direction==="backward"){const m=e._zod.parse({value:l.value,issues:[]},{...d,skipChecks:!0});return m instanceof Promise?m.then(u=>o(u,l,d)):o(m,l,d)}const c=e._zod.parse(l,d);if(c instanceof Promise){if(d.async===!1)throw new gs;return c.then(m=>i(m,n,d))}return i(c,n,d)}}e["~standard"]={validate:i=>{var o;try{const l=ix(e,i);return l.success?{value:l.data}:{issues:(o=l.error)==null?void 0:o.issues}}catch{return ox(e,i).then(d=>{var c;return d.success?{value:d.data}:{issues:(c=d.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),Na=P("$ZodString",(e,t)=>{var r;je.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Lx(e._zod.bag),e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),be=P("$ZodStringFormat",(e,t)=>{Yr.init(e,t),Na.init(e,t)}),rg=P("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Nx),be.init(e,t)}),ng=P("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Ui(n))}else t.pattern??(t.pattern=Ui());be.init(e,t)}),ag=P("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=kx),be.init(e,t)}),ig=P("$ZodURL",(e,t)=>{be.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),a=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Ax.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),og=P("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Sx()),be.init(e,t)}),lg=P("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=wx),be.init(e,t)}),cg=P("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=xx),be.init(e,t)}),dg=P("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=gx),be.init(e,t)}),ug=P("$ZodULID",(e,t)=>{t.pattern??(t.pattern=bx),be.init(e,t)}),mg=P("$ZodXID",(e,t)=>{t.pattern??(t.pattern=vx),be.init(e,t)}),hg=P("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=yx),be.init(e,t)}),pg=P("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=$x(t)),be.init(e,t)}),fg=P("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Mx),be.init(e,t)}),xg=P("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Rx(t)),be.init(e,t)}),gg=P("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=jx),be.init(e,t)}),bg=P("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Cx),be.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),vg=P("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ex),be.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),yg=P("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ix),be.init(e,t)}),wg=P("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Tx),be.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[a,i]=n;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function tc(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const jg=P("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=zx),be.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{tc(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Ng(e){if(!Gl.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return tc(r)}const kg=P("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Gl),be.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Ng(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),_g=P("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Px),be.init(e,t)});function Sg(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const Cg=P("$ZodJWT",(e,t)=>{be.init(e,t),e._zod.check=r=>{Sg(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),sc=P("$ZodNumber",(e,t)=>{je.init(e,t),e._zod.pattern=e._zod.bag.pattern??Dx,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),r}}),Eg=P("$ZodNumber",(e,t)=>{Hx.init(e,t),sc.init(e,t)}),Ig=P("$ZodNull",(e,t)=>{je.init(e,t),e._zod.pattern=Fx,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),Tg=P("$ZodUnknown",(e,t)=>{je.init(e,t),e._zod.parse=r=>r}),zg=P("$ZodNever",(e,t)=>{je.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Zi(e,t,r){e.issues.length&&t.issues.push(...Wl(r,e.issues)),t.value[r]=e.value}const Ag=P("$ZodArray",(e,t)=>{je.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const l=a[o],d=t.element._zod.run({value:l,issues:[]},n);d instanceof Promise?i.push(d.then(c=>Zi(c,r,o))):Zi(d,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function Lr(e,t,r,n){e.issues.length&&t.issues.push(...Wl(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function rc(e){var n,a,i,o;const t=Object.keys(e.shape);for(const l of t)if(!((o=(i=(a=(n=e.shape)==null?void 0:n[l])==null?void 0:a._zod)==null?void 0:i.traits)!=null&&o.has("$ZodType")))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const r=Gf(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function nc(e,t,r,n,a,i){const o=[],l=a.keySet,d=a.catchall._zod,c=d.def.type;for(const m of Object.keys(t)){if(l.has(m))continue;if(c==="never"){o.push(m);continue}const u=d.run({value:t[m],issues:[]},n);u instanceof Promise?e.push(u.then(x=>Lr(x,r,m,t))):Lr(u,r,m,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const Pg=P("$ZodObject",(e,t)=>{je.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const l=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...l};return Object.defineProperty(t,"shape",{value:d}),d}})}const n=ga(()=>rc(t));fe(e._zod,"propValues",()=>{const l=t.shape,d={};for(const c in l){const m=l[c]._zod;if(m.values){d[c]??(d[c]=new Set);for(const u of m.values)d[c].add(u)}}return d});const a=$r,i=t.catchall;let o;e._zod.parse=(l,d)=>{o??(o=n.value);const c=l.value;if(!a(c))return l.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),l;l.value={};const m=[],u=o.shape;for(const x of o.keys){const b=u[x]._zod.run({value:c[x],issues:[]},d);b instanceof Promise?m.push(b.then(g=>Lr(g,l,x,c))):Lr(b,l,x,c)}return i?nc(m,c,l,d,n.value,e):m.length?Promise.all(m).then(()=>l):l}}),Mg=P("$ZodObjectJIT",(e,t)=>{Pg.init(e,t);const r=e._zod.parse,n=ga(()=>rc(t)),a=x=>{const p=new tg(["shape","payload","ctx"]),b=n.value,g=S=>{const N=Bi(S);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};p.write("const input = payload.value;");const y=Object.create(null);let f=0;for(const S of b.keys)y[S]=`key_${f++}`;p.write("const newResult = {};");for(const S of b.keys){const N=y[S],I=Bi(S);p.write(`const ${N} = ${g(S)};`),p.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        
        if (${N}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${N}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const j=p.compile();return(S,N)=>j(x,S,N)};let i;const o=$r,l=!Ul.jitless,c=l&&Vf.value,m=t.catchall;let u;e._zod.parse=(x,p)=>{u??(u=n.value);const b=x.value;return o(b)?l&&c&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(i||(i=a(t.shape)),x=i(x,p),m?nc([],b,x,p,u,e):x):r(x,p):(x.issues.push({expected:"object",code:"invalid_type",input:b,inst:e}),x)}});function Hi(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const a=e.filter(i=>!fs(i));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>is(o,n,as())))}),t)}const Rg=P("$ZodUnion",(e,t)=>{je.init(e,t),fe(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),fe(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),fe(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),fe(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>va(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(r)return n(a,i);let o=!1;const l=[];for(const d of t.options){const c=d._zod.run({value:a.value,issues:[]},i);if(c instanceof Promise)l.push(c),o=!0;else{if(c.issues.length===0)return c;l.push(c)}}return o?Promise.all(l).then(d=>Hi(d,a,e,i)):Hi(l,a,e,i)}}),$g=P("$ZodIntersection",(e,t)=>{je.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([d,c])=>Wi(r,d,c)):Wi(r,i,o)}});function Qn(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(qs(e)&&qs(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=Qn(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=Qn(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Wi(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),fs(e))return e;const n=Qn(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Lg=P("$ZodEnum",(e,t)=>{je.init(e,t);const r=Wf(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(a=>Qf.has(typeof a)).map(a=>typeof a=="string"?Qr(a):a.toString()).join("|")})$`),e._zod.parse=(a,i)=>{const o=a.value;return n.has(o)||a.issues.push({code:"invalid_value",values:r,input:o,inst:e}),a}}),Og=P("$ZodTransform",(e,t)=>{je.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Bl(e.constructor.name);const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new gs;return r.value=a,r}});function qi(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Dg=P("$ZodOptional",(e,t)=>{je.init(e,t),e._zod.optin="optional",e._zod.optout="optional",fe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),fe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${va(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>qi(i,r.value)):qi(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Fg=P("$ZodNullable",(e,t)=>{je.init(e,t),fe(e._zod,"optin",()=>t.innerType._zod.optin),fe(e._zod,"optout",()=>t.innerType._zod.optout),fe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${va(r.source)}|null)$`):void 0}),fe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Bg=P("$ZodDefault",(e,t)=>{je.init(e,t),e._zod.optin="optional",fe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Vi(i,t)):Vi(a,t)}});function Vi(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Ug=P("$ZodPrefault",(e,t)=>{je.init(e,t),e._zod.optin="optional",fe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Zg=P("$ZodNonOptional",(e,t)=>{je.init(e,t),fe(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Qi(i,e)):Qi(a,e)}});function Qi(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Hg=P("$ZodCatch",(e,t)=>{je.init(e,t),fe(e._zod,"optin",()=>t.innerType._zod.optin),fe(e._zod,"optout",()=>t.innerType._zod.optout),fe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>is(o,n,as()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>is(i,n,as()))},input:r.value}),r.issues=[]),r)}}),Wg=P("$ZodPipe",(e,t)=>{je.init(e,t),fe(e._zod,"values",()=>t.in._zod.values),fe(e._zod,"optin",()=>t.in._zod.optin),fe(e._zod,"optout",()=>t.out._zod.optout),fe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>vr(o,t.in,n)):vr(i,t.in,n)}const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(i=>vr(i,t.out,n)):vr(a,t.out,n)}});function vr(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const qg=P("$ZodReadonly",(e,t)=>{je.init(e,t),fe(e._zod,"propValues",()=>t.innerType._zod.propValues),fe(e._zod,"values",()=>t.innerType._zod.values),fe(e._zod,"optin",()=>t.innerType._zod.optin),fe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(Gi):Gi(a)}});function Gi(e){return e.value=Object.freeze(e.value),e}const Vg=P("$ZodCustom",(e,t)=>{Ve.init(e,t),je.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>Ki(i,r,n,e));Ki(a,r,n,e)}});function Ki(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(Vs(a))}}class Qg{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const a={...n,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Gg(){return new Qg}const yr=Gg();function Kg(e,t){return new e({type:"string",...Y(t)})}function Yg(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Y(t)})}function Yi(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Y(t)})}function Jg(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Y(t)})}function Xg(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Y(t)})}function e0(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Y(t)})}function t0(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Y(t)})}function s0(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Y(t)})}function r0(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Y(t)})}function n0(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Y(t)})}function a0(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Y(t)})}function i0(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Y(t)})}function o0(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Y(t)})}function l0(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Y(t)})}function c0(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Y(t)})}function d0(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Y(t)})}function u0(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Y(t)})}function m0(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Y(t)})}function h0(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Y(t)})}function p0(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Y(t)})}function f0(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Y(t)})}function x0(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Y(t)})}function g0(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Y(t)})}function b0(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Y(t)})}function v0(e,t){return new e({type:"string",format:"date",check:"string_format",...Y(t)})}function y0(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Y(t)})}function w0(e,t){return new e({type:"string",format:"duration",check:"string_format",...Y(t)})}function j0(e,t){return new e({type:"number",checks:[],...Y(t)})}function N0(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Y(t)})}function k0(e,t){return new e({type:"null",...Y(t)})}function _0(e){return new e({type:"unknown"})}function S0(e,t){return new e({type:"never",...Y(t)})}function Ji(e,t){return new Xl({check:"less_than",...Y(t),value:e,inclusive:!1})}function pn(e,t){return new Xl({check:"less_than",...Y(t),value:e,inclusive:!0})}function Xi(e,t){return new ec({check:"greater_than",...Y(t),value:e,inclusive:!1})}function fn(e,t){return new ec({check:"greater_than",...Y(t),value:e,inclusive:!0})}function eo(e,t){return new Zx({check:"multiple_of",...Y(t),value:e})}function ac(e,t){return new Wx({check:"max_length",...Y(t),maximum:e})}function Or(e,t){return new qx({check:"min_length",...Y(t),minimum:e})}function ic(e,t){return new Vx({check:"length_equals",...Y(t),length:e})}function C0(e,t){return new Qx({check:"string_format",format:"regex",...Y(t),pattern:e})}function E0(e){return new Gx({check:"string_format",format:"lowercase",...Y(e)})}function I0(e){return new Kx({check:"string_format",format:"uppercase",...Y(e)})}function T0(e,t){return new Yx({check:"string_format",format:"includes",...Y(t),includes:e})}function z0(e,t){return new Jx({check:"string_format",format:"starts_with",...Y(t),prefix:e})}function A0(e,t){return new Xx({check:"string_format",format:"ends_with",...Y(t),suffix:e})}function nr(e){return new eg({check:"overwrite",tx:e})}function P0(e){return nr(t=>t.normalize(e))}function M0(){return nr(e=>e.trim())}function R0(){return nr(e=>e.toLowerCase())}function $0(){return nr(e=>e.toUpperCase())}function L0(e,t,r){return new e({type:"array",element:t,...Y(r)})}function O0(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Y(r)})}function D0(e){const t=F0(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Vs(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(Vs(a))}},e(r.value,r)));return t}function F0(e,t){const r=new Ve({check:"custom",...Y(t)});return r._zod.check=e,r}const B0=P("ZodISODateTime",(e,t)=>{pg.init(e,t),ve.init(e,t)});function U0(e){return b0(B0,e)}const Z0=P("ZodISODate",(e,t)=>{fg.init(e,t),ve.init(e,t)});function H0(e){return v0(Z0,e)}const W0=P("ZodISOTime",(e,t)=>{xg.init(e,t),ve.init(e,t)});function q0(e){return y0(W0,e)}const V0=P("ZodISODuration",(e,t)=>{gg.init(e,t),ve.init(e,t)});function Q0(e){return w0(V0,e)}const G0=(e,t)=>{Vl.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ax(e,r)},flatten:{value:r=>nx(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Vn,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Vn,2)}},isEmpty:{get(){return e.issues.length===0}}})},rt=P("ZodError",G0,{Parent:Error}),K0=wa(rt),Y0=ja(rt),J0=Gr(rt),X0=Kr(rt),eb=lx(rt),tb=cx(rt),sb=dx(rt),rb=ux(rt),nb=mx(rt),ab=hx(rt),ib=px(rt),ob=fx(rt),Ne=P("ZodType",(e,t)=>(je.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(ls(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),e.clone=(r,n)=>Bt(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>K0(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>J0(e,r,n),e.parseAsync=async(r,n)=>Y0(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>X0(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>eb(e,r,n),e.decode=(r,n)=>tb(e,r,n),e.encodeAsync=async(r,n)=>sb(e,r,n),e.decodeAsync=async(r,n)=>rb(e,r,n),e.safeEncode=(r,n)=>nb(e,r,n),e.safeDecode=(r,n)=>ab(e,r,n),e.safeEncodeAsync=async(r,n)=>ib(e,r,n),e.safeDecodeAsync=async(r,n)=>ob(e,r,n),e.refine=(r,n)=>e.check(Yb(r,n)),e.superRefine=r=>e.check(Jb(r)),e.overwrite=r=>e.check(nr(r)),e.optional=()=>no(e),e.nullable=()=>ao(e),e.nullish=()=>no(ao(e)),e.nonoptional=r=>Hb(e,r),e.array=()=>Fs(e),e.or=r=>cc([e,r]),e.and=r=>$b(e,r),e.transform=r=>io(e,Ob(r)),e.default=r=>Bb(e,r),e.prefault=r=>Zb(e,r),e.catch=r=>qb(e,r),e.pipe=r=>io(e,r),e.readonly=()=>Gb(e),e.describe=r=>{const n=e.clone();return yr.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=yr.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return yr.get(e);const n=e.clone();return yr.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),oc=P("_ZodString",(e,t)=>{Na.init(e,t),Ne.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(C0(...n)),e.includes=(...n)=>e.check(T0(...n)),e.startsWith=(...n)=>e.check(z0(...n)),e.endsWith=(...n)=>e.check(A0(...n)),e.min=(...n)=>e.check(Or(...n)),e.max=(...n)=>e.check(ac(...n)),e.length=(...n)=>e.check(ic(...n)),e.nonempty=(...n)=>e.check(Or(1,...n)),e.lowercase=n=>e.check(E0(n)),e.uppercase=n=>e.check(I0(n)),e.trim=()=>e.check(M0()),e.normalize=(...n)=>e.check(P0(...n)),e.toLowerCase=()=>e.check(R0()),e.toUpperCase=()=>e.check($0())}),lb=P("ZodString",(e,t)=>{Na.init(e,t),oc.init(e,t),e.email=r=>e.check(Yg(cb,r)),e.url=r=>e.check(s0(db,r)),e.jwt=r=>e.check(g0(_b,r)),e.emoji=r=>e.check(r0(ub,r)),e.guid=r=>e.check(Yi(to,r)),e.uuid=r=>e.check(Jg(wr,r)),e.uuidv4=r=>e.check(Xg(wr,r)),e.uuidv6=r=>e.check(e0(wr,r)),e.uuidv7=r=>e.check(t0(wr,r)),e.nanoid=r=>e.check(n0(mb,r)),e.guid=r=>e.check(Yi(to,r)),e.cuid=r=>e.check(a0(hb,r)),e.cuid2=r=>e.check(i0(pb,r)),e.ulid=r=>e.check(o0(fb,r)),e.base64=r=>e.check(p0(jb,r)),e.base64url=r=>e.check(f0(Nb,r)),e.xid=r=>e.check(l0(xb,r)),e.ksuid=r=>e.check(c0(gb,r)),e.ipv4=r=>e.check(d0(bb,r)),e.ipv6=r=>e.check(u0(vb,r)),e.cidrv4=r=>e.check(m0(yb,r)),e.cidrv6=r=>e.check(h0(wb,r)),e.e164=r=>e.check(x0(kb,r)),e.datetime=r=>e.check(U0(r)),e.date=r=>e.check(H0(r)),e.time=r=>e.check(q0(r)),e.duration=r=>e.check(Q0(r))});function Re(e){return Kg(lb,e)}const ve=P("ZodStringFormat",(e,t)=>{be.init(e,t),oc.init(e,t)}),cb=P("ZodEmail",(e,t)=>{ag.init(e,t),ve.init(e,t)}),to=P("ZodGUID",(e,t)=>{rg.init(e,t),ve.init(e,t)}),wr=P("ZodUUID",(e,t)=>{ng.init(e,t),ve.init(e,t)}),db=P("ZodURL",(e,t)=>{ig.init(e,t),ve.init(e,t)}),ub=P("ZodEmoji",(e,t)=>{og.init(e,t),ve.init(e,t)}),mb=P("ZodNanoID",(e,t)=>{lg.init(e,t),ve.init(e,t)}),hb=P("ZodCUID",(e,t)=>{cg.init(e,t),ve.init(e,t)}),pb=P("ZodCUID2",(e,t)=>{dg.init(e,t),ve.init(e,t)}),fb=P("ZodULID",(e,t)=>{ug.init(e,t),ve.init(e,t)}),xb=P("ZodXID",(e,t)=>{mg.init(e,t),ve.init(e,t)}),gb=P("ZodKSUID",(e,t)=>{hg.init(e,t),ve.init(e,t)}),bb=P("ZodIPv4",(e,t)=>{bg.init(e,t),ve.init(e,t)}),vb=P("ZodIPv6",(e,t)=>{vg.init(e,t),ve.init(e,t)}),yb=P("ZodCIDRv4",(e,t)=>{yg.init(e,t),ve.init(e,t)}),wb=P("ZodCIDRv6",(e,t)=>{wg.init(e,t),ve.init(e,t)}),jb=P("ZodBase64",(e,t)=>{jg.init(e,t),ve.init(e,t)}),Nb=P("ZodBase64URL",(e,t)=>{kg.init(e,t),ve.init(e,t)}),kb=P("ZodE164",(e,t)=>{_g.init(e,t),ve.init(e,t)}),_b=P("ZodJWT",(e,t)=>{Cg.init(e,t),ve.init(e,t)}),lc=P("ZodNumber",(e,t)=>{sc.init(e,t),Ne.init(e,t),e.gt=(n,a)=>e.check(Xi(n,a)),e.gte=(n,a)=>e.check(fn(n,a)),e.min=(n,a)=>e.check(fn(n,a)),e.lt=(n,a)=>e.check(Ji(n,a)),e.lte=(n,a)=>e.check(pn(n,a)),e.max=(n,a)=>e.check(pn(n,a)),e.int=n=>e.check(so(n)),e.safe=n=>e.check(so(n)),e.positive=n=>e.check(Xi(0,n)),e.nonnegative=n=>e.check(fn(0,n)),e.negative=n=>e.check(Ji(0,n)),e.nonpositive=n=>e.check(pn(0,n)),e.multipleOf=(n,a)=>e.check(eo(n,a)),e.step=(n,a)=>e.check(eo(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Te(e){return j0(lc,e)}const Sb=P("ZodNumberFormat",(e,t)=>{Eg.init(e,t),lc.init(e,t)});function so(e){return N0(Sb,e)}const Cb=P("ZodNull",(e,t)=>{Ig.init(e,t),Ne.init(e,t)});function Eb(e){return k0(Cb,e)}const Ib=P("ZodUnknown",(e,t)=>{Tg.init(e,t),Ne.init(e,t)});function ro(){return _0(Ib)}const Tb=P("ZodNever",(e,t)=>{zg.init(e,t),Ne.init(e,t)});function zb(e){return S0(Tb,e)}const Ab=P("ZodArray",(e,t)=>{Ag.init(e,t),Ne.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Or(r,n)),e.nonempty=r=>e.check(Or(1,r)),e.max=(r,n)=>e.check(ac(r,n)),e.length=(r,n)=>e.check(ic(r,n)),e.unwrap=()=>e.element});function Fs(e,t){return L0(Ab,e,t)}const Pb=P("ZodObject",(e,t)=>{Mg.init(e,t),Ne.init(e,t),fe(e,"shape",()=>t.shape),e.keyof=()=>ka(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ro()}),e.loose=()=>e.clone({...e._zod.def,catchall:ro()}),e.strict=()=>e.clone({...e._zod.def,catchall:zb()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Xf(e,r),e.safeExtend=r=>ex(e,r),e.merge=r=>tx(e,r),e.pick=r=>Yf(e,r),e.omit=r=>Jf(e,r),e.partial=(...r)=>sx(dc,e,r[0]),e.required=(...r)=>rx(uc,e,r[0])});function zs(e,t){const r={type:"object",shape:e??{},...Y(t)};return new Pb(r)}const Mb=P("ZodUnion",(e,t)=>{Rg.init(e,t),Ne.init(e,t),e.options=t.options});function cc(e,t){return new Mb({type:"union",options:e,...Y(t)})}const Rb=P("ZodIntersection",(e,t)=>{$g.init(e,t),Ne.init(e,t)});function $b(e,t){return new Rb({type:"intersection",left:e,right:t})}const Gn=P("ZodEnum",(e,t)=>{Lg.init(e,t),Ne.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Gn({...t,checks:[],...Y(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Gn({...t,checks:[],...Y(a),entries:i})}});function ka(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Gn({type:"enum",entries:r,...Y(t)})}const Lb=P("ZodTransform",(e,t)=>{Og.init(e,t),Ne.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Bl(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Vs(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(Vs(o))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function Ob(e){return new Lb({type:"transform",transform:e})}const dc=P("ZodOptional",(e,t)=>{Dg.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function no(e){return new dc({type:"optional",innerType:e})}const Db=P("ZodNullable",(e,t)=>{Fg.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ao(e){return new Db({type:"nullable",innerType:e})}const Fb=P("ZodDefault",(e,t)=>{Bg.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Bb(e,t){return new Fb({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Hl(t)}})}const Ub=P("ZodPrefault",(e,t)=>{Ug.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zb(e,t){return new Ub({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Hl(t)}})}const uc=P("ZodNonOptional",(e,t)=>{Zg.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Hb(e,t){return new uc({type:"nonoptional",innerType:e,...Y(t)})}const Wb=P("ZodCatch",(e,t)=>{Hg.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function qb(e,t){return new Wb({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Vb=P("ZodPipe",(e,t)=>{Wg.init(e,t),Ne.init(e,t),e.in=t.in,e.out=t.out});function io(e,t){return new Vb({type:"pipe",in:e,out:t})}const Qb=P("ZodReadonly",(e,t)=>{qg.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Gb(e){return new Qb({type:"readonly",innerType:e})}const Kb=P("ZodCustom",(e,t)=>{Vg.init(e,t),Ne.init(e,t)});function Yb(e,t={}){return O0(Kb,e,t)}function Jb(e){return D0(e)}const Xb=ka(["S","A","B","C","F"]),ev=ka(["new","purchased"]),tv=zs({id:Re(),name:Re(),grade:Xb,intent:Te(),prop:Re(),visit:Te(),price:Te(),status:ev,purchased_at:cc([Re(),Te(),Eb()]).optional(),purchased_by:Re().nullable().optional(),transaction_hash:Re().nullable().optional(),ai:Re(),remaining_hours:Te().nullable().optional(),x:Te().optional(),y:Te().optional(),created_at:Re().optional()}).passthrough(),mc=tv.extend({remainingHours:Te().optional()}),hc=zs({title:Re(),tags:Fs(Re()).optional().nullable(),view_count:Te().optional(),click_count:Te().optional(),fav_count:Te().optional(),thumb_color:Re().optional(),view:Te().optional(),click:Te().optional(),fav:Te().optional(),thumbColor:Re().optional()}).passthrough(),pc=zs({title:Re(),meta:Re(),body:Re(),created_at:Re().optional()}).passthrough(),fc=zs({points:Te(),quota:zs({s:Te(),a:Te()})});zs({user:fc,leads:Fs(mc),listings:Fs(hc),feed:Fs(pc)});const oo={TABLET:1024},_a={S:120,A:72,B:336,C:336,F:336},sv=(e,t)=>{if(!e)return 0;const r=_a[t]||336,n=new Date(e).getTime(),a=(Date.now()-n)/(1e3*60*60);return Math.max(0,Math.min(r,r-a))},rv=(e,t,r,n)=>{const a={points:e.points,quota:{s:e.quota_s,a:e.quota_a}},i=fc.safeParse(a);if(!i.success)throw console.error("Critical: User Data Validation Failed",i.error),new Error("Failed to load user profile");const o=t.map(c=>{let m=c.remaining_hours!=null?Number(c.remaining_hours):null;return m==null&&c.purchased_at&&c.status==="purchased"&&(m=sv(c.purchased_at,c.grade)),{...c,grade:c.grade,status:c.status,...m!=null?{remainingHours:m}:{}}}).filter(c=>{const m=mc.safeParse(c);return m.success?!0:(console.warn(`Skipping invalid lead (${c.id}):`,m.error.flatten()),!1)}),l=r.map(c=>({...c,title:c.title,tags:c.tags??[],view:c.view_count??0,click:c.click_count??0,fav:c.fav_count??0,thumbColor:c.thumb_color??"#e5e7eb"})).filter(c=>{const m=hc.safeParse(c);return m.success?!0:(console.warn("Skipping invalid listing:",m.error.flatten()),!1)}),d=n.filter(c=>{const m=pc.safeParse(c);return m.success?!0:(console.warn("Skipping invalid feed post:",m.error.flatten()),!1)});return{user:i.data,leads:o,listings:l,feed:d}};class Dr{static async fetchAppData(t){const[r,n,a,i]=await Promise.all([le.from("users").select("points, quota_s, quota_a").single(),le.from("leads").select("*"),le.from("listings").select("*").eq("agent_id",t),le.from("feed").select("*").order("created_at",{ascending:!1}).limit(5)]);if(r.error)throw r.error;if(n.error)throw n.error;if(a.error)throw a.error;if(i.error)throw i.error;return rv(r.data,n.data,a.data,i.data)}static async fetchPropertyViewStats(t){try{const{data:r,error:n}=await le.rpc("get_agent_property_stats",{p_agent_id:t});return n?(console.warn("PropertyViewStats RPC error, using fallback:",n),await Dr.fetchPropertyViewStatsFallback(t)):r||[]}catch(r){return console.error("fetchPropertyViewStats error:",r),[]}}static async fetchPropertyViewStatsFallback(t){const{data:r,error:n}=await le.from("properties").select("public_id").eq("agent_id",t);if(n||!(r!=null&&r.length))return[];const a=r.map(c=>c.public_id),{data:i,error:o}=await le.from("uag_events").select("property_id, session_id, duration, actions").in("property_id",a);if(o||!i)return[];const l=new Map;for(const c of i){const m=c.property_id;l.has(m)||l.set(m,{property_id:m,view_count:0,unique_sessions:0,total_duration:0,line_clicks:0,call_clicks:0});const u=l.get(m);u.view_count++,u.total_duration+=c.duration||0;const x=c.actions;x!=null&&x.click_line&&u.line_clicks++,x!=null&&x.click_call&&u.call_clicks++}const d=new Map;for(const c of i)d.has(c.property_id)||d.set(c.property_id,new Set),d.get(c.property_id).add(c.session_id);for(const[c,m]of d){const u=l.get(c);u&&(u.unique_sessions=m.size)}return Array.from(l.values())}static async purchaseLead(t,r,n,a){const{error:i}=await le.rpc("purchase_lead",{p_user_id:t,p_lead_id:r,p_cost:n,p_grade:a});if(i)throw i}}const nv={user:{points:1280,quota:{s:2,a:3}},leads:[{id:"S-5566",name:" S-5566",grade:"S",intent:98,prop:"",visit:15,price:20,status:"purchased",purchased_at:Date.now()-2*36e5,ai:"S ",remainingHours:118},{id:"S-9011",name:" S-9011",grade:"S",intent:93,prop:"",visit:11,price:20,status:"purchased",purchased_at:Date.now()-6*36e5,ai:"",remainingHours:114},{id:"A-7788",name:" A-7788",grade:"A",intent:79,prop:"",visit:6,price:10,status:"purchased",purchased_at:Date.now()-20*36e5,ai:"A ",remainingHours:52},{id:"A-6600",name:" A-6600",grade:"A",intent:74,prop:"",visit:5,price:10,status:"purchased",purchased_at:Date.now()-10*36e5,ai:"",remainingHours:62},{id:"B218",name:" B218",grade:"S",intent:92,prop:" 3 ",visit:7,price:20,status:"new",ai:" ",x:25,y:25},{id:"A103",name:" A103",grade:"S",intent:88,prop:" 12F",visit:12,price:20,status:"new",ai:"",x:15,y:45},{id:"S901",name:" S901",grade:"S",intent:94,prop:"",visit:9,price:20,status:"new",ai:"",x:40,y:32},{id:"S880",name:" S880",grade:"S",intent:90,prop:"",visit:8,price:20,status:"new",ai:"",x:60,y:40},{id:"C055",name:" C055",grade:"A",intent:75,prop:"",visit:4,price:10,status:"new",ai:"A ",x:60,y:20},{id:"A230",name:" A230",grade:"A",intent:71,prop:" 3 ",visit:3,price:10,status:"new",ai:"",x:70,y:30},{id:"A550",name:" A550",grade:"A",intent:69,prop:"",visit:3,price:10,status:"new",ai:"",x:50,y:15},{id:"D330",name:" D330",grade:"B",intent:62,prop:"",visit:3,price:3,status:"new",ai:"",x:40,y:60},{id:"B778",name:" B778",grade:"B",intent:58,prop:"",visit:2,price:3,status:"new",ai:"",x:30,y:70},{id:"C021",name:" C021",grade:"C",intent:48,prop:"",visit:2,price:1,status:"new",ai:"",x:75,y:55},{id:"C990",name:" C990",grade:"C",intent:42,prop:"",visit:1,price:1,status:"new",ai:"",x:82,y:65},{id:"H009",name:" H009",grade:"F",intent:28,prop:"",visit:1,price:.5,status:"new",ai:"",x:70,y:75},{id:"F778",name:" F778",grade:"F",intent:22,prop:"",visit:1,price:.5,status:"new",ai:"",x:55,y:80}],listings:[{title:"12/15F ",tags:["","",""],view:1284,click:214,fav:37,thumbColor:"#eef2ff"},{title:" 3 ",tags:["",""],view:986,click:163,fav:22,thumbColor:"#f0fdf4"},{title:"3",tags:["",""],view:846,click:128,fav:15,thumbColor:"#fff7ed"}],feed:[{title:"12F ",meta:"",body:""},{title:"",meta:" 41",body:" 9 "}]},lo=(e,t)=>e.grade==="S"&&t.quota.s<=0?{valid:!1,error:"S "}:e.grade==="A"&&t.quota.a<=0?{valid:!1,error:"A "}:{valid:!0};function av(){var u,x;const{session:e}=Dl(),[t,r]=h.useState(!0),n=Vr();h.useEffect(()=>{if(typeof window>"u")return;const b=new URLSearchParams(window.location.search).get("mode");let g=!0;if(b==="mock"||b==="live")g=b==="mock",localStorage.setItem("uag_mode",b);else{const y=localStorage.getItem("uag_mode");(y==="mock"||y==="live")&&(g=y==="mock")}r(g)},[]);const a=()=>{{J.error("");return}},{data:i,isLoading:o,error:l,refetch:d}=Go({queryKey:["uagData",t,(u=e==null?void 0:e.user)==null?void 0:u.id],queryFn:async()=>{var p;if(t)return nv;if(!((p=e==null?void 0:e.user)!=null&&p.id))throw new Error("Not authenticated");return Dr.fetchAppData(e.user.id)},enabled:t||!!((x=e==null?void 0:e.user)!=null&&x.id),staleTime:1e3*10,refetchInterval:t?!1:3e4}),c=Ds({mutationFn:async({leadId:p,cost:b,grade:g})=>{var y;if(t){await new Promise(f=>setTimeout(f,500));return}if(!((y=e==null?void 0:e.user)!=null&&y.id))throw new Error("Not authenticated");await Dr.purchaseLead(e.user.id,p,b,g)},onMutate:async({leadId:p,cost:b,grade:g})=>{var f,j;await n.cancelQueries({queryKey:["uagData"]});const y=n.getQueryData(["uagData",t,(f=e==null?void 0:e.user)==null?void 0:f.id]);if(y){const S=y.leads.find(I=>I.id===p);if(S){const{valid:I,error:k}=lo(S,y.user);if(!I)throw J.error(k||""),new Error(k||" (Optimistic Check)")}const N={...y,user:{...y.user,points:y.user.points-b,quota:{...y.user.quota,s:g==="S"?y.user.quota.s-1:y.user.quota.s,a:g==="A"?y.user.quota.a-1:y.user.quota.a}},leads:y.leads.map(I=>I.id===p?{...I,status:"purchased",remainingHours:_a[g]||48}:I)};n.setQueryData(["uagData",t,(j=e==null?void 0:e.user)==null?void 0:j.id],N)}return{previousData:y}},onError:(p,b,g)=>{var y;g!=null&&g.previousData&&n.setQueryData(["uagData",t,(y=e==null?void 0:e.user)==null?void 0:y.id],g.previousData),J.error(`: ${p instanceof Error?p.message:"Unknown error"}`)},onSettled:()=>{n.invalidateQueries({queryKey:["uagData"]})}});return{data:i,isLoading:o,error:l,buyLead:async p=>{if(!i||c.isPending)return;const b=i.leads.find(j=>j.id===p);if(!b){J.error("");return}if(b.status!=="new"){J.error("");return}const{valid:g,error:y}=lo(b,i.user);if(!g){J.error(y||"");return}const f=b.price||10;if(i.user.points<f){J.error("");return}c.mutate({leadId:p,cost:f,grade:b.grade},{onSuccess:()=>{J.success("")}})},isBuying:c.isPending,useMock:t,toggleMode:a,refetch:d}}function iv(e,t){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e(...n),t)}}function ov(){const[e,t]=h.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return h.useEffect(()=>{if(typeof window>"u")return;const r=iv(()=>{t({width:window.innerWidth,height:window.innerHeight})},150);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function lv(){const[e,t]=h.useState(null),{width:r}=ov();h.useEffect(()=>{r>oo.TABLET&&e&&t(null)},[r,e]);const n=h.useCallback(i=>{t(i),requestAnimationFrame(()=>{var o;window.innerWidth<=oo.TABLET&&((o=document.getElementById("action-panel-container"))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))})},[]),a=h.useCallback(()=>t(null),[]);return{selectedLead:e,selectLead:n,close:a}}const cv=()=>s.jsx("header",{className:R["uag-header"],children:s.jsxs("div",{className:R["uag-header-inner"],children:[s.jsxs("div",{className:R["uag-logo"],children:[s.jsx("div",{className:R["uag-logo-badge"],children:""}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:R["uag-breadcrumb"],children:[s.jsx("span",{children:" 21"}),s.jsx("span",{className:`${R["uag-badge"]} ${R["uag-badge--pro"]}`,children:" PRO"})]})]})}),dv=({user:e,useMock:t,toggleMode:r})=>s.jsxs("div",{className:R["uag-footer-bar"],children:[s.jsxs("div",{style:{marginRight:"auto",fontSize:"12px",color:"var(--ink-300)"},children:["",s.jsx("strong",{style:{color:t?"#f59e0b":"#16a34a"},children:t?"Local Mock":"Live API"}),s.jsx("button",{onClick:r,style:{marginLeft:"10px",fontSize:"10px",cursor:"pointer",border:"1px solid #ccc",padding:"2px 6px",borderRadius:"4px"},children:""})]}),s.jsx("button",{className:R["uag-btn"],children:""}),s.jsx("button",{className:`${R["uag-btn"]} ${R.primary}`,children:""}),s.jsxs("span",{className:R["uag-badge"],style:{fontSize:"14px",background:"#fff8dc",color:"#92400e",borderColor:"#fcd34d"},children:[" ",s.jsx("span",{id:"user-points",children:e.points})]})]}),uv=()=>s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"animate-pulse flex space-x-4 justify-center",children:s.jsxs("div",{className:"flex-1 space-y-4 py-1 max-w-md",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mx-auto"})]})]})}),s.jsx("div",{className:"mt-4 text-gray-500",children:"..."})]}),mv=({error:e,resetErrorBoundary:t})=>s.jsxs("div",{role:"alert",className:"p-6 text-center text-red-600",children:[s.jsx("p",{className:"font-bold text-lg mb-2",children:""}),s.jsx("pre",{className:"bg-red-50 p-4 rounded text-sm mb-4 overflow-auto max-w-lg mx-auto",children:e.message}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:""})]});function hv({leads:e,onSelectLead:t}){const r=e.filter(n=>n.status==="new");return s.jsxs("section",{className:`${R["uag-card"]} ${R["k-span-6"]}`,id:"radar-section",style:{minHeight:"450px"},children:[s.jsxs("div",{className:R["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:R["uag-card-title"],children:"UAG "}),s.jsx("div",{className:R["uag-card-sub"],children:"S/A B/C/F "})]}),s.jsx("div",{className:R["uag-actions"],style:{gap:"4px"}})]}),s.jsxs("div",{className:R["uag-cluster"],id:"radar-container",children:[s.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"300px",height:"300px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),s.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"150px",height:"150px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),s.jsxs("div",{style:{position:"absolute",left:"16px",top:"16px",background:"rgba(255,255,255,0.9)",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",color:"#0f172a",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0",zIndex:5},children:[s.jsx("span",{style:{width:"8px",height:"8px",background:"#22c55e",borderRadius:"50%",display:"inline-block",marginRight:"4px"}}),s.jsx("span",{style:{fontWeight:700},children:"Live "})]}),r.map(n=>{const a=n.x!=null?n.x:50,i=n.y!=null?n.y:50,o=n.grade==="S"?120:n.grade==="A"?100:n.grade==="B"?90:n.grade==="C"?80:60,l=5+Math.random()*3+"s";return s.jsxs("div",{className:R["uag-bubble"],"data-grade":n.grade,role:"button","aria-label":`${n.name||n.id} - ${n.grade}`,tabIndex:0,style:{"--w":o+"px","--float":l,left:a+"%",top:i+"%"},onClick:()=>t(n),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&t(n)},children:[s.jsx("div",{className:R["uag-bubble-grade"],style:{background:`var(--grade-${n.grade.toLowerCase()})`,color:"#fff"},children:n.grade}),s.jsxs("div",{style:{textAlign:"center",lineHeight:1.2},children:[s.jsx("div",{style:{fontWeight:800,fontSize:"14px"},children:n.id}),s.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:[n.intent,"%"]})]}),s.jsx("div",{className:R["uag-bubble-label"],children:n.prop})]},n.id)})]})]})}const jr=({label:e,value:t,highlight:r=!1})=>s.jsxs("div",{className:R["ap-stat"],children:[s.jsx("span",{children:e}),s.jsx("b",{style:r?{color:"var(--uag-brand)"}:{},children:t})]}),pv=h.forwardRef(({selectedLead:e,onBuyLead:t,isProcessing:r},n)=>{const[a,i]=h.useState(!1);if(h.useEffect(()=>{i(!1)},[e]),!e)return s.jsx("section",{className:R["k-span-6"],id:"action-panel-container",ref:n,children:s.jsx("div",{className:R["uag-action-panel"],id:"action-panel",children:s.jsx("div",{style:{height:"100%",minHeight:"200px",display:"grid",placeItems:"center",color:"var(--ink-300)",textAlign:"center",padding:"40px 20px"},children:s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:""}),s.jsxs("div",{children:["",s.jsx("br",{}),""]})]})})})});const o=e.grade==="S"||e.grade==="A",l=()=>{i(!0)},d=()=>{t(e.id),i(!1)},c=()=>{i(!1)};return s.jsx("section",{className:R["k-span-6"],id:"action-panel-container",ref:n,children:s.jsxs("div",{className:R["uag-action-panel"],id:"action-panel",children:[s.jsx("div",{className:R["ap-head"],children:s.jsxs("span",{className:`${R["uag-badge"]} ${R["uag-badge--"+e.grade.toLowerCase()]}`,children:[e.grade,"",e.name]})}),s.jsxs("div",{className:R["ap-body"],children:[s.jsxs("div",{className:R["ap-stats-group"],children:[s.jsx(jr,{label:"",value:e.prop}),s.jsx(jr,{label:"",value:`${e.intent}%`,highlight:!0}),s.jsx(jr,{label:"",value:`${e.visit} `}),s.jsx(jr,{label:"",value:`${e.price} `})]}),s.jsx("div",{className:`${R["ai-box"]} ${R.urgent}`,children:s.jsx("div",{children:e.ai})}),s.jsxs("div",{className:R["action-zone"],children:[o&&s.jsx("div",{style:{background:"#fff7ed",color:"#ea580c",fontWeight:700,fontSize:"12px",textAlign:"center",padding:"6px",borderRadius:"4px",border:"1px solid #ffedd5",marginBottom:"10px"},children:"  "}),a?s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("button",{className:R["btn-attack"],style:{background:"#ef4444",flex:1},onClick:d,disabled:r,children:r?"...":` ${e.price} ?`}),s.jsx("button",{className:R["btn-attack"],style:{background:"#94a3b8",flex:1},onClick:c,disabled:r,children:""})]}):s.jsx("button",{className:R["btn-attack"],onClick:l,disabled:r,children:r?"...":"  (/)"}),s.jsxs("div",{style:{textAlign:"center",fontSize:"11px",color:"#94a3b8",marginTop:"8px"},children:["/",s.jsx("br",{}),""]})]})]})]})})}),fv=e=>{const t=_a[e.grade]??336,r=e.remainingHours??t,n=Math.max(0,Math.min(100,r/t*100)),a=e.grade==="S"||e.grade==="A";let i="";return a?i=`${r.toFixed(1)} `:i=`${(r/24).toFixed(1)} `,{total:t,remaining:r,percent:n,isExclusive:a,timeDisplay:i}};function xv({leads:e}){const t=e.filter(r=>r.status==="purchased");return s.jsxs("section",{className:`${R["uag-card"]} ${R["k-span-6"]}`,children:[s.jsxs("div",{className:R["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:R["uag-card-title"],children:""}),s.jsx("div",{className:R["uag-card-sub"],children:"S  120hr / A  72hr B/C/F  14 "})]}),s.jsx("div",{className:R["uag-actions"],children:s.jsx("button",{className:R["uag-btn"],children:""})})]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{className:R["monitor-table"],children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"25%"},children:"/"}),s.jsx("th",{style:{width:"35%"},children:""}),s.jsx("th",{style:{width:"20%"},children:""}),s.jsx("th",{style:{width:"20%"},children:""})]})}),s.jsx("tbody",{id:"asset-list",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:""})}):t.map(r=>{const{percent:n,isExclusive:a,timeDisplay:i}=fv(r),o=`var(--grade-${r.grade.toLowerCase()})`,l=a?"":"";return s.jsxs("tr",{children:[s.jsx("td",{"data-label":"/",children:s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("span",{style:{display:"inline-grid",placeItems:"center",width:"24px",height:"24px",borderRadius:"50%",fontSize:"11px",fontWeight:900,color:"#fff",marginRight:"8px",background:o},children:r.grade}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:800,color:"var(--ink-100)"},children:r.name}),s.jsx("div",{style:{fontSize:"11px",color:"var(--ink-300)"},children:r.prop})]})]})}),s.jsxs("td",{"data-label":"",children:[s.jsxs("div",{style:{fontSize:"11px",fontWeight:700,marginBottom:"2px",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{color:o},children:l}),s.jsx("span",{className:R["t-countdown"],children:i})]}),s.jsx("div",{className:R["progress-bg"],children:s.jsx("div",{className:R["progress-fill"],style:{width:`${n}%`,background:o}})})]}),s.jsx("td",{"data-label":"",children:s.jsx("span",{className:R["uag-badge"],style:{background:"#f0fdf4",color:"#16a34a",border:"none"},children:""})}),s.jsx("td",{"data-label":"",children:s.jsx("button",{className:`${R["uag-btn"]} ${R.primary}`,style:{padding:"4px 12px",fontSize:"12px"},children:" / "})})]},r.id)})})]})})]})}function gv({listings:e,feed:t}){return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`${R["uag-card"]} ${R["k-span-3"]}`,children:[s.jsxs("div",{className:R["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:R["uag-card-title"],children:""}),s.jsx("div",{className:R["uag-card-sub"],children:""})]}),s.jsx("div",{className:R["uag-actions"],children:s.jsxs(Bs,{to:"/property/upload",className:R["uag-btn"],style:{display:"inline-flex",alignItems:"center",gap:"4px",textDecoration:"none"},children:[s.jsx(Cr,{size:14}),""]})})]}),s.jsx("div",{id:"listing-container",children:e.length===0?s.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:""}):e.map((r,n)=>{var a,i;return s.jsx("article",{className:R["listing-item"],children:n===0?s.jsxs(Bs,{to:"/property/MH-100001",style:{display:"contents",textDecoration:"none",color:"inherit"},children:[s.jsx("div",{className:R["l-thumb"],style:{background:r.thumbColor}}),s.jsxs("div",{children:[s.jsx("div",{className:R["l-title"],children:r.title}),s.jsx("div",{className:R["l-tags"],children:(a=r.tags)==null?void 0:a.map((o,l)=>s.jsx("span",{className:R["l-tag"],children:o},l))}),s.jsxs("div",{className:R["l-kpi"],children:[s.jsxs("span",{children:[" ",s.jsx("b",{children:r.view})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.click})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.fav})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:R["l-thumb"],style:{background:r.thumbColor}}),s.jsxs("div",{children:[s.jsx("div",{className:R["l-title"],children:r.title}),s.jsx("div",{className:R["l-tags"],children:(i=r.tags)==null?void 0:i.map((o,l)=>s.jsx("span",{className:R["l-tag"],children:o},l))}),s.jsxs("div",{className:R["l-kpi"],children:[s.jsxs("span",{children:[" ",s.jsx("b",{children:r.view})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.click})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.fav})]})]})]})]})},n)})})]}),s.jsxs("section",{className:`${R["uag-card"]} ${R["k-span-3"]}`,children:[s.jsxs("div",{className:R["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:R["uag-card-title"],children:""}),s.jsx("div",{className:R["uag-card-sub"],children:""})]}),s.jsx("div",{className:R["uag-actions"],children:s.jsx("button",{className:R["uag-btn"],children:""})})]}),s.jsx("div",{id:"feed-container",children:t.length===0?s.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:""}):t.map((r,n)=>s.jsxs("article",{className:R["feed-post"],children:[s.jsx("div",{className:R["fp-title"],children:r.title}),s.jsx("div",{className:R["fp-meta"],children:r.meta}),s.jsx("div",{className:R["fp-body"],children:r.body})]},n))})]})]})}const bv="_reportContainer_exvqp_4",vv="_reportStep_exvqp_9",yv="_reportStepHeader_exvqp_15",wv="_reportStepBadge_exvqp_27",jv="_reportStepHint_exvqp_36",Nv="_reportBackBtn_exvqp_42",kv="_reportImportSection_exvqp_62",_v="_reportImportBtn_exvqp_66",Sv="_reportDivider_exvqp_97",Cv="_reportListings_exvqp_114",Ev="_reportListingItem_exvqp_122",Iv="_reportListingThumb_exvqp_140",Tv="_reportListingInfo_exvqp_152",zv="_reportListingTitle_exvqp_157",Av="_reportListingMeta_exvqp_166",Pv="_reportListingArrow_exvqp_180",Mv="_reportSelectedProperty_exvqp_186",Rv="_reportStyles_exvqp_199",$v="_reportStyleItem_exvqp_205",Lv="_selected_exvqp_222",Ov="_reportStyleIcon_exvqp_227",Dv="_reportStyleInfo_exvqp_231",Fv="_reportStyleTitle_exvqp_235",Bv="_reportStyleDesc_exvqp_241",Uv="_reportStyleCheck_exvqp_247",Zv="_reportHighlights_exvqp_252",Hv="_reportHighlightItem_exvqp_260",Wv="_reportHighlightIcon_exvqp_282",qv="_reportHighlightInfo_exvqp_286",Vv="_reportHighlightTitle_exvqp_290",Qv="_reportHighlightDesc_exvqp_296",Gv="_reportHighlightCheck_exvqp_302",Kv="_reportHighlightUnchecked_exvqp_306",Yv="_reportStepFooter_exvqp_318",Jv="_reportNextBtn_exvqp_328",Xv="_reportPhoneFrame_exvqp_349",ey="_reportPhoneNotch_exvqp_360",ty="_reportPhoneContent_exvqp_372",sy="_reportPreviewHero_exvqp_381",ry="_reportPreviewHeroImg_exvqp_390",ny="_reportPreviewHeroOverlay_exvqp_394",ay="_reportPreviewPrice_exvqp_404",iy="_reportPreviewTitle_exvqp_409",oy="_reportPreviewSpecs_exvqp_415",ly="_reportPreviewMortgage_exvqp_432",cy="_reportPreviewMortgageLabel_exvqp_438",dy="_reportPreviewMortgageValue_exvqp_443",uy="_reportPreviewHighlights_exvqp_449",my="_reportPreviewHighlight_exvqp_449",hy="_reportPreviewAgent_exvqp_477",py="_reportPreviewAgentAvatar_exvqp_486",fy="_reportPreviewAgentInfo_exvqp_497",xy="_reportGenerateBtn_exvqp_512",gy="_reportSuccess_exvqp_541",by="_reportSuccessIcon_exvqp_546",vy="_reportUrlBox_exvqp_557",yy="_reportUrlInput_exvqp_565",wy="_reportUrlCopy_exvqp_575",jy="_reportShareButtons_exvqp_592",Ny="_reportShareBtnPrimary_exvqp_599",ky="_reportShareBtnLine_exvqp_600",_y="_reportPreviewLink_exvqp_634",Sy="_reportResetBtn_exvqp_656",F={reportContainer:bv,reportStep:vv,reportStepHeader:yv,reportStepBadge:wv,reportStepHint:jv,reportBackBtn:Nv,reportImportSection:kv,reportImportBtn:_v,reportDivider:Sv,reportListings:Cv,reportListingItem:Ev,reportListingThumb:Iv,reportListingInfo:Tv,reportListingTitle:zv,reportListingMeta:Av,reportListingArrow:Pv,reportSelectedProperty:Mv,reportStyles:Rv,reportStyleItem:$v,selected:Lv,reportStyleIcon:Ov,reportStyleInfo:Dv,reportStyleTitle:Fv,reportStyleDesc:Bv,reportStyleCheck:Uv,reportHighlights:Zv,reportHighlightItem:Hv,reportHighlightIcon:Wv,reportHighlightInfo:qv,reportHighlightTitle:Vv,reportHighlightDesc:Qv,reportHighlightCheck:Gv,reportHighlightUnchecked:Kv,reportStepFooter:Yv,reportNextBtn:Jv,reportPhoneFrame:Xv,reportPhoneNotch:ey,reportPhoneContent:ty,reportPreviewHero:sy,reportPreviewHeroImg:ry,reportPreviewHeroOverlay:ny,reportPreviewPrice:ay,reportPreviewTitle:iy,reportPreviewSpecs:oy,reportPreviewMortgage:ly,reportPreviewMortgageLabel:cy,reportPreviewMortgageValue:dy,reportPreviewHighlights:uy,reportPreviewHighlight:my,reportPreviewAgent:hy,reportPreviewAgentAvatar:py,reportPreviewAgentInfo:fy,reportGenerateBtn:xy,reportSuccess:gy,reportSuccessIcon:by,reportUrlBox:vy,reportUrlInput:yy,reportUrlCopy:wy,reportShareButtons:jy,reportShareBtnPrimary:Ny,reportShareBtnLine:ky,reportPreviewLink:_y,reportResetBtn:Sy},Cy={id:"demo-001",title:" 12F322",address:" 168 ",district:"",price:3288e4,pricePerPing:521e3,size:67.3,rooms:"322",floor:"12F/15F",age:5,direction:"",parking:"",managementFee:3500,community:"",communityYear:2019,communityUnits:280,images:[],highlights:[{id:"commute",icon:"",title:"",description:" 5 ",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"view",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:"7-11  3 ",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1}]},Ey=[Cy,{id:"demo-002",title:"423",address:" 256 ",district:"",price:88e6,pricePerPing:112e4,size:78.5,rooms:"423",floor:"18F/22F",age:3,direction:"",parking:"",managementFee:6800,community:"",communityYear:2021,communityUnits:156,images:[],highlights:[{id:"commute",icon:"",title:"",description:" 3 ",selected:!0},{id:"view",icon:"",title:"",description:" 101",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:" 5 ",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1}]},{id:"demo-003",title:"211",address:" 88 ",district:"",price:245e5,pricePerPing:68e4,size:36,rooms:"211",floor:"5F/12F",age:15,direction:"",parking:"",managementFee:2200,community:"",communityYear:2009,communityUnits:88,images:[],highlights:[{id:"amenity",icon:"",title:"",description:"SOGO",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"commute",icon:"",title:"",description:"",selected:!1},{id:"view",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1}]}],Iy=[{id:"simple",icon:"",title:"",desc:""},{id:"investment",icon:"",title:"",desc:""},{id:"marketing",icon:"",title:"",desc:""}];function Ty({listings:e=[]}){const[t,r]=h.useState(1),[n,a]=h.useState(null),[i,o]=h.useState("simple"),[l,d]=h.useState([]),[c,m]=h.useState(""),[u,x]=h.useState(!1),p=h.useRef(null),b=_=>_>=1e8?`${(_/1e8).toFixed(2)} `:`${(_/1e4).toFixed(0)} `,g=(_,L=.2,U=30,z=.021)=>{const W=_*(1-L),H=z/12,Z=U*12,ce=W*(H*Math.pow(1+H,Z))/(Math.pow(1+H,Z)-1);return Math.round(ce)},y=_=>{a(_),d(_.highlights),r(2)},f=_=>{o(_),r(3)},j=_=>{const L=l.filter(U=>U.selected).length;d(U=>U.map(z=>z.id===_?!z.selected&&L>=3?(J.error(" 3 "),z):{...z,selected:!z.selected}:z))},S=()=>{if(l.filter(L=>L.selected).length<1){J.error(" 1 ");return}r(4)},N=async()=>{if(!n)return;x(!0);const _=J.loading("...");try{await new Promise(z=>setTimeout(z,1500));const L=`R-${Date.now().toString(36).toUpperCase()}`,U=`${window.location.origin}/r/${L}`;m(U),r(5),J.success("",void 0,{id:_})}catch{J.error("",void 0,{id:_})}finally{x(!1)}},I=async()=>{try{await navigator.clipboard.writeText(c),J.success(" LINE")}catch{J.error("")}},k=()=>{const _=encodeURIComponent(`${n==null?void 0:n.title}

 

${c}`);window.open(`https://line.me/R/msg/text/?${_}`,"_blank")},M=()=>{r(1),a(null),o("simple"),d([]),m("")},C=()=>{var _;(_=p.current)==null||_.click()},D=async _=>{var z;if(!((z=_.target.files)==null?void 0:z[0]))return;const U=J.loading("AI ...");try{await new Promise(H=>setTimeout(H,2e3));const W={id:"detected-001",title:" 18F",address:"",district:"",price:188e6,pricePerPing:156e4,size:120.5,rooms:"434",floor:"18F/24F",age:10,direction:"",parking:"",managementFee:15e3,community:"",communityYear:2014,communityUnits:52,images:[],highlights:[{id:"view",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"renovated",icon:"",title:"",description:"",selected:!0},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:"",selected:!1},{id:"commute",icon:"",title:"",description:" 8 ",selected:!1},{id:"school",icon:"",title:"",description:"",selected:!1}]};a(W),d(W.highlights),r(2),J.success("AI ",void 0,{id:U})}catch{J.error("",void 0,{id:U})}},w=()=>s.jsxs("div",{className:F.reportStep,children:[s.jsxs("div",{className:F.reportStepHeader,children:[s.jsx("span",{className:F.reportStepBadge,children:"1/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:F.reportImportSection,children:[s.jsx("input",{type:"file",ref:p,style:{display:"none"},accept:"image/*",onChange:D}),s.jsxs("button",{className:F.reportImportBtn,onClick:C,children:[s.jsx(zo,{size:20}),s.jsx("span",{children:""}),s.jsx("small",{children:"AI "})]})]}),s.jsx("div",{className:F.reportDivider,children:s.jsx("span",{children:""})}),s.jsx("div",{className:F.reportListings,children:Ey.map(_=>s.jsxs("button",{className:F.reportListingItem,onClick:()=>y(_),children:[s.jsx("div",{className:F.reportListingThumb,children:s.jsx(He,{size:24})}),s.jsxs("div",{className:F.reportListingInfo,children:[s.jsx("div",{className:F.reportListingTitle,children:_.title}),s.jsxs("div",{className:F.reportListingMeta,children:[s.jsxs("span",{children:[s.jsx(Xs,{size:12})," ",_.district]}),s.jsxs("span",{children:[s.jsx(Hr,{size:12})," ",b(_.price)]})]})]}),s.jsx(Ft,{size:20,className:F.reportListingArrow})]},_.id))})]}),T=()=>s.jsxs("div",{className:F.reportStep,children:[s.jsxs("div",{className:F.reportStepHeader,children:[s.jsx("button",{className:F.reportBackBtn,onClick:()=>r(1),children:s.jsx(Nr,{size:20})}),s.jsx("span",{className:F.reportStepBadge,children:"2/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:F.reportSelectedProperty,children:[s.jsx(He,{size:18}),s.jsx("span",{children:n==null?void 0:n.title})]}),s.jsx("div",{className:F.reportStyles,children:Iy.map(_=>s.jsxs("button",{className:`${F.reportStyleItem} ${i===_.id?F.selected:""}`,onClick:()=>f(_.id),children:[s.jsx("span",{className:F.reportStyleIcon,children:_.icon}),s.jsxs("div",{className:F.reportStyleInfo,children:[s.jsx("div",{className:F.reportStyleTitle,children:_.title}),s.jsx("div",{className:F.reportStyleDesc,children:_.desc})]}),i===_.id&&s.jsx(tt,{size:20,className:F.reportStyleCheck})]},_.id))})]}),O=()=>s.jsxs("div",{className:F.reportStep,children:[s.jsxs("div",{className:F.reportStepHeader,children:[s.jsx("button",{className:F.reportBackBtn,onClick:()=>r(2),children:s.jsx(Nr,{size:20})}),s.jsx("span",{className:F.reportStepBadge,children:"3/4"}),s.jsx("h3",{children:" 3 "})]}),s.jsx("p",{className:F.reportStepHint,children:""}),s.jsx("div",{className:F.reportHighlights,children:l.map(_=>s.jsxs("button",{className:`${F.reportHighlightItem} ${_.selected?F.selected:""}`,onClick:()=>j(_.id),children:[s.jsx("span",{className:F.reportHighlightIcon,children:_.icon}),s.jsxs("div",{className:F.reportHighlightInfo,children:[s.jsx("div",{className:F.reportHighlightTitle,children:_.title}),s.jsx("div",{className:F.reportHighlightDesc,children:_.description})]}),s.jsx("div",{className:F.reportHighlightCheck,children:_.selected?s.jsx(tt,{size:20}):s.jsx("div",{className:F.reportHighlightUnchecked})})]},_.id))}),s.jsxs("div",{className:F.reportStepFooter,children:[s.jsxs("span",{children:[" ",l.filter(_=>_.selected).length,"/3"]}),s.jsxs("button",{className:F.reportNextBtn,onClick:S,children:[" ",s.jsx(Ft,{size:18})]})]})]}),A=()=>{if(!n)return null;const _=l.filter(U=>U.selected),L=g(n.price);return s.jsxs("div",{className:F.reportStep,children:[s.jsxs("div",{className:F.reportStepHeader,children:[s.jsx("button",{className:F.reportBackBtn,onClick:()=>r(3),children:s.jsx(Nr,{size:20})}),s.jsx("span",{className:F.reportStepBadge,children:"4/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:F.reportPhoneFrame,children:[s.jsx("div",{className:F.reportPhoneNotch}),s.jsxs("div",{className:F.reportPhoneContent,children:[s.jsxs("div",{className:F.reportPreviewHero,children:[s.jsx("div",{className:F.reportPreviewHeroImg,children:s.jsx(He,{size:48})}),s.jsxs("div",{className:F.reportPreviewHeroOverlay,children:[s.jsxs("div",{className:F.reportPreviewPrice,children:["NT$ ",b(n.price)]}),s.jsx("div",{className:F.reportPreviewTitle,children:n.title})]})]}),s.jsxs("div",{className:F.reportPreviewSpecs,children:[s.jsxs("div",{children:[s.jsx(Wc,{size:14})," ",n.size," "]}),s.jsxs("div",{children:[s.jsx(qc,{size:14})," ",n.floor]}),s.jsxs("div",{children:[s.jsx(ss,{size:14})," ",n.age," "]}),s.jsxs("div",{children:[s.jsx(Vc,{size:14})," ",n.direction]})]}),s.jsxs("div",{className:F.reportPreviewMortgage,children:[s.jsx("div",{className:F.reportPreviewMortgageLabel,children:" 8 30 "}),s.jsxs("div",{className:F.reportPreviewMortgageValue,children:[" NT$ ",L.toLocaleString()]})]}),s.jsx("div",{className:F.reportPreviewHighlights,children:_.map(U=>s.jsxs("div",{className:F.reportPreviewHighlight,children:[s.jsx("span",{children:U.icon}),s.jsxs("div",{children:[s.jsx("strong",{children:U.title}),s.jsx("p",{children:U.description})]})]},U.id))}),s.jsxs("div",{className:F.reportPreviewAgent,children:[s.jsx("div",{className:F.reportPreviewAgentAvatar,children:""}),s.jsxs("div",{className:F.reportPreviewAgentInfo,children:[s.jsx("strong",{children:""}),s.jsx("span",{children:"MaiHouses "})]})]})]})]}),s.jsx("button",{className:F.reportGenerateBtn,onClick:N,disabled:u,children:u?s.jsx(s.Fragment,{children:" ..."}):s.jsxs(s.Fragment,{children:[s.jsx(ta,{size:18})," "]})})]})},E=()=>s.jsxs("div",{className:F.reportStep,children:[s.jsxs("div",{className:F.reportStepHeader,children:[s.jsx("span",{className:F.reportStepBadge,children:""}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:F.reportSuccess,children:[s.jsx("div",{className:F.reportSuccessIcon,children:""}),s.jsx("p",{children:""})]}),s.jsxs("div",{className:F.reportUrlBox,children:[s.jsx("input",{type:"text",value:c,readOnly:!0,className:F.reportUrlInput}),s.jsx("button",{className:F.reportUrlCopy,onClick:I,children:s.jsx(vn,{size:18})})]}),s.jsxs("div",{className:F.reportShareButtons,children:[s.jsxs("button",{className:F.reportShareBtnPrimary,onClick:I,children:[s.jsx(vn,{size:18}),""]}),s.jsxs("button",{className:F.reportShareBtnLine,onClick:k,children:[s.jsx(Lt,{size:18}),"LINE "]})]}),s.jsxs("button",{className:F.reportPreviewLink,onClick:()=>window.open(c,"_blank"),children:[s.jsx(Zr,{size:16}),""]}),s.jsx("button",{className:F.reportResetBtn,onClick:M,children:""})]});return s.jsxs("section",{className:`${R["uag-card"]} ${R["k-span-3"]}`,children:[s.jsxs("div",{className:R["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:R["uag-card-title"],children:" "}),s.jsx("div",{className:R["uag-card-sub"],children:" Word "})]}),t>1&&t<5&&s.jsxs("button",{className:`${R["uag-btn"]} ${R.secondary}`,onClick:M,children:[s.jsx(As,{size:14})," "]})]}),s.jsxs("div",{className:F.reportContainer,children:[t===1&&w(),t===2&&T(),t===3&&O(),t===4&&A(),t===5&&E()]})]})}const co=[{id:"TR-2024-001",buyerId:"A103",buyerName:" A103",propertyTitle:" 12F",currentStep:3,status:"active",lastUpdate:Date.now()-30*6e4,offerPrice:315e5,events:[{id:"e1",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-2*864e5,hash:"9f2a...c8d1"},{id:"e2",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-1*864e5,hash:"b7aa...f3e2",detail:"GeoTag: "},{id:"e3",step:3,stepName:"M3 ",action:"",actor:"buyer",timestamp:Date.now()-30*6e4,hash:"1a7c...92b4",detail:" NT$31,500,000"}]},{id:"TR-2024-002",buyerId:"B218",buyerName:" B218",propertyTitle:" 3",currentStep:2,status:"active",lastUpdate:Date.now()-2*36e5,events:[{id:"e4",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-3*864e5,hash:"3c5d...a7b9"},{id:"e5",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-2*36e5,hash:"d8e2...1f4c",detail:" 11/30 14:00"}]},{id:"TR-2024-003",buyerId:"S901",buyerName:" S901",propertyTitle:"",currentStep:4,status:"active",lastUpdate:Date.now()-12*36e5,offerPrice:288e5,events:[{id:"e6",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-7*864e5,hash:"f1a2...b3c4"},{id:"e7",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-5*864e5,hash:"e5d6...c7f8"},{id:"e8",step:3,stepName:"M3 ",action:"",actor:"buyer",timestamp:Date.now()-3*864e5,hash:"a9b0...d1e2"},{id:"e9",step:4,stepName:"M4 ",action:"",actor:"agent",timestamp:Date.now()-12*36e5,hash:"c3d4...e5f6",detail:""}]}],uo=[{key:1,name:"M1 ",icon:Dt},{key:2,name:"M2 ",icon:yn},{key:3,name:"M3 ",icon:Hr},{key:4,name:"M4 ",icon:Wr},{key:5,name:"M5 ",icon:He}];function zy(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}function Ay(e){const t=Date.now()-e;return t<6e4?"":t<36e5?`${Math.floor(t/6e4)} `:t<864e5?`${Math.floor(t/36e5)} `:`${Math.floor(t/864e5)} `}function Py(e){switch(e){case"active":return{text:"",bg:"#dcfce7",color:"#16a34a"};case"completed":return{text:"",bg:"#dbeafe",color:"#2563eb"};case"pending":return{text:"",bg:"#fef3c7",color:"#d97706"};case"expired":return{text:"",bg:"#fee2e2",color:"#dc2626"}}}function My(){const[e,t]=h.useState(!0),[r,n]=h.useState([]),[a,i]=h.useState(null),[o,l]=h.useState(!1),[d,c]=h.useState(!1),m=h.useCallback(async()=>{l(!0);try{if(e){await new Promise(b=>setTimeout(b,300)),n(co);const p=co[0];!a&&p&&i(p.id)}else{const p=await fetch("/api/trust/cases");if(p.ok){const g=(await p.json()).cases||[];n(g),g.length>0&&!a&&i(g[0].id)}}}catch(p){console.error("Failed to load cases:",p)}finally{l(!1)}},[e,a]);h.useEffect(()=>{m()},[m]);const u=r.find(p=>p.id===a),x=(u==null?void 0:u.events.slice(-3).reverse())||[];return s.jsxs("section",{className:`${R["uag-card"]} ${R["k-span-3"]}`,children:[s.jsxs("div",{className:R["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:R["uag-card-title"],children:""}),s.jsxs("div",{className:R["uag-card-sub"],children:["",e&&s.jsx("span",{style:{marginLeft:8,color:"#f59e0b",fontSize:11},children:" Mock"})]})]}),s.jsxs("div",{className:R["uag-actions"],children:[s.jsxs("button",{className:R["uag-btn"],onClick:()=>t(!e),title:e?"":"",children:[s.jsx(bn,{size:14,style:{marginRight:4}}),e?"Mock":"Live"]}),s.jsx("button",{className:R["uag-btn"],onClick:m,disabled:o,children:s.jsx(La,{size:14,className:o?"animate-spin":""})})]})]}),r.length>0&&s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:4},children:[r.map(p=>{const b=p.id===a,g=Py(p.status);return s.jsxs("button",{onClick:()=>i(p.id),style:{padding:"8px 12px",borderRadius:8,border:b?"2px solid #1749d7":"1px solid #e2e8f0",background:b?"#eef2ff":"#fff",cursor:"pointer",textAlign:"left",minWidth:140,transition:"all 0.2s"},children:[s.jsx("div",{style:{fontSize:12,fontWeight:700,color:b?"#1749d7":"#334155",marginBottom:2},children:p.buyerName}),s.jsx("div",{style:{fontSize:11,color:"#64748b",marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:p.propertyTitle}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsxs("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:g.bg,color:g.color,fontWeight:600},children:["M",p.currentStep]}),s.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:Ay(p.lastUpdate)})]})]},p.id)}),s.jsx("button",{style:{padding:"8px 12px",borderRadius:8,border:"1px dashed #cbd5e1",background:"#f8fafc",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:60,color:"#64748b"},onClick:()=>{},children:s.jsx(Cr,{size:16})})]}),u&&s.jsx("div",{style:{display:"flex",alignItems:"center",gap:0,marginBottom:8},children:uo.map((p,b)=>{const g=p.key<u.currentStep,y=p.key===u.currentStep,f=p.icon;return s.jsxs($.Fragment,{children:[s.jsxs("div",{style:{flex:1,textAlign:"center"},children:[s.jsx("div",{style:{width:32,height:32,borderRadius:"50%",margin:"0 auto 4px",display:"flex",alignItems:"center",justifyContent:"center",background:g?"#16a34a":y?"#1749d7":"#e5e7eb",color:g||y?"#fff":"#6b7280",transition:"all 0.3s"},children:g?s.jsx(et,{size:16}):s.jsx(f,{size:14})}),s.jsx("div",{style:{fontSize:11,fontWeight:y?700:500,color:g?"#16a34a":y?"#1749d7":"#94a3b8"},children:p.name})]}),b<uo.length-1&&s.jsx("div",{style:{flex:.5,height:2,background:g?"#16a34a":"#e5e7eb",marginBottom:20}})]},p.key)})}),u&&s.jsxs("div",{style:{background:"#f8fafc",borderRadius:8,overflow:"hidden"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 80px",padding:"8px 12px",fontSize:11,fontWeight:600,color:"#64748b",background:"#f1f5f9",borderBottom:"1px solid #e2e8f0"},children:[s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""})]}),x.map((p,b)=>{const g=b===0;return s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 80px",padding:"10px 12px",borderBottom:b<x.length-1?"1px solid #e2e8f0":"none",background:g?"#fefce8":"transparent",alignItems:"start"},children:[s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:zy(p.timestamp)}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:12,color:"#0f172a"},children:[s.jsxs("b",{children:[p.stepName," ",p.action]}),s.jsxs("span",{style:{color:"#64748b"},children:["",p.actor==="agent"?"":p.actor==="buyer"?"":""]})]}),p.detail&&s.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:p.detail})]}),s.jsx("div",{children:p.hash&&s.jsx("span",{style:{fontSize:10,padding:"3px 8px",borderRadius:4,background:g?"#fef3c7":"#f1f5f9",color:g?"#92400e":"#64748b",border:g?"1px solid #fcd34d":"1px solid #e2e8f0",fontFamily:"monospace"},children:p.hash})})]},p.id)}),u.events.length>3&&s.jsx("button",{onClick:()=>c(!d),style:{width:"100%",padding:"8px",fontSize:11,color:"#1749d7",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:d?"":` ${u.events.length} `})]}),!u&&!o&&s.jsxs("div",{style:{textAlign:"center",padding:"32px 16px",color:"#64748b"},children:[s.jsx(Qc,{size:32,style:{margin:"0 auto 8px",opacity:.5}}),s.jsx("div",{style:{fontSize:13,marginBottom:8},children:""}),s.jsxs("button",{className:`${R["uag-btn"]} ${R.primary}`,children:[s.jsx(Cr,{size:14,style:{marginRight:4}}),""]})]}),o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px",color:"#64748b"},children:[s.jsx(La,{size:20,className:"animate-spin",style:{margin:"0 auto 8px"}}),s.jsx("div",{style:{fontSize:12},children:"..."})]}),u&&s.jsxs("div",{style:{display:"flex",gap:8,paddingTop:8,borderTop:"1px solid #e2e8f0"},children:[s.jsxs(Bs,{to:`/assure?case=${u.id}`,className:`${R["uag-btn"]} ${R.primary}`,style:{flex:1,textAlign:"center",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[" Trust Room",s.jsx(Ft,{size:14})]}),u.currentStep===3&&u.offerPrice&&s.jsxs("button",{className:R["uag-btn"],style:{background:"#fef3c7",borderColor:"#fcd34d",color:"#92400e"},children:[s.jsx(Hr,{size:14,style:{marginRight:4}}),""]})]}),r.length>0&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,padding:"12px 0 0",borderTop:"1px solid #e2e8f0"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#1749d7"},children:r.length}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#16a34a"},children:r.filter(p=>p.currentStep>=3).length}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#f59e0b"},children:r.filter(p=>p.status==="pending").length||0}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]})]})]})}function Ry(){const{data:e,isLoading:t,buyLead:r,isBuying:n,useMock:a,toggleMode:i}=av(),{selectedLead:o,selectLead:l,close:d}=lv(),c=h.useRef(null),m=async u=>{!e||n||(r(u),d())};return t?s.jsx(uv,{}):e?s.jsxs("div",{className:R["uag-page"],children:[s.jsx(cv,{}),s.jsx("main",{className:R["uag-container"],children:s.jsxs("div",{className:R["uag-grid"],children:[s.jsx(hv,{leads:e.leads,onSelectLead:l}),s.jsx(pv,{ref:c,selectedLead:o,onBuyLead:m,isProcessing:n}),s.jsx(xv,{leads:e.leads}),s.jsx(gv,{listings:e.listings,feed:e.feed}),s.jsx(Ty,{listings:e.listings}),s.jsx(My,{})]})}),s.jsx(dv,{user:e.user,useMock:a,toggleMode:i})]}):null}function $y(){return s.jsx($d,{children:({reset:e})=>s.jsx(Lf,{onReset:e,FallbackComponent:mv,children:s.jsx(Ry,{})})})}const Ly=e=>{const t=Math.floor(e*.4),r=Math.floor(e*.3),n=Math.floor(e*.3);return[{label:"",value:t,icon:tt},{label:"",value:r,icon:Ir},{label:"",value:n,icon:Wr}]},Oy=({isOpen:e,onClose:t,agentName:r})=>{const[n,a]=h.useState(null),[i,o]=h.useState(""),[l,d]=h.useState(!1),c=h.useMemo(()=>{const u=[],x=["","","","","","",""];for(let p=1;p<=7;p++){const b=new Date;b.setDate(b.getDate()+p);const g=`${b.getMonth()+1}/${b.getDate()}`,y=x[b.getDay()]??"",f=b.getDay()===0||b.getDay()===6?["10:00","11:00","14:00","15:00","16:00"]:["14:00","15:00","19:00"];u.push({date:g,day:y,times:f})}return u},[]);if(!e)return null;const m=()=>{!n||!i||(d(!0),setTimeout(()=>{t(),d(!1),a(null),o("")},2e3))};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-4 text-white",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",children:""}),s.jsxs("p",{className:"text-sm opacity-80",children:["",r," "]})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(As,{size:20})})]})}),l?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(tt,{className:"text-green-500",size:32})}),s.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),s.jsx("p",{className:"text-slate-500",children:""})]}):s.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[s.jsx("div",{className:"space-y-3 mb-4",children:c.slice(0,4).map(u=>s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-slate-500 mb-2",children:[u.date," (",u.day,")"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.times.map(x=>{const p=`${u.date}-${x}`,b=n===p;return s.jsx("button",{onClick:()=>a(p),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${b?"bg-[#003366] text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:x},p)})})]},u.date))}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{type:"tel",value:i,onChange:u=>o(u.target.value),placeholder:"0912-345-678",className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none"})]}),s.jsxs("button",{onClick:m,disabled:!n||!i,className:`w-full mt-4 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${n&&i?"bg-[#003366] text-white hover:bg-[#004488]":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:[s.jsx(ss,{size:18}),""]})]})]})})},Dy=({agent:e,onLineClick:t,onCallClick:r,onBookingClick:n})=>{const[a,i]=h.useState(!1),[o,l]=h.useState(!1),d=h.useMemo(()=>Math.random()>.3,[]),c=Ly(e.trustScore),m=h.useMemo(()=>({responseTime:d?"5 ":"2 ",closureRate:Math.min(95,60+e.trustScore%30),totalDeals:e.encouragementCount*2+10,experience:Math.floor(e.trustScore/25)+1}),[e.trustScore,e.encouragementCount,d]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-4",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-md"}),s.jsxs("div",{className:`absolute -bottom-1 -right-1 ${d?"bg-green-500":"bg-slate-400"} text-white text-[10px] px-1.5 py-0.5 rounded-full flex items-center gap-0.5 border border-white`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${d?"bg-white animate-pulse":"bg-slate-300"}`}),s.jsx("span",{children:d?"":""})]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.name,s.jsx("span",{className:"text-xs font-normal text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full",children:e.company})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsxs("p",{className:"text-xs text-slate-400",children:["#",e.internalCode]}),s.jsxs("div",{className:"flex items-center gap-0.5 text-green-600 bg-green-50 px-1.5 py-0.5 rounded text-[10px]",children:[s.jsx(Er,{size:10}),s.jsx("span",{children:""})]})]})]})}),s.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 relative cursor-pointer",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center text-[#003366]",children:s.jsx(ea,{size:16,fill:"currentColor"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-[#003366]",children:e.trustScore}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),a&&s.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-slate-800 text-white text-xs rounded-lg p-3 shadow-xl z-10",children:[s.jsx("div",{className:"font-bold mb-2",children:""}),c.map(u=>s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(u.icon,{size:12,className:"text-green-400"}),s.jsx("span",{children:u.label})]}),s.jsxs("span",{className:"font-medium",children:["+",u.value]})]},u.label)),s.jsxs("div",{className:"border-t border-slate-600 mt-2 pt-2 flex justify-between font-bold",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-green-400",children:e.trustScore})]}),s.jsx("div",{className:"absolute top-full left-4 border-8 border-transparent border-t-slate-800"})]})]}),s.jsx("div",{className:"w-px h-8 bg-slate-100"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center text-orange-500",children:s.jsx(wn,{size:16})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-800",children:e.encouragementCount}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]})]})]}),d&&s.jsxs("div",{className:"mt-3 text-xs text-green-600 bg-green-50 px-2 py-1 rounded-lg inline-flex items-center gap-1",children:[s.jsx(Ir,{size:12})," ",m.responseTime," "]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 py-3 border-y border-slate-100",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-[#003366]",children:[m.closureRate,"%"]}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center border-x border-slate-100",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:m.totalDeals}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[m.experience,""]}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-50 space-y-2",children:[s.jsxs("button",{onClick:t,className:"w-full bg-[#06C755] text-white text-sm font-bold py-2.5 rounded-lg hover:bg-[#05B04A] transition-colors flex items-center justify-center gap-2 shadow-sm",children:[s.jsx(Lt,{size:18})," LINE "]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>n?n():l(!0),className:"flex-1 bg-[#003366] text-white text-sm font-medium py-2 rounded-lg hover:bg-[#004488] transition-colors flex items-center justify-center gap-1.5",children:[s.jsx(ss,{size:16}),""]}),s.jsxs("button",{onClick:r,className:"flex-1 bg-white border border-[#003366] text-[#003366] text-sm font-medium py-2 rounded-lg hover:bg-blue-50 transition-colors flex items-center justify-center gap-1.5",children:[s.jsx(Dt,{size:16}),""]})]})]})]}),s.jsx(Oy,{isOpen:o,onClose:()=>l(!1),agentName:e.name})]})},Kn=e=>{let t=e;return t=t.replace(/^\d{3,5}/,""),t=t.replace(/(\d+[fF].*)$/,""),t=t.replace(/[\-]\d+/g,""),t=t.replace(//g,""),t=t.replace(/\s+/g,""),t},mo=e=>e.trim().replace(/\s+/g,"").replace(/[]/g,"").replace(/[]/g,t=>t===""?"(":")").replace(/[]/g,"").replace(/[]/g,"").toLowerCase(),Yn={id:"b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a22",publicId:"MH-100001",title:"101",price:3680,address:"",description:"101",images:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"],agent:{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",internalCode:1,name:"",avatarUrl:"https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",company:"",trustScore:92,encouragementCount:156}},Fr={getPropertyByPublicId:async e=>{try{const{data:t,error:r}=await le.from("properties").select(`
          *,
          agent:agents (*)
        `).eq("public_id",e).single();return r||!t?(console.warn("",r),e==="MH-100001"?Yn:null):{id:t.id,publicId:t.public_id,title:t.title,price:Number(t.price),address:t.address,description:t.description,images:t.images||[],sourcePlatform:t.source_platform,agent:{id:t.agent.id,internalCode:t.agent.internal_code,name:t.agent.name,avatarUrl:t.agent.avatar_url||"https://via.placeholder.com/150",company:t.agent.company,trustScore:t.agent.trust_score,encouragementCount:t.agent.encouragement_count}}}catch(t){return console.error("Service Error:",t),Yn}},createProperty:async(e,t)=>{const{data:r,error:n}=await le.from("properties").insert({title:e.title,price:e.price,address:e.address,description:e.description,images:e.images,source_platform:e.sourcePlatform,source_external_id:e.sourceExternalId,agent_id:t}).select().single();if(n)throw n;return r},uploadImages:async(e,t)=>{const r=(t==null?void 0:t.concurrency)||3,n=[],a=[];let i=0;for(let o=0;o<e.length;o+=r){const d=e.slice(o,o+r).map(async m=>{var u,x;try{const p=((u=m.name.split(".").pop())==null?void 0:u.toLowerCase())||"jpg",b=`${crypto.randomUUID()}.${p}`,{error:g}=await le.storage.from("property-images").upload(b,m,{contentType:m.type,cacheControl:"31536000"});if(g)return console.error("Image upload error:",g),a.push({file:m,error:g.message}),null;const{data:y}=le.storage.from("property-images").getPublicUrl(b);return y.publicUrl}catch(p){return console.error("Image upload exception:",p),a.push({file:m,error:p.message||""}),null}finally{i++,(x=t==null?void 0:t.onProgress)==null||x.call(t,i,e.length)}}),c=await Promise.all(d);n.push(...c.filter(m=>!!m))}return{urls:n,failed:a,allSuccess:a.length===0}},uploadImagesLegacy:async e=>(await Fr.uploadImages(e)).urls,createPropertyWithForm:async(e,t,r)=>{var u,x,p,b;const{data:{user:n}}=await le.auth.getUser(),a=(n==null?void 0:n.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11";let i=r||null,o=((u=e.communityName)==null?void 0:u.trim())||null,l=!1;if(o==="")i=null,o="",console.log(" /");else if(r)console.log("  ID:",r);else if(e.address&&o){const g=Kn(e.address);if(g.length>=5){const{data:y}=await le.from("communities").select("id, name").eq("address_fingerprint",g).single();y&&(i=y.id,console.log(" :",y.name))}if(!i&&o.length>=2){const y=mo(o),f=((x=e.address.match(/([^]+[])/))==null?void 0:x[1])||"",{data:j}=await le.from("communities").select("id, name").eq("district",f).limit(50);if(j&&j.length>0){const S=j.find(N=>mo(N.name)===y);S&&(i=S.id,o=S.name,console.log(" :",S.name))}if(!i){const{data:S}=await le.from("communities").select("id, name").eq("name",o).single();S&&(i=S.id,console.log(" :",S.name))}}if(!i){const y=((p=e.address.match(/([^]+[])/))==null?void 0:p[1])||"",f=((b=e.address.match(/^(.*?[])/))==null?void 0:b[1])||"",{data:j,error:S}=await le.from("communities").insert({name:o,address:e.address,address_fingerprint:g,district:y,city:f,is_verified:!1,completeness_score:20,features:[e.type].filter(Boolean)}).select("id").single();!S&&j?(i=j.id,l=!0,console.log(" :",o)):console.error(" :",S)}}const d=e.address?Kn(e.address):null,{data:c,error:m}=await le.from("properties").insert({agent_id:a,title:e.title,price:Number(e.price),address:e.address,address_fingerprint:d,community_name:o,community_id:i,size:Number(e.size||0),age:Number(e.age||0),rooms:Number(e.rooms),halls:Number(e.halls),bathrooms:Number(e.bathrooms),floor_current:e.floorCurrent,floor_total:Number(e.floorTotal||0),property_type:e.type,advantage_1:e.advantage1,advantage_2:e.advantage2,disadvantage:e.disadvantage,description:e.description,images:t,features:[e.type,e.advantage1,e.advantage2].filter(Boolean),source_platform:e.sourceExternalId?"591":"MH",source_external_id:e.sourceExternalId||null}).select().single();if(m)throw m;return i&&(e.advantage1||e.advantage2||e.disadvantage)&&(await le.from("community_reviews").insert({community_id:i,property_id:c.id,source:"agent",advantage_1:e.advantage1||null,advantage_2:e.advantage2||null,disadvantage:e.disadvantage||null}),fetch("/api/generate-community-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({communityId:i})}).catch(g=>console.warn("AI :",g))),{...c,is_new_community:l}},checkCommunityExists:async e=>{if(!e||e.trim().length<2)return{exists:!1};const{data:t}=await le.from("communities").select("id, name").ilike("name",`%${e.trim()}%`).limit(1).single();return t?{exists:!0,community:t}:{exists:!1}}};async function Fy(e){try{const{data:t,error:r}=await le.rpc("create_lead",{p_customer_name:e.customerName,p_customer_phone:e.customerPhone,p_customer_email:e.customerEmail||null,p_customer_line_id:e.customerLineId||null,p_agent_id:e.agentId,p_property_id:e.propertyId,p_source:e.source,p_budget_range:e.budgetRange||null,p_preferred_contact_time:e.preferredContactTime||null,p_needs_description:e.needsDescription||null});return r?(console.error("[LeadService] Create lead error:",r),{success:!1,error:r.message}):{success:!0,leadId:t}}catch(t){const r=t instanceof Error?t.message:"";return console.error("[LeadService] Create lead exception:",t),{success:!1,error:r}}}const By=({isOpen:e,onClose:t,propertyId:r,propertyTitle:n,agentId:a,agentName:i,source:o})=>{const[l,d]=h.useState("form"),[c,m]=h.useState({name:"",phone:"",preferredChannel:"line",preferredTime:"",budget:"",needs:""});if(!e)return null;const u=async g=>{if(g.preventDefault(),!c.name.trim()||!c.phone.trim()){J.error("");return}d("submitting");try{const y=await Fy({customerName:c.name,customerPhone:c.phone,agentId:a,propertyId:r,source:o,...c.budget?{budgetRange:c.budget}:{},...c.preferredTime?{preferredContactTime:c.preferredTime}:{},...c.needs?{needsDescription:c.needs}:{}});y.success?(d("success"),setTimeout(()=>{t(),d("form"),m({name:"",phone:"",preferredChannel:"line",preferredTime:"",budget:"",needs:""})},3e3)):(J.error("",y.error||""),d("form"))}catch{J.error(""),d("form")}},x=[{value:"line",label:"LINE",icon:s.jsx(Lt,{size:18,className:"text-[#00c300]"})},{value:"phone",label:"",icon:s.jsx(Dt,{size:18,className:"text-blue-600"})},{value:"message",label:"",icon:s.jsx(Gc,{size:18,className:"text-slate-600"})}],p=[" 09:00-12:00"," 14:00-18:00"," 19:00-21:00"," 10:00-12:00"," 14:00-18:00",""],b=["1000","1000-2000","2000-3000","3000-5000","5000",""];return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-5 text-white",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-xl",children:""}),s.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[i,"  ",s.jsx("span",{className:"font-bold",children:"10 "})," "]})]}),s.jsx("button",{onClick:t,className:"p-1.5 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(As,{size:22})})]}),s.jsxs("div",{className:"mt-3 bg-white/10 rounded-lg px-3 py-2 text-sm",children:[s.jsx("span",{className:"opacity-80",children:""}),s.jsx("span",{className:"font-medium ml-1",children:n})]})]}),s.jsx("div",{className:"p-5 overflow-y-auto max-h-[60vh]",children:l==="success"?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(tt,{className:"text-green-600",size:32})}),s.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),s.jsxs("p",{className:"text-slate-600 mb-4",children:[i,"  ",s.jsx("span",{className:"font-bold text-[#003366]",children:"10 "})," "]}),s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-left text-sm",children:[s.jsx("p",{className:"font-medium text-[#003366] mb-2",children:" "}),s.jsxs("ul",{className:"space-y-1 text-slate-600",children:[s.jsx("li",{children:" "}),s.jsx("li",{children:" "}),s.jsx("li",{children:" "})]})]})]}):l==="submitting"?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ts,{className:"animate-spin text-[#003366] mx-auto mb-4",size:40}),s.jsx("p",{className:"text-slate-600",children:"..."})]}):s.jsxs("form",{onSubmit:u,className:"space-y-5",children:[s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:[s.jsxs("p",{className:"font-bold text-amber-900 text-sm mb-2 flex items-center gap-1.5",children:[s.jsx(Ir,{size:14}),""]}),s.jsxs("ul",{className:"text-amber-800 text-xs space-y-1",children:[s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(tt,{size:12,className:"text-green-600 flex-shrink-0"})," ",i,"  ",s.jsx("strong",{children:"10 "})," "]}),s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(tt,{size:12,className:"text-green-600 flex-shrink-0"}),""]}),s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(tt,{size:12,className:"text-green-600 flex-shrink-0"}),""]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:c.name,onChange:g=>m({...c,name:g.target.value}),placeholder:"",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:c.phone,onChange:g=>m({...c,phone:g.target.value}),placeholder:"0912-345-678",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("div",{className:"flex gap-2",children:x.map(g=>s.jsxs("button",{type:"button",onClick:()=>m({...c,preferredChannel:g.value}),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl border-2 transition-all ${c.preferredChannel===g.value?"border-[#003366] bg-blue-50 text-[#003366]":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[g.icon,s.jsx("span",{className:"font-medium text-sm",children:g.label})]},g.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[s.jsx(Ir,{size:14,className:"inline mr-1"}),""]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map(g=>s.jsx("button",{type:"button",onClick:()=>m({...c,preferredTime:g}),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${c.preferredTime===g?"bg-[#003366] text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:g},g))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsxs("select",{value:c.budget,onChange:g=>m({...c,budget:g.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all bg-white",children:[s.jsx("option",{value:"",children:""}),b.map(g=>s.jsx("option",{value:g,children:g},g))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:""}),s.jsx("textarea",{value:c.needs,onChange:g=>m({...c,needs:g.target.value}),placeholder:"...",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all resize-none"})]}),s.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-xl p-3 flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(tt,{size:16,className:"text-green-600"})}),s.jsxs("div",{className:"text-xs text-green-800",children:[s.jsx("p",{className:"font-medium mb-1",children:" "}),s.jsx("p",{children:""})]})]}),s.jsxs("button",{type:"submit",className:"w-full bg-[#003366] text-white font-bold py-3.5 rounded-xl hover:bg-[#004488] transition-colors shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2",children:[s.jsx(ss,{size:18}),""]})]})})]})})},xc=[{id:"commute",icon:"",title:"",subtitle:"/",description:""},{id:"school",icon:"",title:"",subtitle:"",description:""},{id:"community",icon:"",title:"",subtitle:"",description:""},{id:"view",icon:"",title:"",subtitle:"",description:""},{id:"amenity",icon:"",title:"",subtitle:"",description:""},{id:"parking",icon:"",title:"",subtitle:"",description:""},{id:"renovated",icon:"",title:"",subtitle:"",description:""}],Uy={simple:{id:"simple",name:"",description:"",icon:""},investment:{id:"investment",name:"",description:"",icon:""},marketing:{id:"marketing",name:"",description:"",icon:""}},ho={id:"demo",publicId:"MH-100001",title:"101",price:3680,address:"100",description:"",images:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800","https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800","https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800","https://images.unsplash.com/photo-1600573472592-401b489a3cdc?w=800"],size:45.2,age:8,rooms:3,halls:2,bathrooms:2,floorCurrent:"12",floorTotal:15,propertyType:"",direction:"",parking:"",communityName:"",communityYear:2016,communityUnits:420,managementFee:80,advantage1:"",advantage2:"",disadvantage:"",agent:{id:"agent-1",name:"",avatarUrl:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200",company:"",phone:"0912-345-678",lineId:"@maihouses",trustScore:92,reviewCount:156,experience:10}};function Zy(e,t=.8,r=30,n=.02){const a=e*1e4*t,i=n/12,o=r*12,l=a*(i*Math.pow(1+i,o))/(Math.pow(1+i,o)-1);return Math.round(l)}function Hy(){var y;const{id:e}=Br(),[t]=Ur(),[r,n]=h.useState(ho),[a,i]=h.useState(0),[o,l]=h.useState(0),[d,c]=h.useState(!0),m=t.get("aid"),u=t.get("src")||"direct",x=((y=t.get("h"))==null?void 0:y.split(","))||["commute","school","community"];h.useEffect(()=>{const f=async()=>{try{await fetch("/api/report/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:e,agentId:m,source:u,userAgent:navigator.userAgent})})}catch(S){console.log("Track failed:",S)}},j=async()=>{c(!0);try{await new Promise(S=>setTimeout(S,300)),n(ho),l(Math.floor(Math.random()*20)+5)}catch(S){console.error("Load report failed:",S)}finally{c(!1)}};f(),j()},[e,m,u]);const p=xc.filter(f=>x.includes(f.id)),b=Zy(r.price),g=async()=>{const f=window.location.href,j=`${r.title} - NT$${r.price}`;if(navigator.share)try{await navigator.share({title:j,url:f})}catch{console.log("Share cancelled")}else await navigator.clipboard.writeText(f),J.success("","")};return d?s.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500",children:"..."})]})}):s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx("section",{className:"relative",children:s.jsxs("div",{className:"aspect-[4/3] bg-slate-200 overflow-hidden",children:[s.jsx("img",{src:r.images[a],alt:r.title,className:"w-full h-full object-cover"}),r.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>i(f=>f>0?f-1:r.images.length-1),className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center text-white transition",children:s.jsx(Nr,{size:24})}),s.jsx("button",{onClick:()=>i(f=>f<r.images.length-1?f+1:0),className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center text-white transition",children:s.jsx(Ft,{size:24})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1.5",children:r.images.map((f,j)=>s.jsx("button",{onClick:()=>i(j),className:`w-2 h-2 rounded-full transition ${j===a?"bg-white":"bg-white/50"}`},j))})]}),s.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-1.5 rounded-full text-sm font-bold text-[#003366] flex items-center gap-1.5",children:[s.jsx(He,{size:14}),""]})]})}),s.jsxs("section",{className:"bg-white px-4 py-5 border-b border-slate-100",children:[s.jsxs("div",{className:"text-3xl font-black text-[#003366] mb-1",children:["NT$ ",r.price.toLocaleString()," "]}),s.jsx("h1",{className:"text-lg font-bold text-slate-800 mb-2",children:r.title}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(Xs,{size:14,className:"mr-1"}),r.address]})]}),s.jsx("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.rooms,"",r.halls,"",r.bathrooms,""]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.size," "]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.age," "]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.floorCurrent,"/",r.floorTotal,"F"]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.direction}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.parking||""}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]})]})}),s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-slate-600",children:" 8 30 "}),s.jsx("span",{className:"text-xs text-slate-400",children:" 2%"})]}),s.jsxs("div",{className:"text-2xl font-black text-[#003366]",children:[" NT$ ",b.toLocaleString()]})]})]}),s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsx("div",{className:"space-y-3",children:p.map(f=>s.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 rounded-xl p-3",children:[s.jsx("span",{className:"text-2xl",children:f.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-slate-800",children:f.title}),s.jsx("div",{className:"text-sm text-slate-500",children:f.description})]})]},f.id))})]}),r.communityName&&s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsx("span",{className:"font-medium text-slate-800",children:r.communityName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.communityYear," "]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.communityUnits," "]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.managementFee," /"]})]})]})]}),r.images.length>1&&s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.images.slice(0,6).map((f,j)=>s.jsx("button",{onClick:()=>i(j),className:"aspect-square rounded-lg overflow-hidden bg-slate-100",children:s.jsx("img",{src:f,alt:"",className:"w-full h-full object-cover"})},j))})]}),s.jsxs("section",{className:"bg-white px-4 py-5 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("img",{src:r.agent.avatarUrl,alt:r.agent.name,className:"w-16 h-16 rounded-full object-cover border-2 border-slate-100"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-lg text-slate-800",children:r.agent.name}),s.jsx("div",{className:"text-sm text-slate-500",children:r.agent.company}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-sm text-amber-500",children:[" ",(r.agent.trustScore/20).toFixed(1)]}),s.jsxs("span",{className:"text-xs text-slate-400",children:["(",r.agent.reviewCount," )"]}),r.agent.experience&&s.jsxs("span",{className:"text-xs text-slate-400",children:["",r.agent.experience,""]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:`tel:${r.agent.phone}`,className:"flex items-center justify-center gap-2 w-full py-3.5 bg-[#003366] hover:bg-[#002244] text-white font-bold rounded-xl transition",children:[s.jsx(Dt,{size:18})," ",r.agent.phone]}),s.jsxs("a",{href:`https://line.me/R/ti/p/${r.agent.lineId}`,className:"flex items-center justify-center gap-2 w-full py-3.5 bg-[#06C755] hover:bg-[#05a847] text-white font-bold rounded-xl transition",children:[s.jsx(Lt,{size:18}),"LINE "]}),s.jsxs("button",{className:"flex items-center justify-center gap-2 w-full py-3.5 border-2 border-slate-200 hover:border-slate-300 text-slate-700 font-bold rounded-xl transition",children:[s.jsx(ss,{size:18}),""]})]})]}),s.jsxs("section",{className:"bg-slate-100 px-4 py-6 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[#003366] font-bold mb-2",children:[s.jsx(He,{size:18}),"MaiHouses "]}),s.jsx("div",{className:"text-sm text-slate-500 mb-3",children:""}),o>0&&s.jsxs("div",{className:"text-xs text-slate-400 mb-2",children:["  ",o," "]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["",new Date().toLocaleDateString("zh-TW")]}),s.jsxs("button",{onClick:g,className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-full text-sm text-slate-600 hover:bg-slate-50 transition",children:[s.jsx(Ao,{size:14}),""]}),s.jsxs("a",{href:`/maihouses/property/${r.publicId}?aid=${m||""}&src=report`,className:"mt-3 flex items-center justify-center gap-1 text-sm text-[#003366] hover:underline",children:["",s.jsx(Zr,{size:14})]})]})]})}function Wy({property:e,isOpen:t,onClose:r}){const[n,a]=h.useState("style"),[i,o]=h.useState("simple"),[l,d]=h.useState(["commute","school","community"]),[c,m]=h.useState([0,1,2,3]),[u,x]=h.useState(""),[p,b]=h.useState(!1),[g,y]=h.useState(null),f=h.useMemo(()=>`${e.title} `,[e.title]),j=()=>{const w=window.location.origin,T=new URLSearchParams({aid:e.agent.id,src:"line_share",h:l.join(","),s:i});return`${w}/maihouses/r/${e.publicId}?${T.toString()}`},S=w=>{d(T=>T.includes(w)?T.filter(O=>O!==w):T.length>=3?[...T.slice(1),w]:[...T,w])},N=w=>{m(T=>T.includes(w)?T.filter(O=>O!==w):T.length>=5?[...T.slice(1),w]:[...T,w])},I=async()=>{b(!0);try{await new Promise(T=>setTimeout(T,800));const w=j();y(w),a("preview")}catch{J.error("")}finally{b(!1)}},k=async()=>{if(g)try{await navigator.clipboard.writeText(g),J.success("")}catch{J.error("")}},M=()=>{const w=u||f,T=encodeURIComponent(g||""),O=encodeURIComponent(w);window.open(`https://line.me/R/msg/text/?${O}%0A${T}`,"_blank")},C=async()=>{if(!navigator.share||!g){k();return}try{await navigator.share({title:e.title,text:u||f,url:g})}catch{}},D=()=>{a("style"),y(null),r()};return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:D}),s.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-800",children:""}),s.jsx("button",{onClick:D,className:"p-2 hover:bg-slate-100 rounded-full transition",children:s.jsx(As,{size:20,className:"text-slate-500"})})]}),s.jsx("div",{className:"px-5 py-3 bg-slate-50 border-b border-slate-100",children:s.jsx("div",{className:"flex items-center gap-2 text-sm",children:["style","highlights","photos","preview"].map((w,T)=>s.jsxs($.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-1.5 ${n===w?"text-[#003366] font-bold":"text-slate-400"}`,children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${n===w?"bg-[#003366] text-white":["style","highlights","photos","preview"].indexOf(n)>T?"bg-green-500 text-white":"bg-slate-200"}`,children:["style","highlights","photos","preview"].indexOf(n)>T?s.jsx(et,{size:14}):T+1}),s.jsxs("span",{className:"hidden sm:inline",children:[w==="style"&&"",w==="highlights"&&"",w==="photos"&&"",w==="preview"&&""]})]}),T<3&&s.jsx(Ft,{size:16,className:"text-slate-300"})]},w))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5",children:[n==="style"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-slate-500 mb-4",children:""}),Object.values(Uy).map(w=>s.jsx("button",{onClick:()=>o(w.id),className:`w-full p-4 rounded-xl border-2 text-left transition ${i===w.id?"border-[#003366] bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:w.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-800",children:w.name}),s.jsx("div",{className:"text-sm text-slate-500",children:w.description})]}),i===w.id&&s.jsx("div",{className:"w-6 h-6 bg-[#003366] rounded-full flex items-center justify-center",children:s.jsx(et,{size:14,className:"text-white"})})]})},w.id))]}),n==="highlights"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-slate-500 mb-4",children:[" 3  ",l.length,"/3"]}),xc.map(w=>s.jsx("button",{onClick:()=>S(w.id),className:`w-full p-3 rounded-xl border-2 text-left transition ${l.includes(w.id)?"border-[#003366] bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:w.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-800",children:w.title}),s.jsx("div",{className:"text-xs text-slate-500",children:w.subtitle})]}),l.includes(w.id)&&s.jsx("div",{className:"w-6 h-6 bg-[#003366] rounded-full flex items-center justify-center",children:s.jsx(et,{size:14,className:"text-white"})})]})},w.id))]}),n==="photos"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-slate-500 mb-4",children:[" ",c.length,"/5"]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.images.map((w,T)=>s.jsxs("button",{onClick:()=>N(T),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition ${c.includes(T)?"border-[#003366] ring-2 ring-[#003366]/20":"border-transparent"}`,children:[s.jsx("img",{src:w,alt:"",className:"w-full h-full object-cover"}),c.includes(T)&&s.jsx("div",{className:"absolute top-1 right-1 w-5 h-5 bg-[#003366] rounded-full flex items-center justify-center",children:s.jsx(et,{size:12,className:"text-white"})})]},T))})]}),n==="preview"&&g&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(et,{size:32,className:"text-green-600"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[s.jsx(Kc,{size:14}),""]}),s.jsx("div",{className:"bg-white rounded-lg p-2 text-xs text-slate-500 break-all border border-slate-200",children:g})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600 mb-2 block",children:""}),s.jsx("textarea",{value:u||f,onChange:w=>x(w.target.value),className:"w-full p-3 border border-slate-200 rounded-xl text-sm resize-none focus:outline-none focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366]",rows:3})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-2 w-full py-3 bg-[#003366] hover:bg-[#002244] text-white font-bold rounded-xl transition",children:[s.jsx(vn,{size:18}),""]}),s.jsxs("button",{onClick:M,className:"flex items-center justify-center gap-2 w-full py-3 bg-[#06C755] hover:bg-[#05a847] text-white font-bold rounded-xl transition",children:[s.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current",children:s.jsx("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),"LINE "]}),s.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-2 w-full py-3 border-2 border-slate-200 hover:border-slate-300 text-slate-700 font-bold rounded-xl transition",children:[s.jsx(Ao,{size:18}),""]})]}),s.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-[#003366] hover:underline",children:[s.jsx(Wr,{size:14}),""]})]})]}),n!=="preview"&&s.jsxs("div",{className:"px-5 py-4 border-t border-slate-100 flex gap-3",children:[n!=="style"&&s.jsx("button",{onClick:()=>{const w=["style","highlights","photos","preview"],T=w.indexOf(n);if(T>0){const O=w[T-1];O&&a(O)}},className:"flex-1 py-3 border-2 border-slate-200 hover:border-slate-300 text-slate-700 font-bold rounded-xl transition",children:""}),s.jsx("button",{onClick:()=>{n==="style"?a("highlights"):n==="highlights"?a("photos"):n==="photos"&&I()},disabled:p||n==="highlights"&&l.length===0,className:"flex-1 py-3 bg-[#003366] hover:bg-[#002244] disabled:bg-slate-300 text-white font-bold rounded-xl transition flex items-center justify-center gap-2",children:p?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):n==="photos"?"":s.jsxs(s.Fragment,{children:["",s.jsx(Ft,{size:18})]})})]})]})]}):null}const qy=(e,t,r,n)=>{const a=h.useRef(Date.now()),i=h.useRef({click_photos:0,click_line:0,click_call:0,scroll_depth:0}),o=h.useRef(!1),l=h.useRef("F"),d=h.useCallback(()=>{let u=localStorage.getItem("uag_session");return u||(u=`u_${Math.random().toString(36).substring(2,11)}`,localStorage.setItem("uag_session",u)),u},[]),c=h.useCallback(u=>({session_id:d(),agent_id:t,fingerprint:btoa(JSON.stringify({screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language})),event:{type:u,property_id:e,district:r||"unknown",duration:Math.round((Date.now()-a.current)/1e3),actions:{...i.current},focus:[]}}),[e,t,r,d]),m=h.useCallback(async(u,x=!1)=>{const p=c(u);if(x||u==="page_exit"){const b=new Blob([JSON.stringify(p)],{type:"application/json"});navigator.sendBeacon("/api/uag-track",b);return}try{const g=await(await fetch("/api/uag-track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p),keepalive:!0})).json();if(g.success&&g.grade){const y={S:5,A:4,B:3,C:2,F:1},f=y[g.grade]||1,j=y[l.current]||1;f>j&&(l.current=g.grade,g.grade==="S"&&n&&n("S",g.reason))}}catch{const g=new Blob([JSON.stringify(p)],{type:"application/json"});navigator.sendBeacon("/api/uag-track",g)}},[c,n]);return h.useEffect(()=>{const u=()=>{const x=Math.round((window.scrollY+window.innerHeight)/document.body.scrollHeight*100);x>i.current.scroll_depth&&(i.current.scroll_depth=x)};return window.addEventListener("scroll",u,{passive:!0}),()=>window.removeEventListener("scroll",u)},[]),h.useEffect(()=>{if(!e)return;m("page_view",!0);const u=()=>{o.current||(o.current=!0,m("page_exit",!0))};return window.addEventListener("pagehide",u),window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&u()}),()=>{window.removeEventListener("pagehide",u),u()}},[e,m]),{trackPhotoClick:()=>{i.current.click_photos++},trackLineClick:()=>{i.current.click_line=1,m("click_line")},trackCallClick:()=>{i.current.click_call=1,m("click_call")}}},Vy=()=>{var T,O,A;const{id:e}=Br(),[t]=Ur(),[r,n]=h.useState(!1),a=!1,[i,o]=h.useState(0),[l,d]=h.useState(!1),[c,m]=h.useState("sidebar"),[u,x]=h.useState(!1),[p,b]=h.useState(""),[g,y]=h.useState(!1),[f,j]=h.useState(Yn),S=()=>{let E=t.get("aid");return E||(E=localStorage.getItem("uag_last_aid")),E&&E!=="unknown"&&localStorage.setItem("uag_last_aid",E),E||"unknown"},N=h.useCallback((E,_)=>{E==="S"&&(_&&b(_),setTimeout(()=>x(!0),500))},[]),I=E=>{const _=E.match(/[](.{2,3}[])/);return(_==null?void 0:_[1])??"unknown"},k=qy(e||"",S(),I(f.address),N),M=E=>{m(E),d(!0),E==="mobile_bar"?k.trackLineClick():k.trackCallClick()},C=h.useMemo(()=>{var _;const E=((_=f.publicId)==null?void 0:_.charCodeAt(3))||0;return{currentViewers:Math.floor(E%5)+2,weeklyBookings:Math.floor(E%8)+5,isHot:E%3===0}},[f.publicId]);h.useEffect(()=>{(async()=>{if(e)try{const _=await Fr.getPropertyByPublicId(e);_&&j(_)}catch(_){console.error("Fetch error:",_)}})()},[e]);const D="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80";let w=f.images&&f.images.length>0&&f.images[0]?f.images[0]:D;return w&&w.includes("picsum")&&(w=D),s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 h-16 flex items-center px-4 shadow-sm justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx(sa,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center text-[#003366] font-extrabold text-xl gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#003366] to-[#00A8E8] rounded-lg flex items-center justify-center text-white",children:s.jsx(He,{size:18})}),""]})]}),s.jsxs("div",{className:"flex items-center text-xs font-mono text-slate-500 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[s.jsx(Yc,{size:12,className:"mr-1 text-gray-400"}),"",s.jsx("span",{className:"font-bold text-[#003366] ml-1",children:f.publicId})]})]}),s.jsxs("main",{className:"max-w-4xl mx-auto p-4 pb-24",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"aspect-video bg-slate-200 rounded-2xl overflow-hidden relative group",children:[s.jsx("img",{src:((T=f.images)==null?void 0:T[i])||w,alt:f.title,onError:E=>{E.currentTarget.src!==D&&(E.currentTarget.src=D)},className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 backdrop-blur-md text-white text-xs px-3 py-1.5 rounded-full flex items-center gap-1",children:[s.jsx(He,{size:12}),s.jsxs("span",{children:[i+1," / ",((O=f.images)==null?void 0:O.length)||1]})]})]}),f.images&&f.images.length>1&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mt-3 -mx-4 px-4 scrollbar-hide",children:f.images.map((E,_)=>s.jsx("button",{onClick:()=>{o(_),k.trackPhotoClick()},className:`flex-shrink-0 w-20 h-14 rounded-lg overflow-hidden border-2 transition-all ${_===i?"border-[#003366] ring-2 ring-[#003366]/20":"border-transparent opacity-70 hover:opacity-100"}`,children:s.jsx("img",{src:E,alt:` ${_+1}`,onError:L=>{L.currentTarget.src=D},className:"w-full h-full object-cover"})},_))})]}),s.jsx("div",{className:"lg:hidden mb-6",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-100 p-4",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>M("mobile_bar"),className:"flex-1 bg-[#003366] text-white font-bold py-4 rounded-xl text-base shadow-lg flex items-center justify-center gap-2",children:[s.jsx(Dt,{size:20}),""]}),s.jsx("button",{onClick:()=>M("mobile_bar"),className:"w-14 bg-[#06C755] text-white rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(Lt,{size:22})})]}),s.jsxs("p",{className:"text-center text-xs text-slate-500 mt-2",children:["  ",C.weeklyBookings," "]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 leading-tight",children:f.title}),s.jsx("button",{onClick:()=>n(!r),className:`p-2 rounded-full transition-all ${r?"bg-red-50 text-red-500":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:s.jsx(Io,{size:24,fill:r?"currentColor":"none"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-2 text-sm",children:[s.jsx(Xs,{size:16}),f.address]}),s.jsxs("div",{className:"mt-4 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-3xl font-extrabold text-[#003366]",children:f.price}),s.jsx("span",{className:"text-lg text-slate-500 font-medium",children:""}),s.jsx("span",{className:"text-sm text-red-500 font-medium ml-2",children:""})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[C.isHot&&s.jsxs("div",{className:"inline-flex items-center gap-1 text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded-full animate-pulse",children:[s.jsx(rn,{size:12}),""]}),s.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-slate-600 bg-slate-50 px-2 py-1 rounded-full",children:[s.jsx(yn,{size:12,className:"text-blue-500"}),C.currentViewers," "]}),s.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-slate-600 bg-slate-50 px-2 py-1 rounded-full",children:[s.jsx(Jc,{size:12,className:"text-green-500"})," ",C.weeklyBookings," "]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["","","",""].map(E=>s.jsx("span",{className:"px-3 py-1 bg-blue-50 text-[#003366] text-xs font-medium rounded-full",children:E},E))}),s.jsx("div",{className:"h-px bg-slate-100"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3",children:""}),s.jsx("p",{className:"text-slate-600 leading-relaxed whitespace-pre-line",children:f.description})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 p-4 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[s.jsx(ea,{size:18,className:"text-yellow-500",fill:"currentColor"}),""]}),s.jsx("span",{className:"text-xs text-slate-500 bg-slate-50 px-2 py-1 rounded-full",children:"88 "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#003366] text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:"J"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"J***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"B"}),s.jsx("span",{className:"text-yellow-500 text-xs",children:""})]}),s.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:""})]})]}),s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00A8E8] text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:"W"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"W***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"12F"}),s.jsx("span",{className:"text-yellow-500 text-xs",children:""})]}),s.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:""})]})]})]}),s.jsxs("div",{className:"relative mt-3 overflow-hidden rounded-xl",children:[s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 blur-sm select-none",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:"L"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"L***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"C"}),a]}),s.jsx("p",{className:"text-sm text-slate-600",children:"..."})]})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/80 to-white flex items-end justify-center pb-3",children:s.jsxs("button",{onClick:()=>{window.location.href="/auth.html?redirect=community"},className:"flex items-center gap-2 bg-[#003366] text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg hover:bg-[#004488] transition-colors",children:[s.jsx(To,{size:14})," 6 ",s.jsx(Ft,{size:14})]})})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-slate-500",children:" "}),s.jsxs("button",{onClick:()=>window.location.href="/maihouses/community-wall_mvp.html",className:"text-xs text-[#003366] font-bold hover:underline flex items-center gap-1",children:["",s.jsx(Ft,{size:12})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"sticky top-24 space-y-4",children:[s.jsx(Dy,{agent:f.agent,onLineClick:()=>M("sidebar"),onCallClick:()=>M("sidebar"),onBookingClick:()=>M("booking")}),s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-100",children:[s.jsxs("h4",{className:"font-bold text-[#003366] text-sm mb-2 flex items-center gap-2",children:[s.jsx(Er,{size:16}),""]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"text-xs text-slate-600 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),""]}),s.jsxs("li",{className:"text-xs text-slate-600 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),""]}),s.jsxs("li",{className:"text-xs text-slate-600 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),""]})]})]})]})})]})]}),s.jsxs("button",{onClick:()=>M("booking"),className:"fixed right-4 bottom-28 lg:bottom-8 z-40 bg-orange-500 hover:bg-orange-600 text-white w-16 h-16 rounded-full shadow-2xl flex flex-col items-center justify-center text-xs font-bold transition-transform hover:scale-110 animate-bounce",style:{animationDuration:"2s"},children:[s.jsx(Dt,{size:22}),s.jsx("span",{className:"text-[10px] mt-0.5",children:"30"})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 p-3 lg:hidden z-50 pb-safe",children:[s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2 text-[10px] text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Er,{size:10,className:"text-green-500"}),""]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(yn,{size:10,className:"text-blue-500"}),C.currentViewers," "]}),C.isHot&&s.jsxs("span",{className:"flex items-center gap-1 text-orange-500 font-medium",children:[s.jsx(rn,{size:10}),""]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>M("mobile_bar"),className:"flex-[4] bg-[#06C755] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[s.jsx(Lt,{size:20})," LINE "]}),s.jsxs("button",{onClick:()=>M("booking"),className:"flex-[6] bg-[#003366] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-blue-900/20",children:[s.jsx(ss,{size:20}),""]})]})]}),s.jsx(By,{isOpen:l,onClose:()=>d(!1),propertyId:f.publicId,propertyTitle:f.title,agentId:S(),agentName:((A=f.agent)==null?void 0:A.name)||"",source:c}),u&&s.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 flex items-center justify-center p-4",onClick:()=>x(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl animate-in zoom-in-95 duration-300",onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(rn,{size:32,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:p||" VIP "})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(tt,{size:16,className:"text-green-500 flex-shrink-0"}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(tt,{size:16,className:"text-green-500 flex-shrink-0"}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(tt,{size:16,className:"text-green-500 flex-shrink-0"}),s.jsx("span",{children:""})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{k.trackLineClick(),x(!1),M("mobile_bar")},className:"w-full bg-[#06C755] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[s.jsx(Lt,{size:20})," LINE "]}),s.jsxs("button",{onClick:()=>{k.trackCallClick(),x(!1),M("booking")},className:"w-full bg-[#003366] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2",children:[s.jsx(ss,{size:20}),"VIP "]}),s.jsx("button",{onClick:()=>x(!1),className:"w-full text-slate-400 text-sm py-2 hover:text-slate-600",children:""})]})]})}),s.jsxs("button",{onClick:()=>y(!0),className:"fixed right-4 bottom-24 z-40 w-14 h-14 bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105 flex items-center justify-center group",title:"",children:[s.jsx(Wr,{size:24}),s.jsx("span",{className:"absolute right-full mr-3 px-3 py-1.5 bg-slate-800 text-white text-sm font-medium rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:""})]}),s.jsx(Wy,{property:{id:f.id,publicId:f.publicId,title:f.title,price:f.price,address:f.address,description:f.description,images:f.images,agent:{id:f.agent.id,name:f.agent.name,avatarUrl:f.agent.avatarUrl,company:f.agent.company,trustScore:f.agent.trustScore,reviewCount:f.agent.encouragementCount}},isOpen:g,onClose:()=>y(!1)})]})},Qy={id:"NONE",name:"",address:"//"};function gc({value:e,address:t,onChange:r,className:n="",required:a=!1}){const[i,o]=h.useState(!1),[l,d]=h.useState(e),[c,m]=h.useState([]),[u,x]=h.useState(!1),[p,b]=h.useState(null),g=h.useRef(null),y=h.useRef(null),f=h.useRef(0),j=w=>{const T=w.match(/([^]+[])/);return(T==null?void 0:T[1])||""},S=async(w,T)=>{if(!w&&!T){m([]);return}y.current&&y.current.abort(),y.current=new AbortController;const O=++f.current;x(!0);try{const A=j(T),E=T?Kn(T):"";if(E){const{data:z}=await le.from("communities").select("id, name, address, property_count, is_verified").eq("address_fingerprint",E).limit(1).abortSignal(y.current.signal);if(O!==f.current)return;if(z&&z.length>0){m(z),x(!1);return}}let _=le.from("communities").select("id, name, address, property_count, is_verified").limit(8);w&&(_=_.ilike("name",`%${w}%`)),A&&(_=_.eq("district",A));const{data:L,error:U}=await _.order("property_count",{ascending:!1}).abortSignal(y.current.signal);if(O!==f.current)return;if(U)throw U;m(L||[])}catch(A){if((A==null?void 0:A.name)==="AbortError")return;console.error(":",A),m([])}finally{O===f.current&&x(!1)}};h.useEffect(()=>{const w=setTimeout(()=>{S(l,t)},300);return()=>clearTimeout(w)},[l,t]),h.useEffect(()=>()=>{y.current&&y.current.abort()},[]),h.useEffect(()=>{const w=T=>{g.current&&!g.current.contains(T.target)&&o(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const N=w=>{b(w),d(w.name);const T=w.id==="NONE"?void 0:w.id;r(w.name,T),o(!1)},I=()=>{b(Qy),d(""),r("",void 0),o(!1)},k=()=>{l.trim()&&(b(null),r(l.trim(),void 0),o(!1))},C=(w=>{const T=w.trim();return T.length<2?{valid:!1,reason:""}:/^(||||||A|B|C|[A-Z]\d*?)$/.test(T)?{valid:!1,reason:""}:/^.*[]\d+?$/.test(T)&&!/|||/.test(T)?{valid:!1,reason:""}:/|||||/.test(T)?{valid:!1,reason:""}:/|||||||||||$/.test(T)?{valid:!0}:T.length>=3&&/^[\u4e00-\u9fa5\d]+$/.test(T)?{valid:!0}:{valid:!1,reason:""}})(l),D=l.trim()&&!c.some(w=>w.name===l.trim())&&C.valid;return s.jsxs("div",{ref:g,className:`relative ${n}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx(Us,{size:16})}),s.jsx("input",{type:"text",value:l,onChange:w=>{d(w.target.value),b(null),o(!0)},onFocus:()=>o(!0),placeholder:"...",className:`
            w-full pl-10 pr-10 py-3 rounded-xl bg-slate-50 border text-sm
            focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none
            ${p?"border-green-300 bg-green-50/50":"border-slate-200"}
          `}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:u?s.jsx(Ts,{size:16,className:"animate-spin text-slate-400"}):p?s.jsx(et,{size:16,className:"text-green-600"}):s.jsx(gn,{size:16,className:"text-slate-400"})})]}),p&&p.name!==""&&s.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[s.jsx(et,{size:12}),"",p.name,"",p.property_count?` (${p.property_count} )`:""]}),p&&p.name===""&&s.jsx("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:" /"}),!p&&l&&C.valid&&s.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",l.trim(),""]}),!p&&l&&!C.valid&&l.length>=2&&s.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",C.reason||"","8"]}),i&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-lg overflow-hidden max-h-80 overflow-y-auto",children:[s.jsxs("button",{onClick:I,className:"w-full px-4 py-3 text-left hover:bg-slate-50 flex items-center gap-3 border-b border-slate-100 bg-slate-50/50",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-200 flex items-center justify-center flex-shrink-0",children:s.jsx(He,{size:16,className:"text-slate-500"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-600",children:""}),s.jsx("span",{className:"text-xs text-slate-400 ml-2",children:""})]})]}),c.map(w=>s.jsxs("button",{onClick:()=>N(w),className:"w-full px-4 py-3 text-left hover:bg-slate-50 flex items-start gap-3 border-b border-slate-100 last:border-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Us,{size:16,className:"text-blue-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-slate-800 truncate",children:w.name}),w.is_verified&&s.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:""})]}),w.address&&s.jsx("p",{className:"text-xs text-slate-500 truncate",children:w.address}),w.property_count?s.jsxs("p",{className:"text-xs text-slate-400",children:[w.property_count," "]}):null]})]},w.id)),D&&s.jsxs("button",{onClick:k,className:"w-full px-4 py-3 text-left hover:bg-amber-50 flex items-center gap-3 bg-amber-50/50 border-t border-amber-100",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-500 flex items-center justify-center flex-shrink-0",children:s.jsx(Cr,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-amber-700",children:""}),s.jsx("span",{className:"text-amber-600 ml-1",children:l.trim()}),s.jsx("p",{className:"text-xs text-amber-600 mt-0.5",children:" "})]})]}),c.length===0&&!D&&l.length>=2&&!u&&s.jsxs("div",{className:"px-4 py-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-slate-100 flex items-center justify-center",children:s.jsx(gn,{size:20,className:"text-slate-400"})}),s.jsx("p",{className:"text-slate-600 text-sm font-medium",children:""}),s.jsx("p",{className:"text-slate-400 text-xs mt-1",children:""})]}),u&&c.length===0&&s.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(w=>s.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-200"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-slate-100 rounded w-1/2"})]})]},w))})]})]})}const Gy=["","","","","","","","","","","","",""],Ky=["LINE","","","","","","bit.ly","tinyurl","","","",""];function xn(e){const t=[],r=e.toLowerCase();for(const n of Gy)e.includes(n)&&t.push({type:"sensitive",word:n,message:`${n}`});for(const n of Ky)r.includes(n.toLowerCase())&&t.push({type:"ad",word:n,message:`${n}`});return{passed:t.length===0,issues:t}}const Me={advantage:{minLength:5},disadvantage:{minLength:10},communityName:{minLength:2},title:{minLength:1},price:{minLength:1},address:{minLength:5},images:{minCount:1,maxSizeMB:10}},Yy=["image/jpeg","image/jpg","image/png","image/webp","image/heic","image/heif"],Jy=Me.images.maxSizeMB*1024*1024;function Xy(e){if(!Yy.includes(e.type))return{valid:!1,file:e,error:`${e.type||""} JPGPNG  WebP`};if(e.size>Jy){const t=(e.size/1024/1024).toFixed(1);return{valid:!1,file:e,error:`${t}MB ${Me.images.maxSizeMB}MB`}}return{valid:!0,file:e}}function e1(e){const t=e.map(Xy),r=t.filter(a=>a.valid).map(a=>a.file),n=t.filter(a=>!a.valid);return{validFiles:r,invalidFiles:n,allValid:n.length===0}}function t1(e,t){return h.useMemo(()=>{const n=[],a=e.title.length>=Me.title.minLength,i=a?"":"";!a&&e.title.length>0&&n.push({field:"title",message:i});const o=e.price.length>=Me.price.minLength&&/^\d+$/.test(e.price),l=e.price?o?"":"":"";!o&&e.price.length>0&&n.push({field:"price",message:l});const d=e.address.length>=Me.address.minLength,c=e.address.length===0?"":d?"":` ${Me.address.minLength} `;!d&&e.address.length>0&&n.push({field:"address",message:c});const m=e.communityName===""||e.communityName.length>=Me.communityName.minLength,u=m?"":"";!m&&e.communityName.length>0&&n.push({field:"communityName",message:u});const x=e.advantage1.length,p=x>=Me.advantage.minLength,b=p?"":` ${Me.advantage.minLength-x} `;!p&&x>0&&n.push({field:"advantage1",message:`1${b}`});const g=e.advantage2.length,y=g>=Me.advantage.minLength,f=y?"":` ${Me.advantage.minLength-g} `;!y&&g>0&&n.push({field:"advantage2",message:`2${f}`});const j=e.disadvantage.length,S=j>=Me.disadvantage.minLength,N=S?"":` ${Me.disadvantage.minLength-j} `;!S&&j>0&&n.push({field:"disadvantage",message:`${N}`});const I=[];let k=!1;const M=e.advantage1.length>0?xn(e.advantage1):null,C=e.advantage2.length>0?xn(e.advantage2):null,D=e.disadvantage.length>0?xn(e.disadvantage):null,w=!M||M.passed?void 0:M.issues.map(H=>H.message).join(""),T=!C||C.passed?void 0:C.issues.map(H=>H.message).join(""),O=!D||D.passed?void 0:D.issues.map(H=>H.message).join(""),A=H=>H?H.issues.some(Z=>Z.type==="sensitive"):!1;if(M&&!M.passed){const H=`1${w}`;I.push(H),A(M)&&(k=!0,n.push({field:"advantage1",message:w}))}if(C&&!C.passed){const H=`2${T}`;I.push(H),A(C)&&(k=!0,n.push({field:"advantage2",message:T}))}if(D&&!D.passed){const H=`${O}`;I.push(H),A(D)&&(k=!0,n.push({field:"disadvantage",message:O}))}const E=t>=Me.images.minCount,_=E?"":"";E||n.push({field:"images",message:_});const L=a&&o&&d&&m,U=p&&y&&S,z=L&&U&&E,W=z&&!k;return{title:{valid:a,message:i},price:{valid:o,message:l},address:{valid:d,message:c},communityName:{valid:m,message:u},advantage1:{valid:p,message:b,charCount:x,...w&&{contentWarning:w}},advantage2:{valid:y,message:f,charCount:g,...T&&{contentWarning:T}},disadvantage:{valid:S,message:N,charCount:j,...O&&{contentWarning:O}},images:{valid:E,message:_,count:t},adv1Valid:p,adv2Valid:y,disValid:S,communityValid:m,basicValid:L,twoGoodOneFairValid:U,allValid:z,canSubmit:W,contentCheck:{hasIssues:I.length>0,blockSubmit:k,warnings:I},errors:n}},[e,t])}const s1=()=>{const e=Xn(),t=h.useRef(null),[r,n]=h.useState(!1),[a,i]=h.useState(null),[o,l]=h.useState([]),[d,c]=h.useState([]),[m,u]=h.useState(null),[x,p]=h.useState(),[b,g]=h.useState(null),[y,f]=h.useState(!1),[j,S]=h.useState({title:"",price:"",address:"",communityName:"",size:"",age:"",floorCurrent:"",floorTotal:"",rooms:"3",halls:"2",bathrooms:"2",type:"",description:"",advantage1:"",advantage2:"",disadvantage:"",sourceExternalId:""});h.useEffect(()=>{le.auth.getUser().then(({data:A})=>{u(A.user)})},[]);const N=A=>{S({...j,[A.target.name]:A.target.value})},I=(A,E)=>{S({...j,communityName:A}),p(E)},k=t1({title:j.title,price:j.price,address:j.address,communityName:j.communityName,advantage1:j.advantage1,advantage2:j.advantage2,disadvantage:j.disadvantage},d.length),M=k.canSubmit,C=()=>{prompt(" 591 ")&&(n(!0),setTimeout(()=>{S(E=>({...E,title:"",price:"2880",address:"",size:"45.2",sourceExternalId:"591-MOCK-ID"})),n(!1)},1e3))},D=A=>{if(A.target.files&&A.target.files.length>0){const E=Array.from(A.target.files),{validFiles:_,invalidFiles:L,allValid:U}=e1(E);if(U||L.forEach(({file:z,error:W})=>{J.warning(`${z.name} `,W||"",{duration:5e3})}),_.length>0){c(W=>[...W,..._]);const z=_.map(W=>URL.createObjectURL(W));l(W=>[...W,...z])}}},w=A=>{l(E=>E.filter((_,L)=>L!==A)),c(E=>E.filter((_,L)=>L!==A))},T=async()=>{if(!k.basicValid){J.error("",k.errors.filter(A=>["title","price","address","communityName"].includes(A.field)).map(A=>A.message).join(""));return}if(!k.twoGoodOneFairValid){J.error("",` ${Me.advantage.minLength}  ${Me.disadvantage.minLength} `);return}if(!k.images.valid){J.error("","");return}n(!0),i({current:0,total:d.length});try{const A=await Fr.uploadImages(d,{concurrency:3,onProgress:(_,L)=>i({current:_,total:L})});if(!A.allSuccess){const _=A.failed.map(L=>L.file.name).join("");J.warning("",`${_} `,{duration:5e3})}if(A.urls.length===0)throw new Error("");const E=await Fr.createPropertyWithForm(j,A.urls,x);J.success(" ",`${E.public_id}`,{duration:3e3}),g({public_id:E.public_id,community_id:E.community_id,community_name:E.community_name||j.communityName,is_new_community:!x&&E.community_id!==null}),f(!0)}catch(A){console.error("Publish error:",A),J.error("",(A==null?void 0:A.message)||"",{actionLabel:"",onAction:T,duration:5500})}finally{n(!1),i(null)}},O="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none text-sm";return y&&b?s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsx("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 h-16 flex items-center px-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center text-[#003366] font-extrabold text-xl gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#003366] to-[#00A8E8] rounded-lg flex items-center justify-center text-white",children:s.jsx(He,{size:18})}),""]})}),s.jsxs("main",{className:"max-w-lg mx-auto p-6 py-12",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(et,{size:40,className:"text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:" "}),s.jsxs("p",{className:"text-slate-500 mt-2",children:["",b.public_id]})]}),b.community_name&&b.community_name!==""&&s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx(Us,{size:20,className:"text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-lg font-medium text-[#003366] mt-1",children:b.community_name}),b.is_new_community?s.jsxs("p",{className:"text-sm text-amber-600 mt-1 flex items-center gap-1",children:[s.jsx(Ct,{size:14}),""]}):s.jsxs("p",{className:"text-sm text-green-600 mt-1 flex items-center gap-1",children:[s.jsx(et,{size:14}),""]})]})]}),b.community_id&&s.jsx(Bs,{to:`/community/${b.community_id}`,className:"mt-4 block w-full text-center py-2 bg-blue-50 text-blue-600 rounded-xl text-sm font-medium hover:bg-blue-100 transition",children:" "})]}),b.community_name&&b.community_name!==""&&s.jsxs("section",{className:"bg-amber-50 p-4 rounded-2xl border border-amber-200 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[s.jsx(Ct,{size:18}),s.jsx("span",{className:"font-medium",children:""})]}),s.jsx("p",{className:"text-sm text-amber-700 mt-2",children:""}),s.jsxs("button",{onClick:()=>{e(`/property/${b.public_id}/edit?fix=community`)},className:"mt-3 w-full py-2 bg-amber-100 text-amber-800 rounded-xl text-sm font-medium hover:bg-amber-200 transition flex items-center justify-center gap-2",children:[s.jsx(Xc,{size:16}),""]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Bs,{to:`/property/${b.public_id}`,className:"block w-full py-4 bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white rounded-xl font-bold text-center shadow-lg",children:""}),s.jsx("button",{onClick:()=>{f(!1),g(null),S({title:"",price:"",address:"",communityName:"",size:"",age:"",floorCurrent:"",floorTotal:"",rooms:"3",halls:"2",bathrooms:"2",type:"",description:"",advantage1:"",advantage2:"",disadvantage:"",sourceExternalId:""}),l([]),c([]),p(void 0)},className:"block w-full py-3 bg-slate-100 text-slate-600 rounded-xl font-medium text-center hover:bg-slate-200 transition",children:""})]})]})]}):s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 h-16 flex items-center px-4 shadow-sm justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx(sa,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center text-[#003366] font-extrabold text-xl gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#003366] to-[#00A8E8] rounded-lg flex items-center justify-center text-white",children:s.jsx(He,{size:18})}),""]})]}),s.jsxs("button",{onClick:C,disabled:r,className:"text-xs bg-blue-50 text-[#00A8E8] px-3 py-1.5 rounded-lg font-bold hover:bg-blue-100 flex items-center gap-1 border border-blue-100",children:[r?s.jsx(Ts,{size:12,className:"animate-spin"}):s.jsx(ed,{size:12}),"591 "]})]}),s.jsxs("main",{className:"max-w-2xl mx-auto p-4 pb-32 space-y-5",children:[s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-[#003366] mb-4 flex items-center gap-2",children:[s.jsx(He,{size:18})," "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:" *"}),s.jsx("input",{name:"title",value:j.title,onChange:N,className:O+" font-bold",placeholder:"101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:" () *"}),s.jsx("input",{name:"price",type:"number",value:j.price,onChange:N,className:O,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:" *"}),s.jsx("input",{name:"address",value:j.address,onChange:N,className:O,placeholder:"..."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:[" * ",s.jsx("span",{className:"text-slate-400",children:"(/)"})]}),s.jsx(gc,{value:j.communityName,address:j.address,onChange:I,required:!0}),!k.communityValid&&j.communityName.length>0&&s.jsx("p",{className:"text-[10px] text-red-500 mt-1",children:"2"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"size",type:"number",value:j.size,onChange:N,className:O,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"age",type:"number",value:j.age,onChange:N,className:O,placeholder:"0"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsxs("select",{name:"type",value:j.type,onChange:N,className:O,children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"rooms",type:"number",value:j.rooms,onChange:N,className:O})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"halls",type:"number",value:j.halls,onChange:N,className:O})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"bathrooms",type:"number",value:j.bathrooms,onChange:N,className:O})]})]})]})]}),s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Er,{className:"text-orange-500",size:20}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-[#003366]",children:""}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1.5 font-medium text-green-700 mb-1 text-xs",children:[s.jsx(wn,{size:14}),"  1 ( 5 )"]}),s.jsx("input",{name:"advantage1",value:j.advantage1,onChange:N,className:O+(k.adv1Valid?" border-green-300 bg-green-50/50":"")+(k.advantage1.contentWarning?" border-red-300":""),placeholder:""}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-xs "+(k.adv1Valid?"text-green-600":"text-slate-400"),children:[j.advantage1.length,"/5  ",k.adv1Valid&&""]}),k.advantage1.contentWarning&&s.jsxs("span",{className:"text-xs text-red-500 flex items-center gap-1",children:[s.jsx(Ct,{size:12})," ",k.advantage1.contentWarning]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1.5 font-medium text-green-700 mb-1 text-xs",children:[s.jsx(wn,{size:14}),"  2 ( 5 )"]}),s.jsx("input",{name:"advantage2",value:j.advantage2,onChange:N,className:O+(k.adv2Valid?" border-green-300 bg-green-50/50":"")+(k.advantage2.contentWarning?" border-red-300":""),placeholder:""}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-xs "+(k.adv2Valid?"text-green-600":"text-slate-400"),children:[j.advantage2.length,"/5  ",k.adv2Valid&&""]}),k.advantage2.contentWarning&&s.jsxs("span",{className:"text-xs text-red-500 flex items-center gap-1",children:[s.jsx(Ct,{size:12})," ",k.advantage2.contentWarning]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1.5 font-medium text-orange-700 mb-1 text-xs",children:[s.jsx(td,{size:14}),"  ( 10 )"]}),s.jsx("input",{name:"disadvantage",value:j.disadvantage,onChange:N,className:O+(k.disValid?" border-orange-300 bg-orange-50/50":"")+(k.disadvantage.contentWarning?" border-red-300":""),placeholder:""}),s.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[s.jsxs("span",{className:"text-xs "+(k.disValid?"text-orange-600":"text-red-400"),children:[j.disadvantage.length,"/10  ",k.disValid?"":"()"]}),k.disadvantage.contentWarning&&s.jsxs("span",{className:"text-xs text-red-500 flex items-center gap-1",children:[s.jsx(Ct,{size:12})," ",k.disadvantage.contentWarning]})]})]})]}),k.contentCheck.hasIssues&&s.jsxs("div",{className:`mt-4 p-3 rounded-lg flex items-start gap-2 ${k.contentCheck.blockSubmit?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:[s.jsx(Ct,{className:k.contentCheck.blockSubmit?"text-red-500":"text-yellow-600",size:18}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${k.contentCheck.blockSubmit?"text-red-700":"text-yellow-700"}`,children:k.contentCheck.blockSubmit?"":""}),s.jsx("ul",{className:"text-xs text-slate-600 mt-1 space-y-0.5",children:k.contentCheck.warnings.map((A,E)=>s.jsxs("li",{children:[" ",A]},E))})]})]})]}),s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-[#003366] mb-4 flex items-center gap-2",children:[s.jsx(ta,{size:18,className:"text-yellow-500"})," "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("textarea",{name:"description",value:j.description,onChange:N,rows:4,className:O+" resize-none",placeholder:"..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:[" * ",s.jsx("span",{className:"text-slate-400",children:"( 1 )"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[o.map((A,E)=>s.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden relative group border border-slate-200",children:[s.jsx("img",{src:A,alt:"",className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>w(E),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition",children:s.jsx(As,{size:12})}),E===0&&s.jsx("span",{className:"absolute bottom-1 left-1 bg-[#003366] text-white text-[10px] px-1.5 py-0.5 rounded",children:""})]},E)),s.jsxs("button",{onClick:()=>{var A;return(A=t.current)==null?void 0:A.click()},className:"aspect-square rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-slate-400 hover:border-[#00A8E8] hover:text-[#00A8E8] transition-colors",children:[s.jsx(zo,{size:24}),s.jsx("span",{className:"text-xs mt-1",children:""})]}),s.jsx("input",{type:"file",multiple:!0,ref:t,onChange:D,className:"hidden",accept:"image/*"})]})]})]})]}),(j.title||j.price||o.length>0)&&s.jsxs("section",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-500 mb-3 flex items-center gap-2",children:[s.jsx(Xs,{size:14})," "]}),s.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[o.length>0&&s.jsx("div",{className:"aspect-video",children:s.jsx("img",{src:o[0],alt:"",className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:"font-bold text-slate-900",children:j.title||""}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:j.address||""}),s.jsxs("div",{className:"flex items-baseline gap-1 mt-2",children:[s.jsx("span",{className:"text-xl font-extrabold text-[#003366]",children:j.price||"0"}),s.jsx("span",{className:"text-sm text-slate-500",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:[j.type,j.size&&j.size+"",j.rooms+""+j.halls+""+j.bathrooms+""].filter(Boolean).map((A,E)=>s.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-[#003366] text-xs rounded-full",children:A},E))}),j.communityName&&s.jsx("div",{className:"mt-3 pt-2 border-t border-slate-100 text-xs text-slate-500",children:s.jsxs("span",{className:"flex items-center gap-1",children:[" ",s.jsx("span",{className:x?"text-green-600 font-medium":"text-blue-600 font-medium",children:j.communityName}),x?s.jsx("span",{className:"text-green-600",children:""}):s.jsx("span",{className:"text-blue-600",children:""})]})})]})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 p-4 z-50",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("button",{onClick:T,disabled:r||!M,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all "+(M?"bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg shadow-blue-900/20 hover:scale-[1.01]":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:[r?s.jsx(Ts,{className:"animate-spin",size:20}):s.jsx(et,{size:20}),r?"...":M?"":""]}),!M&&s.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs text-slate-400",children:[s.jsx("span",{className:k.basicValid?"text-green-600":"",children:k.basicValid?" ":" "}),s.jsx("span",{className:k.twoGoodOneFairValid?"text-green-600":"",children:k.twoGoodOneFairValid?" ":" "}),s.jsx("span",{className:d.length>0?"text-green-600":"",children:d.length>0?" ":" "})]})]})})]})},r1=()=>{const{publicId:e}=Br(),[t]=Ur(),r=Xn(),[n,a]=h.useState(!0),[i,o]=h.useState(!1),[l,d]=h.useState(null),[c,m]=h.useState(null),[u,x]=h.useState(""),[p,b]=h.useState(),[g,y]=h.useState(!1),f=t.get("fix")==="community";h.useEffect(()=>{(async()=>{if(e)try{const{data:I,error:k}=await le.from("properties").select("id, public_id, title, address, community_id, community_name").eq("public_id",e).single();if(k)throw k;d(I),x(I.community_name||""),b(I.community_id||void 0)}catch(I){m(""+I.message)}finally{a(!1)}})()},[e]);const j=(N,I)=>{x(N),b(I),y(N!==(l==null?void 0:l.community_name)||I!==(l==null?void 0:l.community_id))},S=async()=>{if(!(!l||!g)){o(!0);try{const{error:N}=await le.from("properties").update({community_id:p||null,community_name:u||null}).eq("id",l.id);if(N)throw N;r(`/property/${e}`,{state:{message:""}})}catch(N){m(""+N.message)}finally{o(!1)}}};return n?s.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center",children:s.jsx(Ts,{className:"animate-spin text-[#003366]",size:40})}):c||!l?s.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ct,{size:48,className:"text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600",children:c||""}),s.jsx("button",{onClick:()=>r(-1),className:"mt-4 text-blue-600 underline",children:""})]})}):s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 h-16 flex items-center px-4 shadow-sm",children:[s.jsx("button",{onClick:()=>r(-1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors mr-3",children:s.jsx(sa,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center text-[#003366] font-extrabold text-xl gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#003366] to-[#00A8E8] rounded-lg flex items-center justify-center text-white",children:s.jsx(He,{size:18})}),f?"":""]})]}),s.jsxs("main",{className:"max-w-lg mx-auto p-6 py-8",children:[s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm mb-6",children:[s.jsx("h2",{className:"font-bold text-slate-800 mb-2",children:l.title}),s.jsx("p",{className:"text-sm text-slate-500",children:l.address}),s.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["",l.public_id]})]}),s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Us,{className:"text-blue-600",size:20}),s.jsx("h3",{className:"font-bold text-slate-800",children:""})]}),s.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-xl",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:""}),s.jsx("p",{className:"font-medium text-slate-700",children:l.community_name||""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:""}),s.jsx(gc,{value:u,address:l.address,onChange:j,required:!0})]}),g&&s.jsx("div",{className:"mt-4 p-3 bg-amber-50 rounded-xl border border-amber-200",children:s.jsxs("p",{className:"text-sm text-amber-700 flex items-center gap-2",children:[s.jsx(Ct,{size:16}),"",s.jsx("span",{className:"font-medium",children:u||""})]})})]}),s.jsx("button",{onClick:S,disabled:!g||i,className:`
            w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all
            ${g&&!i?"bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg hover:scale-[1.01]":"bg-slate-200 text-slate-400 cursor-not-allowed"}
          `,children:i?s.jsxs(s.Fragment,{children:[s.jsx(Ts,{className:"animate-spin",size:20}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(sd,{size:20}),g?"":""]})}),s.jsx("button",{onClick:()=>r(-1),className:"w-full mt-3 py-3 bg-slate-100 text-slate-600 rounded-xl font-medium hover:bg-slate-200 transition",children:""})]})]})},n1=new Ad({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});function a1(){const[e,t]=h.useState(null),r=So();return h.useEffect(()=>{Jo().then(t)},[]),h.useEffect(()=>{e&&ca("page_view",r.pathname)},[r,e]),e?s.jsx(Pd,{client:n1,children:s.jsx(Eu,{children:s.jsxs(Mf,{children:[s.jsx(vu,{position:"top-right",theme:"light",richColors:!0,closeButton:!0,toastOptions:{duration:3200}}),s.jsxs(Cc,{children:[s.jsx(Ye,{path:"/",element:s.jsx(ot,{children:s.jsx(lp,{config:e})})}),s.jsx(Ye,{path:"/uag",element:s.jsx($y,{})}),s.jsx(Ye,{path:"/community/:id/wall",element:s.jsx(ot,{children:s.jsx(bf,{})})}),s.jsx(Ye,{path:"/community/suggested",element:s.jsx(ot,{children:s.jsx(vf,{})})}),s.jsx(Ye,{path:"/property/upload",element:s.jsx(ot,{children:s.jsx(s1,{})})}),s.jsx(Ye,{path:"/property/:publicId/edit",element:s.jsx(ot,{children:s.jsx(r1,{})})}),s.jsx(Ye,{path:"/property/:id",element:s.jsx(ot,{children:s.jsx(Vy,{})})}),s.jsx(Ye,{path:"/p/:id",element:s.jsx(ot,{children:s.jsx(If,{})})}),s.jsx(Ye,{path:"/maihouses/trust/room",element:s.jsx(ot,{children:s.jsx(Di,{})})}),s.jsx(Ye,{path:"/assure",element:s.jsx(ot,{children:s.jsx(Di,{})})}),s.jsx(Ye,{path:"/chat",element:s.jsx(ot,{children:s.jsx(Af,{})})}),s.jsx(Ye,{path:"/r/:id",element:s.jsx(ot,{children:s.jsx(Hy,{})})})]},r.pathname),!1,e.devtools==="1"&&s.jsx(qm,{config:e}),s.jsx(Rf,{})]})})}):s.jsx("div",{className:"p-6 text-sm text-[var(--text-secondary)]",children:""})}const po=document.getElementById("root");if(po){const e=window.location.pathname.startsWith("/maihouses")?"/maihouses":"/";jn.createRoot(po).render(s.jsx($.StrictMode,{children:s.jsx(Ec,{basename:e,children:s.jsx(a1,{})})}))}export{Jo as g};
//# sourceMappingURL=index-CtR7tXrs.js.map
