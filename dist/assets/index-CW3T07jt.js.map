{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","Subscribable","listener","defaultTimeoutProvider","callback","delay","timeoutId","intervalId","TimeoutManager","_a","__privateAdd","_provider","_providerCalled","provider","__privateSet","__privateGet","timeoutManager","systemSetTimeoutZero","isServer","noop","functionalUpdate","updater","input","isValidTimeout","value","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","options","_","val","isPlainObject","result","key","hasOwn","replaceEqualDeep","array","isPlainArray","aSize","bItems","bSize","copy","equalItems","i","aItem","bItem","v","shallowEqualObjects","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","replaceData","prevData","data","addToEnd","items","item","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","shouldThrowError","throwOnError","params","FocusManager","_focused","_cleanup","_setup","onFocus","setup","focused","isFocused","focusManager","pendingThenable","reject","thenable","_resolve","_reject","finalize","reason","defaultScheduler","createNotifyManager","queue","transactions","notifyFn","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","args","fn","notifyManager","OnlineManager","_online","onOnline","onlineListener","offlineListener","online","onlineManager","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","createRetryer","config","isRetryCancelled","continueFn","isResolved","cancel","cancelOptions","error","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","retry","retryDelay","shouldRetry","Removable","_gcTimeout","newGcTime","Query","_Query_instances","_initialState","_revertState","_cache","_client","_retryer","_defaultOptions","_abortSignalConsumed","getDefaultState","defaultState","successState","newData","__privateMethod","dispatch_fn","state","setStateOptions","promise","_b","observer","x","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","queryFnContext2","context","context2","_c","_d","_f","_e","_h","_g","_j","_i","_l","_k","action","reducer","fetchState","newState","dataUpdatedAt","hasData","initialDataUpdatedAt","QueryObserver","_QueryObserver_instances","_currentQuery","_currentQueryInitialState","_currentResult","_currentResultState","_currentResultOptions","_currentThenable","_selectError","_selectFn","_selectResult","_lastQueryWithDefinedData","_staleTimeoutId","_refetchIntervalId","_currentRefetchInterval","_trackedProps","shouldFetchOnMount","executeFetch_fn","updateTimers_fn","shouldFetchOn","clearStaleTimeout_fn","clearRefetchInterval_fn","prevOptions","prevQuery","updateQuery_fn","mounted","shouldFetchOptionally","updateStaleTimeout_fn","nextRefetchInterval","computeRefetchInterval_fn","updateRefetchInterval_fn","shouldAssignObserverCurrentProperties","onPropTracked","target","defaultedOptions","prevResult","prevResultState","prevResultOptions","queryInitialState","isPlaceholderData","fetchOnMount","fetchOptionally","errorUpdatedAt","skipSelect","placeholderData","selectError","isFetching","isPending","isError","isLoading","nextResult","isStale","finalizeThenableIfPossible","recreateThenable","pending","prevThenable","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","notify_fn","nextInterval","notifyOptions","shouldLoadOnMount","field","optimisticResult","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","Mutation","_Mutation_instances","_observers","_mutationCache","variables","onContinue","mutationFnContext","restored","isPaused","_n","_m","_p","_o","_r","_q","_t","_s","MutationCache","_mutations","_scopes","_mutationId","__privateWrapper","scope","scopeFor","scopedMutations","index","mutationsWithSameScope","firstPendingMutation","foundMutation","defaultedFilters","event","pausedMutations","MutationObserver","_MutationObserver_instances","_currentMutation","_mutateOptions","updateResult_fn","onMutateResult","QueryCache","_queries","queryHash","queryInMap","queries","QueryClient","_queryCache","_queryDefaults","_mutationDefaults","_mountCount","_unsubscribeFocus","_unsubscribeOnline","cachedData","queryCache","defaultedCancelOptions","promises","defaults","queryDefault","QueryClientContext","React.createContext","useQueryClient","queryClient","React.useContext","QueryClientProvider","children","React.useEffect","jsx","IsRestoringContext","useIsRestoring","createValue","isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","QueryErrorResetBoundary","React.useState","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","getHasError","suspense","ensureSuspenseTimers","clamp","originalStaleTime","willFetch","isRestoring","shouldSuspend","fetchOptimistic","useBaseQuery","Observer","isNewCacheEntry","shouldSubscribe","React.useSyncExternalStore","React.useCallback","onStoreChange","unsubscribe","useQuery","useMutation","mutate","mutateOptions","__insertCSS","code","head","style","getAsset","SuccessIcon","InfoIcon","WarningIcon","ErrorIcon","bars","Loader","visible","className","React","CloseIcon","useIsDocumentHidden","isDocumentHidden","setIsDocumentHidden","toastsCounter","subscriber","_data_id","message","rest","id","alreadyExists","toast","dismissible","shouldDismiss","originalPromise","response","isHttpResponse","promiseData","description","toastSettings","unwrap","ToastState","toastFunction","basicToast","getHistory","getToasts","isAction","VISIBLE_TOASTS_AMOUNT","VIEWPORT_OFFSET","MOBILE_VIEWPORT_OFFSET","TOAST_LIFETIME","TOAST_WIDTH","GAP","SWIPE_THRESHOLD","TIME_BEFORE_UNMOUNT","cn","classes","getDefaultSwipeDirections","position","y","directions","Toast","props","_toast_classNames","_toast_classNames1","_toast_classNames2","_toast_classNames3","_toast_classNames4","_toast_classNames5","_toast_classNames6","_toast_classNames7","_toast_classNames8","ToasterInvert","unstyled","interacting","setHeights","visibleToasts","heights","toasts","expanded","removeToast","defaultRichColors","closeButtonFromToaster","cancelButtonStyle","actionButtonStyle","descriptionClassName","durationFromToaster","gap","expandByDefault","classNames","icons","closeButtonAriaLabel","swipeDirection","setSwipeDirection","swipeOutDirection","setSwipeOutDirection","setMounted","removed","setRemoved","swiping","setSwiping","swipeOut","setSwipeOut","isSwiped","setIsSwiped","offsetBeforeRemove","setOffsetBeforeRemove","initialHeight","setInitialHeight","remainingTime","dragStartTime","toastRef","isFront","isVisible","toastType","toastClassname","toastDescriptionClassname","heightIndex","height","closeButton","_toast_closeButton","duration","closeTimerStartTimeRef","offset","lastCloseTimerStartTimeRef","pointerStartRef","toastsHeightBefore","prev","curr","reducerIndex","invert","disabled","toastNode","originalHeight","newHeight","deleteToast","elapsedTime","getLoadingIcon","icon","_toast_richColors","_icons_close","_toastRef_current","_toastRef_current1","_dragStartTime_current","swipeAmountX","swipeAmountY","timeTaken","swipeAmount","velocity","_toastRef_current2","_toastRef_current3","_window_getSelection","yDelta","xDelta","_props_swipeDirections","swipeDirections","getDampening","delta","dampenedDelta","getDocumentDirection","dirAttribute","assignOffset","defaultOffset","mobileOffset","styles","isMobile","prefix","defaultValue","assignAll","Toaster","ref","hotkey","expand","theme","richColors","toastOptions","dir","containerAriaLabel","setToasts","filteredToasts","possiblePositions","setExpanded","setInteracting","actualTheme","setActualTheme","listRef","hotkeyLabel","lastFocusedElementRef","isFocusWithinRef","toastToRemove","_toasts_find","t","ReactDOM","indexOfExistingToast","darkMediaQuery","matches","handleKeyDown","_listRef_current","_listRef_current1","_heights_","_toastOptions_duration","_toastOptions_closeButton","LS","fetchJson","url","isValidConfig","obj","readBase","cache","parsed","pickParams","getParamFromBoth","search","slots","features","s","getConfig","base","merged","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","arr","randomUUID","native","v4","buf","rnds","track","payload","Events","STORAGE_KEY","QuietModeContext","createContext","readStorage","raw","writeStorage","QuietModeProvider","setState","useState","tickRef","useRef","useCallback","now","useEffect","saved","startQuiet","opts","minutes","turns","untilTs","next","clearQuiet","decrementTurn","left","cleared","useMemo","isQuietActiveFromStorage","FIRST_SEEN_KEY","WARM_DISMISS_KEY","loadProfile","saveProfile","upsertTags","newTags","set","setLastMood","mood","ensureFirstSeen","dismissWarmbarToday","todayStr","isWarmbarDismissedToday","getWarmTags","day","diffDays","ad","bd","getMilestoneHint","ms","hint","nearAnnual","dateStr","days","label","thisYear","MAIMAI_SYSTEM_PROMPT","QUICK_TAGS_LIFESTYLE","QUICK_TAGS_EXPLORE","detectUserState","accumulatedTags","msg","totalScore","score","painPoints","loadPainPointsFromStorage","stored","TAG_WEIGHTS","accumulateTags","keyword","weight","category","current","getAccumulatedTags","getTotalScore","total","getTopCategory","topCategory","topScore","resetAccumulatedTags","EXIT_PATTERNS","detectExitSignal","signal","patterns","userProfile","extractUserProfile","extracted","workPatterns","pattern","match","homePatterns","lifestyleMap","saveUserProfileToStorage","getUserProfile","loadUserProfileFromStorage","getWarmthLevel","totalConversationRounds","detectTimeContext","hour","TIME_PROMPTS","getTimePrompt","assessTiming","pureChitchatRounds","updateChitchatCounter","userState","resetChitchatCounter","getIntimacyLevel","rounds","saveIntimacyToStorage","storedRounds","LIFE_ANCHOR_QUESTIONS","pickLifeAnchorQuestion","idx","question","analyzeEmotionalState","w","frustratedWords","stressWords","confusedWords","curiousWords","happyWords","hasPaved","pavedCategory","markPaved","checkPaved","resetPaved","detectPaveInterest","currentBridgeTopic","setCurrentBridgeTopic","bridge","getCurrentBridgeTopic","determineRecommendationPhase","timing","emotionalState","chitchatRounds","userShowedInterest","COMMUNITY_BY_CATEGORY","getCommunityByCategory","detectMessageStyle","hasEmoji","length","detectRejection","resetAllState","buildEnhancedPrompt","recommendationPhase","messageStyle","prompt","stateGuide","anchorQ","bridgeTopic","community","styleHint","generateLifeProfileSummary","accTags","tagDescriptions","concerns","saveVisitMemory","memory","loadVisitMemory","generateReturnGreeting","daysSinceLastVisit","greetings","updateVisitMemory","existing","FEW_SHOT_SCRIPTS","shouldTriggerLifeProfile","NEED_COMMUNITY_MAP","getSuggestedCommunities","NEGATIVE_EMOTION_PATTERNS","detectNegativeEmotion","generateCareResponse","responses","buyingReadiness","updateBuyingReadiness","saveBuyingReadinessToStorage","getBuyingReadinessScore","isReadyToBook","loadBuyingReadinessFromStorage","MINI_QUIZZES","hasShownQuiz","shouldShowQuiz","getRandomQuiz","quiz","firstQuiz","SYS_ZEN","justChatMode","SYS_JUST_CHAT","setJustChatMode","shouldExitJustChatMode","composeSystemPrompt","recentMessages","profileTags","lastUserMsg","careResponse","exitSignal","paveStatus","basePrompt","profileSummary","warmthStrategy","warmthPrompt","timePrompt","profilePrompt","communityPrompt","suggestedCommunities","readinessPrompt","readinessScore","quizPrompt","tone","debugInfo","postLLM","messages","optionsOrCallback","maybeOptions","onChunk","systemPrompt","res","reader","decoder","fullText","done","lines","line","content","politeRewrite","draft","who","why","empathicEcho","note","eli5Term","termOrPara","debriefToMNA","like","pain","sessionId","uuidv4","getSessionId","apiFetch","endpoint","cfg","method","baseHeaders","userHeaders","headers","mockHandler","__vitePreload","controller","getMeta","DevTools","setVisible","mock","setMock","latency","setLatency","setError","setQ","backend","setBackend","mockSeed","setMockSeed","r","apply","reseed","jsxs","KEY","CAP","MAX_BATCH","G","save","MAX","batch","ids","ra","tick","trackEvent","targetId","ev","Logo","showSlogan","onClick","href","showBadge","Content","Header","onOpenAIStudio","mobileMenuOpen","setMobileMenuOpen","Fragment","List","LogIn","UserPlus","X","Menu","Search","text","MascotHouse","animated","phase","setPhase","interval","expr","eyeSize","getMouth","HERO_STEPS","Phone","ScanEye","HandCoins","MessageSquareText","Landmark","KeyRound","COMMUNITY_REVIEWS","PROPERTIES","clsx","concatArrays","array1","array2","combinedArray","createClassValidatorObject","classGroupId","validator","createClassPartObject","nextPart","validators","CLASS_PART_SEPARATOR","EMPTY_CONFLICTS","ARBITRARY_PROPERTY_PREFIX","createClassGroupUtils","classMap","createClassMap","conflictingClassGroups","conflictingClassGroupModifiers","getGroupIdForArbitraryProperty","classParts","startIndex","getGroupRecursive","hasPostfixModifier","modifierConflicts","baseConflicts","classPartObject","currentClassPart","nextClassPartObject","classRest","validatorsLength","validatorObj","colonIndex","property","classGroups","processClassGroups","group","processClassesRecursively","classGroup","len","classDefinition","processClassDefinition","processStringDefinition","processFunctionDefinition","processObjectDefinition","classPartObjectToEdit","getPart","isThemeGetter","entries","path","parts","part","func","createLruCache","maxCacheSize","cacheSize","previousCache","update","IMPORTANT_MODIFIER","MODIFIER_SEPARATOR","EMPTY_MODIFIERS","createResultObject","modifiers","hasImportantModifier","baseClassName","maybePostfixModifierPosition","isExternal","createParseClassName","experimentalParseClassName","parseClassName","bracketDepth","parenDepth","modifierStart","postfixModifierPosition","currentCharacter","baseClassNameWithImportantModifier","fullPrefix","parseClassNameOriginal","createSortModifiers","modifierWeights","mod","currentSegment","modifier","isArbitrary","isOrderSensitive","createConfigUtils","SPLIT_CLASSES_REGEX","mergeClassList","classList","configUtils","getClassGroupId","getConflictingClassGroupIds","sortModifiers","classGroupsInConflict","originalClassName","variantModifier","modifierId","classId","conflictGroups","twJoin","classLists","argument","resolvedValue","string","toValue","mix","createTailwindMerge","createConfigFirst","createConfigRest","cacheGet","cacheSet","functionToCall","initTailwindMerge","previousConfig","createConfigCurrent","tailwindMerge","cachedResult","fallbackThemeArr","fromTheme","themeGetter","arbitraryValueRegex","arbitraryVariableRegex","fractionRegex","tshirtUnitRegex","lengthUnitRegex","colorFunctionRegex","shadowRegex","imageRegex","isFraction","isNumber","isInteger","isPercent","isTshirtSize","isAny","isLengthOnly","isNever","isShadow","isImage","isAnyNonArbitrary","isArbitraryValue","isArbitraryVariable","isArbitrarySize","getIsArbitraryValue","isLabelSize","isArbitraryLength","isLabelLength","isArbitraryNumber","isLabelNumber","isArbitraryPosition","isLabelPosition","isArbitraryImage","isLabelImage","isArbitraryShadow","isLabelShadow","isArbitraryVariableLength","getIsArbitraryVariable","isArbitraryVariableFamilyName","isLabelFamilyName","isArbitraryVariablePosition","isArbitraryVariableSize","isArbitraryVariableImage","isArbitraryVariableShadow","testLabel","testValue","shouldMatchNoLabel","getDefaultConfig","themeColor","themeFont","themeText","themeFontWeight","themeTracking","themeLeading","themeBreakpoint","themeContainer","themeSpacing","themeRadius","themeShadow","themeInsetShadow","themeTextShadow","themeDropShadow","themeBlur","themePerspective","themeAspect","themeEase","themeAnimate","scaleBreak","scalePosition","scalePositionWithArbitrary","scaleOverflow","scaleOverscroll","scaleUnambiguousSpacing","scaleInset","scaleGridTemplateColsRows","scaleGridColRowStartAndEnd","scaleGridColRowStartOrEnd","scaleGridAutoColsRows","scaleAlignPrimaryAxis","scaleAlignSecondaryAxis","scaleMargin","scaleSizing","scaleColor","scaleBgPosition","scaleBgRepeat","scaleBgSize","scaleGradientStopPosition","scaleRadius","scaleBorderWidth","scaleLineStyle","scaleBlendMode","scaleMaskImagePosition","scaleBlur","scaleRotate","scaleScale","scaleSkew","scaleTranslate","twMerge","inputs","cmp","pa","pb","paVal","pbVal","HomeCard","variant","baseStyles","variants","HeroStep","title","desc","Icon","isLast","CheckCircle2","HeroAssure","ShieldCheck","ArrowRight","step","MascotMaiMai","setMood","arms","MOCK_COMMUNITY_DATA","getMockData","name","CommunityWallCard","topic","reviewCount","rating","mockData","finalReviewCount","finalRating","MessageSquare","ExternalLink","Star","MOCK_PROPERTIES","propertyId","ChatPropertyCard","Building2","DollarSign","Maximize","MapPin","parseCommunityWallTags","regex","cards","parsePropertyTags","properties","parseScenarioTags","scenarios","stripAllTags","ScenarioCard","ChatMessage","role","timestamp","communityCards","propertyCards","scenario","card","prop","SmartAsk","setMessages","setInput","loading","setLoading","returnGreeting","setReturnGreeting","intimacy","setIntimacy","chatRef","currentTags","lastChat","today","greeting","timer","minute","handleBeforeUnload","send","userMsg","assistantMsg","fullResponse","chunk","newMsgs","last","MessageCircle","Sparkles","Heart","tag","Send","ReviewCard","tags","CommunityTeaser","review","PropertyCard","PropertyGrid","WarmWelcomeBar","shouldShow","setShouldShow","profile","milestone","isFirstVisit","hasContent","ok","greetByMood","tagText","leftText","seed","onDismissToday","Home","banner","setBanner","onRej","REQUIRED_KEYS","DEFAULT_COMMUNITY_API_BASE","trimTrailingSlash","isValidHttpUrl","str","resolveAppBaseHref","viteBase","showFriendlyErrorPage","homeHref","readEnv","missing","__vite_import_meta_env__","supabaseUrl","env","resolveCommunityApiBase","envShape","normalized","communityApiBase","supabase","createClient","deriveRole","user","metadataRole","useAuth","isMounted","syncState","session","err","subscription","_event","mapOptions","defaultDuration","mapped","notify","HEADER_STRINGS","ROUTES","getRoleLabel","GlobalHeader","mode","notificationCount","isAuthenticated","signOut","userMenuOpen","setUserMenuOpen","handleSignOut","handleClickOutside","renderLeft","homeLink","renderCenter","Bell","ChevronDown","User","LogOut","getPermissions","isGuest","isMember","isResident","isAgent","GUEST_VISIBLE_COUNT","SIDEBAR_QUESTIONS_COUNT","SIDEBAR_HOT_POSTS_COUNT","useGuestVisibleItems","canSeeAll","visibleCount","hiddenCount","nextHidden","LockedOverlay","countLabel","benefits","ctaText","onCtaClick","showCta","isHidden","entry","isPro","hasVisits","hasDeals","ReviewsSection","reviewsProp","onUnlock","reviews","perm","reviewEntries","pro","con","visibleEntries","hiddenReviewCount","nextHiddenEntry","useThrottle","leading","trailing","lastRun","timeoutRef","lastArgsRef","callbackRef","throttled","invoke","remaining","STRINGS","min","useComposer","onSubmit","onSuccess","onError","initialVisibility","minLength","maxLength","setContent","visibility","setVisibility","communityId","setCommunityId","images","setImages","isSubmitting","setIsSubmitting","reset","validate","trimmed","submit","validationError","useBodyScrollLock","isLocked","previousOverflow","inertTarget","previousAriaHidden","hadInert","FocusTrap","initialFocusRef","containerRef","previousFocusRef","focusable","container","focusableElements","firstElement","lastElement","LoginPrompt","memo","isOpen","onClose","handleClose","FOCUS_DELAY_MS","ComposerModal","placeholder","textareaRef","dialogRef","isValid","charCount","isPrivate","displayPlaceholder","relativeTimeFormatter","MS_IN_MINUTE","MS_IN_HOUR","MS_IN_DAY","MS_IN_WEEK","MS_IN_MONTH","MS_IN_YEAR","parseDateValue","date","formatRelativeTimeLabel","diff","hours","weeks","months","years","mockTimestampMinutesAgo","minutesAgo","baseline","S","PostBadge","post","isOfficial","PostCard","onLike","isLiking","setIsLiking","isMountedRef","displayTime","stats","commentsStat","handleLike","PostsSection","currentTab","onTabChange","publicPosts","privatePosts","onCreatePost","tabListId","useId","publicTabId","privateTabId","panelId","tabRefs","postModalOpen","setPostModalOpen","postModalVisibility","setPostModalVisibility","openPostModal","visiblePublic","hiddenPublicCount","nextHiddenPost","focusTab","tab","activeTabs","handlePrivateClick","handleTabKeyDown","lastAvailableTab","currentIndex","nextIndex","nextTab","node","QACard","isUnanswered","onAnswer","isAnswering","hideUnlockButton","QASection","questionsProp","onAskQuestion","onAnswerQuestion","feedbackDurationMs","questions","askModalOpen","setAskModalOpen","askInput","setAskInput","answerModalOpen","setAnswerModalOpen","answerInput","setAnswerInput","activeQuestion","setActiveQuestion","submitting","setSubmitting","askError","setAskError","answerError","setAnswerError","feedback","setFeedback","askDialogRef","answerDialogRef","askTextareaRef","answerTextareaRef","feedbackTimeoutRef","restoreFocusRef","answeredQuestions","unansweredQuestions","visibleAnswered","nextHiddenQuestion","remainingAnsweredCount","showGuestUnlockCta","shouldShowUnlockCta","MIN_QUESTION_LENGTH","MIN_ANSWER_LENGTH","resetAskModal","resetAnswerModal","rememberTriggerFocus","openAskModal","openAnswerModal","getActiveDialog","getFocusableElements","el","tabIndexAttr","tabIndex","isDisabled","isNegativeTabIndex","focusSafeElement","candidates","prevTabIndex","trapFocusWithinModal","first","active","activeDialog","ensureFocusStaysInside","handleAskSubmit","handleAnswerSubmit","formatValue","suffix","Sidebar","info","posts","displayQuestions","hotPosts","scoreA","num","lbl","link","roleNames","roleLabels","RoleSwitcher","onRoleChange","setIsOpen","BottomCTA","PostSkeleton","WallSkeleton","getErrorMessage","categorizeError","WallErrorBoundary","errorInfo","errorId","reportError","categorized","rawVersion","rawBuildTime","parsedBuildTime","buildDate","formatTwDateTime","APP_VERSION","BUILD_TIME_TW","VERSION_LABEL","VERSION_TOOLTIP","baseClasses","VersionBadge","MockToggle","useMock","onToggle","handleToggle","MOCK_PARAM","MOCK_STORAGE_KEY","parseBool","readFromUrl","readFromStorage","persistToStorage","persistToUrl","mhEnv","urlValue","onChange","handler","API_BASE","getAuthToken","fetchAPI","token","errorData","errorMessage","getCommunityWall","includePrivate","createPost","toggleLike","postId","askQuestion","answerQuestion","questionId","communityWallKeys","useCommunityWall","refetchOnWindowFocus","currentUserId","isOptimisticUpdating","setIsOptimisticUpdating","canOptimisticUpdate","optimisticUserId","refetch","refresh","likeMutation","apiToggleLike","previousData","updatePosts","isLiked","_err","_postId","createPostMutation","apiCreatePost","askQuestionMutation","apiAskQuestion","answerQuestionMutation","apiAnswerQuestion","MOCK_DATA","createMockPost","createMockQuestion","createMockAnswer","PLACEHOLDER_COMPANY_NAMES","ROLE_LABELS","normalizeAuthorRole","safeAuthorIdSuffix","authorId","buildFallbackAuthor","resolveAuthorDisplay","author","fallback","floor","sortPostsWithPinned","pinnedDiff","formatTimeAgo","diffMs","diffMins","diffHours","diffWeeks","convertApiPost","authorInfo","convertApiReview","agent","company","normalizedCompany","convertApiQuestion","answers","answer","convertApiData","apiData","reviewItems","questionItems","convertedPublic","convertedPrivate","sortedPublic","sortedPrivate","MOCK_DATA_STORAGE_KEY","MOCK_LATENCY_MS","EMPTY_WALL_DATA","canUseMockStorage","mergeMockState","loadPersistedMockState","saveMockState","VALID_VIEWER_ROLES","resolveViewerRole","rawRole","hasAuthenticatedUser","useCommunityWallData","initialMockData","persistMockState","setUseMockState","setCurrentUserId","setMockData","hasRestoredFromStorage","likedPosts","setLikedPosts","lastApiDataRef","apiLoading","apiError","apiRefresh","converted","safeCommunityInfo","viewerRole","getMockUserId","storageKey","mockId","mockUserId","currentLikes","currentLikedBy","newPost","targetTotal","newQuestion","newAnswer","setUseMock","rawMockFlag","GLOBAL_MOCK_TOGGLE_ENABLED","WallInner","useParams","searchParams","setSearchParams","useSearchParams","useNavigate","searchParamsRef","initialRole","setRoleInternal","setCurrentTab","isReloading","setIsReloading","authRole","authLoading","authError","effectiveRole","allowManualMockToggle","canToggleMock","allowManualRoleSwitch","mockToggleDisabled","forceEnableMock","setRole","newRole","handleStorage","handleUnlock","handleTabChange","handleCreatePost","handleAskQuestion","handleAnswerQuestion","handleReload","errorMsg","isAuthError","communityInfo","Wall","Suggested","calcMonthlyPayment","principal","annualRate","BudgetLite","setTotal","down","setDown","rate","setRate","setYears","income","setIncome","monthly","mgmt","burden","onCopy","warmTip","PoliteRewrite","onAdopt","setDraft","audience","setAudience","intent","setIntent","v1","setV1","v2","setV2","sent","setSent","handleRewrite","adopt","loadAll","saveAll","addNote","echo","NoteWithEcho","setText","setEcho","setFocused","handleSave","echoText","parseTags","DebriefMini","setLike","setPain","setNext","out","setOut","handleGen","md","KEYWORDS","ELI5Tooltip","open","setOpen","ans","setAns","fetchAns","toggle","Detail","MOCK_TIMEOUTS","createMockState","getMockTx","saveMockTx","tx","mockService","caseId","body","newTx","stepNum","step6","resetState","realService","useTrustRoom","isMock","setIsMock","setCaseId","setTx","isBusy","setIsBusy","timeLeft","setTimeLeft","setAuthError","hash","fetchData","startMockMode","mockTx","dispatchAction","service","AssureDetail","useLocation","inputBuffer","setInputBuffer","supplementInput","setSupplementInput","handleAction","submitAgent","confirmStep","pay","toggleCheck","itemId","checked","addSupplement","toggleRole","Zap","getStepIcon","ClipboardCheck","FileSignature","Info","RotateCcw","Briefcase","isCurrent","isPast","isFuture","iconBg","Lock","Check","ChatStandalone","Component","MoodContext","MoodProvider","setMoodState","throttleLevel","CookieConsent","show","setShow","accept","ErrorBoundaryContext","initialState","ErrorBoundary","_this$props$onReset","_this$props","_len","_key","_this$props$onError","_this$props2","prevProps","prevState","didCatch","resetKeys","hasArrayChanged","_this$props$onReset2","_this$props3","fallbackRender","FallbackComponent","childToRender","createElement","$constructor","initializer","init","inst","def","Parent","Definition","$ZodAsyncError","$ZodEncodeError","globalConfig","newConfig","getEnumValues","numericValues","jsonStringifyReplacer","cached","getter","nullish","cleanRegex","source","start","end","floatSafeRemainder","valDecCount","stepString","stepDecCount","decCount","valInt","stepInt","EVALUATING","defineLazy","assignProp","mergeDefs","defs","mergedDescriptors","descriptors","esc","captureStackTrace","_args","isObject","allowsEval","F","shallowClone","propertyKeyTypes","escapeRegex","clone","cl","normalizeParams","_params","optionalKeys","shape","NUMBER_FORMAT_RANGES","pick","schema","mask","currDef","newShape","omit","extend","checks","_shape","safeExtend","merge","partial","Class","oldShape","required","aborted","prefixIssues","issues","iss","unwrapMessage","finalizeIssue","ctx","full","getLengthableOrigin","issue","util.jsonStringifyReplacer","$ZodError","$ZodRealError","flattenError","mapper","fieldErrors","formErrors","sub","formatError","processError","_parse","_Err","_ctx","core.$ZodAsyncError","util.finalizeIssue","core.config","util.captureStackTrace","_parseAsync","_safeParse","errors.$ZodError","safeParse","errors.$ZodRealError","_safeParseAsync","safeParseAsync","_encode","_decode","_encodeAsync","_decodeAsync","_safeEncode","_safeDecode","_safeEncodeAsync","_safeDecodeAsync","cuid","cuid2","ulid","xid","ksuid","nanoid","guid","uuid","version","email","_emoji","emoji","ipv4","ipv6","cidrv4","cidrv6","base64","base64url","hostname","e164","dateSource","timeSource","hhmm","time","datetime","timeRegex","integer","number","_null","lowercase","uppercase","$ZodCheck","core.$constructor","numericOriginMap","$ZodCheckLessThan","origin","bag","$ZodCheckGreaterThan","$ZodCheckMultipleOf","util.floatSafeRemainder","$ZodCheckNumberFormat","isInt","minimum","maximum","util.NUMBER_FORMAT_RANGES","regexes.integer","$ZodCheckMaxLength","util.nullish","util.getLengthableOrigin","$ZodCheckMinLength","$ZodCheckLengthEquals","tooBig","$ZodCheckStringFormat","$ZodCheckRegex","$ZodCheckLowerCase","regexes.lowercase","$ZodCheckUpperCase","regexes.uppercase","$ZodCheckIncludes","escapedRegex","util.escapeRegex","$ZodCheckStartsWith","$ZodCheckEndsWith","$ZodCheckOverwrite","Doc","arg","minIndent","dedented","$ZodType","ch","runChecks","isAborted","util.aborted","asyncResult","currLen","handleCanaryResult","canary","checkResult","$ZodString","regexes.string","$ZodStringFormat","checks.$ZodCheckStringFormat","$ZodGUID","regexes.guid","$ZodUUID","regexes.uuid","$ZodEmail","regexes.email","$ZodURL","regexes.hostname","$ZodEmoji","regexes.emoji","$ZodNanoID","regexes.nanoid","$ZodCUID","regexes.cuid","$ZodCUID2","regexes.cuid2","$ZodULID","regexes.ulid","$ZodXID","regexes.xid","$ZodKSUID","regexes.ksuid","$ZodISODateTime","regexes.datetime","$ZodISODate","regexes.date","$ZodISOTime","regexes.time","$ZodISODuration","regexes.duration","$ZodIPv4","regexes.ipv4","$ZodIPv6","regexes.ipv6","$ZodCIDRv4","regexes.cidrv4","$ZodCIDRv6","regexes.cidrv6","address","prefixNum","isValidBase64","$ZodBase64","regexes.base64","isValidBase64URL","regexes.base64url","padded","$ZodBase64URL","$ZodE164","regexes.e164","isValidJWT","algorithm","tokensParts","header","parsedHeader","$ZodJWT","$ZodNumber","regexes.number","received","$ZodNumberFormat","checks.$ZodCheckNumberFormat","$ZodNull","regexes.null","$ZodUnknown","$ZodNever","handleArrayResult","final","util.prefixIssues","$ZodArray","proms","handlePropertyResult","normalizeDef","keys","okeys","util.optionalKeys","handleCatchall","unrecognized","keySet","_catchall","$ZodObject","sh","newSh","_normalized","util.cached","util.defineLazy","propValues","util.isObject","catchall","$ZodObjectJIT","superParse","generateFastpass","doc","parseStr","util.esc","counter","fastpass","jit","core.globalConfig","fastEnabled","util.allowsEval","handleUnionResults","results","nonaborted","$ZodUnion","option","util.cleanRegex","single","async","$ZodIntersection","right","handleIntersectionResults","mergeValues","util.isPlainObject","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","$ZodEnum","values","util.getEnumValues","valuesSet","util.propertyKeyTypes","$ZodTransform","core.$ZodEncodeError","_out","output","handleOptionalResult","$ZodOptional","$ZodNullable","$ZodDefault","handleDefaultResult","$ZodPrefault","$ZodNonOptional","handleNonOptionalResult","$ZodCatch","$ZodPipe","handlePipeResult","$ZodReadonly","handleReadonlyResult","$ZodCustom","checks.$ZodCheck","handleRefineResult","_iss","util.issue","$ZodRegistry","_meta","meta","pm","registry","globalRegistry","_string","util.normalizeParams","_email","_guid","_uuid","_uuidv4","_uuidv6","_uuidv7","_url","_nanoid","_cuid","_cuid2","_ulid","_xid","_ksuid","_ipv4","_ipv6","_cidrv4","_cidrv6","_base64","_base64url","_e164","_jwt","_isoDateTime","_isoDate","_isoTime","_isoDuration","_number","_int","_unknown","_never","_lt","checks.$ZodCheckLessThan","_lte","_gt","checks.$ZodCheckGreaterThan","_gte","_multipleOf","checks.$ZodCheckMultipleOf","_maxLength","checks.$ZodCheckMaxLength","_minLength","checks.$ZodCheckMinLength","_length","checks.$ZodCheckLengthEquals","_regex","checks.$ZodCheckRegex","_lowercase","checks.$ZodCheckLowerCase","_uppercase","checks.$ZodCheckUpperCase","_includes","includes","checks.$ZodCheckIncludes","_startsWith","checks.$ZodCheckStartsWith","_endsWith","checks.$ZodCheckEndsWith","_overwrite","checks.$ZodCheckOverwrite","_normalize","form","_trim","_toLowerCase","_toUpperCase","_array","element","_refine","_superRefine","_check","_issue","ZodISODateTime","core.$ZodISODateTime","schemas.ZodStringFormat","core._isoDateTime","ZodISODate","core.$ZodISODate","core._isoDate","ZodISOTime","core.$ZodISOTime","core._isoTime","ZodISODuration","core.$ZodISODuration","core._isoDuration","core.formatError","core.flattenError","ZodRealError","parse","core._parse","parseAsync","core._parseAsync","core._safeParse","core._safeParseAsync","encode","core._encode","decode","core._decode","encodeAsync","core._encodeAsync","decodeAsync","core._decodeAsync","safeEncode","core._safeEncode","safeDecode","core._safeDecode","safeEncodeAsync","core._safeEncodeAsync","safeDecodeAsync","core._safeDecodeAsync","ZodType","core.$ZodType","util.mergeDefs","core.clone","reg","parse.parse","parse.safeParse","parse.parseAsync","parse.safeParseAsync","parse.encode","parse.decode","parse.encodeAsync","parse.decodeAsync","parse.safeEncode","parse.safeDecode","parse.safeEncodeAsync","parse.safeDecodeAsync","check","refine","refinement","superRefine","checks.overwrite","optional","nullable","nonoptional","union","intersection","pipe","transform","_default","prefault","_catch","readonly","core.globalRegistry","_ZodString","core.$ZodString","checks.regex","checks.includes","checks.startsWith","checks.endsWith","checks.minLength","checks.maxLength","checks.length","checks.lowercase","checks.uppercase","checks.trim","checks.normalize","checks.toLowerCase","checks.toUpperCase","ZodString","core._email","ZodEmail","core._url","ZodURL","core._jwt","ZodJWT","core._emoji","ZodEmoji","core._guid","ZodGUID","core._uuid","ZodUUID","core._uuidv4","core._uuidv6","core._uuidv7","core._nanoid","ZodNanoID","core._cuid","ZodCUID","core._cuid2","ZodCUID2","core._ulid","ZodULID","core._base64","ZodBase64","core._base64url","ZodBase64URL","core._xid","ZodXID","core._ksuid","ZodKSUID","core._ipv4","ZodIPv4","core._ipv6","ZodIPv6","core._cidrv4","ZodCIDRv4","core._cidrv6","ZodCIDRv6","core._e164","ZodE164","iso.datetime","iso.date","iso.time","iso.duration","core._string","ZodStringFormat","core.$ZodStringFormat","core.$ZodEmail","core.$ZodGUID","core.$ZodUUID","core.$ZodURL","core.$ZodEmoji","core.$ZodNanoID","core.$ZodCUID","core.$ZodCUID2","core.$ZodULID","core.$ZodXID","core.$ZodKSUID","core.$ZodIPv4","core.$ZodIPv6","core.$ZodCIDRv4","core.$ZodCIDRv6","core.$ZodBase64","core.$ZodBase64URL","core.$ZodE164","core.$ZodJWT","ZodNumber","core.$ZodNumber","checks.gt","checks.gte","checks.lt","checks.lte","int","checks.multipleOf","core._number","ZodNumberFormat","core.$ZodNumberFormat","core._int","ZodNull","core.$ZodNull","core._null","ZodUnknown","core.$ZodUnknown","unknown","core._unknown","ZodNever","core.$ZodNever","never","core._never","ZodArray","core.$ZodArray","core._array","ZodObject","core.$ZodObjectJIT","_enum","incoming","util.extend","util.safeExtend","other","util.merge","util.pick","util.omit","util.partial","ZodOptional","util.required","ZodNonOptional","ZodUnion","core.$ZodUnion","ZodIntersection","core.$ZodIntersection","ZodEnum","core.$ZodEnum","newEntries","ZodTransform","core.$ZodTransform","core.$ZodOptional","innerType","ZodNullable","core.$ZodNullable","ZodDefault","core.$ZodDefault","util.shallowClone","ZodPrefault","core.$ZodPrefault","core.$ZodNonOptional","ZodCatch","core.$ZodCatch","catchValue","ZodPipe","core.$ZodPipe","in_","ZodReadonly","core.$ZodReadonly","ZodCustom","core.$ZodCustom","core._refine","core._superRefine","GradeSchema","z.enum","LeadStatusSchema","SupabaseLeadSchema","z.object","z.string","z.number","z.union","z.null","LeadSchema","ListingSchema","z.array","FeedPostSchema","UserDataSchema","BREAKPOINTS","GRADE_HOURS","calculateRemainingHours","purchasedAt","grade","totalHours","purchasedTime","elapsedHours","transformSupabaseData","userData","leadsData","listingsData","feedData","userRaw","userResult","validLeads","remainingHours","lead","validListings","listing","validFeed","UAGService","userId","userRes","leadsRes","listingsRes","feedRes","agentId","propError","publicIds","events","evtError","statsMap","evt","pid","stat","actions","sessionsByProperty","sessions","leadId","cost","MOCK_DB","validateQuota","useUAG","urlMode","initialMock","toggleMode","buyLeadMutation","valid","newTodo","debounce","useWindowSize","size","setSize","handleResize","useLeadSelection","selectedLead","setSelectedLead","width","selectLead","close","UAGHeader","UAGFooter","UAGLoadingSkeleton","UAGErrorState","resetErrorBoundary","RadarCluster","leads","onSelectLead","liveLeads","floatDuration","StatItem","highlight","ActionPanel","forwardRef","onBuyLead","isProcessing","isConfirming","setIsConfirming","isExclusive","handleBuyClick","handleConfirm","handleCancel","calculateProtection","percent","timeDisplay","AssetMonitor","boughtLeads","colorVar","protectText","ListingFeed","listings","feed","Link","Plus","DEFAULT_PROPERTY","MY_LISTINGS","REPORT_STYLES","ReportGenerator","setStep","selectedProperty","setSelectedProperty","selectedStyle","setSelectedStyle","highlights","setHighlights","reportUrl","setReportUrl","isGenerating","setIsGenerating","fileInputRef","formatPrice","price","calculateMonthlyPayment","downPaymentRatio","monthlyRate","payment","handleSelectProperty","handleSelectStyle","toggleHighlight","selectedCount","confirmHighlights","generateReport","toastId","reportId","copyLink","shareToLine","handleImportClick","handleFileChange","detectedProperty","renderStep1","Upload","ChevronRight","renderStep2","ChevronLeft","CheckCircle","renderStep3","renderStep4","selectedHighlights","monthlyPayment","Ruler","Building","Calendar","Compass","renderStep5","Copy","uagStyles","MOCK_CASES","STEPS","Eye","FileText","formatTime","ts","formatRelativeTime","getStatusBadge","TrustFlow","cases","setCases","selectedCaseId","setSelectedCaseId","expandedEvents","setExpandedEvents","loadCases","firstCase","loadedCases","selectedCase","recentEvents","RefreshCw","statusBadge","AlertCircle","UAGPageContent","appData","buyLead","isBuying","actionPanelRef","UAGPage","getTrustBreakdown","deals","Clock","BookingModal","agentName","selectedSlot","setSelectedSlot","phone","setPhone","submitted","setSubmitted","timeSlots","dayStr","dayName","times","handleSubmit","slot","slotId","isSelected","AgentTrustCard","onLineClick","onCallClick","onBookingClick","showTrustTooltip","setShowTrustTooltip","showBookingModal","setShowBookingModal","isOnline","trustBreakdown","agentMetrics","Shield","ThumbsUp","computeAddressFingerprint","addr","clean","normalizeCommunityName","propertyService","publicId","files","concurrency","failed","completed","batchPromises","file","fileExt","fileName","batchResults","existingCommunityId","finalCommunityName","isNewCommunity","addressFingerprint","existingByAddress","normalizedInput","district","matched","exactMatch","city","newCommunity","communityError","createLead","ContactModal","propertyTitle","setForm","channelOptions","Mail","timeOptions","budgetOptions","Loader2","opt","HIGHLIGHT_OPTIONS","DEFAULT_REPORT_DATA","loanRatio","numPayments","ReportPage","setProperty","currentImageIndex","setCurrentImageIndex","viewCount","setViewCount","setIsLoading","trackView","loadReport","handleShare","img","Share2","setSelectedHighlights","selectedPhotos","setSelectedPhotos","customMessage","setCustomMessage","generatedUrl","setGeneratedUrl","defaultMessage","generateReportUrl","baseUrl","togglePhoto","handleGenerate","handleCopyLink","handleLineShare","Link2","steps","prevStep","usePropertyTracker","onGradeUpgrade","enterTime","hasSent","currentGrade","sid","buildPayload","eventType","sendEvent","useBeacon","blob","gradeRank","newRank","oldRank","handleScroll","depth","handleUnload","PropertyDetailPage","isFavorite","setIsFavorite","isLoggedIn","showContactModal","setShowContactModal","contactSource","setContactSource","showVipModal","setShowVipModal","vipReason","setVipReason","showReportGenerator","setShowReportGenerator","getAgentId","aid","handleGradeUpgrade","extractDistrict","tracker","openContactModal","socialProof","FALLBACK_IMAGE","displayImage","ArrowLeft","Hash","Flame","Users","NO_COMMUNITY_OPTION","CommunityPicker","searchTerm","setSearchTerm","suggestions","setSuggestions","selectedCommunity","setSelectedCommunity","wrapperRef","abortControllerRef","searchIdRef","searchCommunities","term","currentSearchId","fingerprint","handleSelect","handleSelectNoCommunity","handleCreateNew","nameValidation","showCreateOption","SENSITIVE_WORDS","AD_WORDS","checkContent","lowerText","word","VALIDATION_RULES","ALLOWED_IMAGE_TYPES","MAX_IMAGE_SIZE_BYTES","validateImage","sizeMB","validateImages","validFiles","invalidFiles","usePropertyFormValidation","imageCount","errors","titleValid","titleMessage","priceValid","priceMessage","addressValid","addressMessage","communityValid","communityMessage","adv1Length","adv1Valid","adv1Message","adv2Length","adv2Valid","adv2Message","disLength","disValid","disMessage","contentWarnings","blockByContent","adv1ContentCheck","adv2ContentCheck","disContentCheck","adv1ContentWarning","adv2ContentWarning","disContentWarning","hasSensitiveIssue","warning","imagesValid","imagesMessage","basicValid","twoGoodOneFairValid","allValid","canSubmit","PropertyUploadPage","navigate","uploadProgress","setUploadProgress","imageFiles","setImageFiles","setUser","selectedCommunityId","setSelectedCommunityId","uploadResult","setUploadResult","showConfirmation","setShowConfirmation","handleInput","handleCommunityChange","validation","handleImport591","handleFileSelect","urls","removeImage","publish","failedNames","inputClass","AlertTriangle","Edit3","Download","ThumbsDown","PropertyEditPage","saving","setSaving","newCommunityName","setNewCommunityName","newCommunityId","setNewCommunityId","hasChanges","setHasChanges","isFixCommunityMode","Save","App","setConfig","loc","Routes","Route","rootElement","basename","BrowserRouter"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,30,31,32,33,46,47,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/timeoutManager.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/thenable.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../node_modules/@tanstack/react-query/build/modern/IsRestoringProvider.js","../../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../node_modules/@tanstack/react-query/build/modern/suspense.js","../../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../node_modules/@tanstack/react-query/build/modern/useQuery.js","../../node_modules/@tanstack/react-query/build/modern/useMutation.js","../../node_modules/sonner/dist/index.mjs","../../src/app/config.ts","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/analytics/track.ts","../../src/context/QuietModeContext.tsx","../../src/stores/profileStore.ts","../../src/constants/maimai-persona.ts","../../src/services/ai.ts","../../src/services/api.ts","../../src/app/devtools.tsx","../../src/services/analytics.ts","../../src/components/Logo/Logo.tsx","../../src/components/Header/Header.tsx","../../src/components/MascotHouse.tsx","../../src/constants/data.ts","../../node_modules/clsx/dist/clsx.mjs","../../node_modules/tailwind-merge/dist/bundle-mjs.mjs","../../src/lib/utils.ts","../../src/features/home/components/HomeCard.tsx","../../src/features/home/components/HeroStep.tsx","../../src/features/home/sections/HeroAssure.tsx","../../src/components/MascotMaiMai.tsx","../../src/features/home/components/CommunityWallCard.tsx","../../src/features/home/components/ChatPropertyCard.tsx","../../src/features/home/components/ChatMessage.tsx","../../src/features/home/sections/SmartAsk.tsx","../../src/features/home/components/ReviewCard.tsx","../../src/features/home/sections/CommunityTeaser.tsx","../../src/features/home/components/PropertyCard.tsx","../../src/features/home/sections/PropertyGrid.tsx","../../src/components/WarmWelcomeBar.tsx","../../src/pages/Home.tsx","../../src/config/env.ts","../../src/lib/supabase.ts","../../src/hooks/useAuth.ts","../../src/lib/notify.ts","../../src/constants/header.ts","../../src/constants/routes.ts","../../src/components/layout/GlobalHeader.tsx","../../src/pages/Community/types.ts","../../src/hooks/useGuestVisibleItems.ts","../../src/pages/Community/components/LockedOverlay.tsx","../../src/pages/Community/components/ReviewsSection.tsx","../../src/hooks/useThrottle.ts","../../src/constants/strings.ts","../../src/hooks/useComposer.ts","../../src/hooks/useBodyScrollLock.ts","../../src/components/ui/FocusTrap.tsx","../../src/components/Composer/LoginPrompt.tsx","../../src/components/Composer/ComposerModal.tsx","../../src/lib/time.ts","../../src/pages/Community/components/PostsSection.tsx","../../src/pages/Community/components/QASection.tsx","../../src/pages/Community/components/Sidebar.tsx","../../src/pages/Community/components/RoleSwitcher.tsx","../../src/pages/Community/components/BottomCTA.tsx","../../src/pages/Community/components/PostSkeleton.tsx","../../src/pages/Community/components/WallErrorBoundary.tsx","../../src/lib/version.ts","../../src/pages/Community/components/VersionBadge.tsx","../../src/components/common/MockToggle.tsx","../../src/lib/mhEnv.ts","../../src/services/communityService.ts","../../src/hooks/useCommunityWallQuery.ts","../../src/pages/Community/mockData.ts","../../src/hooks/communityWallConverters.ts","../../src/hooks/useCommunityWallData.ts","../../src/pages/Community/Wall.tsx","../../src/pages/Community/Suggested.tsx","../../src/components/BudgetLite.tsx","../../src/components/PoliteRewrite.tsx","../../src/stores/notesStore.ts","../../src/components/NoteWithEcho.tsx","../../src/components/DebriefMini.tsx","../../src/components/ELI5Tooltip.tsx","../../src/pages/Property/Detail.tsx","../../src/services/trustService.ts","../../src/hooks/useTrustRoom.ts","../../src/pages/Assure/Detail.tsx","../../src/pages/Chat/Standalone.tsx","../../src/app/ErrorBoundary.tsx","../../src/context/MoodContext.tsx","../../src/components/CookieConsent.tsx","../../node_modules/react-error-boundary/dist/react-error-boundary.js","../../node_modules/zod/v4/core/core.js","../../node_modules/zod/v4/core/util.js","../../node_modules/zod/v4/core/errors.js","../../node_modules/zod/v4/core/parse.js","../../node_modules/zod/v4/core/regexes.js","../../node_modules/zod/v4/core/checks.js","../../node_modules/zod/v4/core/doc.js","../../node_modules/zod/v4/core/versions.js","../../node_modules/zod/v4/core/schemas.js","../../node_modules/zod/v4/core/registries.js","../../node_modules/zod/v4/core/api.js","../../node_modules/zod/v4/classic/iso.js","../../node_modules/zod/v4/classic/errors.js","../../node_modules/zod/v4/classic/parse.js","../../node_modules/zod/v4/classic/schemas.js","../../src/pages/UAG/types/uag.types.ts","../../src/pages/UAG/uag-config.ts","../../src/pages/UAG/services/uagService.ts","../../src/pages/UAG/mockData.ts","../../src/pages/UAG/utils/validation.ts","../../src/pages/UAG/hooks/useUAG.ts","../../src/pages/UAG/hooks/useWindowSize.ts","../../src/pages/UAG/hooks/useLeadSelection.ts","../../src/pages/UAG/components/UAGHeader.tsx","../../src/pages/UAG/components/UAGFooter.tsx","../../src/pages/UAG/components/UAGLoadingSkeleton.tsx","../../src/pages/UAG/components/UAGErrorState.tsx","../../src/pages/UAG/components/RadarCluster.tsx","../../src/pages/UAG/components/ActionPanel.tsx","../../src/pages/UAG/components/AssetMonitor.tsx","../../src/pages/UAG/components/ListingFeed.tsx","../../src/pages/UAG/components/ReportGenerator/index.tsx","../../src/pages/UAG/components/TrustFlow.tsx","../../src/pages/UAG/index.tsx","../../src/components/AgentTrustCard.tsx","../../src/utils/address.ts","../../src/services/propertyService.ts","../../src/services/leadService.ts","../../src/components/ContactModal.tsx","../../src/pages/Report/types.ts","../../src/pages/Report/ReportPage.tsx","../../src/pages/Report/ReportGenerator.tsx","../../src/pages/PropertyDetailPage.tsx","../../src/components/ui/CommunityPicker.tsx","../../src/utils/contentCheck.ts","../../src/hooks/usePropertyFormValidation.ts","../../src/pages/PropertyUploadPage.tsx","../../src/pages/PropertyEditPage.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/timeoutManager.ts\nvar defaultTimeoutProvider = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId)\n};\nvar TimeoutManager = class {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider = defaultTimeoutProvider;\n  #providerCalled = false;\n  setTimeoutProvider(provider) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (this.#providerCalled && provider !== this.#provider) {\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider }\n        );\n      }\n    }\n    this.#provider = provider;\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = false;\n    }\n  }\n  setTimeout(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setTimeout(callback, delay);\n  }\n  clearTimeout(timeoutId) {\n    this.#provider.clearTimeout(timeoutId);\n  }\n  setInterval(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setInterval(callback, delay);\n  }\n  clearInterval(intervalId) {\n    this.#provider.clearInterval(intervalId);\n  }\n};\nvar timeoutManager = new TimeoutManager();\nfunction systemSetTimeoutZero(callback) {\n  setTimeout(callback, 0);\n}\nexport {\n  TimeoutManager,\n  defaultTimeoutProvider,\n  systemSetTimeoutZero,\n  timeoutManager\n};\n//# sourceMappingURL=timeoutManager.js.map","// src/utils.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nvar hasOwn = Object.prototype.hasOwnProperty;\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b;\n  const aItems = array ? a : Object.keys(a);\n  const aSize = aItems.length;\n  const bItems = array ? b : Object.keys(b);\n  const bSize = bItems.length;\n  const copy = array ? new Array(bSize) : {};\n  let equalItems = 0;\n  for (let i = 0; i < bSize; i++) {\n    const key = array ? i : bItems[i];\n    const aItem = a[key];\n    const bItem = b[key];\n    if (aItem === bItem) {\n      copy[key] = aItem;\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++;\n      continue;\n    }\n    if (aItem === null || bItem === null || typeof aItem !== \"object\" || typeof bItem !== \"object\") {\n      copy[key] = bItem;\n      continue;\n    }\n    const v = replaceEqualDeep(aItem, bItem);\n    copy[key] = v;\n    if (v === aItem) equalItems++;\n  }\n  return aSize === bSize && equalItems === aSize ? a : copy;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n        throw error;\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nfunction shouldThrowError(throwOnError, params) {\n  if (typeof throwOnError === \"function\") {\n    return throwOnError(...params);\n  }\n  return !!throwOnError;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  shouldThrowError,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/thenable.ts\nimport { noop } from \"./utils.js\";\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nfunction tryResolveSync(promise) {\n  let data;\n  promise.then((result) => {\n    data = result;\n    return result;\n  }, noop)?.catch(noop);\n  if (data !== void 0) {\n    return { data };\n  }\n  return void 0;\n}\nexport {\n  pendingThenable,\n  tryResolveSync\n};\n//# sourceMappingURL=thenable.js.map","// src/notifyManager.ts\nimport { systemSetTimeoutZero } from \"./timeoutManager.js\";\nvar defaultScheduler = systemSetTimeoutZero;\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = defaultScheduler;\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  defaultScheduler,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let continueFn;\n  const thenable = pendingThenable();\n  const isResolved = () => thenable.status !== \"pending\";\n  const cancel = (cancelOptions) => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions);\n      reject(error);\n      config.onCancel?.(error);\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved()) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved()) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved()) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/removable.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { CancelledError, canFetch, createRetryer } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #client;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#client = config.client;\n    this.#cache = this.#client.getQueryCache();\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n    if (this.state && this.state.data === void 0) {\n      const defaultState = getDefaultState(this.options);\n      if (defaultState.data !== void 0) {\n        this.setState(\n          successState(defaultState.data, defaultState.dataUpdatedAt)\n        );\n        this.#initialState = defaultState;\n      }\n    }\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStatic() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => resolveStaleTime(observer.options.staleTime, this) === \"static\"\n      );\n    }\n    return false;\n  }\n  isStale() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0 || this.state.isInvalidated;\n  }\n  isStaleByTime(staleTime = 0) {\n    if (this.state.data === void 0) {\n      return true;\n    }\n    if (staleTime === \"static\") {\n      return false;\n    }\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  async fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\" && // If the promise in the retyer is already rejected, we have to definitely\n    // re-start the fetch; there is a chance that the query is still in a\n    // pending state when that happens\n    this.#retryer?.status() !== \"rejected\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const createQueryFnContext = () => {\n        const queryFnContext2 = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta\n        };\n        addSignalProperty(queryFnContext2);\n        return queryFnContext2;\n      };\n      const queryFnContext = createQueryFnContext();\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const createFetchContext = () => {\n      const context2 = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn\n      };\n      addSignalProperty(context2);\n      return context2;\n    };\n    const context = createFetchContext();\n    this.options.behavior?.onFetch(context, this);\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: \"idle\"\n          });\n        }\n        abortController.abort();\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    try {\n      const data = await this.#retryer.start();\n      if (data === void 0) {\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n          );\n        }\n        throw new Error(`${this.queryHash} data is undefined`);\n      }\n      this.setData(data);\n      this.#cache.config.onSuccess?.(data, this);\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error,\n        this\n      );\n      return data;\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          return this.#retryer.promise;\n        } else if (error.revert) {\n          if (this.state.data === void 0) {\n            throw error;\n          }\n          return this.state.data;\n        }\n      }\n      this.#dispatch({\n        type: \"error\",\n        error\n      });\n      this.#cache.config.onError?.(\n        error,\n        this\n      );\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error,\n        this\n      );\n      throw error;\n    } finally {\n      this.scheduleGc();\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          const newState = {\n            ...state,\n            ...successState(action.data, action.dataUpdatedAt),\n            dataUpdateCount: state.dataUpdateCount + 1,\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n          this.#revertState = action.manual ? newState : void 0;\n          return newState;\n        case \"error\":\n          const error = action.error;\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction successState(data, dataUpdatedAt) {\n  return {\n    data,\n    dataUpdatedAt: dataUpdatedAt ?? Date.now(),\n    error: null,\n    isInvalidated: false,\n    status: \"success\"\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        if (key === \"promise\") {\n          this.trackProp(\"data\");\n          if (!this.options.experimental_prefetchInRender && this.#currentThenable.status === \"pending\") {\n            this.#currentThenable.reject(\n              new Error(\n                \"experimental_prefetchInRender feature flag is not enabled\"\n              )\n            );\n          }\n        }\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #client;\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.#client = config.client;\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    const onContinue = () => {\n      this.#dispatch({ type: \"continue\" });\n    };\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey\n    };\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables, mutationFnContext);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (restored) {\n        onContinue();\n      } else {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this,\n          mutationFnContext\n        );\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext\n        );\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(\n            action.data,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            action.data,\n            null,\n            variables,\n            onMutateResult,\n            context\n          );\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError || options.experimental_prefetchInRender) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const MIN_SUSPENSE_TIME_MS = 1e3;\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS\n      );\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash),\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      client.getQueryCache().get(defaultedOptions.queryHash)?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","'use client';\nfunction __insertCSS(code) {\n  if (!code || typeof document == 'undefined') return\n  let head = document.head || document.getElementsByTagName('head')[0]\n  let style = document.createElement('style')\n  style.type = 'text/css'\n  head.appendChild(style)\n  ;style.styleSheet ? (style.styleSheet.cssText = code) : style.appendChild(document.createTextNode(code))\n}\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst getAsset = (type)=>{\n    switch(type){\n        case 'success':\n            return SuccessIcon;\n        case 'info':\n            return InfoIcon;\n        case 'warning':\n            return WarningIcon;\n        case 'error':\n            return ErrorIcon;\n        default:\n            return null;\n    }\n};\nconst bars = Array(12).fill(0);\nconst Loader = ({ visible, className })=>{\n    return /*#__PURE__*/ React.createElement(\"div\", {\n        className: [\n            'sonner-loading-wrapper',\n            className\n        ].filter(Boolean).join(' '),\n        \"data-visible\": visible\n    }, /*#__PURE__*/ React.createElement(\"div\", {\n        className: \"sonner-spinner\"\n    }, bars.map((_, i)=>/*#__PURE__*/ React.createElement(\"div\", {\n            className: \"sonner-loading-bar\",\n            key: `spinner-bar-${i}`\n        }))));\n};\nconst SuccessIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\",\n    clipRule: \"evenodd\"\n}));\nconst WarningIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z\",\n    clipRule: \"evenodd\"\n}));\nconst InfoIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\",\n    clipRule: \"evenodd\"\n}));\nconst ErrorIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\",\n    clipRule: \"evenodd\"\n}));\nconst CloseIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"12\",\n    height: \"12\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"1.5\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n}, /*#__PURE__*/ React.createElement(\"line\", {\n    x1: \"18\",\n    y1: \"6\",\n    x2: \"6\",\n    y2: \"18\"\n}), /*#__PURE__*/ React.createElement(\"line\", {\n    x1: \"6\",\n    y1: \"6\",\n    x2: \"18\",\n    y2: \"18\"\n}));\n\nconst useIsDocumentHidden = ()=>{\n    const [isDocumentHidden, setIsDocumentHidden] = React.useState(document.hidden);\n    React.useEffect(()=>{\n        const callback = ()=>{\n            setIsDocumentHidden(document.hidden);\n        };\n        document.addEventListener('visibilitychange', callback);\n        return ()=>window.removeEventListener('visibilitychange', callback);\n    }, []);\n    return isDocumentHidden;\n};\n\nlet toastsCounter = 1;\nclass Observer {\n    constructor(){\n        // We use arrow functions to maintain the correct `this` reference\n        this.subscribe = (subscriber)=>{\n            this.subscribers.push(subscriber);\n            return ()=>{\n                const index = this.subscribers.indexOf(subscriber);\n                this.subscribers.splice(index, 1);\n            };\n        };\n        this.publish = (data)=>{\n            this.subscribers.forEach((subscriber)=>subscriber(data));\n        };\n        this.addToast = (data)=>{\n            this.publish(data);\n            this.toasts = [\n                ...this.toasts,\n                data\n            ];\n        };\n        this.create = (data)=>{\n            var _data_id;\n            const { message, ...rest } = data;\n            const id = typeof (data == null ? void 0 : data.id) === 'number' || ((_data_id = data.id) == null ? void 0 : _data_id.length) > 0 ? data.id : toastsCounter++;\n            const alreadyExists = this.toasts.find((toast)=>{\n                return toast.id === id;\n            });\n            const dismissible = data.dismissible === undefined ? true : data.dismissible;\n            if (this.dismissedToasts.has(id)) {\n                this.dismissedToasts.delete(id);\n            }\n            if (alreadyExists) {\n                this.toasts = this.toasts.map((toast)=>{\n                    if (toast.id === id) {\n                        this.publish({\n                            ...toast,\n                            ...data,\n                            id,\n                            title: message\n                        });\n                        return {\n                            ...toast,\n                            ...data,\n                            id,\n                            dismissible,\n                            title: message\n                        };\n                    }\n                    return toast;\n                });\n            } else {\n                this.addToast({\n                    title: message,\n                    ...rest,\n                    dismissible,\n                    id\n                });\n            }\n            return id;\n        };\n        this.dismiss = (id)=>{\n            if (id) {\n                this.dismissedToasts.add(id);\n                requestAnimationFrame(()=>this.subscribers.forEach((subscriber)=>subscriber({\n                            id,\n                            dismiss: true\n                        })));\n            } else {\n                this.toasts.forEach((toast)=>{\n                    this.subscribers.forEach((subscriber)=>subscriber({\n                            id: toast.id,\n                            dismiss: true\n                        }));\n                });\n            }\n            return id;\n        };\n        this.message = (message, data)=>{\n            return this.create({\n                ...data,\n                message\n            });\n        };\n        this.error = (message, data)=>{\n            return this.create({\n                ...data,\n                message,\n                type: 'error'\n            });\n        };\n        this.success = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'success',\n                message\n            });\n        };\n        this.info = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'info',\n                message\n            });\n        };\n        this.warning = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'warning',\n                message\n            });\n        };\n        this.loading = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'loading',\n                message\n            });\n        };\n        this.promise = (promise, data)=>{\n            if (!data) {\n                // Nothing to show\n                return;\n            }\n            let id = undefined;\n            if (data.loading !== undefined) {\n                id = this.create({\n                    ...data,\n                    promise,\n                    type: 'loading',\n                    message: data.loading,\n                    description: typeof data.description !== 'function' ? data.description : undefined\n                });\n            }\n            const p = Promise.resolve(promise instanceof Function ? promise() : promise);\n            let shouldDismiss = id !== undefined;\n            let result;\n            const originalPromise = p.then(async (response)=>{\n                result = [\n                    'resolve',\n                    response\n                ];\n                const isReactElementResponse = React.isValidElement(response);\n                if (isReactElementResponse) {\n                    shouldDismiss = false;\n                    this.create({\n                        id,\n                        type: 'default',\n                        message: response\n                    });\n                } else if (isHttpResponse(response) && !response.ok) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(`HTTP error! status: ${response.status}`) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(`HTTP error! status: ${response.status}`) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                } else if (response instanceof Error) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(response) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(response) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                } else if (data.success !== undefined) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.success === 'function' ? await data.success(response) : data.success;\n                    const description = typeof data.description === 'function' ? await data.description(response) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'success',\n                        description,\n                        ...toastSettings\n                    });\n                }\n            }).catch(async (error)=>{\n                result = [\n                    'reject',\n                    error\n                ];\n                if (data.error !== undefined) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(error) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(error) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                }\n            }).finally(()=>{\n                if (shouldDismiss) {\n                    // Toast is still in load state (and will be indefinitely  dismiss it)\n                    this.dismiss(id);\n                    id = undefined;\n                }\n                data.finally == null ? void 0 : data.finally.call(data);\n            });\n            const unwrap = ()=>new Promise((resolve, reject)=>originalPromise.then(()=>result[0] === 'reject' ? reject(result[1]) : resolve(result[1])).catch(reject));\n            if (typeof id !== 'string' && typeof id !== 'number') {\n                // cannot Object.assign on undefined\n                return {\n                    unwrap\n                };\n            } else {\n                return Object.assign(id, {\n                    unwrap\n                });\n            }\n        };\n        this.custom = (jsx, data)=>{\n            const id = (data == null ? void 0 : data.id) || toastsCounter++;\n            this.create({\n                jsx: jsx(id),\n                id,\n                ...data\n            });\n            return id;\n        };\n        this.getActiveToasts = ()=>{\n            return this.toasts.filter((toast)=>!this.dismissedToasts.has(toast.id));\n        };\n        this.subscribers = [];\n        this.toasts = [];\n        this.dismissedToasts = new Set();\n    }\n}\nconst ToastState = new Observer();\n// bind this to the toast function\nconst toastFunction = (message, data)=>{\n    const id = (data == null ? void 0 : data.id) || toastsCounter++;\n    ToastState.addToast({\n        title: message,\n        ...data,\n        id\n    });\n    return id;\n};\nconst isHttpResponse = (data)=>{\n    return data && typeof data === 'object' && 'ok' in data && typeof data.ok === 'boolean' && 'status' in data && typeof data.status === 'number';\n};\nconst basicToast = toastFunction;\nconst getHistory = ()=>ToastState.toasts;\nconst getToasts = ()=>ToastState.getActiveToasts();\n// We use `Object.assign` to maintain the correct types as we would lose them otherwise\nconst toast = Object.assign(basicToast, {\n    success: ToastState.success,\n    info: ToastState.info,\n    warning: ToastState.warning,\n    error: ToastState.error,\n    custom: ToastState.custom,\n    message: ToastState.message,\n    promise: ToastState.promise,\n    dismiss: ToastState.dismiss,\n    loading: ToastState.loading\n}, {\n    getHistory,\n    getToasts\n});\n\n__insertCSS(\"[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\");\n\nfunction isAction(action) {\n    return action.label !== undefined;\n}\n\n// Visible toasts amount\nconst VISIBLE_TOASTS_AMOUNT = 3;\n// Viewport padding\nconst VIEWPORT_OFFSET = '24px';\n// Mobile viewport padding\nconst MOBILE_VIEWPORT_OFFSET = '16px';\n// Default lifetime of a toasts (in ms)\nconst TOAST_LIFETIME = 4000;\n// Default toast width\nconst TOAST_WIDTH = 356;\n// Default gap between toasts\nconst GAP = 14;\n// Threshold to dismiss a toast\nconst SWIPE_THRESHOLD = 45;\n// Equal to exit animation duration\nconst TIME_BEFORE_UNMOUNT = 200;\nfunction cn(...classes) {\n    return classes.filter(Boolean).join(' ');\n}\nfunction getDefaultSwipeDirections(position) {\n    const [y, x] = position.split('-');\n    const directions = [];\n    if (y) {\n        directions.push(y);\n    }\n    if (x) {\n        directions.push(x);\n    }\n    return directions;\n}\nconst Toast = (props)=>{\n    var _toast_classNames, _toast_classNames1, _toast_classNames2, _toast_classNames3, _toast_classNames4, _toast_classNames5, _toast_classNames6, _toast_classNames7, _toast_classNames8;\n    const { invert: ToasterInvert, toast, unstyled, interacting, setHeights, visibleToasts, heights, index, toasts, expanded, removeToast, defaultRichColors, closeButton: closeButtonFromToaster, style, cancelButtonStyle, actionButtonStyle, className = '', descriptionClassName = '', duration: durationFromToaster, position, gap, expandByDefault, classNames, icons, closeButtonAriaLabel = 'Close toast' } = props;\n    const [swipeDirection, setSwipeDirection] = React.useState(null);\n    const [swipeOutDirection, setSwipeOutDirection] = React.useState(null);\n    const [mounted, setMounted] = React.useState(false);\n    const [removed, setRemoved] = React.useState(false);\n    const [swiping, setSwiping] = React.useState(false);\n    const [swipeOut, setSwipeOut] = React.useState(false);\n    const [isSwiped, setIsSwiped] = React.useState(false);\n    const [offsetBeforeRemove, setOffsetBeforeRemove] = React.useState(0);\n    const [initialHeight, setInitialHeight] = React.useState(0);\n    const remainingTime = React.useRef(toast.duration || durationFromToaster || TOAST_LIFETIME);\n    const dragStartTime = React.useRef(null);\n    const toastRef = React.useRef(null);\n    const isFront = index === 0;\n    const isVisible = index + 1 <= visibleToasts;\n    const toastType = toast.type;\n    const dismissible = toast.dismissible !== false;\n    const toastClassname = toast.className || '';\n    const toastDescriptionClassname = toast.descriptionClassName || '';\n    // Height index is used to calculate the offset as it gets updated before the toast array, which means we can calculate the new layout faster.\n    const heightIndex = React.useMemo(()=>heights.findIndex((height)=>height.toastId === toast.id) || 0, [\n        heights,\n        toast.id\n    ]);\n    const closeButton = React.useMemo(()=>{\n        var _toast_closeButton;\n        return (_toast_closeButton = toast.closeButton) != null ? _toast_closeButton : closeButtonFromToaster;\n    }, [\n        toast.closeButton,\n        closeButtonFromToaster\n    ]);\n    const duration = React.useMemo(()=>toast.duration || durationFromToaster || TOAST_LIFETIME, [\n        toast.duration,\n        durationFromToaster\n    ]);\n    const closeTimerStartTimeRef = React.useRef(0);\n    const offset = React.useRef(0);\n    const lastCloseTimerStartTimeRef = React.useRef(0);\n    const pointerStartRef = React.useRef(null);\n    const [y, x] = position.split('-');\n    const toastsHeightBefore = React.useMemo(()=>{\n        return heights.reduce((prev, curr, reducerIndex)=>{\n            // Calculate offset up until current toast\n            if (reducerIndex >= heightIndex) {\n                return prev;\n            }\n            return prev + curr.height;\n        }, 0);\n    }, [\n        heights,\n        heightIndex\n    ]);\n    const isDocumentHidden = useIsDocumentHidden();\n    const invert = toast.invert || ToasterInvert;\n    const disabled = toastType === 'loading';\n    offset.current = React.useMemo(()=>heightIndex * gap + toastsHeightBefore, [\n        heightIndex,\n        toastsHeightBefore\n    ]);\n    React.useEffect(()=>{\n        remainingTime.current = duration;\n    }, [\n        duration\n    ]);\n    React.useEffect(()=>{\n        // Trigger enter animation without using CSS animation\n        setMounted(true);\n    }, []);\n    React.useEffect(()=>{\n        const toastNode = toastRef.current;\n        if (toastNode) {\n            const height = toastNode.getBoundingClientRect().height;\n            // Add toast height to heights array after the toast is mounted\n            setInitialHeight(height);\n            setHeights((h)=>[\n                    {\n                        toastId: toast.id,\n                        height,\n                        position: toast.position\n                    },\n                    ...h\n                ]);\n            return ()=>setHeights((h)=>h.filter((height)=>height.toastId !== toast.id));\n        }\n    }, [\n        setHeights,\n        toast.id\n    ]);\n    React.useLayoutEffect(()=>{\n        // Keep height up to date with the content in case it updates\n        if (!mounted) return;\n        const toastNode = toastRef.current;\n        const originalHeight = toastNode.style.height;\n        toastNode.style.height = 'auto';\n        const newHeight = toastNode.getBoundingClientRect().height;\n        toastNode.style.height = originalHeight;\n        setInitialHeight(newHeight);\n        setHeights((heights)=>{\n            const alreadyExists = heights.find((height)=>height.toastId === toast.id);\n            if (!alreadyExists) {\n                return [\n                    {\n                        toastId: toast.id,\n                        height: newHeight,\n                        position: toast.position\n                    },\n                    ...heights\n                ];\n            } else {\n                return heights.map((height)=>height.toastId === toast.id ? {\n                        ...height,\n                        height: newHeight\n                    } : height);\n            }\n        });\n    }, [\n        mounted,\n        toast.title,\n        toast.description,\n        setHeights,\n        toast.id,\n        toast.jsx,\n        toast.action,\n        toast.cancel\n    ]);\n    const deleteToast = React.useCallback(()=>{\n        // Save the offset for the exit swipe animation\n        setRemoved(true);\n        setOffsetBeforeRemove(offset.current);\n        setHeights((h)=>h.filter((height)=>height.toastId !== toast.id));\n        setTimeout(()=>{\n            removeToast(toast);\n        }, TIME_BEFORE_UNMOUNT);\n    }, [\n        toast,\n        removeToast,\n        setHeights,\n        offset\n    ]);\n    React.useEffect(()=>{\n        if (toast.promise && toastType === 'loading' || toast.duration === Infinity || toast.type === 'loading') return;\n        let timeoutId;\n        // Pause the timer on each hover\n        const pauseTimer = ()=>{\n            if (lastCloseTimerStartTimeRef.current < closeTimerStartTimeRef.current) {\n                // Get the elapsed time since the timer started\n                const elapsedTime = new Date().getTime() - closeTimerStartTimeRef.current;\n                remainingTime.current = remainingTime.current - elapsedTime;\n            }\n            lastCloseTimerStartTimeRef.current = new Date().getTime();\n        };\n        const startTimer = ()=>{\n            // setTimeout(, Infinity) behaves as if the delay is 0.\n            // As a result, the toast would be closed immediately, giving the appearance that it was never rendered.\n            // See: https://github.com/denysdovhan/wtfjs?tab=readme-ov-file#an-infinite-timeout\n            if (remainingTime.current === Infinity) return;\n            closeTimerStartTimeRef.current = new Date().getTime();\n            // Let the toast know it has started\n            timeoutId = setTimeout(()=>{\n                toast.onAutoClose == null ? void 0 : toast.onAutoClose.call(toast, toast);\n                deleteToast();\n            }, remainingTime.current);\n        };\n        if (expanded || interacting || isDocumentHidden) {\n            pauseTimer();\n        } else {\n            startTimer();\n        }\n        return ()=>clearTimeout(timeoutId);\n    }, [\n        expanded,\n        interacting,\n        toast,\n        toastType,\n        isDocumentHidden,\n        deleteToast\n    ]);\n    React.useEffect(()=>{\n        if (toast.delete) {\n            deleteToast();\n            toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n        }\n    }, [\n        deleteToast,\n        toast.delete\n    ]);\n    function getLoadingIcon() {\n        var _toast_classNames;\n        if (icons == null ? void 0 : icons.loading) {\n            var _toast_classNames1;\n            return /*#__PURE__*/ React.createElement(\"div\", {\n                className: cn(classNames == null ? void 0 : classNames.loader, toast == null ? void 0 : (_toast_classNames1 = toast.classNames) == null ? void 0 : _toast_classNames1.loader, 'sonner-loader'),\n                \"data-visible\": toastType === 'loading'\n            }, icons.loading);\n        }\n        return /*#__PURE__*/ React.createElement(Loader, {\n            className: cn(classNames == null ? void 0 : classNames.loader, toast == null ? void 0 : (_toast_classNames = toast.classNames) == null ? void 0 : _toast_classNames.loader),\n            visible: toastType === 'loading'\n        });\n    }\n    const icon = toast.icon || (icons == null ? void 0 : icons[toastType]) || getAsset(toastType);\n    var _toast_richColors, _icons_close;\n    return /*#__PURE__*/ React.createElement(\"li\", {\n        tabIndex: 0,\n        ref: toastRef,\n        className: cn(className, toastClassname, classNames == null ? void 0 : classNames.toast, toast == null ? void 0 : (_toast_classNames = toast.classNames) == null ? void 0 : _toast_classNames.toast, classNames == null ? void 0 : classNames.default, classNames == null ? void 0 : classNames[toastType], toast == null ? void 0 : (_toast_classNames1 = toast.classNames) == null ? void 0 : _toast_classNames1[toastType]),\n        \"data-sonner-toast\": \"\",\n        \"data-rich-colors\": (_toast_richColors = toast.richColors) != null ? _toast_richColors : defaultRichColors,\n        \"data-styled\": !Boolean(toast.jsx || toast.unstyled || unstyled),\n        \"data-mounted\": mounted,\n        \"data-promise\": Boolean(toast.promise),\n        \"data-swiped\": isSwiped,\n        \"data-removed\": removed,\n        \"data-visible\": isVisible,\n        \"data-y-position\": y,\n        \"data-x-position\": x,\n        \"data-index\": index,\n        \"data-front\": isFront,\n        \"data-swiping\": swiping,\n        \"data-dismissible\": dismissible,\n        \"data-type\": toastType,\n        \"data-invert\": invert,\n        \"data-swipe-out\": swipeOut,\n        \"data-swipe-direction\": swipeOutDirection,\n        \"data-expanded\": Boolean(expanded || expandByDefault && mounted),\n        \"data-testid\": toast.testId,\n        style: {\n            '--index': index,\n            '--toasts-before': index,\n            '--z-index': toasts.length - index,\n            '--offset': `${removed ? offsetBeforeRemove : offset.current}px`,\n            '--initial-height': expandByDefault ? 'auto' : `${initialHeight}px`,\n            ...style,\n            ...toast.style\n        },\n        onDragEnd: ()=>{\n            setSwiping(false);\n            setSwipeDirection(null);\n            pointerStartRef.current = null;\n        },\n        onPointerDown: (event)=>{\n            if (event.button === 2) return; // Return early on right click\n            if (disabled || !dismissible) return;\n            dragStartTime.current = new Date();\n            setOffsetBeforeRemove(offset.current);\n            // Ensure we maintain correct pointer capture even when going outside of the toast (e.g. when swiping)\n            event.target.setPointerCapture(event.pointerId);\n            if (event.target.tagName === 'BUTTON') return;\n            setSwiping(true);\n            pointerStartRef.current = {\n                x: event.clientX,\n                y: event.clientY\n            };\n        },\n        onPointerUp: ()=>{\n            var _toastRef_current, _toastRef_current1, _dragStartTime_current;\n            if (swipeOut || !dismissible) return;\n            pointerStartRef.current = null;\n            const swipeAmountX = Number(((_toastRef_current = toastRef.current) == null ? void 0 : _toastRef_current.style.getPropertyValue('--swipe-amount-x').replace('px', '')) || 0);\n            const swipeAmountY = Number(((_toastRef_current1 = toastRef.current) == null ? void 0 : _toastRef_current1.style.getPropertyValue('--swipe-amount-y').replace('px', '')) || 0);\n            const timeTaken = new Date().getTime() - ((_dragStartTime_current = dragStartTime.current) == null ? void 0 : _dragStartTime_current.getTime());\n            const swipeAmount = swipeDirection === 'x' ? swipeAmountX : swipeAmountY;\n            const velocity = Math.abs(swipeAmount) / timeTaken;\n            if (Math.abs(swipeAmount) >= SWIPE_THRESHOLD || velocity > 0.11) {\n                setOffsetBeforeRemove(offset.current);\n                toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n                if (swipeDirection === 'x') {\n                    setSwipeOutDirection(swipeAmountX > 0 ? 'right' : 'left');\n                } else {\n                    setSwipeOutDirection(swipeAmountY > 0 ? 'down' : 'up');\n                }\n                deleteToast();\n                setSwipeOut(true);\n                return;\n            } else {\n                var _toastRef_current2, _toastRef_current3;\n                (_toastRef_current2 = toastRef.current) == null ? void 0 : _toastRef_current2.style.setProperty('--swipe-amount-x', `0px`);\n                (_toastRef_current3 = toastRef.current) == null ? void 0 : _toastRef_current3.style.setProperty('--swipe-amount-y', `0px`);\n            }\n            setIsSwiped(false);\n            setSwiping(false);\n            setSwipeDirection(null);\n        },\n        onPointerMove: (event)=>{\n            var _window_getSelection, // Apply transform using both x and y values\n            _toastRef_current, _toastRef_current1;\n            if (!pointerStartRef.current || !dismissible) return;\n            const isHighlighted = ((_window_getSelection = window.getSelection()) == null ? void 0 : _window_getSelection.toString().length) > 0;\n            if (isHighlighted) return;\n            const yDelta = event.clientY - pointerStartRef.current.y;\n            const xDelta = event.clientX - pointerStartRef.current.x;\n            var _props_swipeDirections;\n            const swipeDirections = (_props_swipeDirections = props.swipeDirections) != null ? _props_swipeDirections : getDefaultSwipeDirections(position);\n            // Determine swipe direction if not already locked\n            if (!swipeDirection && (Math.abs(xDelta) > 1 || Math.abs(yDelta) > 1)) {\n                setSwipeDirection(Math.abs(xDelta) > Math.abs(yDelta) ? 'x' : 'y');\n            }\n            let swipeAmount = {\n                x: 0,\n                y: 0\n            };\n            const getDampening = (delta)=>{\n                const factor = Math.abs(delta) / 20;\n                return 1 / (1.5 + factor);\n            };\n            // Only apply swipe in the locked direction\n            if (swipeDirection === 'y') {\n                // Handle vertical swipes\n                if (swipeDirections.includes('top') || swipeDirections.includes('bottom')) {\n                    if (swipeDirections.includes('top') && yDelta < 0 || swipeDirections.includes('bottom') && yDelta > 0) {\n                        swipeAmount.y = yDelta;\n                    } else {\n                        // Smoothly transition to dampened movement\n                        const dampenedDelta = yDelta * getDampening(yDelta);\n                        // Ensure we don't jump when transitioning to dampened movement\n                        swipeAmount.y = Math.abs(dampenedDelta) < Math.abs(yDelta) ? dampenedDelta : yDelta;\n                    }\n                }\n            } else if (swipeDirection === 'x') {\n                // Handle horizontal swipes\n                if (swipeDirections.includes('left') || swipeDirections.includes('right')) {\n                    if (swipeDirections.includes('left') && xDelta < 0 || swipeDirections.includes('right') && xDelta > 0) {\n                        swipeAmount.x = xDelta;\n                    } else {\n                        // Smoothly transition to dampened movement\n                        const dampenedDelta = xDelta * getDampening(xDelta);\n                        // Ensure we don't jump when transitioning to dampened movement\n                        swipeAmount.x = Math.abs(dampenedDelta) < Math.abs(xDelta) ? dampenedDelta : xDelta;\n                    }\n                }\n            }\n            if (Math.abs(swipeAmount.x) > 0 || Math.abs(swipeAmount.y) > 0) {\n                setIsSwiped(true);\n            }\n            (_toastRef_current = toastRef.current) == null ? void 0 : _toastRef_current.style.setProperty('--swipe-amount-x', `${swipeAmount.x}px`);\n            (_toastRef_current1 = toastRef.current) == null ? void 0 : _toastRef_current1.style.setProperty('--swipe-amount-y', `${swipeAmount.y}px`);\n        }\n    }, closeButton && !toast.jsx && toastType !== 'loading' ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"aria-label\": closeButtonAriaLabel,\n        \"data-disabled\": disabled,\n        \"data-close-button\": true,\n        onClick: disabled || !dismissible ? ()=>{} : ()=>{\n            deleteToast();\n            toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n        },\n        className: cn(classNames == null ? void 0 : classNames.closeButton, toast == null ? void 0 : (_toast_classNames2 = toast.classNames) == null ? void 0 : _toast_classNames2.closeButton)\n    }, (_icons_close = icons == null ? void 0 : icons.close) != null ? _icons_close : CloseIcon) : null, (toastType || toast.icon || toast.promise) && toast.icon !== null && ((icons == null ? void 0 : icons[toastType]) !== null || toast.icon) ? /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-icon\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.icon, toast == null ? void 0 : (_toast_classNames3 = toast.classNames) == null ? void 0 : _toast_classNames3.icon)\n    }, toast.promise || toast.type === 'loading' && !toast.icon ? toast.icon || getLoadingIcon() : null, toast.type !== 'loading' ? icon : null) : null, /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-content\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.content, toast == null ? void 0 : (_toast_classNames4 = toast.classNames) == null ? void 0 : _toast_classNames4.content)\n    }, /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-title\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.title, toast == null ? void 0 : (_toast_classNames5 = toast.classNames) == null ? void 0 : _toast_classNames5.title)\n    }, toast.jsx ? toast.jsx : typeof toast.title === 'function' ? toast.title() : toast.title), toast.description ? /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-description\": \"\",\n        className: cn(descriptionClassName, toastDescriptionClassname, classNames == null ? void 0 : classNames.description, toast == null ? void 0 : (_toast_classNames6 = toast.classNames) == null ? void 0 : _toast_classNames6.description)\n    }, typeof toast.description === 'function' ? toast.description() : toast.description) : null), /*#__PURE__*/ React.isValidElement(toast.cancel) ? toast.cancel : toast.cancel && isAction(toast.cancel) ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"data-button\": true,\n        \"data-cancel\": true,\n        style: toast.cancelButtonStyle || cancelButtonStyle,\n        onClick: (event)=>{\n            // We need to check twice because typescript\n            if (!isAction(toast.cancel)) return;\n            if (!dismissible) return;\n            toast.cancel.onClick == null ? void 0 : toast.cancel.onClick.call(toast.cancel, event);\n            deleteToast();\n        },\n        className: cn(classNames == null ? void 0 : classNames.cancelButton, toast == null ? void 0 : (_toast_classNames7 = toast.classNames) == null ? void 0 : _toast_classNames7.cancelButton)\n    }, toast.cancel.label) : null, /*#__PURE__*/ React.isValidElement(toast.action) ? toast.action : toast.action && isAction(toast.action) ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"data-button\": true,\n        \"data-action\": true,\n        style: toast.actionButtonStyle || actionButtonStyle,\n        onClick: (event)=>{\n            // We need to check twice because typescript\n            if (!isAction(toast.action)) return;\n            toast.action.onClick == null ? void 0 : toast.action.onClick.call(toast.action, event);\n            if (event.defaultPrevented) return;\n            deleteToast();\n        },\n        className: cn(classNames == null ? void 0 : classNames.actionButton, toast == null ? void 0 : (_toast_classNames8 = toast.classNames) == null ? void 0 : _toast_classNames8.actionButton)\n    }, toast.action.label) : null);\n};\nfunction getDocumentDirection() {\n    if (typeof window === 'undefined') return 'ltr';\n    if (typeof document === 'undefined') return 'ltr'; // For Fresh purpose\n    const dirAttribute = document.documentElement.getAttribute('dir');\n    if (dirAttribute === 'auto' || !dirAttribute) {\n        return window.getComputedStyle(document.documentElement).direction;\n    }\n    return dirAttribute;\n}\nfunction assignOffset(defaultOffset, mobileOffset) {\n    const styles = {};\n    [\n        defaultOffset,\n        mobileOffset\n    ].forEach((offset, index)=>{\n        const isMobile = index === 1;\n        const prefix = isMobile ? '--mobile-offset' : '--offset';\n        const defaultValue = isMobile ? MOBILE_VIEWPORT_OFFSET : VIEWPORT_OFFSET;\n        function assignAll(offset) {\n            [\n                'top',\n                'right',\n                'bottom',\n                'left'\n            ].forEach((key)=>{\n                styles[`${prefix}-${key}`] = typeof offset === 'number' ? `${offset}px` : offset;\n            });\n        }\n        if (typeof offset === 'number' || typeof offset === 'string') {\n            assignAll(offset);\n        } else if (typeof offset === 'object') {\n            [\n                'top',\n                'right',\n                'bottom',\n                'left'\n            ].forEach((key)=>{\n                if (offset[key] === undefined) {\n                    styles[`${prefix}-${key}`] = defaultValue;\n                } else {\n                    styles[`${prefix}-${key}`] = typeof offset[key] === 'number' ? `${offset[key]}px` : offset[key];\n                }\n            });\n        } else {\n            assignAll(defaultValue);\n        }\n    });\n    return styles;\n}\nfunction useSonner() {\n    const [activeToasts, setActiveToasts] = React.useState([]);\n    React.useEffect(()=>{\n        return ToastState.subscribe((toast)=>{\n            if (toast.dismiss) {\n                setTimeout(()=>{\n                    ReactDOM.flushSync(()=>{\n                        setActiveToasts((toasts)=>toasts.filter((t)=>t.id !== toast.id));\n                    });\n                });\n                return;\n            }\n            // Prevent batching, temp solution.\n            setTimeout(()=>{\n                ReactDOM.flushSync(()=>{\n                    setActiveToasts((toasts)=>{\n                        const indexOfExistingToast = toasts.findIndex((t)=>t.id === toast.id);\n                        // Update the toast if it already exists\n                        if (indexOfExistingToast !== -1) {\n                            return [\n                                ...toasts.slice(0, indexOfExistingToast),\n                                {\n                                    ...toasts[indexOfExistingToast],\n                                    ...toast\n                                },\n                                ...toasts.slice(indexOfExistingToast + 1)\n                            ];\n                        }\n                        return [\n                            toast,\n                            ...toasts\n                        ];\n                    });\n                });\n            });\n        });\n    }, []);\n    return {\n        toasts: activeToasts\n    };\n}\nconst Toaster = /*#__PURE__*/ React.forwardRef(function Toaster(props, ref) {\n    const { id, invert, position = 'bottom-right', hotkey = [\n        'altKey',\n        'KeyT'\n    ], expand, closeButton, className, offset, mobileOffset, theme = 'light', richColors, duration, style, visibleToasts = VISIBLE_TOASTS_AMOUNT, toastOptions, dir = getDocumentDirection(), gap = GAP, icons, containerAriaLabel = 'Notifications' } = props;\n    const [toasts, setToasts] = React.useState([]);\n    const filteredToasts = React.useMemo(()=>{\n        if (id) {\n            return toasts.filter((toast)=>toast.toasterId === id);\n        }\n        return toasts.filter((toast)=>!toast.toasterId);\n    }, [\n        toasts,\n        id\n    ]);\n    const possiblePositions = React.useMemo(()=>{\n        return Array.from(new Set([\n            position\n        ].concat(filteredToasts.filter((toast)=>toast.position).map((toast)=>toast.position))));\n    }, [\n        filteredToasts,\n        position\n    ]);\n    const [heights, setHeights] = React.useState([]);\n    const [expanded, setExpanded] = React.useState(false);\n    const [interacting, setInteracting] = React.useState(false);\n    const [actualTheme, setActualTheme] = React.useState(theme !== 'system' ? theme : typeof window !== 'undefined' ? window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light');\n    const listRef = React.useRef(null);\n    const hotkeyLabel = hotkey.join('+').replace(/Key/g, '').replace(/Digit/g, '');\n    const lastFocusedElementRef = React.useRef(null);\n    const isFocusWithinRef = React.useRef(false);\n    const removeToast = React.useCallback((toastToRemove)=>{\n        setToasts((toasts)=>{\n            var _toasts_find;\n            if (!((_toasts_find = toasts.find((toast)=>toast.id === toastToRemove.id)) == null ? void 0 : _toasts_find.delete)) {\n                ToastState.dismiss(toastToRemove.id);\n            }\n            return toasts.filter(({ id })=>id !== toastToRemove.id);\n        });\n    }, []);\n    React.useEffect(()=>{\n        return ToastState.subscribe((toast)=>{\n            if (toast.dismiss) {\n                // Prevent batching of other state updates\n                requestAnimationFrame(()=>{\n                    setToasts((toasts)=>toasts.map((t)=>t.id === toast.id ? {\n                                ...t,\n                                delete: true\n                            } : t));\n                });\n                return;\n            }\n            // Prevent batching, temp solution.\n            setTimeout(()=>{\n                ReactDOM.flushSync(()=>{\n                    setToasts((toasts)=>{\n                        const indexOfExistingToast = toasts.findIndex((t)=>t.id === toast.id);\n                        // Update the toast if it already exists\n                        if (indexOfExistingToast !== -1) {\n                            return [\n                                ...toasts.slice(0, indexOfExistingToast),\n                                {\n                                    ...toasts[indexOfExistingToast],\n                                    ...toast\n                                },\n                                ...toasts.slice(indexOfExistingToast + 1)\n                            ];\n                        }\n                        return [\n                            toast,\n                            ...toasts\n                        ];\n                    });\n                });\n            });\n        });\n    }, [\n        toasts\n    ]);\n    React.useEffect(()=>{\n        if (theme !== 'system') {\n            setActualTheme(theme);\n            return;\n        }\n        if (theme === 'system') {\n            // check if current preference is dark\n            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n                // it's currently dark\n                setActualTheme('dark');\n            } else {\n                // it's not dark\n                setActualTheme('light');\n            }\n        }\n        if (typeof window === 'undefined') return;\n        const darkMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n        try {\n            // Chrome & Firefox\n            darkMediaQuery.addEventListener('change', ({ matches })=>{\n                if (matches) {\n                    setActualTheme('dark');\n                } else {\n                    setActualTheme('light');\n                }\n            });\n        } catch (error) {\n            // Safari < 14\n            darkMediaQuery.addListener(({ matches })=>{\n                try {\n                    if (matches) {\n                        setActualTheme('dark');\n                    } else {\n                        setActualTheme('light');\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            });\n        }\n    }, [\n        theme\n    ]);\n    React.useEffect(()=>{\n        // Ensure expanded is always false when no toasts are present / only one left\n        if (toasts.length <= 1) {\n            setExpanded(false);\n        }\n    }, [\n        toasts\n    ]);\n    React.useEffect(()=>{\n        const handleKeyDown = (event)=>{\n            var _listRef_current;\n            const isHotkeyPressed = hotkey.every((key)=>event[key] || event.code === key);\n            if (isHotkeyPressed) {\n                var _listRef_current1;\n                setExpanded(true);\n                (_listRef_current1 = listRef.current) == null ? void 0 : _listRef_current1.focus();\n            }\n            if (event.code === 'Escape' && (document.activeElement === listRef.current || ((_listRef_current = listRef.current) == null ? void 0 : _listRef_current.contains(document.activeElement)))) {\n                setExpanded(false);\n            }\n        };\n        document.addEventListener('keydown', handleKeyDown);\n        return ()=>document.removeEventListener('keydown', handleKeyDown);\n    }, [\n        hotkey\n    ]);\n    React.useEffect(()=>{\n        if (listRef.current) {\n            return ()=>{\n                if (lastFocusedElementRef.current) {\n                    lastFocusedElementRef.current.focus({\n                        preventScroll: true\n                    });\n                    lastFocusedElementRef.current = null;\n                    isFocusWithinRef.current = false;\n                }\n            };\n        }\n    }, [\n        listRef.current\n    ]);\n    return(// Remove item from normal navigation flow, only available via hotkey\n    /*#__PURE__*/ React.createElement(\"section\", {\n        ref: ref,\n        \"aria-label\": `${containerAriaLabel} ${hotkeyLabel}`,\n        tabIndex: -1,\n        \"aria-live\": \"polite\",\n        \"aria-relevant\": \"additions text\",\n        \"aria-atomic\": \"false\",\n        suppressHydrationWarning: true\n    }, possiblePositions.map((position, index)=>{\n        var _heights_;\n        const [y, x] = position.split('-');\n        if (!filteredToasts.length) return null;\n        return /*#__PURE__*/ React.createElement(\"ol\", {\n            key: position,\n            dir: dir === 'auto' ? getDocumentDirection() : dir,\n            tabIndex: -1,\n            ref: listRef,\n            className: className,\n            \"data-sonner-toaster\": true,\n            \"data-sonner-theme\": actualTheme,\n            \"data-y-position\": y,\n            \"data-x-position\": x,\n            style: {\n                '--front-toast-height': `${((_heights_ = heights[0]) == null ? void 0 : _heights_.height) || 0}px`,\n                '--width': `${TOAST_WIDTH}px`,\n                '--gap': `${gap}px`,\n                ...style,\n                ...assignOffset(offset, mobileOffset)\n            },\n            onBlur: (event)=>{\n                if (isFocusWithinRef.current && !event.currentTarget.contains(event.relatedTarget)) {\n                    isFocusWithinRef.current = false;\n                    if (lastFocusedElementRef.current) {\n                        lastFocusedElementRef.current.focus({\n                            preventScroll: true\n                        });\n                        lastFocusedElementRef.current = null;\n                    }\n                }\n            },\n            onFocus: (event)=>{\n                const isNotDismissible = event.target instanceof HTMLElement && event.target.dataset.dismissible === 'false';\n                if (isNotDismissible) return;\n                if (!isFocusWithinRef.current) {\n                    isFocusWithinRef.current = true;\n                    lastFocusedElementRef.current = event.relatedTarget;\n                }\n            },\n            onMouseEnter: ()=>setExpanded(true),\n            onMouseMove: ()=>setExpanded(true),\n            onMouseLeave: ()=>{\n                // Avoid setting expanded to false when interacting with a toast, e.g. swiping\n                if (!interacting) {\n                    setExpanded(false);\n                }\n            },\n            onDragEnd: ()=>setExpanded(false),\n            onPointerDown: (event)=>{\n                const isNotDismissible = event.target instanceof HTMLElement && event.target.dataset.dismissible === 'false';\n                if (isNotDismissible) return;\n                setInteracting(true);\n            },\n            onPointerUp: ()=>setInteracting(false)\n        }, filteredToasts.filter((toast)=>!toast.position && index === 0 || toast.position === position).map((toast, index)=>{\n            var _toastOptions_duration, _toastOptions_closeButton;\n            return /*#__PURE__*/ React.createElement(Toast, {\n                key: toast.id,\n                icons: icons,\n                index: index,\n                toast: toast,\n                defaultRichColors: richColors,\n                duration: (_toastOptions_duration = toastOptions == null ? void 0 : toastOptions.duration) != null ? _toastOptions_duration : duration,\n                className: toastOptions == null ? void 0 : toastOptions.className,\n                descriptionClassName: toastOptions == null ? void 0 : toastOptions.descriptionClassName,\n                invert: invert,\n                visibleToasts: visibleToasts,\n                closeButton: (_toastOptions_closeButton = toastOptions == null ? void 0 : toastOptions.closeButton) != null ? _toastOptions_closeButton : closeButton,\n                interacting: interacting,\n                position: position,\n                style: toastOptions == null ? void 0 : toastOptions.style,\n                unstyled: toastOptions == null ? void 0 : toastOptions.unstyled,\n                classNames: toastOptions == null ? void 0 : toastOptions.classNames,\n                cancelButtonStyle: toastOptions == null ? void 0 : toastOptions.cancelButtonStyle,\n                actionButtonStyle: toastOptions == null ? void 0 : toastOptions.actionButtonStyle,\n                closeButtonAriaLabel: toastOptions == null ? void 0 : toastOptions.closeButtonAriaLabel,\n                removeToast: removeToast,\n                toasts: filteredToasts.filter((t)=>t.position == toast.position),\n                heights: heights.filter((h)=>h.position == toast.position),\n                setHeights: setHeights,\n                expandByDefault: expand,\n                gap: gap,\n                expanded: expanded,\n                swipeDirections: props.swipeDirections\n            });\n        }));\n    })));\n});\n\nexport { Toaster, toast, useSonner };\n","export interface AppConfig {\n  apiBaseUrl: string\n  appVersion: string\n  minBackend: string\n  features: Record<string, boolean>\n}\n\nexport type RuntimeOverrides = {\n  mock?: boolean\n  latency?: number\n  error?: number\n  q?: string\n  devtools?: '1' | '0'\n  features?: Record<string, boolean>\n  apiBaseUrl?: string\n  mockSeed?: string\n}\n\nconst LS = 'maihouse_config'\n\nasync function fetchJson(url: string) {\n  const r = await fetch(url)\n  return r.json()\n}\n\nfunction isValidConfig(obj: any): obj is AppConfig {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.apiBaseUrl === 'string' &&\n    typeof obj.appVersion === 'string' &&\n    typeof obj.minBackend === 'string' &&\n    typeof obj.features === 'object'\n  )\n}\n\nasync function readBase(): Promise<AppConfig & Partial<RuntimeOverrides>> {\n  try {\n    const cache = localStorage.getItem(LS)\n    if (cache) {\n      const parsed = JSON.parse(cache)\n      if (isValidConfig(parsed)) return { ...parsed, ...pickParams() }\n    }\n  } catch {}\n  \n  const baseUrl = import.meta.env.BASE_URL || '/'\n  const url = `${window.location.origin}${baseUrl}app.config.json`\n  return fetchJson(url)\n}\n\nfunction getParamFromBoth(key: string): string | undefined {\n  const search = new URLSearchParams(location.search).get(key)\n  const i = location.hash.indexOf('?')\n  const hash = i > -1 ? new URLSearchParams(location.hash.slice(i)).get(key) : null\n  return (hash ?? search) ?? undefined\n}\n\nfunction pickParams() {\n  const slots = getParamFromBoth('slots')\n  const features = slots\n    ? slots.split(',').reduce<Record<string, boolean>>((a, s) => ((a[s.trim()] = true), a), {})\n    : undefined\n  \n  return {\n    apiBaseUrl: getParamFromBoth('api'),\n    features,\n    mock: getParamFromBoth('mock') ? getParamFromBoth('mock') === '1' : undefined,\n    latency: getParamFromBoth('latency') ? +getParamFromBoth('latency')! : undefined,\n    error: getParamFromBoth('error') ? +getParamFromBoth('error')! : undefined,\n    q: getParamFromBoth('q'),\n    devtools: getParamFromBoth('devtools') as '1' | '0' | undefined,\n    mockSeed: getParamFromBoth('seed')\n  } as RuntimeOverrides\n}\n\nexport async function getConfig(): Promise<AppConfig & RuntimeOverrides> {\n  const base = await readBase()\n  const o = pickParams()\n  const merged: AppConfig & RuntimeOverrides = {\n    ...base,\n    ...o,\n    mock: o.mock ?? (base as any).mock ?? true,\n    latency: o.latency ?? (base as any).latency ?? 0,\n    error: o.error ?? (base as any).error ?? 0\n  }\n  \n  try {\n    localStorage.setItem(LS, JSON.stringify(merged))\n  } catch {}\n  \n  return merged\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// \nexport function track(event: string, payload?: Record<string, any>) {\n  try {\n     \n    console.debug(\"[track]\", event, payload || {});\n  } catch {}\n}\nexport const Events = {\n  QuietOn: \"user.needs_quiet_space\",\n  QuietOff: \"user.back_to_explore\",\n  QuietAutoOff: \"user.quiet_space_timeout\",\n  QuietTurnUsed: \"user.quiet_space_turn_used\",\n  WarmbarView: \"ui.warmbar_view\",\n  WarmbarContinue: \"ui.warmbar_click_continue\",\n  WarmbarDismiss: \"ui.warmbar_click_dismiss\",\n  MoodPick: \"user.feeling_set\",\n  NoteSaved: \"user.reflects_on_viewing\",\n  DebriefGen: \"user.debrief_mna_generated\",\n  DebriefSave: \"user.debrief_saved\",\n  BudgetCopy: \"user.seeks_budget_clarity\",\n  ELI5Open: \"user.needs_plain_explain\",\n  RewriteGen: \"user.needs_polite_message_generated\",\n  RewriteAdopt: \"user.polite_message_adopted\",\n};\n","import React, { createContext, useCallback, useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Events, track } from \"../analytics/track\";\n\ntype QuietState = {\n  isQuiet: boolean;\n  reason?: string;         // e.g. \"\"/\"\"\n  untilTs?: number | null; // \n  remainingTurns?: number | null; //  10\n};\ntype QuietAPI = {\n  state: QuietState;\n  startQuiet: (opts?: { minutes?: number; turns?: number; reason?: string }) => void;\n  clearQuiet: () => void;\n  decrementTurn: () => void;\n  isActive: () => boolean;\n};\nconst STORAGE_KEY = \"mai-quiet-mode-v1\";\nconst QuietModeContext = createContext<QuietAPI | null>(null);\n\nfunction readStorage(): QuietState {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return { isQuiet: false, untilTs: null, remainingTurns: null };\n    const parsed = JSON.parse(raw) as QuietState;\n    return parsed;\n  } catch {\n    return { isQuiet: false, untilTs: null, remainingTurns: null };\n  }\n}\nfunction writeStorage(s: QuietState) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(s));\n}\n\nexport const QuietModeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [state, setState] = useState<QuietState>(() => readStorage());\n  const tickRef = useRef<number | null>(null);\n\n  const isActive = useCallback(() => {\n    if (!state.isQuiet) return false;\n    const now = Date.now();\n    if (state.untilTs && now > state.untilTs) return false;\n    if (state.remainingTurns !== null && (state.remainingTurns ?? 0) <= 0) return false;\n    return true;\n  }, [state]);\n\n  // \n  useEffect(() => {\n    const now = Date.now();\n    if (state.isQuiet && state.untilTs && now > state.untilTs) {\n      setState({ isQuiet: false, untilTs: null, remainingTurns: null });\n      writeStorage({ isQuiet: false, untilTs: null, remainingTurns: null });\n    }\n  }, [state]);\n\n  //  30 \n  useEffect(() => {\n    if (tickRef.current) window.clearInterval(tickRef.current);\n    tickRef.current = window.setInterval(() => {\n      const now = Date.now();\n      const saved = readStorage();\n      if (saved.isQuiet && saved.untilTs && now > saved.untilTs) {\n        setState({ isQuiet: false, untilTs: null, remainingTurns: null });\n        writeStorage({ isQuiet: false, untilTs: null, remainingTurns: null });\n      }\n    }, 30000) as unknown as number;\n    return () => {\n      if (tickRef.current) window.clearInterval(tickRef.current);\n    };\n  }, []);\n\n  const startQuiet = useCallback((opts?: { minutes?: number; turns?: number; reason?: string }) => {\n    const minutes = opts?.minutes ?? null;\n    const turns = opts?.turns ?? 10; //  10 \n    const reason = opts?.reason;\n    const untilTs = minutes ? Date.now() + minutes * 60_000 : null;\n    const next: QuietState = {\n      isQuiet: true,\n      ...(reason && { reason }),\n      untilTs,\n      remainingTurns: turns,\n    };\n    setState(next);\n    writeStorage(next);\n    track(Events.QuietOn, { reason, minutes, turns });\n  }, []);\n\n  const clearQuiet = useCallback(() => {\n    const next: QuietState = { isQuiet: false, untilTs: null, remainingTurns: null };\n    setState(next);\n    writeStorage(next);\n    track(Events.QuietOff, {});\n  }, []);\n\n  const decrementTurn = useCallback(() => {\n    setState(prev => {\n      if (!prev.isQuiet) return prev;\n      if (prev.remainingTurns === null) return prev;\n      const left = Math.max(0, (prev.remainingTurns ?? 0) - 1);\n      const next: QuietState = { ...prev, remainingTurns: left };\n      writeStorage(next);\n      if (left === 0) {\n        const cleared: QuietState = { isQuiet: false, untilTs: null, remainingTurns: null };\n        writeStorage(cleared);\n        track(Events.QuietAutoOff, { reason: \"turns_exhausted\" });\n        return cleared;\n      }\n      return next;\n    });\n  }, []);\n\n  const value = useMemo<QuietAPI>(() => ({\n    state,\n    startQuiet,\n    clearQuiet,\n    decrementTurn,\n    isActive,\n  }), [state, startQuiet, clearQuiet, decrementTurn, isActive]);\n\n  return (\n    <QuietModeContext.Provider value={value}>\n      {children}\n    </QuietModeContext.Provider>\n  );\n};\nexport function useQuietMode() {\n  const ctx = useContext(QuietModeContext);\n  if (!ctx) throw new Error(\"useQuietMode must be used within QuietModeProvider\");\n  return ctx;\n}\nexport function isQuietActiveFromStorage(): boolean {\n  try {\n    const raw = localStorage.getItem(\"mai-quiet-mode-v1\");\n    if (!raw) return false;\n    const s = JSON.parse(raw) as QuietState;\n    const now = Date.now();\n    if (!s.isQuiet) return false;\n    if (s.untilTs && now > s.untilTs) return false;\n    if (s.remainingTurns !== null && (s.remainingTurns ?? 0) <= 0) return false;\n    return true;\n  } catch { return false; }\n}\n","export type UserMilestones = {\n  birthday?: string;      // YYYY-MM-DD\n  move_in_date?: string;  // YYYY-MM-DD\n};\nexport type UserProfile = {\n  tags: string[];\n  milestones?: UserMilestones;\n  lastSeenAt?: number;\n  lastMood?: \"neutral\" | \"stress\" | \"rest\";\n};\n\nconst STORAGE_KEY = \"mai-user-profile-v1\";\nconst FIRST_SEEN_KEY = \"mai-first-seen-ts\";\nconst WARM_DISMISS_KEY = \"mai-warmbar-dismissed-date\"; // YYYY-MM-DD\n\nexport function loadProfile(): UserProfile {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return { tags: [] };\n    return JSON.parse(raw) as UserProfile;\n  } catch {\n    return { tags: [] };\n  }\n}\nexport function saveProfile(p: UserProfile) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(p));\n}\nexport function upsertTags(newTags: string[]) {\n  const p = loadProfile();\n  const set = new Set([...(p.tags || []), ...newTags].filter(Boolean));\n  p.tags = Array.from(set).slice(0, 8);\n  saveProfile(p);\n}\nexport function setMilestones(ms: UserMilestones) {\n  const p = loadProfile();\n  p.milestones = { ...(p.milestones || {}), ...ms };\n  saveProfile(p);\n}\nexport function setLastMood(mood: \"neutral\" | \"stress\" | \"rest\") {\n  const p = loadProfile();\n  p.lastMood = mood;\n  saveProfile(p);\n}\nexport function touchVisit() {\n  const p = loadProfile();\n  p.lastSeenAt = Date.now();\n  saveProfile(p);\n}\nexport function ensureFirstSeen(): { isFirstVisit: boolean } {\n  const exist = localStorage.getItem(FIRST_SEEN_KEY);\n  if (exist) return { isFirstVisit: false };\n  localStorage.setItem(FIRST_SEEN_KEY, String(Date.now()));\n  return { isFirstVisit: true };\n}\nexport function dismissWarmbarToday() {\n  localStorage.setItem(WARM_DISMISS_KEY, todayStr());\n}\nexport function isWarmbarDismissedToday() {\n  return localStorage.getItem(WARM_DISMISS_KEY) === todayStr();\n}\nexport function getWarmTags(max = 3): string[] {\n  const p = loadProfile();\n  return (p.tags || []).slice(0, max);\n}\nfunction todayStr(): string {\n  const d = new Date();\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const day = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${day}`;\n}\nfunction diffDays(a: Date, b: Date): number {\n  const MS = 24 * 60 * 60 * 1000;\n  const ad = new Date(a.getFullYear(), a.getMonth(), a.getDate()).getTime();\n  const bd = new Date(b.getFullYear(), b.getMonth(), b.getDate()).getTime();\n  return Math.round((ad - bd) / MS);\n}\nexport function getMilestoneHint(ms?: UserMilestones): string | null {\n  if (!ms) return null;\n  const now = new Date();\n  if (ms.birthday) {\n    const hint = nearAnnual(ms.birthday, now, 7);\n    if (hint) return hint;\n  }\n  if (ms.move_in_date) {\n    const hint = nearAnnual(ms.move_in_date, now, 7, \"\");\n    if (hint) return hint;\n  }\n  return null;\n}\nfunction nearAnnual(dateStr: string, now: Date, days = 7, label?: string): string | null {\n  const [y, m, d] = dateStr.split(\"-\").map((x) => Number(x));\n  if (!y || !m || !d) return null;\n  const thisYear = new Date(now.getFullYear(), m - 1, d);\n  const delta = Math.abs(diffDays(thisYear, now));\n  if (delta <= days) {\n    if (label === \"\") return \"\";\n    return \"\";\n  }\n  return null;\n}\n","/**\n *  (MaiMai) -  AI \n * \n *  v5.0 - \n * \n * \n * 1. //\n * 2.  + \n * 3. \n * 4.   \n */\n\n// ============================================\n//  System Prompt V5.1 -  + \n// ============================================\n\nexport const MAIMAI_SYSTEM_PROMPT = ` 20 \n\n\n\n\n\n- \n-  emoji 1 \n- 1-3  4-5 \n- \n\n \n\n\n\n\n- 80% 20% \n- \n- \n- \n\n\n-  2  3 \n- \n- ...\n- \n\n\n- \n- \n- \n\n \n\n\n\n   \n  ...\n   24  \n  ... \n\n\n\n \n\n\n[[:]]\n\n\n... [[:...]] \n\n\n\n \n\n\n\n\n- \n- \n- \n\n\n\n \n\n\n...\n...\n\n\n \n\n[[::]]\n\n  \n\n \n\n 5 \n- \n- \n-  OK \n\n\n\n\n \n[[::]]\n\n\n\n \n\n \n[[::ID]]\n\n\n \n\n \n[[:]]\n\n\n MaiMai v6.0 5\n\n\n  \n\n\n  \n\n\n  \n\n \n\n### \n- \n- \n- \n- \n- \n\n### \n- \n- \n-  2 \n-  3 \n\n### \n \n \n \n  5 \n\n### \n\n- \n- \n-  2-3 \n\n\n- \n- \n- \n-  AI\n- \n- \n\n\n\n`;\n\n// ============================================\n//  Quick Tags\n// ============================================\n\nexport const QUICK_TAGS_LIFESTYLE = [\n  '',\n  '',\n  '',\n  ''\n];\n\nexport const QUICK_TAGS_EXPLORE = [\n  '',\n  '',\n  '',\n  ''\n];\n\n// ============================================\n//  \n// ============================================\n\nexport type UserState = 'exploring' | 'semi-warm' | 'explicit';\n\nexport function detectUserState(\n  message: string,\n  accumulatedTags: Map<string, number>\n): UserState {\n  const msg = message.toLowerCase();\n  \n  // \n  const explicitKeywords = [\n    '', '', '', '', '', '',\n    '', '', '', '', '',\n    '', '', '', '', ''\n  ];\n  if (explicitKeywords.some(k => msg.includes(k))) {\n    return 'explicit';\n  }\n  \n  //  >= 3\n  let totalScore = 0;\n  accumulatedTags.forEach(score => { totalScore += score; });\n  if (totalScore >= 3) {\n    return 'semi-warm';\n  }\n  \n  // \n  return 'exploring';\n}\n\n// ============================================\n//  \n// ============================================\n\n// ============================================\n//  \n// ============================================\n\nexport const BRIDGE_SCRIPTS: Record<string, { \n  topic: string; \n  bridge: string; \n  feature: string;\n  keywords: string[];\n}> = {\n  'coffee': {\n    topic: '/',\n    bridge: ' ',\n    feature: '',\n    keywords: ['', '', '', '', 'cafe']\n  },\n  'gym': {\n    topic: '/',\n    bridge: '... ',\n    feature: '',\n    keywords: ['', '', '', '', '', '']\n  },\n  'package': {\n    topic: '/',\n    bridge: ' 24  ',\n    feature: '',\n    keywords: ['', '', '', '', '']\n  },\n  'sleep': {\n    topic: '/',\n    bridge: ' ',\n    feature: '',\n    keywords: ['', '', '', '', '']\n  },\n  'food': {\n    topic: '/',\n    bridge: ' ',\n    feature: '',\n    keywords: ['', '', '', 'uber', '', '']\n  },\n  'weather': {\n    topic: '/',\n    bridge: ' ',\n    feature: '',\n    keywords: ['', '', '', '', '']\n  }\n};\n\n// \nexport function detectBridgeTopic(message: string): { key: string; script: typeof BRIDGE_SCRIPTS[string] } | null {\n  const msg = message.toLowerCase();\n  for (const [key, script] of Object.entries(BRIDGE_SCRIPTS)) {\n    if (script.keywords.some(k => msg.includes(k))) {\n      return { key, script };\n    }\n  }\n  return null;\n}\n\n// ============================================\n//  \n// ============================================\n\nexport interface PainPoint {\n  category: string;\n  description: string;\n  timestamp: number;\n}\n\nlet painPoints: PainPoint[] = [];\n\n// \nconst PAIN_POINT_PATTERNS: Record<string, { category: string; description: string }> = {\n  '': { category: 'rental', description: '' },\n  '': { category: 'quality', description: '' },\n  '': { category: 'noise', description: '' },\n  '': { category: 'noise', description: '' },\n  '': { category: 'commute', description: '' },\n  '': { category: 'commute', description: '' },\n  '': { category: 'rental', description: '' },\n  '': { category: 'rental', description: '' },\n  '': { category: 'quality', description: '' },\n  '': { category: 'quality', description: '' },\n  '': { category: 'quality', description: '' },\n  '': { category: 'quality', description: '' },\n};\n\nexport function detectAndStorePainPoint(message: string): PainPoint | null {\n  const msg = message.toLowerCase();\n  for (const [keyword, info] of Object.entries(PAIN_POINT_PATTERNS)) {\n    if (msg.includes(keyword)) {\n      const newPainPoint: PainPoint = {\n        category: info.category,\n        description: info.description,\n        timestamp: Date.now()\n      };\n      // \n      if (!painPoints.some(p => p.category === info.category)) {\n        painPoints.push(newPainPoint);\n        //  localStorage\n        savePainPointsToStorage();\n      }\n      return newPainPoint;\n    }\n  }\n  return null;\n}\n\nexport function getPainPoints(): PainPoint[] {\n  return painPoints;\n}\n\nexport function getRecentPainPoint(): PainPoint | null {\n  if (painPoints.length === 0) return null;\n  //  7 \n  const weekAgo = Date.now() - 7 * 24 * 60 * 60 * 1000;\n  const recent = painPoints.filter(p => p.timestamp > weekAgo);\n  return recent[recent.length - 1] || null;\n}\n\nexport function savePainPointsToStorage(): void {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem('maimai_pain_points', JSON.stringify(painPoints));\n  }\n}\n\nexport function loadPainPointsFromStorage(): void {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('maimai_pain_points');\n    if (stored) {\n      try {\n        painPoints = JSON.parse(stored);\n      } catch {\n        painPoints = [];\n      }\n    }\n  }\n}\n\nexport function resetPainPoints(): void {\n  painPoints = [];\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem('maimai_pain_points');\n  }\n}\n\n// \nexport function generateCareGreeting(): string | null {\n  const recent = getRecentPainPoint();\n  if (!recent) return null;\n  \n  const greetings: Record<string, string> = {\n    'rental': '',\n    'quality': '',\n    'noise': '',\n    'commute': ''\n  };\n  \n  return greetings[recent.category] || null;\n}\n\n// ============================================\n//  \n// ============================================\n\nexport type TagCategory = \n  | 'education'   // \n  | 'commute'     // \n  | 'noise'       // \n  | 'pet'         // \n  | 'life-change' // \n  | 'rental'      // \n  | 'stress'      // \n  | 'quality'     // \n  | 'amenity'     // \n  | 'healing';    // \n\nexport const TAG_WEIGHTS: Record<string, { weight: number; category: TagCategory }> = {\n  // \n  '': { weight: 1, category: 'education' },\n  '': { weight: 1, category: 'education' },\n  '': { weight: 2, category: 'education' },\n  '': { weight: 3, category: 'education' },\n  '': { weight: 2, category: 'education' },\n  '': { weight: 2, category: 'education' },\n  '': { weight: 2, category: 'education' },\n  '': { weight: 2, category: 'education' },\n  '': { weight: 1, category: 'education' },\n  \n  // \n  '': { weight: 1, category: 'commute' },\n  '': { weight: 3, category: 'commute' },\n  '': { weight: 2, category: 'commute' },\n  '': { weight: 2, category: 'commute' },\n  '': { weight: 1, category: 'commute' },\n  '': { weight: 2, category: 'commute' },\n  '': { weight: 2, category: 'commute' },\n  \n  // \n  '': { weight: 3, category: 'noise' },\n  '': { weight: 3, category: 'noise' },\n  '': { weight: 2, category: 'noise' },\n  '': { weight: 1, category: 'noise' },\n  '': { weight: 1, category: 'noise' },\n  '': { weight: 2, category: 'noise' },\n  \n  // \n  '': { weight: 2, category: 'pet' },\n  '': { weight: 2, category: 'pet' },\n  '': { weight: 3, category: 'pet' },\n  '': { weight: 3, category: 'pet' },\n  '': { weight: 2, category: 'pet' },\n  \n  // \n  '': { weight: 2, category: 'life-change' },\n  '': { weight: 3, category: 'life-change' },\n  '': { weight: 3, category: 'life-change' },\n  '': { weight: 2, category: 'life-change' },\n  '': { weight: 1, category: 'life-change' },\n  '': { weight: 2, category: 'life-change' },\n  \n  // \n  '': { weight: 2, category: 'rental' },\n  '': { weight: 2, category: 'rental' },\n  '': { weight: 2, category: 'rental' },\n  '': { weight: 2, category: 'rental' },\n  '': { weight: 1, category: 'rental' },\n  '': { weight: 2, category: 'rental' },\n  '': { weight: 2, category: 'rental' },\n  \n  // \n  '': { weight: 1, category: 'stress' },\n  '': { weight: 1, category: 'stress' },\n  '': { weight: 1, category: 'stress' },\n  '': { weight: 1, category: 'stress' },\n  '': { weight: 1, category: 'stress' },\n  \n  // \n  '': { weight: 3, category: 'quality' },\n  '': { weight: 3, category: 'quality' },\n  '': { weight: 2, category: 'quality' },\n  '': { weight: 1, category: 'quality' },\n  '': { weight: 2, category: 'quality' },\n  \n  // \n  '': { weight: 1, category: 'amenity' },\n  '': { weight: 1, category: 'amenity' },\n  '': { weight: 1, category: 'amenity' },\n  '': { weight: 1, category: 'amenity' },\n  \n  // \n  '': { weight: 2, category: 'healing' },\n  '': { weight: 2, category: 'healing' },\n  '': { weight: 1, category: 'healing' },\n  '': { weight: 1, category: 'healing' },\n  '': { weight: 1, category: 'healing' }\n};\n\n// \nlet accumulatedTags: Map<string, number> = new Map();\n\nexport function accumulateTags(message: string): Map<string, number> {\n  const msg = message.toLowerCase();\n  \n  Object.entries(TAG_WEIGHTS).forEach(([keyword, { weight, category }]) => {\n    if (msg.includes(keyword)) {\n      const current = accumulatedTags.get(category) || 0;\n      accumulatedTags.set(category, current + weight);\n    }\n  });\n  \n  return accumulatedTags;\n}\n\nexport function getAccumulatedTags(): Map<string, number> {\n  return accumulatedTags;\n}\n\nexport function getTotalScore(): number {\n  let total = 0;\n  accumulatedTags.forEach(score => { total += score; });\n  return total;\n}\n\nexport function getTopCategory(): TagCategory | null {\n  let topCategory: TagCategory | null = null;\n  let topScore = 0;\n  \n  accumulatedTags.forEach((score, category) => {\n    if (score > topScore) {\n      topScore = score;\n      topCategory = category as TagCategory;\n    }\n  });\n  \n  return topScore >= 3 ? topCategory : null;\n}\n\nexport function resetAccumulatedTags(): void {\n  accumulatedTags = new Map();\n}\n\n// ============================================\n//  v5.5 \n// ============================================\n\nexport type ExitSignal = 'no-need' | 'budget' | 'later' | 'negative-emotion' | null;\n\nconst EXIT_PATTERNS: Record<string, RegExp[]> = {\n  'no-need': [\n    //, //, //, //, //, //,\n    //, /.*/, /.*/, //, //\n  ],\n  'budget': [\n    //, //, //, //, //,\n    //, //, //, //\n  ],\n  'later': [\n    //, //, //, //, //, //,\n    //, //, //, //, //\n  ],\n  'negative-emotion': [\n    //, //, //, //, //, //,\n    //, //, //\n  ]\n};\n\nexport function detectExitSignal(message: string): ExitSignal {\n  const msg = message.toLowerCase();\n  \n  for (const [signal, patterns] of Object.entries(EXIT_PATTERNS)) {\n    if (patterns.some(p => p.test(msg))) {\n      return signal as ExitSignal;\n    }\n  }\n  \n  return null;\n}\n\n// \nlet rejectionCount = 0;\nlet lastRejectionTime = 0;\n\nexport function trackRejection(): void {\n  rejectionCount++;\n  lastRejectionTime = Date.now();\n}\n\nexport function canRecommendNow(): boolean {\n  //  >= 2 3 \n  if (rejectionCount >= 2) {\n    const cooldownPassed = (Date.now() - lastRejectionTime) > 5 * 60 * 1000; // 5 \n    if (!cooldownPassed) return false;\n  }\n  return true;\n}\n\nexport function resetRejectionCount(): void {\n  rejectionCount = 0;\n}\n\n// ============================================\n//  \n// ============================================\n\nexport interface UserLifeProfile {\n  workArea?: string;           // \n  homeArea?: string;           // \n  commutePain?: string;        // \n  familyStatus?: 'single' | 'couple' | 'newlywed' | 'with-kids' | 'with-parents';\n  lifestyle?: string[];        // \n  preferences?: string[];      // \n  budget?: string;             // \n  lastUpdated?: number;\n}\n\nlet userProfile: UserLifeProfile = {};\n\n// \nexport function extractUserProfile(message: string): Partial<UserLifeProfile> {\n  const msg = message.toLowerCase();\n  const extracted: Partial<UserLifeProfile> = {};\n  \n  // \n  const workPatterns = [\n    /(?:||).*?(?:|)(.+?)(?:||||$)/,\n    /(.+?)(?:|)/,\n  ];\n  for (const pattern of workPatterns) {\n    const match = msg.match(pattern);\n    if (match && match[1]) {\n      userProfile.workArea = match[1].trim();\n      extracted.workArea = match[1].trim();\n      break;\n    }\n  }\n  \n  // \n  const homePatterns = [\n    /(?:|).*?(?:|)(.+?)(?:||||$)/,\n    /(.+?)$/,\n  ];\n  for (const pattern of homePatterns) {\n    const match = msg.match(pattern);\n    if (match && match[1]) {\n      userProfile.homeArea = match[1].trim();\n      extracted.homeArea = match[1].trim();\n      break;\n    }\n  }\n  \n  // \n  if (/.*(?:||30||||)/.test(msg)) {\n    userProfile.commutePain = message;\n    extracted.commutePain = message;\n  }\n  \n  // \n  if (/||||/.test(msg)) {\n    userProfile.familyStatus = 'newlywed';\n    extracted.familyStatus = 'newlywed';\n  } else if (/|||||/.test(msg)) {\n    userProfile.familyStatus = 'with-kids';\n    extracted.familyStatus = 'with-kids';\n  } else if (/||/.test(msg)) {\n    userProfile.familyStatus = 'single';\n    extracted.familyStatus = 'single';\n  } else if (/|||||/.test(msg)) {\n    userProfile.familyStatus = 'couple';\n    extracted.familyStatus = 'couple';\n  } else if (/|||/.test(msg)) {\n    userProfile.familyStatus = 'with-parents';\n    extracted.familyStatus = 'with-parents';\n  }\n  \n  // \n  const lifestyleMap: Record<string, string> = {\n    '|||': 'fitness',\n    '|||': 'homebody',\n    '||': 'social',\n    '||': 'workaholic',\n    '||': 'early-bird',\n    '||': 'night-owl',\n  };\n  \n  for (const [pattern, style] of Object.entries(lifestyleMap)) {\n    if (new RegExp(pattern).test(msg)) {\n      userProfile.lifestyle = [...(userProfile.lifestyle || []), style];\n      extracted.lifestyle = userProfile.lifestyle;\n    }\n  }\n  \n  if (Object.keys(extracted).length > 0) {\n    userProfile.lastUpdated = Date.now();\n    saveUserProfileToStorage();\n  }\n  \n  return extracted;\n}\n\nexport function getUserProfile(): UserLifeProfile {\n  return userProfile;\n}\n\nexport function saveUserProfileToStorage(): void {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem('maimai_user_profile', JSON.stringify(userProfile));\n  }\n}\n\nexport function loadUserProfileFromStorage(): void {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('maimai_user_profile');\n    if (stored) {\n      try {\n        userProfile = JSON.parse(stored);\n      } catch {\n        userProfile = {};\n      }\n    }\n  }\n}\n\n// \nexport function generatePersonalizedGreeting(): string | null {\n  if (userProfile.workArea) {\n    return `${userProfile.workArea}`;\n  }\n  if (userProfile.commutePain) {\n    return '';\n  }\n  if (userProfile.familyStatus === 'with-kids') {\n    return '';\n  }\n  return null;\n}\n\n// ============================================\n//  \n// ============================================\n\nexport type WarmthLevel = 'cold' | 'warm' | 'hot' | 'intimate';\n\nexport interface WarmthStrategy {\n  level: WarmthLevel;\n  label: string;\n  tactics: string[];\n  canRecommend: boolean;\n}\n\nexport function getWarmthLevel(): WarmthStrategy {\n  const totalScore = getTotalScore();\n  const chitchatRounds = pureChitchatRounds;\n  const rounds = totalConversationRounds;\n  \n  // intimate:  10+ \n  if (rounds >= 10 && totalScore >= 5) {\n    return {\n      level: 'intimate',\n      label: '',\n      tactics: [\n        '',\n        '',\n        '',\n      ],\n      canRecommend: true\n    };\n  }\n  \n  // hot:  >= 4\n  if (totalScore >= 4) {\n    return {\n      level: 'hot',\n      label: '',\n      tactics: [\n        '',\n        '',\n        '',\n      ],\n      canRecommend: true\n    };\n  }\n  \n  // warm:  2-4\n  if (totalScore >= 2) {\n    return {\n      level: 'warm',\n      label: '',\n      tactics: [\n        '',\n        '',\n        '',\n      ],\n      canRecommend: false\n    };\n  }\n  \n  // cold: \n  return {\n    level: 'cold',\n    label: '',\n    tactics: [\n      '',\n      '',\n      '',\n    ],\n    canRecommend: false\n  };\n}\n\n// ============================================\n//  \n// ============================================\n\nexport type TimeContext = 'morning' | 'lunch' | 'afternoon' | 'evening' | 'night';\n\nexport function detectTimeContext(): TimeContext {\n  const hour = new Date().getHours();\n  if (hour >= 6 && hour < 10) return 'morning';\n  if (hour >= 10 && hour < 14) return 'lunch';\n  if (hour >= 14 && hour < 17) return 'afternoon';\n  if (hour >= 17 && hour < 21) return 'evening';\n  return 'night';\n}\n\nexport const TIME_PROMPTS: Record<TimeContext, string> = {\n  'morning': '',\n  'lunch': '',\n  'afternoon': '',\n  'evening': '',\n  'night': ''\n};\n\nexport function getTimePrompt(): string {\n  return TIME_PROMPTS[detectTimeContext()];\n}\n\n// ============================================\n//  \n// ============================================\n\nexport type TimingQuality = 'good' | 'neutral' | 'bad';\n\nexport function assessTiming(message: string): TimingQuality {\n  const msg = message.toLowerCase();\n  \n  // \n  const goodSignals = ['', '', '', '?', '', '', '', ''];\n  if (goodSignals.some(s => msg.includes(s))) {\n    return 'good';\n  }\n  \n  // \n  const badSignals = ['', '', '', '', '', '', '...'];\n  const badCount = badSignals.filter(s => msg.includes(s)).length;\n  if (badCount >= 2) {\n    return 'bad';\n  }\n  \n  return 'neutral';\n}\n\n// ============================================\n//   + v6.0 2\n// ============================================\n\nlet pureChitchatRounds = 0;\nlet totalConversationRounds = 0; // \n\nexport function updateChitchatCounter(userState: UserState): number {\n  totalConversationRounds++; // \n  if (userState === 'exploring') {\n    pureChitchatRounds++;\n  } else {\n    pureChitchatRounds = 0; // \n  }\n  return pureChitchatRounds;\n}\n\nexport function getPureChitchatRounds(): number {\n  return pureChitchatRounds;\n}\n\nexport function getTotalConversationRounds(): number {\n  return totalConversationRounds;\n}\n\nexport function resetChitchatCounter(): void {\n  pureChitchatRounds = 0;\n  //  totalConversationRounds\n}\n\n// ============================================\n//  v6.0 2 \n// ============================================\n\nexport type IntimacyLevel = 'new' | 'familiar' | 'close' | 'bestie' | 'soulmate';\n\nexport function getIntimacyLevel(): { level: IntimacyLevel; label: string; emoji: string } {\n  //  localStorage \n  const storedRounds = typeof window !== 'undefined' \n    ? parseInt(localStorage.getItem('mai-intimacy-rounds') || '0', 10)\n    : 0;\n  const rounds = storedRounds + totalConversationRounds;\n  \n  if (rounds >= 50) return { level: 'soulmate', label: '', emoji: '' };\n  if (rounds >= 30) return { level: 'bestie', label: '', emoji: '' };\n  if (rounds >= 15) return { level: 'close', label: '', emoji: '' };\n  if (rounds >= 6) return { level: 'familiar', label: '', emoji: '' };\n  return { level: 'new', label: '', emoji: '' };\n}\n\nexport function saveIntimacyToStorage(): void {\n  if (typeof window !== 'undefined') {\n    const storedRounds = parseInt(localStorage.getItem('mai-intimacy-rounds') || '0', 10);\n    localStorage.setItem('mai-intimacy-rounds', String(storedRounds + totalConversationRounds));\n    totalConversationRounds = 0; // \n  }\n}\n\n// \nexport const LIFE_ANCHOR_QUESTIONS = [\n  '',\n  '',\n  ' OK ',\n  '',\n  ''\n];\n\nexport function pickLifeAnchorQuestion(): string {\n  const idx = Math.floor(Math.random() * LIFE_ANCHOR_QUESTIONS.length);\n  const question = LIFE_ANCHOR_QUESTIONS[idx];\n  return question !== undefined ? question : '';\n}\n\n// ============================================\n//  MaiMai v6.0 3\n// ============================================\n\nconst MEMORY_KEY = 'mai-memory-v6';\n\nexport function saveMemory(fact: string): void {\n  if (typeof window === 'undefined') return;\n  const memories: string[] = JSON.parse(localStorage.getItem(MEMORY_KEY) || '[]');\n  // \n  if (!memories.includes(fact) && memories.length < 20) {\n    memories.push(fact);\n    localStorage.setItem(MEMORY_KEY, JSON.stringify(memories));\n  }\n}\n\nexport function getMemories(): string[] {\n  if (typeof window === 'undefined') return [];\n  return JSON.parse(localStorage.getItem(MEMORY_KEY) || '[]');\n}\n\nexport function clearMemories(): void {\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem(MEMORY_KEY);\n  }\n}\n\n// \nexport function extractMemoryFromMessage(message: string): string | null {\n  const msg = message.toLowerCase();\n  \n  const patterns: [RegExp, string][] = [\n    [/(||)/, ''],\n    [/(|)/, ''],\n    [/(|)(|)/, ''],\n    [/(||)/, ''],\n    [/(|)/, ''],\n    [/(|||||)/, `${msg.match(/(|||||)/)?.[1]}`],\n    [/(||||||)/, `${msg.match(/(||||||)/)?.[1]}`],\n    [/(|)(|)/, ''],\n    [/(|)/, ''],\n    [/|/, ''],\n  ];\n  \n  for (const [pattern, memory] of patterns) {\n    if (pattern.test(msg)) {\n      return memory;\n    }\n  }\n  return null;\n}\n\n// ============================================\n//  \n// ============================================\n\nexport type DetailedEmotionalState = \n  | 'happy'      // \n  | 'stressed'   // \n  | 'frustrated' // \n  | 'confused'   // \n  | 'curious'    // \n  | 'storytelling' // \n  | 'neutral';\n\nexport function analyzeEmotionalState(message: string): DetailedEmotionalState {\n  const msg = message.toLowerCase();\n  \n  // \n  const storytellingWords = ['', '', '', '', ''];\n  if (storytellingWords.filter(w => msg.includes(w)).length >= 2) {\n    return 'storytelling';\n  }\n  \n  const frustratedWords = ['', '', '', '', '', '', '', ''];\n  const stressWords = ['', '', '', '', '', '', '', ''];\n  const confusedWords = ['', '', '', '', '', '', ''];\n  const curiousWords = ['', '', '', '', '', ''];\n  const happyWords = ['', '', '', '', '', '', '', '', ''];\n  \n  if (frustratedWords.some(w => msg.includes(w))) return 'frustrated';\n  if (stressWords.some(w => msg.includes(w))) return 'stressed';\n  if (confusedWords.some(w => msg.includes(w))) return 'confused';\n  if (curiousWords.some(w => msg.includes(w))) return 'curious';\n  if (happyWords.some(w => msg.includes(w))) return 'happy';\n  \n  return 'neutral';\n}\n\n// ============================================\n//   vs \n// ============================================\n\nexport type RecommendationPhase = \n  | 'none'        // \n  | 'seed'        // \n  | 'pave'        // \n  | 'card'        // \n  | 'listing';    // \n\n// \nlet hasPaved = false;\nlet pavedCategory: TagCategory | null = null;\n\nexport function markPaved(category: TagCategory): void {\n  hasPaved = true;\n  pavedCategory = category;\n}\n\nexport function checkPaved(): { hasPaved: boolean; category: TagCategory | null } {\n  return { hasPaved, category: pavedCategory };\n}\n\nexport function resetPaved(): void {\n  hasPaved = false;\n  pavedCategory = null;\n}\n\n// \nexport function detectPaveInterest(message: string): boolean {\n  const interestSignals = [\n    '', '', '', '', '', '', '',\n    '', '', '', '', '', ''\n  ];\n  return interestSignals.some(s => message.includes(s));\n}\n\n// \nlet currentBridgeTopic: { key: string; script: typeof BRIDGE_SCRIPTS[string] } | null = null;\n\nexport function setCurrentBridgeTopic(bridge: { key: string; script: typeof BRIDGE_SCRIPTS[string] } | null): void {\n  currentBridgeTopic = bridge;\n}\n\nexport function getCurrentBridgeTopic(): { key: string; script: typeof BRIDGE_SCRIPTS[string] } | null {\n  return currentBridgeTopic;\n}\n\nexport function determineRecommendationPhase(\n  userState: UserState,\n  timing: TimingQuality,\n  emotionalState: DetailedEmotionalState,\n  chitchatRounds: number,\n  topCategory: TagCategory | null,\n  userShowedInterest: boolean,\n  message?: string  // \n): RecommendationPhase {\n  //   \n  if (emotionalState === 'storytelling') {\n    return 'none';\n  }\n  \n  //   \n  if (emotionalState === 'frustrated' || emotionalState === 'stressed') {\n    return 'none';\n  }\n  \n  //   \n  if (timing === 'bad') {\n    return 'none';\n  }\n  \n  //  +   \n  if (userState === 'explicit' && emotionalState === 'curious') {\n    return 'card';\n  }\n  \n  //   \n  if (userState === 'explicit') {\n    return hasPaved ? 'card' : 'pave';\n  }\n  \n  //  +   \n  if (userState === 'semi-warm' && hasPaved && userShowedInterest) {\n    return 'card';\n  }\n  \n  //   +  +   \n  if (userState === 'semi-warm' && message) {\n    const bridge = detectBridgeTopic(message);\n    if (bridge && (emotionalState === 'happy' || emotionalState === 'neutral' || emotionalState === 'curious')) {\n      setCurrentBridgeTopic(bridge);\n      if (!hasPaved) {\n        return 'pave';\n      }\n    }\n  }\n  \n  //  +  +   \n  if (userState === 'semi-warm' && timing === 'good' && topCategory && !hasPaved) {\n    return 'pave';\n  }\n  \n  //  +  5   \n  if (userState === 'exploring' && chitchatRounds >= 5) {\n    return 'seed';\n  }\n  \n  return 'none';\n}\n\n// ============================================\n//  \n// ============================================\n\nexport type CommunityCandidate = { \n  name: string; \n  topic: string;\n  pavePhrase: string;  // \n};\n\nexport const COMMUNITY_BY_CATEGORY: Record<TagCategory, CommunityCandidate> = {\n  'education': { \n    name: '', \n    topic: '',\n    pavePhrase: '...'\n  },\n  'commute': { \n    name: '', \n    topic: '5',\n    pavePhrase: '...'\n  },\n  'noise': { \n    name: '', \n    topic: '',\n    pavePhrase: '... '\n  },\n  'pet': { \n    name: '', \n    topic: '',\n    pavePhrase: '...'\n  },\n  'life-change': { \n    name: '', \n    topic: '',\n    pavePhrase: '...'\n  },\n  'rental': { \n    name: '', \n    topic: '',\n    pavePhrase: '... '\n  },\n  'stress': { \n    name: '', \n    topic: '',\n    pavePhrase: '...'\n  },\n  'quality': { \n    name: '', \n    topic: '',\n    pavePhrase: '... '\n  },\n  'amenity': { \n    name: '', \n    topic: '',\n    pavePhrase: '...'\n  },\n  'healing': { \n    name: '', \n    topic: '',\n    pavePhrase: '...'\n  }\n};\n\nexport function getCommunityByCategory(category: TagCategory): CommunityCandidate {\n  return COMMUNITY_BY_CATEGORY[category];\n}\n\n// ============================================\n//  \n// ============================================\n\nexport function countConversationRounds(messages: { role: string }[]): number {\n  return messages.filter(m => m.role === 'user').length;\n}\n\nexport function detectMessageStyle(message: string): 'brief' | 'expressive' | 'neutral' {\n  const hasEmoji = /[\\u{1F300}-\\u{1F9FF}]/u.test(message);\n  const length = message.length;\n  \n  if (length < 10 && !hasEmoji) return 'brief';\n  if (hasEmoji || length > 30) return 'expressive';\n  return 'neutral';\n}\n\nexport function detectRejection(message: string): boolean {\n  const rejectionWords = ['', '', '', '', '', '', '', ''];\n  return rejectionWords.some(w => message.includes(w));\n}\n\n// ============================================\n//  \n// ============================================\n\nexport function resetAllState(): void {\n  resetAccumulatedTags();\n  resetChitchatCounter();\n  resetPaved();\n  setCurrentBridgeTopic(null);\n  //  painPoints\n}\n\n// ============================================\n//   Prompt\n// ============================================\n\nexport function buildEnhancedPrompt(\n  userState: UserState,\n  emotionalState: DetailedEmotionalState,\n  recommendationPhase: RecommendationPhase,\n  topCategory: TagCategory | null,\n  chitchatRounds: number,\n  messageStyle: 'brief' | 'expressive' | 'neutral'\n): string {\n  let prompt = MAIMAI_SYSTEM_PROMPT;\n  \n  // ============================================\n  // \n  // ============================================\n  const stateGuide = {\n    'exploring': `\\n\\n \n\n- \n- \n- `,\n    \n    'semi-warm': `\\n\\n \n${topCategory || ''}\n- \n- \n- `,\n    \n    'explicit': `\\n\\n \n\n- \n- \n- `\n  }[userState];\n  \n  prompt += stateGuide;\n  \n  // ============================================\n  // \n  // ============================================\n  if (emotionalState === 'storytelling') {\n    prompt += `\\n\\n \n`;\n  } else if (emotionalState === 'frustrated') {\n    prompt += `\\n\\n \n\n\n`;\n  } else if (emotionalState === 'stressed') {\n    prompt += `\\n\\n \n\n\n`;\n  }\n  \n  // ============================================\n  // \n  // ============================================\n  switch (recommendationPhase) {\n    case 'seed':\n      const anchorQ = pickLifeAnchorQuestion();\n      prompt += `\\n\\n \n ${chitchatRounds} \n${anchorQ}\n`;\n      break;\n      \n    case 'pave':\n      //  \n      const bridgeTopic = getCurrentBridgeTopic();\n      if (bridgeTopic) {\n        prompt += `\\n\\n \n${bridgeTopic.script.topic}\n\n${bridgeTopic.script.bridge}\n\n${bridgeTopic.script.feature}\n `;\n      } else if (topCategory) {\n        const community = getCommunityByCategory(topCategory);\n        prompt += `\\n\\n \n${topCategory}\n${community.pavePhrase}\n `;\n      }\n      break;\n      \n    case 'card':\n      if (topCategory) {\n        const community = getCommunityByCategory(topCategory);\n        prompt += `\\n\\n \n${topCategory}\n\n[[:${community.name}:${community.topic}]]`;\n      }\n      break;\n      \n    case 'listing':\n      prompt += `\\n\\n \n\n\n[[::MH-2024-001]]`;\n      break;\n      \n    default:\n      prompt += `\\n\\n \n`;\n  }\n  \n  // ============================================\n  // \n  // ============================================\n  const styleHint = {\n    brief: '\\n\\n1-2',\n    expressive: '\\n\\n',\n    neutral: ''\n  }[messageStyle];\n  \n  if (styleHint) {\n    prompt += styleHint;\n  }\n  \n  return prompt;\n}\n\n// ============================================\n//  \n// ============================================\n\n/**\n * \n * \n */\nexport function generateLifeProfileSummary(accTags: Map<string, number>): string | null {\n  if (accTags.size < 2) return null;\n  \n  const tagDescriptions: Record<string, string> = {\n    'education': '',\n    'commute': '',\n    'noise': '',\n    'pet': '',\n    'life-change': '',\n    'rental': '',\n    'stress': '',\n    'quality': '',\n    'amenity': '',\n    'healing': ''\n  };\n  \n  const concerns: string[] = [];\n  accTags.forEach((score, category) => {\n    if (score >= 2 && tagDescriptions[category]) {\n      concerns.push(tagDescriptions[category]);\n    }\n  });\n  \n  if (concerns.length === 0) return null;\n  \n  return `\n ${concerns.join('')}\n\n`;\n}\n\n/**\n * \n */\nexport function generateSingleStartPoint(topCategory: TagCategory): string {\n  const community = getCommunityByCategory(topCategory);\n  \n  return ` \n\n\n[[:${community.name}:${community.topic}]]\n\n`;\n}\n\n/**\n * \n */\nexport function generateNeighborPostDraft(communityName: string, concern: string): string {\n  return `\n\n---\n ${communityName}\n${concern}\n \n---\n\n OK `;\n}\n\n/**\n * \n */\nexport function generateContextualPropertyRecommendation(\n  topCategory: TagCategory,\n  communityName: string,\n  propertyId: string\n): string {\n  const reasons: Record<TagCategory, string> = {\n    'commute': ' 5 ',\n    'education': '',\n    'noise': '',\n    'pet': '',\n    'life-change': '',\n    'rental': '',\n    'stress': '',\n    'quality': '',\n    'amenity': '',\n    'healing': ''\n  };\n  \n  const reason = reasons[topCategory] || '';\n  \n  return `\n[[:${communityName}:${propertyId}]]\n\n${reason}\n\n`;\n}\n\n// ============================================\n//  \n// ============================================\n\nexport interface VisitMemory {\n  lastVisit: number;\n  dominantCategory: TagCategory | null;\n  keywords: string[];\n  chitchatTopics: string[];\n}\n\nexport function saveVisitMemory(memory: VisitMemory): void {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem('maimai_visit_memory', JSON.stringify(memory));\n  }\n}\n\nexport function loadVisitMemory(): VisitMemory | null {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('maimai_visit_memory');\n    if (stored) {\n      try {\n        return JSON.parse(stored);\n      } catch {\n        return null;\n      }\n    }\n  }\n  return null;\n}\n\nexport function generateReturnGreeting(): string | null {\n  const memory = loadVisitMemory();\n  if (!memory) return null;\n  \n  const daysSinceLastVisit = Math.floor((Date.now() - memory.lastVisit) / (1000 * 60 * 60 * 24));\n  \n  // 1-7 \n  if (daysSinceLastVisit < 1 || daysSinceLastVisit > 7) return null;\n  \n  const greetings: Record<TagCategory, string> = {\n    'commute': ' ',\n    'education': '',\n    'noise': '',\n    'rental': '',\n    'pet': '',\n    'life-change': '',\n    'stress': '',\n    'quality': '',\n    'amenity': '',\n    'healing': ''\n  };\n  \n  if (memory.dominantCategory && greetings[memory.dominantCategory]) {\n    return greetings[memory.dominantCategory];\n  }\n  \n  return '';\n}\n\n// \nexport function updateVisitMemory(topCategory: TagCategory | null): void {\n  const existing = loadVisitMemory();\n  const memory: VisitMemory = {\n    lastVisit: Date.now(),\n    dominantCategory: topCategory || existing?.dominantCategory || null,\n    keywords: existing?.keywords || [],\n    chitchatTopics: existing?.chitchatTopics || []\n  };\n  saveVisitMemory(memory);\n}\n\n// ============================================\n//  Few-Shot  LLM \n// ============================================\n\nexport const FEW_SHOT_SCRIPTS = {\n  //   \n  chitchatToProfile: `\n  \n\n\n  \n\n\n...\n\n\n  \n\n\n\n\n\n \n \n\n\n`,\n\n  //   \n  rentalToWall: `\n  \n\n\n  \n\n\n...\n\n\n...\n\n \n\n\n[[::]]\n\n\n`,\n\n  //    + \n  explicitToListing: `\n   + \n\n\n\n\n\n\n\n\n\n\n\n \n \n \n\n\n[[::NH-2024-001]]\n\n 5 \n\n\n`\n};\n\n// \nexport function shouldTriggerLifeProfile(\n  userState: UserState,\n  totalScore: number,\n  timing: TimingQuality\n): boolean {\n  return userState === 'semi-warm' && totalScore >= 3 && timing === 'good';\n}\n\n// \nexport function shouldOfferSingleStartPoint(\n  recommendationPhase: RecommendationPhase,\n  topCategory: TagCategory | null\n): boolean {\n  return (recommendationPhase === 'pave' || recommendationPhase === 'card') && topCategory !== null;\n}\n\n// ============================================\n//  v5.6 \n// ============================================\n\nexport const NEED_COMMUNITY_MAP: Record<string, { communities: string[]; features: string[] }> = {\n  'commute': {\n    communities: ['', '', '', ''],\n    features: ['', '', '']\n  },\n  'education': {\n    communities: ['', '', ''],\n    features: ['', '', '']\n  },\n  'noise': {\n    communities: ['', '', ''],\n    features: ['', '', '']\n  },\n  'pet': {\n    communities: ['', '', ''],\n    features: ['', '', '']\n  },\n  'rental': {\n    communities: ['', '', ''],\n    features: ['', '', '']\n  },\n  'quality': {\n    communities: ['', '', ''],\n    features: ['', '', '']\n  },\n  'life-change': {\n    communities: ['', '', ''],\n    features: ['', '', '']\n  }\n};\n\nexport function getSuggestedCommunities(category: TagCategory | null): { communities: string[]; features: string[] } | null {\n  if (!category) return null;\n  return NEED_COMMUNITY_MAP[category] || null;\n}\n\n// ============================================\n//  v5.6 \n// ============================================\n\nconst NEGATIVE_EMOTION_PATTERNS = [\n  //, //, //, //, //, //, //,\n  //, //, //, //, //, //,\n  //, //, //, //, //, //, //\n];\n\nexport function detectNegativeEmotion(message: string): boolean {\n  return NEGATIVE_EMOTION_PATTERNS.some(p => p.test(message));\n}\n\nexport function generateCareResponse(): string {\n  const responses: string[] = [\n    '...  ',\n    '... ',\n    '',\n    '... ',\n    ' '\n  ];\n  const idx = Math.floor(Math.random() * responses.length);\n  const response = responses[idx];\n  if (response === undefined) {\n    return '';\n  }\n  return response;\n}\n\n// ============================================\n//  v5.6 \n// ============================================\n\nexport interface BuyingReadiness {\n  hasArea: boolean;           // \n  hasBudget: boolean;         // \n  hasTimeline: boolean;       // \n  hasViewedCommunity: boolean; // \n  hasViewedListing: boolean;   // \n  hasFamilyNeeds: boolean;    // /\n}\n\nlet buyingReadiness: BuyingReadiness = {\n  hasArea: false,\n  hasBudget: false,\n  hasTimeline: false,\n  hasViewedCommunity: false,\n  hasViewedListing: false,\n  hasFamilyNeeds: false\n};\n\nexport function updateBuyingReadiness(message: string): void {\n  const msg = message.toLowerCase();\n  \n  // \n  if (/.*?|||.*|.*/.test(msg)) {\n    buyingReadiness.hasArea = true;\n  }\n  \n  // \n  if (/||||/.test(msg)) {\n    buyingReadiness.hasBudget = true;\n  }\n  \n  // \n  if (/||||||/.test(msg)) {\n    buyingReadiness.hasTimeline = true;\n  }\n  \n  // \n  if (/||||||/.test(msg)) {\n    buyingReadiness.hasFamilyNeeds = true;\n  }\n  \n  saveBuyingReadinessToStorage();\n}\n\nexport function markViewedCommunity(): void {\n  buyingReadiness.hasViewedCommunity = true;\n  saveBuyingReadinessToStorage();\n}\n\nexport function markViewedListing(): void {\n  buyingReadiness.hasViewedListing = true;\n  saveBuyingReadinessToStorage();\n}\n\nexport function getBuyingReadiness(): BuyingReadiness {\n  return buyingReadiness;\n}\n\nexport function getBuyingReadinessScore(): number {\n  let score = 0;\n  if (buyingReadiness.hasArea) score++;\n  if (buyingReadiness.hasBudget) score++;\n  if (buyingReadiness.hasTimeline) score++;\n  if (buyingReadiness.hasViewedCommunity) score++;\n  if (buyingReadiness.hasViewedListing) score++;\n  if (buyingReadiness.hasFamilyNeeds) score++;\n  return score;\n}\n\nexport function isReadyToBook(): boolean {\n  //  4 \n  return getBuyingReadinessScore() >= 4;\n}\n\nexport function saveBuyingReadinessToStorage(): void {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem('maimai_buying_readiness', JSON.stringify(buyingReadiness));\n  }\n}\n\nexport function loadBuyingReadinessFromStorage(): void {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('maimai_buying_readiness');\n    if (stored) {\n      try {\n        buyingReadiness = { ...buyingReadiness, ...JSON.parse(stored) };\n      } catch {\n        // \n      }\n    }\n  }\n}\n\n// ============================================\n//  v5.6 \n// ============================================\n\nexport interface QuizQuestion {\n  id: string;\n  question: string;\n  options: { key: string; text: string; category: TagCategory }[];\n  followUp: string;\n}\n\nexport const MINI_QUIZZES: QuizQuestion[] = [\n  {\n    id: 'priority',\n    question: '',\n    options: [\n      { key: 'A', text: '', category: 'commute' },\n      { key: 'B', text: '', category: 'education' },\n      { key: 'C', text: '', category: 'noise' },\n      { key: 'D', text: '', category: 'rental' }\n    ],\n    followUp: '{type}...'\n  },\n  {\n    id: 'lifestyle',\n    question: '',\n    options: [\n      { key: 'A', text: '', category: 'noise' },\n      { key: 'B', text: '', category: 'amenity' },\n      { key: 'C', text: '', category: 'education' },\n      { key: 'D', text: '', category: 'pet' }\n    ],\n    followUp: '{feature}'\n  },\n  {\n    id: 'dealbreaker',\n    question: '',\n    options: [\n      { key: 'A', text: ' 1 ', category: 'commute' },\n      { key: 'B', text: '', category: 'noise' },\n      { key: 'C', text: '', category: 'rental' },\n      { key: 'D', text: '', category: 'quality' }\n    ],\n    followUp: ' '\n  }\n];\n\nlet hasShownQuiz = false;\n\nexport function shouldShowQuiz(chitchatRounds: number): boolean {\n  //  4-6 \n  if (hasShownQuiz) return false;\n  if (chitchatRounds < 4 || chitchatRounds > 6) return false;\n  return Math.random() > 0.6; // 40% \n}\n\nexport function getRandomQuiz(): QuizQuestion {\n  const idx = Math.floor(Math.random() * MINI_QUIZZES.length);\n  const quiz = MINI_QUIZZES[idx];\n  hasShownQuiz = true;\n  if (quiz === undefined) {\n    // fallback to first quiz\n    const firstQuiz = MINI_QUIZZES[0];\n    if (firstQuiz === undefined) {\n      // \n      return {\n        id: 'default',\n        question: '',\n        options: [\n          { key: 'A', text: '', category: 'commute' },\n          { key: 'B', text: '', category: 'education' },\n          { key: 'C', text: '', category: 'noise' },\n          { key: 'D', text: '', category: 'rental' }\n        ],\n        followUp: ''\n      };\n    }\n    return firstQuiz;\n  }\n  return quiz;\n}\n\nexport function processQuizAnswer(quizId: string, answer: string): { category: TagCategory; response: string } | null {\n  const quiz = MINI_QUIZZES.find(q => q.id === quizId);\n  if (!quiz) return null;\n  \n  const selected = quiz.options.find(o => o.key.toLowerCase() === answer.toLowerCase());\n  if (!selected) return null;\n  \n  // \n  accumulateTags(selected.text);\n  \n  return {\n    category: selected.category,\n    response: quiz.followUp\n      .replace('{type}', selected.text)\n      .replace('{feature}', selected.text)\n  };\n}\n\nexport function resetQuizState(): void {\n  hasShownQuiz = false;\n}\n\n// ============================================\n//  v5.6 \n// ============================================\n\nlet seedThreshold: number | null = null;\n\nexport function shouldTriggerLifeAnchor(chitchatRounds: number, timing: TimingQuality): boolean {\n  // 3-7 \n  if (seedThreshold === null) {\n    seedThreshold = 3 + Math.floor(Math.random() * 5);\n  }\n  \n  //  +   \n  if (chitchatRounds >= seedThreshold && timing !== 'bad') {\n    seedThreshold = null; // \n    return true;\n  }\n  \n  return false;\n}\n\nexport function resetSeedThreshold(): void {\n  seedThreshold = null;\n}\n","import { isQuietActiveFromStorage } from \"../context/QuietModeContext\";\nimport { loadProfile } from \"../stores/profileStore\";\nimport { \n  buildEnhancedPrompt, \n  detectMessageStyle,\n  analyzeEmotionalState,\n  detectUserState,\n  accumulateTags,\n  getAccumulatedTags,\n  getTopCategory,\n  assessTiming,\n  updateChitchatCounter,\n  getPureChitchatRounds,\n  determineRecommendationPhase,\n  checkPaved,\n  markPaved,\n  detectPaveInterest,\n  detectRejection,\n  resetAllState,\n  resetPaved,\n  // v5.2 \n  FEW_SHOT_SCRIPTS,\n  shouldTriggerLifeProfile,\n  generateLifeProfileSummary,\n  updateVisitMemory,\n  generateReturnGreeting,\n  TimingQuality,\n  // v5.5 \n  detectExitSignal,\n  trackRejection,\n  canRecommendNow,\n  extractUserProfile,\n  getUserProfile,\n  loadUserProfileFromStorage,\n  getWarmthLevel,\n  getTimePrompt,\n  generatePersonalizedGreeting,\n  // v5.6 \n  detectNegativeEmotion,\n  generateCareResponse,\n  updateBuyingReadiness,\n  loadBuyingReadinessFromStorage,\n  getBuyingReadinessScore,\n  isReadyToBook,\n  getSuggestedCommunities,\n  shouldShowQuiz,\n  getRandomQuiz,\n  shouldTriggerLifeAnchor\n} from \"../constants/maimai-persona\";\n\ntype ChatMessage = { role: \"system\" | \"user\" | \"assistant\"; content: string };\n\nconst SYS_ZEN =\n  \"100%  12 //\";\n\n// ============================================\n//   \n// ============================================\nlet justChatMode = false;\n\n//  System Promptv5.6 \nconst SYS_JUST_CHAT = ` 20 \n\n\n- \n- \n- \n- \n\n\n- \n-  emoji 1 \n-  1-3 \n- \n\n`;\n\nexport function setJustChatMode(enabled: boolean): void {\n  justChatMode = enabled;\n  if (enabled) {\n    resetAllState();\n  }\n}\n\nexport function isJustChatMode(): boolean {\n  return justChatMode;\n}\n\n// \nfunction shouldExitJustChatMode(message: string): boolean {\n  const exitKeywords = ['', '', '', '', '', ''];\n  return exitKeywords.some(k => message.includes(k));\n}\n\n// \nexport function resetDemandHeat(): void {\n  resetAllState();\n}\n\nfunction composeSystemPrompt(recentMessages?: ChatMessage[]): string {\n  const isZen = isQuietActiveFromStorage();\n  \n  // \n  if (isZen) return SYS_ZEN;\n  \n  const mood = (localStorage.getItem(\"mai-mood-v1\") as \"neutral\" | \"stress\" | \"rest\") || \"neutral\";\n  const profile = loadProfile();\n  const profileTags = (profile.tags || []).slice(0, 5);\n\n  // \n  const lastUserMsg = recentMessages?.filter(m => m.role === 'user').pop()?.content || '';\n  \n  // ============================================\n  // v5.5 + v5.6\n  // ============================================\n  loadUserProfileFromStorage();\n  loadBuyingReadinessFromStorage();\n  \n  // ============================================\n  // v5.6\n  // ============================================\n  if (detectNegativeEmotion(lastUserMsg)) {\n    const careResponse = generateCareResponse();\n    return SYS_JUST_CHAT + `\\n\\n \n\n${careResponse}`;\n  }\n  \n  // ============================================\n  // v5.2\n  // ============================================\n  if (justChatMode) {\n    // \n    if (shouldExitJustChatMode(lastUserMsg)) {\n      justChatMode = false;\n      // \n    } else {\n      // \n      return SYS_JUST_CHAT;\n    }\n  }\n  \n  // ============================================\n  // v5.5\n  // ============================================\n  const exitSignal = detectExitSignal(lastUserMsg);\n  if (exitSignal) {\n    trackRejection();\n    //  prompt\n    if (exitSignal === 'no-need' || exitSignal === 'negative-emotion') {\n      return SYS_JUST_CHAT + `\\n\\n${exitSignal === 'no-need' ? '' : ''} 100% `;\n    }\n  }\n  \n  // ============================================\n  // v5.5 + v5.6\n  // ============================================\n  extractUserProfile(lastUserMsg);\n  updateBuyingReadiness(lastUserMsg);\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  accumulateTags(lastUserMsg);\n  const accTags = getAccumulatedTags();\n  const topCategory = getTopCategory();\n  \n  // v5.2\n  updateVisitMemory(topCategory);\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  const userState = detectUserState(lastUserMsg, accTags);\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  const chitchatRounds = updateChitchatCounter(userState);\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  const emotionalState = analyzeEmotionalState(lastUserMsg);\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  const timing = assessTiming(lastUserMsg);\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  const paveStatus = checkPaved();\n  let userShowedInterest = false;\n  \n  if (paveStatus.hasPaved) {\n    // \n    userShowedInterest = detectPaveInterest(lastUserMsg);\n    \n    // \n    if (detectRejection(lastUserMsg)) {\n      resetPaved();\n    }\n  }\n  \n  // ============================================\n  // v5.0\n  // ============================================\n  const recommendationPhase = determineRecommendationPhase(\n    userState,\n    timing,\n    emotionalState,\n    chitchatRounds,\n    topCategory,\n    userShowedInterest\n  );\n  \n  // \n  if (recommendationPhase === 'pave' && topCategory) {\n    markPaved(topCategory);\n  }\n  \n  // ============================================\n  // \n  // ============================================\n  const style = detectMessageStyle(lastUserMsg);\n  \n  // ============================================\n  // v5.0 prompt\n  // ============================================\n  let basePrompt = buildEnhancedPrompt(\n    userState,\n    emotionalState,\n    recommendationPhase,\n    topCategory,\n    chitchatRounds,\n    style\n  );\n  \n  // ============================================\n  // v5.2\n  // ============================================\n  let totalScore = 0;\n  accTags.forEach(score => { totalScore += score; });\n  \n  if (shouldTriggerLifeProfile(userState, totalScore, timing as TimingQuality)) {\n    const profileSummary = generateLifeProfileSummary(accTags);\n    if (profileSummary) {\n      basePrompt += `\\n\\n \n\n\n\n\n${profileSummary}`;\n    }\n  }\n  \n  // ============================================\n  // v5.2Few-Shot \n  // ============================================\n  if (userState === 'semi-warm' && recommendationPhase === 'pave') {\n    basePrompt += `\\n\\n \n${FEW_SHOT_SCRIPTS.rentalToWall}`;\n  } else if (userState === 'explicit') {\n    basePrompt += `\\n\\n \n${FEW_SHOT_SCRIPTS.explicitToListing}`;\n  }\n\n  // ============================================\n  // v5.5\n  // ============================================\n  const warmthStrategy = getWarmthLevel();\n  let warmthPrompt = `\\n\\n ${warmthStrategy.label}\\n`;\n  warmthStrategy.tactics.forEach(t => {\n    warmthPrompt += `\\n- ${t}`;\n  });\n  if (!warmthStrategy.canRecommend) {\n    warmthPrompt += `\\n `;\n  }\n  \n  // ============================================\n  // v5.5\n  // ============================================\n  const timePrompt = `\\n\\n${getTimePrompt()}`;\n  \n  // ============================================\n  // v5.5\n  // ============================================\n  const userProfile = getUserProfile();\n  let profilePrompt = '';\n  if (userProfile.workArea || userProfile.homeArea || userProfile.commutePain || userProfile.familyStatus) {\n    profilePrompt = `\\n\\n `;\n    if (userProfile.workArea) profilePrompt += `\\n- ${userProfile.workArea}`;\n    if (userProfile.homeArea) profilePrompt += `\\n- ${userProfile.homeArea}`;\n    if (userProfile.commutePain) profilePrompt += `\\n- `;\n    if (userProfile.familyStatus) {\n      const statusMap: Record<string, string> = {\n        'single': '',\n        'couple': '',\n        'newlywed': '',\n        'with-kids': '',\n        'with-parents': ''\n      };\n      profilePrompt += `\\n- ${statusMap[userProfile.familyStatus] || userProfile.familyStatus}`;\n    }\n    profilePrompt += `\\n `;\n  }\n\n  // ============================================\n  // v5.6\n  // ============================================\n  let communityPrompt = '';\n  const suggestedCommunities = getSuggestedCommunities(topCategory);\n  if (suggestedCommunities && recommendationPhase === 'pave') {\n    communityPrompt = `\\n\\n \n${topCategory}\n- ${suggestedCommunities.communities.slice(0, 2).join('')}\n- ${suggestedCommunities.features.join('')}\n `;\n  }\n\n  // ============================================\n  // v5.6\n  // ============================================\n  let readinessPrompt = '';\n  const readinessScore = getBuyingReadinessScore();\n  if (isReadyToBook()) {\n    readinessPrompt = `\\n\\n ${readinessScore}/6 - \n\n`;\n  } else if (readinessScore >= 2) {\n    readinessPrompt = `\\n\\n ${readinessScore}/6\n`;\n  }\n\n  // ============================================\n  // v5.6\n  // ============================================\n  let quizPrompt = '';\n  if (shouldShowQuiz(chitchatRounds)) {\n    const quiz = getRandomQuiz();\n    if (quiz && quiz.options.length >= 4) {\n      quizPrompt = `\\n\\n \n${quiz.question}\nA) ${quiz.options[0]?.text ?? ''}  B) ${quiz.options[1]?.text ?? ''}\nC) ${quiz.options[2]?.text ?? ''}  D) ${quiz.options[3]?.text ?? ''}\n `;\n    }\n  }\n\n  //  localStorage mood\n  const tone =\n    mood === \"stress\"\n      ? \"\\nlocalStorage \"\n      : mood === \"rest\"\n      ? \"\\nlocalStorage \"\n      : \"\";\n\n  // \n  const memory = profileTags.length \n    ? `\\n${profileTags.join(\"\")}` \n    : \"\";\n\n  // Debug \n  const debugInfo = `\\n\\n[DEBUG] ${userState} | ${emotionalState} | ${recommendationPhase} | ${topCategory || ''} | ${chitchatRounds} | ${warmthStrategy.level} | ${readinessScore}/6`;\n\n  return basePrompt + warmthPrompt + timePrompt + profilePrompt + communityPrompt + readinessPrompt + quizPrompt + tone + memory + debugInfo;\n}\n\nexport async function postLLM(\n  messages: ChatMessage[], \n  optionsOrCallback?: { temperature?: number; max_tokens?: number } | ((chunk: string) => void),\n  maybeOptions?: { temperature?: number; max_tokens?: number }\n) {\n  const onChunk = typeof optionsOrCallback === 'function' ? optionsOrCallback : undefined;\n  const options = typeof optionsOrCallback === 'object' ? optionsOrCallback : maybeOptions;\n\n  const systemPrompt = composeSystemPrompt(messages);\n\n  const res = await fetch(\"/api/openai-proxy\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      messages: [\n        { role: \"system\", content: systemPrompt },\n        ...messages\n      ],\n      temperature: options?.temperature ?? 0.85,\n      max_tokens: options?.max_tokens ?? 350,\n      stream: !!onChunk\n    }),\n  });\n  \n  if (!res.ok) {\n    throw new Error(`LLM proxy error: ${res.status}`);\n  }\n\n  if (onChunk && res.body) {\n    const reader = res.body.getReader();\n    const decoder = new TextDecoder();\n    let fullText = '';\n    \n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) break;\n      \n      const chunk = decoder.decode(value, { stream: true });\n      const lines = chunk.split('\\n');\n      \n      for (const line of lines) {\n        if (line.startsWith('data: ')) {\n          const data = line.slice(6);\n          if (data === '[DONE]') continue;\n          \n          try {\n            const parsed = JSON.parse(data);\n            const content = parsed?.choices?.[0]?.delta?.content;\n            if (content) {\n              fullText += content;\n              onChunk(content);\n            }\n          } catch {\n            // Skip parse errors\n          }\n        }\n      }\n    }\n    \n    return fullText;\n  }\n\n  const data = await res.json();\n  const text = data?.choices?.[0]?.message?.content ?? \"\";\n  return text as string;\n}\n\nexport async function politeRewrite(draft: string, opts?: { audience?: \"owner\" | \"agent\"; intent?: \"view\" | \"detail\" | \"pet\" | \"price\" }) {\n  const who = opts?.audience === \"owner\" ? \"\" : \"\";\n  const why = (() => {\n    switch (opts?.intent) {\n      case \"view\": return \"\";\n      case \"detail\": return \"\";\n      case \"pet\": return \"\";\n      case \"price\": return \"\";\n      default: return \"\";\n    }\n  })();\n  const prompt = `V1/V2${who}${why}\\n---\\n${draft}\\n---\\n\\nV1...\\nV2...`;\n  return postLLM([{ role: \"user\", content: prompt }], { max_tokens: 220 });\n}\n\nexport async function empathicEcho(note: string) {\n  const prompt = ` 12 \\n${note}`;\n  return postLLM([{ role: \"user\", content: prompt }], { max_tokens: 80 });\n}\n\nexport async function eli5Term(termOrPara: string) {\n  const prompt = `/122\\n${termOrPara}`;\n  return postLLM([{ role: \"user\", content: prompt }], { max_tokens: 120 });\n}\n\nexport async function debriefToMNA(like: string, pain: string, next: string) {\n  const prompt = `(Must)(Nice)(Avoid)232 #tags:  35 /\\n${like}\\n${pain}\\n${next}`;\n  return postLLM([{ role: \"user\", content: prompt }], { max_tokens: 160 });\n}\n","import { v4 as uuidv4 } from 'uuid'\nimport { getConfig } from '../app/config'\nimport { postLLM } from './ai'\nimport type { ApiResponse, Paginated, PropertyCard, ReviewSnippet, AiAskReq, AiAskRes, CommunityPreview } from '../types'\n\nlet sessionId = uuidv4()\nexport const getSessionId = () => sessionId\n\nexport async function apiFetch<T = unknown>(endpoint: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\n  const cfg = await getConfig()\n  const url = `${cfg.apiBaseUrl}${endpoint}`\n  const method = (options.method || 'GET').toUpperCase()\n\n  const baseHeaders: Record<string, string> = {\n    Accept: 'application/json',\n    'X-API-Version': 'v1',\n    'X-App-Version': cfg.appVersion,\n    'X-Session-Id': sessionId,\n    'X-Request-Id': uuidv4(),\n    'Accept-Language': 'zh-Hant-TW'\n  }\n\n  const userHeaders: Record<string, string> = (() => {\n    const h = options.headers\n    if (!h) return {}\n    if (h instanceof Headers) {\n      const o: Record<string, string> = {}\n      for (const [k, v] of h) {\n        o[k] = v\n      }\n      return o\n    }\n    if (Array.isArray(h)) return Object.fromEntries(h)\n    return h\n  })()\n\n  if (method === 'POST' && !userHeaders['Idempotency-Key'] && !userHeaders['idempotency-key']) {\n    userHeaders['Idempotency-Key'] = uuidv4()\n  }\n\n  const headers = { ...baseHeaders, ...userHeaders }\n\n  if (cfg.mock) {\n    const { mockHandler } = await import('./mock')\n    return mockHandler<T>(endpoint, { ...options, headers })\n  }\n\n  const controller = new AbortController()\n  const id = setTimeout(() => controller.abort(), 8000)\n\n  try {\n    const res = await fetch(url, { ...options, headers, signal: controller.signal })\n    if (!res.ok) {\n      return { ok: false, error: { code: 'API_ERROR', message: 'API ' } }\n    }\n    const data = await res.json()\n    return { ok: true, data }\n  } catch (e) {\n    if ((e as any)?.name === 'AbortError')\n      return { ok: false, error: { code: 'NETWORK_TIMEOUT', message: '' } }\n    return { ok: false, error: { code: 'NETWORK_ERROR', message: (e as Error).message } }\n  } finally {\n    clearTimeout(id)\n  }\n}\n\nexport const getMeta = () =>\n  apiFetch<{ backendVersion: string; apiVersion: string; maintenance: boolean }>('/api/v1/meta')\n\nexport const getProperties = (page: number, pageSize: number, q?: string) =>\n  apiFetch<Paginated<PropertyCard>>(\n    `/api/v1/properties?${new URLSearchParams({ page: String(page), pageSize: String(pageSize), ...(q ? { q } : {}) })}`\n  )\n\nexport const getProperty = (id: string) => apiFetch<PropertyCard>(`/api/v1/properties/${id}`)\n\nexport const getReviews = (communityId: string, limit = 2, offset = 0) =>\n  apiFetch<ReviewSnippet[]>(\n    `/api/v1/communities/${communityId}/reviews?${new URLSearchParams({ limit: String(limit), offset: String(offset) })}`\n  )\n\nexport const getCommunities = () => apiFetch<CommunityPreview[]>('/api/v1/communities/preview')\n\nexport const aiAsk = async (req: AiAskReq, onChunk?: (chunk: string) => void): Promise<ApiResponse<AiAskRes>> => {\n  try {\n    const messages = req.messages.map(m => ({ role: m.role, content: m.content }))\n    console.log(' :', messages)\n    const result = await postLLM(messages, onChunk)\n    console.log(' postLLM :', result)\n    const aiResult: AiAskRes = { answers: [result], recommends: [] }\n    console.log('  aiResult:', aiResult)\n    return { ok: true, data: aiResult }\n  } catch (error) {\n    console.error('AI Ask :', error)\n    return { ok: false, error: { code: 'AI_ERROR', message: error instanceof Error ? error.message : 'AI ' } }\n  }\n}\n","import { useEffect, useState } from 'react'\nimport type { AppConfig, RuntimeOverrides } from './config'\nimport { getSessionId, getMeta } from '../services/api'\n\nexport default function DevTools({ config }: { config: AppConfig & RuntimeOverrides }) {\n  const [visible, setVisible] = useState(true)\n  const [mock, setMock] = useState(!!config.mock)\n  const [latency, setLatency] = useState(config.latency ?? 0)\n  const [error, setError] = useState(config.error ?? 0)\n  const [q, setQ] = useState(config.q ?? '')\n  const [backend, setBackend] = useState('')\n  const [mockSeed, setMockSeed] = useState(config.mockSeed ?? '')\n\n  useEffect(() => {\n    getMeta().then((r) => setBackend(r.ok && r.data ? r.data.backendVersion : ''))\n  }, [])\n\n  if (!visible) return null\n\n  const apply = () => {\n    const next = { ...config, mock, latency, error, q, mockSeed, devtools: '1' as const }\n    try {\n      localStorage.setItem('maihouse_config', JSON.stringify(next))\n    } catch {}\n    location.reload()\n  }\n\n  const reseed = () => {\n    const s = String(Date.now())\n    setMockSeed(s)\n    try {\n      localStorage.setItem(\n        'maihouse_config',\n        JSON.stringify({ ...config, mockSeed: s, mock, latency, error, q, devtools: '1' as const })\n      )\n    } catch {}\n    location.reload()\n  }\n\n  return (\n    <aside className=\"fixed bottom-4 right-4 z-[var(--z-overlay)] w-[320px] rounded-[var(--r-lg)] bg-white p-4 text-sm shadow-[var(--shadow-card)]\">\n      <div className=\"mb-2 font-medium\">Developer HUD</div>\n      <div className=\"space-y-1 text-[var(--text-secondary)]\">\n        <div>API{config.apiBaseUrl}</div>\n        <div>App{config.appVersion}</div>\n        <div>Backend{backend}</div>\n        <div>Session{getSessionId()}</div>\n        <label className=\"flex items-center gap-2\">\n          <input type=\"checkbox\" checked={mock} onChange={(e) => setMock(e.target.checked)} /> Mock\n        </label>\n        <label className=\"flex items-center gap-2\">\n          Latency\n          <input\n            className=\"w-20 rounded border p-1\"\n            type=\"number\"\n            value={latency}\n            onChange={(e) => setLatency(+e.target.value || 0)}\n          />\n        </label>\n        <label className=\"flex items-center gap-2\">\n          Error\n          <input\n            className=\"w-20 rounded border p-1\"\n            step=\"0.1\"\n            type=\"number\"\n            value={error}\n            onChange={(e) => setError(+e.target.value || 0)}\n          />\n        </label>\n        <label className=\"flex items-center gap-2\">\n          q <input className=\"flex-1 rounded border p-1\" value={q} onChange={(e) => setQ(e.target.value)} />\n        </label>\n        <label className=\"flex items-center gap-2\">\n          seed\n          <input className=\"flex-1 rounded border p-1\" value={mockSeed} onChange={(e) => setMockSeed(e.target.value)} />\n        </label>\n      </div>\n      <div className=\"mt-3 flex justify-between\">\n        <button\n          className=\"rounded-[var(--r-pill)] bg-[var(--neutral-100)] px-3 py-1\"\n          onClick={() => setVisible(false)}\n        >\n          \n        </button>\n        <div className=\"flex gap-2\">\n          <button className=\"rounded-[var(--r-pill)] bg-[var(--neutral-300)] px-3 py-1\" onClick={reseed}>\n             \n          </button>\n          <button className=\"rounded-[var(--r-pill)] bg-[var(--brand)] px-3 py-1 text-[var(--brand-fg)]\" onClick={apply}>\n            \n          </button>\n        </div>\n      </div>\n    </aside>\n  )\n}\n","import { apiFetch, getSessionId } from './api'\n\ntype Uag = {\n  event: string\n  page: string\n  targetId?: string\n  sessionId: string\n  userId: string | null\n  ts: string\n  meta: Record<string, unknown>\n  requestId: string\n}\n\nconst KEY = 'uag_queue'\nconst CAP = 10000\nconst MAX_BATCH = 200\n\ndeclare global {\n  var __UAG__: { queue: Uag[]; timer?: number; backoff: number; attempts: number } | undefined\n}\n\nconst G = globalThis.__UAG__ || (globalThis.__UAG__ = { queue: [], backoff: 10_000, attempts: 0 })\n\ntry {\n  G.queue = JSON.parse(localStorage.getItem(KEY) || '[]')\n} catch {\n  G.queue = []\n}\n\nconst save = () => {\n  try {\n    localStorage.setItem(KEY, JSON.stringify(G.queue.slice(-CAP)))\n  } catch {}\n}\n\nconst MAX = 300_000\n\nasync function flush(batch: Uag[]) {\n  const r = await apiFetch<{ retryAfterMs?: number } | null>('/api/v1/uag/events', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(batch)\n  })\n\n  if (r.ok) {\n    const ids = new Set(batch.map((b) => b.requestId))\n    G.queue = G.queue.filter((x) => !ids.has(x.requestId))\n    save()\n    G.attempts = 0\n    G.backoff = 10_000\n  } else {\n    G.attempts++\n    const ra = (r as any)?.data?.retryAfterMs\n    G.backoff = Math.min(ra ?? (G.backoff * 2), MAX)\n  }\n}\n\nfunction schedule() {\n  if (G.timer) clearTimeout(G.timer)\n  G.timer = setTimeout(tick, G.backoff) as unknown as number\n}\n\nfunction tick() {\n  if (G.queue.length) {\n    const batch = G.queue.slice(0, MAX_BATCH)\n    flush(batch)\n      .catch(() => {\n        G.attempts++\n        G.backoff = Math.min(G.backoff * 2, MAX)\n      })\n      .finally(schedule)\n  } else {\n    schedule()\n  }\n}\n\nschedule()\n\nfunction uuidv4() {\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n    return crypto.randomUUID();\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c: string) => {\n    const r = Math.floor(Math.random() * 16);\n    const v = c === 'x' ? r : ((r & 0x3) | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport function trackEvent(event: string, page: string, targetId?: string) {\n  if (!event?.trim() || !page?.trim()) {\n    console.warn('[UAG] ')\n    return\n  }\n\n  const ev: Uag = {\n    event,\n    page,\n    sessionId: getSessionId(),\n    userId: null,\n    ts: new Date().toISOString(),\n    meta: { origin: 'gh-pages' },\n    requestId: uuidv4()\n  }\n  \n  if (targetId) ev.targetId = targetId\n  \n  G.queue.push(ev)\n  if (G.queue.length > CAP) G.queue = G.queue.slice(-CAP)\n  save()\n  \n  flush([ev]).catch(() => {\n    G.attempts++\n    G.backoff = Math.min(G.backoff * 2, MAX)\n    schedule()\n  })\n}\n","import React from 'react';\n\ninterface LogoProps {\n  showSlogan?: boolean;\n  className?: string;\n  onClick?: () => void;\n  href?: string;\n  showBadge?: boolean;\n}\n\nexport const Logo: React.FC<LogoProps> = ({ \n  showSlogan = true, \n  className = \"\", \n  onClick,\n  href = \"/maihouses/\",\n  showBadge = true\n}) => {\n  const Content = () => (\n    <div className={`group flex cursor-pointer items-center gap-3 ${className}`}>\n      {/* Logo Icon */}\n      <div className=\"relative flex size-[42px] items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-brand-700 to-brand-600 shadow-lg shadow-brand-700/20 transition-all duration-300 group-hover:scale-105 group-hover:shadow-brand-700/30\">\n        {/* Shine Effect */}\n        <div className=\"absolute inset-0 translate-y-full bg-gradient-to-tr from-transparent via-white/10 to-transparent transition-transform duration-700 ease-out group-hover:translate-y-0\"></div>\n        \n        {/* Icon SVG */}\n        <svg className=\"relative z-10 size-[22px] text-white drop-shadow-sm transition-transform duration-300 group-hover:-translate-y-px\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n          <path d=\"M3 9.5L12 3L21 9.5V20.5C21 21.0523 20.5523 21.5 20 21.5H4C3.44772 21.5 3 21.0523 3 20.5V9.5Z\" />\n          <path d=\"M9 21.5V13H15V21.5\" />\n        </svg>\n\n        {/* Design Accent Dot (opt-in) */}\n        {showBadge && (\n          <div className=\"absolute right-2 top-2 size-1.5 rounded-full bg-red-400 shadow-[0_0_0_1.5px] shadow-brand-600\"></div>\n        )}\n      </div>\n\n      <div className=\"flex items-center\">\n        <div className=\"flex items-baseline gap-1\">\n          {/* Font serif, Brand Dark Blue */}\n          <span className=\"font-serif text-[24px] font-bold leading-none tracking-wide text-brand-700\"></span>\n        </div>\n        \n        {showSlogan && (\n          <div className=\"ml-3 hidden h-5 items-center border-l-2 border-brand-100/80 pl-3 sm:flex\">\n            <span className=\"pt-px text-[15px] font-bold uppercase leading-none tracking-[0.15em] text-brand-500 transition-colors group-hover:text-brand-700\">\n              \n            </span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  if (href) {\n    return (\n      <a href={href} onClick={onClick} className=\"no-underline\">\n        <Content />\n      </a>\n    );\n  }\n\n  return (\n    <div onClick={onClick}>\n      <Content />\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Search, LogIn, UserPlus, List, Menu, X } from 'lucide-react';\nimport { Logo } from '../Logo/Logo';\n\ninterface HeaderProps {\n  readonly onOpenAIStudio?: () => void;\n}\n\nexport default function Header({ onOpenAIStudio }: HeaderProps) {\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  return (\n    <>\n      {/* Navigation Bar */}\n      <header className=\"sticky top-0 z-overlay border-b border-brand-100 bg-white/95 shadow-sm backdrop-blur-sm transition-all\">\n        <div className=\"mx-auto flex h-16 max-w-[1120px] items-center justify-between px-4\">\n          {/* Logo Section */}\n          <Logo showSlogan={true} onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })} />\n\n          {/* Desktop Nav -  */}\n          <nav className=\"hidden items-center gap-1 md:flex md:gap-2\" aria-label=\"\">\n            {/* Column 1: List */}\n            <a href=\"/maihouses/property.html\" className=\"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]\">\n              <List size={18} strokeWidth={2.5} className=\"opacity-80\" />\n              <span></span>\n            </a>\n\n            {/* Column 2: Login */}\n            <a href=\"/maihouses/auth.html?mode=login\" className=\"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]\">\n              <LogIn size={18} strokeWidth={2.5} className=\"opacity-80\" />\n              <span></span>\n            </a>\n\n            {/* Column 3: Register (CTA) */}\n            <a href=\"/maihouses/auth.html?mode=signup\" className=\"ml-1 flex items-center gap-2 rounded-xl border border-transparent bg-brand-700 px-5 py-2.5 text-[15px] font-bold text-white shadow-md shadow-brand-700/10 transition-all hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-lg hover:shadow-brand-700/20 active:scale-[0.98]\">\n              <UserPlus size={18} strokeWidth={2.5} />\n              <span></span>\n            </a>\n          </nav>\n\n          {/* Mobile Nav -  */}\n          <div className=\"flex items-center gap-2 md:hidden\">\n            {/*  -  */}\n            <a \n              href=\"/maihouses/auth.html?mode=login\" \n              className=\"flex items-center justify-center rounded-lg px-3 py-2 text-sm font-bold text-brand-700 transition-all hover:bg-brand-50 active:scale-95\"\n            >\n              <LogIn size={18} strokeWidth={2.5} />\n            </a>\n\n            {/*  -  */}\n            <a \n              href=\"/maihouses/auth.html?mode=signup\" \n              className=\"flex items-center gap-1.5 rounded-lg bg-brand-700 px-3 py-2 text-sm font-bold text-white shadow-sm transition-all hover:bg-brand-600 active:scale-95\"\n            >\n              <UserPlus size={16} strokeWidth={2.5} />\n              <span></span>\n            </a>\n\n            {/*  */}\n            <button \n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              className=\"flex items-center justify-center rounded-lg p-2 text-brand-700 transition-all hover:bg-brand-50 active:scale-95\"\n              aria-label=\"\"\n            >\n              {mobileMenuOpen ? <X size={22} strokeWidth={2.5} /> : <Menu size={22} strokeWidth={2.5} />}\n            </button>\n          </div>\n        </div>\n\n        {/* Mobile Dropdown Menu -  */}\n        {mobileMenuOpen && (\n          <div className=\"absolute inset-x-0 top-full border-b border-brand-100 bg-white shadow-lg md:hidden\">\n            <nav className=\"mx-auto max-w-[1120px] px-4 py-3\">\n              <a \n                href=\"/maihouses/property.html\" \n                className=\"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                <List size={20} strokeWidth={2.5} className=\"opacity-80\" />\n                <span></span>\n              </a>\n              <a \n                href=\"/maihouses/community-wall_mvp.html\" \n                className=\"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                <svg className=\"size-5 opacity-80\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2.5} strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                  <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"/>\n                  <circle cx=\"9\" cy=\"7\" r=\"4\"/>\n                  <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"/>\n                  <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/>\n                </svg>\n                <span></span>\n              </a>\n              <a \n                href=\"https://maihouses.vercel.app/maihouses/uag\" \n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                <svg className=\"size-5 opacity-80\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2.5} strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                  <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n                  <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n                  <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n                </svg>\n                <span></span>\n              </a>\n            </nav>\n          </div>\n        )}\n      </header>\n\n      {/* Hero Section */}\n      <div className=\"relative border-b border-brand-100/50 bg-brand-50\">\n\n        {/* Content Container */}\n        <div className=\"relative z-10 mx-auto max-w-[1120px] px-4 pb-6 pt-24\">\n\n          {/* Search Bar Area Wrapper */}\n          <div className=\"relative mx-auto max-w-3xl\">\n\n            {/* Mascot & Bubble Group */}\n            <div className=\"pointer-events-none absolute right-[5%] top-[-44px] z-0 animate-float select-none md:right-[10%] md:animate-float-desktop\">\n\n              {/* Speech Bubble */}\n              <div className=\"absolute bottom-[92%] right-[55%] w-[260px] origin-bottom-right animate-fadeIn whitespace-normal rounded-2xl rounded-br-none border-2 border-brand-100 bg-white px-5 py-2 shadow-lg md:bottom-[94%] md:right-[65%] md:w-auto md:max-w-none md:whitespace-nowrap md:py-3\">\n                <p className=\"text-left text-[11px] font-bold leading-relaxed text-ink-700 md:text-sm\">\n                   <span className=\"font-black text-brand-700\"></span>\n                </p>\n                {/* Bubble Tail */}\n                <div className=\"absolute -bottom-2.5 right-3 size-5 rotate-45 border-b-2 border-r-2 border-brand-100 bg-white\"></div>\n              </div>\n\n              {/* Mascot SVG */}\n              <div className=\"relative z-10 size-20 md:size-24\">\n                <svg viewBox=\"0 0 200 240\" className=\"size-full drop-shadow-sm\">\n                  {/* M-Antenna */}\n                  <path d=\"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40\"\n                    stroke=\"#00385a\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  {/* House Body & Roof */}\n                  <path d=\"M 40 80 L 100 40 L 160 80\"\n                    stroke=\"#00385a\" strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  <rect x=\"55\" y=\"80\" width=\"90\" height=\"100\"\n                    stroke=\"#00385a\" strokeWidth=\"6\" fill=\"#F6F9FF\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  {/* Face */}\n                  <path d=\"M 78 110 Q 85 105 92 110\" stroke=\"#00385a\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n                  <path d=\"M 108 110 Q 115 105 122 110\" stroke=\"#00385a\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n                  <circle cx=\"85\" cy=\"125\" r=\"4\" stroke=\"#00385a\" strokeWidth=\"3\" fill=\"none\" />\n                  <circle cx=\"115\" cy=\"125\" r=\"4\" stroke=\"#00385a\" strokeWidth=\"3\" fill=\"none\" />\n                  {/* Hands - Waving */}\n                  <path d=\"M 55 130 L 35 100\" stroke=\"#00385a\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" />\n                  <path d=\"M 145 130 L 165 100\" stroke=\"#00385a\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" />\n                </svg>\n              </div>\n            </div>\n\n            {/* Search Box */}\n            <div className=\"group relative z-20\">\n              <div className=\"flex h-[60px] items-center rounded-full border border-brand-100 bg-white pl-[28px] pr-2 shadow-[0_8px_30px_rgba(0,56,90,0.08)] transition-all duration-300 focus-within:border-brand-300 focus-within:ring-4 focus-within:ring-brand-50 group-hover:shadow-[0_12px_40px_rgba(0,56,90,0.12)]\">\n\n                {/* Search Icon */}\n                <div className=\"pr-4 text-gray-400 transition-colors group-focus-within:text-gray-600\">\n                  <Search size={22} strokeWidth={2.5} />\n                </div>\n\n                {/* Input */}\n                <input\n                  type=\"text\"\n                  placeholder=\"...\"\n                  className=\"size-full bg-transparent text-lg font-bold text-gray-700 outline-none placeholder:font-medium placeholder:text-gray-400\"\n                />\n\n                {/* Button */}\n                <button className=\"flex h-[46px] items-center justify-center whitespace-nowrap rounded-full bg-brand-700 px-8 text-base font-bold tracking-wide text-white shadow-md transition-colors hover:bg-brand-600 hover:shadow-lg active:translate-y-px\">\n                  \n                </button>\n              </div>\n            </div>\n\n            {/* Capsules */}\n            <div className=\"relative z-10 mt-6 grid grid-cols-3 gap-2\">\n              {['', '', ''].map((text) => {\n                const getHref = (label: string) => {\n                  if (label === '') return '/maihouses/community-wall_mvp.html';\n                  if (label === '') return 'https://maihouses.vercel.app/maihouses/uag';\n                  return '#';\n                };\n                const href = getHref(text);\n                const target = text === '' ? '_blank' : undefined;\n\n                return (\n                  <a\n                    key={text}\n                    href={href}\n                    target={target}\n                    rel={target ? \"noopener noreferrer\" : undefined}\n                    className=\"flex items-center justify-center rounded-2xl border border-brand-700 bg-brand-700 py-3 text-lg font-bold tracking-wide text-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-md active:scale-[0.98]\"\n                  >\n                    {text}\n                  </a>\n                );\n              })}\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\n\ninterface MascotHouseProps {\n  animated?: boolean;\n}\n\nexport default function MascotHouse({ animated = true }: MascotHouseProps) {\n  const [phase, setPhase] = useState(0);\n  \n  //  6 \n  useEffect(() => {\n    if (!animated) return;\n    \n    const interval = setInterval(() => {\n      setPhase(p => (p + 1) % 6);\n    }, 2500);\n    \n    return () => clearInterval(interval);\n  }, [animated]);\n\n  // \n  const getExpression = () => {\n    switch (phase) {\n      case 0: //  - \n        return { leftArm: 'M 55 130 L 25 100', rightArm: 'M 145 130 L 175 90', eyeY: 125, mouthCurve: 'smile' };\n      case 1: //  - \n        return { leftArm: 'M 55 130 L 30 130', rightArm: 'M 145 130 L 170 130', eyeY: 123, eyeSize: 6, mouthCurve: 'wow' };\n      case 2: //  - \n        return { leftArm: 'M 55 130 L 45 150', rightArm: 'M 145 130 L 155 145', eyeY: 125, mouthCurve: 'focused' };\n      case 3: //  - \n        return { leftArm: 'M 55 130 L 30 105', rightArm: 'M 145 130 L 170 105', eyeY: 124, mouthCurve: 'hopeful' };\n      case 4: //  - \n        return { leftArm: 'M 55 130 L 20 95', rightArm: 'M 145 130 L 180 95', eyeY: 122, mouthCurve: 'happy', bounce: true };\n      case 5: //  - \n        return { leftArm: 'M 55 130 L 25 120', rightArm: 'M 145 130 L 175 120', eyeY: 125, mouthCurve: 'proud' };\n      default:\n        return { leftArm: 'M 55 130 L 25 110', rightArm: 'M 145 130 L 175 110', eyeY: 125, mouthCurve: 'smile' };\n    }\n  };\n\n  const expr = getExpression();\n  const eyeSize = expr.eyeSize || 4;\n\n  // \n  const getMouth = () => {\n    switch (expr.mouthCurve) {\n      case 'smile':\n        return <path d=\"M 90 145 Q 100 155 110 145\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />;\n      case 'wow':\n        return <ellipse cx=\"100\" cy=\"148\" rx=\"6\" ry=\"8\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" />;\n      case 'focused':\n        return <path d=\"M 92 145 Q 100 152 108 145\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />;\n      case 'hopeful':\n        return <path d=\"M 90 144 Q 100 156 110 144\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />;\n      case 'happy':\n        return <path d=\"M 85 142 Q 100 165 115 142\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />;\n      case 'proud':\n        return <path d=\"M 88 145 Q 100 158 112 145\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />;\n      default:\n        return <path d=\"M 90 145 Q 100 155 110 145\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />;\n    }\n  };\n\n  return (\n    <svg \n      viewBox=\"0 0 200 240\" \n      className={`size-full text-brand drop-shadow-sm transition-transform duration-500 ${\n        animated ? 'hover:scale-105' : ''\n      } ${expr.bounce ? 'animate-bounce' : ''}`}\n    >\n      {/*  */}\n      {phase === 4 && (\n        <>\n          <text x=\"25\" y=\"70\" className=\"animate-ping text-xl\" fill=\"#FF6B9D\"></text>\n          <text x=\"165\" y=\"75\" className=\"animate-ping text-xl\" style={{ animationDelay: '0.3s' }} fill=\"#FF6B9D\"></text>\n        </>\n      )}\n\n      {/* M-Antenna */}\n      <path \n        d=\"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40\" \n        stroke=\"currentColor\" \n        strokeWidth=\"5\" \n        fill=\"none\" \n        strokeLinecap=\"round\" \n        strokeLinejoin=\"round\"\n        className={phase === 4 ? 'animate-pulse' : ''}\n      />\n\n      {/* House Body & Roof */}\n      <path \n        d=\"M 40 80 L 100 40 L 160 80\" \n        stroke=\"currentColor\" \n        strokeWidth=\"6\" \n        fill=\"none\" \n        strokeLinecap=\"round\" \n        strokeLinejoin=\"round\"\n      />\n      <rect \n        x=\"55\" y=\"80\" \n        width=\"90\" height=\"100\" \n        stroke=\"currentColor\" \n        strokeWidth=\"6\" \n        fill=\"none\" \n        strokeLinecap=\"round\" \n        strokeLinejoin=\"round\"\n      />\n\n      {/* Eyebrows -  */}\n      {phase === 1 ? (\n        //  - \n        <>\n          <path d=\"M 75 105 Q 85 98 95 105\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n          <path d=\"M 105 105 Q 115 98 125 105\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n        </>\n      ) : phase === 2 ? (\n        //  - \n        <>\n          <path d=\"M 78 108 Q 85 105 92 109\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n          <path d=\"M 108 107 Q 115 104 122 109\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n        </>\n      ) : phase === 3 ? (\n        //  - \n        <>\n          <path d=\"M 76 108 Q 85 103 94 108\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n          <path d=\"M 106 108 Q 115 103 124 108\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n        </>\n      ) : (\n        // /\n        <>\n          <path d=\"M 78 110 Q 85 105 92 110\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n          <path d=\"M 108 110 Q 115 105 122 110\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n        </>\n      )}\n      \n      {/* Eyes -  */}\n      <circle \n        cx=\"85\" \n        cy={expr.eyeY} \n        r={eyeSize} \n        stroke=\"currentColor\" \n        strokeWidth=\"3\" \n        fill={phase === 4 ? 'currentColor' : 'none'} \n        className=\"transition-all duration-300\"\n      />\n      <circle \n        cx=\"115\" \n        cy={expr.eyeY} \n        r={eyeSize} \n        stroke=\"currentColor\" \n        strokeWidth=\"3\" \n        fill={phase === 4 ? 'currentColor' : 'none'}\n        className=\"transition-all duration-300\"\n      />\n      \n      {/* */}\n      {phase === 4 && (\n        <>\n          <path d=\"M 78 122 Q 85 128 92 122\" stroke=\"white\" strokeWidth=\"2\" fill=\"none\" strokeLinecap=\"round\" />\n          <path d=\"M 108 122 Q 115 128 122 122\" stroke=\"white\" strokeWidth=\"2\" fill=\"none\" strokeLinecap=\"round\" />\n        </>\n      )}\n\n      {/* Mouth -  */}\n      {getMouth()}\n\n      {/* Hands -  */}\n      <path \n        d={expr.leftArm} \n        stroke=\"currentColor\" \n        strokeWidth=\"5\" \n        fill=\"none\" \n        strokeLinecap=\"round\"\n        className=\"transition-all duration-500\"\n      />\n      <path \n        d={expr.rightArm} \n        stroke=\"currentColor\" \n        strokeWidth=\"5\" \n        fill=\"none\" \n        strokeLinecap=\"round\"\n        className=\"transition-all duration-500\"\n      />\n\n      {/* Legs -  */}\n      <path \n        d={phase % 2 === 0 ? \"M 85 180 L 85 215 L 75 215\" : \"M 85 180 L 80 215 L 70 212\"} \n        stroke=\"currentColor\" \n        strokeWidth=\"5\" \n        fill=\"none\" \n        strokeLinecap=\"round\" \n        strokeLinejoin=\"round\"\n        className=\"transition-all duration-300\"\n      />\n      <path \n        d={phase % 2 === 0 ? \"M 115 180 L 115 215 L 125 215\" : \"M 115 180 L 120 215 L 130 212\"} \n        stroke=\"currentColor\" \n        strokeWidth=\"5\" \n        fill=\"none\" \n        strokeLinecap=\"round\" \n        strokeLinejoin=\"round\"\n        className=\"transition-all duration-300\"\n      />\n\n      {/*  */}\n      {phase === 5 && (\n        <g className=\"animate-pulse\">\n          <circle cx=\"175\" cy=\"100\" r=\"8\" stroke=\"#FFB800\" strokeWidth=\"3\" fill=\"none\" />\n          <path d=\"M 175 108 L 175 130 M 172 120 L 178 120 M 172 125 L 178 125\" stroke=\"#FFB800\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\" />\n        </g>\n      )}\n    </svg>\n  );\n}\n","import React from 'react';\nimport { ScanEye, HandCoins, Phone, MessageSquareText, Landmark, KeyRound } from 'lucide-react';\n\nexport const HERO_STEPS = [\n  {\n    id: '01',\n    title: '',\n    desc: '',\n    icon: Phone,\n  },\n  {\n    id: '02',\n    title: '',\n    desc: '',\n    icon: ScanEye,\n  },\n  {\n    id: '03',\n    title: '',\n    desc: '',\n    icon: HandCoins,\n  },\n  {\n    id: '04',\n    title: '',\n    desc: '',\n    icon: MessageSquareText,\n  },\n  {\n    id: '05',\n    title: '',\n    desc: '',\n    icon: Landmark,\n  },\n  {\n    id: '06',\n    title: '',\n    desc: '',\n    icon: KeyRound,\n  },\n];\n\nexport const COMMUNITY_REVIEWS = [\n  {\n    id: 'J',\n    name: 'J*** ',\n    rating: 5,\n    tags: ['#/'],\n    content: ''\n  },\n  {\n    id: 'W',\n    name: 'W*** ',\n    rating: 4,\n    tags: ['#'],\n    content: ''\n  },\n  {\n    id: 'L',\n    name: 'L*** ',\n    rating: 4,\n    tags: ['#/'],\n    content: ''\n  },\n  {\n    id: 'A',\n    name: 'A*** ',\n    rating: 5,\n    tags: ['#/'],\n    content: ''\n  },\n  {\n    id: 'H',\n    name: 'H*** ',\n    rating: 3,\n    tags: ['#/'],\n    content: ''\n  },\n  {\n    id: 'K',\n    name: 'K*** ',\n    rating: 4,\n    tags: ['#/'],\n    content: ''\n  }\n];\n\nexport const QUICK_QUESTIONS = ['3', '30', '', ''];\n\nexport const PROPERTIES = [\n  {\n    id: 1,\n    image: 'https://images.unsplash.com/photo-1600585154526-990dced4db0d?q=80&w=1600&auto=format&fit=crop',\n    badge: ' 5 ',\n    title: '',\n    tags: ['34.2 ', '3  2 ', ''],\n    price: '1,288',\n    location: '  ',\n    reviews: [\n      {\n        avatar: 'A',\n        name: '',\n        role: '3',\n        tag: '',\n        text: '',\n      },\n      {\n        avatar: 'B',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n    ],\n  },\n  {\n    id: 2,\n    image: 'https://images.unsplash.com/photo-1575517111478-7f6afd0973db?q=80&w=1600&auto=format&fit=crop',\n    badge: '',\n    title: '',\n    tags: ['28.6 ', '2  2 ', ''],\n    price: '1,052',\n    location: '  ',\n    reviews: [\n      {\n        avatar: 'C',\n        name: '',\n        role: '5',\n        tag: '',\n        text: '',\n      },\n      {\n        avatar: 'D',\n        name: '',\n        role: '',\n        tag: '',\n        text: ' 3 ',\n      },\n    ],\n  },\n  {\n    id: 3,\n    image: 'https://images.unsplash.com/photo-1515263487990-61b07816b324?q=80&w=1600&auto=format&fit=crop',\n    badge: '',\n    title: '',\n    tags: ['22.1 ', '2  1 ', ''],\n    price: '838',\n    location: '  ',\n    reviews: [\n      {\n        avatar: 'E',\n        name: '',\n        role: '',\n        tag: '',\n        text: ' 6 ',\n      },\n      {\n        avatar: 'F',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n    ],\n  },\n  {\n    id: 4,\n    image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1600&auto=format&fit=crop',\n    badge: '',\n    title: '',\n    tags: ['36.8 ', '3  2 ', ''],\n    price: '1,560',\n    location: '  ',\n    reviews: [\n      {\n        avatar: 'G',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n      {\n        avatar: 'H',\n        name: '',\n        role: '',\n        tag: '',\n        text: ' 2 ',\n      },\n    ],\n  },\n  {\n    id: 5,\n    image: 'https://images.unsplash.com/photo-1501183638710-841dd1904471?q=80&w=1600&auto=format&fit=crop',\n    badge: '',\n    title: '',\n    tags: ['27.4 ', '2  2 ', ''],\n    price: '968',\n    location: '  ',\n    reviews: [\n      {\n        avatar: 'I',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n      {\n        avatar: 'J',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n    ],\n  },\n  {\n    id: 6,\n    image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1600&auto=format&fit=crop',\n    badge: '',\n    title: '',\n    tags: ['24.9 ', '2  1 ', ''],\n    price: '898',\n    location: '  ',\n    reviews: [\n      {\n        avatar: 'K',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n      {\n        avatar: 'L',\n        name: '',\n        role: '',\n        tag: '',\n        text: '',\n      },\n    ],\n  },\n];\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * Concatenates two arrays faster than the array spread operator.\n */\nconst concatArrays = (array1, array2) => {\n  // Pre-allocate for better V8 optimization\n  const combinedArray = new Array(array1.length + array2.length);\n  for (let i = 0; i < array1.length; i++) {\n    combinedArray[i] = array1[i];\n  }\n  for (let i = 0; i < array2.length; i++) {\n    combinedArray[array1.length + i] = array2[i];\n  }\n  return combinedArray;\n};\n\n// Factory function ensures consistent object shapes\nconst createClassValidatorObject = (classGroupId, validator) => ({\n  classGroupId,\n  validator\n});\n// Factory ensures consistent ClassPartObject shape\nconst createClassPartObject = (nextPart = new Map(), validators = null, classGroupId) => ({\n  nextPart,\n  validators,\n  classGroupId\n});\nconst CLASS_PART_SEPARATOR = '-';\nconst EMPTY_CONFLICTS = [];\n// I use two dots here because one dot is used as prefix for class groups in plugins\nconst ARBITRARY_PROPERTY_PREFIX = 'arbitrary..';\nconst createClassGroupUtils = config => {\n  const classMap = createClassMap(config);\n  const {\n    conflictingClassGroups,\n    conflictingClassGroupModifiers\n  } = config;\n  const getClassGroupId = className => {\n    if (className.startsWith('[') && className.endsWith(']')) {\n      return getGroupIdForArbitraryProperty(className);\n    }\n    const classParts = className.split(CLASS_PART_SEPARATOR);\n    // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and skip it.\n    const startIndex = classParts[0] === '' && classParts.length > 1 ? 1 : 0;\n    return getGroupRecursive(classParts, startIndex, classMap);\n  };\n  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {\n    if (hasPostfixModifier) {\n      const modifierConflicts = conflictingClassGroupModifiers[classGroupId];\n      const baseConflicts = conflictingClassGroups[classGroupId];\n      if (modifierConflicts) {\n        if (baseConflicts) {\n          // Merge base conflicts with modifier conflicts\n          return concatArrays(baseConflicts, modifierConflicts);\n        }\n        // Only modifier conflicts\n        return modifierConflicts;\n      }\n      // Fall back to without postfix if no modifier conflicts\n      return baseConflicts || EMPTY_CONFLICTS;\n    }\n    return conflictingClassGroups[classGroupId] || EMPTY_CONFLICTS;\n  };\n  return {\n    getClassGroupId,\n    getConflictingClassGroupIds\n  };\n};\nconst getGroupRecursive = (classParts, startIndex, classPartObject) => {\n  const classPathsLength = classParts.length - startIndex;\n  if (classPathsLength === 0) {\n    return classPartObject.classGroupId;\n  }\n  const currentClassPart = classParts[startIndex];\n  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);\n  if (nextClassPartObject) {\n    const result = getGroupRecursive(classParts, startIndex + 1, nextClassPartObject);\n    if (result) return result;\n  }\n  const validators = classPartObject.validators;\n  if (validators === null) {\n    return undefined;\n  }\n  // Build classRest string efficiently by joining from startIndex onwards\n  const classRest = startIndex === 0 ? classParts.join(CLASS_PART_SEPARATOR) : classParts.slice(startIndex).join(CLASS_PART_SEPARATOR);\n  const validatorsLength = validators.length;\n  for (let i = 0; i < validatorsLength; i++) {\n    const validatorObj = validators[i];\n    if (validatorObj.validator(classRest)) {\n      return validatorObj.classGroupId;\n    }\n  }\n  return undefined;\n};\n/**\n * Get the class group ID for an arbitrary property.\n *\n * @param className - The class name to get the group ID for. Is expected to be string starting with `[` and ending with `]`.\n */\nconst getGroupIdForArbitraryProperty = className => className.slice(1, -1).indexOf(':') === -1 ? undefined : (() => {\n  const content = className.slice(1, -1);\n  const colonIndex = content.indexOf(':');\n  const property = content.slice(0, colonIndex);\n  return property ? ARBITRARY_PROPERTY_PREFIX + property : undefined;\n})();\n/**\n * Exported for testing only\n */\nconst createClassMap = config => {\n  const {\n    theme,\n    classGroups\n  } = config;\n  return processClassGroups(classGroups, theme);\n};\n// Split into separate functions to maintain monomorphic call sites\nconst processClassGroups = (classGroups, theme) => {\n  const classMap = createClassPartObject();\n  for (const classGroupId in classGroups) {\n    const group = classGroups[classGroupId];\n    processClassesRecursively(group, classMap, classGroupId, theme);\n  }\n  return classMap;\n};\nconst processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {\n  const len = classGroup.length;\n  for (let i = 0; i < len; i++) {\n    const classDefinition = classGroup[i];\n    processClassDefinition(classDefinition, classPartObject, classGroupId, theme);\n  }\n};\n// Split into separate functions for each type to maintain monomorphic call sites\nconst processClassDefinition = (classDefinition, classPartObject, classGroupId, theme) => {\n  if (typeof classDefinition === 'string') {\n    processStringDefinition(classDefinition, classPartObject, classGroupId);\n    return;\n  }\n  if (typeof classDefinition === 'function') {\n    processFunctionDefinition(classDefinition, classPartObject, classGroupId, theme);\n    return;\n  }\n  processObjectDefinition(classDefinition, classPartObject, classGroupId, theme);\n};\nconst processStringDefinition = (classDefinition, classPartObject, classGroupId) => {\n  const classPartObjectToEdit = classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition);\n  classPartObjectToEdit.classGroupId = classGroupId;\n};\nconst processFunctionDefinition = (classDefinition, classPartObject, classGroupId, theme) => {\n  if (isThemeGetter(classDefinition)) {\n    processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);\n    return;\n  }\n  if (classPartObject.validators === null) {\n    classPartObject.validators = [];\n  }\n  classPartObject.validators.push(createClassValidatorObject(classGroupId, classDefinition));\n};\nconst processObjectDefinition = (classDefinition, classPartObject, classGroupId, theme) => {\n  const entries = Object.entries(classDefinition);\n  const len = entries.length;\n  for (let i = 0; i < len; i++) {\n    const [key, value] = entries[i];\n    processClassesRecursively(value, getPart(classPartObject, key), classGroupId, theme);\n  }\n};\nconst getPart = (classPartObject, path) => {\n  let current = classPartObject;\n  const parts = path.split(CLASS_PART_SEPARATOR);\n  const len = parts.length;\n  for (let i = 0; i < len; i++) {\n    const part = parts[i];\n    let next = current.nextPart.get(part);\n    if (!next) {\n      next = createClassPartObject();\n      current.nextPart.set(part, next);\n    }\n    current = next;\n  }\n  return current;\n};\n// Type guard maintains monomorphic check\nconst isThemeGetter = func => 'isThemeGetter' in func && func.isThemeGetter === true;\n\n// LRU cache implementation using plain objects for simplicity\nconst createLruCache = maxCacheSize => {\n  if (maxCacheSize < 1) {\n    return {\n      get: () => undefined,\n      set: () => {}\n    };\n  }\n  let cacheSize = 0;\n  let cache = Object.create(null);\n  let previousCache = Object.create(null);\n  const update = (key, value) => {\n    cache[key] = value;\n    cacheSize++;\n    if (cacheSize > maxCacheSize) {\n      cacheSize = 0;\n      previousCache = cache;\n      cache = Object.create(null);\n    }\n  };\n  return {\n    get(key) {\n      let value = cache[key];\n      if (value !== undefined) {\n        return value;\n      }\n      if ((value = previousCache[key]) !== undefined) {\n        update(key, value);\n        return value;\n      }\n    },\n    set(key, value) {\n      if (key in cache) {\n        cache[key] = value;\n      } else {\n        update(key, value);\n      }\n    }\n  };\n};\nconst IMPORTANT_MODIFIER = '!';\nconst MODIFIER_SEPARATOR = ':';\nconst EMPTY_MODIFIERS = [];\n// Pre-allocated result object shape for consistency\nconst createResultObject = (modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition, isExternal) => ({\n  modifiers,\n  hasImportantModifier,\n  baseClassName,\n  maybePostfixModifierPosition,\n  isExternal\n});\nconst createParseClassName = config => {\n  const {\n    prefix,\n    experimentalParseClassName\n  } = config;\n  /**\n   * Parse class name into parts.\n   *\n   * Inspired by `splitAtTopLevelOnly` used in Tailwind CSS\n   * @see https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n   */\n  let parseClassName = className => {\n    // Use simple array with push for better performance\n    const modifiers = [];\n    let bracketDepth = 0;\n    let parenDepth = 0;\n    let modifierStart = 0;\n    let postfixModifierPosition;\n    const len = className.length;\n    for (let index = 0; index < len; index++) {\n      const currentCharacter = className[index];\n      if (bracketDepth === 0 && parenDepth === 0) {\n        if (currentCharacter === MODIFIER_SEPARATOR) {\n          modifiers.push(className.slice(modifierStart, index));\n          modifierStart = index + 1;\n          continue;\n        }\n        if (currentCharacter === '/') {\n          postfixModifierPosition = index;\n          continue;\n        }\n      }\n      if (currentCharacter === '[') bracketDepth++;else if (currentCharacter === ']') bracketDepth--;else if (currentCharacter === '(') parenDepth++;else if (currentCharacter === ')') parenDepth--;\n    }\n    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.slice(modifierStart);\n    // Inline important modifier check\n    let baseClassName = baseClassNameWithImportantModifier;\n    let hasImportantModifier = false;\n    if (baseClassNameWithImportantModifier.endsWith(IMPORTANT_MODIFIER)) {\n      baseClassName = baseClassNameWithImportantModifier.slice(0, -1);\n      hasImportantModifier = true;\n    } else if (\n    /**\n     * In Tailwind CSS v3 the important modifier was at the start of the base class name. This is still supported for legacy reasons.\n     * @see https://github.com/dcastil/tailwind-merge/issues/513#issuecomment-2614029864\n     */\n    baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER)) {\n      baseClassName = baseClassNameWithImportantModifier.slice(1);\n      hasImportantModifier = true;\n    }\n    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : undefined;\n    return createResultObject(modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition);\n  };\n  if (prefix) {\n    const fullPrefix = prefix + MODIFIER_SEPARATOR;\n    const parseClassNameOriginal = parseClassName;\n    parseClassName = className => className.startsWith(fullPrefix) ? parseClassNameOriginal(className.slice(fullPrefix.length)) : createResultObject(EMPTY_MODIFIERS, false, className, undefined, true);\n  }\n  if (experimentalParseClassName) {\n    const parseClassNameOriginal = parseClassName;\n    parseClassName = className => experimentalParseClassName({\n      className,\n      parseClassName: parseClassNameOriginal\n    });\n  }\n  return parseClassName;\n};\n\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nconst createSortModifiers = config => {\n  // Pre-compute weights for all known modifiers for O(1) comparison\n  const modifierWeights = new Map();\n  // Assign weights to sensitive modifiers (highest priority, but preserve order)\n  config.orderSensitiveModifiers.forEach((mod, index) => {\n    modifierWeights.set(mod, 1000000 + index); // High weights for sensitive mods\n  });\n  return modifiers => {\n    const result = [];\n    let currentSegment = [];\n    // Process modifiers in one pass\n    for (let i = 0; i < modifiers.length; i++) {\n      const modifier = modifiers[i];\n      // Check if modifier is sensitive (starts with '[' or in orderSensitiveModifiers)\n      const isArbitrary = modifier[0] === '[';\n      const isOrderSensitive = modifierWeights.has(modifier);\n      if (isArbitrary || isOrderSensitive) {\n        // Sort and flush current segment alphabetically\n        if (currentSegment.length > 0) {\n          currentSegment.sort();\n          result.push(...currentSegment);\n          currentSegment = [];\n        }\n        result.push(modifier);\n      } else {\n        // Regular modifier - add to current segment for batch sorting\n        currentSegment.push(modifier);\n      }\n    }\n    // Sort and add any remaining segment items\n    if (currentSegment.length > 0) {\n      currentSegment.sort();\n      result.push(...currentSegment);\n    }\n    return result;\n  };\n};\nconst createConfigUtils = config => ({\n  cache: createLruCache(config.cacheSize),\n  parseClassName: createParseClassName(config),\n  sortModifiers: createSortModifiers(config),\n  ...createClassGroupUtils(config)\n});\nconst SPLIT_CLASSES_REGEX = /\\s+/;\nconst mergeClassList = (classList, configUtils) => {\n  const {\n    parseClassName,\n    getClassGroupId,\n    getConflictingClassGroupIds,\n    sortModifiers\n  } = configUtils;\n  /**\n   * Set of classGroupIds in following format:\n   * `{importantModifier}{variantModifiers}{classGroupId}`\n   * @example 'float'\n   * @example 'hover:focus:bg-color'\n   * @example 'md:!pr'\n   */\n  const classGroupsInConflict = [];\n  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);\n  let result = '';\n  for (let index = classNames.length - 1; index >= 0; index -= 1) {\n    const originalClassName = classNames[index];\n    const {\n      isExternal,\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    } = parseClassName(originalClassName);\n    if (isExternal) {\n      result = originalClassName + (result.length > 0 ? ' ' + result : result);\n      continue;\n    }\n    let hasPostfixModifier = !!maybePostfixModifierPosition;\n    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);\n    if (!classGroupId) {\n      if (!hasPostfixModifier) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      classGroupId = getClassGroupId(baseClassName);\n      if (!classGroupId) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      hasPostfixModifier = false;\n    }\n    // Fast path: skip sorting for empty or single modifier\n    const variantModifier = modifiers.length === 0 ? '' : modifiers.length === 1 ? modifiers[0] : sortModifiers(modifiers).join(':');\n    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;\n    const classId = modifierId + classGroupId;\n    if (classGroupsInConflict.indexOf(classId) > -1) {\n      // Tailwind class omitted due to conflict\n      continue;\n    }\n    classGroupsInConflict.push(classId);\n    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);\n    for (let i = 0; i < conflictGroups.length; ++i) {\n      const group = conflictGroups[i];\n      classGroupsInConflict.push(modifierId + group);\n    }\n    // Tailwind class not in conflict\n    result = originalClassName + (result.length > 0 ? ' ' + result : result);\n  }\n  return result;\n};\n\n/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\nconst twJoin = (...classLists) => {\n  let index = 0;\n  let argument;\n  let resolvedValue;\n  let string = '';\n  while (index < classLists.length) {\n    if (argument = classLists[index++]) {\n      if (resolvedValue = toValue(argument)) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nconst toValue = mix => {\n  // Fast path for strings\n  if (typeof mix === 'string') {\n    return mix;\n  }\n  let resolvedValue;\n  let string = '';\n  for (let k = 0; k < mix.length; k++) {\n    if (mix[k]) {\n      if (resolvedValue = toValue(mix[k])) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nconst createTailwindMerge = (createConfigFirst, ...createConfigRest) => {\n  let configUtils;\n  let cacheGet;\n  let cacheSet;\n  let functionToCall;\n  const initTailwindMerge = classList => {\n    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());\n    configUtils = createConfigUtils(config);\n    cacheGet = configUtils.cache.get;\n    cacheSet = configUtils.cache.set;\n    functionToCall = tailwindMerge;\n    return tailwindMerge(classList);\n  };\n  const tailwindMerge = classList => {\n    const cachedResult = cacheGet(classList);\n    if (cachedResult) {\n      return cachedResult;\n    }\n    const result = mergeClassList(classList, configUtils);\n    cacheSet(classList, result);\n    return result;\n  };\n  functionToCall = initTailwindMerge;\n  return (...args) => functionToCall(twJoin(...args));\n};\nconst fallbackThemeArr = [];\nconst fromTheme = key => {\n  const themeGetter = theme => theme[key] || fallbackThemeArr;\n  themeGetter.isThemeGetter = true;\n  return themeGetter;\n};\nconst arbitraryValueRegex = /^\\[(?:(\\w[\\w-]*):)?(.+)\\]$/i;\nconst arbitraryVariableRegex = /^\\((?:(\\w[\\w-]*):)?(.+)\\)$/i;\nconst fractionRegex = /^\\d+\\/\\d+$/;\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/;\nconst lengthUnitRegex = /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/;\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\\(.+\\)$/;\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/;\nconst imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/;\nconst isFraction = value => fractionRegex.test(value);\nconst isNumber = value => !!value && !Number.isNaN(Number(value));\nconst isInteger = value => !!value && Number.isInteger(Number(value));\nconst isPercent = value => value.endsWith('%') && isNumber(value.slice(0, -1));\nconst isTshirtSize = value => tshirtUnitRegex.test(value);\nconst isAny = () => true;\nconst isLengthOnly = value =>\n// `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n// For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n// I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\nlengthUnitRegex.test(value) && !colorFunctionRegex.test(value);\nconst isNever = () => false;\nconst isShadow = value => shadowRegex.test(value);\nconst isImage = value => imageRegex.test(value);\nconst isAnyNonArbitrary = value => !isArbitraryValue(value) && !isArbitraryVariable(value);\nconst isArbitrarySize = value => getIsArbitraryValue(value, isLabelSize, isNever);\nconst isArbitraryValue = value => arbitraryValueRegex.test(value);\nconst isArbitraryLength = value => getIsArbitraryValue(value, isLabelLength, isLengthOnly);\nconst isArbitraryNumber = value => getIsArbitraryValue(value, isLabelNumber, isNumber);\nconst isArbitraryPosition = value => getIsArbitraryValue(value, isLabelPosition, isNever);\nconst isArbitraryImage = value => getIsArbitraryValue(value, isLabelImage, isImage);\nconst isArbitraryShadow = value => getIsArbitraryValue(value, isLabelShadow, isShadow);\nconst isArbitraryVariable = value => arbitraryVariableRegex.test(value);\nconst isArbitraryVariableLength = value => getIsArbitraryVariable(value, isLabelLength);\nconst isArbitraryVariableFamilyName = value => getIsArbitraryVariable(value, isLabelFamilyName);\nconst isArbitraryVariablePosition = value => getIsArbitraryVariable(value, isLabelPosition);\nconst isArbitraryVariableSize = value => getIsArbitraryVariable(value, isLabelSize);\nconst isArbitraryVariableImage = value => getIsArbitraryVariable(value, isLabelImage);\nconst isArbitraryVariableShadow = value => getIsArbitraryVariable(value, isLabelShadow, true);\n// Helpers\nconst getIsArbitraryValue = (value, testLabel, testValue) => {\n  const result = arbitraryValueRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return testLabel(result[1]);\n    }\n    return testValue(result[2]);\n  }\n  return false;\n};\nconst getIsArbitraryVariable = (value, testLabel, shouldMatchNoLabel = false) => {\n  const result = arbitraryVariableRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return testLabel(result[1]);\n    }\n    return shouldMatchNoLabel;\n  }\n  return false;\n};\n// Labels\nconst isLabelPosition = label => label === 'position' || label === 'percentage';\nconst isLabelImage = label => label === 'image' || label === 'url';\nconst isLabelSize = label => label === 'length' || label === 'size' || label === 'bg-size';\nconst isLabelLength = label => label === 'length';\nconst isLabelNumber = label => label === 'number';\nconst isLabelFamilyName = label => label === 'family-name';\nconst isLabelShadow = label => label === 'shadow';\nconst validators = /*#__PURE__*/Object.defineProperty({\n  __proto__: null,\n  isAny,\n  isAnyNonArbitrary,\n  isArbitraryImage,\n  isArbitraryLength,\n  isArbitraryNumber,\n  isArbitraryPosition,\n  isArbitraryShadow,\n  isArbitrarySize,\n  isArbitraryValue,\n  isArbitraryVariable,\n  isArbitraryVariableFamilyName,\n  isArbitraryVariableImage,\n  isArbitraryVariableLength,\n  isArbitraryVariablePosition,\n  isArbitraryVariableShadow,\n  isArbitraryVariableSize,\n  isFraction,\n  isInteger,\n  isNumber,\n  isPercent,\n  isTshirtSize\n}, Symbol.toStringTag, {\n  value: 'Module'\n});\nconst getDefaultConfig = () => {\n  /**\n   * Theme getters for theme variable namespaces\n   * @see https://tailwindcss.com/docs/theme#theme-variable-namespaces\n   */\n  /***/\n  const themeColor = fromTheme('color');\n  const themeFont = fromTheme('font');\n  const themeText = fromTheme('text');\n  const themeFontWeight = fromTheme('font-weight');\n  const themeTracking = fromTheme('tracking');\n  const themeLeading = fromTheme('leading');\n  const themeBreakpoint = fromTheme('breakpoint');\n  const themeContainer = fromTheme('container');\n  const themeSpacing = fromTheme('spacing');\n  const themeRadius = fromTheme('radius');\n  const themeShadow = fromTheme('shadow');\n  const themeInsetShadow = fromTheme('inset-shadow');\n  const themeTextShadow = fromTheme('text-shadow');\n  const themeDropShadow = fromTheme('drop-shadow');\n  const themeBlur = fromTheme('blur');\n  const themePerspective = fromTheme('perspective');\n  const themeAspect = fromTheme('aspect');\n  const themeEase = fromTheme('ease');\n  const themeAnimate = fromTheme('animate');\n  /**\n   * Helpers to avoid repeating the same scales\n   *\n   * We use functions that create a new array every time they're called instead of static arrays.\n   * This ensures that users who modify any scale by mutating the array (e.g. with `array.push(element)`) don't accidentally mutate arrays in other parts of the config.\n   */\n  /***/\n  const scaleBreak = () => ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'];\n  const scalePosition = () => ['center', 'top', 'bottom', 'left', 'right', 'top-left',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'left-top', 'top-right',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'right-top', 'bottom-right',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'right-bottom', 'bottom-left',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'left-bottom'];\n  const scalePositionWithArbitrary = () => [...scalePosition(), isArbitraryVariable, isArbitraryValue];\n  const scaleOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'];\n  const scaleOverscroll = () => ['auto', 'contain', 'none'];\n  const scaleUnambiguousSpacing = () => [isArbitraryVariable, isArbitraryValue, themeSpacing];\n  const scaleInset = () => [isFraction, 'full', 'auto', ...scaleUnambiguousSpacing()];\n  const scaleGridTemplateColsRows = () => [isInteger, 'none', 'subgrid', isArbitraryVariable, isArbitraryValue];\n  const scaleGridColRowStartAndEnd = () => ['auto', {\n    span: ['full', isInteger, isArbitraryVariable, isArbitraryValue]\n  }, isInteger, isArbitraryVariable, isArbitraryValue];\n  const scaleGridColRowStartOrEnd = () => [isInteger, 'auto', isArbitraryVariable, isArbitraryValue];\n  const scaleGridAutoColsRows = () => ['auto', 'min', 'max', 'fr', isArbitraryVariable, isArbitraryValue];\n  const scaleAlignPrimaryAxis = () => ['start', 'end', 'center', 'between', 'around', 'evenly', 'stretch', 'baseline', 'center-safe', 'end-safe'];\n  const scaleAlignSecondaryAxis = () => ['start', 'end', 'center', 'stretch', 'center-safe', 'end-safe'];\n  const scaleMargin = () => ['auto', ...scaleUnambiguousSpacing()];\n  const scaleSizing = () => [isFraction, 'auto', 'full', 'dvw', 'dvh', 'lvw', 'lvh', 'svw', 'svh', 'min', 'max', 'fit', ...scaleUnambiguousSpacing()];\n  const scaleColor = () => [themeColor, isArbitraryVariable, isArbitraryValue];\n  const scaleBgPosition = () => [...scalePosition(), isArbitraryVariablePosition, isArbitraryPosition, {\n    position: [isArbitraryVariable, isArbitraryValue]\n  }];\n  const scaleBgRepeat = () => ['no-repeat', {\n    repeat: ['', 'x', 'y', 'space', 'round']\n  }];\n  const scaleBgSize = () => ['auto', 'cover', 'contain', isArbitraryVariableSize, isArbitrarySize, {\n    size: [isArbitraryVariable, isArbitraryValue]\n  }];\n  const scaleGradientStopPosition = () => [isPercent, isArbitraryVariableLength, isArbitraryLength];\n  const scaleRadius = () => [\n  // Deprecated since Tailwind CSS v4.0.0\n  '', 'none', 'full', themeRadius, isArbitraryVariable, isArbitraryValue];\n  const scaleBorderWidth = () => ['', isNumber, isArbitraryVariableLength, isArbitraryLength];\n  const scaleLineStyle = () => ['solid', 'dashed', 'dotted', 'double'];\n  const scaleBlendMode = () => ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  const scaleMaskImagePosition = () => [isNumber, isPercent, isArbitraryVariablePosition, isArbitraryPosition];\n  const scaleBlur = () => [\n  // Deprecated since Tailwind CSS v4.0.0\n  '', 'none', themeBlur, isArbitraryVariable, isArbitraryValue];\n  const scaleRotate = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleScale = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleSkew = () => [isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleTranslate = () => [isFraction, 'full', ...scaleUnambiguousSpacing()];\n  return {\n    cacheSize: 500,\n    theme: {\n      animate: ['spin', 'ping', 'pulse', 'bounce'],\n      aspect: ['video'],\n      blur: [isTshirtSize],\n      breakpoint: [isTshirtSize],\n      color: [isAny],\n      container: [isTshirtSize],\n      'drop-shadow': [isTshirtSize],\n      ease: ['in', 'out', 'in-out'],\n      font: [isAnyNonArbitrary],\n      'font-weight': ['thin', 'extralight', 'light', 'normal', 'medium', 'semibold', 'bold', 'extrabold', 'black'],\n      'inset-shadow': [isTshirtSize],\n      leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose'],\n      perspective: ['dramatic', 'near', 'normal', 'midrange', 'distant', 'none'],\n      radius: [isTshirtSize],\n      shadow: [isTshirtSize],\n      spacing: ['px', isNumber],\n      text: [isTshirtSize],\n      'text-shadow': [isTshirtSize],\n      tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest']\n    },\n    classGroups: {\n      // --------------\n      // --- Layout ---\n      // --------------\n      /**\n       * Aspect Ratio\n       * @see https://tailwindcss.com/docs/aspect-ratio\n       */\n      aspect: [{\n        aspect: ['auto', 'square', isFraction, isArbitraryValue, isArbitraryVariable, themeAspect]\n      }],\n      /**\n       * Container\n       * @see https://tailwindcss.com/docs/container\n       * @deprecated since Tailwind CSS v4.0.0\n       */\n      container: ['container'],\n      /**\n       * Columns\n       * @see https://tailwindcss.com/docs/columns\n       */\n      columns: [{\n        columns: [isNumber, isArbitraryValue, isArbitraryVariable, themeContainer]\n      }],\n      /**\n       * Break After\n       * @see https://tailwindcss.com/docs/break-after\n       */\n      'break-after': [{\n        'break-after': scaleBreak()\n      }],\n      /**\n       * Break Before\n       * @see https://tailwindcss.com/docs/break-before\n       */\n      'break-before': [{\n        'break-before': scaleBreak()\n      }],\n      /**\n       * Break Inside\n       * @see https://tailwindcss.com/docs/break-inside\n       */\n      'break-inside': [{\n        'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column']\n      }],\n      /**\n       * Box Decoration Break\n       * @see https://tailwindcss.com/docs/box-decoration-break\n       */\n      'box-decoration': [{\n        'box-decoration': ['slice', 'clone']\n      }],\n      /**\n       * Box Sizing\n       * @see https://tailwindcss.com/docs/box-sizing\n       */\n      box: [{\n        box: ['border', 'content']\n      }],\n      /**\n       * Display\n       * @see https://tailwindcss.com/docs/display\n       */\n      display: ['block', 'inline-block', 'inline', 'flex', 'inline-flex', 'table', 'inline-table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row-group', 'table-row', 'flow-root', 'grid', 'inline-grid', 'contents', 'list-item', 'hidden'],\n      /**\n       * Screen Reader Only\n       * @see https://tailwindcss.com/docs/display#screen-reader-only\n       */\n      sr: ['sr-only', 'not-sr-only'],\n      /**\n       * Floats\n       * @see https://tailwindcss.com/docs/float\n       */\n      float: [{\n        float: ['right', 'left', 'none', 'start', 'end']\n      }],\n      /**\n       * Clear\n       * @see https://tailwindcss.com/docs/clear\n       */\n      clear: [{\n        clear: ['left', 'right', 'both', 'none', 'start', 'end']\n      }],\n      /**\n       * Isolation\n       * @see https://tailwindcss.com/docs/isolation\n       */\n      isolation: ['isolate', 'isolation-auto'],\n      /**\n       * Object Fit\n       * @see https://tailwindcss.com/docs/object-fit\n       */\n      'object-fit': [{\n        object: ['contain', 'cover', 'fill', 'none', 'scale-down']\n      }],\n      /**\n       * Object Position\n       * @see https://tailwindcss.com/docs/object-position\n       */\n      'object-position': [{\n        object: scalePositionWithArbitrary()\n      }],\n      /**\n       * Overflow\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      overflow: [{\n        overflow: scaleOverflow()\n      }],\n      /**\n       * Overflow X\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-x': [{\n        'overflow-x': scaleOverflow()\n      }],\n      /**\n       * Overflow Y\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-y': [{\n        'overflow-y': scaleOverflow()\n      }],\n      /**\n       * Overscroll Behavior\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      overscroll: [{\n        overscroll: scaleOverscroll()\n      }],\n      /**\n       * Overscroll Behavior X\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-x': [{\n        'overscroll-x': scaleOverscroll()\n      }],\n      /**\n       * Overscroll Behavior Y\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-y': [{\n        'overscroll-y': scaleOverscroll()\n      }],\n      /**\n       * Position\n       * @see https://tailwindcss.com/docs/position\n       */\n      position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n      /**\n       * Top / Right / Bottom / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      inset: [{\n        inset: scaleInset()\n      }],\n      /**\n       * Right / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-x': [{\n        'inset-x': scaleInset()\n      }],\n      /**\n       * Top / Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-y': [{\n        'inset-y': scaleInset()\n      }],\n      /**\n       * Start\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      start: [{\n        start: scaleInset()\n      }],\n      /**\n       * End\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      end: [{\n        end: scaleInset()\n      }],\n      /**\n       * Top\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      top: [{\n        top: scaleInset()\n      }],\n      /**\n       * Right\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      right: [{\n        right: scaleInset()\n      }],\n      /**\n       * Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      bottom: [{\n        bottom: scaleInset()\n      }],\n      /**\n       * Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      left: [{\n        left: scaleInset()\n      }],\n      /**\n       * Visibility\n       * @see https://tailwindcss.com/docs/visibility\n       */\n      visibility: ['visible', 'invisible', 'collapse'],\n      /**\n       * Z-Index\n       * @see https://tailwindcss.com/docs/z-index\n       */\n      z: [{\n        z: [isInteger, 'auto', isArbitraryVariable, isArbitraryValue]\n      }],\n      // ------------------------\n      // --- Flexbox and Grid ---\n      // ------------------------\n      /**\n       * Flex Basis\n       * @see https://tailwindcss.com/docs/flex-basis\n       */\n      basis: [{\n        basis: [isFraction, 'full', 'auto', themeContainer, ...scaleUnambiguousSpacing()]\n      }],\n      /**\n       * Flex Direction\n       * @see https://tailwindcss.com/docs/flex-direction\n       */\n      'flex-direction': [{\n        flex: ['row', 'row-reverse', 'col', 'col-reverse']\n      }],\n      /**\n       * Flex Wrap\n       * @see https://tailwindcss.com/docs/flex-wrap\n       */\n      'flex-wrap': [{\n        flex: ['nowrap', 'wrap', 'wrap-reverse']\n      }],\n      /**\n       * Flex\n       * @see https://tailwindcss.com/docs/flex\n       */\n      flex: [{\n        flex: [isNumber, isFraction, 'auto', 'initial', 'none', isArbitraryValue]\n      }],\n      /**\n       * Flex Grow\n       * @see https://tailwindcss.com/docs/flex-grow\n       */\n      grow: [{\n        grow: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Flex Shrink\n       * @see https://tailwindcss.com/docs/flex-shrink\n       */\n      shrink: [{\n        shrink: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Order\n       * @see https://tailwindcss.com/docs/order\n       */\n      order: [{\n        order: [isInteger, 'first', 'last', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Grid Template Columns\n       * @see https://tailwindcss.com/docs/grid-template-columns\n       */\n      'grid-cols': [{\n        'grid-cols': scaleGridTemplateColsRows()\n      }],\n      /**\n       * Grid Column Start / End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start-end': [{\n        col: scaleGridColRowStartAndEnd()\n      }],\n      /**\n       * Grid Column Start\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start': [{\n        'col-start': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Column End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-end': [{\n        'col-end': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Template Rows\n       * @see https://tailwindcss.com/docs/grid-template-rows\n       */\n      'grid-rows': [{\n        'grid-rows': scaleGridTemplateColsRows()\n      }],\n      /**\n       * Grid Row Start / End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start-end': [{\n        row: scaleGridColRowStartAndEnd()\n      }],\n      /**\n       * Grid Row Start\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start': [{\n        'row-start': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Row End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-end': [{\n        'row-end': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Auto Flow\n       * @see https://tailwindcss.com/docs/grid-auto-flow\n       */\n      'grid-flow': [{\n        'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense']\n      }],\n      /**\n       * Grid Auto Columns\n       * @see https://tailwindcss.com/docs/grid-auto-columns\n       */\n      'auto-cols': [{\n        'auto-cols': scaleGridAutoColsRows()\n      }],\n      /**\n       * Grid Auto Rows\n       * @see https://tailwindcss.com/docs/grid-auto-rows\n       */\n      'auto-rows': [{\n        'auto-rows': scaleGridAutoColsRows()\n      }],\n      /**\n       * Gap\n       * @see https://tailwindcss.com/docs/gap\n       */\n      gap: [{\n        gap: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Gap X\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-x': [{\n        'gap-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Gap Y\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-y': [{\n        'gap-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Justify Content\n       * @see https://tailwindcss.com/docs/justify-content\n       */\n      'justify-content': [{\n        justify: [...scaleAlignPrimaryAxis(), 'normal']\n      }],\n      /**\n       * Justify Items\n       * @see https://tailwindcss.com/docs/justify-items\n       */\n      'justify-items': [{\n        'justify-items': [...scaleAlignSecondaryAxis(), 'normal']\n      }],\n      /**\n       * Justify Self\n       * @see https://tailwindcss.com/docs/justify-self\n       */\n      'justify-self': [{\n        'justify-self': ['auto', ...scaleAlignSecondaryAxis()]\n      }],\n      /**\n       * Align Content\n       * @see https://tailwindcss.com/docs/align-content\n       */\n      'align-content': [{\n        content: ['normal', ...scaleAlignPrimaryAxis()]\n      }],\n      /**\n       * Align Items\n       * @see https://tailwindcss.com/docs/align-items\n       */\n      'align-items': [{\n        items: [...scaleAlignSecondaryAxis(), {\n          baseline: ['', 'last']\n        }]\n      }],\n      /**\n       * Align Self\n       * @see https://tailwindcss.com/docs/align-self\n       */\n      'align-self': [{\n        self: ['auto', ...scaleAlignSecondaryAxis(), {\n          baseline: ['', 'last']\n        }]\n      }],\n      /**\n       * Place Content\n       * @see https://tailwindcss.com/docs/place-content\n       */\n      'place-content': [{\n        'place-content': scaleAlignPrimaryAxis()\n      }],\n      /**\n       * Place Items\n       * @see https://tailwindcss.com/docs/place-items\n       */\n      'place-items': [{\n        'place-items': [...scaleAlignSecondaryAxis(), 'baseline']\n      }],\n      /**\n       * Place Self\n       * @see https://tailwindcss.com/docs/place-self\n       */\n      'place-self': [{\n        'place-self': ['auto', ...scaleAlignSecondaryAxis()]\n      }],\n      // Spacing\n      /**\n       * Padding\n       * @see https://tailwindcss.com/docs/padding\n       */\n      p: [{\n        p: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding X\n       * @see https://tailwindcss.com/docs/padding\n       */\n      px: [{\n        px: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Y\n       * @see https://tailwindcss.com/docs/padding\n       */\n      py: [{\n        py: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Start\n       * @see https://tailwindcss.com/docs/padding\n       */\n      ps: [{\n        ps: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding End\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pe: [{\n        pe: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Top\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pt: [{\n        pt: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Right\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pr: [{\n        pr: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Bottom\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pb: [{\n        pb: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Left\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pl: [{\n        pl: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Margin\n       * @see https://tailwindcss.com/docs/margin\n       */\n      m: [{\n        m: scaleMargin()\n      }],\n      /**\n       * Margin X\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mx: [{\n        mx: scaleMargin()\n      }],\n      /**\n       * Margin Y\n       * @see https://tailwindcss.com/docs/margin\n       */\n      my: [{\n        my: scaleMargin()\n      }],\n      /**\n       * Margin Start\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ms: [{\n        ms: scaleMargin()\n      }],\n      /**\n       * Margin End\n       * @see https://tailwindcss.com/docs/margin\n       */\n      me: [{\n        me: scaleMargin()\n      }],\n      /**\n       * Margin Top\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mt: [{\n        mt: scaleMargin()\n      }],\n      /**\n       * Margin Right\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mr: [{\n        mr: scaleMargin()\n      }],\n      /**\n       * Margin Bottom\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mb: [{\n        mb: scaleMargin()\n      }],\n      /**\n       * Margin Left\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ml: [{\n        ml: scaleMargin()\n      }],\n      /**\n       * Space Between X\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-x': [{\n        'space-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Space Between X Reverse\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-x-reverse': ['space-x-reverse'],\n      /**\n       * Space Between Y\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-y': [{\n        'space-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Space Between Y Reverse\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-y-reverse': ['space-y-reverse'],\n      // --------------\n      // --- Sizing ---\n      // --------------\n      /**\n       * Size\n       * @see https://tailwindcss.com/docs/width#setting-both-width-and-height\n       */\n      size: [{\n        size: scaleSizing()\n      }],\n      /**\n       * Width\n       * @see https://tailwindcss.com/docs/width\n       */\n      w: [{\n        w: [themeContainer, 'screen', ...scaleSizing()]\n      }],\n      /**\n       * Min-Width\n       * @see https://tailwindcss.com/docs/min-width\n       */\n      'min-w': [{\n        'min-w': [themeContainer, 'screen', /** Deprecated. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        'none', ...scaleSizing()]\n      }],\n      /**\n       * Max-Width\n       * @see https://tailwindcss.com/docs/max-width\n       */\n      'max-w': [{\n        'max-w': [themeContainer, 'screen', 'none', /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        'prose', /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        {\n          screen: [themeBreakpoint]\n        }, ...scaleSizing()]\n      }],\n      /**\n       * Height\n       * @see https://tailwindcss.com/docs/height\n       */\n      h: [{\n        h: ['screen', 'lh', ...scaleSizing()]\n      }],\n      /**\n       * Min-Height\n       * @see https://tailwindcss.com/docs/min-height\n       */\n      'min-h': [{\n        'min-h': ['screen', 'lh', 'none', ...scaleSizing()]\n      }],\n      /**\n       * Max-Height\n       * @see https://tailwindcss.com/docs/max-height\n       */\n      'max-h': [{\n        'max-h': ['screen', 'lh', ...scaleSizing()]\n      }],\n      // ------------------\n      // --- Typography ---\n      // ------------------\n      /**\n       * Font Size\n       * @see https://tailwindcss.com/docs/font-size\n       */\n      'font-size': [{\n        text: ['base', themeText, isArbitraryVariableLength, isArbitraryLength]\n      }],\n      /**\n       * Font Smoothing\n       * @see https://tailwindcss.com/docs/font-smoothing\n       */\n      'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n      /**\n       * Font Style\n       * @see https://tailwindcss.com/docs/font-style\n       */\n      'font-style': ['italic', 'not-italic'],\n      /**\n       * Font Weight\n       * @see https://tailwindcss.com/docs/font-weight\n       */\n      'font-weight': [{\n        font: [themeFontWeight, isArbitraryVariable, isArbitraryNumber]\n      }],\n      /**\n       * Font Stretch\n       * @see https://tailwindcss.com/docs/font-stretch\n       */\n      'font-stretch': [{\n        'font-stretch': ['ultra-condensed', 'extra-condensed', 'condensed', 'semi-condensed', 'normal', 'semi-expanded', 'expanded', 'extra-expanded', 'ultra-expanded', isPercent, isArbitraryValue]\n      }],\n      /**\n       * Font Family\n       * @see https://tailwindcss.com/docs/font-family\n       */\n      'font-family': [{\n        font: [isArbitraryVariableFamilyName, isArbitraryValue, themeFont]\n      }],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-normal': ['normal-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-ordinal': ['ordinal'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-slashed-zero': ['slashed-zero'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-fraction': ['diagonal-fractions', 'stacked-fractions'],\n      /**\n       * Letter Spacing\n       * @see https://tailwindcss.com/docs/letter-spacing\n       */\n      tracking: [{\n        tracking: [themeTracking, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Line Clamp\n       * @see https://tailwindcss.com/docs/line-clamp\n       */\n      'line-clamp': [{\n        'line-clamp': [isNumber, 'none', isArbitraryVariable, isArbitraryNumber]\n      }],\n      /**\n       * Line Height\n       * @see https://tailwindcss.com/docs/line-height\n       */\n      leading: [{\n        leading: [/** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        themeLeading, ...scaleUnambiguousSpacing()]\n      }],\n      /**\n       * List Style Image\n       * @see https://tailwindcss.com/docs/list-style-image\n       */\n      'list-image': [{\n        'list-image': ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * List Style Position\n       * @see https://tailwindcss.com/docs/list-style-position\n       */\n      'list-style-position': [{\n        list: ['inside', 'outside']\n      }],\n      /**\n       * List Style Type\n       * @see https://tailwindcss.com/docs/list-style-type\n       */\n      'list-style-type': [{\n        list: ['disc', 'decimal', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Text Alignment\n       * @see https://tailwindcss.com/docs/text-align\n       */\n      'text-alignment': [{\n        text: ['left', 'center', 'right', 'justify', 'start', 'end']\n      }],\n      /**\n       * Placeholder Color\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://v3.tailwindcss.com/docs/placeholder-color\n       */\n      'placeholder-color': [{\n        placeholder: scaleColor()\n      }],\n      /**\n       * Text Color\n       * @see https://tailwindcss.com/docs/text-color\n       */\n      'text-color': [{\n        text: scaleColor()\n      }],\n      /**\n       * Text Decoration\n       * @see https://tailwindcss.com/docs/text-decoration\n       */\n      'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n      /**\n       * Text Decoration Style\n       * @see https://tailwindcss.com/docs/text-decoration-style\n       */\n      'text-decoration-style': [{\n        decoration: [...scaleLineStyle(), 'wavy']\n      }],\n      /**\n       * Text Decoration Thickness\n       * @see https://tailwindcss.com/docs/text-decoration-thickness\n       */\n      'text-decoration-thickness': [{\n        decoration: [isNumber, 'from-font', 'auto', isArbitraryVariable, isArbitraryLength]\n      }],\n      /**\n       * Text Decoration Color\n       * @see https://tailwindcss.com/docs/text-decoration-color\n       */\n      'text-decoration-color': [{\n        decoration: scaleColor()\n      }],\n      /**\n       * Text Underline Offset\n       * @see https://tailwindcss.com/docs/text-underline-offset\n       */\n      'underline-offset': [{\n        'underline-offset': [isNumber, 'auto', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Text Transform\n       * @see https://tailwindcss.com/docs/text-transform\n       */\n      'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n      /**\n       * Text Overflow\n       * @see https://tailwindcss.com/docs/text-overflow\n       */\n      'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n      /**\n       * Text Wrap\n       * @see https://tailwindcss.com/docs/text-wrap\n       */\n      'text-wrap': [{\n        text: ['wrap', 'nowrap', 'balance', 'pretty']\n      }],\n      /**\n       * Text Indent\n       * @see https://tailwindcss.com/docs/text-indent\n       */\n      indent: [{\n        indent: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Vertical Alignment\n       * @see https://tailwindcss.com/docs/vertical-align\n       */\n      'vertical-align': [{\n        align: ['baseline', 'top', 'middle', 'bottom', 'text-top', 'text-bottom', 'sub', 'super', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Whitespace\n       * @see https://tailwindcss.com/docs/whitespace\n       */\n      whitespace: [{\n        whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces']\n      }],\n      /**\n       * Word Break\n       * @see https://tailwindcss.com/docs/word-break\n       */\n      break: [{\n        break: ['normal', 'words', 'all', 'keep']\n      }],\n      /**\n       * Overflow Wrap\n       * @see https://tailwindcss.com/docs/overflow-wrap\n       */\n      wrap: [{\n        wrap: ['break-word', 'anywhere', 'normal']\n      }],\n      /**\n       * Hyphens\n       * @see https://tailwindcss.com/docs/hyphens\n       */\n      hyphens: [{\n        hyphens: ['none', 'manual', 'auto']\n      }],\n      /**\n       * Content\n       * @see https://tailwindcss.com/docs/content\n       */\n      content: [{\n        content: ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      // -------------------\n      // --- Backgrounds ---\n      // -------------------\n      /**\n       * Background Attachment\n       * @see https://tailwindcss.com/docs/background-attachment\n       */\n      'bg-attachment': [{\n        bg: ['fixed', 'local', 'scroll']\n      }],\n      /**\n       * Background Clip\n       * @see https://tailwindcss.com/docs/background-clip\n       */\n      'bg-clip': [{\n        'bg-clip': ['border', 'padding', 'content', 'text']\n      }],\n      /**\n       * Background Origin\n       * @see https://tailwindcss.com/docs/background-origin\n       */\n      'bg-origin': [{\n        'bg-origin': ['border', 'padding', 'content']\n      }],\n      /**\n       * Background Position\n       * @see https://tailwindcss.com/docs/background-position\n       */\n      'bg-position': [{\n        bg: scaleBgPosition()\n      }],\n      /**\n       * Background Repeat\n       * @see https://tailwindcss.com/docs/background-repeat\n       */\n      'bg-repeat': [{\n        bg: scaleBgRepeat()\n      }],\n      /**\n       * Background Size\n       * @see https://tailwindcss.com/docs/background-size\n       */\n      'bg-size': [{\n        bg: scaleBgSize()\n      }],\n      /**\n       * Background Image\n       * @see https://tailwindcss.com/docs/background-image\n       */\n      'bg-image': [{\n        bg: ['none', {\n          linear: [{\n            to: ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\n          }, isInteger, isArbitraryVariable, isArbitraryValue],\n          radial: ['', isArbitraryVariable, isArbitraryValue],\n          conic: [isInteger, isArbitraryVariable, isArbitraryValue]\n        }, isArbitraryVariableImage, isArbitraryImage]\n      }],\n      /**\n       * Background Color\n       * @see https://tailwindcss.com/docs/background-color\n       */\n      'bg-color': [{\n        bg: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops From Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from-pos': [{\n        from: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops Via Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via-pos': [{\n        via: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops To Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to-pos': [{\n        to: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops From\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from': [{\n        from: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops Via\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via': [{\n        via: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops To\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to': [{\n        to: scaleColor()\n      }],\n      // ---------------\n      // --- Borders ---\n      // ---------------\n      /**\n       * Border Radius\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      rounded: [{\n        rounded: scaleRadius()\n      }],\n      /**\n       * Border Radius Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-s': [{\n        'rounded-s': scaleRadius()\n      }],\n      /**\n       * Border Radius End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-e': [{\n        'rounded-e': scaleRadius()\n      }],\n      /**\n       * Border Radius Top\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-t': [{\n        'rounded-t': scaleRadius()\n      }],\n      /**\n       * Border Radius Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-r': [{\n        'rounded-r': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-b': [{\n        'rounded-b': scaleRadius()\n      }],\n      /**\n       * Border Radius Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-l': [{\n        'rounded-l': scaleRadius()\n      }],\n      /**\n       * Border Radius Start Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ss': [{\n        'rounded-ss': scaleRadius()\n      }],\n      /**\n       * Border Radius Start End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-se': [{\n        'rounded-se': scaleRadius()\n      }],\n      /**\n       * Border Radius End End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ee': [{\n        'rounded-ee': scaleRadius()\n      }],\n      /**\n       * Border Radius End Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-es': [{\n        'rounded-es': scaleRadius()\n      }],\n      /**\n       * Border Radius Top Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tl': [{\n        'rounded-tl': scaleRadius()\n      }],\n      /**\n       * Border Radius Top Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tr': [{\n        'rounded-tr': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-br': [{\n        'rounded-br': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-bl': [{\n        'rounded-bl': scaleRadius()\n      }],\n      /**\n       * Border Width\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w': [{\n        border: scaleBorderWidth()\n      }],\n      /**\n       * Border Width X\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-x': [{\n        'border-x': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Y\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-y': [{\n        'border-y': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Start\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-s': [{\n        'border-s': scaleBorderWidth()\n      }],\n      /**\n       * Border Width End\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-e': [{\n        'border-e': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Top\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-t': [{\n        'border-t': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Right\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-r': [{\n        'border-r': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Bottom\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-b': [{\n        'border-b': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Left\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-l': [{\n        'border-l': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width X\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-x': [{\n        'divide-x': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width X Reverse\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-x-reverse': ['divide-x-reverse'],\n      /**\n       * Divide Width Y\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-y': [{\n        'divide-y': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width Y Reverse\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-y-reverse': ['divide-y-reverse'],\n      /**\n       * Border Style\n       * @see https://tailwindcss.com/docs/border-style\n       */\n      'border-style': [{\n        border: [...scaleLineStyle(), 'hidden', 'none']\n      }],\n      /**\n       * Divide Style\n       * @see https://tailwindcss.com/docs/border-style#setting-the-divider-style\n       */\n      'divide-style': [{\n        divide: [...scaleLineStyle(), 'hidden', 'none']\n      }],\n      /**\n       * Border Color\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color': [{\n        border: scaleColor()\n      }],\n      /**\n       * Border Color X\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-x': [{\n        'border-x': scaleColor()\n      }],\n      /**\n       * Border Color Y\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-y': [{\n        'border-y': scaleColor()\n      }],\n      /**\n       * Border Color S\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-s': [{\n        'border-s': scaleColor()\n      }],\n      /**\n       * Border Color E\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-e': [{\n        'border-e': scaleColor()\n      }],\n      /**\n       * Border Color Top\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-t': [{\n        'border-t': scaleColor()\n      }],\n      /**\n       * Border Color Right\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-r': [{\n        'border-r': scaleColor()\n      }],\n      /**\n       * Border Color Bottom\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-b': [{\n        'border-b': scaleColor()\n      }],\n      /**\n       * Border Color Left\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-l': [{\n        'border-l': scaleColor()\n      }],\n      /**\n       * Divide Color\n       * @see https://tailwindcss.com/docs/divide-color\n       */\n      'divide-color': [{\n        divide: scaleColor()\n      }],\n      /**\n       * Outline Style\n       * @see https://tailwindcss.com/docs/outline-style\n       */\n      'outline-style': [{\n        outline: [...scaleLineStyle(), 'none', 'hidden']\n      }],\n      /**\n       * Outline Offset\n       * @see https://tailwindcss.com/docs/outline-offset\n       */\n      'outline-offset': [{\n        'outline-offset': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Outline Width\n       * @see https://tailwindcss.com/docs/outline-width\n       */\n      'outline-w': [{\n        outline: ['', isNumber, isArbitraryVariableLength, isArbitraryLength]\n      }],\n      /**\n       * Outline Color\n       * @see https://tailwindcss.com/docs/outline-color\n       */\n      'outline-color': [{\n        outline: scaleColor()\n      }],\n      // ---------------\n      // --- Effects ---\n      // ---------------\n      /**\n       * Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow\n       */\n      shadow: [{\n        shadow: [\n        // Deprecated since Tailwind CSS v4.0.0\n        '', 'none', themeShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color\n       */\n      'shadow-color': [{\n        shadow: scaleColor()\n      }],\n      /**\n       * Inset Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-shadow\n       */\n      'inset-shadow': [{\n        'inset-shadow': ['none', themeInsetShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Inset Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-shadow-color\n       */\n      'inset-shadow-color': [{\n        'inset-shadow': scaleColor()\n      }],\n      /**\n       * Ring Width\n       * @see https://tailwindcss.com/docs/box-shadow#adding-a-ring\n       */\n      'ring-w': [{\n        ring: scaleBorderWidth()\n      }],\n      /**\n       * Ring Width Inset\n       * @see https://v3.tailwindcss.com/docs/ring-width#inset-rings\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-w-inset': ['ring-inset'],\n      /**\n       * Ring Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-ring-color\n       */\n      'ring-color': [{\n        ring: scaleColor()\n      }],\n      /**\n       * Ring Offset Width\n       * @see https://v3.tailwindcss.com/docs/ring-offset-width\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-offset-w': [{\n        'ring-offset': [isNumber, isArbitraryLength]\n      }],\n      /**\n       * Ring Offset Color\n       * @see https://v3.tailwindcss.com/docs/ring-offset-color\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-offset-color': [{\n        'ring-offset': scaleColor()\n      }],\n      /**\n       * Inset Ring Width\n       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-ring\n       */\n      'inset-ring-w': [{\n        'inset-ring': scaleBorderWidth()\n      }],\n      /**\n       * Inset Ring Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-ring-color\n       */\n      'inset-ring-color': [{\n        'inset-ring': scaleColor()\n      }],\n      /**\n       * Text Shadow\n       * @see https://tailwindcss.com/docs/text-shadow\n       */\n      'text-shadow': [{\n        'text-shadow': ['none', themeTextShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Text Shadow Color\n       * @see https://tailwindcss.com/docs/text-shadow#setting-the-shadow-color\n       */\n      'text-shadow-color': [{\n        'text-shadow': scaleColor()\n      }],\n      /**\n       * Opacity\n       * @see https://tailwindcss.com/docs/opacity\n       */\n      opacity: [{\n        opacity: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Mix Blend Mode\n       * @see https://tailwindcss.com/docs/mix-blend-mode\n       */\n      'mix-blend': [{\n        'mix-blend': [...scaleBlendMode(), 'plus-darker', 'plus-lighter']\n      }],\n      /**\n       * Background Blend Mode\n       * @see https://tailwindcss.com/docs/background-blend-mode\n       */\n      'bg-blend': [{\n        'bg-blend': scaleBlendMode()\n      }],\n      /**\n       * Mask Clip\n       * @see https://tailwindcss.com/docs/mask-clip\n       */\n      'mask-clip': [{\n        'mask-clip': ['border', 'padding', 'content', 'fill', 'stroke', 'view']\n      }, 'mask-no-clip'],\n      /**\n       * Mask Composite\n       * @see https://tailwindcss.com/docs/mask-composite\n       */\n      'mask-composite': [{\n        mask: ['add', 'subtract', 'intersect', 'exclude']\n      }],\n      /**\n       * Mask Image\n       * @see https://tailwindcss.com/docs/mask-image\n       */\n      'mask-image-linear-pos': [{\n        'mask-linear': [isNumber]\n      }],\n      'mask-image-linear-from-pos': [{\n        'mask-linear-from': scaleMaskImagePosition()\n      }],\n      'mask-image-linear-to-pos': [{\n        'mask-linear-to': scaleMaskImagePosition()\n      }],\n      'mask-image-linear-from-color': [{\n        'mask-linear-from': scaleColor()\n      }],\n      'mask-image-linear-to-color': [{\n        'mask-linear-to': scaleColor()\n      }],\n      'mask-image-t-from-pos': [{\n        'mask-t-from': scaleMaskImagePosition()\n      }],\n      'mask-image-t-to-pos': [{\n        'mask-t-to': scaleMaskImagePosition()\n      }],\n      'mask-image-t-from-color': [{\n        'mask-t-from': scaleColor()\n      }],\n      'mask-image-t-to-color': [{\n        'mask-t-to': scaleColor()\n      }],\n      'mask-image-r-from-pos': [{\n        'mask-r-from': scaleMaskImagePosition()\n      }],\n      'mask-image-r-to-pos': [{\n        'mask-r-to': scaleMaskImagePosition()\n      }],\n      'mask-image-r-from-color': [{\n        'mask-r-from': scaleColor()\n      }],\n      'mask-image-r-to-color': [{\n        'mask-r-to': scaleColor()\n      }],\n      'mask-image-b-from-pos': [{\n        'mask-b-from': scaleMaskImagePosition()\n      }],\n      'mask-image-b-to-pos': [{\n        'mask-b-to': scaleMaskImagePosition()\n      }],\n      'mask-image-b-from-color': [{\n        'mask-b-from': scaleColor()\n      }],\n      'mask-image-b-to-color': [{\n        'mask-b-to': scaleColor()\n      }],\n      'mask-image-l-from-pos': [{\n        'mask-l-from': scaleMaskImagePosition()\n      }],\n      'mask-image-l-to-pos': [{\n        'mask-l-to': scaleMaskImagePosition()\n      }],\n      'mask-image-l-from-color': [{\n        'mask-l-from': scaleColor()\n      }],\n      'mask-image-l-to-color': [{\n        'mask-l-to': scaleColor()\n      }],\n      'mask-image-x-from-pos': [{\n        'mask-x-from': scaleMaskImagePosition()\n      }],\n      'mask-image-x-to-pos': [{\n        'mask-x-to': scaleMaskImagePosition()\n      }],\n      'mask-image-x-from-color': [{\n        'mask-x-from': scaleColor()\n      }],\n      'mask-image-x-to-color': [{\n        'mask-x-to': scaleColor()\n      }],\n      'mask-image-y-from-pos': [{\n        'mask-y-from': scaleMaskImagePosition()\n      }],\n      'mask-image-y-to-pos': [{\n        'mask-y-to': scaleMaskImagePosition()\n      }],\n      'mask-image-y-from-color': [{\n        'mask-y-from': scaleColor()\n      }],\n      'mask-image-y-to-color': [{\n        'mask-y-to': scaleColor()\n      }],\n      'mask-image-radial': [{\n        'mask-radial': [isArbitraryVariable, isArbitraryValue]\n      }],\n      'mask-image-radial-from-pos': [{\n        'mask-radial-from': scaleMaskImagePosition()\n      }],\n      'mask-image-radial-to-pos': [{\n        'mask-radial-to': scaleMaskImagePosition()\n      }],\n      'mask-image-radial-from-color': [{\n        'mask-radial-from': scaleColor()\n      }],\n      'mask-image-radial-to-color': [{\n        'mask-radial-to': scaleColor()\n      }],\n      'mask-image-radial-shape': [{\n        'mask-radial': ['circle', 'ellipse']\n      }],\n      'mask-image-radial-size': [{\n        'mask-radial': [{\n          closest: ['side', 'corner'],\n          farthest: ['side', 'corner']\n        }]\n      }],\n      'mask-image-radial-pos': [{\n        'mask-radial-at': scalePosition()\n      }],\n      'mask-image-conic-pos': [{\n        'mask-conic': [isNumber]\n      }],\n      'mask-image-conic-from-pos': [{\n        'mask-conic-from': scaleMaskImagePosition()\n      }],\n      'mask-image-conic-to-pos': [{\n        'mask-conic-to': scaleMaskImagePosition()\n      }],\n      'mask-image-conic-from-color': [{\n        'mask-conic-from': scaleColor()\n      }],\n      'mask-image-conic-to-color': [{\n        'mask-conic-to': scaleColor()\n      }],\n      /**\n       * Mask Mode\n       * @see https://tailwindcss.com/docs/mask-mode\n       */\n      'mask-mode': [{\n        mask: ['alpha', 'luminance', 'match']\n      }],\n      /**\n       * Mask Origin\n       * @see https://tailwindcss.com/docs/mask-origin\n       */\n      'mask-origin': [{\n        'mask-origin': ['border', 'padding', 'content', 'fill', 'stroke', 'view']\n      }],\n      /**\n       * Mask Position\n       * @see https://tailwindcss.com/docs/mask-position\n       */\n      'mask-position': [{\n        mask: scaleBgPosition()\n      }],\n      /**\n       * Mask Repeat\n       * @see https://tailwindcss.com/docs/mask-repeat\n       */\n      'mask-repeat': [{\n        mask: scaleBgRepeat()\n      }],\n      /**\n       * Mask Size\n       * @see https://tailwindcss.com/docs/mask-size\n       */\n      'mask-size': [{\n        mask: scaleBgSize()\n      }],\n      /**\n       * Mask Type\n       * @see https://tailwindcss.com/docs/mask-type\n       */\n      'mask-type': [{\n        'mask-type': ['alpha', 'luminance']\n      }],\n      /**\n       * Mask Image\n       * @see https://tailwindcss.com/docs/mask-image\n       */\n      'mask-image': [{\n        mask: ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      // ---------------\n      // --- Filters ---\n      // ---------------\n      /**\n       * Filter\n       * @see https://tailwindcss.com/docs/filter\n       */\n      filter: [{\n        filter: [\n        // Deprecated since Tailwind CSS v3.0.0\n        '', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Blur\n       * @see https://tailwindcss.com/docs/blur\n       */\n      blur: [{\n        blur: scaleBlur()\n      }],\n      /**\n       * Brightness\n       * @see https://tailwindcss.com/docs/brightness\n       */\n      brightness: [{\n        brightness: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Contrast\n       * @see https://tailwindcss.com/docs/contrast\n       */\n      contrast: [{\n        contrast: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Drop Shadow\n       * @see https://tailwindcss.com/docs/drop-shadow\n       */\n      'drop-shadow': [{\n        'drop-shadow': [\n        // Deprecated since Tailwind CSS v4.0.0\n        '', 'none', themeDropShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Drop Shadow Color\n       * @see https://tailwindcss.com/docs/filter-drop-shadow#setting-the-shadow-color\n       */\n      'drop-shadow-color': [{\n        'drop-shadow': scaleColor()\n      }],\n      /**\n       * Grayscale\n       * @see https://tailwindcss.com/docs/grayscale\n       */\n      grayscale: [{\n        grayscale: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Hue Rotate\n       * @see https://tailwindcss.com/docs/hue-rotate\n       */\n      'hue-rotate': [{\n        'hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Invert\n       * @see https://tailwindcss.com/docs/invert\n       */\n      invert: [{\n        invert: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Saturate\n       * @see https://tailwindcss.com/docs/saturate\n       */\n      saturate: [{\n        saturate: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Sepia\n       * @see https://tailwindcss.com/docs/sepia\n       */\n      sepia: [{\n        sepia: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Filter\n       * @see https://tailwindcss.com/docs/backdrop-filter\n       */\n      'backdrop-filter': [{\n        'backdrop-filter': [\n        // Deprecated since Tailwind CSS v3.0.0\n        '', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Blur\n       * @see https://tailwindcss.com/docs/backdrop-blur\n       */\n      'backdrop-blur': [{\n        'backdrop-blur': scaleBlur()\n      }],\n      /**\n       * Backdrop Brightness\n       * @see https://tailwindcss.com/docs/backdrop-brightness\n       */\n      'backdrop-brightness': [{\n        'backdrop-brightness': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Contrast\n       * @see https://tailwindcss.com/docs/backdrop-contrast\n       */\n      'backdrop-contrast': [{\n        'backdrop-contrast': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Grayscale\n       * @see https://tailwindcss.com/docs/backdrop-grayscale\n       */\n      'backdrop-grayscale': [{\n        'backdrop-grayscale': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Hue Rotate\n       * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n       */\n      'backdrop-hue-rotate': [{\n        'backdrop-hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Invert\n       * @see https://tailwindcss.com/docs/backdrop-invert\n       */\n      'backdrop-invert': [{\n        'backdrop-invert': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Opacity\n       * @see https://tailwindcss.com/docs/backdrop-opacity\n       */\n      'backdrop-opacity': [{\n        'backdrop-opacity': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Saturate\n       * @see https://tailwindcss.com/docs/backdrop-saturate\n       */\n      'backdrop-saturate': [{\n        'backdrop-saturate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Sepia\n       * @see https://tailwindcss.com/docs/backdrop-sepia\n       */\n      'backdrop-sepia': [{\n        'backdrop-sepia': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      // --------------\n      // --- Tables ---\n      // --------------\n      /**\n       * Border Collapse\n       * @see https://tailwindcss.com/docs/border-collapse\n       */\n      'border-collapse': [{\n        border: ['collapse', 'separate']\n      }],\n      /**\n       * Border Spacing\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing': [{\n        'border-spacing': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Border Spacing X\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-x': [{\n        'border-spacing-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Border Spacing Y\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-y': [{\n        'border-spacing-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Table Layout\n       * @see https://tailwindcss.com/docs/table-layout\n       */\n      'table-layout': [{\n        table: ['auto', 'fixed']\n      }],\n      /**\n       * Caption Side\n       * @see https://tailwindcss.com/docs/caption-side\n       */\n      caption: [{\n        caption: ['top', 'bottom']\n      }],\n      // ---------------------------------\n      // --- Transitions and Animation ---\n      // ---------------------------------\n      /**\n       * Transition Property\n       * @see https://tailwindcss.com/docs/transition-property\n       */\n      transition: [{\n        transition: ['', 'all', 'colors', 'opacity', 'shadow', 'transform', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Behavior\n       * @see https://tailwindcss.com/docs/transition-behavior\n       */\n      'transition-behavior': [{\n        transition: ['normal', 'discrete']\n      }],\n      /**\n       * Transition Duration\n       * @see https://tailwindcss.com/docs/transition-duration\n       */\n      duration: [{\n        duration: [isNumber, 'initial', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Timing Function\n       * @see https://tailwindcss.com/docs/transition-timing-function\n       */\n      ease: [{\n        ease: ['linear', 'initial', themeEase, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Delay\n       * @see https://tailwindcss.com/docs/transition-delay\n       */\n      delay: [{\n        delay: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Animation\n       * @see https://tailwindcss.com/docs/animation\n       */\n      animate: [{\n        animate: ['none', themeAnimate, isArbitraryVariable, isArbitraryValue]\n      }],\n      // ------------------\n      // --- Transforms ---\n      // ------------------\n      /**\n       * Backface Visibility\n       * @see https://tailwindcss.com/docs/backface-visibility\n       */\n      backface: [{\n        backface: ['hidden', 'visible']\n      }],\n      /**\n       * Perspective\n       * @see https://tailwindcss.com/docs/perspective\n       */\n      perspective: [{\n        perspective: [themePerspective, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Perspective Origin\n       * @see https://tailwindcss.com/docs/perspective-origin\n       */\n      'perspective-origin': [{\n        'perspective-origin': scalePositionWithArbitrary()\n      }],\n      /**\n       * Rotate\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      rotate: [{\n        rotate: scaleRotate()\n      }],\n      /**\n       * Rotate X\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-x': [{\n        'rotate-x': scaleRotate()\n      }],\n      /**\n       * Rotate Y\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-y': [{\n        'rotate-y': scaleRotate()\n      }],\n      /**\n       * Rotate Z\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-z': [{\n        'rotate-z': scaleRotate()\n      }],\n      /**\n       * Scale\n       * @see https://tailwindcss.com/docs/scale\n       */\n      scale: [{\n        scale: scaleScale()\n      }],\n      /**\n       * Scale X\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-x': [{\n        'scale-x': scaleScale()\n      }],\n      /**\n       * Scale Y\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-y': [{\n        'scale-y': scaleScale()\n      }],\n      /**\n       * Scale Z\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-z': [{\n        'scale-z': scaleScale()\n      }],\n      /**\n       * Scale 3D\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-3d': ['scale-3d'],\n      /**\n       * Skew\n       * @see https://tailwindcss.com/docs/skew\n       */\n      skew: [{\n        skew: scaleSkew()\n      }],\n      /**\n       * Skew X\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-x': [{\n        'skew-x': scaleSkew()\n      }],\n      /**\n       * Skew Y\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-y': [{\n        'skew-y': scaleSkew()\n      }],\n      /**\n       * Transform\n       * @see https://tailwindcss.com/docs/transform\n       */\n      transform: [{\n        transform: [isArbitraryVariable, isArbitraryValue, '', 'none', 'gpu', 'cpu']\n      }],\n      /**\n       * Transform Origin\n       * @see https://tailwindcss.com/docs/transform-origin\n       */\n      'transform-origin': [{\n        origin: scalePositionWithArbitrary()\n      }],\n      /**\n       * Transform Style\n       * @see https://tailwindcss.com/docs/transform-style\n       */\n      'transform-style': [{\n        transform: ['3d', 'flat']\n      }],\n      /**\n       * Translate\n       * @see https://tailwindcss.com/docs/translate\n       */\n      translate: [{\n        translate: scaleTranslate()\n      }],\n      /**\n       * Translate X\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-x': [{\n        'translate-x': scaleTranslate()\n      }],\n      /**\n       * Translate Y\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-y': [{\n        'translate-y': scaleTranslate()\n      }],\n      /**\n       * Translate Z\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-z': [{\n        'translate-z': scaleTranslate()\n      }],\n      /**\n       * Translate None\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-none': ['translate-none'],\n      // ---------------------\n      // --- Interactivity ---\n      // ---------------------\n      /**\n       * Accent Color\n       * @see https://tailwindcss.com/docs/accent-color\n       */\n      accent: [{\n        accent: scaleColor()\n      }],\n      /**\n       * Appearance\n       * @see https://tailwindcss.com/docs/appearance\n       */\n      appearance: [{\n        appearance: ['none', 'auto']\n      }],\n      /**\n       * Caret Color\n       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n       */\n      'caret-color': [{\n        caret: scaleColor()\n      }],\n      /**\n       * Color Scheme\n       * @see https://tailwindcss.com/docs/color-scheme\n       */\n      'color-scheme': [{\n        scheme: ['normal', 'dark', 'light', 'light-dark', 'only-dark', 'only-light']\n      }],\n      /**\n       * Cursor\n       * @see https://tailwindcss.com/docs/cursor\n       */\n      cursor: [{\n        cursor: ['auto', 'default', 'pointer', 'wait', 'text', 'move', 'help', 'not-allowed', 'none', 'context-menu', 'progress', 'cell', 'crosshair', 'vertical-text', 'alias', 'copy', 'no-drop', 'grab', 'grabbing', 'all-scroll', 'col-resize', 'row-resize', 'n-resize', 'e-resize', 's-resize', 'w-resize', 'ne-resize', 'nw-resize', 'se-resize', 'sw-resize', 'ew-resize', 'ns-resize', 'nesw-resize', 'nwse-resize', 'zoom-in', 'zoom-out', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Field Sizing\n       * @see https://tailwindcss.com/docs/field-sizing\n       */\n      'field-sizing': [{\n        'field-sizing': ['fixed', 'content']\n      }],\n      /**\n       * Pointer Events\n       * @see https://tailwindcss.com/docs/pointer-events\n       */\n      'pointer-events': [{\n        'pointer-events': ['auto', 'none']\n      }],\n      /**\n       * Resize\n       * @see https://tailwindcss.com/docs/resize\n       */\n      resize: [{\n        resize: ['none', '', 'y', 'x']\n      }],\n      /**\n       * Scroll Behavior\n       * @see https://tailwindcss.com/docs/scroll-behavior\n       */\n      'scroll-behavior': [{\n        scroll: ['auto', 'smooth']\n      }],\n      /**\n       * Scroll Margin\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-m': [{\n        'scroll-m': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin X\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mx': [{\n        'scroll-mx': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Y\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-my': [{\n        'scroll-my': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Start\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ms': [{\n        'scroll-ms': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin End\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-me': [{\n        'scroll-me': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Top\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mt': [{\n        'scroll-mt': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Right\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mr': [{\n        'scroll-mr': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Bottom\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mb': [{\n        'scroll-mb': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Left\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ml': [{\n        'scroll-ml': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-p': [{\n        'scroll-p': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding X\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-px': [{\n        'scroll-px': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Y\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-py': [{\n        'scroll-py': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Start\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-ps': [{\n        'scroll-ps': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding End\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pe': [{\n        'scroll-pe': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Top\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pt': [{\n        'scroll-pt': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Right\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pr': [{\n        'scroll-pr': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Bottom\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pb': [{\n        'scroll-pb': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Left\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pl': [{\n        'scroll-pl': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Snap Align\n       * @see https://tailwindcss.com/docs/scroll-snap-align\n       */\n      'snap-align': [{\n        snap: ['start', 'end', 'center', 'align-none']\n      }],\n      /**\n       * Scroll Snap Stop\n       * @see https://tailwindcss.com/docs/scroll-snap-stop\n       */\n      'snap-stop': [{\n        snap: ['normal', 'always']\n      }],\n      /**\n       * Scroll Snap Type\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-type': [{\n        snap: ['none', 'x', 'y', 'both']\n      }],\n      /**\n       * Scroll Snap Type Strictness\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-strictness': [{\n        snap: ['mandatory', 'proximity']\n      }],\n      /**\n       * Touch Action\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      touch: [{\n        touch: ['auto', 'none', 'manipulation']\n      }],\n      /**\n       * Touch Action X\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-x': [{\n        'touch-pan': ['x', 'left', 'right']\n      }],\n      /**\n       * Touch Action Y\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-y': [{\n        'touch-pan': ['y', 'up', 'down']\n      }],\n      /**\n       * Touch Action Pinch Zoom\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-pz': ['touch-pinch-zoom'],\n      /**\n       * User Select\n       * @see https://tailwindcss.com/docs/user-select\n       */\n      select: [{\n        select: ['none', 'text', 'all', 'auto']\n      }],\n      /**\n       * Will Change\n       * @see https://tailwindcss.com/docs/will-change\n       */\n      'will-change': [{\n        'will-change': ['auto', 'scroll', 'contents', 'transform', isArbitraryVariable, isArbitraryValue]\n      }],\n      // -----------\n      // --- SVG ---\n      // -----------\n      /**\n       * Fill\n       * @see https://tailwindcss.com/docs/fill\n       */\n      fill: [{\n        fill: ['none', ...scaleColor()]\n      }],\n      /**\n       * Stroke Width\n       * @see https://tailwindcss.com/docs/stroke-width\n       */\n      'stroke-w': [{\n        stroke: [isNumber, isArbitraryVariableLength, isArbitraryLength, isArbitraryNumber]\n      }],\n      /**\n       * Stroke\n       * @see https://tailwindcss.com/docs/stroke\n       */\n      stroke: [{\n        stroke: ['none', ...scaleColor()]\n      }],\n      // ---------------------\n      // --- Accessibility ---\n      // ---------------------\n      /**\n       * Forced Color Adjust\n       * @see https://tailwindcss.com/docs/forced-color-adjust\n       */\n      'forced-color-adjust': [{\n        'forced-color-adjust': ['auto', 'none']\n      }]\n    },\n    conflictingClassGroups: {\n      overflow: ['overflow-x', 'overflow-y'],\n      overscroll: ['overscroll-x', 'overscroll-y'],\n      inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n      'inset-x': ['right', 'left'],\n      'inset-y': ['top', 'bottom'],\n      flex: ['basis', 'grow', 'shrink'],\n      gap: ['gap-x', 'gap-y'],\n      p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n      px: ['pr', 'pl'],\n      py: ['pt', 'pb'],\n      m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n      mx: ['mr', 'ml'],\n      my: ['mt', 'mb'],\n      size: ['w', 'h'],\n      'font-size': ['leading'],\n      'fvn-normal': ['fvn-ordinal', 'fvn-slashed-zero', 'fvn-figure', 'fvn-spacing', 'fvn-fraction'],\n      'fvn-ordinal': ['fvn-normal'],\n      'fvn-slashed-zero': ['fvn-normal'],\n      'fvn-figure': ['fvn-normal'],\n      'fvn-spacing': ['fvn-normal'],\n      'fvn-fraction': ['fvn-normal'],\n      'line-clamp': ['display', 'overflow'],\n      rounded: ['rounded-s', 'rounded-e', 'rounded-t', 'rounded-r', 'rounded-b', 'rounded-l', 'rounded-ss', 'rounded-se', 'rounded-ee', 'rounded-es', 'rounded-tl', 'rounded-tr', 'rounded-br', 'rounded-bl'],\n      'rounded-s': ['rounded-ss', 'rounded-es'],\n      'rounded-e': ['rounded-se', 'rounded-ee'],\n      'rounded-t': ['rounded-tl', 'rounded-tr'],\n      'rounded-r': ['rounded-tr', 'rounded-br'],\n      'rounded-b': ['rounded-br', 'rounded-bl'],\n      'rounded-l': ['rounded-tl', 'rounded-bl'],\n      'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n      'border-w': ['border-w-x', 'border-w-y', 'border-w-s', 'border-w-e', 'border-w-t', 'border-w-r', 'border-w-b', 'border-w-l'],\n      'border-w-x': ['border-w-r', 'border-w-l'],\n      'border-w-y': ['border-w-t', 'border-w-b'],\n      'border-color': ['border-color-x', 'border-color-y', 'border-color-s', 'border-color-e', 'border-color-t', 'border-color-r', 'border-color-b', 'border-color-l'],\n      'border-color-x': ['border-color-r', 'border-color-l'],\n      'border-color-y': ['border-color-t', 'border-color-b'],\n      translate: ['translate-x', 'translate-y', 'translate-none'],\n      'translate-none': ['translate', 'translate-x', 'translate-y', 'translate-z'],\n      'scroll-m': ['scroll-mx', 'scroll-my', 'scroll-ms', 'scroll-me', 'scroll-mt', 'scroll-mr', 'scroll-mb', 'scroll-ml'],\n      'scroll-mx': ['scroll-mr', 'scroll-ml'],\n      'scroll-my': ['scroll-mt', 'scroll-mb'],\n      'scroll-p': ['scroll-px', 'scroll-py', 'scroll-ps', 'scroll-pe', 'scroll-pt', 'scroll-pr', 'scroll-pb', 'scroll-pl'],\n      'scroll-px': ['scroll-pr', 'scroll-pl'],\n      'scroll-py': ['scroll-pt', 'scroll-pb'],\n      touch: ['touch-x', 'touch-y', 'touch-pz'],\n      'touch-x': ['touch'],\n      'touch-y': ['touch'],\n      'touch-pz': ['touch']\n    },\n    conflictingClassGroupModifiers: {\n      'font-size': ['leading']\n    },\n    orderSensitiveModifiers: ['*', '**', 'after', 'backdrop', 'before', 'details-content', 'file', 'first-letter', 'first-line', 'marker', 'placeholder', 'selection']\n  };\n};\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nconst mergeConfigs = (baseConfig, {\n  cacheSize,\n  prefix,\n  experimentalParseClassName,\n  extend = {},\n  override = {}\n}) => {\n  overrideProperty(baseConfig, 'cacheSize', cacheSize);\n  overrideProperty(baseConfig, 'prefix', prefix);\n  overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName);\n  overrideConfigProperties(baseConfig.theme, override.theme);\n  overrideConfigProperties(baseConfig.classGroups, override.classGroups);\n  overrideConfigProperties(baseConfig.conflictingClassGroups, override.conflictingClassGroups);\n  overrideConfigProperties(baseConfig.conflictingClassGroupModifiers, override.conflictingClassGroupModifiers);\n  overrideProperty(baseConfig, 'orderSensitiveModifiers', override.orderSensitiveModifiers);\n  mergeConfigProperties(baseConfig.theme, extend.theme);\n  mergeConfigProperties(baseConfig.classGroups, extend.classGroups);\n  mergeConfigProperties(baseConfig.conflictingClassGroups, extend.conflictingClassGroups);\n  mergeConfigProperties(baseConfig.conflictingClassGroupModifiers, extend.conflictingClassGroupModifiers);\n  mergeArrayProperties(baseConfig, extend, 'orderSensitiveModifiers');\n  return baseConfig;\n};\nconst overrideProperty = (baseObject, overrideKey, overrideValue) => {\n  if (overrideValue !== undefined) {\n    baseObject[overrideKey] = overrideValue;\n  }\n};\nconst overrideConfigProperties = (baseObject, overrideObject) => {\n  if (overrideObject) {\n    for (const key in overrideObject) {\n      overrideProperty(baseObject, key, overrideObject[key]);\n    }\n  }\n};\nconst mergeConfigProperties = (baseObject, mergeObject) => {\n  if (mergeObject) {\n    for (const key in mergeObject) {\n      mergeArrayProperties(baseObject, mergeObject, key);\n    }\n  }\n};\nconst mergeArrayProperties = (baseObject, mergeObject, key) => {\n  const mergeValue = mergeObject[key];\n  if (mergeValue !== undefined) {\n    baseObject[key] = baseObject[key] ? baseObject[key].concat(mergeValue) : mergeValue;\n  }\n};\nconst extendTailwindMerge = (configExtension, ...createConfig) => typeof configExtension === 'function' ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig) : createTailwindMerge(() => mergeConfigs(getDefaultConfig(), configExtension), ...createConfig);\nconst twMerge = /*#__PURE__*/createTailwindMerge(getDefaultConfig);\nexport { createTailwindMerge, extendTailwindMerge, fromTheme, getDefaultConfig, mergeConfigs, twJoin, twMerge, validators };\n//# sourceMappingURL=bundle-mjs.mjs.map\n","import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport const cmp = (a: string, b: string) => {\n  const pa = a.split('.').map((n) => +n || 0)\n  const pb = b.split('.').map((n) => +n || 0)\n  for (let i = 0; i < 3; i++) {\n    const paVal = pa[i] ?? 0\n    const pbVal = pb[i] ?? 0\n    if (paVal < pbVal) return -1\n    if (paVal > pbVal) return 1\n  }\n  return 0\n}\n","import React from 'react';\nimport { cn } from '../../../lib/utils';\n\ninterface HomeCardProps extends React.HTMLAttributes<HTMLElement> {\n  variant?: 'default' | 'hero' | 'ai';\n  children: React.ReactNode;\n}\n\nexport const HomeCard = React.forwardRef<HTMLElement, HomeCardProps>(\n  ({ className, variant = 'default', children, ...props }, ref) => {\n    const baseStyles = \"transition-all duration-200 bg-white border border-border-light\";\n    \n    const variants = {\n      default: \"mh-card p-4 md:p-6\",\n      hero: \"mh-card mh-card--hero p-6 md:p-10 bg-gradient-to-br from-white to-brand-50\",\n      ai: \"mh-ai-card\"\n    };\n\n    return (\n      <section\n        ref={ref}\n        className={cn(baseStyles, variants[variant], className)}\n        {...props}\n      >\n        {children}\n      </section>\n    );\n  }\n);\n\nHomeCard.displayName = 'HomeCard';\n","import React from 'react';\nimport { CheckCircle2, LucideIcon } from 'lucide-react';\n\ninterface HeroStepProps {\n  id: string;\n  index: number;\n  title: string;\n  desc: string;\n  icon: LucideIcon;\n  isLast: boolean;\n}\n\nexport const HeroStep = React.memo(({ index, title, desc, icon: Icon, isLast }: HeroStepProps) => {\n  return (\n    <div className=\"group relative flex cursor-default items-center gap-4 rounded-xl p-2 transition-colors duration-300 hover:bg-bg-soft md:flex-col md:items-center md:gap-4\">\n      {/* Icon Circle */}\n      <div className=\"relative z-10 shrink-0\">\n        <div className=\"flex size-12 items-center justify-center rounded-full border-2 border-border-light bg-white text-text-muted shadow-sm transition-all duration-300 group-hover:scale-110 group-hover:border-brand group-hover:text-brand\">\n          <Icon size={20} />\n        </div>\n        {/* Step Number Badge */}\n        <div className=\"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-brand text-[10px] font-bold text-white ring-2 ring-white\">\n          {index + 1}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 md:text-center\">\n        <h4 className=\"mb-1 text-base font-black text-text-ink transition-colors group-hover:text-brand\">\n          {title}\n        </h4>\n        <p className=\"text-xs font-medium leading-relaxed text-text-muted\">\n          {desc}\n        </p>\n      </div>\n\n      {/* Mobile Arrow (Visual aid) */}\n      <div className=\"ml-auto text-border-light transition-colors group-hover:text-brand md:hidden\">\n        {!isLast && <CheckCircle2 size={16} className=\"opacity-0 group-hover:opacity-20\"/>}\n      </div>\n    </div>\n  );\n});\n\nHeroStep.displayName = 'HeroStep';\n","import { ShieldCheck, ArrowRight } from 'lucide-react';\nimport MascotHouse from '../../../components/MascotHouse';\nimport { HERO_STEPS } from '../../../constants/data';\nimport { HomeCard } from '../components/HomeCard';\nimport { HeroStep } from '../components/HeroStep';\n\nexport default function HeroAssure() {\n  return (\n    <HomeCard variant=\"hero\" className=\"group/container relative overflow-hidden\">\n      \n      {/* Header Area */}\n      <div className=\"relative z-10 mb-10 flex flex-col items-center gap-6 md:flex-row md:gap-10\">\n        \n        {/* Mascot: Wireframe House */}\n        <div className=\"relative h-32 w-28 shrink-0\">\n             <MascotHouse />\n        </div>\n\n        {/* Text Content */}\n        <div className=\"flex-1 text-center md:text-left\">\n          <div className=\"border-[var(--brand)]/20 mb-3 inline-flex items-center gap-2 rounded-full border bg-[var(--bg-page)] px-3 py-1 text-xs font-bold text-[var(--brand)]\">\n            <ShieldCheck size={14} />\n            <span></span>\n          </div>\n          <h3 className=\"mb-3 text-2xl font-black tracking-tight text-[var(--brand)] md:text-3xl\">\n            \n          </h3>\n          <p className=\"max-w-2xl text-sm font-medium leading-relaxed text-[var(--text-secondary)] md:text-base\">\n            \n            <br className=\"hidden md:block\"/>\n            \n          </p>\n        </div>\n        \n        <a href=\"/#policy\" className=\"hidden shrink-0 items-center gap-2 rounded-xl border-2 border-[var(--brand)] bg-white px-5 py-2.5 text-sm font-bold text-[var(--brand)] shadow-sm transition-all hover:bg-[var(--brand)] hover:text-white md:flex\">\n           <ArrowRight size={16} />\n        </a>\n      </div>\n\n      {/* Process Timeline */}\n      <div className=\"relative mt-4 pl-2 md:pl-0\">\n        \n        {/* Connecting Line (Desktop Horizontal) - Centered at top-8 (32px) to align with 48px circle center + 8px padding */}\n        <div className=\"absolute left-0 top-8 -z-0 hidden h-0.5 w-full bg-border-light md:block\"></div>\n        \n        {/* Connecting Line (Mobile Vertical) - Centered at left-8 (32px) */}\n                {/* Connecting Line (Mobile Vertical) - Centered at left-8 (32px) */}\n        <div className=\"absolute inset-y-0 left-8 -z-0 w-0.5 bg-border-light md:hidden\"></div>\n\n        <div className=\"grid grid-cols-1 gap-6 md:grid-cols-6 md:gap-2\">\n          {HERO_STEPS.map((step, index) => (\n            <HeroStep \n              key={step.id} \n              {...step} \n              index={index} \n              isLast={index === HERO_STEPS.length - 1} \n            />\n          ))}\n        </div>\n      </div>\n    </HomeCard>\n  );\n}\n","import React, { useState, useEffect } from 'react';\n\nexport default function MascotMaiMai() {\n  const [mood, setMood] = useState(0);\n  \n  // \n  useEffect(() => {\n    const interval = setInterval(() => {\n      setMood(m => (m + 1) % 3);\n    }, 3000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // \n  const getArms = () => {\n    switch (mood) {\n      case 0: // \n        return { left: 'M 55 130 L 35 145', right: 'M 145 130 L 165 145' };\n      case 1: // \n        return { left: 'M 55 130 L 35 145', right: 'M 145 130 L 175 100' };\n      case 2: // \n        return { left: 'M 55 130 L 25 115', right: 'M 145 130 L 175 115' };\n      default:\n        return { left: 'M 55 130 L 35 145', right: 'M 145 130 L 165 145' };\n    }\n  };\n\n  const arms = getArms();\n\n  return (\n    <div className=\"relative mb-4 h-40 w-32 text-brand\">\n        <div className=\"absolute left-1/2 top-1/2 -z-10 size-24 -translate-x-1/2 -translate-y-1/2 rounded-full bg-brand-100/50 blur-2xl\"></div>\n        \n        <svg viewBox=\"0 0 200 240\" className=\"size-full animate-float drop-shadow-sm\">\n          \n          {/* M-Antenna */}\n          <path \n            d=\"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40\" \n            stroke=\"currentColor\" \n            strokeWidth=\"5\" \n            fill=\"none\" \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\"\n          />\n          \n          {/* House Body & Roof */}\n          <path \n            d=\"M 40 80 L 100 40 L 160 80\" \n            stroke=\"currentColor\" \n            strokeWidth=\"6\" \n            fill=\"none\" \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\"\n          />\n          <rect \n            x=\"55\" y=\"80\" \n            width=\"90\" height=\"100\" \n            stroke=\"currentColor\" \n            strokeWidth=\"6\" \n            fill=\"none\" \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\"\n          />\n          \n          {/*  -  */}\n          <circle cx=\"100\" cy=\"85\" r=\"4\" fill=\"currentColor\" />\n          \n          {/* Eyebrows */}\n          <path d=\"M 78 110 Q 85 105 92 110\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n          <path d=\"M 108 110 Q 115 105 122 110\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" />\n          \n          {/* Eyes */}\n          <circle cx=\"85\" cy=\"125\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" />\n          <circle cx=\"115\" cy=\"125\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" />\n          \n          {/*  -  */}\n          <path \n            d=\"M 90 145 Q 100 155 110 145\" \n            stroke=\"currentColor\" \n            strokeWidth=\"3\" \n            fill=\"none\" \n            strokeLinecap=\"round\"\n          />\n          \n          {/* Hands -  */}\n          <path \n            d={arms.left}\n            stroke=\"currentColor\" \n            strokeWidth=\"5\" \n            fill=\"none\" \n            strokeLinecap=\"round\"\n            className=\"transition-all duration-500\"\n          />\n          <path \n            d={arms.right}\n            stroke=\"currentColor\" \n            strokeWidth=\"5\" \n            fill=\"none\" \n            strokeLinecap=\"round\"\n            className=\"transition-all duration-500\"\n          />\n\n          {/* Legs */}\n          <path d=\"M 85 180 L 85 215 L 75 215\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n          <path d=\"M 115 180 L 115 215 L 125 215\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n        </svg>\n    </div>\n  );\n}\n","import { ExternalLink, Star, MessageSquare } from 'lucide-react';\n\n/**\n * ============================================\n *  (CommunityWallCard)\n * ============================================\n * \n * \n *  AI \n * \n * \n * \n *  MOCK  - \n * \n * TODO: \n * 1.  APIGET /api/community-wall/:communityId\n * 2.  props  name/topic  communityId\n * 3.  communityId \n *    - \n *    - \n *    - \n *    - \n * 4. /maihouses/community-wall.html?id={communityId}\n * \n * \n * AI [[::]]\n * ChatMessage.tsx \n * \n * @see ChatMessage.tsx - \n * @see maimai-persona.ts - AI Prompt \n */\n\ntype CommunityWallCardProps = {\n  name: string;\n  topic?: string;\n  reviewCount?: number;\n  rating?: number;\n};\n\n// ============================================\n//  MOCK  -  API \n// ============================================\nconst MOCK_COMMUNITY_DATA: Record<string, { reviewCount: number; rating: number }> = {\n  '': { reviewCount: 28, rating: 4.3 },\n  '': { reviewCount: 45, rating: 4.1 },\n  '': { reviewCount: 67, rating: 3.9 },\n  '': { reviewCount: 19, rating: 4.5 },\n  '': { reviewCount: 32, rating: 4.2 },\n  '': { reviewCount: 24, rating: 4.4 },\n  // \n  'default': { reviewCount: 12, rating: 4.2 }\n};\n\nfunction getMockData(name: string) {\n  return MOCK_COMMUNITY_DATA[name] || MOCK_COMMUNITY_DATA['default'];\n}\n// ============================================\n\nexport default function CommunityWallCard({ \n  name, \n  topic = '',\n  reviewCount,\n  rating\n}: CommunityWallCardProps) {\n  //  mock  API \n  const mockData = getMockData(name);\n  const finalReviewCount = reviewCount ?? mockData?.reviewCount ?? 10;\n  const finalRating = rating ?? mockData?.rating ?? 4.0;\n  \n  // TODO:  /maihouses/community-wall.html?id={communityId}\n  const communityWallUrl = '/maihouses/community-wall_mvp.html';\n  \n  return (\n    <a \n      href={communityWallUrl}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"group mt-3 block rounded-xl border-2 border-brand-100 bg-gradient-to-br from-brand-50 to-white p-4 transition-all hover:border-brand-300 hover:shadow-md\"\n    >\n      {/* Header */}\n      <div className=\"mb-2 flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"flex size-8 items-center justify-center rounded-lg bg-brand-100\">\n            <MessageSquare size={16} className=\"text-brand-700\" />\n          </div>\n          <div>\n            <p className=\"text-sm font-black text-brand-700\">{name}</p>\n            <p className=\"text-ink-500 text-[11px] font-medium\"></p>\n          </div>\n        </div>\n        <ExternalLink size={16} className=\"text-brand-400 transition-colors group-hover:text-brand-600\" />\n      </div>\n      \n      {/* Topic */}\n      <p className=\"mb-3 line-clamp-2 text-xs font-medium text-ink-600\">\n         {topic}\n      </p>\n      \n      {/* Stats */}\n      <div className=\"text-ink-500 flex items-center gap-4 text-[11px]\">\n        <span className=\"flex items-center gap-1\">\n          <Star size={12} className=\"fill-amber-500 text-amber-500\" />\n          <span className=\"font-bold text-ink-700\">{finalRating}</span>\n        </span>\n        <span>{finalReviewCount} </span>\n      </div>\n      \n      {/* CTA */}\n      <div className=\"mt-3 rounded-lg bg-brand-700 px-3 py-2 text-center text-xs font-bold text-white transition-colors group-hover:bg-brand-600\">\n         \n      </div>\n    </a>\n  );\n}\n","import { ExternalLink, Building2, MapPin, Maximize, DollarSign } from 'lucide-react';\n\n/**\n * ============================================\n *  (ChatPropertyCard)\n * ============================================\n * \n * \n *  AI  75\n * \n * \n * \n *  MOCK  - \n * \n * TODO: \n * 1.  APIGET /api/properties/:propertyId\n * 2.  propertyId \n *    - \n *    - \n *    - \n * 3. /property.html?id={propertyId}\n * \n * \n * AI [[::ID]]\n * ChatMessage.tsx \n * \n * @see ChatMessage.tsx - \n * @see maimai-persona.ts - AI Prompt \n */\n\ntype ChatPropertyCardProps = {\n  community: string;\n  propertyId: string;\n};\n\n// ============================================\n//  MOCK  -  API \n// ============================================\ninterface MockProperty {\n  title: string;\n  price: string;\n  size: string;\n  rooms: string;\n  address: string;\n  highlight: string;\n}\n\nconst MOCK_PROPERTIES: Record<string, MockProperty> = {\n  'MH-2024-001': {\n    title: ' 3',\n    price: '2,180',\n    size: '35.8',\n    rooms: '322',\n    address: '16812',\n    highlight: '3'\n  },\n  'MH-2024-002': {\n    title: ' ',\n    price: '3,280',\n    size: '52.6',\n    rooms: '422',\n    address: '8818',\n    highlight: ''\n  },\n  'MH-2024-003': {\n    title: ' ',\n    price: '1,480',\n    size: '26.2',\n    rooms: '211',\n    address: '668',\n    highlight: ''\n  },\n  'MH-2024-004': {\n    title: ' ',\n    price: '1,980',\n    size: '32.1',\n    rooms: '321',\n    address: '18815',\n    highlight: ''\n  },\n  'default': {\n    title: '',\n    price: '',\n    size: '-',\n    rooms: '-',\n    address: '',\n    highlight: ''\n  }\n};\n\nfunction getMockData(propertyId: string): MockProperty {\n  return MOCK_PROPERTIES[propertyId] ?? MOCK_PROPERTIES['default'] ?? {\n    title: '',\n    price: '',\n    size: '-',\n    rooms: '-',\n    address: '',\n    highlight: ''\n  };\n}\n// ============================================\n\nexport default function ChatPropertyCard({ \n  community,\n  propertyId\n}: ChatPropertyCardProps) {\n  const property = getMockData(propertyId);\n  \n  // TODO:  /property.html?id={propertyId}\n  const propertyUrl = '/property.html';\n  \n  return (\n    <a \n      href={propertyUrl}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"group mt-3 block max-w-sm rounded-xl border-2 border-orange-100 bg-gradient-to-br from-orange-50 to-white p-4 transition-all hover:border-orange-300 hover:shadow-md\"\n    >\n      {/* Header */}\n      <div className=\"mb-2 flex items-start justify-between\">\n        <div>\n          <div className=\"mb-1 flex items-center gap-2\">\n            <Building2 size={14} className=\"text-orange-500\" />\n            <span className=\"text-ink-500 text-[11px] font-medium\">{community}</span>\n          </div>\n          <p className=\"text-ink-800 text-sm font-bold transition-colors group-hover:text-orange-600\">\n            {property.title}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {property.highlight && (\n            <span className=\"whitespace-nowrap rounded-full bg-orange-500 px-2 py-0.5 text-[10px] font-medium text-white\">\n              {property.highlight}\n            </span>\n          )}\n          <ExternalLink size={14} className=\"text-orange-400 transition-colors group-hover:text-orange-600\" />\n        </div>\n      </div>\n      \n      {/*  */}\n      <div className=\"mb-2 grid grid-cols-2 gap-2\">\n        <div className=\"flex items-center gap-1 text-sm\">\n          <DollarSign size={12} className=\"text-orange-400\" />\n          <span className=\"font-bold text-orange-600\">{property.price}</span>\n        </div>\n        <div className=\"flex items-center gap-1 text-sm text-ink-600\">\n          <Maximize size={12} className=\"text-ink-400\" />\n          <span>{property.size}</span>\n        </div>\n      </div>\n\n      {/*  */}\n      <div className=\"text-ink-500 flex items-center gap-1 text-[11px]\">\n        <MapPin size={11} />\n        <span>{property.address}</span>\n      </div>\n\n      {/*  */}\n      <div className=\"mt-1 text-[11px] text-ink-400\">\n        {property.rooms}\n      </div>\n\n      {/* CTA */}\n      <div className=\"mt-3 border-t border-orange-100 pt-2 text-center text-[11px] font-medium text-orange-500 opacity-0 transition-opacity group-hover:opacity-100\">\n         \n      </div>\n    </a>\n  );\n}\n","import React from 'react';\nimport CommunityWallCard from './CommunityWallCard';\nimport ChatPropertyCard from './ChatPropertyCard';\n\ntype ChatMessageProps = {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: string;\n};\n\n/**\n * \n * [[::]]\n */\nfunction parseCommunityWallTags(content: string): { name: string; topic: string }[] {\n    const regex = /\\[\\[:([^:]+):([^\\]]+)\\]\\]/g;\n    const cards: { name: string; topic: string }[] = [];\n    let match;\n    \n    while ((match = regex.exec(content)) !== null) {\n        const name = match[1];\n        const topic = match[2];\n        if (name && topic) {\n            cards.push({\n                name: name.trim(),\n                topic: topic.trim()\n            });\n        }\n    }\n    \n    return cards;\n}\n\n/**\n * \n * [[::ID]]\n */\nfunction parsePropertyTags(content: string): { community: string; propertyId: string }[] {\n    const regex = /\\[\\[:([^:]+):([^\\]]+)\\]\\]/g;\n    const properties: { community: string; propertyId: string }[] = [];\n    let match;\n    \n    while ((match = regex.exec(content)) !== null) {\n        const community = match[1];\n        const propertyId = match[2];\n        if (community && propertyId) {\n            properties.push({\n                community: community.trim(),\n                propertyId: propertyId.trim()\n            });\n        }\n    }\n    \n    return properties;\n}\n\n/**\n * \n * [[:]]\n */\nfunction parseScenarioTags(content: string): string[] {\n    const regex = /\\[\\[:([^\\]]+)\\]\\]/g;\n    const scenarios: string[] = [];\n    let match;\n    \n    while ((match = regex.exec(content)) !== null) {\n        if (match[1]) {\n            scenarios.push(match[1].trim());\n        }\n    }\n    \n    return scenarios;\n}\n\n/**\n * \n */\nfunction stripAllTags(content: string): string {\n    return content\n        .replace(/\\[\\[:[^:]+:[^\\]]+\\]\\]/g, '')\n        .replace(/\\[\\[:[^:]+:[^\\]]+\\]\\]/g, '')\n        .replace(/\\[\\[:[^\\]]+\\]\\]/g, '')\n        .trim();\n}\n\n/**\n *  - \n */\nfunction ScenarioCard({ description }: { description: string }) {\n    return (\n        <div className=\"my-3 rounded-r-lg border-l-4 border-orange-300 bg-gradient-to-r from-orange-50/80 to-amber-50/50 p-3 italic text-gray-600\">\n            <span className=\"mr-2 text-lg\"></span>\n            <span className=\"leading-relaxed\">{description}</span>\n        </div>\n    );\n}\n\nexport default function ChatMessage({ role, content, timestamp }: ChatMessageProps) {\n    //  assistant \n    const communityCards = role === 'assistant' ? parseCommunityWallTags(content) : [];\n    const propertyCards = role === 'assistant' ? parsePropertyTags(content) : [];\n    const scenarios = role === 'assistant' ? parseScenarioTags(content) : [];\n    const text = role === 'assistant' ? stripAllTags(content) : content;\n\n    return (\n        <div className={`flex ${role === 'user' ? 'justify-end' : 'justify-start'} animate-fadeIn`}>\n            <div\n                className={`max-w-[85%] rounded-2xl px-5 py-3.5 text-[15px] font-medium leading-relaxed shadow-sm ${role === 'user'\n                        ? 'rounded-br-sm bg-brand-700 text-white'\n                        : 'rounded-bl-sm border border-brand-100 bg-white text-ink-900'\n                    }`}\n            >\n                <div className=\"whitespace-pre-wrap\">{text}</div>\n                \n                {/* */}\n                {scenarios.length > 0 && (\n                    <div className=\"mt-2 space-y-2\">\n                        {scenarios.map((scenario, i) => (\n                            <ScenarioCard key={`scenario-${i}`} description={scenario} />\n                        ))}\n                    </div>\n                )}\n                \n                {/*  */}\n                {communityCards.length > 0 && (\n                    <div className=\"mt-2 space-y-2\">\n                        {communityCards.map((card, i) => (\n                            <CommunityWallCard \n                                key={`community-${i}`}\n                                name={card.name}\n                                topic={card.topic}\n                            />\n                        ))}\n                    </div>\n                )}\n\n                {/*  */}\n                {propertyCards.length > 0 && (\n                    <div className=\"mt-2 space-y-2\">\n                        {propertyCards.map((prop, i) => (\n                            <ChatPropertyCard \n                                key={`property-${i}`}\n                                community={prop.community}\n                                propertyId={prop.propertyId}\n                            />\n                        ))}\n                    </div>\n                )}\n                \n                {timestamp && (\n                    <div className={`mt-1.5 text-[11px] font-bold ${role === 'user' ? 'text-brand-300' : 'text-brand-600/60'} text-right`}>\n                        {new Date(timestamp).toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit' })}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","import { useState, useRef, useEffect } from 'react';\nimport { Send, Sparkles, MessageCircle, Heart } from 'lucide-react';\nimport { postLLM, setJustChatMode } from '../../../services/ai';\nimport MascotMaiMai from '../../../components/MascotMaiMai';\nimport ChatMessage from '../components/ChatMessage';\nimport { \n    QUICK_TAGS_LIFESTYLE, \n    QUICK_TAGS_EXPLORE, \n    generateReturnGreeting, \n    loadPainPointsFromStorage,\n    getIntimacyLevel,\n    saveIntimacyToStorage\n} from '../../../constants/maimai-persona';\n\ntype ChatMsg = { role: 'user' | 'assistant'; content: string; timestamp: string };\n\nexport default function SmartAsk() {\n    const [messages, setMessages] = useState<ChatMsg[]>([]);\n    const [input, setInput] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [returnGreeting, setReturnGreeting] = useState<string | null>(null);\n    const [intimacy, setIntimacy] = useState(getIntimacyLevel());\n    const chatRef = useRef<HTMLDivElement>(null);\n\n    //  Quick Tags\n    const userRounds = messages.filter(m => m.role === 'user').length;\n    const currentTags = userRounds >= 3 ? QUICK_TAGS_EXPLORE : QUICK_TAGS_LIFESTYLE;\n\n    // ============================================\n    // v6.0 1 + \n    // ============================================\n    useEffect(() => {\n        loadPainPointsFromStorage();\n        \n        const lastChat = localStorage.getItem('mai-last-chat');\n        const today = new Date().toDateString();\n        \n        //   \n        if (!lastChat || lastChat !== today) {\n            const greeting = generateReturnGreeting();\n            if (greeting) {\n                setReturnGreeting(greeting);\n            }\n            \n            // \n            const timer = setTimeout(() => {\n                const welcomeMsg = greeting || '';\n                setMessages([{\n                    role: 'assistant',\n                    content: welcomeMsg,\n                    timestamp: new Date().toISOString()\n                }]);\n                localStorage.setItem('mai-last-chat', today);\n            }, 1500);\n            \n            return () => clearTimeout(timer);\n        }\n    }, []);\n    \n    // ============================================\n    // v6.0 622:00-22:30\n    // ============================================\n    useEffect(() => {\n        const now = new Date();\n        const hour = now.getHours();\n        const minute = now.getMinutes();\n        \n        //  10:00 - 10:30 \n        if (hour === 22 && minute < 30) {\n            const todayGoodnight = localStorage.getItem('mai-goodnight-' + now.toDateString());\n            if (!todayGoodnight && messages.length > 0) {\n                const timer = setTimeout(() => {\n                    setMessages(prev => [...prev, {\n                        role: 'assistant',\n                        content: ' \\n...',\n                        timestamp: new Date().toISOString()\n                    }]);\n                    localStorage.setItem('mai-goodnight-' + now.toDateString(), '1');\n                }, 5000);\n                \n                return () => clearTimeout(timer);\n            }\n        }\n    }, [messages.length]);\n    \n    // ============================================\n    // v6.0 2\n    // ============================================\n    useEffect(() => {\n        setIntimacy(getIntimacyLevel());\n    }, [messages.length]);\n    \n    // \n    useEffect(() => {\n        const handleBeforeUnload = () => {\n            saveIntimacyToStorage();\n        };\n        window.addEventListener('beforeunload', handleBeforeUnload);\n        return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n    }, []);\n\n    useEffect(() => {\n        if (chatRef.current) {\n            chatRef.current.scrollTop = chatRef.current.scrollHeight;\n        }\n    }, [messages]);\n\n    const send = async (text = input) => {\n        if (!text.trim() || loading) return;\n\n        // ============================================\n        // \n        // ============================================\n        if (text === '') {\n            setJustChatMode(true);\n        }\n\n        const userMsg: ChatMsg = { role: 'user', content: text.trim(), timestamp: new Date().toISOString() };\n        setMessages(prev => [...prev, userMsg]);\n        setInput('');\n        setLoading(true);\n\n        const assistantMsg: ChatMsg = { role: 'assistant', content: '', timestamp: new Date().toISOString() };\n        setMessages(prev => [...prev, assistantMsg]);\n\n        try {\n            const fullResponse = await postLLM(\n                [...messages, userMsg],\n                (chunk) => {\n                    setMessages(prev => {\n                        const newMsgs = [...prev];\n                        const last = newMsgs[newMsgs.length - 1];\n                        if (last && last.role === 'assistant') {\n                            last.content += chunk;\n                        }\n                        return newMsgs;\n                    });\n                }\n            );\n            \n            //  ai.ts \n            void fullResponse; //  lint \n        } catch (e) {\n            console.error(e);\n            setMessages(prev => {\n                const newMsgs = [...prev];\n                const last = newMsgs[newMsgs.length - 1];\n                if (last) {\n                    last.content = \"\";\n                }\n                return newMsgs;\n            });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <section className=\"group relative isolate overflow-hidden rounded-[24px] border border-brand-100 bg-gradient-to-br from-white via-[#F8FAFC] to-[#00385a08] shadow-[0_8px_24px_rgba(0,56,90,0.06)] transition-all duration-300 hover:shadow-[0_12px_32px_rgba(0,56,90,0.1)]\">\n\n            {/* --- Background Elements --- */}\n            <div className=\"pointer-events-none absolute -right-24 -top-24 size-80 rounded-full bg-brand-100/30 mix-blend-multiply blur-3xl\"></div>\n            <div className=\"pointer-events-none absolute -bottom-24 -left-24 size-96 rounded-full bg-brand-700/5 mix-blend-multiply blur-3xl\"></div>\n            <div className=\"pointer-events-none absolute inset-0 z-0 bg-[linear-gradient(to_right,#00385a08_1px,transparent_1px),linear-gradient(to_bottom,#00385a08_1px,transparent_1px)] [background-size:24px_24px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)]\"></div>\n\n            {/* Decorative Top Bar */}\n            <div className=\"relative z-20 h-1.5 w-full bg-gradient-to-r from-brand-700 via-brand-600 to-brand-500\"></div>\n\n            <div className=\"relative z-10 p-5 md:p-8 md:pt-6\">\n                {/* Header Section */}\n                <div className=\"mb-3 flex flex-col justify-between gap-4 md:flex-row md:items-center\">\n                    <div className=\"flex items-center gap-3\">\n                        {/* Chat Icon */}\n                        <div className=\"relative flex size-12 shrink-0 items-center justify-center overflow-hidden rounded-2xl border border-brand-100 bg-white/80 text-brand-700 shadow-sm backdrop-blur-sm transition-transform duration-300 group-hover:scale-105\">\n                            <MessageCircle size={26} strokeWidth={2} />\n                        </div>\n\n                        <div>\n                            <h3 className=\"flex items-center gap-2 text-xl font-black tracking-tight text-brand-700\">\n                                MaiMai \n                                <span className=\"inline-flex items-center gap-1 rounded-full bg-gradient-to-r from-brand-700 to-brand-600 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider text-white shadow-sm\">\n                                    <Sparkles size={10} /> v6.0\n                                </span>\n                            </h3>\n                            <div className=\"mt-0.5 flex items-center gap-2\">\n                                <p className=\"text-xs font-bold tracking-wide text-ink-600\">\n                                     \n                                </p>\n                                {/*  */}\n                                <span className=\"inline-flex items-center gap-1 rounded-full border border-pink-200 bg-pink-50 px-2 py-0.5 text-[10px] font-bold text-pink-600\">\n                                    <Heart size={10} fill=\"currentColor\" /> {intimacy.label} {intimacy.emoji}\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Quick Tags -  */}\n                    <div className=\"flex flex-wrap items-center justify-end gap-2\">\n                        {currentTags.map(tag => (\n                            <button\n                                key={tag}\n                                onClick={() => send(tag)}\n                                className=\"rounded-full border border-brand-100 bg-white px-3.5 py-1.5 text-xs font-bold text-brand-700 shadow-sm backdrop-blur-sm transition-all hover:border-brand-700 hover:bg-brand-700 hover:text-white hover:shadow-md active:scale-95\"\n                            >\n                                {tag}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n\n                {/* Chat Display Area */}\n                <div\n                    ref={chatRef}\n                    className=\"mb-4 flex h-[380px] flex-col gap-4 overflow-y-auto scroll-smooth rounded-2xl border border-brand-100/60 bg-white/50 p-5 shadow-inner backdrop-blur-md\"\n                    role=\"log\"\n                    aria-live=\"polite\"\n                >\n                    {messages.length === 0 ? (\n                        <div className=\"flex flex-1 flex-col items-center justify-center p-4 text-center opacity-80\">\n\n                            {/* MaiMai Mascot */}\n                            <MascotMaiMai />\n\n                            <p className=\"mb-2 text-base font-black text-brand-700\">\n                                {returnGreeting ? returnGreeting.split('')[0] + '' : ' '}\n                            </p>\n                            <p className=\"mx-auto max-w-xs text-sm font-medium leading-relaxed text-ink-600\">\n                                {returnGreeting \n                                    ? returnGreeting.includes('') ? returnGreeting.split('').slice(1).join('') : ''\n                                    : <><br /></>\n                                }\n                            </p>\n                        </div>\n                    ) : (\n                        messages.map((m, i) => (\n                            <ChatMessage key={i} role={m.role} content={m.content} timestamp={m.timestamp} />\n                        ))\n                    )}\n                    {loading && (\n                        <div className=\"flex animate-fadeIn justify-start\">\n                            <div className=\"flex items-center gap-2 rounded-2xl rounded-bl-sm border border-brand-100 bg-white px-4 py-3 text-sm text-brand-600 shadow-sm\">\n                                <span className=\"font-bold\">...</span>\n                                <div className=\"flex gap-1\">\n                                    <span className=\"size-1.5 animate-[bounce_1.4s_infinite_ease-in-out_both] rounded-full bg-brand-500\"></span>\n                                    <span className=\"size-1.5 animate-[bounce_1.4s_infinite_ease-in-out_both_0.2s] rounded-full bg-brand-500\"></span>\n                                    <span className=\"size-1.5 animate-[bounce_1.4s_infinite_ease-in-out_both_0.4s] rounded-full bg-brand-500\"></span>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Input Area */}\n                <div className=\"group/input relative\">\n                    <input\n                        type=\"text\"\n                        className=\"w-full rounded-xl border-2 border-brand-100 bg-white/80 py-4 pl-5 pr-14 text-[15px] font-bold text-ink-900 shadow-sm backdrop-blur-sm transition-all placeholder:text-ink-400/80 hover:border-brand-300 focus:border-brand-500 focus:outline-none focus:ring-4 focus:ring-brand-50/50\"\n                        placeholder=\"...\"\n                        value={input}\n                        onChange={(e) => setInput(e.target.value)}\n                        onKeyDown={(e) => e.key === 'Enter' && !e.shiftKey && send()}\n                        disabled={loading}\n                    />\n                    <button\n                        onClick={() => send()}\n                        disabled={loading || !input.trim()}\n                        className=\"absolute inset-y-2 right-2 flex aspect-square items-center justify-center rounded-lg bg-brand-700 text-white shadow-md transition-all hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-lg active:translate-y-0 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 disabled:shadow-none disabled:hover:transform-none\"\n                    >\n                        <Send size={20} strokeWidth={2.5} className=\"-ml-0.5 translate-y-px\" />\n                    </button>\n                </div>\n            </div>\n        </section>\n    );\n}\n\n\n","import React from 'react';\n\ninterface ReviewProps {\n  id: string;\n  name: string;\n  rating: number;\n  tags: string[];\n  content: string;\n}\n\nexport const ReviewCard = React.memo(({ id, name, rating, tags, content }: ReviewProps) => {\n  return (\n    <article className=\"relative flex gap-3 rounded-2xl border border-[#E6EDF7] bg-white p-3.5 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)]\">\n      <div className=\"flex size-[38px] shrink-0 items-center justify-center rounded-full border border-[#E6EDF7] bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-[15px] font-black text-[#00385a] shadow-[inset_0_1px_2px_rgba(255,255,255,0.8),0_2px_4px_rgba(0,56,90,0.05)]\">\n        {id}\n      </div>\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"mb-1.5 flex items-center justify-between\">\n          <div className=\"flex items-center gap-1.5 text-[15px] font-black text-primary\">\n            {name}\n          </div>\n          <div className=\"flex gap-0.5\" aria-label={`${rating} stars`}>\n            {Array.from({ length: 5 }).map((_, i) => (\n              <span key={i} className={`text-xs ${i < rating ? 'text-[#00385a]' : 'text-[#E6EDF7]'}`}></span>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"mb-2 flex flex-wrap gap-1.5\">\n          {tags.map(tag => (\n            <span key={tag} className=\"rounded-md border border-[#E6EDF7] bg-[#F6F9FF] px-2 py-0.5 text-[11px] font-bold tracking-wide text-[#00385a]\">\n              {tag}\n            </span>\n          ))}\n        </div>\n\n        <p className=\"text-justify text-[13px] font-medium leading-relaxed text-[#4B5563]\">\n          {content}\n        </p>\n      </div>\n    </article>\n  );\n});\n\nReviewCard.displayName = 'ReviewCard';\n","import { COMMUNITY_REVIEWS } from '../../../constants/data'\nimport { HomeCard } from '../components/HomeCard'\nimport { ReviewCard } from '../components/ReviewCard'\n\nexport default function CommunityTeaser() {\n  return (\n    <HomeCard className=\"bg-white/96 border border-[#E6EDF7] p-3 shadow-[0_4px_20px_rgba(0,56,90,0.03)] backdrop-blur-md\">\n      <div className=\"relative mb-4 flex items-center justify-between overflow-hidden rounded-2xl bg-gradient-to-r from-[#00385a] to-[#005585] px-4 py-3 shadow-[0_2px_8px_rgba(0,56,90,0.15)]\">\n        {/* Decorative circle for texture */}\n        <div className=\"pointer-events-none absolute -right-6 -top-6 size-24 rounded-full bg-white/5 blur-2xl\" />\n\n        <div className=\"relative z-10 flex items-center gap-2.5\">\n          <div className=\"size-1.5 rounded-full bg-[#E63946] shadow-[0_0_8px_rgba(230,57,70,0.6)]\" />\n          <h3 className=\"text-shadow-sm m-0 text-lg font-black tracking-wide text-white\"></h3>\n          <span className=\"rounded-full border border-white/20 bg-white/95 px-2.5 py-0.5 text-[11px] font-bold text-[#00385a] shadow-sm backdrop-blur-sm\">\n            \n          </span>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\n        {COMMUNITY_REVIEWS.map((review) => (\n          <ReviewCard key={review.id} {...review} />\n        ))}\n      </div>\n\n      <a\n        className=\"group relative mt-4 flex items-center gap-2.5 rounded-xl border border-[#E6EDF7] bg-gradient-to-b from-white to-[#F6F9FF] p-3.5 font-black text-[#00385a] no-underline transition-all duration-200 hover:border-[#00385a]/20 hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] active:translate-y-px lg:justify-center lg:text-center\"\n        href=\"/maihouses/community-wall_mvp.html\"\n        aria-label=\"\"\n      >\n        <span className=\"text-[15px] tracking-wide transition-colors group-hover:text-[#004E7C] lg:mx-auto\">\n          \n        </span>\n        <span className=\"ml-auto rounded-lg bg-[#00385a] px-3 py-1.5 text-xs font-bold text-white shadow-sm transition-colors group-hover:bg-[#004E7C] lg:absolute lg:right-[14px] lg:top-1/2 lg:ml-0 lg:-translate-y-1/2\">\n           \n        </span>\n      </a>\n    </HomeCard>\n  )\n}\n\n","import React from 'react';\n\nexport type Review = {\n    avatar: string;\n    name: string;\n    role: string;\n    tag: string;\n    text: string;\n};\n\nexport type Property = {\n    id: number;\n    image: string;\n    badge: string;\n    title: string;\n    tags: string[];\n    price: string;\n    location: string;\n    reviews: Review[];\n};\n\nexport default function PropertyCard({ property }: { property: Property }) {\n    return (\n        <article\n            className=\"group relative isolate overflow-hidden rounded-2xl border border-[#E6EDF7] bg-white shadow-none transition-all duration-[180ms] ease-out hover:-translate-y-0.5 hover:border-[#1749d738] hover:shadow-[0_10px_26px_rgba(13,39,94,0.12)]\"\n        >\n            {/* Background Glow Effect */}\n            <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(60%_60%_at_80%_-10%,rgba(23,73,215,0.12),transparent_60%)] opacity-80\" />\n\n            {/* Cover Image */}\n            <a href={`/property/${property.id}`} className=\"relative block aspect-[4/3] overflow-hidden bg-[#e9ecf5]\">\n                <img\n                    src={property.image}\n                    alt=\"\"\n                    className=\"cubic-bezier(0.2,0.65,0.2,1) block size-full scale-100 object-cover transition-transform duration-[600ms] group-hover:scale-105\"\n                />\n                <span className=\"absolute left-2.5 top-2.5 rounded-full bg-black/75 px-2 py-1 text-xs font-extrabold tracking-[0.2px] text-white shadow-[0_4px_10px_rgba(0,0,0,0.18)]\">\n                    {property.badge}\n                </span>\n            </a>\n\n            {/* Body */}\n            <div className=\"p-3 pb-3.5\">\n                <div className=\"my-0.5 mb-2 text-base font-extrabold leading-[1.35] tracking-[0.3px] text-primary lg:text-[21px]\">\n                    {property.title}\n                </div>\n\n                <div className=\"mb-1.5 flex flex-wrap items-center gap-2 text-[13px] text-[#6C7B91]\">\n                    {property.tags.map((tag, i) => (\n                        <span\n                            key={i}\n                            className=\"duration-120 rounded-full border border-[#E6EDF7] bg-[#F6F9FF] px-2.5 py-0.5 font-extrabold text-[#2A2F3A] transition-all ease-out group-hover:-translate-y-px group-hover:shadow-[0_4px_10px_rgba(0,56,90,0.10)]\"\n                        >\n                            {tag}\n                        </span>\n                    ))}\n                </div>\n\n                <div className=\"my-2 mb-1 text-[19px] font-black tracking-[0.2px] text-[#111]\">\n                    NT$ {property.price} \n                </div>\n                <div className=\"text-[13px] text-[#6C7B91]\">\n                    {property.location}\n                </div>\n\n                {/* Reviews Mini */}\n                <div className=\"mt-2.5 rounded-xl border border-[#E6EDF7] bg-gradient-to-b from-[#F6F9FF] to-white px-3 py-2.5\">\n                    <div className=\"mb-2 flex items-center gap-2 text-[13px] font-black text-black/85 before:text-xs before:leading-none before:text-[#00385a] before:drop-shadow-[0_1px_0_rgba(0,56,90,0.12)] before:content-['']\">\n                        \n                    </div>\n\n                    {property.reviews.map((review, i) => (\n                        <div\n                            key={i}\n                            className={`flex items-start gap-2.5 py-2 ${i !== 0 ? 'border-t border-dashed border-black/10' : ''}`}\n                        >\n                            <div className=\"grid size-[30px] flex-none place-items-center rounded-full bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-xs font-black text-[#00385a] shadow-[inset_0_0_0_1px_rgba(0,56,90,0.15)]\">\n                                {review.avatar}\n                            </div>\n                            <div className=\"min-w-0 flex-1\">\n                                <div className=\"mb-0.5 flex items-center gap-1.5 text-xs text-black/60\">\n                                    <span className=\"font-black text-black/85\">{review.name}  {review.role}</span>\n                                    <span className=\"inline-block size-1 rounded-full bg-black/20\" />\n                                    <span className=\"rounded-full bg-[#00385a]/10 px-2 py-0.5 font-black text-[#00385a]\">\n                                        {review.tag}\n                                    </span>\n                                </div>\n                                <div className=\"text-[13px] leading-[1.6] text-black/85\">\n                                    {review.text}\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n\n                    <button\n                        type=\"button\"\n                        className=\"mt-2.5 w-full cursor-pointer rounded-xl border border-[#00385a]/30 bg-gradient-to-b from-white to-[#F5F7FA] px-3 py-2.5 text-[13px] font-black text-[#00385a] transition-all duration-150 ease-out hover:from-white hover:to-[#E8F0FF] hover:shadow-[0_6px_14px_rgba(0,56,90,0.18)] active:translate-y-px\"\n                    >\n                        \n                    </button>\n                </div>\n            </div>\n        </article>\n    );\n}\n","import { PROPERTIES } from '../../../constants/data';\nimport PropertyCard from '../components/PropertyCard';\n\nexport default function PropertyGrid() {\n  return (\n    <div className=\"w-full\">\n      {/* Header Section */}\n      <div className=\"my-[18px] mb-3 flex items-center gap-2.5\" aria-label=\"\">\n        <div className=\"inline-flex items-center gap-2 rounded-full border border-[#E6EDF7] bg-gradient-to-b from-white to-[#F6F9FF] px-3 py-1.5 text-sm font-black tracking-[0.2px] text-[#00385a]\">\n          <span className=\"grid size-[18px] place-items-center rounded-md bg-gradient-to-b from-[#00385a] to-[#004E7C] text-xs font-black text-white shadow-[0_2px_6px_rgba(0,56,90,0.18)]\">\n            \n          </span>\n          <span className=\"text-base leading-none md:text-lg md:font-bold\"></span>\n          <span className=\"ml-1.5 text-sm font-bold text-[#6C7B91]\"></span>\n        </div>\n        <div\n          className=\"animate-mhRecoBar ml-2.5 h-1.5 flex-1 rounded-full bg-gradient-to-r from-[#00385a] via-[#004E7C] to-[#7EA5FF] bg-[length:200%_100%] opacity-25\"\n          aria-hidden=\"true\"\n        />\n      </div>\n\n      {/* Grid Section */}\n      <div\n        className=\"grid grid-cols-1 gap-[18px] md:grid-cols-2 lg:grid-cols-3\"\n        aria-label=\"\"\n        title=\"\"\n      >\n        {PROPERTIES.map((property) => (\n          <PropertyCard key={property.id} property={property} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { getMilestoneHint, getWarmTags, ensureFirstSeen, isWarmbarDismissedToday, dismissWarmbarToday, loadProfile } from \"../stores/profileStore\";\nimport { Events, track } from \"../analytics/track\";\n\nexport const WarmWelcomeBar = () => {\n  const [shouldShow, setShouldShow] = useState(false);\n  const profile = useMemo(() => loadProfile(), []);\n  const tags = useMemo(() => getWarmTags(3), []);\n  const milestone = useMemo(() => getMilestoneHint(profile.milestones), [profile.milestones]);\n\n  useEffect(() => {\n    const { isFirstVisit } = ensureFirstSeen();\n    const hasContent = (tags && tags.length > 0) || !!milestone || !!profile.lastMood;\n    const ok = !isFirstVisit && !isWarmbarDismissedToday() && hasContent;\n    setShouldShow(ok);\n    if (ok) track(Events.WarmbarView, { tags, milestone: !!milestone, lastMood: profile.lastMood });\n  }, [tags, milestone, profile.lastMood]);\n\n  if (!shouldShow) return null;\n\n  const greetByMood = (m?: string) => {\n    if (m === \"stress\") return \"\";\n    if (m === \"rest\") return \"\";\n    return \"\";\n  };\n\n  const tagText = tags && tags.length > 0 ? `${tags.join(\"\")}` : null;\n  const leftText = milestone ? milestone : (tagText ? `${greetByMood(profile.lastMood)}${tagText}` : `${greetByMood(profile.lastMood)}`);\n\n  const onContinue = () => {\n    track(Events.WarmbarContinue, { tags, milestone: !!milestone });\n    const seed = milestone\n      ? \"\"\n      : (tags && tags.length > 0 ? ` ${tags.join(\"\")}` : \"\");\n    window.dispatchEvent(new CustomEvent(\"mai:chat:start\", { detail: { text: seed } }));\n  };\n  const onDismissToday = () => {\n    dismissWarmbarToday();\n    setShouldShow(false);\n    track(Events.WarmbarDismiss, {});\n  };\n\n  return (\n    <div className=\"flex h-[34px] w-full items-center justify-center gap-3 border-b border-[#E6ECFF] bg-[#F5F8FF] text-center text-sm leading-[34px] tracking-wide text-[#0a2246]\" role=\"status\" aria-live=\"polite\">\n      <span>{leftText}</span>\n      <button \n        className=\"h-[26px] cursor-pointer rounded-full border border-[#1749D7] bg-[#1749D7] px-2.5 py-0.5 leading-6 text-white transition-colors hover:bg-[#123cb3]\"\n        onClick={onContinue}\n      >\n        \n      </button>\n      <button \n        className=\"h-[26px] cursor-pointer rounded-full border border-[#C9D5FF] bg-white px-2.5 py-0.5 leading-6 text-[#1749D7] transition-colors hover:bg-gray-50\"\n        onClick={onDismissToday}\n      >\n        \n      </button>\n    </div>\n  );\n};\n","import { useEffect, useState } from 'react'\nimport Header from '../components/Header/Header'\nimport HeroAssure from '../features/home/sections/HeroAssure'\nimport SmartAsk from '../features/home/sections/SmartAsk'\nimport CommunityTeaser from '../features/home/sections/CommunityTeaser'\nimport PropertyGrid from '../features/home/sections/PropertyGrid'\nimport { getMeta } from '../services/api'\nimport { trackEvent } from '../services/analytics'\nimport type { AppConfig, RuntimeOverrides } from '../app/config'\nimport { WarmWelcomeBar } from '../components/WarmWelcomeBar'\nimport { cmp } from '../lib/utils'\n\nexport default function Home({ config }: { readonly config: AppConfig & RuntimeOverrides }) {\n  const [banner, setBanner] = useState<string | null>(null)\n\n  useEffect(() => {\n    getMeta().then((r) => {\n      if (r.ok && r.data) {\n        if (r.data.maintenance || cmp(r.data.backendVersion, config.minBackend) < 0) {\n          console.warn('')\n          setBanner('')\n        }\n      }\n    })\n  }, [config.minBackend])\n\n  useEffect(() => {\n    const onRej = (e: PromiseRejectionEvent) => {\n      try {\n        trackEvent('unhandled_promise_rejection', '/', e.reason?.message || String(e.reason))\n      } catch {}\n    }\n    globalThis.addEventListener('unhandledrejection', onRej)\n    return () => globalThis.removeEventListener('unhandledrejection', onRej)\n  }, [])\n\n  const features = config.features || {}\n\n  return (\n    <>\n      <Header />\n      <WarmWelcomeBar />\n      {/* Blue background layer removed as it is now part of the Header component */}\n      \n      {banner && (\n        <div className=\"mx-auto mt-4 max-w-container rounded-md bg-yellow-500 p-3 text-sm text-white\">{banner}</div>\n      )}\n      <main className=\"relative mx-auto max-w-container space-y-6 p-4 md:space-y-8 md:p-6\">\n        {features.heroAssure !== false && (\n          <HeroAssure />\n        )}\n        {features.smartAsk !== false && (\n          <SmartAsk />\n        )}\n        <CommunityTeaser />\n        {features.propertyGrid !== false && (\n          <PropertyGrid />\n        )}\n      </main>\n    </>\n  )\n}\n\n","const REQUIRED_KEYS = ['VITE_SUPABASE_URL', 'VITE_SUPABASE_ANON_KEY'] as const;\nconst OPTIONAL_KEYS = ['VITE_API_BASE_URL', 'VITE_APP_URL'] as const;\n\nconst DEFAULT_COMMUNITY_API_BASE = '/api/community';\n\ntype RequiredKey = (typeof REQUIRED_KEYS)[number];\ntype OptionalKey = (typeof OPTIONAL_KEYS)[number];\n\ntype EnvShape = Record<RequiredKey, string> & Partial<Record<OptionalKey, string>>;\n\nconst trimTrailingSlash = (value: string) => value.replace(/\\/+$/, '');\n\n/**\n *  HTTP(S) URL\n */\nconst isValidHttpUrl = (str: string): boolean => {\n  try {\n    const url = new URL(str);\n    return url.protocol === 'http:' || url.protocol === 'https:';\n  } catch {\n    return false;\n  }\n};\n\n/**\n * \n * import.meta.env.BASE_URL  document.baseURI  /maihouses/\n */\nconst resolveAppBaseHref = (): string => {\n  // Vite  build  vite.config.ts  base  BASE_URL\n  const viteBase = import.meta.env.BASE_URL;\n  if (viteBase && viteBase !== '/') {\n    //  /\n    return viteBase.endsWith('/') ? viteBase : `${viteBase}/`;\n  }\n\n  // SSR  document.baseURI \n  if (typeof document !== 'undefined' && document.baseURI) {\n    try {\n      const baseUrl = new URL(document.baseURI);\n      const pathname = baseUrl.pathname;\n      if (pathname && pathname !== '/') {\n        return pathname.endsWith('/') ? pathname : `${pathname}/`;\n      }\n    } catch {\n      //  fallback\n    }\n  }\n\n  //  fallback /maihouses/\n  return '/maihouses/';\n};\n\n/**\n *  PROD \n */\nconst showFriendlyErrorPage = (title: string, message: string): void => {\n  if (typeof document !== 'undefined' && document.body) {\n    const homeHref = resolveAppBaseHref();\n    document.body.innerHTML = `\n      <div style=\"display:flex;align-items:center;justify-content:center;height:100vh;font-family:system-ui,-apple-system,sans-serif;background:#f8fafc;\">\n        <div style=\"text-align:center;max-width:400px;padding:2rem;\">\n          <div style=\"font-size:3rem;margin-bottom:1rem;\"></div>\n          <h1 style=\"font-size:1.25rem;font-weight:600;color:#1e293b;margin-bottom:0.5rem;\">${title}</h1>\n          <p style=\"color:#64748b;margin-bottom:1.5rem;\">${message}</p>\n          <a href=\"${homeHref}\" style=\"display:inline-block;padding:0.75rem 1.5rem;background:#3b82f6;color:white;border-radius:0.5rem;text-decoration:none;font-weight:500;\"></a>\n        </div>\n      </div>\n    `;\n  }\n};\n\nfunction readEnv(): EnvShape {\n  const missing = REQUIRED_KEYS.filter((key) => !import.meta.env[key]);\n  if (missing.length > 0) {\n    const message = `${missing.join(', ')}`;\n    if (import.meta.env.PROD) {\n      showFriendlyErrorPage('', '');\n    }\n    throw new Error(message);\n  }\n\n  const supabaseUrl = import.meta.env.VITE_SUPABASE_URL!;\n  if (!isValidHttpUrl(supabaseUrl)) {\n    const message = 'VITE_SUPABASE_URL  HTTP(S) URL';\n    if (import.meta.env.PROD) {\n      showFriendlyErrorPage('', '');\n    }\n    throw new Error(message);\n  }\n\n  const env: EnvShape = {\n    VITE_SUPABASE_URL: supabaseUrl,\n    VITE_SUPABASE_ANON_KEY: import.meta.env.VITE_SUPABASE_ANON_KEY!,\n    VITE_API_BASE_URL: import.meta.env.VITE_API_BASE_URL,\n    VITE_APP_URL: import.meta.env.VITE_APP_URL,\n  };\n\n  //  VITE_API_BASE_URL \n  if (env.VITE_API_BASE_URL && !isValidHttpUrl(env.VITE_API_BASE_URL) && !env.VITE_API_BASE_URL.startsWith('/')) {\n    console.warn('[env] VITE_API_BASE_URL  HTTP(S) URL  / ');\n  }\n\n  if (!env.VITE_API_BASE_URL && import.meta.env.DEV) {\n    console.warn('[env] VITE_API_BASE_URL  /api');\n  }\n\n  return env;\n}\n\nexport const env = readEnv();\n\nfunction resolveCommunityApiBase(envShape: EnvShape): string {\n  if (!envShape.VITE_API_BASE_URL) {\n    //  origin  /api/community\n    if (import.meta.env.PROD) {\n      console.warn('[env] VITE_API_BASE_URL  /api/community');\n    }\n    return DEFAULT_COMMUNITY_API_BASE;\n  }\n\n  const normalized = envShape.VITE_API_BASE_URL.trim();\n  if (!normalized) {\n    console.warn('[env] VITE_API_BASE_URL  /api/community');\n    return DEFAULT_COMMUNITY_API_BASE;\n  }\n\n  return `${trimTrailingSlash(normalized)}/community`;\n}\n\nexport const communityApiBase = resolveCommunityApiBase(env);","import { createClient } from '@supabase/supabase-js'\nimport { env } from '../config/env'\n\nexport const supabase = createClient(env.VITE_SUPABASE_URL, env.VITE_SUPABASE_ANON_KEY, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n    detectSessionInUrl: true\n  }\n})\n","import { useEffect, useState } from 'react';\nimport { Session, User } from '@supabase/supabase-js';\nimport { supabase } from '../lib/supabase';\nimport type { Role } from '../types/community';\n\ninterface AuthState {\n  session: Session | null;\n  user: User | null;\n  role: Role;\n  isAuthenticated: boolean;\n  loading: boolean;\n  error: Error | null;\n}\n\nconst deriveRole = (user: User | null): Role => {\n  if (!user) return 'guest';\n  const metadataRole = (user.app_metadata as Record<string, unknown>)?.role ?? (user.user_metadata as Record<string, unknown>)?.role;\n  if (metadataRole === 'resident' || metadataRole === 'agent' || metadataRole === 'member') {\n    return metadataRole;\n  }\n  return 'member';\n};\n\nexport function useAuth() {\n  const [state, setState] = useState<AuthState>({\n    session: null,\n    user: null,\n    role: 'guest',\n    isAuthenticated: false,\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const syncState = (session: Session | null, error: Error | null = null) => {\n      if (!isMounted) return;\n      const user = session?.user ?? null;\n      const role = deriveRole(user);\n      setState({\n        session,\n        user,\n        role,\n        isAuthenticated: !!session,\n        loading: false,\n        error,\n      });\n    };\n\n    const fetchSession = async () => {\n      try {\n        const { data, error } = await supabase.auth.getSession();\n        if (error) {\n          syncState(null, error);\n          return;\n        }\n        syncState(data.session, null);\n      } catch (err) {\n        syncState(null, err instanceof Error ? err : new Error('Failed to fetch session'));\n      }\n    };\n\n    fetchSession();\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      syncState(session, null);\n    });\n\n    return () => {\n      isMounted = false;\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  /**\n   *  GlobalHeader P3 \n   * @throws {Error} \n   */\n  const signOut = async () => {\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n      throw error;\n    }\n  };\n\n  return { ...state, signOut };\n}\n","import { toast } from 'sonner'\n\nexport type NotifyOptions = {\n  id?: string | number\n  description?: string\n  duration?: number\n  actionLabel?: string\n  onAction?: () => void\n  dismissible?: boolean\n}\n\ntype ToastOptions = {\n  id?: string | number\n  description?: string\n  duration?: number\n  dismissible?: boolean\n  action?: { label: string; onClick: () => void }\n}\n\nconst mapOptions = (options: NotifyOptions = {}, description?: string, defaultDuration = 3200): ToastOptions => {\n  const mapped: ToastOptions = {\n    duration: options.duration ?? defaultDuration,\n    dismissible: options.dismissible ?? true,\n  }\n\n  if (options.id !== undefined) {\n    mapped.id = options.id\n  }\n\n  if (description !== undefined) {\n    mapped.description = description\n  } else if (options.description !== undefined) {\n    mapped.description = options.description\n  }\n\n  if (options.actionLabel && options.onAction) {\n    mapped.action = { label: options.actionLabel, onClick: options.onAction }\n  }\n\n  return mapped\n}\n\nexport const notify = {\n  success: (title: string, description?: string, options?: NotifyOptions) =>\n    toast.success(title, mapOptions(options, description, 3200)),\n\n  error: (title: string, description?: string, options?: NotifyOptions) =>\n    toast.error(title, mapOptions(options, description, options?.duration ?? 5000)),\n\n  warning: (title: string, description?: string, options?: NotifyOptions) =>\n    toast.warning(title, mapOptions(options, description, options?.duration ?? 4500)),\n\n  info: (title: string, description?: string, options?: NotifyOptions) =>\n    toast.info(title, mapOptions(options, description, 3200)),\n\n  loading: (title: string, options?: NotifyOptions) =>\n    toast.loading(title, mapOptions(options, options?.description, options?.duration ?? Infinity)),\n\n  dev: (message = '', options?: NotifyOptions) =>\n    toast.info('', mapOptions(options, message, options?.duration ?? 2200)),\n\n  dismiss: (id?: string | number) => toast.dismiss(id),\n}\n","export const HEADER_MODES = {\n  COMMUNITY: 'community',\n  CONSUMER: 'consumer',\n  AGENT: 'agent',\n} as const;\n\nexport type GlobalHeaderMode = typeof HEADER_MODES[keyof typeof HEADER_MODES];\n\nexport const HEADER_STRINGS = {\n  BACK_HOME: '',\n  SUBTITLE_WALL: '',\n  AGENT_BADGE: '',\n  BTN_LOGIN: '',\n  BTN_REGISTER: '',\n  BTN_LOGOUT: '',\n  BTN_MY_ACCOUNT: '',\n  LABEL_NOTIFICATIONS: '',\n  LABEL_AVATAR: '',\n  MENU_PROFILE: '',\n  ROLE_GUEST: '',\n  ROLE_MEMBER: '',\n  ROLE_RESIDENT: '',\n  ROLE_AGENT: '',\n  ROLE_OFFICIAL: '',\n  MSG_LOGOUT_SUCCESS: '',\n  MSG_LOGOUT_DESC: '',\n  MSG_LOGOUT_ERROR: '',\n  MSG_LOGOUT_RETRY: '',\n  MSG_FEATURE_DEV: '',\n  MSG_PROFILE_SOON: '',\n};\n","/**\n * \n * \n */\nexport const ROUTES = {\n  /**  */\n  HOME: '/maihouses/',\n  \n  /**  */\n  PROPERTY_LIST: '/maihouses/property.html',\n\n  /**  */\n  FEED_AGENT: '/maihouses/feed-agent.html',\n\n  /**  */\n  FEED_CONSUMER: '/maihouses/feed-consumer.html',\n\n  /**  MVP */\n  COMMUNITY_WALL_MVP: '/maihouses/community-wall_mvp.html',\n\n  /** UAG  */\n  UAG: 'https://maihouses.vercel.app/maihouses/uag',\n\n  /**  */\n  TRUST: '/trust',\n\n  /**  */\n  AUTH: '/maihouses/auth.html',\n  \n  /**  -  communityId  */\n  COMMUNITY: (communityId: string): string => `/maihouses/community/${communityId}`,\n  \n  /**  -  communityId  */\n  COMMUNITY_WALL: (communityId: string): string => `/maihouses/community/${communityId}/wall`,\n  \n  /**  -  propertyId  */\n  PROPERTY: (propertyId: string): string => `/maihouses/p/${propertyId}`,\n} as const;\n\n/**  */\nexport const RouteUtils = {\n  /**  */\n  isActive: (currentPath: string, route: string): boolean => {\n    return currentPath === route || currentPath.startsWith(route);\n  },\n  \n  /**  */\n  withQuery: (route: string, params: Record<string, string>): string => {\n    const query = new URLSearchParams(params).toString();\n    return query ? `${route}?${query}` : route;\n  },\n} as const;\n","/**\n * GlobalHeader Component\n * \n *  (P3)\n *  (Community Wall) (Consumer Feed) (Agent Feed)\n *  (Home)  Header \n * \n *  WARNING:  public/feed-consumer.html  public/feed-agent.html\n *  Header \n */\n\nimport { useState, useEffect } from 'react';\nimport { Bell, User, LogOut, ChevronDown } from 'lucide-react';\nimport { useAuth } from '../../hooks/useAuth';\nimport { Logo } from '../Logo/Logo';\nimport { notify } from '../../lib/notify';\nimport { HEADER_STRINGS, GlobalHeaderMode } from '../../constants/header';\nimport { ROUTES } from '../../constants/routes';\n\ninterface GlobalHeaderProps {\n  /**  |  |  */\n  mode: GlobalHeaderMode;\n  /**  ( community ) */\n  title?: string;\n  /**  */\n  className?: string;\n  /**  (Optional) */\n  notificationCount?: number;\n}\n\n// Helper to map role to display string\nconst getRoleLabel = (role: string | undefined) => {\n  switch (role) {\n    case 'resident': return HEADER_STRINGS.ROLE_RESIDENT;\n    case 'agent': return HEADER_STRINGS.ROLE_AGENT;\n    case 'official': return HEADER_STRINGS.ROLE_OFFICIAL;\n    case 'guest': return HEADER_STRINGS.ROLE_GUEST;\n    default: return HEADER_STRINGS.ROLE_MEMBER;\n  }\n};\n\nexport function GlobalHeader({ mode, title, className = '', notificationCount = 0 }: GlobalHeaderProps) {\n  const { isAuthenticated, user, signOut, role } = useAuth();\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\n\n  // \n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      notify.success(HEADER_STRINGS.MSG_LOGOUT_SUCCESS, HEADER_STRINGS.MSG_LOGOUT_DESC);\n      setUserMenuOpen(false);\n      // P3-AUDIT-FIX: Graceful redirect instead of reload\n      window.location.href = '/maihouses/';\n    } catch (error) {\n      console.error('Logout failed:', error);\n      notify.error(HEADER_STRINGS.MSG_LOGOUT_ERROR, HEADER_STRINGS.MSG_LOGOUT_RETRY);\n    }\n  };\n\n  // \n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      const target = e.target as HTMLElement;\n      if (!target.closest('#gh-user-menu-btn') && !target.closest('#gh-user-menu-dropdown')) {\n        setUserMenuOpen(false);\n      }\n    };\n    document.addEventListener('click', handleClickOutside);\n    return () => document.removeEventListener('click', handleClickOutside);\n  }, []);\n\n  //  (Logo)\n  const renderLeft = () => {\n    // P3-AUDIT-FIX: Smart Home Link based on role\n    let homeLink: string = ROUTES.HOME;\n    if (role === 'agent') {\n      homeLink = ROUTES.FEED_AGENT;\n    } else if (role === 'resident' || role === 'member') {\n      homeLink = ROUTES.FEED_CONSUMER;\n    }\n\n    return (\n      <div className=\"flex items-center gap-2\">\n        <Logo showSlogan={false} href={homeLink} showBadge={true} />\n        {mode === 'agent' && (\n          <span className=\"rounded bg-gradient-to-br from-amber-400 to-amber-600 px-2 py-0.5 text-[10px] font-extrabold text-white shadow-sm\">\n            {HEADER_STRINGS.AGENT_BADGE}\n          </span>\n        )}\n      </div>\n    );\n  };\n\n  //  ()\n  const renderCenter = () => {\n    if (mode === 'community' && title) {\n      return (\n        <div className=\"flex-1 text-center\">\n          <h1 className=\"text-brand-900 m-0 text-base font-extrabold\">{title}</h1>\n          <p className=\"text-ink-500 m-0 text-[11px]\">{HEADER_STRINGS.SUBTITLE_WALL}</p>\n        </div>\n      );\n    }\n    return <div className=\"flex-1\" />;\n  };\n\n  return (\n    <header className={`sticky top-0 z-overlay border-b border-brand-100 bg-white/95 backdrop-blur-md transition-all ${className}`}>\n      <div className=\"mx-auto flex h-16 max-w-[1120px] items-center justify-between gap-2.5 px-4\">\n        {/* Left */}\n        {renderLeft()}\n\n        {/* Center */}\n        {renderCenter()}\n\n        {/* Right: Actions */}\n        <div className=\"flex items-center gap-2\">\n        {/* Notifications */}\n        <button \n          className=\"relative inline-flex items-center justify-center rounded-xl border border-brand-100 bg-white p-2 text-brand-700 transition-all hover:bg-brand-50\"\n          aria-label={HEADER_STRINGS.LABEL_NOTIFICATIONS}\n        >\n          <Bell size={18} strokeWidth={2.5} />\n          {notificationCount > 0 && (\n            <span className=\"absolute -right-1 -top-1 flex h-[16px] min-w-[16px] items-center justify-center rounded-full border-2 border-white bg-red-600 text-[10px] font-bold text-white shadow-sm\">\n              {notificationCount > 99 ? '99+' : notificationCount}\n            </span>\n          )}\n        </button>\n\n        {/* User Menu */}\n        {isAuthenticated ? (\n          <div className=\"relative\">\n            <button\n              id=\"gh-user-menu-btn\"\n              onClick={() => setUserMenuOpen(!userMenuOpen)}\n              className=\"flex items-center gap-1.5 rounded-xl border border-brand-100 bg-white py-1 pl-1 pr-2.5 transition-all hover:bg-brand-50 hover:shadow-sm active:scale-95\"\n              aria-label={HEADER_STRINGS.LABEL_AVATAR}\n              aria-expanded={userMenuOpen}\n            >\n              <div className=\"flex size-7 items-center justify-center rounded-full bg-brand-50 text-xs font-bold text-brand-700 ring-1 ring-brand-100\">\n                {user?.email?.charAt(0).toUpperCase() || 'U'}\n              </div>\n              <span className=\"hidden max-w-[80px] truncate text-xs font-bold text-brand-700 md:block\">\n                {user?.user_metadata?.name || ''}\n              </span>\n              <ChevronDown size={14} className={`text-brand-400 transition-transform ${userMenuOpen ? 'rotate-180' : ''}`} />\n            </button>\n\n            {/* Dropdown */}\n            {userMenuOpen && (\n              <div \n                id=\"gh-user-menu-dropdown\"\n                className=\"animate-in fade-in zoom-in-95 absolute right-0 top-full mt-2 w-48 origin-top-right rounded-xl border border-brand-100 bg-white p-1 shadow-xl ring-1 ring-black/5 duration-100 focus:outline-none\"\n                role=\"menu\"\n              >\n                <div className=\"mb-1 border-b border-gray-50 px-3 py-2\">\n                  <p className=\"text-brand-900 truncate text-xs font-bold\">{user?.email}</p>\n                  <p className=\"text-[10px] text-gray-500\">{getRoleLabel(role)}</p>\n                </div>\n                \n                <button\n                  className=\"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold text-gray-700 transition-colors hover:bg-brand-50 hover:text-brand-700\"\n                  role=\"menuitem\"\n                  onClick={() => {\n                    notify.info(HEADER_STRINGS.MSG_FEATURE_DEV, HEADER_STRINGS.MSG_PROFILE_SOON);\n                    setUserMenuOpen(false);\n                  }}\n                >\n                  <User size={16} />\n                  {HEADER_STRINGS.MENU_PROFILE}\n                </button>\n                \n                <button\n                  onClick={handleSignOut}\n                  className=\"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold text-red-600 transition-colors hover:bg-red-50\"\n                  role=\"menuitem\"\n                >\n                  <LogOut size={16} />\n                  {HEADER_STRINGS.BTN_LOGOUT}\n                </button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <a \n            href=\"/maihouses/auth.html?mode=login\"\n            className=\"flex items-center gap-1 rounded-xl bg-brand-700 px-3 py-1.5 text-xs font-bold text-white shadow-sm transition-all hover:bg-brand-600 hover:shadow-md active:scale-95\"\n          >\n            <User size={14} strokeWidth={2.5} />\n            <span>{HEADER_STRINGS.BTN_LOGIN}</span>\n          </a>\n        )}\n      </div>\n      </div>\n    </header>\n  );\n}\n","/**\n * Community Wall Types\n * \n * \n * (Re-export from domain types)\n */\n\nimport { \n  Role, \n  WallTab, \n  Post, \n  Review, \n  Question, \n  CommunityInfo, \n  UnifiedWallData \n} from '../../types/community';\n\nexport type { Role, WallTab, Post, Review, Question, CommunityInfo };\nexport type MockData = UnifiedWallData;\n\n// ============ Permission Types ============\nexport interface Permissions {\n  isGuest: boolean;\n  isMember: boolean;\n  isResident: boolean;\n  isAgent: boolean;\n  isLoggedIn: boolean;\n  canSeeAllReviews: boolean;\n  canSeeAllPosts: boolean;\n  canAccessPrivate: boolean;\n  canPostPublic: boolean;\n  canPostPrivate: boolean;\n  canAskQuestion: boolean;\n  canAnswer: boolean;\n  showExpertBadge: boolean;\n}\n\n// ============ Permission Helper ============\nexport function getPermissions(role: Role): Permissions {\n  const isGuest = role === 'guest';\n  const isMember = role === 'member';\n  const isResident = role === 'resident';\n  const isAgent = role === 'agent';\n\n  return {\n    isGuest,\n    isMember,\n    isResident,\n    isAgent,\n    isLoggedIn: !isGuest,\n    canSeeAllReviews: !isGuest,\n    canSeeAllPosts: !isGuest,\n    canAccessPrivate: isResident || isAgent,\n    canPostPublic: isResident || isAgent,\n    canPostPrivate: isResident,\n    canAskQuestion: !isGuest,\n    canAnswer: isResident || isAgent,\n    showExpertBadge: isAgent,\n  };\n}\n\n// ============ Constants ============\n/** review/post/question */\nexport const GUEST_VISIBLE_COUNT = 2;\n\n/**  */\nexport const SIDEBAR_QUESTIONS_COUNT = 3;\n\n/**  */\nexport const SIDEBAR_HOT_POSTS_COUNT = 2;\n","/**\n * useGuestVisibleItems Hook\n * \n * \n *  ReviewsSectionPostsSectionQASection  slice/hiddenCount \n */\n\nimport { useMemo } from 'react';\nimport { GUEST_VISIBLE_COUNT } from '../pages/Community/types';\n\nexport interface GuestVisibleItemsResult<T> {\n  /**  */\n  visible: T[];\n  /**  */\n  hiddenCount: number;\n  /**  LockedOverlay  */\n  nextHidden: T | null;\n}\n\n/**\n * \n * \n * @param items - \n * @param canSeeAll -  perm.canSeeAllXxx\n * @param visibleCount -  GUEST_VISIBLE_COUNT\n * @returns { visible, hiddenCount, nextHidden }\n * \n * @example\n * // ReviewsSection\n * const { visible, hiddenCount, nextHidden } = useGuestVisibleItems(reviews, perm.canSeeAllReviews);\n * \n * // PostsSection  \n * const { visible, hiddenCount, nextHidden } = useGuestVisibleItems(publicPosts, perm.canSeeAllPosts);\n * \n * // QASection\n * const { visible, hiddenCount, nextHidden } = useGuestVisibleItems(answeredQuestions, perm.isLoggedIn);\n */\nexport function useGuestVisibleItems<T>(\n  items: T[],\n  canSeeAll: boolean,\n  visibleCount: number = GUEST_VISIBLE_COUNT\n): GuestVisibleItemsResult<T> {\n  return useMemo(() => {\n    if (canSeeAll) {\n      return {\n        visible: items,\n        hiddenCount: 0,\n        nextHidden: null,\n      };\n    }\n\n    const visible = items.slice(0, visibleCount);\n    const hiddenCount = Math.max(0, items.length - visibleCount);\n    const nextHidden = hiddenCount > 0 ? items[visibleCount] ?? null : null;\n\n    return {\n      visible,\n      hiddenCount,\n      nextHidden,\n    };\n  }, [items, canSeeAll, visibleCount]);\n}\n","/**\n * LockedOverlay Component\n * \n *  +  CTA \n * \n */\n\nimport type { ReactNode } from 'react';\n\ninterface LockedOverlayProps {\n  /**  */\n  children: ReactNode;\n  /**  5  */\n  hiddenCount: number;\n  /**  */\n  countLabel: string;\n  /**  */\n  benefits?: string[];\n  /** CTA  */\n  ctaText?: string;\n  /** CTA  */\n  onCtaClick?: () => void;\n  /**  CTA  */\n  showCta?: boolean;\n  /**  */\n  visible?: boolean;\n}\n\nexport function LockedOverlay({\n  children,\n  hiddenCount,\n  countLabel,\n  benefits = ['', ''],\n  ctaText = ' / ',\n  onCtaClick,\n  showCta = true,\n  visible = true,\n}: LockedOverlayProps) {\n  // \n  if (hiddenCount <= 0) {\n    return null;\n  }\n\n  //  CSS transition /\n  const isHidden = !visible;\n\n  return (\n    <div \n      className={`relative transition-opacity duration-200 ${\n        isHidden ? 'pointer-events-none opacity-0' : 'opacity-100'\n      }`}\n      aria-hidden={isHidden}\n    >\n      {/*  */}\n      <div className=\"pointer-events-none select-none blur-sm\" aria-hidden=\"true\">\n        {children}\n      </div>\n      \n      {/*  */}\n      <div className=\"absolute inset-0 flex flex-col items-center justify-center rounded-[14px] bg-white/85 p-5 text-center\">\n        <h4 className=\"mb-1 text-sm font-extrabold text-brand-700\">\n            {hiddenCount} {countLabel}\n        </h4>\n        <p className=\"mb-2.5 text-xs text-ink-600\">\n          {benefits.map((b, i) => (\n            <span key={i}>\n              {i > 0 && ''} {b}\n            </span>\n          ))}\n        </p>\n        {showCta && (\n          <button \n            onClick={onCtaClick}\n            className=\"rounded-full bg-gradient-to-br from-brand to-brand-600 px-6 py-2.5 text-[13px] font-bold text-white transition-transform hover:scale-[1.02]\"\n          >\n            {ctaText}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * ReviewsSection Component\n * \n * \n *  LockedOverlay + Tailwind brand \n */\n\nimport { useMemo } from 'react';\nimport type { Role, Review } from '../types';\nimport { getPermissions } from '../types';\nimport { useGuestVisibleItems } from '../../../hooks/useGuestVisibleItems';\nimport { LockedOverlay } from './LockedOverlay';\n\ninterface ReviewEntry {\n  id: string;\n  type: 'pro' | 'con';\n  text: string;\n  author: string;\n  company: string;\n  visits: number;\n  deals: number;\n}\n\ninterface ReviewCardProps {\n  entry: ReviewEntry;\n}\n\nfunction ReviewCard({ entry }: ReviewCardProps) {\n  const isPro = entry.type === 'pro';\n  const hasVisits = entry.visits > 0;\n  const hasDeals = entry.deals > 0;\n\n  return (\n    <div className=\"rounded-[14px] border border-border-light bg-white p-3.5 transition-all hover:border-brand/15 hover:shadow-[0_2px_8px_rgba(0,56,90,0.04)]\">\n      <div className=\"mb-2.5 flex items-center gap-2.5\">\n        <div \n          className=\"flex size-[38px] items-center justify-center rounded-full border-2 border-brand bg-gradient-to-br from-brand-100/50 to-white text-sm font-extrabold text-brand\" \n          aria-hidden=\"true\"\n        >\n          {entry.author.charAt(0)}\n        </div>\n        <div className=\"flex-1\">\n          <div className=\"text-[13px] font-bold text-ink-900\">{entry.author}{entry.company ? `${entry.company}` : ''}</div>\n          {(hasVisits || hasDeals) && (\n            <div className=\"text-[11px] text-ink-600\">\n              {hasVisits && ` ${entry.visits} `}\n              {hasVisits && hasDeals && '  '}\n              {hasDeals && ` ${entry.deals} `}\n            </div>\n          )}\n        </div>\n      </div>\n      <div className={`flex items-start gap-2.5 rounded-[10px] p-2 text-[13px] leading-relaxed ${isPro ? 'bg-gradient-to-br from-brand-50 to-brand-100/50' : 'bg-gradient-to-br from-brand-100/30 to-brand-100'}`}>\n        <span className=\"flex size-6 shrink-0 items-center justify-center text-base\" aria-hidden=\"true\">{isPro ? '' : ''}</span>\n        <span className=\"flex-1 text-ink-900\">{entry.text}</span>\n      </div>\n    </div>\n  );\n}\n\ninterface ReviewsSectionProps {\n  role: Role;\n  reviews: Review[] | { items: Review[] };\n  onUnlock?: () => void;\n}\n\nexport function ReviewsSection({ role, reviews: reviewsProp, onUnlock }: ReviewsSectionProps) {\n  const reviews = Array.isArray(reviewsProp) ? reviewsProp : (reviewsProp?.items ?? []);\n  const perm = getPermissions(role);\n\n  const reviewEntries = useMemo<ReviewEntry[]>(() => {\n    const entries: ReviewEntry[] = [];\n    reviews.forEach(review => {\n      review.pros.forEach((pro, idx) => {\n        if (!pro) return;\n        entries.push({\n          id: `${review.id}-pro-${idx}`,\n          type: 'pro',\n          text: pro,\n          author: review.author,\n          company: review.company,\n          visits: review.visits,\n          deals: review.deals,\n        });\n      });\n      const consArray = Array.isArray(review.cons) ? review.cons : [review.cons];\n      consArray.forEach((con, idx) => {\n        if (!con) return;\n        entries.push({\n          id: `${review.id}-con-${idx}`,\n          type: 'con',\n          text: con,\n          author: review.author,\n          company: review.company,\n          visits: review.visits,\n          deals: review.deals,\n        });\n      });\n    });\n    return entries;\n  }, [reviews]);\n\n  //  hook  pros/cons \n  const { visible: visibleEntries, hiddenCount: hiddenReviewCount, nextHidden: nextHiddenEntry } = \n    useGuestVisibleItems(reviewEntries, perm.canSeeAllReviews);\n\n  return (\n    <section className=\"bg-white/98 overflow-hidden rounded-[18px] border border-border-light shadow-[0_2px_12px_rgba(0,51,102,0.04)]\" aria-labelledby=\"reviews-heading\">\n      <div className=\"from-brand/8 to-brand-600/4 flex items-center justify-between border-b border-brand/5 bg-gradient-to-br px-4 py-3.5\">\n        <div>\n          <h2 id=\"reviews-heading\" className=\"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700\"> </h2>\n          <p className=\"mt-0.5 text-[11px] text-ink-600\"></p>\n        </div>\n        <span className=\"bg-brand/8 flex items-center gap-1 rounded-full border border-brand-600 px-2.5 py-1 text-[10px] font-bold text-brand\">\n          {reviews.length} \n        </span>\n      </div>\n      <div className=\"flex flex-col gap-2.5 p-3.5\">\n        {visibleEntries.map(entry => (\n          <ReviewCard key={entry.id} entry={entry} />\n        ))}\n        \n        {/*  LockedOverlay  */}\n        <LockedOverlay\n          visible={hiddenReviewCount > 0 && !!nextHiddenEntry}\n          hiddenCount={hiddenReviewCount}\n          countLabel=\"\"\n          benefits={['', '']}\n          {...(onUnlock ? { onCtaClick: onUnlock } : {})}\n        >\n          {nextHiddenEntry && (\n            <ReviewCard entry={nextHiddenEntry} />\n          )}\n        </LockedOverlay>\n      </div>\n    </section>\n  );\n}\n","import { useCallback, useRef, useEffect } from 'react';\n\n/**\n * useThrottle Hook\n * \n * \n * \n * @param callback \n * @param delay  (ms)\n * @returns \n */\nexport interface UseThrottleOptions {\n  leading?: boolean;\n  trailing?: boolean;\n}\n\nexport function useThrottle<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number,\n  options: UseThrottleOptions = {}\n): ((...args: Parameters<T>) => void) & { cancel: () => void } {\n  const { leading = true, trailing = false } = options;\n  const lastRun = useRef(0);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const lastArgsRef = useRef<Parameters<T> | null>(null);\n  const callbackRef = useRef(callback);\n\n  //  callback \n  useEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n\n  //  timeout\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  const cancel = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n    lastArgsRef.current = null;\n  }, []);\n\n  const throttled = useCallback(\n    (...args: Parameters<T>) => {\n      const now = Date.now();\n      lastArgsRef.current = args;\n\n      const invoke = () => {\n        if (lastArgsRef.current) {\n          callbackRef.current(...lastArgsRef.current);\n          lastRun.current = Date.now();\n          lastArgsRef.current = null;\n        }\n      };\n\n      const remaining = delay - (now - lastRun.current);\n\n      if (remaining <= 0) {\n        if (timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n          timeoutRef.current = null;\n        }\n        if (leading) {\n          invoke();\n        } else if (trailing) {\n          timeoutRef.current = setTimeout(() => {\n            timeoutRef.current = null;\n            invoke();\n          }, delay);\n        }\n        return;\n      }\n\n      if (trailing && !timeoutRef.current) {\n        timeoutRef.current = setTimeout(() => {\n          timeoutRef.current = null;\n          invoke();\n        }, remaining);\n      }\n    },\n    [delay, leading, trailing]\n  ) as ((...args: Parameters<T>) => void) & { cancel: () => void };\n\n  throttled.cancel = cancel;\n  return throttled;\n}\n","export const STRINGS = {\n  COMPOSER: {\n    LOGIN_TITLE: '',\n    LOGIN_DESC: '',\n    CANCEL: '',\n    GO_LOGIN: '',\n    TITLE_PRIVATE: ' ',\n    TITLE_PUBLIC: ' ',\n    CLOSE: '',\n    CLOSE_ICON: '',\n    VISIBILITY_PUBLIC: ' ',\n    VISIBILITY_PRIVATE: ' ',\n    PLACEHOLDER_COMMUNITY_PRIVATE: '...',\n    PLACEHOLDER_COMMUNITY_PUBLIC: '...',\n    PLACEHOLDER_FEED: '...',\n    UPLOAD_IMAGE: ' ',\n    UPLOAD_IMAGE_DEV: '',\n    SUBMIT: '',\n    SUBMITTING: '...',\n    SUCCESS: '',\n    ERROR_TITLE: '',\n  },\n  COMMUNITY: {\n    AGENT_BADGE: '',\n    OFFICIAL_BADGE: '',\n    RESIDENT_BADGE_SUFFIX: ' ',\n    PRIVATE_POST_LABEL: '',\n    BTN_MSG_AGENT: '',\n    BTN_LIKE: '',\n    BTN_LIKING: '',\n    BTN_REPLY: '',\n    BTN_REPLY_TOOLTIP: '',\n    BTN_REPLY_ARIA: '',\n    BTN_POST_PUBLIC: '',\n    BTN_POST_PRIVATE: '',\n    SECTION_TITLE: '',\n    TAB_PUBLIC: '',\n    TAB_PRIVATE: '',\n    MSG_AGENT_VIEW_ONLY: '',\n    LOCKED_TITLE: '',\n    LOCKED_DESC_GUEST: '',\n    LOCKED_DESC_USER: '',\n    BTN_UNLOCK_GUEST: ' / ',\n    BTN_UNLOCK_USER: '',\n    NOTIFY_LOGIN_TITLE: '',\n    NOTIFY_LOGIN_DESC: '',\n    NOTIFY_PERM_ERROR: '',\n    NOTIFY_PERM_CHECK: '',\n    NOTIFY_PRIVATE_ONLY: '',\n    NOTIFY_PRIVATE_ACCESS_DENIED: '',\n    NOTIFY_PRIVATE_ACCESS_DENIED_DESC: '/',\n    NOTIFY_VERIFY_REQUIRED: '',\n    NOTIFY_VERIFY_REQUIRED_DESC: '',\n    LOCKED_OVERLAY_COUNT_LABEL: '',\n    LOCKED_OVERLAY_BENEFIT_1: '',\n    LOCKED_OVERLAY_BENEFIT_2: '',\n  },\n  VALIDATION: {\n    MIN_LENGTH: (min: number) => ` ${min} `,\n    MAX_LENGTH: (max: number) => ` ${max} `,\n    SUBMIT_ERROR: '',\n  },\n};\n\n","import { useState, useCallback, useEffect } from 'react';\nimport { STRINGS } from '../constants/strings';\n\nexport interface ComposerData {\n  content: string;\n  visibility: 'public' | 'private';\n  communityId?: string | undefined;\n  images?: File[] | undefined;\n}\n\ninterface UseComposerOptions {\n  onSubmit: (data: ComposerData) => Promise<void>;\n  onSuccess?: () => void;\n  onError?: (error: Error) => void;\n  initialVisibility?: 'public' | 'private';\n  minLength?: number;\n  maxLength?: number;\n}\n\nexport function useComposer({\n  onSubmit,\n  onSuccess,\n  onError,\n  initialVisibility = 'public',\n  minLength = 5, // P4-A3:  5\n  maxLength = 500, // P4-A3:  500\n}: UseComposerOptions) {\n  const [content, setContent] = useState('');\n  const [visibility, setVisibility] = useState<'public' | 'private'>(initialVisibility);\n  const [communityId, setCommunityId] = useState<string | undefined>(undefined);\n  const [images, setImages] = useState<File[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // P4-A1:  initialVisibility \n  useEffect(() => {\n    setVisibility(initialVisibility);\n  }, [initialVisibility]);\n\n  const reset = useCallback(() => {\n    setContent('');\n    setVisibility(initialVisibility);\n    setCommunityId(undefined);\n    setImages([]);\n    setError(null);\n    setIsSubmitting(false);\n  }, [initialVisibility]);\n\n  const validate = useCallback(() => {\n    const trimmed = content.trim();\n    if (trimmed.length < minLength) {\n      return STRINGS.VALIDATION.MIN_LENGTH(minLength);\n    }\n    if (trimmed.length > maxLength) {\n      return STRINGS.VALIDATION.MAX_LENGTH(maxLength);\n    }\n    return null;\n  }, [content, minLength, maxLength]);\n\n  const submit = useCallback(async () => {\n    const validationError = validate();\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      // P4-A5:  communityId  images\n      await onSubmit({\n        content: content.trim(),\n        visibility,\n        communityId,\n        images,\n      });\n      \n      // P4-A11:  onSuccess  reset\n      //  onSuccess  state\n      //  onSuccess  hook state\n      onSuccess?.();\n      reset();\n    } catch (err) {\n      const message = err instanceof Error ? err.message : STRINGS.VALIDATION.SUBMIT_ERROR;\n      setError(message);\n      onError?.(err instanceof Error ? err : new Error(message));\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [content, visibility, communityId, images, onSubmit, onSuccess, onError, reset, validate]);\n\n  return {\n    content,\n    setContent,\n    visibility,\n    setVisibility,\n    communityId,\n    setCommunityId,\n    images,\n    setImages,\n    isSubmitting,\n    error,\n    submit,\n    reset,\n    validate,\n    isValid: !validate(),\n    charCount: content.trim().length, // P4-A8:  trimmed length\n    minLength,\n    maxLength,\n  };\n}\n","import { useEffect } from 'react';\n\ninterface BodyScrollLockOptions {\n  inertTargetId?: string;\n}\n\n/**\n * useBodyScrollLock\n *\n *  Body  inert/aria-hidden\n */\nexport function useBodyScrollLock(isLocked: boolean, options?: BodyScrollLockOptions) {\n  useEffect(() => {\n    if (!isLocked) return undefined;\n\n    const previousOverflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n\n    const inertTarget = options?.inertTargetId\n      ? document.getElementById(options.inertTargetId)\n      : document.getElementById('root');\n\n    const previousAriaHidden = inertTarget?.getAttribute('aria-hidden') ?? null;\n    const hadInert = inertTarget?.hasAttribute('inert') ?? false;\n\n    if (inertTarget) {\n      inertTarget.setAttribute('aria-hidden', 'true');\n      inertTarget.setAttribute('inert', 'true');\n    }\n\n    return () => {\n      document.body.style.overflow = previousOverflow;\n      if (inertTarget) {\n        if (previousAriaHidden === null) {\n          inertTarget.removeAttribute('aria-hidden');\n        } else {\n          inertTarget.setAttribute('aria-hidden', previousAriaHidden);\n        }\n\n        if (!hadInert) {\n          inertTarget.removeAttribute('inert');\n        }\n      }\n    };\n  }, [isLocked, options?.inertTargetId]);\n}\n","import { useEffect, useRef } from 'react';\n\ninterface FocusTrapProps {\n  children: React.ReactNode;\n  isActive: boolean;\n  initialFocusRef?: React.RefObject<HTMLElement>;\n}\n\n/**\n * FocusTrap Component\n * \n *  (Focus Trap)\n * 1.  Tab \n * 2. \n * 3. \n * 4. \n */\nexport function FocusTrap({ children, isActive, initialFocusRef }: FocusTrapProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // 1. \n  useEffect(() => {\n    if (isActive) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      // \n      if (initialFocusRef?.current) {\n        initialFocusRef.current.focus();\n      } else if (containerRef.current) {\n        // \n        const focusable = containerRef.current.querySelectorAll(\n          'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        );\n        if (focusable.length > 0) {\n          (focusable[0] as HTMLElement).focus();\n        }\n      }\n    } else {\n      // \n      if (previousFocusRef.current) {\n        previousFocusRef.current.focus();\n      }\n    }\n  }, [isActive, initialFocusRef]);\n\n  // 2.  Tab \n  useEffect(() => {\n    if (!isActive) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      const container = containerRef.current;\n      if (!container) return;\n\n      const focusableElements = container.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      \n      const firstElement = focusableElements[0] as HTMLElement;\n      const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n      if (e.shiftKey) {\n        // Shift + Tab: \n        if (document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement.focus();\n        }\n      } else {\n        // Tab: \n        if (document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isActive]);\n\n  return (\n    <div ref={containerRef}>\n      {children}\n    </div>\n  );\n}\n","import { memo, useCallback } from 'react';\nimport { FocusTrap } from '../ui/FocusTrap';\nimport { STRINGS } from '../../constants/strings';\nimport { ROUTES } from '../../constants/routes';\n\ninterface LoginPromptProps {\n  readonly isOpen: boolean;\n  readonly onClose: () => void;\n}\n\nexport const LoginPrompt = memo(function LoginPrompt({ isOpen, onClose }: LoginPromptProps) {\n  const handleClose = useCallback(() => {\n    onClose();\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <FocusTrap isActive={isOpen}>\n      <div \n        className=\"fixed inset-0 z-modal flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"login-title\"\n      >\n        <div className=\"w-full max-w-md rounded-2xl bg-white p-6 text-center shadow-xl\">\n          <h3 id=\"login-title\" className=\"mb-2 text-xl font-bold text-gray-900\">\n            {STRINGS.COMPOSER.LOGIN_TITLE}\n          </h3>\n          <p className=\"mb-6 text-gray-600\">\n            {STRINGS.COMPOSER.LOGIN_DESC}\n          </p>\n          <div className=\"flex justify-center gap-4\">\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"rounded-lg px-4 py-2 text-gray-600 transition-colors hover:bg-gray-100\"\n            >\n              {STRINGS.COMPOSER.CANCEL}\n            </button>\n            <a\n              href={ROUTES.AUTH}\n              className=\"rounded-lg bg-brand-600 px-4 py-2 text-white transition-colors hover:bg-brand-700\"\n            >\n              {STRINGS.COMPOSER.GO_LOGIN}\n            </a>\n          </div>\n        </div>\n      </div>\n    </FocusTrap>\n  );\n});\n","import { useEffect, useRef } from 'react';\nimport { useAuth } from '../../hooks/useAuth';\nimport { useComposer, ComposerData } from '../../hooks/useComposer';\nimport { useBodyScrollLock } from '../../hooks/useBodyScrollLock';\nimport { notify } from '../../lib/notify';\nimport { FocusTrap } from '../ui/FocusTrap';\nimport { LoginPrompt } from './LoginPrompt';\nimport { STRINGS } from '../../constants/strings';\n\nconst FOCUS_DELAY_MS = 50; //  textarea \n\ninterface ComposerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: ComposerData) => Promise<void>;\n  mode: 'feed' | 'community';\n  initialVisibility?: 'public' | 'private';\n  placeholder?: string;\n}\n\nexport function ComposerModal({\n  isOpen,\n  onClose,\n  onSubmit,\n  mode,\n  initialVisibility = 'public',\n  placeholder,\n}: ComposerModalProps) {\n  const { isAuthenticated } = useAuth();\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const {\n    content,\n    setContent,\n    visibility,\n    setVisibility,\n    isSubmitting,\n    error,\n    submit,\n    reset,\n    isValid,\n    charCount,\n    maxLength,\n    minLength,\n  } = useComposer({\n    onSubmit,\n    onSuccess: () => {\n      notify.success(STRINGS.COMPOSER.SUCCESS);\n      onClose();\n    },\n    onError: (err) => {\n      notify.error(STRINGS.COMPOSER.ERROR_TITLE, err.message);\n    },\n    initialVisibility,\n  });\n\n  // Body scroll lock & inert background\n  useBodyScrollLock(isOpen, { inertTargetId: 'root' });\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';\n    }\n  }, [content, isOpen]);\n\n  // Reset when closed\n  useEffect(() => {\n    if (!isOpen) {\n      reset();\n    }\n  }, [isOpen, reset]);\n\n  // Close on Escape & Shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && !isSubmitting) {\n        onClose();\n      }\n      // P4-A6:  Ctrl+Enter \n      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {\n        if (isValid && !isSubmitting) {\n          submit();\n        }\n      }\n    };\n    if (isOpen) {\n      window.addEventListener('keydown', handleKeyDown);\n    }\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, onClose, isSubmitting, isValid, submit]);\n\n  // Focus on open\n  useEffect(() => {\n    if (isOpen && textareaRef.current) {\n      setTimeout(() => {\n        textareaRef.current?.focus();\n      }, FOCUS_DELAY_MS);\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  // Not logged in state\n  if (!isAuthenticated) {\n    return <LoginPrompt isOpen={isOpen} onClose={onClose} />;\n  }\n\n  const isPrivate = visibility === 'private';\n  const displayPlaceholder = placeholder || (\n    mode === 'community' \n      ? (isPrivate ? STRINGS.COMPOSER.PLACEHOLDER_COMMUNITY_PRIVATE : STRINGS.COMPOSER.PLACEHOLDER_COMMUNITY_PUBLIC)\n      : STRINGS.COMPOSER.PLACEHOLDER_FEED\n  );\n\n  return (\n    <FocusTrap isActive={isOpen} initialFocusRef={textareaRef}>\n      <div className=\"fixed inset-0 z-modal flex items-center justify-center p-4\">\n        {/* Backdrop */}\n        <button\n          type=\"button\"\n          className=\"absolute inset-0 w-full h-full bg-black/50 backdrop-blur-sm border-0 cursor-default\"\n          onClick={() => !isSubmitting && onClose()}\n          aria-label={STRINGS.COMPOSER.CLOSE}\n          tabIndex={-1}\n        />\n\n        {/* Dialog Content */}\n        <div\n          ref={dialogRef}\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"composer-title\"\n          className=\"relative z-10 w-full max-w-lg rounded-2xl bg-white shadow-2xl flex flex-col max-h-[90dvh]\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between border-b border-gray-100 px-4 py-3\">\n            <h2 id=\"composer-title\" className=\"text-lg font-bold text-gray-800 flex items-center gap-2\">\n              {mode === 'community' && isPrivate ? STRINGS.COMPOSER.TITLE_PRIVATE : STRINGS.COMPOSER.TITLE_PUBLIC}\n            </h2>\n            <button\n              onClick={onClose}\n              disabled={isSubmitting}\n              aria-label={STRINGS.COMPOSER.CLOSE}\n              className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50\"\n            >\n              {STRINGS.COMPOSER.CLOSE_ICON}\n            </button>\n          </div>\n\n          {/* Body */}\n          <div className=\"p-4 flex-1 overflow-y-auto\">\n            {/* Visibility Toggle (Community Mode Only) */}\n            {mode === 'community' && (\n              <div className=\"flex gap-2 mb-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setVisibility('public')}\n                  className={`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors border ${\n                    visibility === 'public'\n                      ? 'bg-brand-50 border-brand-200 text-brand-700'\n                      : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'\n                  }`}\n                >\n                  {STRINGS.COMPOSER.VISIBILITY_PUBLIC}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setVisibility('private')}\n                  className={`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors border ${\n                    visibility === 'private'\n                      ? 'bg-amber-50 border-amber-200 text-amber-700'\n                      : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'\n                  }`}\n                >\n                  {STRINGS.COMPOSER.VISIBILITY_PRIVATE}\n                </button>\n              </div>\n            )}\n\n            <textarea\n              ref={textareaRef}\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              placeholder={displayPlaceholder}\n              className=\"w-full min-h-[150px] resize-none text-base text-gray-800 placeholder:text-gray-400 focus:outline-none\"\n              disabled={isSubmitting}\n              minLength={minLength}\n              maxLength={maxLength}\n              aria-describedby=\"composer-counter\"\n            />\n\n            {/* Image Upload Placeholder (P4-5) */}\n            <div className=\"mt-4\">\n              <button\n                type=\"button\"\n                onClick={() => notify.dev(STRINGS.COMPOSER.UPLOAD_IMAGE_DEV)}\n                className=\"inline-flex items-center gap-2 text-gray-500 hover:text-brand-600 transition-colors text-sm font-medium px-3 py-2 rounded-lg hover:bg-gray-50\"\n              >\n                {STRINGS.COMPOSER.UPLOAD_IMAGE}\n              </button>\n            </div>\n\n            {error && (\n              <div className=\"mt-3 p-3 bg-red-50 text-red-600 text-sm rounded-lg\" role=\"alert\">\n                {error}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"border-t border-gray-100 px-4 py-3 flex items-center justify-between bg-gray-50 rounded-b-2xl\">\n            <span\n              id=\"composer-counter\"\n              className={`text-xs ${charCount > maxLength ? 'text-red-500' : 'text-gray-400'}`}\n            >\n              {charCount} / {maxLength}\n            </span>\n            <div className=\"flex gap-3\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                disabled={isSubmitting}\n                className=\"px-4 py-2 text-gray-600 font-medium hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50\"\n              >\n                {STRINGS.COMPOSER.CANCEL}\n              </button>\n              <button\n                type=\"button\"\n                onClick={submit}\n                disabled={!isValid || isSubmitting}\n                className=\"px-6 py-2 bg-brand-600 text-white font-bold rounded-lg hover:bg-brand-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow\"\n              >\n                {isSubmitting ? STRINGS.COMPOSER.SUBMITTING : STRINGS.COMPOSER.SUBMIT}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </FocusTrap>\n  );\n}\n","const relativeTimeFormatter = new Intl.RelativeTimeFormat('zh-TW', { numeric: 'auto' });\n\nconst MS_IN_MINUTE = 60 * 1000;\nconst MS_IN_HOUR = 60 * MS_IN_MINUTE;\nconst MS_IN_DAY = 24 * MS_IN_HOUR;\nconst MS_IN_WEEK = 7 * MS_IN_DAY;\nconst MS_IN_MONTH = 30 * MS_IN_DAY;\nconst MS_IN_YEAR = 365 * MS_IN_DAY;\n\nconst parseDateValue = (value: string | number | Date): Date | null => {\n  if (value instanceof Date) return Number.isNaN(value.getTime()) ? null : value;\n  if (typeof value === 'number') {\n    const date = new Date(value);\n    return Number.isNaN(date.getTime()) ? null : date;\n  }\n  const date = new Date(value);\n  return Number.isNaN(date.getTime()) ? null : date;\n};\n\nexport function formatRelativeTimeLabel(value: string | number | Date): string {\n  const parsed = parseDateValue(value);\n  if (!parsed) {\n    return typeof value === 'string' && value.trim() ? value : '';\n  }\n\n  const diff = Date.now() - parsed.getTime();\n  if (diff < 0) {\n    return parsed.toLocaleDateString('zh-TW');\n  }\n\n  if (diff < MS_IN_MINUTE) return '';\n  if (diff < MS_IN_HOUR) {\n    const minutes = Math.round(diff / MS_IN_MINUTE);\n    return relativeTimeFormatter.format(-minutes, 'minute');\n  }\n  if (diff < MS_IN_DAY) {\n    const hours = Math.round(diff / MS_IN_HOUR);\n    return relativeTimeFormatter.format(-hours, 'hour');\n  }\n  if (diff < MS_IN_WEEK) {\n    const days = Math.round(diff / MS_IN_DAY);\n    return relativeTimeFormatter.format(-days, 'day');\n  }\n  if (diff < MS_IN_MONTH) {\n    const weeks = Math.round(diff / MS_IN_WEEK);\n    return relativeTimeFormatter.format(-weeks, 'week');\n  }\n  if (diff < MS_IN_YEAR) {\n    const months = Math.round(diff / MS_IN_MONTH);\n    return relativeTimeFormatter.format(-months, 'month');\n  }\n  const years = Math.round(diff / MS_IN_YEAR);\n  return relativeTimeFormatter.format(-years, 'year');\n}\n\nexport function mockTimestampMinutesAgo(minutesAgo: number): string {\n  const baseline = Date.now() - minutesAgo * MS_IN_MINUTE;\n  return new Date(baseline).toISOString();\n}\n","/**\n * PostsSection Component\n * \n * /\n *  LockedOverlay + Tailwind brand \n */\n\nimport { useState, useCallback, useId, useMemo, useRef, useEffect } from 'react';\nimport type { KeyboardEvent } from 'react';\nimport type { Role, Post, WallTab } from '../types';\nimport { getPermissions } from '../types';\nimport { useGuestVisibleItems } from '../../../hooks/useGuestVisibleItems';\nimport { useThrottle } from '../../../hooks/useThrottle';\nimport { LockedOverlay } from './LockedOverlay';\nimport { ComposerModal } from '../../../components/Composer/ComposerModal';\nimport { formatRelativeTimeLabel } from '../../../lib/time';\nimport { notify } from '../../../lib/notify';\nimport { STRINGS } from '../../../constants/strings';\n\n//  COMMUNITY \nconst { COMMUNITY: S } = STRINGS;\n\n// P2-UI-4:  Badge \nfunction PostBadge({ post }: { post: Post }) {\n  const isAgent = post.type === 'agent';\n  const isOfficial = post.type === 'official';\n\n  if (isAgent) {\n    return <span className=\"rounded bg-brand-100 px-1.5 py-0.5 text-[9px] font-bold text-brand-600\">{S.AGENT_BADGE}</span>;\n  }\n  if (isOfficial) {\n    return <span className=\"rounded bg-brand-50 px-1.5 py-0.5 text-[9px] font-bold text-brand\">{S.OFFICIAL_BADGE}</span>;\n  }\n  if (post.floor) {\n    return <span className=\"rounded bg-brand-100 px-1.5 py-0.5 text-[9px] font-bold text-brand\">{post.floor}{S.RESIDENT_BADGE_SUFFIX}</span>;\n  }\n  return null;\n}\n\ninterface PostCardProps {\n  post: Post;\n  onLike?: (postId: number | string) => Promise<void> | void;\n}\n\nfunction PostCard({ post, onLike }: PostCardProps) {\n  const [isLiking, setIsLiking] = useState(false);\n  const isMountedRef = useRef(true);\n  const isAgent = post.type === 'agent';\n  const displayTime = formatRelativeTimeLabel(post.time);\n\n  // P2-UI-2:  Emoji \n  const stats = post.likes !== undefined \n    ? <span className=\"flex items-center gap-1\"><span role=\"img\" aria-label=\"\"></span> {post.likes}</span>\n    : post.views !== undefined\n      ? <span className=\"flex items-center gap-1\"><span role=\"img\" aria-label=\"\"></span> {post.views}</span>\n      : null;\n  const commentsStat = post.comments !== undefined\n    ? <span className=\"flex items-center gap-1\"><span role=\"img\" aria-label=\"\"></span> {post.comments}</span>\n    : null;\n\n  useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  // P2-UI-3:  Throttle Hookleading+trailing\n  const handleLike = useThrottle(\n    async () => {\n      if (!onLike || isLiking) return;\n\n      setIsLiking(true);\n      try {\n        await onLike(post.id);\n      } catch (error) {\n        console.error('Failed to toggle like', error);\n        notify.error('', '');\n      } finally {\n        if (isMountedRef.current) {\n          setIsLiking(false);\n        }\n      }\n    },\n    1000,\n    { trailing: true }\n  );\n\n  return (\n    <article className=\"flex gap-2.5 rounded-[14px] border border-border-light bg-white p-3 transition-all hover:border-brand-600 hover:shadow-[0_2px_8px_rgba(0,56,90,0.06)]\">\n      <div \n        className={`flex size-10 shrink-0 items-center justify-center rounded-full border-2 bg-gradient-to-br from-brand-100/50 to-white text-base font-extrabold ${isAgent ? 'border-brand-light text-brand-600' : 'border-brand text-brand'}`}\n        aria-hidden=\"true\"\n      >\n        {post.author.charAt(0)}\n      </div>\n      <div className=\"flex flex-1 flex-col gap-1.5\">\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <span className=\"text-[13px] font-bold text-ink-900\">{post.author}</span>\n          <PostBadge post={post} />\n          <span className=\"text-[11px] text-ink-600\">{displayTime}</span>\n        </div>\n        <div className=\"text-[13px] leading-relaxed text-ink-900\">\n          <b>{post.title}</b><br/>\n          {post.content}\n        </div>\n        <div className=\"flex gap-3 text-[11px] text-ink-600\">\n          {stats}\n          {commentsStat}\n          {post.private && <span className=\"flex items-center gap-1\"><span role=\"img\" aria-label=\"\"></span> {S.PRIVATE_POST_LABEL}</span>}\n        </div>\n        <div className=\"mt-1 flex gap-2\">\n          {isAgent ? (\n            <button \n              className=\"bg-brand/6 hover:bg-brand/12 flex items-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition-all\"\n              aria-label={S.BTN_MSG_AGENT}\n            >\n              <span role=\"img\" aria-label=\"\"></span> {S.BTN_MSG_AGENT}\n            </button>\n          ) : (\n            <>\n              <button \n                className=\"bg-brand/6 hover:bg-brand/12 flex items-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition-all disabled:cursor-not-allowed disabled:opacity-60\"\n                onClick={handleLike}\n                aria-label=\"\"\n                aria-busy={isLiking}\n                disabled={isLiking}\n              >\n                {isLiking ? <><span role=\"img\" aria-label=\"\"></span> {S.BTN_LIKING}</> : <><span role=\"img\" aria-label=\"\"></span> {S.BTN_LIKE}</>}\n              </button>\n              <button \n                className=\"bg-brand/6 flex cursor-not-allowed items-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand/50 opacity-60 transition-all\"\n                aria-label={S.BTN_REPLY_ARIA}\n                title={S.BTN_REPLY_TOOLTIP}\n                disabled\n              >\n                <span role=\"img\" aria-label=\"\"></span> {S.BTN_REPLY}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </article>\n  );\n}\n\ninterface PostsSectionProps {\n  role: Role;\n  currentTab: WallTab;\n  onTabChange: (tab: WallTab) => void;\n  publicPosts: Post[];\n  privatePosts: Post[];\n  onLike?: (postId: number | string) => Promise<void> | void;\n  onCreatePost?: (content: string, visibility: 'public' | 'private') => void;\n  onUnlock?: () => void;\n}\n\nexport function PostsSection({ \n  role, \n  currentTab, \n  onTabChange, \n  publicPosts, \n  privatePosts,\n  onLike,\n  onCreatePost,\n  onUnlock,\n}: PostsSectionProps) {\n  const perm = getPermissions(role);\n  //  perm \n  const isGuest = perm.isGuest;\n  const tabListId = useId();\n  const publicTabId = `${tabListId}-public`;\n  const privateTabId = `${tabListId}-private`;\n  const panelId = `${tabListId}-panel`;\n  const tabRefs = useRef<Record<WallTab, HTMLButtonElement | null>>({\n    public: null,\n    private: null,\n  });\n\n  // PostModal \n  const [postModalOpen, setPostModalOpen] = useState(false);\n  const [postModalVisibility, setPostModalVisibility] = useState<'public' | 'private'>('public');\n\n  const openPostModal = (visibility: 'public' | 'private') => {\n    if (isGuest) {\n      notify.error(S.NOTIFY_LOGIN_TITLE, S.NOTIFY_LOGIN_DESC);\n      return;\n    }\n    if (visibility === 'public' && !perm.canPostPublic) {\n      notify.error(S.NOTIFY_PERM_ERROR, S.NOTIFY_PERM_CHECK);\n      return;\n    }\n    if (visibility === 'private' && !perm.canPostPrivate) {\n      notify.error(S.NOTIFY_PRIVATE_ONLY);\n      return;\n    }\n    setPostModalVisibility(visibility);\n    setPostModalOpen(true);\n  };\n\n  //  hook \n  const { visible: visiblePublic, hiddenCount: hiddenPublicCount, nextHidden: nextHiddenPost } = \n    useGuestVisibleItems(publicPosts, perm.canSeeAllPosts);\n\n  const focusTab = useCallback((tab: WallTab) => {\n    tabRefs.current[tab]?.focus();\n  }, []);\n\n  const activeTabs = useMemo<WallTab[]>(() => {\n    return perm.canAccessPrivate ? ['public', 'private'] : ['public'];\n  }, [perm.canAccessPrivate]);\n\n  const handlePrivateClick = () => {\n    if (!perm.canAccessPrivate) {\n      notify.error(\n        perm.isGuest ? S.NOTIFY_PRIVATE_ACCESS_DENIED : S.NOTIFY_VERIFY_REQUIRED,\n        perm.isGuest ? ` ${S.NOTIFY_PRIVATE_ACCESS_DENIED_DESC}` : ` ${S.NOTIFY_VERIFY_REQUIRED_DESC}`\n      );\n      return;\n    }\n    onTabChange('private');\n  };\n\n  const handleTabKeyDown = useCallback((event: KeyboardEvent<HTMLButtonElement>, current: WallTab) => {\n    if (!['ArrowLeft', 'ArrowRight', 'Home', 'End'].includes(event.key)) {\n      return;\n    }\n    event.preventDefault();\n\n    const lastAvailableTab = activeTabs[activeTabs.length - 1];\n\n    if (event.key === 'Home') {\n      focusTab('public');\n      if (currentTab !== 'public') {\n        onTabChange('public');\n      }\n      return;\n    }\n\n    if (event.key === 'End') {\n      //  Tab\n      if (lastAvailableTab && lastAvailableTab !== currentTab) {\n        focusTab(lastAvailableTab);\n        onTabChange(lastAvailableTab);\n      } else if (lastAvailableTab) {\n        focusTab(lastAvailableTab);\n      }\n      return;\n    }\n\n    const currentIndex = activeTabs.indexOf(current);\n    if (currentIndex === -1) return;\n\n    const delta = event.key === 'ArrowLeft' ? -1 : 1;\n    const nextIndex = (currentIndex + delta + activeTabs.length) % activeTabs.length;\n    const nextTab = activeTabs[nextIndex];\n    if (!nextTab) {\n      return;\n    }\n\n    if (nextTab === 'private' && !perm.canAccessPrivate) {\n      focusTab('public');\n      onTabChange('public');\n      return;\n    }\n\n    focusTab(nextTab);\n    onTabChange(nextTab);\n  }, [activeTabs, currentTab, focusTab, onTabChange, perm.canAccessPrivate]);\n\n  return (\n    <section id=\"public-wall\" className=\"bg-white/98 scroll-mt-20 overflow-hidden rounded-[18px] border border-border-light shadow-[0_2px_12px_rgba(0,51,102,0.04)]\" aria-labelledby=\"posts-heading\">\n      <div className=\"from-brand/3 to-brand-600/1 flex items-center justify-between border-b border-brand/5 bg-gradient-to-br px-4 py-3.5\">\n        <h2 id=\"posts-heading\" className=\"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700\">\n          <span role=\"img\" aria-label=\"\"></span> {S.SECTION_TITLE}\n        </h2>\n      </div>\n      \n      {/* Tabs */}\n      <div className=\"flex flex-wrap gap-1.5 px-3.5 pb-3.5 pt-2\" role=\"tablist\" aria-label=\"\">\n        <button \n          role=\"tab\"\n          id={publicTabId}\n          ref={(node) => { tabRefs.current.public = node; }}\n          aria-selected={currentTab === 'public'}\n          aria-controls={panelId}\n          onClick={() => onTabChange('public')}\n          onKeyDown={(event) => handleTabKeyDown(event, 'public')}\n          tabIndex={currentTab === 'public' ? 0 : -1}\n          className={`rounded-full border px-3.5 py-1.5 text-xs font-semibold transition-all ${currentTab === 'public' ? 'border-brand-600 bg-brand/10 font-bold text-brand' : 'hover:bg-brand/8 border-transparent bg-brand-100/80 text-ink-600 hover:text-brand'}`}\n        >\n          {S.TAB_PUBLIC}\n        </button>\n        <button \n          role=\"tab\"\n          id={privateTabId}\n          ref={(node) => { tabRefs.current.private = node; }}\n          aria-selected={currentTab === 'private'}\n          aria-controls={panelId}\n          aria-disabled={!perm.canAccessPrivate}\n          onClick={handlePrivateClick}\n          onKeyDown={(event) => handleTabKeyDown(event, 'private')}\n          tabIndex={perm.canAccessPrivate ? (currentTab === 'private' ? 0 : -1) : -1}\n          className={`rounded-full border px-3.5 py-1.5 text-xs font-semibold transition-all ${currentTab === 'private' ? 'border-brand-600 bg-brand/10 font-bold text-brand' : 'hover:bg-brand/8 border-transparent bg-brand-100/80 text-ink-600 hover:text-brand'} ${!perm.canAccessPrivate ? 'opacity-60' : ''}`}\n        >\n          {S.TAB_PRIVATE} {!perm.canAccessPrivate && <span role=\"img\" aria-label=\"\"></span>}\n        </button>\n      </div>\n\n      {/* Content */}\n      <div\n        id={panelId}\n        role=\"tabpanel\"\n        aria-labelledby={currentTab === 'public' ? publicTabId : privateTabId}\n        tabIndex={0}\n        className=\"flex flex-col gap-2.5 px-3.5 pb-3.5\"\n      >\n        {currentTab === 'public' ? (\n          <>\n            {visiblePublic.map(post => (\n              <PostCard key={post.id} post={post} {...(onLike ? { onLike } : {})} />\n            ))}\n            \n            {/*  LockedOverlay  */}\n            <LockedOverlay\n              visible={hiddenPublicCount > 0 && !!nextHiddenPost}\n              hiddenCount={hiddenPublicCount}\n              countLabel={S.LOCKED_OVERLAY_COUNT_LABEL}\n              benefits={[S.LOCKED_OVERLAY_BENEFIT_1, S.LOCKED_OVERLAY_BENEFIT_2]}\n              showCta\n              {...(onUnlock ? { onCtaClick: onUnlock } : {})}\n            >\n              {nextHiddenPost && (\n                <PostCard post={nextHiddenPost} />\n              )}\n            </LockedOverlay>\n            \n            {perm.canPostPublic && (\n              <div className=\"bg-brand/3 flex justify-center rounded-[14px] border border-dashed border-border-light p-5\">\n                <button \n                  onClick={() => openPostModal('public')}\n                  className=\"bg-brand/6 hover:bg-brand/12 flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand\"\n                >\n                  <span role=\"img\" aria-label=\"\"></span> {S.BTN_POST_PUBLIC}\n                </button>\n              </div>\n            )}\n          </>\n        ) : perm.canAccessPrivate ? (\n          <>\n            {privatePosts.map(post => (\n              <PostCard key={post.id} post={post} {...(onLike ? { onLike } : {})} />\n            ))}\n            {perm.canPostPrivate ? (\n              <div className=\"bg-brand/3 flex justify-center rounded-[14px] border border-dashed border-border-light p-5\">\n                <button \n                  onClick={() => openPostModal('private')}\n                  className=\"bg-brand/6 hover:bg-brand/12 flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand\"\n                >\n                  <span role=\"img\" aria-label=\"\"></span> {S.BTN_POST_PRIVATE}\n                </button>\n              </div>\n            ) : (\n              <p className=\"py-3 text-center text-[11px] text-ink-600\"> {S.MSG_AGENT_VIEW_ONLY}</p>\n            )}\n          </>\n        ) : (\n          <div className=\"bg-brand/3 flex flex-col items-center justify-center rounded-[14px] px-5 py-10 text-center\">\n            <div className=\"mb-3 text-5xl opacity-50\" aria-hidden=\"true\"></div>\n            <h4 className=\"mb-1.5 text-sm font-bold text-brand-700\">{S.LOCKED_TITLE}</h4>\n            <p className=\"mb-4 text-xs text-ink-600\">{perm.isGuest ? S.LOCKED_DESC_GUEST : S.LOCKED_DESC_USER}</p>\n            <button \n              onClick={onUnlock}\n              className=\"rounded-full bg-brand px-5 py-2.5 text-xs font-bold text-white\"\n            >\n              {perm.isGuest ? S.BTN_UNLOCK_GUEST : S.BTN_UNLOCK_USER}\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/*  Modal - B3: guest  openPostModal  role  */}\n      <ComposerModal\n        isOpen={postModalOpen}\n        onClose={() => setPostModalOpen(false)}\n        onSubmit={async (data) => {\n          if (isGuest) {\n            notify.error(S.NOTIFY_LOGIN_TITLE, S.NOTIFY_LOGIN_DESC);\n            return;\n          }\n          if (onCreatePost) {\n            await onCreatePost(data.content, data.visibility);\n          }\n        }}\n        mode=\"community\"\n        initialVisibility={postModalVisibility}\n      />\n    </section>\n  );\n}\n","/**\n * QASection Component\n * \n * \n *  LockedOverlay + Tailwind brand \n */\n\nimport { useState, useEffect, useRef } from 'react';\nimport type { Role, Question, Permissions } from '../types';\nimport { getPermissions } from '../types';\nimport { useGuestVisibleItems } from '../../../hooks/useGuestVisibleItems';\nimport { LockedOverlay } from './LockedOverlay';\nimport { formatRelativeTimeLabel } from '../../../lib/time';\n\ninterface QACardProps {\n  q: Question & { hasMoreAnswers?: boolean; totalAnswers?: number };\n  perm: Permissions;\n  isUnanswered?: boolean;\n  onAnswer?: (question: Question) => void;\n  isAnswering?: boolean;\n  onUnlock?: () => void;\n  /**  LockedOverlay  */\n  hideUnlockButton?: boolean;\n}\n\nfunction QACard({ q, perm, isUnanswered = false, onAnswer, isAnswering, onUnlock, hideUnlockButton = false }: QACardProps) {\n  const displayTime = formatRelativeTimeLabel(q.time);\n  return (\n    <article className={`rounded-[12px] border p-3 transition-all hover:border-brand/15 ${isUnanswered ? 'border-brand-light/30 bg-gradient-to-br from-brand-50 to-brand-100/30' : 'border-border-light bg-white'}`}>\n      <div className=\"mb-1.5 text-[13px] font-bold leading-snug text-brand-700\">Q: {q.question}</div>\n      <div className=\"mb-2 flex flex-wrap items-center gap-1.5 text-[11px] text-ink-600\">\n        <span> </span>\n        <span> {displayTime}</span>\n        {isUnanswered ? (\n          <span className=\"font-bold text-brand-light\"> </span>\n        ) : (\n          <span> {q.answersCount} </span>\n        )}\n      </div>\n      \n      {isUnanswered ? (\n        <div className=\"bg-brand/2 mt-2 rounded-[10px] p-4 text-center text-[13px] text-ink-600\">\n           \n        </div>\n      ) : (\n        <div className=\"flex flex-col gap-1.5 border-l-[3px] border-border-light pl-3\">\n          {q.answers.map((a, idx) => (\n            <div key={idx} className=\"py-1.5 text-[12px] leading-relaxed\">\n              <div className=\"mb-1 flex flex-wrap items-center gap-1\">\n                <span className={`rounded px-2 py-0.5 text-[10px] font-bold ${a.type === 'agent' ? 'bg-brand-100 text-brand-600' : a.type === 'official' ? 'bg-brand-50 text-brand' : 'bg-brand-100 text-brand'}`}>\n                  {a.type === 'agent' ? ' ' : a.type === 'official' ? ` ${a.author}` : ` ${a.author}`}\n                </span>\n                {a.expert && <span className=\"rounded bg-brand-100 px-2 py-0.5 text-[10px] font-bold text-brand-600\"> </span>}\n              </div>\n              {a.content}\n            </div>\n          ))}\n          \n          {/*  X +  LockedOverlay  */}\n          {!hideUnlockButton && q.hasMoreAnswers && q.totalAnswers && (\n            <div className=\"mt-2 rounded-lg border border-brand/10 bg-gradient-to-r from-brand-50 to-brand-100/50 p-3 text-center\">\n              <p className=\"mb-2 text-[13px] text-ink-700\">\n                  <span className=\"font-bold text-brand\">{q.totalAnswers - q.answers.length}</span> \n              </p>\n              <button\n                type=\"button\"\n                onClick={onUnlock}\n                className=\"rounded-lg bg-brand px-4 py-2 text-[12px] font-bold text-white shadow-sm transition-all hover:bg-brand-dark hover:shadow-md\"\n              >\n                 /  \n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {perm.canAnswer && (\n        <div className=\"mt-2\">\n          <button \n            type=\"button\"\n            className={`flex w-full items-center justify-center gap-1 rounded-lg border px-2.5 py-1.5 text-[11px] font-semibold transition-all ${isUnanswered ? 'border-brand-light/30 bg-brand-light/10 text-brand-600' : 'bg-brand/6 border-brand/10 text-brand'} hover:bg-brand/12`}\n            onClick={() => onAnswer?.(q)}\n            disabled={isAnswering}\n            aria-busy={isAnswering}\n            aria-label={isUnanswered ? '' : ''}\n          >\n            {isAnswering ? ' ' : ` ${isUnanswered ? '' : ''}${perm.isAgent ? '' : ''}`}\n          </button>\n        </div>\n      )}\n    </article>\n  );\n}\n\ninterface QASectionProps {\n  role: Role;\n  questions: Question[] | { items: Question[] };\n  onAskQuestion?: (question: string) => Promise<void> | void;\n  onAnswerQuestion?: (questionId: string, content: string) => Promise<void> | void;\n  feedbackDurationMs?: number;\n  onUnlock?: () => void;\n}\n\nexport function QASection({ role, questions: questionsProp, onAskQuestion, onAnswerQuestion, feedbackDurationMs = 5000, onUnlock }: QASectionProps) {\n  const questions = Array.isArray(questionsProp) ? questionsProp : (questionsProp?.items || []);\n  const perm = getPermissions(role);\n  const [askModalOpen, setAskModalOpen] = useState(false);\n  const [askInput, setAskInput] = useState('');\n  const [answerModalOpen, setAnswerModalOpen] = useState(false);\n  const [answerInput, setAnswerInput] = useState('');\n  const [activeQuestion, setActiveQuestion] = useState<Question | null>(null);\n  const [submitting, setSubmitting] = useState<'ask' | 'answer' | null>(null);\n  const [askError, setAskError] = useState('');\n  const [answerError, setAnswerError] = useState('');\n  const [feedback, setFeedback] = useState('');\n  const askDialogRef = useRef<HTMLDivElement | null>(null);\n  const answerDialogRef = useRef<HTMLDivElement | null>(null);\n  const askTextareaRef = useRef<HTMLTextAreaElement | null>(null);\n  const answerTextareaRef = useRef<HTMLTextAreaElement | null>(null);\n  const feedbackTimeoutRef = useRef<number | null>(null);\n  const restoreFocusRef = useRef<HTMLElement | null>(null);\n\n  //  totalAnswersAPI  answersCount \n  //  API \n  const answeredQuestions = questions.filter(q => (q.totalAnswers ?? q.answersCount ?? q.answers.length) > 0);\n  const unansweredQuestions = questions.filter(q => (q.totalAnswers ?? q.answersCount ?? q.answers.length) === 0);\n\n  //  hook \n  const { visible: visibleAnswered, hiddenCount, nextHidden: nextHiddenQuestion } = \n    useGuestVisibleItems(answeredQuestions, perm.isLoggedIn);\n  const remainingAnsweredCount = answeredQuestions.length - visibleAnswered.length;\n\n  const showGuestUnlockCta = !perm.isLoggedIn;\n  const shouldShowUnlockCta = !!onUnlock && (showGuestUnlockCta || hiddenCount > 0 || remainingAnsweredCount > 0);\n\n  const MIN_QUESTION_LENGTH = 10;\n  const MIN_ANSWER_LENGTH = 5;\n\n  const resetAskModal = () => {\n    setAskInput('');\n    setAskError('');\n  };\n\n  const resetAnswerModal = () => {\n    setAnswerInput('');\n    setAnswerError('');\n    setActiveQuestion(null);\n  };\n\n  const rememberTriggerFocus = () => {\n    restoreFocusRef.current = document.activeElement as HTMLElement | null;\n  };\n\n  const openAskModal = () => {\n    if (!perm.canAskQuestion) {\n      if (onUnlock) {\n        onUnlock();\n        return;\n      }\n      setFeedback(' ');\n      return;\n    }\n    rememberTriggerFocus();\n    resetAskModal();\n    setAskModalOpen(true);\n  };\n\n  const openAnswerModal = (question: Question) => {\n    if (!perm.canAnswer) {\n      if (onUnlock) {\n        onUnlock();\n        return;\n      }\n      setFeedback(' ');\n      return;\n    }\n    rememberTriggerFocus();\n    resetAnswerModal();\n    setActiveQuestion(question);\n    setAnswerModalOpen(true);\n  };\n\n  const getActiveDialog = (): HTMLDivElement | null => {\n    return askModalOpen ? askDialogRef.current : answerModalOpen ? answerDialogRef.current : null;\n  };\n\n  const getFocusableElements = (container: HTMLElement | null) => {\n    if (!container) return [] as HTMLElement[];\n    const selector = 'a[href], button, textarea, input, select, [tabindex]';\n    return Array.from(container.querySelectorAll<HTMLElement>(selector)).filter(el => {\n      const tabIndexAttr = el.getAttribute('tabindex');\n      const tabIndex = typeof tabIndexAttr === 'string' ? Number(tabIndexAttr) : undefined;\n      const isDisabled = el.hasAttribute('disabled') || el.getAttribute('aria-disabled') === 'true';\n      const isHidden = el.hasAttribute('aria-hidden');\n      const isNegativeTabIndex = typeof tabIndex === 'number' && tabIndex < 0;\n      return !isDisabled && !isHidden && !isNegativeTabIndex;\n    });\n  };\n\n  /**\n   *  helper main[data-app-root]#rootbody\n   *  tabIndex  DOM\n   */\n  const focusSafeElement = (): void => {\n    const candidates = [\n      document.querySelector('main'),\n      document.querySelector('[data-app-root]'),\n      document.getElementById('root'),\n      document.body,\n    ];\n    for (const el of candidates) {\n      if (el instanceof HTMLElement) {\n        const prevTabIndex = el.getAttribute('tabindex');\n        el.dataset.prevTabindex = prevTabIndex ?? '';\n        el.tabIndex = -1;\n        el.focus();\n        //  tabIndex setTimeout  focus \n        setTimeout(() => {\n          const stored = el.dataset.prevTabindex;\n          if (stored === '') {\n            el.removeAttribute('tabindex');\n          } else if (stored !== undefined) {\n            el.tabIndex = Number(stored);\n          }\n          delete el.dataset.prevTabindex;\n        }, 0);\n        return;\n      }\n    }\n    if (import.meta.env.DEV) {\n      console.warn('[QASection] focusSafeElement:  fallback ');\n    }\n  };\n\n  const trapFocusWithinModal = (event: KeyboardEvent) => {\n    if (event.key !== 'Tab') return;\n    const container = getActiveDialog();\n    if (!container) return;\n    const focusable = getFocusableElements(container);\n    \n    // \n    if (!focusable.length) {\n      const prevTabIndex = container.getAttribute('tabindex');\n      container.dataset.prevTabindex = prevTabIndex ?? '';\n      container.tabIndex = -1;\n      container.focus();\n      event.preventDefault();\n      return;\n    }\n    \n    const [first] = focusable;\n    const last = focusable[focusable.length - 1];\n    const active = document.activeElement as HTMLElement | null;\n    if (!active || !container.contains(active)) {\n      first?.focus();\n      event.preventDefault();\n      return;\n    }\n    if (!event.shiftKey && active === last) {\n      first?.focus();\n      event.preventDefault();\n    }\n    if (event.shiftKey && active === first) {\n      last?.focus();\n      event.preventDefault();\n    }\n  };\n\n  useEffect(() => {\n    const activeDialog = getActiveDialog();\n    if (!activeDialog) {\n      document.body.style.overflow = '';\n      return;\n    }\n\n    document.body.style.overflow = 'hidden';\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && submitting !== 'ask' && submitting !== 'answer') {\n        if (askModalOpen) {\n          setAskModalOpen(false);\n          resetAskModal();\n        }\n        if (answerModalOpen) {\n          setAnswerModalOpen(false);\n          resetAnswerModal();\n        }\n      }\n      trapFocusWithinModal(event);\n    };\n\n    const ensureFocusStaysInside = (event: FocusEvent) => {\n      if (!activeDialog.contains(event.target as Node)) {\n        const focusable = getFocusableElements(activeDialog);\n        focusable[0]?.focus();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    document.addEventListener('focusin', ensureFocusStaysInside);\n\n    return () => {\n      document.body.style.overflow = '';\n      document.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('focusin', ensureFocusStaysInside);\n\n      //  tabIndex -1\n      if (activeDialog && activeDialog.dataset.prevTabindex !== undefined) {\n        const stored = activeDialog.dataset.prevTabindex;\n        if (stored === '') {\n          activeDialog.removeAttribute('tabindex');\n        } else {\n          activeDialog.tabIndex = Number(stored);\n        }\n        delete activeDialog.dataset.prevTabindex;\n      }\n\n      //  DOM \n      const target = restoreFocusRef.current;\n      if (target && document.body.contains(target)) {\n        target.focus();\n      } else {\n        // Fallback:  helper\n        focusSafeElement();\n      }\n      restoreFocusRef.current = null;\n    };\n  }, [askModalOpen, answerModalOpen, submitting]);\n\n  useEffect(() => {\n    if (!feedback) return () => undefined;\n    if (feedbackTimeoutRef.current) {\n      clearTimeout(feedbackTimeoutRef.current);\n    }\n    feedbackTimeoutRef.current = window.setTimeout(() => {\n      setFeedback('');\n    }, feedbackDurationMs);\n    return () => {\n      if (feedbackTimeoutRef.current) {\n        clearTimeout(feedbackTimeoutRef.current);\n        feedbackTimeoutRef.current = null;\n      }\n    };\n  }, [feedback, feedbackDurationMs]);\n\n  useEffect(() => {\n    if (askModalOpen) {\n      requestAnimationFrame(() => {\n        askTextareaRef.current?.focus();\n      });\n    }\n  }, [askModalOpen]);\n\n  useEffect(() => {\n    if (answerModalOpen) {\n      requestAnimationFrame(() => {\n        answerTextareaRef.current?.focus();\n      });\n    }\n  }, [answerModalOpen]);\n\n  const handleAskSubmit = async () => {\n    const trimmed = askInput.trim();\n    if (trimmed.length < MIN_QUESTION_LENGTH) {\n      setAskError(` ${MIN_QUESTION_LENGTH} `);\n      return;\n    }\n    if (!onAskQuestion) {\n      setAskError('');\n      return;\n    }\n    setSubmitting('ask');\n    setAskError('');\n    try {\n      await onAskQuestion(trimmed);\n      setAskModalOpen(false);\n      resetAskModal();\n      setFeedback(' ');\n    } catch (err) {\n      console.error('Failed to submit question', err);\n      setAskError('');\n    } finally {\n      setSubmitting(null);\n    }\n  };\n\n  const handleAnswerSubmit = async () => {\n    const trimmed = answerInput.trim();\n    if (!activeQuestion) {\n      setAnswerError('');\n      return;\n    }\n    if (trimmed.length < MIN_ANSWER_LENGTH) {\n      setAnswerError(` ${MIN_ANSWER_LENGTH} `);\n      return;\n    }\n    if (!onAnswerQuestion) {\n      setAnswerError('');\n      return;\n    }\n    setSubmitting('answer');\n    setAnswerError('');\n    try {\n      await onAnswerQuestion(String(activeQuestion.id), trimmed);\n      setAnswerModalOpen(false);\n      resetAnswerModal();\n      setFeedback(' ');\n    } catch (err) {\n      console.error('Failed to submit answer', err);\n      setAnswerError('');\n    } finally {\n      setSubmitting(null);\n    }\n  };\n\n  return (\n    <section className=\"bg-white/98 scroll-mt-20 overflow-hidden rounded-[18px] border border-border-light shadow-[0_2px_12px_rgba(0,51,102,0.04)]\" aria-labelledby=\"qa-heading\" id=\"qa-section\">\n      <div className=\"from-brand/3 to-brand-600/1 flex items-center justify-between border-b border-brand/5 bg-gradient-to-br px-4 py-3.5\">\n        <div>\n          <h2 id=\"qa-heading\" className=\"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700\">\n             \n            {unansweredQuestions.length > 0 && (\n              <span className=\"ml-1.5 rounded-full bg-brand-100 px-2 py-0.5 text-xs font-bold text-brand-600\">\n                {unansweredQuestions.length} \n              </span>\n            )}\n          </h2>\n          <p className=\"mt-0.5 text-[11px] text-ink-600\"></p>\n        </div>\n      </div>\n      <div className=\"flex flex-col gap-2.5 p-3.5 pb-12\">\n        {/*  */}\n        {visibleAnswered.map(q => (\n          <QACard\n            key={q.id}\n            q={q}\n            perm={perm}\n            onAnswer={openAnswerModal}\n            isAnswering={submitting === 'answer' && activeQuestion?.id === q.id}\n            {...(onUnlock && { onUnlock })}\n          />\n        ))}\n\n        {/*  LockedOverlay  */}\n        <LockedOverlay\n          visible={hiddenCount > 0 && !!nextHiddenQuestion}\n          hiddenCount={hiddenCount}\n          countLabel=\"\"\n          benefits={['', '']}\n          {...(onUnlock ? { onCtaClick: onUnlock } : {})}\n        >\n          {nextHiddenQuestion && (\n            <QACard\n              q={nextHiddenQuestion}\n              perm={perm}\n              onAnswer={openAnswerModal}\n              isAnswering={submitting === 'answer' && activeQuestion?.id === nextHiddenQuestion.id}\n              hideUnlockButton\n            />\n          )}\n        </LockedOverlay>\n\n        {/*  -  CTA  */}\n        <div className=\"bg-brand/3 rounded-[14px] border border-dashed border-border-light p-3.5\">\n          <div className=\"space-y-2\">\n            <div className=\"text-[12px] font-semibold text-brand-700\"></div>\n            {unansweredQuestions.length > 0 ? (\n              unansweredQuestions.map(q => (\n                <QACard\n                  key={q.id}\n                  q={q}\n                  perm={perm}\n                  isUnanswered\n                  onAnswer={openAnswerModal}\n                  isAnswering={submitting === 'answer' && activeQuestion?.id === q.id}\n                  {...(onUnlock && { onUnlock })}\n                />\n              ))\n            ) : (\n              <div className=\"rounded-[10px] border border-dashed border-border-light bg-white/80 p-3 text-center text-[12px] text-ink-600\">\n                \n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-3 flex flex-col gap-1\">\n            <div className=\"text-sm font-bold text-ink-600\"> </div>\n            <p className=\"text-xs text-ink-600\"> 24 </p>\n            <button\n              type=\"button\"\n              onClick={openAskModal}\n              className=\"bg-brand/6 hover:bg-brand/12 flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition\"\n            >\n              {perm.canAskQuestion ? '' : ''}\n            </button>\n          </div>\n        </div>\n\n        {/*  CTA */}\n        {shouldShowUnlockCta && (\n          <div className=\"bg-brand/4 rounded-[12px] border border-brand/10 p-3 text-center\">\n            <div className=\"text-sm font-bold text-brand-700\"> / </div>\n            <p className=\"mt-1 text-[12px] text-ink-600\">\n              {remainingAnsweredCount > 0\n                ? ` ${remainingAnsweredCount} `\n                : ''}\n            </p>\n            <button\n              type=\"button\"\n              onClick={onUnlock}\n              className=\"mt-2 w-full rounded-lg bg-brand px-3 py-2 text-[12px] font-semibold text-white shadow-sm transition hover:bg-brand-dark\"\n            >\n              \n            </button>\n          </div>\n        )}\n\n        {feedback && (\n          <p className=\"text-center text-[11px] text-brand-600\" role=\"status\" aria-live=\"polite\">\n            {feedback}\n          </p>\n        )}\n      </div>\n\n      {/*  Modal */}\n      {askModalOpen && (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4\">\n          <div\n            ref={askDialogRef}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"ask-modal-title\"\n            className=\"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl\"\n          >\n            <div className=\"mb-3 flex items-center justify-between\">\n              <div>\n                <h3 id=\"ask-modal-title\" className=\"text-base font-bold text-ink-700\"></h3>\n                <p className=\"text-ink-500 text-xs\"></p>\n              </div>\n              <button\n                type=\"button\"\n                className=\"text-sm text-ink-400 transition hover:text-ink-700\"\n                onClick={() => {\n                  if (submitting === 'ask') return;\n                  setAskModalOpen(false);\n                  resetAskModal();\n                }}\n                aria-label=\"\"\n              >\n                \n              </button>\n            </div>\n            <div className=\"space-y-3\">\n              <label className=\"block text-xs font-semibold text-ink-600\" htmlFor=\"qa-ask-textarea\"></label>\n              <textarea\n                ref={askTextareaRef}\n                id=\"qa-ask-textarea\"\n                className=\"bg-ink-50/40 h-28 w-full rounded-xl border border-border-light p-3 text-sm outline-none focus:border-brand\"\n                placeholder=\"\"\n                value={askInput}\n                onChange={e => setAskInput(e.target.value)}\n                maxLength={500}\n                disabled={submitting === 'ask'}\n              />\n              {askError && <p className=\"text-error-500 text-xs\" role=\"alert\">{askError}</p>}\n              <div className=\"flex items-center justify-between text-[11px] text-ink-400\">\n                <span> {MIN_QUESTION_LENGTH} </span>\n                <span>{askInput.length}/500</span>\n              </div>\n              <button\n                type=\"button\"\n                onClick={handleAskSubmit}\n                disabled={submitting === 'ask'}\n                className={`w-full rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white transition ${submitting === 'ask' ? 'opacity-70' : 'hover:bg-brand-600'}`}\n              >\n                {submitting === 'ask' ? '' : ''}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/*  Modal */}\n      {answerModalOpen && activeQuestion && (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4\">\n          <div\n            ref={answerDialogRef}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"answer-modal-title\"\n            className=\"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl\"\n          >\n            <div className=\"mb-3 flex items-center justify-between\">\n              <div>\n                <h3 id=\"answer-modal-title\" className=\"text-base font-bold text-ink-700\"></h3>\n                <p className=\"text-ink-500 text-xs\">{activeQuestion.question}</p>\n              </div>\n              <button\n                type=\"button\"\n                className=\"text-sm text-ink-400 transition hover:text-ink-700\"\n                onClick={() => {\n                  if (submitting === 'answer') return;\n                  setAnswerModalOpen(false);\n                  resetAnswerModal();\n                }}\n                aria-label=\"\"\n              >\n                \n              </button>\n            </div>\n            <div className=\"space-y-3\">\n              <label className=\"block text-xs font-semibold text-ink-600\" htmlFor=\"qa-answer-textarea\"></label>\n              <textarea\n                ref={answerTextareaRef}\n                id=\"qa-answer-textarea\"\n                className=\"bg-ink-50/40 h-32 w-full rounded-xl border border-border-light p-3 text-sm outline-none focus:border-brand\"\n                placeholder=\"\"\n                value={answerInput}\n                onChange={e => setAnswerInput(e.target.value)}\n                maxLength={800}\n                disabled={submitting === 'answer'}\n              />\n              {answerError && <p className=\"text-error-500 text-xs\" role=\"alert\">{answerError}</p>}\n              <div className=\"flex items-center justify-between text-[11px] text-ink-400\">\n                <span> {MIN_ANSWER_LENGTH} </span>\n                <span>{answerInput.length}/800</span>\n              </div>\n              <button\n                type=\"button\"\n                onClick={handleAnswerSubmit}\n                disabled={submitting === 'answer'}\n                className={`w-full rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white transition ${submitting === 'answer' ? 'opacity-70' : 'hover:bg-brand-600'}`}\n              >\n                {submitting === 'answer' ? '' : ''}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </section>\n  );\n}\n","/**\n * Sidebar Component\n * \n * \n */\n\nimport { useMemo } from 'react';\nimport {\n  SIDEBAR_HOT_POSTS_COUNT,\n  SIDEBAR_QUESTIONS_COUNT,\n  type CommunityInfo,\n  type Post,\n  type Question,\n} from '../types';\n\n/**  null  */\nfunction formatValue(value: number | null | undefined, suffix = ''): string {\n  if (value === null || value === undefined) return '-';\n  return `${value}${suffix}`;\n}\n\ninterface SidebarProps {\n  info: CommunityInfo;\n  questions: Question[] | { items: Question[] };\n  posts: Post[];\n}\n\nexport function Sidebar({ info, questions: questionsProp, posts }: SidebarProps) {\n  //  questions \n  const questions = useMemo(\n    () => Array.isArray(questionsProp) ? questionsProp : (questionsProp?.items || []),\n    [questionsProp]\n  );\n\n  //  questions \n  const displayQuestions = useMemo(\n    () => questions.slice(0, SIDEBAR_QUESTIONS_COUNT),\n    [questions]\n  );\n\n  //  posts  render  sort\n  const hotPosts = useMemo(\n    () => [...posts]\n      .sort((a, b) => {\n        const scoreA = (a.likes || 0) + (a.views || 0) * 0.1;\n        const scoreB = (b.likes || 0) + (b.views || 0) * 0.1;\n        return scoreB - scoreA;\n      })\n      .slice(0, SIDEBAR_HOT_POSTS_COUNT),\n    [posts]\n  );\n\n  return (\n    <aside className=\"hidden w-[280px] shrink-0 flex-col gap-3 self-start lg:sticky lg:top-[70px] lg:flex\">\n      {/*  */}\n      <div className=\"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]\">\n        <h4 className=\"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]\"> </h4>\n        <div className=\"mt-2.5 grid grid-cols-2 gap-2\">\n          {[\n            [formatValue(info.members), ''],\n            [formatValue(info.avgRating), ''],\n            [formatValue(info.monthlyInteractions), ''],\n            [formatValue(info.forSale), ''],\n          ].map(([num, lbl]) => (\n            <div key={lbl as string} className=\"rounded-[10px] bg-gradient-to-br from-[#f8faff] to-[#f0f5ff] p-3 text-center\">\n              <div className=\"text-xl font-black text-[var(--brand)]\">{num}</div>\n              <div className=\"mt-0.5 text-[11px] text-[var(--text-secondary)]\">{lbl}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/*  */}\n      <nav className=\"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]\" aria-label=\"\">\n        <h4 className=\"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]\"> </h4>\n        <div className=\"flex flex-col gap-1\">\n          {[' ', ' ', ' '].map(link => (\n            <a key={link} href=\"#\" className=\"flex items-center gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]\">\n              {link}\n            </a>\n          ))}\n        </div>\n      </nav>\n\n      {/*  */}\n      <div className=\"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]\">\n        <h4 className=\"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]\"> </h4>\n        <div className=\"flex flex-col gap-1\">\n          {displayQuestions.map(q => (\n            <a key={q.id} href=\"#qa-section\" className=\"flex items-start gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]\">\n              <span className=\"shrink-0\" aria-hidden=\"true\"></span>\n              <span className=\"truncate\">{q.question.length > 18 ? q.question.substring(0, 18) + '...' : q.question}</span>\n            </a>\n          ))}\n        </div>\n        <a href=\"#qa-section\" className=\"mt-2 block text-center text-xs text-[var(--brand-light)] no-underline\"> </a>\n      </div>\n\n      {/*  */}\n      <div className=\"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]\">\n        <h4 className=\"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]\"> </h4>\n        <div className=\"flex flex-col gap-1\">\n          {hotPosts.map(p => (\n            <a key={p.id} href=\"#public-wall\" className=\"flex items-start gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]\">\n              <span className=\"shrink-0\" aria-hidden=\"true\"> {p.likes}</span>\n              <span className=\"truncate\">{p.title.length > 15 ? p.title.substring(0, 15) + '...' : p.title}</span>\n            </a>\n          ))}\n        </div>\n        <a href=\"#public-wall\" className=\"mt-2 block text-center text-xs text-[var(--brand-light)] no-underline\"> </a>\n      </div>\n\n      {/*  */}\n      <div className=\"rounded-[14px] border border-[var(--line)] bg-gradient-to-br from-[#f0f7ff] to-[#e8f4ff] p-3.5 text-center shadow-[0_4px_14px_rgba(0,51,102,0.04)]\">\n        <svg className=\"mx-auto mb-2 h-24 w-20 text-[#00385a]\" viewBox=\"0 0 200 240\" aria-hidden=\"true\">\n          <path d=\"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          <path d=\"M 40 80 L 100 40 L 160 80\" stroke=\"currentColor\" strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          <rect x=\"55\" y=\"80\" width=\"90\" height=\"100\" stroke=\"currentColor\" strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          <path d=\"M 78 110 Q 85 105 92 110\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\"/>\n          <path d=\"M 108 110 Q 115 105 122 110\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\"/>\n          <circle cx=\"85\" cy=\"125\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\"/>\n          <circle cx=\"115\" cy=\"125\" r=\"4\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\"/>\n          <path d=\"M 90 145 Q 100 155 110 145\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\" strokeLinecap=\"round\"/>\n          <path d=\"M 55 130 L 25 110\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\"/>\n          <path className=\"origin-[85%_60%] animate-[wave_2.5s_ease-in-out_infinite]\" d=\"M 145 130 L 175 100\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\"/>\n          <circle className=\"origin-[85%_60%] animate-[wave_2.5s_ease-in-out_infinite]\" cx=\"180\" cy=\"95\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"3\" fill=\"none\"/>\n          <path d=\"M 85 180 L 85 210 L 75 210\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          <path d=\"M 115 180 L 115 210 L 125 210\" stroke=\"currentColor\" strokeWidth=\"5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n        </svg>\n        <p className=\"mb-2.5 text-[13px] font-bold text-[var(--brand)]\"></p>\n        <a href=\"#qa-section\" className=\"inline-block rounded-full bg-[var(--brand)] px-4 py-2 text-xs font-bold text-white no-underline\"> </a>\n      </div>\n    </aside>\n  );\n}\n","/**\n * RoleSwitcher Component\n * \n * Mock \n */\n\nimport { useState } from 'react';\nimport type { Role } from '../types';\n\ninterface RoleSwitcherProps {\n  role: Role;\n  onRoleChange: (role: Role) => void;\n}\n\nconst roleNames: Record<Role, string> = {\n  guest: '',\n  member: '',\n  resident: '',\n  agent: '',\n};\n\nconst roleLabels: Record<Role, string> = {\n  guest: ' ',\n  member: ' ',\n  resident: ' ',\n  agent: ' ',\n};\n\nexport function RoleSwitcher({ role, onRoleChange }: RoleSwitcherProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div className=\"fixed bottom-5 right-5 z-[1000]\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-1.5 rounded-xl bg-gradient-to-br from-[#1a1a2e] to-[#16213e] px-4 py-2.5 text-xs font-bold text-white shadow-[0_4px_20px_rgba(0,0,0,0.3)]\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"listbox\"\n        aria-label={`${roleNames[role]}`}\n      >\n         <span>{roleNames[role]}</span> \n      </button>\n      {isOpen && (\n        <div \n          className=\"absolute bottom-[50px] right-0 min-w-[180px] rounded-xl border border-[var(--border)] bg-white p-2 shadow-[0_8px_30px_rgba(0,0,0,0.15)]\"\n          role=\"listbox\"\n          aria-label=\"\"\n        >\n          {(Object.keys(roleLabels) as Role[]).map(r => (\n            <button\n              key={r}\n              role=\"option\"\n              aria-selected={role === r}\n              onClick={() => { onRoleChange(r); setIsOpen(false); }}\n              className={`block w-full rounded-lg px-3 py-2.5 text-left text-xs ${role === r ? 'bg-[rgba(0,56,90,0.1)] font-bold text-[var(--primary)]' : 'text-[var(--text-primary)] hover:bg-[#f6f9ff]'}`}\n            >\n              {roleLabels[r]}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * BottomCTA Component\n * \n *  CTA \n */\n\nimport type { Role } from '../types';\nimport { getPermissions } from '../types';\n\ninterface BottomCTAProps {\n  role: Role;\n}\n\nexport function BottomCTA({ role }: BottomCTAProps) {\n  const perm = getPermissions(role);\n\n  //  CTA\n  if (perm.canAccessPrivate) return null;\n\n  // \n  const isGuest = perm.isGuest;\n  const isMember = perm.isMember;\n\n  return (\n    <div className=\"fixed inset-x-0 bottom-0 z-overlay flex items-center justify-center gap-3 border-t border-[var(--border)] bg-[rgba(255,255,255,0.95)] px-4 py-3 backdrop-blur-md\">\n      <p className=\"text-xs text-[var(--text-secondary)]\">\n        {isMember ? ' ' : '  + '}\n      </p>\n      <button \n        onClick={() => window.location.href = '/maihouses/auth.html'}\n        className=\"rounded-full bg-gradient-to-br from-[var(--primary)] to-[#005282] px-5 py-2.5 text-[13px] font-bold text-white shadow-lg transition-transform hover:scale-105 active:scale-95\"\n      >\n        {isMember ? '' : ''}\n      </button>\n    </div>\n  );\n}\n","/**\n * PostSkeleton Component\n * \n * \n *  aria-hidden WallSkeleton  a11y\n */\n\nexport function PostSkeleton() {\n  return (\n    <div className=\"flex animate-pulse gap-2.5 rounded-[14px] border border-border-light bg-white p-3\">\n      <div className=\"size-10 shrink-0 rounded-full bg-gray-200\" />\n      <div className=\"flex flex-1 flex-col gap-2\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-4 w-16 rounded bg-gray-200\" />\n          <div className=\"h-3 w-12 rounded bg-gray-200\" />\n        </div>\n        <div className=\"h-4 w-3/4 rounded bg-gray-200\" />\n        <div className=\"h-12 w-full rounded bg-gray-200\" />\n        <div className=\"flex gap-2\">\n          <div className=\"h-3 w-10 rounded bg-gray-200\" />\n          <div className=\"h-3 w-10 rounded bg-gray-200\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function WallSkeleton() {\n  return (\n    <div\n      role=\"status\"\n      aria-live=\"polite\"\n      aria-busy=\"true\"\n      aria-label=\"\"\n      className=\"flex flex-col gap-3\"\n    >\n      <span className=\"sr-only\">...</span>\n      {/* Reviews Skeleton */}\n      <div className=\"bg-white/98 overflow-hidden rounded-[18px] border border-border-light p-4\">\n        <div className=\"mb-3 flex items-center gap-2\">\n          <div className=\"h-5 w-24 animate-pulse rounded bg-gray-200\" />\n          <div className=\"h-4 w-16 animate-pulse rounded bg-gray-200\" />\n        </div>\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"h-24 w-full animate-pulse rounded-[14px] bg-gray-100\" />\n          <div className=\"h-24 w-full animate-pulse rounded-[14px] bg-gray-100\" />\n        </div>\n      </div>\n      \n      {/* Posts Skeleton */}\n      <div className=\"bg-white/98 overflow-hidden rounded-[18px] border border-border-light p-4\">\n        <div className=\"mb-3 flex items-center gap-2\">\n          <div className=\"h-5 w-24 animate-pulse rounded bg-gray-200\" />\n        </div>\n        <div className=\"flex flex-col gap-2\">\n          <PostSkeleton />\n          <PostSkeleton />\n          <PostSkeleton />\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * WallErrorBoundary\n * \n *  Error Boundary\n * -  runtime errors\n * -  UI\n * - \n * -  Sentry\n */\n\nimport React from 'react';\n\ntype ErrorCategory = 'network' | 'permission' | 'notFound' | 'runtime' | 'unknown';\n\ninterface CategorizedError {\n  category: ErrorCategory;\n  title: string;\n  message: string;\n  actionText: string;\n  actionHref?: string;\n  onAction?: () => void;\n}\n\n/**\n *  error.message  error.cause.messageES2022 cause chain\n */\nconst getErrorMessage = (error: Error): string => {\n  const messages: string[] = [error.message];\n  let current: unknown = error.cause;\n  while (current instanceof Error) {\n    messages.push(current.message);\n    current = current.cause;\n  }\n  return messages.join(' ').toLowerCase();\n};\n\nconst categorizeError = (error: Error): CategorizedError => {\n  const message = getErrorMessage(error);\n\n  if (message.includes('401') || message.includes('403') || message.includes('unauthorized')) {\n    return {\n      category: 'permission',\n      title: '',\n      message: '',\n      actionText: '',\n      actionHref: '/auth',\n    };\n  }\n\n  if (message.includes('404') || message.includes('not found')) {\n    return {\n      category: 'notFound',\n      title: '',\n      message: '',\n      actionText: '',\n      actionHref: '/maihouses/',\n    };\n  }\n\n  if (message.includes('network') || message.includes('fetch') || message.includes('timeout')) {\n    return {\n      category: 'network',\n      title: '',\n      message: '',\n      actionText: '',\n      onAction: () => window.location.reload(),\n    };\n  }\n\n  return {\n    category: 'runtime',\n    title: '',\n    message: error.message || '',\n    actionText: '',\n  };\n};\n\ninterface Props {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: React.ErrorInfo | null;\n  errorId: string | null;\n}\n\nexport class WallErrorBoundary extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      errorId: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    return { hasError: true, error };\n  }\n\n  override componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    this.setState({ errorInfo });\n\n    if (import.meta.env.DEV) {\n      console.groupCollapsed(' Community Wall Error');\n      console.error(error);\n      console.error(errorInfo.componentStack);\n      console.groupEnd();\n    }\n\n    if (import.meta.env.PROD && typeof window !== 'undefined') {\n      fetch('/api/log-error', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          error: {\n            message: error.message,\n            stack: error.stack,\n            name: error.name,\n          },\n          componentStack: errorInfo.componentStack,\n          url: window.location.href,\n          userAgent: navigator.userAgent,\n          timestamp: new Date().toISOString(),\n        }),\n      }).catch((reportError) => {\n        console.error('[WallErrorBoundary] Failed to report error', reportError);\n      });\n    }\n\n    this.props.onError?.(error, errorInfo);\n  }\n\n  resetErrorBoundary = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null, errorId: null });\n  };\n\n  copyErrorToClipboard = () => {\n    if (!this.state.error) return;\n    const { error, errorInfo, errorId } = this.state;\n    const payload = [\n      `Message: ${error.message}`,\n      `Stack: ${error.stack ?? 'N/A'}`,\n      `Component Stack: ${errorInfo?.componentStack ?? 'N/A'}`,\n      `URL: ${typeof window !== 'undefined' ? window.location.href : 'N/A'}`,\n      `Timestamp: ${new Date().toISOString()}`,\n      errorId ? `Error ID: ${errorId}` : null,\n    ].filter(Boolean).join('\\n');\n\n    if (navigator?.clipboard) {\n      navigator.clipboard.writeText(payload).catch(() => {\n        console.warn('[WallErrorBoundary] Failed to copy error details');\n      });\n    }\n  };\n\n  override render() {\n    if (this.state.hasError && this.state.error) {\n      if (this.props.fallback) return this.props.fallback;\n\n      const categorized = categorizeError(this.state.error);\n\n      return (\n        <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-b from-bg-base to-bg-soft px-4\">\n          <div className=\"border-error-200 max-w-md rounded-2xl border bg-white p-8 text-center shadow-xl\">\n            <div className=\"mb-4 text-5xl\">\n              {categorized.category === 'network' && ''}\n              {categorized.category === 'permission' && ''}\n              {categorized.category === 'notFound' && ''}\n              {categorized.category === 'runtime' && ''}\n              {categorized.category === 'unknown' && ''}\n            </div>\n            <h2 className=\"mb-2 text-xl font-bold text-ink-900\">{categorized.title}</h2>\n            <p className=\"mb-6 text-sm text-ink-600\">{categorized.message}</p>\n            <div className=\"flex flex-col gap-2 sm:flex-row sm:justify-center\">\n              {categorized.onAction && (\n                <button\n                  onClick={categorized.onAction ?? this.resetErrorBoundary}\n                  className=\"rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand/10\"\n                >\n                  {categorized.actionText}\n                </button>\n              )}\n              {categorized.actionHref && (\n                <a\n                  href={categorized.actionHref}\n                  className=\"inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-600\"\n                >\n                  {categorized.actionText}\n                </a>\n              )}\n              {!categorized.onAction && !categorized.actionHref && (\n                <button\n                  onClick={this.resetErrorBoundary}\n                  className=\"rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand/10\"\n                >\n                   \n                </button>\n              )}\n            </div>\n\n            {import.meta.env.DEV && (\n              <details className=\"mt-6 text-left\">\n                <summary className=\"text-ink-500 cursor-pointer text-xs hover:text-ink-700\">\n                   \n                </summary>\n                <div className=\"mt-2 space-y-2\">\n                  <button\n                    type=\"button\"\n                    onClick={this.copyErrorToClipboard}\n                    className=\"border-ink-200 hover:bg-ink-50 w-full rounded border px-2 py-1 text-xs text-ink-700\"\n                  >\n                     \n                  </button>\n                  <pre className=\"bg-ink-50 text-error-600 max-h-60 overflow-auto rounded p-3 text-xs\">\n                    {this.state.error.stack}\n                  </pre>\n                  {this.state.errorInfo?.componentStack && (\n                    <pre className=\"bg-ink-50 max-h-40 overflow-auto rounded p-3 text-xs text-ink-700\">\n                      {this.state.errorInfo.componentStack}\n                    </pre>\n                  )}\n                </div>\n              </details>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nif (import.meta.env.DEV) {\n  (window as any).__triggerCommunityWallError = () => {\n    throw new Error(' ErrorBoundary ');\n  };\n}\n","/**\n * Build metadata helpers\n *\n *  Vite define  commit  UI \n */\n\nconst rawVersion = typeof __APP_VERSION__ === 'string' && __APP_VERSION__.length > 0\n  ? __APP_VERSION__\n  : 'dev';\nconst rawBuildTime = typeof __BUILD_TIME__ === 'string' && __BUILD_TIME__.length > 0\n  ? __BUILD_TIME__\n  : new Date().toISOString();\n\nconst parsedBuildTime = (() => {\n  const parsed = new Date(rawBuildTime);\n  if (Number.isNaN(parsed.getTime())) {\n    return null;\n  }\n  return parsed;\n})();\n\nconst buildDate = parsedBuildTime ?? new Date();\n\nconst formatTwDateTime = (date: Date) =>\n  new Intl.DateTimeFormat('zh-TW', {\n    dateStyle: 'short',\n    timeStyle: 'medium',\n    hour12: false,\n    timeZone: 'Asia/Taipei',\n  }).format(date);\n\nexport const APP_VERSION = rawVersion;\nexport const BUILD_TIME_ISO = buildDate.toISOString();\nexport const BUILD_TIME_TW = formatTwDateTime(buildDate);\nexport const VERSION_LABEL = `v${APP_VERSION}`;\n\nexport const VERSION_TOOLTIP = ` ${APP_VERSION}   ${BUILD_TIME_TW}`;\n","/**\n * VersionBadge\n *\n *  QA \n */\n\nimport { APP_VERSION, BUILD_TIME_TW, VERSION_LABEL, VERSION_TOOLTIP } from '../../../lib/version';\n\ninterface VersionBadgeProps {\n  variant?: 'floating' | 'inline';\n  className?: string;\n}\n\nconst baseClasses = 'inline-flex items-center gap-2 rounded-full border border-ink/10 bg-white/90 px-4 py-2 text-[11px] font-medium text-ink-600 shadow-md backdrop-blur';\n\nexport function VersionBadge({ variant = 'floating', className = '' }: VersionBadgeProps) {\n  const content = (\n    <>\n      <span className=\"text-[10px] uppercase tracking-wider text-ink-400\"></span>\n      <span className=\"font-mono text-sm text-ink-900\" aria-label=\"build-version\">\n        {VERSION_LABEL}\n      </span>\n      <span className=\"text-ink-500 text-[10px]\" aria-label=\"build-time\">\n        {BUILD_TIME_TW}\n      </span>\n    </>\n  );\n\n  if (variant === 'inline') {\n    return (\n      <div className={`${baseClasses} ${className}`} title={VERSION_TOOLTIP}>\n        {content}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`${baseClasses} pointer-events-auto fixed bottom-5 right-5 z-40 ${className}`}\n      title={VERSION_TOOLTIP}\n    >\n      {content}\n    </div>\n  );\n}\n","/**\n * MockToggle Component\n *  Mock \n */\n\ninterface MockToggleProps {\n  useMock: boolean;\n  onToggle: () => void;\n  disabled?: boolean;\n}\n\nexport function MockToggle({ useMock, onToggle, disabled = false }: MockToggleProps) {\n  const handleToggle = () => {\n    if (disabled) return;\n    onToggle();\n  };\n\n  return (\n    <button\n      onClick={handleToggle}\n      disabled={disabled}\n      aria-disabled={disabled}\n      title={disabled ? ' Mock ' : undefined}\n      className={`fixed bottom-5 left-5 z-[1000] flex items-center gap-1.5 rounded-xl bg-gradient-to-br from-[#1a1a2e] to-[#16213e] px-4 py-2.5 text-xs font-bold text-white shadow-[0_4px_20px_rgba(0,0,0,0.3)] ${disabled ? 'cursor-not-allowed opacity-60' : 'hover:brightness-110'}`}\n      aria-label={useMock ? ' API ' : ' Mock '}\n    >\n      {useMock ? ' Mock ' : ' API '}\n    </button>\n  );\n}\n","const MOCK_PARAM = 'mock'\nconst MOCK_STORAGE_KEY = 'mh_mock_mode'\n\nconst parseBool = (value: string | null | undefined): boolean | null => {\n  if (value === null || value === undefined) return null\n  const normalized = value.trim().toLowerCase()\n  if (['true', '1', 'yes', 'on'].includes(normalized)) return true\n  if (['false', '0', 'no', 'off'].includes(normalized)) return false\n  return null\n}\n\nconst readFromUrl = (): boolean | null => {\n  if (typeof window === 'undefined') return null\n  const params = new URLSearchParams(window.location.search)\n  return parseBool(params.get(MOCK_PARAM))\n}\n\nconst readFromStorage = (): boolean | null => {\n  if (typeof window === 'undefined' || !window.localStorage) return null\n  try {\n    return parseBool(window.localStorage.getItem(MOCK_STORAGE_KEY))\n  } catch {\n    return null\n  }\n}\n\nconst persistToStorage = (value: boolean) => {\n  if (typeof window === 'undefined' || !window.localStorage) return\n  try {\n    window.localStorage.setItem(MOCK_STORAGE_KEY, String(value))\n  } catch {\n    // ignore storage failures; mock is non-critical\n  }\n}\n\nconst persistToUrl = (value: boolean) => {\n  if (typeof window === 'undefined') return\n  try {\n    const url = new URL(window.location.href)\n    if (value) {\n      url.searchParams.set(MOCK_PARAM, 'true')\n    } else {\n      url.searchParams.delete(MOCK_PARAM)\n    }\n    window.history.replaceState(null, '', url.toString())\n  } catch {\n    // ignore URL failures; keep current state\n  }\n}\n\nexport interface MhEnv {\n  isMockEnabled(): boolean\n  setMock(next: boolean, opts?: { persist?: boolean; updateUrl?: boolean }): boolean\n  subscribe(onChange: (value: boolean) => void): () => void\n}\n\nexport const mhEnv: MhEnv = {\n  /**  Mock URL > localStorage > fallback(DEV=true, PROD=false) */\n  isMockEnabled(): boolean {\n    const urlValue = readFromUrl()\n    if (urlValue !== null) return urlValue\n    const stored = readFromStorage()\n    if (stored !== null) return stored\n    return import.meta.env.DEV\n  },\n\n  /**  Mock  URL/localStorage */\n  setMock(next: boolean, opts?: { persist?: boolean; updateUrl?: boolean }): boolean {\n    if (opts?.persist !== false) {\n      persistToStorage(next)\n    }\n    if (opts?.updateUrl !== false) {\n      persistToUrl(next)\n    }\n    return next\n  },\n\n  /**  mock storage event */\n  subscribe(onChange: (value: boolean) => void): () => void {\n    if (typeof window === 'undefined') return () => {}\n    const handler = (event: StorageEvent) => {\n      if (event.storageArea !== window.localStorage) return\n      if (event.key !== MOCK_STORAGE_KEY) return\n      const parsed = parseBool(event.newValue)\n      if (parsed !== null) {\n        onChange(parsed)\n      }\n    }\n    window.addEventListener('storage', handler)\n    return () => window.removeEventListener('storage', handler)\n  },\n}\n","/**\n * Community Wall Service\n * \n *  API  - \n * \n */\n\nimport { supabase } from '../lib/supabase';\nimport { communityApiBase } from '../config/env';\nimport type { Role } from '../types/community';\n\n// API \nconst API_BASE = communityApiBase;\n\n//  React Query \n\n// Types\nexport interface CommunityPost {\n  id: string;\n  community_id: string;\n  author_id: string;\n  content: string;\n  visibility: 'public' | 'private';\n  likes_count: number;\n  liked_by: string[];\n  created_at: string;\n  comments_count?: number;  // \n  is_pinned?: boolean;      // \n  author?: {\n    name: string;\n    avatar_url?: string;\n    role?: 'resident' | 'agent' | 'member' | 'official';\n    floor?: string;         // \n  };\n}\n\nexport interface CommunityReview {\n  id: string;\n  community_id: string;\n  author_id: string;\n  content: {\n    pros: string[];\n    cons: string;\n    property_title?: string;\n  };\n  created_at: string;\n  agent?: {                   // \n    name: string;\n    company?: string;\n    stats?: {\n      visits: number;         // \n      deals: number;          // \n    };\n  };\n}\n\nexport interface CommunityQuestion {\n  id: string;\n  community_id: string;\n  author_id: string;\n  question: string;\n  answers: {\n    id: string;\n    author_id: string;\n    content: string;\n    is_expert: boolean;\n    created_at: string;\n    author?: {                // \n        name: string;\n        role?: 'resident' | 'member' | 'agent' | 'official';\n    };\n  }[];\n  created_at: string;\n  /** API  */\n  hasMoreAnswers?: boolean;\n  /** API  */\n  totalAnswers?: number;\n  /**  */\n  answers_count?: number;\n}\n\nexport interface CommunityWallData {\n  communityInfo?: {           // \n    name: string;\n    year: number;\n    units: number;\n    managementFee: number;\n    builder: string;\n    members?: number;\n    avgRating?: number;\n    monthlyInteractions?: number;\n    forSale?: number;\n  };\n  posts: {\n    public: CommunityPost[];\n    private: CommunityPost[];\n    publicTotal: number;\n    privateTotal: number;\n  };\n  reviews: {\n    items: CommunityReview[];\n    total: number;\n  };\n  questions: {\n    items: CommunityQuestion[];\n    total: number;\n  };\n  isAuthenticated?: boolean;\n  viewerRole?: Role;\n}\n\n//  auth token\nasync function getAuthToken(): Promise<string | null> {\n  const { data: { session } } = await supabase.auth.getSession();\n  return session?.access_token ?? null;\n}\n\n//  fetch \nasync function fetchAPI<T>(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<T> {\n  const token = await getAuthToken();\n  \n  const headers: HeadersInit = {\n    'Content-Type': 'application/json',\n    ...(token && { 'Authorization': `Bearer ${token}` }),\n    ...options.headers,\n  };\n\n  const response = await fetch(`${API_BASE}${endpoint}`, {\n    ...options,\n    headers,\n  });\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({ error: '' }));\n    // \n    let errorMessage = '';\n    if (typeof errorData.error === 'string') {\n      errorMessage = errorData.error;\n    } else if (errorData.error?.message) {\n      errorMessage = errorData.error.message;\n    } else if (errorData.message) {\n      errorMessage = errorData.message;\n    } else if (Array.isArray(errorData.error)) {\n      // Zod  array\n      errorMessage = errorData.error.map((e: any) => e.message || e).join(', ');\n    }\n    \n    const error = new Error(errorMessage || `HTTP ${response.status}`);\n    (error as any).status = response.status;\n    (error as any).code = errorData.code;\n    throw error;\n  }\n\n  return response.json();\n}\n\n/**\n * \n *  React Query  fetch\n */\nexport async function getCommunityWall(\n  communityId: string,\n  options: { \n    includePrivate?: boolean;\n  } = {}\n): Promise<CommunityWallData> {\n  const { includePrivate = false } = options;\n  const includePrivateParam = includePrivate ? '1' : '0';\n  return fetchAPI<CommunityWallData>(\n    `/wall?communityId=${communityId}&type=all&includePrivate=${includePrivateParam}`\n  );\n}\n\n/**\n * \n */\nexport async function getPublicPosts(\n  communityId: string,\n  options: { page?: number; limit?: number } = {}\n): Promise<{ items: CommunityPost[]; total: number }> {\n  const { page = 1, limit = 20 } = options;\n  const offset = (page - 1) * limit;\n  \n  return fetchAPI(`/wall?communityId=${communityId}&type=posts&visibility=public&offset=${offset}&limit=${limit}`);\n}\n\n/**\n * \n */\nexport async function getPrivatePosts(\n  communityId: string,\n  options: { page?: number; limit?: number } = {}\n): Promise<{ items: CommunityPost[]; total: number }> {\n  const { page = 1, limit = 20 } = options;\n  const offset = (page - 1) * limit;\n  \n  return fetchAPI(`/wall?communityId=${communityId}&type=posts&visibility=private&offset=${offset}&limit=${limit}`);\n}\n\n/**\n *  properties \n *  React Query \n */\nexport async function getReviews(\n  communityId: string\n): Promise<{ items: CommunityReview[]; total: number }> {\n  return fetchAPI<{ items: CommunityReview[]; total: number }>(\n    `/wall?communityId=${communityId}&type=reviews`\n  );\n}\n\n/**\n * \n */\nexport async function getQuestions(\n  communityId: string\n): Promise<{ items: CommunityQuestion[]; total: number }> {\n  return fetchAPI<{ items: CommunityQuestion[]; total: number }>(\n    `/wall?communityId=${communityId}&type=questions`\n  );\n}\n\n/**\n * \n *  React Query invalidateQueries \n */\nexport async function createPost(\n  communityId: string,\n  content: string,\n  visibility: 'public' | 'private' = 'public'\n): Promise<CommunityPost> {\n  return fetchAPI('/post', {\n    method: 'POST',\n    body: JSON.stringify({ communityId, content, visibility }),\n  });\n}\n\n/**\n * /\n */\nexport async function toggleLike(\n  postId: string\n): Promise<{ liked: boolean; likes_count: number }> {\n  return fetchAPI('/like', {\n    method: 'POST',\n    body: JSON.stringify({ postId }),\n  });\n}\n\n/**\n * \n *  React Query invalidateQueries \n */\nexport async function askQuestion(\n  communityId: string,\n  question: string\n): Promise<CommunityQuestion> {\n  return fetchAPI('/question', {\n    method: 'POST',\n    body: JSON.stringify({ communityId, question }),\n  });\n}\n\n/**\n * \n * API  POST + action=answer PUT\n */\nexport async function answerQuestion(\n  questionId: string,\n  content: string\n): Promise<{ id: string; content: string }> {\n  return fetchAPI('/question', {\n    method: 'POST',\n    body: JSON.stringify({ action: 'answer', questionId, content }),\n  });\n}\n\n/**\n * \n *  React Query  invalidateQueries\n */\nexport function clearCommunityCache(_communityId?: string): void {\n  //  -  React Query \n}\n\nexport default {\n  getCommunityWall,\n  getPublicPosts,\n  getPrivatePosts,\n  getReviews,\n  getQuestions,\n  createPost,\n  toggleLike,\n  askQuestion,\n  answerQuestion,\n  clearCommunityCache,\n};\n","/**\n * useCommunityWall (React Query )\n * \n *  Hook\n *  @tanstack/react-query  SWR \n */\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useCallback, useState } from 'react';\nimport { \n  getCommunityWall, \n  toggleLike as apiToggleLike,\n  createPost as apiCreatePost,\n  askQuestion as apiAskQuestion,\n  answerQuestion as apiAnswerQuestion,\n  type CommunityWallData,\n  type CommunityPost,\n} from '../services/communityService';\n\n// Query Keys\nexport const communityWallKeys = {\n  all: ['communityWall'] as const,\n  wall: (communityId: string, includePrivate: boolean) => \n    [...communityWallKeys.all, 'wall', communityId, includePrivate] as const,\n  posts: (communityId: string, visibility: 'public' | 'private') => \n    [...communityWallKeys.all, 'posts', communityId, visibility] as const,\n};\n\nexport interface UseCommunityWallOptions {\n  /**  */\n  includePrivate?: boolean;\n  /**  5  */\n  staleTime?: number;\n  /**  */\n  refetchOnWindowFocus?: boolean;\n  /**  */\n  enabled?: boolean;\n  /**  ID undefined  */\n  currentUserId?: string | undefined;\n}\n\nexport interface UseCommunityWallReturn {\n  /**  */\n  data: CommunityWallData | undefined;\n  /**  */\n  isLoading: boolean;\n  /**  */\n  isFetching: boolean;\n  /**  */\n  error: Error | null;\n  /**  */\n  refresh: () => Promise<void>;\n  /** / */\n  toggleLike: (postId: string) => Promise<void>;\n  /**  */\n  createPost: (content: string, visibility?: 'public' | 'private') => Promise<void>;\n  /**  */\n  askQuestion: (question: string) => Promise<void>;\n  /**  */\n  answerQuestion: (questionId: string, content: string) => Promise<void>;\n  /**  */\n  isOptimisticUpdating: boolean;\n}\n\nexport function useCommunityWall(\n  communityId: string | undefined,\n  options: UseCommunityWallOptions = {}\n): UseCommunityWallReturn {\n  const { \n    includePrivate = false,\n    staleTime = 5 * 60 * 1000, // 5 \n    refetchOnWindowFocus = true,\n    enabled = true,\n    currentUserId,\n  } = options;\n\n  const queryClient = useQueryClient();\n  const [isOptimisticUpdating, setIsOptimisticUpdating] = useState(false);\n  // K:  UX\n  const canOptimisticUpdate = !!currentUserId;\n  const optimisticUserId = currentUserId ?? '';\n\n  // \n  const { \n    data, \n    isLoading, \n    isFetching, \n    error, \n    refetch \n  } = useQuery({\n    queryKey: communityWallKeys.wall(communityId || '', includePrivate),\n    queryFn: () => getCommunityWall(communityId!, { includePrivate }),\n    enabled: enabled && !!communityId,\n    staleTime,\n    refetchOnWindowFocus,\n    //  retry \n    retry: (failureCount, error) => {\n      // 400/401/403/404 \n      const status = (error as any)?.status;\n      if (status && [400, 401, 403, 404].includes(status)) {\n        return false;\n      }\n      return failureCount < 1; //  1 \n    },\n    retryDelay: 1000, // 1 \n  });\n\n  //  React Query invalidateQueries \n  const refresh = useCallback(async () => {\n    if (communityId) {\n      await refetch();\n    }\n  }, [communityId, refetch]);\n\n  //  Mutation\n  const likeMutation = useMutation({\n    mutationFn: apiToggleLike,\n    onMutate: async (postId: string) => {\n      // K:  API \n      if (!canOptimisticUpdate) {\n        return { previousData: undefined };\n      }\n      \n      setIsOptimisticUpdating(true);\n      \n      // \n      await queryClient.cancelQueries({ \n        queryKey: communityWallKeys.wall(communityId || '', includePrivate) \n      });\n\n      // \n      const previousData = queryClient.getQueryData<CommunityWallData>(\n        communityWallKeys.wall(communityId || '', includePrivate)\n      );\n\n      // \n      if (previousData) {\n        const updatePosts = (posts: CommunityPost[]): CommunityPost[] => \n          posts.map(post => {\n            if (post.id !== postId) return post;\n            const isLiked = post.liked_by.includes(optimisticUserId);\n            return {\n              ...post,\n              likes_count: isLiked ? Math.max(0, post.likes_count - 1) : post.likes_count + 1,\n              liked_by: isLiked \n                ? post.liked_by.filter(id => id !== optimisticUserId)\n                : [...post.liked_by, optimisticUserId],\n            };\n          });\n\n        queryClient.setQueryData<CommunityWallData>(\n          communityWallKeys.wall(communityId || '', includePrivate),\n          {\n            ...previousData,\n            posts: {\n              ...previousData.posts,\n              public: updatePosts(previousData.posts.public),\n              private: updatePosts(previousData.posts.private),\n            },\n          }\n        );\n      }\n\n      return { previousData };\n    },\n    onError: (_err, _postId, context) => {\n      // \n      if (context?.previousData) {\n        queryClient.setQueryData(\n          communityWallKeys.wall(communityId || '', includePrivate),\n          context.previousData\n        );\n      }\n    },\n    onSettled: () => {\n      setIsOptimisticUpdating(false);\n      // \n      queryClient.invalidateQueries({ \n        queryKey: communityWallKeys.wall(communityId || '', includePrivate) \n      });\n    },\n  });\n\n  //  Mutation\n  const createPostMutation = useMutation({\n    mutationFn: ({ content, visibility }: { content: string; visibility: 'public' | 'private' }) =>\n      apiCreatePost(communityId!, content, visibility),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ \n        queryKey: communityWallKeys.wall(communityId || '', includePrivate) \n      });\n    },\n  });\n\n  //  Mutation\n  const askQuestionMutation = useMutation({\n    mutationFn: (question: string) => apiAskQuestion(communityId!, question),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ \n        queryKey: communityWallKeys.wall(communityId || '', includePrivate) \n      });\n    },\n  });\n\n  //  Mutation\n  const answerQuestionMutation = useMutation({\n    mutationFn: ({ questionId, content }: { questionId: string; content: string }) =>\n      apiAnswerQuestion(questionId, content),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ \n        queryKey: communityWallKeys.wall(communityId || '', includePrivate) \n      });\n    },\n  });\n\n  // \n  const toggleLike = useCallback(async (postId: string) => {\n    await likeMutation.mutateAsync(postId);\n  }, [likeMutation]);\n\n  const createPost = useCallback(async (content: string, visibility: 'public' | 'private' = 'public') => {\n    if (!communityId) throw new Error(' ID');\n    await createPostMutation.mutateAsync({ content, visibility });\n  }, [communityId, createPostMutation]);\n\n  const askQuestion = useCallback(async (question: string) => {\n    if (!communityId) throw new Error(' ID');\n    await askQuestionMutation.mutateAsync(question);\n  }, [communityId, askQuestionMutation]);\n\n  const answerQuestion = useCallback(async (questionId: string, content: string) => {\n    await answerQuestionMutation.mutateAsync({ questionId, content });\n  }, [answerQuestionMutation]);\n\n  return {\n    data,\n    isLoading,\n    isFetching,\n    error: error as Error | null,\n    refresh,\n    toggleLike,\n    createPost,\n    askQuestion,\n    answerQuestion,\n    isOptimisticUpdating,\n  };\n}\n\nexport default useCommunityWall;\n","/**\n * Community Wall Mock Data\n * \n * Mock  - \n */\n\nimport type { MockData } from './types';\nimport { mockTimestampMinutesAgo } from '../../lib/time';\n\nconst publicPosts = [\n  { id: 1, author: '', floor: '12F', type: 'resident' as const, time: mockTimestampMinutesAgo(120), title: '', content: ' iRobot  5 ', likes: 31, comments: 14 },\n  { id: 2, author: '', type: 'agent' as const, time: mockTimestampMinutesAgo(1440), title: '  12F', content: ' 50 ', views: 89, likes: 0, comments: 5 },\n  { id: 3, author: '', floor: '8F', type: 'resident' as const, time: mockTimestampMinutesAgo(3 * 24 * 60), title: ' ', content: ' B2-128  B1 ', likes: 12, comments: 8 },\n  { id: 4, author: '', floor: '5F', type: 'resident' as const, time: mockTimestampMinutesAgo(7 * 24 * 60), title: '', content: '', likes: 25, comments: 6 },\n  { id: 5, author: '', type: 'agent' as const, time: mockTimestampMinutesAgo(8 * 24 * 60), title: '  8F', content: '', views: 156, likes: 0, comments: 12 },\n];\n\nconst privatePosts = [\n  { id: 101, author: '', type: 'official' as const, time: mockTimestampMinutesAgo(3 * 24 * 60), title: ' ', content: '12/15 10:00 ', pinned: true, likes: 0, comments: 0 },\n  { id: 102, author: '15F ', floor: '15F', type: 'resident' as const, time: mockTimestampMinutesAgo(8 * 24 * 60), title: '', content: ' 2,800  3,200...', likes: 0, comments: 28, private: true },\n  { id: 103, author: '3F ', floor: '3F', type: 'resident' as const, time: mockTimestampMinutesAgo(14 * 24 * 60), title: '', content: '', likes: 0, comments: 15, private: true },\n];\n\nconst reviews = [\n  { id: 1, author: '', company: '21', visits: 12, deals: 3, pros: ['', ''], cons: '' },\n  { id: 2, author: '', company: '', visits: 8, deals: 2, pros: ['', ''], cons: '' },\n  { id: 3, author: '', company: '', visits: 6, deals: 1, pros: ['', ''], cons: '' },\n  { id: 4, author: '', company: '', visits: 10, deals: 2, pros: ['5', ''], cons: '' },\n  { id: 5, author: '', company: '', visits: 5, deals: 1, pros: ['', ''], cons: '' },\n];\n\nconst questions = [\n  { id: 1, question: '', time: mockTimestampMinutesAgo(2 * 24 * 60), answersCount: 2, answers: [\n    { author: '12F ', type: 'resident' as const, content: 'B2 B1 ' },\n    { author: '', type: 'agent' as const, content: ' 1:1.2', expert: true },\n  ]},\n  { id: 2, question: '', time: mockTimestampMinutesAgo(5 * 24 * 60), answersCount: 2, answers: [\n    { author: '3F ', type: 'resident' as const, content: '' },\n    { author: '10F ', type: 'resident' as const, content: '' },\n  ]},\n  { id: 3, question: '', time: mockTimestampMinutesAgo(7 * 24 * 60), answersCount: 1, answers: [\n    { author: '', type: 'official' as const, content: ' 85  24 ' },\n  ]},\n  { id: 4, question: '', time: mockTimestampMinutesAgo(3 * 24 * 60), answersCount: 0, answers: [] },\n];\n\nexport const MOCK_DATA: MockData = {\n  communityInfo: {\n    name: '',\n    year: 2018,\n    units: 280,\n    managementFee: 85,\n    builder: '',\n    members: 88,\n    avgRating: 4.2,\n    monthlyInteractions: 156,\n    forSale: 23,\n  },\n  posts: {\n    public: publicPosts,\n    private: privatePosts,\n    publicTotal: publicPosts.length,\n    privateTotal: privatePosts.length,\n  },\n  reviews: {\n    items: reviews,\n    total: reviews.length,\n  },\n  questions: {\n    items: questions,\n    total: questions.length,\n  },\n};\n\n// ============ Mock Factories ============\n\nimport type { Post, Question } from '../../types/community';\n\nexport const createMockPost = (content: string, visibility: 'public' | 'private'): Post => ({\n  id: Date.now(),\n  author: '',\n  type: 'resident',\n  time: new Date().toISOString(),\n  title: content.substring(0, 20) + (content.length > 20 ? '...' : ''),\n  content,\n  likes: 0,\n  comments: 0,\n  pinned: false,\n  private: visibility === 'private',\n});\n\nexport const createMockQuestion = (question: string): Question => ({\n  id: Date.now(),\n  question,\n  time: new Date().toISOString(),\n  answersCount: 0,\n  answers: [],\n});\n\nexport const createMockAnswer = (content: string) => ({\n  author: '',\n  type: 'resident' as const,\n  content,\n  expert: false,\n});\n","import type {\n  CommunityPost,\n  CommunityReview,\n  CommunityQuestion,\n  CommunityWallData,\n} from '../services/communityService';\nimport type { Post, Review, Question, CommunityInfo, UnifiedWallData } from '../types/community';\n\nexport type { UnifiedWallData };\n\n/**\n *  DB  placeholder  UI \n * \n */\nconst PLACEHOLDER_COMPANY_NAMES = ['', '', 'N/A', '', '-'];\n\ntype ResolvedAuthorRole = 'resident' | 'member' | 'agent' | 'official';\n\nconst ROLE_LABELS: Record<ResolvedAuthorRole, string> = {\n  resident: '',\n  member: '',\n  agent: '',\n  official: '',\n};\n\nfunction normalizeAuthorRole(role?: string | null): ResolvedAuthorRole {\n  if (role === 'agent') return 'agent';\n  if (role === 'official') return 'official';\n  if (role === 'member') return 'member';\n  return 'resident';\n}\n\nfunction safeAuthorIdSuffix(authorId?: string | null): string {\n  if (!authorId) return '';\n  return authorId.length >= 6 ? authorId.slice(0, 6) : authorId;\n}\n\nfunction buildFallbackAuthor(role: ResolvedAuthorRole, authorId?: string | null): string {\n  const label = ROLE_LABELS[role];\n  const suffix = safeAuthorIdSuffix(authorId);\n  return suffix ? `${label}-${suffix}` : label;\n}\n\nexport function resolveAuthorDisplay(\n  authorId?: string | null,\n  author?: { name?: string | null; role?: string | null; floor?: string | null }\n) {\n  const role = normalizeAuthorRole(author?.role);\n  const fallback = buildFallbackAuthor(role, authorId);\n  const name = author?.name?.trim() || fallback;\n  const floor = author?.floor?.trim();\n\n  return {\n    name,\n    role,\n    ...(floor ? { floor } : {}),\n  } as { name: string; role: ResolvedAuthorRole; floor?: string };\n}\n\n/**\n * pinned  pinned \n *  index \n */\nexport function sortPostsWithPinned(posts: Post[]): Post[] {\n  return posts\n    .map((post, index) => ({ post, index }))\n    .sort((a, b) => {\n      // pinned \n      const pinnedDiff = (b.post.pinned ? 1 : 0) - (a.post.pinned ? 1 : 0);\n      if (pinnedDiff !== 0) return pinnedDiff;\n      // API \n      return a.index - b.index;\n    })\n    .map(({ post }) => post);\n}\n\nexport function formatTimeAgo(dateStr: string): string {\n  const date = new Date(dateStr);\n  if (Number.isNaN(date.getTime())) {\n    return '';\n  }\n\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n  const diffWeeks = Math.floor(diffDays / 7);\n\n  if (diffMs < 0) {\n    return date.toLocaleDateString('zh-TW');\n  }\n  if (diffMins < 1) return '';\n  if (diffMins < 60) return `${diffMins}`;\n  if (diffHours < 24) return `${diffHours}`;\n  if (diffDays < 7) return `${diffDays}`;\n  if (diffWeeks < 4) return `${diffWeeks}`;\n  return date.toLocaleDateString('zh-TW');\n}\n\nexport function convertApiPost(post: CommunityPost): Post {\n  const authorInfo = resolveAuthorDisplay(post.author_id, post.author);\n\n  return {\n    id: post.id,\n    author: authorInfo.name,\n    ...(authorInfo.floor ? { floor: authorInfo.floor } : {}),\n    type: authorInfo.role,\n    time: formatTimeAgo(post.created_at),\n    title:\n      post.content.substring(0, 20) + (post.content.length > 20 ? '...' : ''),\n    content: post.content,\n    likes: post.likes_count,\n    comments: post.comments_count ?? 0,\n    pinned: post.is_pinned ?? false,\n    private: post.visibility === 'private',\n    liked_by: post.liked_by,\n  };\n}\n\nexport function convertApiReview(review: CommunityReview): Review {\n  const agent = review.agent;\n  const company = agent?.company?.trim() ?? '';\n  const authorInfo = resolveAuthorDisplay(review.author_id, { name: agent?.name ?? null, role: 'agent' });\n  //  placeholder \n  const normalizedCompany = PLACEHOLDER_COMPANY_NAMES.includes(company) ? '' : company;\n\n  return {\n    id: review.id,\n    author: authorInfo.name,\n    company: normalizedCompany,\n    visits: agent?.stats?.visits ?? 0,\n    deals: agent?.stats?.deals ?? 0,\n    pros: review.content?.pros ?? [],\n    cons: review.content?.cons ?? '',\n  };\n}\n\nexport function convertApiQuestion(question: CommunityQuestion): Question {\n  const answers = question.answers ?? [];\n  return {\n    id: question.id,\n    question: question.question,\n    time: formatTimeAgo(question.created_at),\n    answersCount: answers.length,\n    answers: answers.map(answer => {\n      const authorInfo = resolveAuthorDisplay(answer.author_id, answer.author);\n\n      return {\n        author: authorInfo.name,\n        type: authorInfo.role,\n        content: answer.content,\n        expert: answer.is_expert,\n      };\n    }),\n    // \n    hasMoreAnswers: question.hasMoreAnswers ?? false,\n    totalAnswers: question.totalAnswers ?? question.answers_count ?? answers.length,\n  };\n}\n\nexport function convertApiData(\n  apiData: CommunityWallData\n): UnifiedWallData {\n  //  posts/reviews/questions  null\n  const publicPosts = apiData.posts?.public ?? [];\n  const privatePosts = apiData.posts?.private ?? [];\n  const reviewItems = apiData.reviews?.items ?? [];\n  const questionItems = apiData.questions?.items ?? [];\n\n  const convertedPublic = publicPosts.map(convertApiPost);\n  const convertedPrivate = privatePosts.map(convertApiPost);\n  \n  const sortedPublic = sortPostsWithPinned(convertedPublic);\n  const sortedPrivate = sortPostsWithPinned(convertedPrivate);\n\n  const communityInfo: CommunityInfo = apiData.communityInfo\n    ? {\n        name: apiData.communityInfo.name ?? '',\n        year: apiData.communityInfo.year ?? null,  // null \n        units: apiData.communityInfo.units ?? null,\n        managementFee: apiData.communityInfo.managementFee ?? null,\n        builder: apiData.communityInfo.builder ?? null,\n        members: apiData.communityInfo.members ?? null,\n        avgRating: apiData.communityInfo.avgRating ?? null,\n        monthlyInteractions: apiData.communityInfo.monthlyInteractions ?? null,\n        forSale: apiData.communityInfo.forSale ?? null,\n      }\n    : {\n        name: '',\n        year: null,\n        units: null,\n        managementFee: null,\n        builder: null,\n        members: null,\n        avgRating: null,\n        monthlyInteractions: null,\n        forSale: null,\n      };\n\n  return {\n    communityInfo,\n    posts: {\n      public: sortedPublic,\n      private: sortedPrivate,\n      publicTotal: apiData.posts?.publicTotal ?? 0,\n      privateTotal: apiData.posts?.privateTotal ?? 0,\n    },\n    reviews: {\n      items: reviewItems.map(convertApiReview),\n      total: apiData.reviews?.total ?? 0,\n    },\n    questions: {\n      items: questionItems.map(convertApiQuestion),\n      total: apiData.questions?.total ?? 0,\n    },\n  };\n}\n","/**\n * useCommunityWallData\n * \n *  Hook\n * - Mock \n * - API  API \n * -  Mock  API\n */\n\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport { useCommunityWall } from './useCommunityWallQuery';\nimport { supabase } from '../lib/supabase';\nimport { mhEnv } from '../lib/mhEnv';\nimport type { CommunityWallData } from '../services/communityService';\nimport type { CommunityInfo, Post, Review, Question, Role } from '../pages/Community/types';\nimport { MOCK_DATA, createMockPost, createMockQuestion, createMockAnswer } from '../pages/Community/mockData';\nimport { convertApiData, sortPostsWithPinned } from './communityWallConverters';\nimport type { UnifiedWallData } from './communityWallConverters';\n\n// ============  ============\nexport type { Post, Review, Question, CommunityInfo };\nexport type { UnifiedWallData };\n\n\nconst MOCK_DATA_STORAGE_KEY = 'community-wall-mock-data-v1';\nconst MOCK_LATENCY_MS = 250;\n\nconst EMPTY_WALL_DATA: UnifiedWallData = {\n  communityInfo: {\n    name: '...',\n    year: null,\n    units: null,\n    managementFee: null,\n    builder: null,\n    members: null,\n    avgRating: null,\n    monthlyInteractions: null,\n    forSale: null,\n  },\n  posts: {\n    public: [],\n    private: [],\n    publicTotal: 0,\n    privateTotal: 0,\n  },\n  reviews: {\n    items: [],\n    total: 0,\n  },\n  questions: {\n    items: [],\n    total: 0,\n  },\n};\n\nconst delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n\nconst canUseMockStorage = (): boolean => {\n  try {\n    return typeof window !== 'undefined' && typeof window.localStorage !== 'undefined';\n  } catch {\n    return false;\n  }\n};\n\nconst mergeMockState = (\n  fallback: UnifiedWallData,\n  stored: Partial<UnifiedWallData> | null\n): UnifiedWallData => {\n  if (!stored) return fallback;\n  return {\n    ...fallback,\n    ...stored,\n    communityInfo: {\n      ...fallback.communityInfo,\n      ...(stored.communityInfo ?? {}),\n    },\n    posts: {\n      public: stored.posts?.public ?? fallback.posts.public,\n      private: stored.posts?.private ?? fallback.posts.private,\n      publicTotal: stored.posts?.publicTotal ?? fallback.posts.publicTotal,\n      privateTotal: stored.posts?.privateTotal ?? fallback.posts.privateTotal,\n    },\n    reviews: stored.reviews ?? fallback.reviews,\n    questions: stored.questions ?? fallback.questions,\n  };\n};\n\nconst loadPersistedMockState = (fallback: UnifiedWallData): UnifiedWallData => {\n  if (!canUseMockStorage()) return fallback;\n  try {\n    const raw = window.localStorage.getItem(MOCK_DATA_STORAGE_KEY);\n    if (!raw) return fallback;\n    const parsed = JSON.parse(raw);\n    return mergeMockState(fallback, parsed);\n  } catch (err) {\n    console.error('Failed to load community wall mock state', err);\n    return fallback;\n  }\n};\n\nconst saveMockState = (data: UnifiedWallData) => {\n  if (!canUseMockStorage()) return;\n  try {\n    window.localStorage.setItem(MOCK_DATA_STORAGE_KEY, JSON.stringify(data));\n  } catch (err) {\n    console.error('Failed to persist community wall mock state', err);\n  }\n};\n\nconst VALID_VIEWER_ROLES: Role[] = ['guest', 'member', 'resident', 'agent'];\nconst resolveViewerRole = (rawRole: unknown, hasAuthenticatedUser: boolean): Role => {\n  if (typeof rawRole === 'string' && VALID_VIEWER_ROLES.includes(rawRole as Role)) {\n    return rawRole as Role;\n  }\n  return hasAuthenticatedUser ? 'member' : 'guest';\n};\n\n\n// ============ Hook  ============\nexport interface UseCommunityWallDataOptions {\n  /**  */\n  includePrivate?: boolean;\n  /**  Mock  */\n  initialMockData?: UnifiedWallData;\n  /**  Mock  */\n  persistMockState?: boolean;\n}\n\nexport interface UseCommunityWallDataReturn {\n  /**  */\n  data: UnifiedWallData;\n  /**  Mock */\n  useMock: boolean;\n  /**  Mock/API */\n  setUseMock: (v: boolean) => void;\n  /**  */\n  isLoading: boolean;\n  /**  */\n  error: Error | null;\n  /**  */\n  refresh: () => Promise<void>;\n  /**  */\n  toggleLike: (postId: string | number) => Promise<void>;\n  /**  */\n  createPost: (content: string, visibility?: 'public' | 'private') => Promise<void>;\n  /**  */\n  askQuestion: (question: string) => Promise<void>;\n  /**  */\n  answerQuestion: (questionId: string, content: string) => Promise<void>;\n  /** /// */\n  viewerRole: Role;\n  /**  */\n  isAuthenticated: boolean;\n}\n\n// ============ Main Hook ============\n/**\n *  Hook useMock  Mock  API \n * \n *\n * @param communityId -  UUID API \n * @param options.includePrivate - \n * @param options.initialMockData -  Mock \n * @param options.persistMockState -  Mock  localStorage\n * @returns /\n */\nexport function useCommunityWallData(\n  communityId: string | undefined,\n  options: UseCommunityWallDataOptions = {}\n): UseCommunityWallDataReturn {\n  const {\n    includePrivate = false,\n    initialMockData = MOCK_DATA,\n    persistMockState = true,\n  } = options;\n  const [useMock, setUseMockState] = useState<boolean>(() => mhEnv.isMockEnabled());\n\n  useEffect(() => {\n    const unsubscribe = mhEnv.subscribe(setUseMockState);\n    return unsubscribe;\n  }, []);\n\n  // K:  ID\n  const [currentUserId, setCurrentUserId] = useState<string | undefined>(undefined);\n  useEffect(() => {\n    let mounted = true;\n    const fetchUserId = async () => {\n      try {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (mounted && user?.id) {\n          setCurrentUserId(user.id);\n        }\n      } catch (err) {\n        //  undefined\n        if (import.meta.env.DEV) {\n          console.warn('[useCommunityWallData]  ID:', err);\n        }\n      }\n    };\n    fetchUserId();\n\n    // \n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n      if (mounted) {\n        setCurrentUserId(session?.user?.id);\n      }\n    });\n\n    return () => {\n      mounted = false;\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  // Mock  immer  state\n  const [mockData, setMockData] = useState<UnifiedWallData>(() =>\n    persistMockState ? loadPersistedMockState(initialMockData) : initialMockData\n  );\n  const hasRestoredFromStorage = useRef(false);\n  const [likedPosts, setLikedPosts] = useState<Set<string | number>>(() => new Set());\n  const hasAuthenticatedUser = Boolean(currentUserId);\n  const lastApiDataRef = useRef<UnifiedWallData | null>(null);\n\n  useEffect(() => {\n    lastApiDataRef.current = null;\n  }, [communityId]);\n\n  //  API  Mock \n  useEffect(() => {\n    if (!useMock) {\n      setLikedPosts(new Set());\n    }\n  }, [useMock]);\n\n  useEffect(() => {\n    if (!persistMockState || !useMock) return;\n    if (!hasRestoredFromStorage.current) {\n      hasRestoredFromStorage.current = true;\n      return;\n    }\n    setMockData(loadPersistedMockState(initialMockData));\n  }, [useMock, persistMockState, initialMockData]);\n\n  useEffect(() => {\n    if (!persistMockState || !useMock) return;\n    saveMockState(mockData);\n  }, [mockData, persistMockState, useMock]);\n\n  // API  currentUserId \n  const { \n    data: apiData, \n    isLoading: apiLoading, \n    error: apiError,\n    refresh: apiRefresh,\n    toggleLike: apiToggleLike,\n    createPost: apiCreatePost,\n    askQuestion: apiAskQuestion,\n    answerQuestion: apiAnswerQuestion,\n  } = useCommunityWall(communityId, { \n    enabled: !useMock,\n    includePrivate,\n    currentUserId,\n  });\n\n  //  Mock  API pinned \n  const data = useMemo<UnifiedWallData>(() => {\n    if (useMock) {\n      // Mock \n      return {\n        ...mockData,\n        posts: {\n          ...mockData.posts,\n          public: sortPostsWithPinned(mockData.posts.public),\n          private: sortPostsWithPinned(mockData.posts.private),\n        },\n      };\n    }\n\n    if (apiData) {\n      const converted = convertApiData(apiData);\n      const safeCommunityInfo = converted.communityInfo?.name\n        ? converted.communityInfo\n        : { ...EMPTY_WALL_DATA.communityInfo, name: '' };\n      const merged = { ...converted, communityInfo: safeCommunityInfo };\n      lastApiDataRef.current = merged;\n      return merged;\n    }\n\n    // API \n    return lastApiDataRef.current ?? EMPTY_WALL_DATA;\n  }, [useMock, apiData, mockData]);\n\n  // \n  const refresh = useCallback(async () => {\n    if (useMock) {\n      setMockData(prev => ({ ...prev }));\n      return;\n    }\n    await apiRefresh();\n  }, [useMock, apiRefresh]);\n\n  const viewerRole = useMemo<Role>(() => {\n    if (useMock) {\n      return hasAuthenticatedUser ? 'member' : 'guest';\n    }\n    return resolveViewerRole(apiData?.viewerRole, hasAuthenticatedUser);\n  }, [useMock, apiData?.viewerRole, hasAuthenticatedUser]);\n  const isAuthenticated = viewerRole !== 'guest';\n\n  // Mock  ID localStorage  ID\n  const getMockUserId = useCallback((): string => {\n    if (currentUserId) return currentUserId;\n    //  localStorage  ID\n    const storageKey = 'mock_user_id';\n    let mockId = localStorage.getItem(storageKey);\n    if (!mockId) {\n      mockId = `mock-user-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n      localStorage.setItem(storageKey, mockId);\n    }\n    return mockId;\n  }, [currentUserId]);\n\n  const toggleLike = useCallback(async (postId: string | number) => {\n    if (useMock) {\n      await delay(MOCK_LATENCY_MS);\n      const mockUserId = getMockUserId();\n      // Mock  likes  liked_by\n      const isLiked = likedPosts.has(postId);\n      setMockData(prev => {\n        const updatePosts = (posts: Post[]): Post[] => \n          posts.map(post => {\n            if (post.id !== postId) return post;\n            const currentLikes = post.likes ?? 0;\n            const currentLikedBy = post.liked_by ?? [];\n            return {\n              ...post,\n              likes: isLiked ? Math.max(0, currentLikes - 1) : currentLikes + 1,\n              liked_by: isLiked\n                ? currentLikedBy.filter(id => id !== mockUserId)\n                : [...currentLikedBy, mockUserId],\n            };\n          });\n\n        return {\n          ...prev,\n          posts: {\n            ...prev.posts,\n            public: updatePosts(prev.posts.public),\n            private: updatePosts(prev.posts.private),\n          },\n        };\n      });\n      setLikedPosts(prev => {\n        const next = new Set(prev);\n        if (next.has(postId)) {\n          next.delete(postId);\n        } else {\n          next.add(postId);\n        }\n        return next;\n      });\n      return;\n    }\n    await apiToggleLike(String(postId));\n  }, [useMock, apiToggleLike, likedPosts, getMockUserId]);\n\n  const createPost = useCallback(async (content: string, visibility: 'public' | 'private' = 'public') => {\n    if (useMock) {\n      // Mock \n      const newPost = createMockPost(content, visibility);\n\n      setMockData(prev => {\n        const target = visibility === 'private' ? 'private' : 'public';\n        const targetTotal = visibility === 'private' ? 'privateTotal' : 'publicTotal';\n        return {\n          ...prev,\n          posts: {\n            ...prev.posts,\n            [target]: [newPost, ...prev.posts[target]],\n            [targetTotal]: prev.posts[targetTotal] + 1,\n          },\n        };\n      });\n      return;\n    }\n    await apiCreatePost(content, visibility);\n  }, [useMock, apiCreatePost]);\n\n  const askQuestion = useCallback(async (question: string) => {\n    if (useMock) {\n      // Mock \n      const newQuestion = createMockQuestion(question);\n\n      setMockData(prev => ({\n        ...prev,\n        questions: {\n          ...prev.questions,\n          items: [newQuestion, ...prev.questions.items],\n          total: prev.questions.total + 1,\n        },\n      }));\n      return;\n    }\n    await apiAskQuestion(question);\n  }, [useMock, apiAskQuestion]);\n\n  const answerQuestion = useCallback(async (questionId: string, content: string) => {\n    if (useMock) {\n      // Mock \n      setMockData(prev => ({\n        ...prev,\n        questions: {\n          ...prev.questions,\n          items: prev.questions.items.map(q => {\n            if (q.id.toString() !== questionId) return q;\n            \n            const newAnswer = createMockAnswer(content);\n\n            return {\n              ...q,\n              answers: [...q.answers, newAnswer],\n              answersCount: q.answersCount + 1,\n            };\n          }),\n        },\n      }));\n      return;\n    }\n    await apiAnswerQuestion(questionId, content);\n  }, [useMock, apiAnswerQuestion]);\n\n  const setUseMock = useCallback((value: boolean) => {\n    const next = mhEnv.setMock(value);\n    setUseMockState(next);\n  }, []);\n\n  return {\n    data,\n    useMock,\n    setUseMock,\n    isLoading: !useMock && apiLoading,\n    error: useMock ? null : apiError,\n    refresh,\n    toggleLike,\n    createPost,\n    askQuestion,\n    answerQuestion,\n    viewerRole,\n    isAuthenticated,\n  };\n}\n\nexport default useCommunityWallData;\n","/**\n * Community Wall Page\n * \n * \n *  - React Querya11y \n */\n\nimport { useState, useCallback, useEffect, useMemo, useRef } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\n\nimport { GlobalHeader } from '../../components/layout/GlobalHeader';\n\n// Components\nimport {\n  ReviewsSection,\n  PostsSection,\n  QASection,\n  Sidebar,\n  RoleSwitcher,\n  BottomCTA,\n  WallSkeleton,\n  WallErrorBoundary,\n  VersionBadge,\n} from './components';\nimport { notify } from '../../lib/notify';\nimport { MockToggle } from '../../components/common/MockToggle';\nimport { mhEnv } from '../../lib/mhEnv';\n\n// Types\nimport type { Role, WallTab } from './types';\nimport { getPermissions } from './types';\n\n// Hooks - \nimport { useCommunityWallData } from '../../hooks/useCommunityWallData';\nimport { useAuth } from '../../hooks/useAuth';\n\n// ============ URL / Storage Helpers ============\nconst ROLE_PARAM = 'role';\nconst ROLE_STORAGE_KEY = 'community-wall-dev-role';\nconst VALID_ROLES: Role[] = ['guest', 'member', 'resident', 'agent'];\nconst rawMockFlag = `${import.meta.env.VITE_COMMUNITY_WALL_ALLOW_MOCK ?? ''}`.trim().toLowerCase();\nconst GLOBAL_MOCK_TOGGLE_ENABLED = rawMockFlag !== 'false';\n\nconst parseRoleParam = (value: string | null): Role | null => {\n  if (!value) return null;\n  return VALID_ROLES.includes(value as Role) ? (value as Role) : null;\n};\n\nconst updateURLParam = (params: URLSearchParams, key: string, value: string | null) => {\n  const next = new URLSearchParams(params);\n  if (!value) {\n    next.delete(key);\n  } else {\n    next.set(key, value);\n  }\n  return next;\n};\n\n// ============ Inner Component (Wrapped by ErrorBoundary) ============\nfunction WallInner() {\n  const params = useParams<{ id: string }>();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const communityId = params.id;\n  const searchParamsRef = useRef(searchParams);\n\n  useEffect(() => {\n    searchParamsRef.current = searchParams;\n  }, [searchParams]);\n\n  //  role URL/localStorage \n  const initialRole = useMemo<Role>(() => {\n    if (!import.meta.env.DEV) return 'guest';\n    const urlRole = parseRoleParam(searchParamsRef.current.get(ROLE_PARAM));\n    if (urlRole) {\n      return urlRole;\n    }\n    try {\n      const stored = localStorage.getItem(ROLE_STORAGE_KEY) as Role | null;\n      if (stored && VALID_ROLES.includes(stored)) {\n        return stored;\n      }\n    } catch {}\n    return 'guest';\n  }, []);\n\n  const [role, setRoleInternal] = useState<Role>(initialRole);\n  const [currentTab, setCurrentTab] = useState<WallTab>('public');\n  const [isReloading, setIsReloading] = useState(false);\n  \n  // B1/B4/B5:  auth \n  const { isAuthenticated, role: authRole, loading: authLoading, error: authError } = useAuth();\n\n  // B4:  effectiveRole\n  const effectiveRole = useMemo<Role>(() => {\n    if (authLoading) return 'guest'; // loading  guest\n    const allowMockRole = import.meta.env.DEV && GLOBAL_MOCK_TOGGLE_ENABLED && role !== 'guest';\n    if (allowMockRole) return role;\n    return isAuthenticated ? authRole : 'guest';\n  }, [authRole, isAuthenticated, role, authLoading]);\n  \n  const perm = useMemo(() => getPermissions(effectiveRole), [effectiveRole]);\n  const allowManualMockToggle = GLOBAL_MOCK_TOGGLE_ENABLED;\n\n  //  Hook - \n  const { \n    data,\n    useMock,\n    setUseMock,\n    isLoading,\n    error,\n    refresh,\n    toggleLike,\n    createPost,\n    askQuestion,\n    answerQuestion,\n    viewerRole,\n  } = useCommunityWallData(communityId ?? '', {\n    includePrivate: perm.canAccessPrivate,\n  });\n  \n  const canToggleMock = allowManualMockToggle || useMock;\n  const allowManualRoleSwitch = import.meta.env.DEV || useMock;\n  const mockToggleDisabled = !canToggleMock && !useMock;\n\n  //  auth  toast\n  useEffect(() => {\n    if (authError) {\n      notify.error('', authError.message);\n    }\n  }, [authError]);\n\n  // \n  useEffect(() => {\n    if (import.meta.env.DEV || useMock) return;\n    if (viewerRole && viewerRole !== role) {\n      setRoleInternal(viewerRole);\n    }\n  }, [viewerRole, role, useMock]);\n\n  const forceEnableMock = useCallback(() => {\n    const next = mhEnv.setMock(true);\n    setUseMock(next);\n  }, [setUseMock]);\n\n  //  setRole URL  localStorage\n  const setRole = useCallback((newRole: Role) => {\n    if (!allowManualRoleSwitch) return;\n    setRoleInternal(newRole);\n\n    if (!import.meta.env.DEV) {\n      return;\n    }\n\n    const nextParams = updateURLParam(searchParamsRef.current, ROLE_PARAM, newRole);\n    setSearchParams(nextParams, { replace: true });\n    try {\n      localStorage.setItem(ROLE_STORAGE_KEY, newRole);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      console.warn('[CommunityWall] Failed to persist role preference', message);\n    }\n  }, [allowManualRoleSwitch, setSearchParams]);\n\n  useEffect(() => {\n    if (!import.meta.env.DEV) return;\n    const urlRole = parseRoleParam(searchParams.get(ROLE_PARAM));\n    if (urlRole && urlRole !== role) {\n      setRoleInternal(urlRole);\n    }\n  }, [role, searchParams, setRoleInternal]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    const handleStorage = (event: StorageEvent) => {\n      if (event.storageArea !== window.localStorage || event.newValue === null) return;\n      if (import.meta.env.DEV && event.key === ROLE_STORAGE_KEY) {\n        const parsedRole = parseRoleParam(event.newValue);\n        if (parsedRole && parsedRole !== role) {\n          setRoleInternal(parsedRole);\n        }\n      }\n    };\n    window.addEventListener('storage', handleStorage);\n    return () => window.removeEventListener('storage', handleStorage);\n  }, [role, setRoleInternal]);\n\n  const handleUnlock = useCallback(() => {\n    //  Auth  HTML window.location \n    window.location.href = '/maihouses/auth.html';\n  }, []);\n  \n  // Tab \n  const handleTabChange = useCallback((tab: WallTab) => {\n    if (tab === 'private' && !perm.canAccessPrivate) {\n      return;\n    }\n    setCurrentTab(tab);\n  }, [perm.canAccessPrivate]);\n\n  // \n  useEffect(() => {\n    if (currentTab === 'private' && !perm.canAccessPrivate) {\n      setCurrentTab('public');\n    }\n  }, [currentTab, perm.canAccessPrivate]);\n\n  //  - B6:  auth guard\n  const handleLike = useCallback(async (postId: number | string) => {\n    if (!isAuthenticated) {\n      notify.error('', '');\n      return;\n    }\n    try {\n      await toggleLike(postId);\n    } catch (err) {\n      console.error('Failed to toggle like', err);\n      notify.error('', '');\n    }\n  }, [toggleLike, isAuthenticated]);\n\n  // \n  const handleCreatePost = useCallback(async (content: string, visibility: 'public' | 'private' = 'public') => {\n    try {\n      await createPost(content, visibility);\n    } catch (err) {\n      console.error('Failed to create post', err);\n      notify.error('', '');\n    }\n  }, [createPost]);\n\n  const handleAskQuestion = useCallback(async (question: string) => {\n    try {\n      await askQuestion(question);\n    } catch (err) {\n      console.error('Failed to submit question', err);\n      notify.error('', '');\n      throw err;\n    }\n  }, [askQuestion]);\n\n  const handleAnswerQuestion = useCallback(async (questionId: string, content: string) => {\n    try {\n      await answerQuestion(questionId, content);\n    } catch (err) {\n      console.error('Failed to submit answer', err);\n      notify.error('', '');\n      throw err;\n    }\n  }, [answerQuestion]);\n\n  const handleReload = useCallback(async () => {\n    if (isReloading) return;\n    setIsReloading(true);\n    try {\n      await refresh();\n    } catch (err) {\n      console.error('Failed to refresh community wall', err);\n    } finally {\n      setIsReloading(false);\n    }\n  }, [isReloading, refresh]);\n\n  // ============  Hooks ============\n\n  //  communityId\n  if (!communityId) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]\">\n        <div className=\"rounded-2xl border border-brand/10 bg-white px-8 py-10 text-center shadow-[0_10px_30px_rgba(0,34,73,0.08)]\">\n          <div className=\"mb-3 text-4xl\"></div>\n          <p className=\"mb-4 text-base font-semibold text-ink-900\"></p>\n          <p className=\"mb-6 text-sm text-ink-600\"></p>\n          <a\n            href=\"/maihouses/\"\n            className=\"inline-flex items-center justify-center rounded-full bg-brand px-5 py-2.5 text-sm font-bold text-white shadow hover:bg-brand-600\"\n          >\n            \n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  // Auth \n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]\">\n        <GlobalHeader mode=\"community\" title=\"...\" />\n        <div className=\"mx-auto max-w-[960px] p-2.5\">\n          <WallSkeleton />\n        </div>\n      </div>\n    );\n  }\n\n  // Auth \n  if (authError) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]\">\n        <GlobalHeader mode=\"community\" title=\"\" />\n        <div className=\"mx-auto max-w-[960px] p-4\">\n          <div className=\"rounded-2xl border border-red-200 bg-red-50 p-6 text-center shadow-sm\">\n            <p className=\"text-lg font-semibold text-red-700\"></p>\n            <p className=\"mt-2 text-sm text-red-600\">{authError.message}</p>\n            <button\n              type=\"button\"\n              onClick={() => window.location.reload()}\n              className=\"mt-4 inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-bold text-white hover:bg-brand-700\"\n            >\n              \n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Loading  API \n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]\">\n        <GlobalHeader mode=\"community\" title=\"...\" />\n        <div className=\"mx-auto max-w-[960px] p-2.5\">\n          <WallSkeleton />\n        </div>\n      </div>\n    );\n  }\n\n  // Error  API \n  if (error) {\n    const errorMsg = error.message || '';\n    const isAuthError = errorMsg.includes('401') || errorMsg.includes('403') || errorMsg.includes('');\n\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-b from-bg-base to-bg-soft\">\n        <div className=\"text-center\">\n          <div className=\"mb-2 text-2xl\">{isAuthError ? '' : ''}</div>\n          <div className=\"mb-2 text-sm text-ink-600\">\n            {isAuthError ? '' : ''}\n          </div>\n          {isAuthError ? (\n            <button \n              onClick={() => window.location.href = '/auth'}\n              className=\"rounded-lg bg-brand px-4 py-2 text-sm text-white\"\n            >\n              \n            </button>\n          ) : (\n            <div className=\"flex flex-col gap-2 sm:flex-row sm:justify-center\">\n              <button \n                onClick={handleReload}\n                disabled={isReloading}\n                aria-busy={isReloading}\n                className={`rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold transition hover:bg-brand/10 ${isReloading ? 'cursor-not-allowed text-brand/60' : 'text-brand'}`}\n              >\n                {isReloading ? ' ' : ' '}\n              </button>\n              <button \n                onClick={forceEnableMock}\n                className=\"rounded-lg bg-[#1a1a2e] px-4 py-2 text-sm font-semibold text-white shadow hover:brightness-110\"\n              >\n                 \n              </button>\n            </div>\n          )}\n        </div>\n        <VersionBadge />\n      </div>\n    );\n  }\n\n  // \n  const { communityInfo, posts, reviews, questions } = data;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]\">\n      <GlobalHeader mode=\"community\" title={communityInfo.name} />\n      \n      <div className=\"mx-auto flex max-w-[960px] gap-5 p-2.5 pb-[calc(80px+env(safe-area-inset-bottom,20px))] lg:p-2.5\">\n        {/*  */}\n        <main className=\"flex max-w-[600px] flex-1 animate-[fadeInUp_0.5s_ease-out] flex-col gap-3\">\n          <ReviewsSection role={effectiveRole} reviews={reviews} onUnlock={handleUnlock} />\n          <PostsSection \n            role={effectiveRole} \n            currentTab={currentTab} \n            onTabChange={handleTabChange}\n            publicPosts={posts.public}\n            privatePosts={posts.private}\n            onLike={handleLike}\n            onCreatePost={handleCreatePost}\n            onUnlock={handleUnlock}\n          />\n          <QASection \n            role={effectiveRole} \n            questions={questions}\n            onAskQuestion={handleAskQuestion}\n            onAnswerQuestion={handleAnswerQuestion}\n            onUnlock={handleUnlock}\n          />\n        </main>\n\n        {/*  -  */}\n        <Sidebar \n          info={communityInfo} \n          questions={questions}\n          posts={posts.public}\n        />\n      </div>\n\n      {/*  CTA */}\n      <BottomCTA role={effectiveRole} />\n\n      {/* Mock  */}\n      {(allowManualMockToggle || useMock) && (\n        <MockToggle\n          useMock={useMock}\n          onToggle={() => setUseMock(!useMock)}\n          disabled={mockToggleDisabled}\n        />\n      )}\n\n      {/*  */}\n      {(import.meta.env.DEV || useMock) && (\n        <RoleSwitcher role={role} onRoleChange={setRole} />\n      )}\n\n      <VersionBadge />\n\n      {/*  keyframes */}\n      <style>{`\n        @keyframes fadeInUp {\n          from { opacity: 0; transform: translateY(8px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes wave {\n          0%, 100% { transform: rotate(0deg); }\n          20% { transform: rotate(-25deg); }\n          40% { transform: rotate(10deg); }\n          60% { transform: rotate(-20deg); }\n          80% { transform: rotate(5deg); }\n        }\n      `}</style>\n    </div>\n  );\n}\n\n// ============ Main Export with ErrorBoundary ============\nexport default function Wall() {\n  return (\n    <WallErrorBoundary>\n      <WallInner />\n    </WallErrorBoundary>\n  );\n}\n","export default function Suggested() {\n  return (\n    <section className=\"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]\">\n      <h1 className=\"text-xl font-semibold\"></h1>\n      <p className=\"mt-2 text-sm text-[var(--text-secondary)]\"></p>\n    </section>\n  )\n}\n","import React, { useMemo, useState } from \"react\";\nimport { Events, track } from \"../analytics/track\";\n\nfunction calcMonthlyPayment(principal: number, annualRate: number, years: number) {\n  const r = annualRate / 12 / 100;\n  const n = years * 12;\n  if (r === 0) return principal / n;\n  return (principal * r) / (1 - Math.pow(1 + r, -n));\n}\n\nexport const BudgetLite: React.FC = () => {\n  const [total, setTotal] = useState<number>(1500);\n  const [down, setDown] = useState<number>(30);\n  const [rate, setRate] = useState<number>(2.25);\n  const [years, setYears] = useState<number>(20);\n  const [income, setIncome] = useState<number | \"\">(\"\");\n\n  const principal = useMemo(() => Math.max(0, total * (1 - down / 100)), [total, down]);\n  const monthly = useMemo(() => Math.round(calcMonthlyPayment(principal * 10000, rate, years)), [principal, rate, years]); // \n  const mgmt = 3000; // \n\n  const burden = useMemo(() => {\n    if (typeof income !== \"number\" || income <= 0) return null;\n    return Math.round((monthly + mgmt) / income * 100);\n  }, [income, monthly]);\n\n  const onCopy = () => {\n    const text = `\\n${total}${down}%  ${principal.toFixed(0)}${years}${rate}%   ${monthly}  ${mgmt} ` + (burden !== null ? `\\n ${burden}%` : \"\");\n    navigator.clipboard.writeText(text).then(() => track(Events.BudgetCopy, {}));\n  };\n\n  const warmTip = (() => {\n    if (burden === null) return \"\";\n    if (burden >= 50) return \"\";\n    if (burden >= 35) return \"/\";\n    return \"\";\n  })();\n\n  return (\n    <div style={{ border: \"1px solid #eee\", borderRadius: 12, padding: 12, background: \"#fff\" }}>\n      <div style={{ fontWeight: 600, marginBottom: 8 }}>Lite</div>\n      <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(5,1fr)\", gap: 8 }}>\n        <label>()<input type=\"number\" value={total} onChange={e => setTotal(Number(e.target.value))} style={{ width: \"100%\", padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }} /></label>\n        <label>(%)<input type=\"number\" value={down} onChange={e => setDown(Number(e.target.value))} style={{ width: \"100%\", padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }} /></label>\n        <label>(%)<input type=\"number\" value={rate} onChange={e => setRate(Number(e.target.value))} style={{ width: \"100%\", padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }} /></label>\n        <label><input type=\"number\" value={years} onChange={e => setYears(Number(e.target.value))} style={{ width: \"100%\", padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }} /></label>\n        <label>()<input type=\"number\" value={typeof income === \"number\" ? income : \"\"} onChange={e => { const v = Number(e.target.value); setIncome(Number.isFinite(v) ? v : \"\"); }} style={{ width: \"100%\", padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }} /></label>\n      </div>\n      <div style={{ marginTop: 10, fontSize: 14, color: \"#0a2246\" }}>\n         <b>{monthly.toLocaleString()}</b>  <b>{principal.toFixed(0)}</b> \n        {burden !== null && <> <b>{burden}%</b></>}\n      </div>\n      <div style={{ marginTop: 8, color: \"#6b7280\" }}>{warmTip}</div>\n      <button onClick={onCopy} style={{ marginTop: 8, padding: \"6px 10px\", borderRadius: 8, border: \"1px solid #1749D7\", background: \"#fff\", color: \"#1749D7\" }}></button>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { politeRewrite } from \"../services/ai\";\nimport { Events, track } from \"../analytics/track\";\n\nexport const PoliteRewrite: React.FC<{ onAdopt?: (text: string) => void }> = ({ onAdopt }) => {\n  const [draft, setDraft] = useState(\"\");\n  const [audience, setAudience] = useState<\"owner\" | \"agent\">(\"agent\");\n  const [intent, setIntent] = useState<\"view\" | \"detail\" | \"pet\" | \"price\">(\"detail\");\n  const [v1, setV1] = useState<string | null>(null);\n  const [v2, setV2] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [sent, setSent] = useState(false);\n\n  const handleRewrite = async () => {\n    const d = draft.trim();\n    if (!d) return;\n    setLoading(true);\n    try {\n      const out = await politeRewrite(d, { audience, intent });\n      const m = out.split(/\\n+/).map(s => s.trim()).filter(Boolean);\n      const a = m.find(x => /^V1/.test(x)) || \"\";\n      const b = m.find(x => /^V2/.test(x)) || \"\";\n      setV1(a.replace(/^V1[:]\\s?/, \"\"));\n      setV2(b.replace(/^V2[:]\\s?/, \"\"));\n      track(Events.RewriteGen, { audience, intent });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const adopt = (text: string) => {\n    onAdopt?.(text);\n    setSent(true);\n    track(Events.RewriteAdopt, { audience, intent });\n    setTimeout(() => setSent(false), 2500);\n  };\n\n  return (\n    <div style={{ border: \"1px solid #eee\", borderRadius: 12, padding: 12, background: \"#fff\" }}>\n      <div style={{ fontWeight: 600, marginBottom: 6 }}></div>\n      <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\", marginBottom: 8 }}>\n        <label>\n          <select value={audience} onChange={e => setAudience(e.target.value as any)} style={{ marginLeft: 6, padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }}>\n            <option value=\"agent\"></option>\n            <option value=\"owner\"></option>\n          </select>\n        </label>\n        <label>\n          <select value={intent} onChange={e => setIntent(e.target.value as any)} style={{ marginLeft: 6, padding: 6, borderRadius: 8, border: \"1px solid #ddd\" }}>\n            <option value=\"detail\"></option>\n            <option value=\"view\"></option>\n            <option value=\"pet\"></option>\n            <option value=\"price\">/</option>\n          </select>\n        </label>\n      </div>\n      <textarea\n        rows={3}\n        placeholder=\"/\"\n        value={draft}\n        onChange={(e) => setDraft(e.target.value)}\n        style={{ width: \"100%\", padding: 8, borderRadius: 8, border: \"1px solid #ddd\" }}\n      />\n      <div style={{ display: \"flex\", gap: 8, marginTop: 8 }}>\n        <button onClick={handleRewrite} disabled={loading} style={{ padding: \"8px 12px\", borderRadius: 8, background: \"#1749D7\", color: \"#fff\", border: \"1px solid #1749D7\" }}>\n          {loading ? \"\" : \"\"}\n        </button>\n      </div>\n      {(v1 || v2) && (\n        <div style={{ marginTop: 10, display: \"grid\", gap: 8 }}>\n          {v1 && (\n            <div style={{ border: \"1px solid #E6ECFF\", borderRadius: 8, padding: 8 }}>\n              <div style={{ fontSize: 12, color: \"#6b7280\", marginBottom: 4 }}></div>\n              <div style={{ marginBottom: 6 }}>{v1}</div>\n              <button onClick={() => adopt(v1)} style={{ padding: \"6px 10px\", borderRadius: 8, border: \"1px solid #1749D7\", background: \"#fff\", color: \"#1749D7\" }}>/</button>\n            </div>\n          )}\n          {v2 && (\n            <div style={{ border: \"1px solid #E6ECFF\", borderRadius: 8, padding: 8 }}>\n              <div style={{ fontSize: 12, color: \"#6b7280\", marginBottom: 4 }}></div>\n              <div style={{ marginBottom: 6 }}>{v2}</div>\n              <button onClick={() => adopt(v2)} style={{ padding: \"6px 10px\", borderRadius: 8, border: \"1px solid #1749D7\", background: \"#fff\", color: \"#1749D7\" }}>/</button>\n            </div>\n          )}\n          {sent && <div style={{ color: \"#16a34a\" }}> </div>}\n        </div>\n      )}\n    </div>\n  );\n};\n","export type NoteItem = {\n  id: string;\n  createdAt: number;\n  note: string;\n  echo?: string;\n};\nconst KEY = \"mai-notes-v1\";\nfunction loadAll(): NoteItem[] {\n  try {\n    const raw = localStorage.getItem(KEY);\n    if (!raw) return [];\n    return JSON.parse(raw) as NoteItem[];\n  } catch {\n    return [];\n  }\n}\nfunction saveAll(items: NoteItem[]) {\n  localStorage.setItem(KEY, JSON.stringify(items));\n}\nexport function addNote(note: string, echo?: string): NoteItem {\n  const items = loadAll();\n  const item: NoteItem = {\n    id: Math.random().toString(36).slice(2),\n    createdAt: Date.now(),\n    note,\n    ...(echo && { echo }),\n  };\n  items.unshift(item);\n  saveAll(items);\n  return item;\n}\nexport function listNotes(): NoteItem[] { return loadAll(); }\nexport function clearNotes() { saveAll([]); }\n","import React, { useState } from \"react\";\nimport { empathicEcho } from \"../services/ai\";\nimport { addNote } from \"../stores/notesStore\";\nimport { Events, track } from \"../analytics/track\";\n\nexport const NoteWithEcho: React.FC = () => {\n  const [text, setText] = useState(\"\");\n  const [echo, setEcho] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [focused, setFocused] = useState(false);\n\n  const handleSave = async () => {\n    const v = text.trim();\n    if (!v) return;\n    setLoading(true);\n    try {\n      const echoText = await empathicEcho(v);\n      setEcho(echoText);\n      addNote(v, echoText);\n      track(Events.NoteSaved, {});\n    } catch (e) {\n      addNote(v);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ border: \"1px solid #eee\", borderRadius: 12, padding: 12, background: \"#fff\" }}>\n      <div style={{ fontWeight: 600, marginBottom: 6 }}></div>\n      <textarea\n        rows={3}\n        placeholder=\"\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n        onFocus={() => setFocused(true)}\n        onBlur={() => setFocused(false)}\n        style={{ width: \"100%\", padding: 8, borderRadius: 8, border: \"1px solid #ddd\" }}\n      />\n      {focused && <div style={{ fontSize: 12, color: \"#6b7280\", marginTop: 4 }}></div>}\n      <div style={{ display: \"flex\", gap: 8, marginTop: 8 }}>\n        <button onClick={handleSave} disabled={loading} style={{ padding: \"8px 12px\", borderRadius: 8, background: \"#1749D7\", color: \"#fff\", border: \"1px solid #1749D7\" }}>\n          {loading ? \"\" : \"\"}\n        </button>\n        {echo && <span style={{ color: \"#6b7280\" }}>AI {echo}</span>}\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { debriefToMNA } from \"../services/ai\";\nimport { addNote } from \"../stores/notesStore\";\nimport { upsertTags } from \"../stores/profileStore\";\nimport { Events, track } from \"../analytics/track\";\n\nfunction parseTags(text: string): string[] {\n  const m = text.split(\"\\n\").find(l => l.trim().startsWith(\"#tags\"));\n  if (!m) return [];\n  const arr = m.replace(/^#tags\\s*[:]\\s*/i, \"\").split(\",\").map(s => s.trim()).filter(Boolean);\n  return arr.slice(0, 5);\n}\n\nexport const DebriefMini: React.FC = () => {\n  const [like, setLike] = useState(\"\");\n  const [pain, setPain] = useState(\"\");\n  const [next, setNext] = useState(\"\");\n  const [out, setOut] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleGen = async () => {\n    setLoading(true);\n    try {\n      const text = await debriefToMNA(like, pain, next);\n      setOut(text);\n      const tags = parseTags(text);\n      if (tags.length) upsertTags(tags);\n      track(Events.DebriefGen, { tags });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = () => {\n    const md = `\\n${like}\\n${pain}\\n${next}\\n---\\n${out ?? \"\"}`;\n    addNote(md);\n    track(Events.DebriefSave, {});\n  };\n\n  return (\n    <div style={{ border: \"1px solid #eee\", borderRadius: 12, padding: 12, background: \"#fff\" }}>\n      <div style={{ fontWeight: 600, marginBottom: 6 }}>Mini Debrief</div>\n      <div style={{ display: \"grid\", gap: 8 }}>\n        <input value={like} onChange={e => setLike(e.target.value)} placeholder=\"\" style={{ padding: 8, borderRadius: 8, border: \"1px solid #ddd\" }} />\n        <input value={pain} onChange={e => setPain(e.target.value)} placeholder=\"\" style={{ padding: 8, borderRadius: 8, border: \"1px solid #ddd\" }} />\n        <input value={next} onChange={e => setNext(e.target.value)} placeholder=\"\" style={{ padding: 8, borderRadius: 8, border: \"1px solid #ddd\" }} />\n      </div>\n      <div style={{ display: \"flex\", gap: 8, marginTop: 8 }}>\n        <button onClick={handleGen} disabled={loading} style={{ padding: \"8px 12px\", borderRadius: 8, background: \"#1749D7\", color: \"#fff\", border: \"1px solid #1749D7\" }}>\n          {loading ? \"\" : \" Must/Nice/Avoid + #tags\"}\n        </button>\n        {out && <button onClick={handleSave} style={{ padding: \"8px 12px\", borderRadius: 8, border: \"1px solid #1749D7\", background: \"#fff\", color: \"#1749D7\" }}></button>}\n      </div>\n      {out && <div style={{ marginTop: 10, whiteSpace: \"pre-wrap\", color: \"#0a2246\" }}>{out}</div>}\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { eli5Term } from \"../services/ai\";\nimport { Events, track } from \"../analytics/track\";\n\nconst KEYWORDS = [\"\", \"\", \"\", \"\", \"\", \"\"];\n\nexport const ELI5Tooltip: React.FC<{ text: string }> = ({ text }) => {\n  const [open, setOpen] = useState(false);\n  const [ans, setAns] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const fetchAns = async () => {\n    if (ans) return;\n    setLoading(true);\n    try {\n      const out = await eli5Term(text);\n      setAns(out);\n      track(Events.ELI5Open, { term: text });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // \n  useEffect(() => {\n    const today = new Date().toISOString().slice(0,10);\n    const k = `mai-eli5-suggest-${today}`;\n    const shouldSuggest = KEYWORDS.some(w => text.includes(w)) && !localStorage.getItem(k);\n    if (shouldSuggest) {\n      localStorage.setItem(k, \"1\");\n      setOpen(true);\n      fetchAns();\n    }\n  }, []);\n\n  const toggle = async () => {\n    const next = !open;\n    setOpen(next);\n    if (next) await fetchAns();\n  };\n\n  return (\n    <span style={{ display: \"inline-flex\", alignItems: \"center\", position: \"relative\" }}>\n      <button aria-label=\"\" onClick={toggle} style={{ marginLeft: 6, width: 18, height: 18, borderRadius: 999, border: \"1px solid #C9D5FF\", background: \"#F5F8FF\", color: \"#1749D7\", fontSize: 12, cursor: \"pointer\" }}>?</button>\n      {open && (\n        <div style={{ position: \"absolute\", top: \"120%\", left: 0, background: \"#fff\", border: \"1px solid #E6ECFF\", borderRadius: 8, padding: 10, width: 280, boxShadow: \"0 10px 24px rgba(0,0,0,0.08)\", zIndex: 50 }}>\n          <div style={{ fontSize: 12, color: \"#6b7280\", marginBottom: 6 }}></div>\n          <div style={{ whiteSpace: \"pre-wrap\" }}>{loading ? \"\" : ans}</div>\n        </div>\n      )}\n    </span>\n  );\n};\n","import { BudgetLite } from '../../components/BudgetLite'\nimport { PoliteRewrite } from '../../components/PoliteRewrite'\nimport { NoteWithEcho } from '../../components/NoteWithEcho'\nimport { DebriefMini } from '../../components/DebriefMini'\nimport { ELI5Tooltip } from '../../components/ELI5Tooltip'\n\nexport default function Detail() {\n  return (\n    <section className=\"mx-auto mt-8 max-w-container space-y-6 rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]\">\n      <h1 className=\"text-xl font-semibold\"></h1>\n      <p className=\"mt-2 text-sm text-[var(--text-secondary)]\"></p>\n\n      {/* A7: Budget Calculator */}\n      <div className=\"rounded-lg border border-gray-200 bg-gray-50 p-4\">\n        <h2 className=\"mb-3 text-lg font-medium\"></h2>\n        <BudgetLite />\n      </div>\n\n      {/* A5: Polite Message Rewrite */}\n      <div className=\"rounded-lg border border-gray-200 bg-gray-50 p-4\">\n        <h2 className=\"mb-3 text-lg font-medium\"></h2>\n        <PoliteRewrite />\n      </div>\n\n      {/* A4: Note with AI Echo */}\n      <div className=\"rounded-lg border border-gray-200 bg-gray-50 p-4\">\n        <h2 className=\"mb-3 text-lg font-medium\"></h2>\n        <NoteWithEcho />\n      </div>\n\n      {/* A8: Viewing Debrief */}\n      <div className=\"rounded-lg border border-gray-200 bg-gray-50 p-4\">\n        <h2 className=\"mb-3 text-lg font-medium\"></h2>\n        <DebriefMini />\n      </div>\n\n      {/* A6: ELI5 Tooltip Demo */}\n      <div className=\"rounded-lg border border-gray-200 bg-gray-50 p-4\">\n        <h2 className=\"mb-3 text-lg font-medium\"></h2>\n        <p className=\"text-sm text-gray-600\">\n          <ELI5Tooltip text=\"\" /> <ELI5Tooltip text=\"\" /> \n        </p>\n      </div>\n    </section>\n  )\n}\n","import { Transaction, Step } from '../hooks/useTrustRoom';\n\n// --- TYPES ---\n// Re-exporting or defining types if needed, but for now we use the ones from hook or define here\n// Ideally types should be in a separate file, e.g., src/types/trust.ts\n// For this refactor, I'll assume we might move types later, but for now I'll import or redefine compatible structures.\n\nexport interface TrustService {\n  fetchData: (caseId: string, token: string) => Promise<Transaction | null>;\n  submit: (caseId: string, token: string, step: string, data: any) => Promise<boolean>;\n  confirm: (caseId: string, token: string, step: string, note?: string) => Promise<boolean>;\n  payment: (caseId: string, token: string) => Promise<boolean>;\n  checklist: (caseId: string, token: string, itemId: string, checked: boolean) => Promise<boolean>;\n  supplement: (caseId: string, token: string, content: string) => Promise<boolean>;\n  reset: (caseId: string, token: string) => Promise<boolean>;\n}\n\n// --- MOCK IMPLEMENTATION ---\nconst MOCK_TIMEOUTS: Record<number, number> = { 5: 30 * 1000 };\n\nconst createMockState = (id: string): Transaction => ({\n  id,\n  currentStep: 1,\n  isPaid: false,\n  steps: {\n    1: { name: \"\", agentStatus: 'pending', buyerStatus: 'pending', data: {}, locked: false },\n    2: { name: \"\", agentStatus: 'pending', buyerStatus: 'pending', locked: false, data: { risks: { water: false, wall: false, structure: false, other: false } } },\n    3: { name: \"\", agentStatus: 'pending', buyerStatus: 'pending', data: {}, locked: false },\n    4: { name: \"\", agentStatus: 'pending', buyerStatus: 'pending', data: {}, locked: false },\n    5: { name: \"\", agentStatus: 'pending', buyerStatus: 'pending', locked: false, paymentStatus: 'pending', paymentDeadline: null, data: {} },\n    6: { name: \"\", agentStatus: 'pending', buyerStatus: 'pending', locked: false, checklist: [], data: {} }\n  },\n  supplements: []\n});\n\nconst getMockTx = (id: string): Transaction => {\n  if (typeof window === 'undefined') return createMockState(id);\n  // Use sessionStorage to avoid polluting global localStorage and keep it session-based\n  const saved = sessionStorage.getItem(`mock_tx_${id}`);\n  return saved ? JSON.parse(saved) : createMockState(id);\n};\n\nconst saveMockTx = (tx: Transaction) => {\n  if (typeof window !== 'undefined') {\n    sessionStorage.setItem(`mock_tx_${tx.id}`, JSON.stringify(tx));\n  }\n};\n\nexport const mockService = {\n  fetchData: async (caseId: string) => {\n    return getMockTx(caseId);\n  },\n\n  dispatch: async (action: string, caseId: string, role: string, body: any): Promise<{ success: boolean; tx?: Transaction; error?: string }> => {\n    await new Promise(r => setTimeout(r, 600)); // Simulate delay\n    const tx = getMockTx(caseId);\n    const newTx = JSON.parse(JSON.stringify(tx)) as Transaction;\n    const stepNum = parseInt(body.step || newTx.currentStep);\n\n    try {\n      switch (action) {\n        case 'submit':\n          if (role !== 'agent') throw new Error(\"\");\n          if (newTx.steps[stepNum]) {\n            newTx.steps[stepNum].data = { ...newTx.steps[stepNum].data, ...body.data };\n            newTx.steps[stepNum].agentStatus = 'submitted';\n          }\n          break;\n\n        case 'confirm':\n          if (role !== 'buyer') throw new Error(\"\");\n          if (newTx.steps[stepNum]) {\n            newTx.steps[stepNum].buyerStatus = 'confirmed';\n            if (body.note) {\n              newTx.steps[stepNum].data = { ...newTx.steps[stepNum].data, buyerNote: body.note };\n            }\n          }\n\n          if (stepNum === 5) {\n            if (newTx.steps[5]) {\n              newTx.steps[5].paymentStatus = 'initiated';\n              newTx.steps[5].paymentDeadline = Date.now() + (MOCK_TIMEOUTS[5] || 30000);\n            }\n          } else if (stepNum === 6) {\n            const allChecked = newTx.steps[6]?.checklist?.every(i => i.checked);\n            if (!allChecked) throw new Error(\"\");\n            if (newTx.steps[6]) newTx.steps[6].locked = true;\n          } else {\n            if (newTx.steps[stepNum]) newTx.steps[stepNum].locked = true;\n            newTx.currentStep += 1;\n          }\n          break;\n\n        case 'payment':\n          if (role !== 'agent') throw new Error(\"\");\n          if (newTx.steps[5]?.paymentStatus !== 'initiated') throw new Error(\"\");\n          newTx.isPaid = true;\n          if (newTx.steps[5]) {\n            newTx.steps[5].paymentStatus = 'completed';\n            newTx.steps[5].locked = true;\n          }\n          newTx.currentStep = 6;\n          if (newTx.steps[6]) {\n            newTx.steps[6].checklist = [\n              { id: 'utilities', label: \" \", checked: false },\n              { id: 'security', label: \" \", checked: false },\n              { id: 'keys', label: \" \", checked: false },\n              { id: 'condition', label: \"  (/)\", checked: false }\n            ];\n          }\n          break;\n\n        case 'checklist':\n          const step6 = newTx.steps[6];\n          if (step6 && step6.checklist) {\n            const item = step6.checklist.find(i => i.id === body.itemId);\n            if (item) {\n              item.checked = body.checked;\n            }\n          }\n          break;\n\n        case 'supplement':\n          newTx.supplements.push({\n            role,\n            content: body.content,\n            timestamp: Date.now()\n          });\n          break;\n\n        case 'reset':\n          const resetState = createMockState(caseId);\n          saveMockTx(resetState);\n          return { success: true, tx: resetState };\n      }\n      saveMockTx(newTx);\n      return { success: true, tx: newTx };\n    } catch (e: any) {\n      return { success: false, error: e.message };\n    }\n  }\n};\n\n// --- REAL IMPLEMENTATION ---\nexport const realService = {\n  fetchData: async (caseId: string, token: string) => {\n    try {\n      const res = await fetch(`/api/trust/status?id=${caseId}`);\n      if (res.ok) {\n        return await res.json();\n      }\n      if (res.status === 401 || res.status === 403) {\n        throw new Error(\"UNAUTHORIZED\");\n      }\n      return null;\n    } catch (e: any) {\n      if (e.message === \"UNAUTHORIZED\") throw e;\n      console.error(e);\n      return null;\n    }\n  },\n\n  dispatch: async (endpoint: string, caseId: string, token: string, body: any) => {\n    try {\n      const res = await fetch(`/api/trust/${endpoint}?id=${caseId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n      });\n      \n      if (res.status === 401 || res.status === 403) {\n         return { success: false, error: \"UNAUTHORIZED\" };\n      }\n\n      const d = await res.json();\n      if (d.error) {\n        return { success: false, error: d.error };\n      } else {\n        return { success: true, tx: d.state || d }; // Some APIs return { success: true, state: ... }\n      }\n    } catch (e: any) {\n      return { success: false, error: e.message };\n    }\n  }\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport { notify } from '../lib/notify';\nimport { mockService, realService } from '../services/trustService';\n\n// --- TYPES ---\nexport interface Step {\n  name: string;\n  agentStatus: 'pending' | 'submitted';\n  buyerStatus: 'pending' | 'confirmed';\n  locked: boolean;\n  data: any;\n  paymentStatus?: 'pending' | 'initiated' | 'completed' | 'expired';\n  paymentDeadline?: number | null;\n  checklist?: { id: string; label: string; checked: boolean }[];\n}\n\nexport interface Transaction {\n  id: string;\n  currentStep: number;\n  isPaid: boolean;\n  steps: Record<string, Step>;\n  supplements: { role: string; content: string; timestamp: number }[];\n}\n\nexport function useTrustRoom() {\n  // States\n  const [isMock, setIsMock] = useState(false);\n  const [caseId, setCaseId] = useState('');\n  const [role, setRole] = useState<'agent' | 'buyer'>('agent');\n  const [tx, setTx] = useState<Transaction | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isBusy, setIsBusy] = useState(false);\n  const [timeLeft, setTimeLeft] = useState('--:--:--');\n  const [authError, setAuthError] = useState(false);\n\n  // Init / Session Check\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const init = async () => {\n      // 1. Check URL Token (Legacy/Link support)\n      const hash = window.location.hash;\n      if (hash.includes('token=')) {\n        const t = hash.split('token=')[1];\n        // Clear immediately to prevent history leak\n        window.history.replaceState(null, '', window.location.pathname);\n        \n        try {\n          await fetch('/api/trust/session', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ token: t })\n          });\n        } catch (e) {\n          console.error(\"Session exchange failed\", e);\n          notify.error('');\n        }\n      }\n\n      // 2. Check Session (Cookie)\n      try {\n        const res = await fetch('/api/trust/me');\n        if (res.ok) {\n          const user = await res.json();\n          setRole(user.role);\n          setCaseId(user.caseId);\n          setIsMock(false);\n          setAuthError(false);\n          await fetchData(user.caseId);\n        } else {\n          // Not logged in\n          setLoading(false);\n        }\n      } catch (e) {\n        console.error(e);\n        setLoading(false);\n      }\n    };\n\n    init();\n  }, []);\n\n  // Mock Mode Toggle\n  const startMockMode = useCallback(async () => {\n    setIsMock(true);\n    setAuthError(false);\n    const mockId = 'MOCK-DEMO-01';\n    setCaseId(mockId);\n    setRole('agent');\n    const mockTx = await mockService.fetchData(mockId);\n    setTx(mockTx);\n    notify.success(' ()');\n  }, []);\n\n  // Fetch Data\n  const fetchData = useCallback(async (id?: string) => {\n    const targetId = id || caseId;\n    if (!targetId) return;\n\n    // Don't fetch if we already know auth is bad, unless forcing a retry (which would reset authError elsewhere)\n    if (authError && !isMock) return;\n\n    setLoading(true);\n    try {\n      let data;\n      if (isMock) {\n        data = await mockService.fetchData(targetId);\n      } else {\n        data = await realService.fetchData(targetId, ''); // Token handled by cookie\n      }\n      \n      if (data) {\n        setTx(data);\n        setAuthError(false);\n      } else if (!isMock) {\n        // If real mode and no data/error, maybe session expired\n      }\n    } catch (e: any) {\n      console.error(e);\n      if (e.message === \"UNAUTHORIZED\") {\n        setAuthError(true);\n        notify.error('');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [isMock, caseId, authError]);\n\n  // Polling\n  useEffect(() => {\n    if (!isMock && caseId && !authError) {\n      const interval = setInterval(() => fetchData(), 5000);\n      return () => clearInterval(interval);\n    }\n  }, [caseId, isMock, fetchData, authError]);\n\n  // Payment Timer\n  useEffect(() => {\n    const timer = setInterval(() => {\n      if (tx?.steps?.[5]?.paymentStatus === 'initiated' && tx.steps[5].paymentDeadline) {\n        const diff = tx.steps[5].paymentDeadline - Date.now();\n        if (diff <= 0) {\n          setTimeLeft(\"\");\n          if (isMock) {\n             // Mock auto-expire logic could be moved to service, but simple UI update here is fine for now\n             // Actually, let's just refresh data or handle it in service next time\n          } else {\n             fetchData();\n          }\n        } else {\n          const h = Math.floor(diff / 3600000);\n          const m = Math.floor((diff % 3600000) / 60000);\n          const s = Math.floor((diff % 60000) / 1000);\n          setTimeLeft(`${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`);\n        }\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [tx, isMock, fetchData]);\n\n  // Unified Action Handler\n  const dispatchAction = useCallback(async (endpoint: string, body: any = {}) => {\n    if (isBusy) return;\n    setIsBusy(true);\n\n    try {\n      const service = isMock ? mockService : realService;\n      // For mock service, we map endpoint names to dispatch action\n      // For real service, we pass endpoint name directly\n      \n      let result;\n      if (isMock) {\n          result = await mockService.dispatch(endpoint, caseId, role, body);\n      } else {\n          result = await realService.dispatch(endpoint, caseId, '', body);\n      }\n\n      if (result.success) {\n          if (result.tx) setTx(result.tx); // Update local state immediately if returned\n          await fetchData(); // Refresh to be sure\n         notify.success('');\n          return true;\n      } else {\n          if (result.error === \"UNAUTHORIZED\") {\n             setAuthError(true);\n           notify.error('');\n          } else {\n           notify.error(result.error || '');\n          }\n          return false;\n      }\n    } catch (e) {\n      console.error(e);\n      notify.error('');\n      return false;\n    } finally {\n      setIsBusy(false);\n    }\n  }, [isMock, caseId, role, fetchData, isBusy]);\n\n  return {\n    isMock,\n    caseId,\n    setCaseId,\n    role,\n    setRole,\n    setToken: () => {}, // Deprecated but kept for interface compatibility if needed\n    token: '', // Deprecated\n    tx,\n    setTx,\n    loading,\n    isBusy,\n    timeLeft,\n    startMockMode,\n    dispatchAction,\n    fetchData\n  };\n}\n","import { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { useTrustRoom } from '../../hooks/useTrustRoom'\nimport { Phone, ClipboardCheck, HandCoins, MessageSquare, FileSignature, Home, Lock, Check, RotateCcw, Info, User, Briefcase, Zap } from 'lucide-react'\n\nexport default function AssureDetail() {\n  const location = useLocation()\n  \n  const {\n    isMock,\n    caseId,\n    setCaseId,\n    role,\n    setRole,\n    setToken,\n    tx,\n    loading,\n    isBusy,\n    timeLeft,\n    startMockMode,\n    dispatchAction\n  } = useTrustRoom()\n  \n  // Inputs\n  const [inputBuffer, setInputBuffer] = useState('')\n  const [supplementInput, setSupplementInput] = useState('')\n  \n  // Dev Helper\n  const isDev = typeof window !== 'undefined' && (window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1'));\n\n  // Note: Token handling and initialization is now managed by useTrustRoom hook\n  // We just need to handle the \"No Token\" state in the UI\n\n  const handleAction = async (endpoint: string, body: any = {}) => {\n      const success = await dispatchAction(endpoint, body);\n      if (success) {\n          setInputBuffer('');\n          setSupplementInput('');\n      }\n  }\n\n  const submitAgent = (step: string) => handleAction('submit', { step, data: { note: inputBuffer } })\n  const confirmStep = (step: string) => handleAction('confirm', { step, note: inputBuffer })\n  const pay = () => { if (confirm('')) handleAction('payment') }\n  const toggleCheck = (itemId: string, checked: boolean) => { if (role === 'buyer') handleAction('checklist', { itemId, checked }) }\n  const addSupplement = () => handleAction('supplement', { content: supplementInput })\n  const reset = () => { if (confirm('')) handleAction('reset') }\n  \n  const toggleRole = () => {\n      const newRole = role === 'agent' ? 'buyer' : 'agent'\n      setRole(newRole)\n  }\n\n  // --- RENDERING ---\n\n  if (!tx && !loading) {\n      return (\n          <div className=\"flex min-h-screen flex-col items-center justify-center bg-slate-100 p-4 font-sans\">\n              <div className=\"w-full max-w-sm rounded-2xl bg-white p-8 text-center shadow-xl\">\n                <div className=\"mx-auto mb-4 flex size-16 items-center justify-center rounded-full bg-blue-100 text-blue-600\">\n                    <Zap size={32} />\n                </div>\n                <h2 className=\"mb-2 text-xl font-bold text-gray-800\"> Trust Room</h2>\n                <p className=\"mb-6 text-sm text-gray-500\"> (Token)</p>\n                \n                <button \n                    onClick={startMockMode}\n                    className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-blue-600 py-3 font-bold text-white shadow-lg transition hover:bg-blue-700\"\n                >\n                    <Zap size={18} />\n                     (Demo Mode)\n                </button>\n                <p className=\"mt-4 text-xs text-gray-400\"></p>\n              </div>\n          </div>\n      )\n  }\n\n  if (!tx) return <div className=\"p-8 text-center\">...</div>\n\n  const getStepIcon = (k: string) => {\n    switch (k) {\n      case '1': return <Phone size={14} />\n      case '2': return <ClipboardCheck size={14} />\n      case '3': return <HandCoins size={14} />\n      case '4': return <MessageSquare size={14} />\n      case '5': return <FileSignature size={14} />\n      case '6': return <Home size={14} />\n      default: return <Info size={14} />\n    }\n  }\n\n  return (\n    <div className=\"relative mx-auto min-h-screen max-w-md bg-white pb-24 font-sans text-gray-800 shadow-2xl\">\n      {/* Global Toaster is now used */}\n      \n      {/* Header */}\n      <header className={`${isMock ? 'bg-indigo-900' : 'bg-slate-900'} sticky top-0 z-overlay flex items-center justify-between p-4 text-white shadow-lg transition-colors`}>\n        <div>\n          <h1 className=\"flex items-center gap-2 text-lg font-bold tracking-wide\">\n            MaiHouses <span className={`rounded px-1 text-xs ${isMock ? 'bg-yellow-500 text-black' : 'bg-blue-600'}`}>{isMock ? 'DEMO' : 'V10'}</span>\n          </h1>\n          <div className=\"flex items-center gap-2 text-[10px] text-gray-400\">\n            <span>: {caseId}</span>\n            {loading && <span className=\"animate-pulse\"></span>}\n          </div>\n        </div>\n        <div className=\"flex gap-2\">\n            <button onClick={reset} className=\"flex size-8 items-center justify-center rounded bg-white/10 transition hover:bg-white/20\">\n                <RotateCcw size={14} />\n            </button>\n            <button \n                onClick={toggleRole} \n                className={`flex items-center gap-1 rounded-md border border-white/20 px-3 py-1 text-xs font-bold transition ${role === 'agent' ? 'bg-blue-600' : 'bg-green-600'}`}\n            >\n                {role === 'agent' ? <Briefcase size={12} /> : <User size={12} />}\n                {role === 'agent' ? '' : ''}\n            </button>\n        </div>\n      </header>\n\n      {/* Progress Bar */}\n      <div className=\"sticky top-[60px] z-40 border-b bg-slate-50 p-4\">\n        <div className=\"mb-2 flex items-center justify-between\">\n          <span className=\"text-xs font-bold text-slate-700\"> {tx.currentStep}/6</span>\n          {tx.isPaid && <span className=\"rounded-full bg-green-100 px-2 py-0.5 text-xs font-bold text-green-800\"></span>}\n        </div>\n        <div className=\"h-2 w-full overflow-hidden rounded-full bg-gray-200\">\n          <div className=\"h-2 rounded-full bg-blue-600 transition-all duration-700\" style={{ width: `${(tx.currentStep / 6) * 100}%` }}></div>\n        </div>\n      </div>\n\n      {/* Steps */}\n      <div className=\"space-y-0 p-4\">\n        {Object.entries(tx.steps).map(([key, step]) => {\n          const stepNum = parseInt(key)\n          const isCurrent = stepNum === tx.currentStep\n          const isPast = stepNum < tx.currentStep\n          const isFuture = stepNum > tx.currentStep\n          \n          let iconBg = 'bg-gray-300 border-gray-300'\n          if (isPast || step.locked) iconBg = 'bg-green-500 border-green-500'\n          else if (isCurrent) iconBg = 'bg-blue-600 border-blue-600'\n\n          return (\n            <div key={key} className={`relative py-3 pl-14 ${isFuture ? 'opacity-50 grayscale' : ''}`}>\n              {/* Icon */}\n              <div className={`absolute left-0 top-3 z-10 flex size-10 items-center justify-center rounded-full border-4 border-white text-white shadow-sm transition-colors ${iconBg}`}>\n                {getStepIcon(key)}\n              </div>\n              {/* Line */}\n              {key !== '6' && <div className=\"absolute bottom-[-20px] left-[24px] top-[50px] z-0 w-[2px] bg-gray-200\"></div>}\n              \n              {/* Card */}\n              <div className={`rounded-xl border bg-white p-4 shadow-sm transition-all ${isCurrent ? 'border-blue-500 ring-2 ring-blue-50' : 'border-gray-200'}`}>\n                <div className=\"mb-3 flex items-start justify-between\">\n                  <h3 className=\"flex items-center gap-2 font-bold text-gray-800\">\n                    {step.name}\n                    {key === '5' && step.paymentStatus === 'initiated' && !step.locked && (\n                      <span className=\"animate-pulse rounded bg-orange-50 px-2 text-[10px] text-orange-500\"></span>\n                    )}\n                    {key === '5' && step.paymentStatus === 'expired' && (\n                      <span className=\"rounded bg-red-50 px-2 text-[10px] text-red-500\"></span>\n                    )}\n                  </h3>\n                  {step.locked && <Lock size={14} className=\"text-green-600\" />}\n                </div>\n\n                {/* Step 2: Viewing */}\n                {key === '2' && step.data.note && (\n                  <div className=\"mb-3 rounded border border-gray-100 bg-gray-50 p-3\">\n                    <p className=\"mb-2 border-b pb-1 text-xs font-bold text-gray-500\"> </p>\n                    <div className=\"whitespace-pre-wrap text-sm\">{step.data.note}</div>\n                  </div>\n                )}\n\n                {/* Step 5: Payment Timer */}\n                {key === '5' && step.paymentStatus === 'initiated' && !step.locked && (\n                  <div className=\"mb-4 rounded-lg border border-orange-200 bg-orange-50 p-4 text-center\">\n                    <div className=\"mb-1 font-mono text-2xl font-bold text-orange-600\">{timeLeft}</div>\n                    <div className=\"mb-3 text-xs text-orange-400\"></div>\n                    {role === 'agent' ? (\n                      <button \n                        onClick={pay} \n                        disabled={isBusy || timeLeft === ''} \n                        className={`w-full rounded py-2 font-bold text-white shadow ${timeLeft === '' ? 'cursor-not-allowed bg-gray-400' : 'bg-gradient-to-r from-orange-500 to-red-500 hover:shadow-lg'}`}\n                      >\n                        {timeLeft === '' ? '' : (isBusy ? '...' : ' NT$ 2,000')}\n                      </button>\n                    ) : (\n                      <div className=\"text-xs text-gray-400\">...</div>\n                    )}\n                  </div>\n                )}\n\n                {/* Step 6: Checklist */}\n                {key === '6' && !step.locked && tx.isPaid && (\n                  <div className=\"mt-2 space-y-2\">\n                    {step.checklist?.map((item) => (\n                      <div \n                        key={item.id} \n                        onClick={() => toggleCheck(item.id, !item.checked)} \n                        className={`flex cursor-pointer items-center rounded border p-4 transition ${item.checked ? 'border-indigo-200 bg-indigo-50' : 'hover:bg-gray-50'}`}\n                      >\n                        <div className={`flex size-5 items-center justify-center rounded border bg-white ${item.checked ? 'border-indigo-600 bg-indigo-600' : ''}`}>\n                          {item.checked && <Check size={12} className=\"text-white\" />}\n                        </div>\n                        <span className={`ml-3 text-sm ${item.checked ? 'font-bold text-indigo-800' : ''}`}>{item.label}</span>\n                      </div>\n                    ))}\n                    <button onClick={() => confirmStep('6')} className=\"mt-2 w-full rounded bg-indigo-600 py-2 font-bold text-white\"></button>\n                  </div>\n                )}\n\n                {/* Actions */}\n                {!step.locked && isCurrent && key !== '5' && key !== '6' && (\n                  <div>\n                    {role === 'agent' && (\n                      step.agentStatus === 'pending' ? (\n                        <div>\n                          <textarea \n                            value={inputBuffer}\n                            onChange={(e) => setInputBuffer(e.target.value)}\n                            className=\"mb-2 w-full rounded border p-2 text-sm outline-none ring-blue-200 focus:ring-2\" \n                            placeholder=\"...\"\n                          />\n                          <button onClick={() => submitAgent(key)} disabled={isBusy} className=\"w-full rounded bg-slate-800 py-2 text-sm text-white\">\n                            {isBusy ? '...' : ''}\n                          </button>\n                        </div>\n                      ) : (\n                        <div className=\"rounded bg-gray-50 py-2 text-center text-xs text-gray-400\">...</div>\n                      )\n                    )}\n                    {role === 'buyer' && (\n                      step.agentStatus === 'submitted' ? (\n                        <div>\n                          <p className=\"mb-2 text-xs text-gray-500\"></p>\n                          <div className=\"mb-2 whitespace-pre-wrap rounded border bg-gray-50 p-2 text-sm\">{step.data.note || ''}</div>\n                          \n                          {/* Buyer Note Input */}\n                          <textarea \n                              value={inputBuffer}\n                              onChange={(e) => setInputBuffer(e.target.value)}\n                              className=\"mb-2 w-full rounded border p-2 text-sm outline-none ring-green-200 focus:ring-2\" \n                              placeholder=\" ()...\"\n                          />\n                          \n                          <button onClick={() => confirmStep(key)} disabled={isBusy} className=\"w-full rounded bg-green-600 py-2 text-sm text-white\">\n                            {isBusy ? '...' : ''}\n                          </button>\n                        </div>\n                      ) : (\n                        <div className=\"py-2 text-center text-xs text-gray-400\">...</div>\n                      )\n                    )}\n                  </div>\n                )}\n\n                {/* Display Buyer Note if exists (for history) */}\n                {step.data.buyerNote && (\n                    <div className=\"mt-2 rounded border border-green-100 bg-green-50 p-2 text-xs\">\n                        <span className=\"font-bold text-green-700\"></span> {step.data.buyerNote}\n                    </div>\n                )}\n\n                {/* Step 5 Actions */}\n                {key === '5' && !step.locked && step.paymentStatus === 'pending' && (\n                  <div>\n                    {role === 'agent' && step.agentStatus === 'pending' && (\n                      <button onClick={() => submitAgent('5')} className=\"w-full rounded bg-slate-800 py-2 text-white\"></button>\n                    )}\n                    {role === 'buyer' && step.agentStatus === 'submitted' && (\n                      <button onClick={() => confirmStep('5')} className=\"w-full rounded bg-green-600 py-2 text-white\"> ()</button>\n                    )}\n                  </div>\n                )}\n\n                {/* Supplements */}\n                {tx.supplements.length > 0 && (\n                  <div className=\"mt-4 border-t border-dashed pt-4\">\n                    {tx.supplements.map((s, i) => (\n                      <div key={i} className=\"mb-1 flex gap-2 rounded border border-gray-100 bg-gray-50 p-2 text-xs\">\n                        <span className=\"font-bold\">{s.role === 'agent' ? '' : ''}</span> \n                        <span className=\"flex-1\">{s.content}</span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          )\n        })}\n\n        {/* Add Supplement */}\n        <div className=\"mt-8 rounded-xl border bg-white p-4 shadow-sm\">\n          <h4 className=\"mb-2 text-xs font-bold text-gray-500\">  (/)</h4>\n          <p className=\"mb-2 text-[10px] text-gray-400\"></p>\n          <div className=\"flex gap-2\">\n            <input \n              value={supplementInput}\n              onChange={(e) => setSupplementInput(e.target.value)}\n              className=\"flex-1 rounded border px-3 py-2 text-sm\" \n              placeholder=\"...\" \n            />\n            <button onClick={addSupplement} disabled={!supplementInput} className=\"rounded bg-gray-800 px-4 text-sm text-white\"></button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import SmartAsk from '../../features/home/sections/SmartAsk'\n\n//  AI /\nexport default function ChatStandalone() {\n  return (\n    <main className=\"mx-auto max-w-container p-4 md:p-6\">\n      <SmartAsk />\n    </main>\n  )\n}\n","import { Component, ReactNode } from 'react'\nimport { trackEvent } from '../services/analytics'\n\ninterface Props { children: ReactNode }\ntype State = { hasError: boolean }\n\nexport default class ErrorBoundary extends Component<Props, State> {\n  override state: State = { hasError: false }\n  \n  static getDerivedStateFromError(): State {\n    return { hasError: true }\n  }\n  \n  override componentDidCatch(err: unknown) {\n    console.error(err)\n    try {\n      trackEvent('error_boundary', '*', String((err as Error).message || err))\n    } catch {}\n  }\n  \n  override render() {\n    return this.state.hasError ? (\n      <div className=\"rounded-[var(--r-lg)] bg-white p-4 text-[var(--danger)] shadow-[var(--shadow-card)]\">\n        \n      </div>\n    ) : (\n      this.props.children\n    )\n  }\n}\n","import React, { createContext, useContext, useMemo, useState } from \"react\";\nimport { Events, track } from \"../analytics/track\";\nimport { setLastMood } from \"../stores/profileStore\";\n\nexport type Mood = \"neutral\" | \"stress\" | \"rest\";\ntype MoodAPI = {\n  mood: Mood;\n  setMood: (m: Mood) => void;\n  tone: \"warm\" | \"soothe\" | \"light\";\n  throttleLevel: 0 | 1 | 2; // 2=\n};\nconst MoodContext = createContext<MoodAPI | null>(null);\n\nexport const MoodProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [mood, setMoodState] = useState<Mood>(() => {\n    const raw = localStorage.getItem(\"mai-mood-v1\");\n    return (raw as Mood) || \"neutral\";\n  });\n\n  const setMood = (m: Mood) => {\n    setMoodState(m);\n    localStorage.setItem(\"mai-mood-v1\", m);\n    setLastMood(m);\n    track(Events.MoodPick, { mood: m });\n  };\n\n  const tone: \"warm\" | \"soothe\" | \"light\" =\n    mood === \"stress\" ? \"soothe\" : mood === \"rest\" ? \"warm\" : \"light\";\n\n  const throttleLevel: 0 | 1 | 2 =\n    mood === \"stress\" ? 2 : mood === \"rest\" ? 1 : 0;\n\n  const value = useMemo<MoodAPI>(() => ({ mood, setMood, tone, throttleLevel }), [mood]);\n  return <MoodContext.Provider value={value}>{children}</MoodContext.Provider>;\n};\nexport function useMood() {\n  const ctx = useContext(MoodContext);\n  if (!ctx) throw new Error(\"useMood must be used within MoodProvider\");\n  return ctx;\n}\n","import { useState, useEffect } from 'react'\n\nexport function CookieConsent() {\n  const [show, setShow] = useState(false)\n\n  useEffect(() => {\n    const consent = localStorage.getItem('cookie-consent')\n    if (!consent) {\n      setShow(true)\n    }\n  }, [])\n\n  const accept = () => {\n    localStorage.setItem('cookie-consent', 'true')\n    setShow(false)\n  }\n\n  if (!show) return null\n\n  return (\n    <div className=\"fixed inset-x-0 bottom-0 z-overlay bg-gray-900 p-4 text-white shadow-lg md:p-6\">\n      <div className=\"mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 md:flex-row\">\n        <div className=\"text-sm text-gray-300\">\n           Cookie \n        </div>\n        <div className=\"flex gap-3\">\n          <button\n            onClick={accept}\n            className=\"rounded-full bg-brand px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600\"\n          >\n            \n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","'use client';\nimport { createContext, Component, createElement, useContext, useState, useMemo, forwardRef } from 'react';\n\nconst ErrorBoundaryContext = createContext(null);\n\nconst initialState = {\n  didCatch: false,\n  error: null\n};\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.resetErrorBoundary = this.resetErrorBoundary.bind(this);\n    this.state = initialState;\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      didCatch: true,\n      error\n    };\n  }\n  resetErrorBoundary() {\n    const {\n      error\n    } = this.state;\n    if (error !== null) {\n      var _this$props$onReset, _this$props;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_this$props$onReset = (_this$props = this.props).onReset) === null || _this$props$onReset === void 0 ? void 0 : _this$props$onReset.call(_this$props, {\n        args,\n        reason: \"imperative-api\"\n      });\n      this.setState(initialState);\n    }\n  }\n  componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n    (_this$props$onError = (_this$props2 = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      didCatch\n    } = this.state;\n    const {\n      resetKeys\n    } = this.props;\n\n    // There's an edge case where if the thing that triggered the error happens to *also* be in the resetKeys array,\n    // we'd end up resetting the error boundary immediately.\n    // This would likely trigger a second error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call of cDU after the error is set.\n\n    if (didCatch && prevState.error !== null && hasArrayChanged(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onReset2, _this$props3;\n      (_this$props$onReset2 = (_this$props3 = this.props).onReset) === null || _this$props$onReset2 === void 0 ? void 0 : _this$props$onReset2.call(_this$props3, {\n        next: resetKeys,\n        prev: prevProps.resetKeys,\n        reason: \"keys\"\n      });\n      this.setState(initialState);\n    }\n  }\n  render() {\n    const {\n      children,\n      fallbackRender,\n      FallbackComponent,\n      fallback\n    } = this.props;\n    const {\n      didCatch,\n      error\n    } = this.state;\n    let childToRender = children;\n    if (didCatch) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n      if (typeof fallbackRender === \"function\") {\n        childToRender = fallbackRender(props);\n      } else if (FallbackComponent) {\n        childToRender = createElement(FallbackComponent, props);\n      } else if (fallback !== undefined) {\n        childToRender = fallback;\n      } else {\n        throw error;\n      }\n    }\n    return createElement(ErrorBoundaryContext.Provider, {\n      value: {\n        didCatch,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      }\n    }, childToRender);\n  }\n}\nfunction hasArrayChanged() {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]));\n}\n\nfunction assertErrorBoundaryContext(value) {\n  if (value == null || typeof value.didCatch !== \"boolean\" || typeof value.resetErrorBoundary !== \"function\") {\n    throw new Error(\"ErrorBoundaryContext not found\");\n  }\n}\n\nfunction useErrorBoundary() {\n  const context = useContext(ErrorBoundaryContext);\n  assertErrorBoundaryContext(context);\n  const [state, setState] = useState({\n    error: null,\n    hasError: false\n  });\n  const memoized = useMemo(() => ({\n    resetBoundary: () => {\n      context.resetErrorBoundary();\n      setState({\n        error: null,\n        hasError: false\n      });\n    },\n    showBoundary: error => setState({\n      error,\n      hasError: true\n    })\n  }), [context.resetErrorBoundary]);\n  if (state.hasError) {\n    throw state.error;\n  }\n  return memoized;\n}\n\nfunction withErrorBoundary(component, errorBoundaryProps) {\n  const Wrapped = forwardRef((props, ref) => createElement(ErrorBoundary, errorBoundaryProps, createElement(component, {\n    ...props,\n    ref\n  })));\n\n  // Format for display in DevTools\n  const name = component.displayName || component.name || \"Unknown\";\n  Wrapped.displayName = \"withErrorBoundary(\".concat(name, \")\");\n  return Wrapped;\n}\n\nexport { ErrorBoundary, ErrorBoundaryContext, useErrorBoundary, withErrorBoundary };\n","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport class $ZodEncodeError extends Error {\n    constructor(name) {\n        super(`Encountered unidirectional transform during encode: ${name}`);\n        this.name = \"ZodEncodeError\";\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nexport function defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function objectClone(obj) {\n    return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nexport function cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function shallowClone(o) {\n    if (isPlainObject(o))\n        return { ...o };\n    if (Array.isArray(o))\n        return [...o];\n    return o;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const checks = schema._zod.def.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\"Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function safeExtend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to safeExtend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: schema._zod.def.checks,\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nexport function partial(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nexport function aborted(x, startIndex = 0) {\n    if (x.aborted === true)\n        return true;\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// Codec utility functions\nexport function base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\nexport function uint8ArrayToBase64(bytes) {\n    let binaryString = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        binaryString += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binaryString);\n}\nexport function base64urlToUint8Array(base64url) {\n    const base64 = base64url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const padding = \"=\".repeat((4 - (base64.length % 4)) % 4);\n    return base64ToUint8Array(base64 + padding);\n}\nexport function uint8ArrayToBase64url(bytes) {\n    return uint8ArrayToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nexport function hexToUint8Array(hex) {\n    const cleanHex = hex.replace(/^0x/, \"\");\n    if (cleanHex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string length\");\n    }\n    const bytes = new Uint8Array(cleanHex.length / 2);\n    for (let i = 0; i < cleanHex.length; i += 2) {\n        bytes[i / 2] = Number.parseInt(cleanHex.slice(i, i + 2), 16);\n    }\n    return bytes;\n}\nexport function uint8ArrayToHex(bytes) {\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, util.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, mapper = (issue) => issue.message) {\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nexport function toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\nexport const _encode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parse(_Err)(schema, value, ctx);\n};\nexport const encode = /* @__PURE__*/ _encode(errors.$ZodRealError);\nexport const _decode = (_Err) => (schema, value, _ctx) => {\n    return _parse(_Err)(schema, value, _ctx);\n};\nexport const decode = /* @__PURE__*/ _decode(errors.$ZodRealError);\nexport const _encodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parseAsync(_Err)(schema, value, ctx);\n};\nexport const encodeAsync = /* @__PURE__*/ _encodeAsync(errors.$ZodRealError);\nexport const _decodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _parseAsync(_Err)(schema, value, _ctx);\n};\nexport const decodeAsync = /* @__PURE__*/ _decodeAsync(errors.$ZodRealError);\nexport const _safeEncode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParse(_Err)(schema, value, ctx);\n};\nexport const safeEncode = /* @__PURE__*/ _safeEncode(errors.$ZodRealError);\nexport const _safeDecode = (_Err) => (schema, value, _ctx) => {\n    return _safeParse(_Err)(schema, value, _ctx);\n};\nexport const safeDecode = /* @__PURE__*/ _safeDecode(errors.$ZodRealError);\nexport const _safeEncodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParseAsync(_Err)(schema, value, ctx);\n};\nexport const safeEncodeAsync = /* @__PURE__*/ _safeEncodeAsync(errors.$ZodRealError);\nexport const _safeDecodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _safeParseAsync(_Err)(schema, value, _ctx);\n};\nexport const safeDecodeAsync = /* @__PURE__*/ _safeDecodeAsync(errors.$ZodRealError);\n","export const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const idnEmail = unicodeEmail;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^-?\\d+n?$/;\nexport const integer = /^-?\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/;\nexport const boolean = /^(?:true|false)$/i;\nconst _null = /^null$/i;\nexport { _null as null };\nconst _undefined = /^undefined$/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n// regex for hexadecimal strings (any length)\nexport const hex = /^[0-9a-fA-F]*$/;\n// Hash regexes for different algorithms and encodings\n// Helper function to create base64 regex with exact length and padding\nfunction fixedBase64(bodyLength, padding) {\n    return new RegExp(`^[A-Za-z0-9+/]{${bodyLength}}${padding}$`);\n}\n// Helper function to create base64url regex with exact length (no padding)\nfunction fixedBase64url(length) {\n    return new RegExp(`^[A-Za-z0-9_-]{${length}}$`);\n}\n// MD5 (16 bytes): base64 = 24 chars total (22 + \"==\")\nexport const md5_hex = /^[0-9a-fA-F]{32}$/;\nexport const md5_base64 = /*@__PURE__*/ fixedBase64(22, \"==\");\nexport const md5_base64url = /*@__PURE__*/ fixedBase64url(22);\n// SHA1 (20 bytes): base64 = 28 chars total (27 + \"=\")\nexport const sha1_hex = /^[0-9a-fA-F]{40}$/;\nexport const sha1_base64 = /*@__PURE__*/ fixedBase64(27, \"=\");\nexport const sha1_base64url = /*@__PURE__*/ fixedBase64url(27);\n// SHA256 (32 bytes): base64 = 44 chars total (43 + \"=\")\nexport const sha256_hex = /^[0-9a-fA-F]{64}$/;\nexport const sha256_base64 = /*@__PURE__*/ fixedBase64(43, \"=\");\nexport const sha256_base64url = /*@__PURE__*/ fixedBase64url(43);\n// SHA384 (48 bytes): base64 = 64 chars total (no padding)\nexport const sha384_hex = /^[0-9a-fA-F]{96}$/;\nexport const sha384_base64 = /*@__PURE__*/ fixedBase64(64, \"\");\nexport const sha384_base64url = /*@__PURE__*/ fixedBase64url(64);\n// SHA512 (64 bytes): base64 = 88 chars total (86 + \"==\")\nexport const sha512_hex = /^[0-9a-fA-F]{128}$/;\nexport const sha512_base64 = /*@__PURE__*/ fixedBase64(86, \"==\");\nexport const sha512_base64url = /*@__PURE__*/ fixedBase64url(86);\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","export const version = {\n    major: 4,\n    minor: 1,\n    patch: 12,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { parse, parseAsync, safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        // const handleChecksResult = (\n        //   checkResult: ParsePayload,\n        //   originalResult: ParsePayload,\n        //   ctx: ParseContextInternal\n        // ): util.MaybeAsync<ParsePayload> => {\n        //   // if the checks mutated the value && there are no issues, re-parse the result\n        //   if (checkResult.value !== originalResult.value && !checkResult.issues.length)\n        //     return inst._zod.parse(checkResult, ctx);\n        //   return originalResult;\n        // };\n        const handleCanaryResult = (canary, payload, ctx) => {\n            // abort if the canary is aborted\n            if (util.aborted(canary)) {\n                canary.aborted = true;\n                return canary;\n            }\n            // run checks first, then\n            const checkResult = runChecks(payload, checks, ctx);\n            if (checkResult instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return checkResult.then((checkResult) => inst._zod.parse(checkResult, ctx));\n            }\n            return inst._zod.parse(checkResult, ctx);\n        };\n        inst._zod.run = (payload, ctx) => {\n            if (ctx.skipChecks) {\n                return inst._zod.parse(payload, ctx);\n            }\n            if (ctx.direction === \"backward\") {\n                // run canary\n                // initial pass (no checks)\n                const canary = inst._zod.parse({ value: payload.value, issues: [] }, { ...ctx, skipChecks: true });\n                if (canary instanceof Promise) {\n                    return canary.then((canary) => {\n                        return handleCanaryResult(canary, payload, ctx);\n                    });\n                }\n                return handleCanaryResult(canary, payload, ctx);\n            }\n            // forward\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const parts = payload.value.split(\"/\");\n        try {\n            if (parts.length !== 2)\n                throw new Error();\n            const [address, prefix] = parts;\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nfunction normalizeDef(def) {\n    const keys = Object.keys(def.shape);\n    for (const k of keys) {\n        if (!def.shape?.[k]?._zod?.traits?.has(\"$ZodType\")) {\n            throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n        }\n    }\n    const okeys = util.optionalKeys(def.shape);\n    return {\n        ...def,\n        keys,\n        keySet: new Set(keys),\n        numKeys: keys.length,\n        optionalKeys: new Set(okeys),\n    };\n}\nfunction handleCatchall(proms, input, payload, ctx, def, inst) {\n    const unrecognized = [];\n    // iterate over input keys\n    const keySet = def.keySet;\n    const _catchall = def.catchall._zod;\n    const t = _catchall.def.type;\n    for (const key of Object.keys(input)) {\n        if (keySet.has(key))\n            continue;\n        if (t === \"never\") {\n            unrecognized.push(key);\n            continue;\n        }\n        const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n        if (r instanceof Promise) {\n            proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n        }\n        else {\n            handlePropertyResult(r, payload, key, input);\n        }\n    }\n    if (unrecognized.length) {\n        payload.issues.push({\n            code: \"unrecognized_keys\",\n            keys: unrecognized,\n            input,\n            inst,\n        });\n    }\n    if (!proms.length)\n        return payload;\n    return Promise.all(proms).then(() => {\n        return payload;\n    });\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    // const sh = def.shape;\n    const desc = Object.getOwnPropertyDescriptor(def, \"shape\");\n    if (!desc?.get) {\n        const sh = def.shape;\n        Object.defineProperty(def, \"shape\", {\n            get: () => {\n                const newSh = { ...sh };\n                Object.defineProperty(def, \"shape\", {\n                    value: newSh,\n                });\n                return newSh;\n            },\n        });\n    }\n    const _normalized = util.cached(() => normalizeDef(def));\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const isObject = util.isObject;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = {};\n        const proms = [];\n        const shape = value.shape;\n        for (const key of value.keys) {\n            const el = shape[key];\n            const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input);\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        return handleCatchall(proms, input, payload, ctx, _normalized.value, inst);\n    };\n});\nexport const $ZodObjectJIT = /*@__PURE__*/ core.$constructor(\"$ZodObjectJIT\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodObject.init(inst, def);\n    const superParse = inst._zod.parse;\n    const _normalized = util.cached(() => normalizeDef(def));\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {};`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = util.esc(key);\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        \n      `);\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n            if (!catchall)\n                return payload;\n            return handleCatchall([], input, payload, ctx, value, inst);\n        }\n        return superParse(payload, ctx);\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !util.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        code: \"invalid_key\",\n                        origin: \"record\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? util.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        const _out = def.transform(payload.value, payload);\n        if (ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        // Forward direction (decode): allow null to pass through\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply defaults for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault returns the default value immediately in forward direction.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        // Forward direction: continue with default handling\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply prefault for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(\"ZodSuccess\");\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply catch logic\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handlePipeResult(right, def.in, ctx));\n            }\n            return handlePipeResult(right, def.in, ctx);\n        }\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def.out, ctx));\n        }\n        return handlePipeResult(left, def.out, ctx);\n    };\n});\nfunction handlePipeResult(left, next, ctx) {\n    if (left.issues.length) {\n        // prevent further checks\n        left.aborted = true;\n        return left;\n    }\n    return next._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodCodec = /*@__PURE__*/ core.$constructor(\"$ZodCodec\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const direction = ctx.direction || \"forward\";\n        if (direction === \"forward\") {\n            const left = def.in._zod.run(payload, ctx);\n            if (left instanceof Promise) {\n                return left.then((left) => handleCodecAResult(left, def, ctx));\n            }\n            return handleCodecAResult(left, def, ctx);\n        }\n        else {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handleCodecAResult(right, def, ctx));\n            }\n            return handleCodecAResult(right, def, ctx);\n        }\n    };\n});\nfunction handleCodecAResult(result, def, ctx) {\n    if (result.issues.length) {\n        // prevent further checks\n        result.aborted = true;\n        return result;\n    }\n    const direction = ctx.direction || \"forward\";\n    if (direction === \"forward\") {\n        const transformed = def.transform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.out, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.out, ctx);\n    }\n    else {\n        const transformed = def.reverseTransform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.in, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.in, ctx);\n    }\n}\nfunction handleCodecTxResult(left, value, nextSchema, ctx) {\n    // Check if transform added any issues\n    if (left.issues.length) {\n        left.aborted = true;\n        return left;\n    }\n    return nextSchema._zod.run({ value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (typeof part === \"object\" && part !== null) {\n            // is Zod schema\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodFunction = /*@__PURE__*/ core.$constructor(\"$ZodFunction\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._def = def;\n    inst._zod.def = def;\n    inst.implement = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        return function (...args) {\n            const parsedArgs = inst._def.input ? parse(inst._def.input, args) : args;\n            const result = Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return parse(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst.implementAsync = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implementAsync() must be called with a function\");\n        }\n        return async function (...args) {\n            const parsedArgs = inst._def.input ? await parseAsync(inst._def.input, args) : args;\n            const result = await Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return await parseAsync(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"function\") {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"function\",\n                input: payload.value,\n                inst,\n            });\n            return payload;\n        }\n        // Check if output is a promise type to determine if we should use async implementation\n        const hasPromiseOutput = inst._def.output && inst._def.output._zod.def.type === \"promise\";\n        if (hasPromiseOutput) {\n            payload.value = inst.implementAsync(payload.value);\n        }\n        else {\n            payload.value = inst.implement(payload.value);\n        }\n        return payload;\n    };\n    inst.input = (...args) => {\n        const F = inst.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: inst._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: inst._def.output,\n        });\n    };\n    inst.output = (output) => {\n        const F = inst.constructor;\n        return new F({\n            type: \"function\",\n            input: inst._def.input,\n            output,\n        });\n    };\n    return inst;\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin ?? undefined);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n","import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort); // abort is always undefined, so this is always true...\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nexport function _check(fn, params) {\n    const ch = new checks.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Codec = Classes.Codec ?? schemas.$ZodCodec;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const stringSchema = new _String({ type: \"string\", error: params.error });\n    const booleanSchema = new _Boolean({ type: \"boolean\", error: params.error });\n    const codec = new _Codec({\n        type: \"pipe\",\n        in: stringSchema,\n        out: booleanSchema,\n        transform: ((input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: codec,\n                    continue: false,\n                });\n                return {};\n            }\n        }),\n        reverseTransform: ((input, _payload) => {\n            if (input === true) {\n                return truthyArray[0] || \"true\";\n            }\n            else {\n                return falsyArray[0] || \"false\";\n            }\n        }),\n        error: params.error,\n    });\n    return codec;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nimport * as util from \"../core/util.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n// Codec functions\nexport const encode = /* @__PURE__ */ core._encode(ZodRealError);\nexport const decode = /* @__PURE__ */ core._decode(ZodRealError);\nexport const encodeAsync = /* @__PURE__ */ core._encodeAsync(ZodRealError);\nexport const decodeAsync = /* @__PURE__ */ core._decodeAsync(ZodRealError);\nexport const safeEncode = /* @__PURE__ */ core._safeEncode(ZodRealError);\nexport const safeDecode = /* @__PURE__ */ core._safeDecode(ZodRealError);\nexport const safeEncodeAsync = /* @__PURE__ */ core._safeEncodeAsync(ZodRealError);\nexport const safeDecodeAsync = /* @__PURE__ */ core._safeDecodeAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    inst.type = def.type;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone(util.mergeDefs(def, {\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }));\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // encoding/decoding\n    inst.encode = (data, params) => parse.encode(inst, data, params);\n    inst.decode = (data, params) => parse.decode(inst, data, params);\n    inst.encodeAsync = async (data, params) => parse.encodeAsync(inst, data, params);\n    inst.decodeAsync = async (data, params) => parse.decodeAsync(inst, data, params);\n    inst.safeEncode = (data, params) => parse.safeEncode(inst, data, params);\n    inst.safeDecode = (data, params) => parse.safeDecode(inst, data, params);\n    inst.safeEncodeAsync = async (data, params) => parse.safeEncodeAsync(inst, data, params);\n    inst.safeDecodeAsync = async (data, params) => parse.safeDecodeAsync(inst, data, params);\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport function httpUrl(params) {\n    return core._url(ZodURL, {\n        protocol: /^https?$/,\n        hostname: core.regexes.domain,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport function hostname(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hostname\", core.regexes.hostname, _params);\n}\nexport function hex(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hex\", core.regexes.hex, _params);\n}\nexport function hash(alg, params) {\n    const enc = params?.enc ?? \"hex\";\n    const format = `${alg}_${enc}`;\n    const regex = core.regexes[format];\n    if (!regex)\n        throw new Error(`Unrecognized hash format: ${format}`);\n    return core._stringFormat(ZodCustomStringFormat, format, regex, params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return _enum(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObjectJIT.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => {\n        return def.shape;\n    });\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.safeExtend = (incoming) => {\n        return util.safeExtend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        shape: shape ?? {},\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    const k = core.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (_ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodCodec = /*@__PURE__*/ core.$constructor(\"ZodCodec\", (inst, def) => {\n    ZodPipe.init(inst, def);\n    core.$ZodCodec.init(inst, def);\n});\nexport function codec(in_, out, params) {\n    return new ZodCodec({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        transform: params.decode,\n        reverseTransform: params.encode,\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodFunction = /*@__PURE__*/ core.$constructor(\"ZodFunction\", (inst, def) => {\n    core.$ZodFunction.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function _function(params) {\n    return new ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input) ? tuple(params?.input) : (params?.input ?? array(unknown())),\n        output: params?.output ?? unknown(),\n    });\n}\nexport { _function as function };\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    return core._superRefine(fn);\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Codec: ZodCodec,\n    Boolean: ZodBoolean,\n    String: ZodString,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","import { z } from 'zod';\n\nexport const GradeSchema = z.enum(['S', 'A', 'B', 'C', 'F']);\nexport type Grade = z.infer<typeof GradeSchema>;\n\nexport const LeadStatusSchema = z.enum(['new', 'purchased']);\nexport type LeadStatus = z.infer<typeof LeadStatusSchema>;\n\n// Schema for data coming directly from Supabase\nexport const SupabaseLeadSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  grade: GradeSchema,\n  intent: z.number(),\n  prop: z.string(),\n  visit: z.number(),\n  price: z.number(),\n  status: LeadStatusSchema,\n  purchased_at: z.union([z.string(), z.number(), z.null()]).optional(),\n  purchased_by: z.string().nullable().optional(),\n  transaction_hash: z.string().nullable().optional(),\n  ai: z.string(),\n  remaining_hours: z.number().nullable().optional(),\n  x: z.number().optional(),\n  y: z.number().optional(),\n  created_at: z.string().optional(),\n}).passthrough(); // Allow extra fields\n\n// Schema for the transformed Lead object used in the UI\nexport const LeadSchema = SupabaseLeadSchema.extend({\n  remainingHours: z.number().optional(),\n  // We might want to standardize to camelCase in the future, but for now keep compatibility\n});\n\nexport type Lead = z.infer<typeof LeadSchema>;\n\nexport const ListingSchema = z.object({\n  title: z.string(),\n  tags: z.array(z.string()).optional().nullable(),\n  view_count: z.number().optional(),\n  click_count: z.number().optional(),\n  fav_count: z.number().optional(),\n  thumb_color: z.string().optional(),\n  // Transformed fields\n  view: z.number().optional(),\n  click: z.number().optional(),\n  fav: z.number().optional(),\n  thumbColor: z.string().optional(),\n}).passthrough();\n\nexport type Listing = z.infer<typeof ListingSchema>;\n\nexport const FeedPostSchema = z.object({\n  title: z.string(),\n  meta: z.string(),\n  body: z.string(),\n  created_at: z.string().optional(),\n}).passthrough();\n\nexport type FeedPost = z.infer<typeof FeedPostSchema>;\n\nexport const UserDataSchema = z.object({\n  points: z.number(),\n  quota: z.object({\n    s: z.number(),\n    a: z.number(),\n  }),\n});\n\nexport type UserData = z.infer<typeof UserDataSchema>;\n\nexport const AppDataSchema = z.object({\n  user: UserDataSchema,\n  leads: z.array(LeadSchema),\n  listings: z.array(ListingSchema),\n  feed: z.array(FeedPostSchema),\n});\n\nexport type AppData = z.infer<typeof AppDataSchema>;\n","import { Grade } from './types/uag.types';\n\nexport const BREAKPOINTS = {\n  MOBILE: 768,\n  TABLET: 1024,\n};\n\nexport const UAG_GRADE_PRICE: Record<Grade, number> = {\n  S: 500,\n  A: 300,\n  B: 150,\n  C: 80,\n  F: 20,\n};\n\nexport const UAG_PROTECTION_HOURS: Record<Grade, number> = {\n  S: 72,\n  A: 48,\n  B: 24,\n  C: 12,\n  F: 0,\n};\n\n// Legacy constant support\nexport const GRADE_HOURS: Record<Grade, number> = { \n    S: 120, \n    A: 72, \n    B: 336, \n    C: 336, \n    F: 336 \n};\n","import { supabase } from '../../../lib/supabase';\nimport { \n  AppData, \n  Grade, \n  LeadSchema, \n  ListingSchema,\n  FeedPostSchema,\n  UserDataSchema\n} from '../types/uag.types';\nimport { GRADE_HOURS } from '../uag-config';\n\n// Helper function for remaining hours calculation\nconst calculateRemainingHours = (\n  purchasedAt: number | string | undefined | null,\n  grade: Grade\n): number => {\n  if (!purchasedAt) return 0;\n  \n  const totalHours = GRADE_HOURS[grade] || 336;\n  const purchasedTime = new Date(purchasedAt).getTime();\n  const elapsedHours = (Date.now() - purchasedTime) / (1000 * 60 * 60);\n  \n  return Math.max(0, Math.min(totalHours, totalHours - elapsedHours));\n};\n\nconst transformSupabaseData = (\n  userData: any,\n  leadsData: any[],\n  listingsData: any[],\n  feedData: any[]\n): AppData => {\n  // 1. Validate User Data (Critical)\n  const userRaw = {\n    points: userData.points,\n    quota: { s: userData.quota_s, a: userData.quota_a }\n  };\n  \n  const userResult = UserDataSchema.safeParse(userRaw);\n  if (!userResult.success) {\n    console.error('Critical: User Data Validation Failed', userResult.error);\n    throw new Error('Failed to load user profile');\n  }\n\n  // 2. Transform and Validate Leads (Resilient)\n  const validLeads = leadsData.map((l: any) => {\n    let remainingHours = l.remaining_hours != null ? Number(l.remaining_hours) : null;\n\n    if (remainingHours == null && l.purchased_at && l.status === 'purchased') {\n      remainingHours = calculateRemainingHours(l.purchased_at, l.grade as Grade);\n    }\n\n    return {\n      ...l,\n      grade: l.grade,\n      status: l.status,\n      ...(remainingHours != null ? { remainingHours } : {})\n    };\n  }).filter(lead => {\n    const result = LeadSchema.safeParse(lead);\n    if (!result.success) {\n      console.warn(`Skipping invalid lead (${lead.id}):`, result.error.flatten());\n      return false;\n    }\n    return true;\n  });\n\n  // 3. Transform and Validate Listings\n  const validListings = listingsData.map((l: any) => ({\n    ...l,\n    title: l.title,\n    tags: l.tags ?? [],\n    view: l.view_count ?? 0,\n    click: l.click_count ?? 0,\n    fav: l.fav_count ?? 0,\n    thumbColor: l.thumb_color ?? '#e5e7eb'\n  })).filter(listing => {\n    const result = ListingSchema.safeParse(listing);\n    if (!result.success) {\n      console.warn('Skipping invalid listing:', result.error.flatten());\n      return false;\n    }\n    return true;\n  });\n\n  // 4. Validate Feed\n  const validFeed = feedData.filter(post => {\n    const result = FeedPostSchema.safeParse(post);\n    if (!result.success) {\n      console.warn('Skipping invalid feed post:', result.error.flatten());\n      return false;\n    }\n    return true;\n  });\n\n  return {\n    user: userResult.data,\n    leads: validLeads,\n    listings: validListings,\n    feed: validFeed\n  };\n};\n\n// \nexport interface PropertyViewStats {\n  property_id: string;\n  view_count: number;\n  unique_sessions: number;\n  total_duration: number;\n  line_clicks: number;\n  call_clicks: number;\n}\n\nexport class UAGService {\n  static async fetchAppData(userId: string): Promise<AppData> {\n    const [userRes, leadsRes, listingsRes, feedRes] = await Promise.all([\n      supabase.from('users').select('points, quota_s, quota_a').single(),\n      supabase.from('leads').select('*'),\n      supabase.from('listings').select('*').eq('agent_id', userId),\n      supabase.from('feed').select('*').order('created_at', { ascending: false }).limit(5)\n    ]);\n\n    if (userRes.error) throw userRes.error;\n    if (leadsRes.error) throw leadsRes.error;\n    if (listingsRes.error) throw listingsRes.error;\n    if (feedRes.error) throw feedRes.error;\n\n    return transformSupabaseData(userRes.data, leadsRes.data, listingsRes.data, feedRes.data);\n  }\n\n  // \n  static async fetchPropertyViewStats(agentId: string): Promise<PropertyViewStats[]> {\n    try {\n      //  uag_events \n      //  property_id  properties.public_id\n      const { data, error } = await supabase\n        .rpc('get_agent_property_stats', { p_agent_id: agentId });\n\n      if (error) {\n        console.warn('PropertyViewStats RPC error, using fallback:', error);\n        // Fallback ()\n        return await UAGService.fetchPropertyViewStatsFallback(agentId);\n      }\n\n      return data || [];\n    } catch (e) {\n      console.error('fetchPropertyViewStats error:', e);\n      return [];\n    }\n  }\n\n  // Fallback  uag_events \n  private static async fetchPropertyViewStatsFallback(agentId: string): Promise<PropertyViewStats[]> {\n    //  public_id\n    const { data: properties, error: propError } = await supabase\n      .from('properties')\n      .select('public_id')\n      .eq('agent_id', agentId);\n\n    if (propError || !properties?.length) return [];\n\n    const publicIds = properties.map(p => p.public_id);\n\n    // \n    const { data: events, error: evtError } = await supabase\n      .from('uag_events')\n      .select('property_id, session_id, duration, actions')\n      .in('property_id', publicIds);\n\n    if (evtError || !events) return [];\n\n    // \n    const statsMap = new Map<string, PropertyViewStats>();\n    \n    for (const evt of events) {\n      const pid = evt.property_id;\n      if (!statsMap.has(pid)) {\n        statsMap.set(pid, {\n          property_id: pid,\n          view_count: 0,\n          unique_sessions: 0,\n          total_duration: 0,\n          line_clicks: 0,\n          call_clicks: 0\n        });\n      }\n      const stat = statsMap.get(pid)!;\n      stat.view_count++;\n      stat.total_duration += evt.duration || 0;\n      \n      const actions = evt.actions as Record<string, number> | null;\n      if (actions?.click_line) stat.line_clicks++;\n      if (actions?.click_call) stat.call_clicks++;\n    }\n\n    //  unique sessions\n    const sessionsByProperty = new Map<string, Set<string>>();\n    for (const evt of events) {\n      if (!sessionsByProperty.has(evt.property_id)) {\n        sessionsByProperty.set(evt.property_id, new Set());\n      }\n      sessionsByProperty.get(evt.property_id)!.add(evt.session_id);\n    }\n\n    for (const [pid, sessions] of sessionsByProperty) {\n      const stat = statsMap.get(pid);\n      if (stat) stat.unique_sessions = sessions.size;\n    }\n\n    return Array.from(statsMap.values());\n  }\n\n  static async purchaseLead(\n    userId: string,\n    leadId: string,\n    cost: number,\n    grade: Grade\n  ): Promise<void> {\n    const { error } = await supabase.rpc('purchase_lead', {\n      p_user_id: userId,\n      p_lead_id: leadId,\n      p_cost: cost,\n      p_grade: grade\n    });\n\n    if (error) throw error;\n  }\n}\n","import { AppData, Lead, Listing, FeedPost, Grade, LeadStatus } from './types/uag.types';\n\nexport const MOCK_DB: AppData = {\n  user: { points: 1280, quota: { s: 2, a: 3 } },\n  leads: [\n    //  S/A \n    { \n      id: 'S-5566', name: ' S-5566', grade: 'S', intent: 98, prop: '', visit: 15, price: 20, status: 'purchased', \n      purchased_at: Date.now() - 2 * 3600000, ai: 'S ', remainingHours: 118 \n    },\n    { \n      id: 'S-9011', name: ' S-9011', grade: 'S', intent: 93, prop: '', visit: 11, price: 20, status: 'purchased', \n      purchased_at: Date.now() - 6 * 3600000, ai: '', remainingHours: 114 \n    },\n    { \n      id: 'A-7788', name: ' A-7788', grade: 'A', intent: 79, prop: '', visit: 6, price: 10, status: 'purchased', \n      purchased_at: Date.now() - 20 * 3600000, ai: 'A ', remainingHours: 52 \n    },\n    { \n      id: 'A-6600', name: ' A-6600', grade: 'A', intent: 74, prop: '', visit: 5, price: 10, status: 'purchased', \n      purchased_at: Date.now() - 10 * 3600000, ai: '', remainingHours: 62 \n    },\n\n    //  (status = new)\n    { id: 'B218', name: ' B218', grade: 'S', intent: 92, prop: ' 3 ', visit: 7, price: 20, status: 'new', ai: ' ', x: 25, y: 25 },\n    { id: 'A103', name: ' A103', grade: 'S', intent: 88, prop: ' 12F', visit: 12, price: 20, status: 'new', ai: '', x: 15, y: 45 },\n    { id: 'S901', name: ' S901', grade: 'S', intent: 94, prop: '', visit: 9, price: 20, status: 'new', ai: '', x: 40, y: 32 },\n    { id: 'S880', name: ' S880', grade: 'S', intent: 90, prop: '', visit: 8, price: 20, status: 'new', ai: '', x: 60, y: 40 },\n\n    { id: 'C055', name: ' C055', grade: 'A', intent: 75, prop: '', visit: 4, price: 10, status: 'new', ai: 'A ', x: 60, y: 20 },\n    { id: 'A230', name: ' A230', grade: 'A', intent: 71, prop: ' 3 ', visit: 3, price: 10, status: 'new', ai: '', x: 70, y: 30 },\n    { id: 'A550', name: ' A550', grade: 'A', intent: 69, prop: '', visit: 3, price: 10, status: 'new', ai: '', x: 50, y: 15 },\n\n    { id: 'D330', name: ' D330', grade: 'B', intent: 62, prop: '', visit: 3, price: 3, status: 'new', ai: '', x: 40, y: 60 },\n    { id: 'B778', name: ' B778', grade: 'B', intent: 58, prop: '', visit: 2, price: 3, status: 'new', ai: '', x: 30, y: 70 },\n\n    { id: 'C021', name: ' C021', grade: 'C', intent: 48, prop: '', visit: 2, price: 1, status: 'new', ai: '', x: 75, y: 55 },\n    { id: 'C990', name: ' C990', grade: 'C', intent: 42, prop: '', visit: 1, price: 1, status: 'new', ai: '', x: 82, y: 65 },\n\n    { id: 'H009', name: ' H009', grade: 'F', intent: 28, prop: '', visit: 1, price: 0.5, status: 'new', ai: '', x: 70, y: 75 },\n    { id: 'F778', name: ' F778', grade: 'F', intent: 22, prop: '', visit: 1, price: 0.5, status: 'new', ai: '', x: 55, y: 80 }\n  ],\n  listings: [\n    { title: '12/15F ', tags: ['','',''], view: 1284, click: 214, fav: 37, thumbColor: '#eef2ff' },\n    { title: ' 3 ', tags: ['',''], view: 986, click: 163, fav: 22, thumbColor: '#f0fdf4' },\n    { title: '3', tags: ['',''], view: 846, click: 128, fav: 15, thumbColor: '#fff7ed' }\n  ],\n  feed: [\n    { title: '12F ', meta: '', body: '' },\n    { title: '', meta: ' 41', body: ' 9 ' }\n  ]\n};\n\n","import { Lead, UserData } from '../types/uag.types';\n\nexport const validateQuota = (lead: Lead, user: UserData): { valid: boolean; error?: string } => {\n  if (lead.grade === 'S' && user.quota.s <= 0) {\n    return { valid: false, error: 'S ' };\n  }\n  if (lead.grade === 'A' && user.quota.a <= 0) {\n    return { valid: false, error: 'A ' };\n  }\n  return { valid: true };\n};\n","import { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { UAGService } from '../services/uagService';\nimport { AppData, Grade, LeadStatus } from '../types/uag.types';\nimport { MOCK_DB } from '../mockData';\nimport { notify } from '../../../lib/notify';\nimport { useAuth } from '../../../hooks/useAuth';\nimport { GRADE_HOURS } from '../uag-config';\nimport { validateQuota } from '../utils/validation';\n\nexport function useUAG() {\n  const { session } = useAuth();\n  const [useMock, setUseMock] = useState(true);\n  const queryClient = useQueryClient();\n\n  // Initialize mock mode from URL or localStorage\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    const params = new URLSearchParams(window.location.search);\n    const urlMode = params.get('mode');\n    let initialMock = true;\n    \n    if (urlMode === 'mock' || urlMode === 'live') {\n      initialMock = urlMode === 'mock';\n      localStorage.setItem('uag_mode', urlMode);\n    } else {\n      const saved = localStorage.getItem('uag_mode');\n      if (saved === 'mock' || saved === 'live') {\n        initialMock = saved === 'mock';\n      }\n    }\n    setUseMock(initialMock);\n  }, []);\n\n  const toggleMode = () => {\n    if (import.meta.env.PROD) {\n      notify.error('');\n      return;\n    }\n    const newMode = !useMock;\n    setUseMock(newMode);\n    localStorage.setItem('uag_mode', newMode ? 'mock' : 'live');\n    queryClient.invalidateQueries({ queryKey: ['uagData'] });\n  };\n\n  const { data, isLoading, error, refetch } = useQuery({\n    queryKey: ['uagData', useMock, session?.user?.id],\n    queryFn: async () => {\n      if (useMock) {\n        // Simulate delay\n        // await new Promise(resolve => setTimeout(resolve, 500));\n        return MOCK_DB as unknown as AppData; \n      }\n      if (!session?.user?.id) throw new Error('Not authenticated');\n      return UAGService.fetchAppData(session.user.id);\n    },\n    enabled: useMock || !!session?.user?.id,\n    staleTime: 1000 * 10, // 10 seconds for leads\n    refetchInterval: useMock ? false : 30000, // Auto refresh every 30s for live data\n  });\n\n  const buyLeadMutation = useMutation({\n    mutationFn: async ({ leadId, cost, grade }: { leadId: string; cost: number; grade: Grade }) => {\n      if (useMock) {\n        await new Promise(resolve => setTimeout(resolve, 500));\n        return;\n      }\n      if (!session?.user?.id) throw new Error('Not authenticated');\n      await UAGService.purchaseLead(session.user.id, leadId, cost, grade);\n    },\n    onMutate: async ({ leadId, cost, grade }) => {\n      await queryClient.cancelQueries({ queryKey: ['uagData'] });\n      const previousData = queryClient.getQueryData<AppData>(['uagData', useMock, session?.user?.id]);\n\n      if (previousData) {\n        // Optimistic validation\n        const lead = previousData.leads.find(l => l.id === leadId);\n        if (lead) {\n           const { valid, error } = validateQuota(lead, previousData.user);\n           if (!valid) {\n             notify.error(error || '');\n             throw new Error(error || \" (Optimistic Check)\");\n           }\n        }\n\n        const newData = {\n          ...previousData,\n          user: {\n            ...previousData.user,\n            points: previousData.user.points - cost,\n            quota: {\n              ...previousData.user.quota,\n              s: grade === 'S' ? previousData.user.quota.s - 1 : previousData.user.quota.s,\n              a: grade === 'A' ? previousData.user.quota.a - 1 : previousData.user.quota.a\n            }\n          },\n          leads: previousData.leads.map(l =>\n            l.id === leadId\n              ? { ...l, status: 'purchased' as LeadStatus, remainingHours: GRADE_HOURS[grade] || 48 }\n              : l\n          )\n        };\n        queryClient.setQueryData(['uagData', useMock, session?.user?.id], newData);\n      }\n\n      return { previousData };\n    },\n    onError: (err, newTodo, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData(['uagData', useMock, session?.user?.id], context.previousData);\n      }\n      notify.error(`: ${err instanceof Error ? err.message : 'Unknown error'}`);\n    },\n    onSettled: () => {\n      queryClient.invalidateQueries({ queryKey: ['uagData'] });\n    },\n  });\n\n  const buyLead = async (leadId: string) => {\n    if (!data || buyLeadMutation.isPending) return;\n\n    const lead = data.leads.find(l => l.id === leadId);\n    if (!lead) {\n      notify.error('');\n      return;\n    }\n\n    if (lead.status !== 'new') {\n      notify.error('');\n      return;\n    }\n\n    const { valid, error } = validateQuota(lead, data.user);\n    if (!valid) {\n      notify.error(error || '');\n      return;\n    }\n\n    const cost = lead.price || 10;\n    if (data.user.points < cost) {\n      notify.error('');\n      return;\n    }\n\n    buyLeadMutation.mutate({ leadId, cost, grade: lead.grade }, {\n      onSuccess: () => {\n        notify.success('');\n      }\n    });\n  };\n\n  return {\n    data,\n    isLoading,\n    error,\n    buyLead, // Expose the wrapper function\n    isBuying: buyLeadMutation.isPending,\n    useMock,\n    toggleMode,\n    refetch\n  };\n}\n","import { useState, useEffect } from 'react';\n\n// Debounce helper\nfunction debounce<T extends (...args: any[]) => void>(fn: T, delay: number) {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(...args), delay);\n  };\n}\n\nexport function useWindowSize() {\n  const [size, setSize] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const handleResize = debounce(() => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, 150);\n\n    window.addEventListener('resize', handleResize);\n    // Initial size set is handled by state init, but we can call it once to be sure if needed.\n    // handleResize(); // Debounced, so it will run later. State is already init.\n\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return size;\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { Lead } from '../types/uag.types';\nimport { useWindowSize } from './useWindowSize';\nimport { BREAKPOINTS } from '../uag-config';\n\nexport function useLeadSelection() {\n  const [selectedLead, setSelectedLead] = useState<Lead | null>(null);\n  const { width } = useWindowSize();\n\n  // Handle window resize to close panel on desktop\n  useEffect(() => {\n    if (width > BREAKPOINTS.TABLET && selectedLead) {\n      setSelectedLead(null);\n    }\n  }, [width, selectedLead]);\n\n  const selectLead = useCallback((lead: Lead) => {\n    setSelectedLead(lead);\n    // Scroll to action panel on mobile\n    // Using requestAnimationFrame for better timing\n    requestAnimationFrame(() => {\n      if (window.innerWidth <= BREAKPOINTS.TABLET) {\n        document.getElementById('action-panel-container')?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    });\n  }, []);\n\n  const close = useCallback(() => setSelectedLead(null), []);\n\n  return { selectedLead, selectLead, close };\n}\n","import React from 'react';\nimport styles from '../UAG.module.css';\n\nexport const UAGHeader = () => (\n  <header className={styles['uag-header']}>\n    <div className={styles['uag-header-inner']}>\n      <div className={styles['uag-logo']}><div className={styles['uag-logo-badge']}></div><span></span></div>\n      <div className={styles['uag-breadcrumb']}><span> 21</span><span className={`${styles['uag-badge']} ${styles['uag-badge--pro']}`}> PRO</span></div>\n    </div>\n  </header>\n);\n","import React from 'react';\nimport styles from '../UAG.module.css';\nimport { UserData } from '../types/uag.types';\n\ninterface UAGFooterProps {\n  user: UserData;\n  useMock: boolean;\n  toggleMode: () => void;\n}\n\nexport const UAGFooter: React.FC<UAGFooterProps> = ({ user, useMock, toggleMode }) => (\n  <div className={styles['uag-footer-bar']}>\n    <div style={{ marginRight: 'auto', fontSize: '12px', color: 'var(--ink-300)' }}>\n      <strong style={{ color: useMock ? '#f59e0b' : '#16a34a' }}>{useMock ? \"Local Mock\" : \"Live API\"}</strong>\n      <button onClick={toggleMode} style={{ marginLeft: '10px', fontSize: '10px', cursor: 'pointer', border: '1px solid #ccc', padding: '2px 6px', borderRadius: '4px' }}></button>\n    </div>\n    <button className={styles['uag-btn']}></button>\n    <button className={`${styles['uag-btn']} ${styles['primary']}`}></button>\n    <span className={styles['uag-badge']} style={{ fontSize: '14px', background: '#fff8dc', color: '#92400e', borderColor: '#fcd34d' }}>\n       <span id=\"user-points\">{user.points}</span>\n    </span>\n  </div>\n);\n","import React from 'react';\n\nexport const UAGLoadingSkeleton = () => (\n  <div className=\"p-6 text-center\">\n    <div className=\"flex animate-pulse justify-center space-x-4\">\n      <div className=\"max-w-md flex-1 space-y-4 py-1\">\n        <div className=\"mx-auto h-4 w-3/4 rounded bg-gray-200\"></div>\n        <div className=\"space-y-2\">\n          <div className=\"h-4 rounded bg-gray-200\"></div>\n          <div className=\"mx-auto h-4 w-5/6 rounded bg-gray-200\"></div>\n        </div>\n      </div>\n    </div>\n    <div className=\"mt-4 text-gray-500\">...</div>\n  </div>\n);\n","import React from 'react';\nimport { FallbackProps } from 'react-error-boundary';\n\nexport const UAGErrorState: React.FC<FallbackProps> = ({ error, resetErrorBoundary }) => (\n  <div role=\"alert\" className=\"p-6 text-center text-red-600\">\n    <p className=\"mb-2 text-lg font-bold\"></p>\n    <pre className=\"mx-auto mb-4 max-w-lg overflow-auto rounded bg-red-50 p-4 text-sm\">{error.message}</pre>\n    <button \n      onClick={resetErrorBoundary} \n      className=\"rounded bg-red-600 px-4 py-2 text-white transition-colors hover:bg-red-700\"\n    >\n      \n    </button>\n  </div>\n);\n","import React from 'react';\nimport { Lead } from '../types/uag.types';\nimport styles from '../UAG.module.css';\n\nexport interface RadarClusterProps {\n  leads: Lead[];\n  onSelectLead: (lead: Lead) => void;\n}\n\nexport default function RadarCluster({ leads, onSelectLead }: RadarClusterProps) {\n  const liveLeads = leads.filter(l => l.status === 'new');\n\n  return (\n    <section className={`${styles['uag-card']} ${styles['k-span-6']}`} id=\"radar-section\" style={{ minHeight: '450px' }}>\n      <div className={styles['uag-card-header']}>\n        <div>\n          <div className={styles['uag-card-title']}>UAG </div>\n          <div className={styles['uag-card-sub']}>S/A B/C/F </div>\n        </div>\n        <div className={styles['uag-actions']} style={{ gap: '4px' }}>\n          {/* Quota display is handled in parent or separate component, but for now static or passed props */}\n        </div>\n      </div>\n      <div className={styles['uag-cluster']} id=\"radar-container\">\n        <div style={{ position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%,-50%)', width: '300px', height: '300px', border: '1px dashed #cbd5e1', borderRadius: '50%', pointerEvents: 'none' }}></div>\n        <div style={{ position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%,-50%)', width: '150px', height: '150px', border: '1px dashed #cbd5e1', borderRadius: '50%', pointerEvents: 'none' }}></div>\n        <div style={{ position: 'absolute', left: '16px', top: '16px', background: 'rgba(255,255,255,0.9)', padding: '6px 12px', borderRadius: '20px', fontSize: '12px', color: '#0f172a', boxShadow: '0 1px 2px rgba(0,0,0,0.05)', border: '1px solid #e2e8f0', zIndex: 5 }}>\n          <span style={{ width: '8px', height: '8px', background: '#22c55e', borderRadius: '50%', display: 'inline-block', marginRight: '4px' }}></span>\n          <span style={{ fontWeight: 700 }}>Live </span>\n        </div>\n\n        {liveLeads.map(lead => {\n          const x = lead.x != null ? lead.x : 50;\n          const y = lead.y != null ? lead.y : 50;\n          const size = lead.grade === 'S' ? 120 : lead.grade === 'A' ? 100 : lead.grade === 'B' ? 90 : lead.grade === 'C' ? 80 : 60;\n          const floatDuration = (5 + Math.random() * 3) + 's';\n\n          return (\n            <div\n              key={lead.id}\n              className={styles['uag-bubble']}\n              data-grade={lead.grade}\n              role=\"button\"\n              aria-label={`${lead.name || lead.id} - ${lead.grade}`}\n              tabIndex={0}\n              style={{\n                '--w': size + 'px',\n                '--float': floatDuration,\n                left: x + '%',\n                top: y + '%'\n              } as React.CSSProperties}\n              onClick={() => onSelectLead(lead)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  onSelectLead(lead);\n                }\n              }}\n            >\n              <div className={styles['uag-bubble-grade']} style={{ background: `var(--grade-${lead.grade.toLowerCase()})`, color: '#fff' }}>{lead.grade}</div>\n              <div style={{ textAlign: 'center', lineHeight: 1.2 }}>\n                <div style={{ fontWeight: 800, fontSize: '14px' }}>{lead.id}</div>\n                <div style={{ fontSize: '11px', color: '#64748b' }}>{lead.intent}%</div>\n              </div>\n              <div className={styles['uag-bubble-label']}>{lead.prop}</div>\n            </div>\n          );\n        })}\n      </div>\n    </section>\n  );\n}\n","import React, { forwardRef, useState, useEffect } from 'react';\nimport { Lead } from '../types/uag.types';\nimport styles from '../UAG.module.css';\n\nexport interface ActionPanelProps {\n  selectedLead: Lead | null;\n  onBuyLead: (leadId: string) => void;\n  isProcessing: boolean;\n}\n\nconst StatItem = ({ label, value, highlight = false }: { label: string; value: React.ReactNode; highlight?: boolean }) => (\n  <div className={styles['ap-stat']}>\n    <span>{label}</span>\n    <b style={highlight ? { color: 'var(--uag-brand)' } : {}}>{value}</b>\n  </div>\n);\n\nconst ActionPanel = forwardRef<HTMLDivElement, ActionPanelProps>(({ selectedLead, onBuyLead, isProcessing }, ref) => {\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  // Reset confirmation state when lead changes\n  useEffect(() => {\n    setIsConfirming(false);\n  }, [selectedLead]);\n\n  if (!selectedLead) {\n    return (\n      <section className={styles['k-span-6']} id=\"action-panel-container\" ref={ref}>\n        <div className={styles['uag-action-panel']} id=\"action-panel\">\n          <div style={{ height: '100%', minHeight: '200px', display: 'grid', placeItems: 'center', color: 'var(--ink-300)', textAlign: 'center', padding: '40px 20px' }}>\n            <div>\n              <div style={{ fontSize: '40px', marginBottom: '10px' }}></div>\n              <div><br /></div>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n  const isExclusive = (selectedLead.grade === 'S' || selectedLead.grade === 'A');\n\n  const handleBuyClick = () => {\n    setIsConfirming(true);\n  };\n\n  const handleConfirm = () => {\n    onBuyLead(selectedLead.id);\n    setIsConfirming(false);\n  };\n\n  const handleCancel = () => {\n    setIsConfirming(false);\n  };\n\n  return (\n    <section className={styles['k-span-6']} id=\"action-panel-container\" ref={ref}>\n      <div className={styles['uag-action-panel']} id=\"action-panel\">\n        <div className={styles['ap-head']}>\n          <span className={`${styles['uag-badge']} ${styles['uag-badge--' + selectedLead.grade.toLowerCase()]}`}>{selectedLead.grade}{selectedLead.name}</span>\n        </div>\n        <div className={styles['ap-body']}>\n          <div className={styles['ap-stats-group']}>\n            <StatItem label=\"\" value={selectedLead.prop} />\n            <StatItem label=\"\" value={`${selectedLead.intent}%`} highlight />\n            <StatItem label=\"\" value={`${selectedLead.visit} `} />\n            <StatItem label=\"\" value={`${selectedLead.price} `} />\n          </div>\n\n          <div className={`${styles['ai-box']} ${styles['urgent']}`}>\n            <div>{selectedLead.ai}</div>\n          </div>\n\n          <div className={styles['action-zone']}>\n            {isExclusive && (\n              <div style={{ background: '#fff7ed', color: '#ea580c', fontWeight: 700, fontSize: '12px', textAlign: 'center', padding: '6px', borderRadius: '4px', border: '1px solid #ffedd5', marginBottom: '10px' }}>\n                  \n              </div>\n            )}\n            \n            {!isConfirming ? (\n              <button\n                className={styles['btn-attack']}\n                onClick={handleBuyClick}\n                disabled={isProcessing}\n              >\n                {isProcessing ? '...' : '  (/)'}\n              </button>\n            ) : (\n              <div style={{ display: 'flex', gap: '10px' }}>\n                <button\n                  className={styles['btn-attack']}\n                  style={{ background: '#ef4444', flex: 1 }}\n                  onClick={handleConfirm}\n                  disabled={isProcessing}\n                >\n                  {isProcessing ? '...' : ` ${selectedLead.price} ?`}\n                </button>\n                <button\n                  className={styles['btn-attack']}\n                  style={{ background: '#94a3b8', flex: 1 }}\n                  onClick={handleCancel}\n                  disabled={isProcessing}\n                >\n                  \n                </button>\n              </div>\n            )}\n\n            <div style={{ textAlign: 'center', fontSize: '11px', color: '#94a3b8', marginTop: '8px' }}>\n              /<br />\n              \n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n});\n\nexport default ActionPanel;\n","import React from 'react';\nimport { Lead } from '../types/uag.types';\nimport styles from '../UAG.module.css';\nimport { GRADE_HOURS } from '../uag-config';\n\ninterface AssetMonitorProps {\n  readonly leads: Lead[];\n}\n\nconst calculateProtection = (lead: Lead) => {\n  const total = GRADE_HOURS[lead.grade] ?? 336;\n  const remaining = lead.remainingHours ?? total;\n  const percent = Math.max(0, Math.min(100, (remaining / total) * 100));\n  const isExclusive = (lead.grade === 'S' || lead.grade === 'A');\n  \n  let timeDisplay = '';\n  if (isExclusive) {\n    timeDisplay = `${remaining.toFixed(1)} `;\n  } else {\n    const days = (remaining / 24).toFixed(1);\n    timeDisplay = `${days} `;\n  }\n\n  return { total, remaining, percent, isExclusive, timeDisplay };\n};\n\nexport default function AssetMonitor({ leads }: AssetMonitorProps) {\n  const boughtLeads = leads.filter(l => l.status === 'purchased');\n\n  return (\n    <section className={`${styles['uag-card']} ${styles['k-span-6']}`}>\n      <div className={styles['uag-card-header']}>\n        <div>\n          <div className={styles['uag-card-title']}></div>\n          <div className={styles['uag-card-sub']}>S  120hr / A  72hr B/C/F  14 </div>\n        </div>\n        <div className={styles['uag-actions']}><button className={styles['uag-btn']}></button></div>\n      </div>\n      <div style={{ overflowX: 'auto' }}>\n        <table className={styles['monitor-table']}>\n          <thead>\n            <tr>\n              <th style={{ width: '25%' }}>/</th>\n              <th style={{ width: '35%' }}></th>\n              <th style={{ width: '20%' }}></th>\n              <th style={{ width: '20%' }}></th>\n            </tr>\n          </thead>\n          <tbody id=\"asset-list\">\n            {boughtLeads.length === 0 ? (\n              <tr><td colSpan={4} style={{ textAlign: 'center', padding: '20px', color: '#94a3b8' }}></td></tr>\n            ) : (\n              boughtLeads.map(lead => {\n                const { percent, isExclusive, timeDisplay } = calculateProtection(lead);\n                const colorVar = `var(--grade-${lead.grade.toLowerCase()})`;\n                const protectText = isExclusive ? '' : '';\n\n                return (\n                  <tr key={lead.id}>\n                    <td data-label=\"/\">\n                      <div style={{ display: 'flex', alignItems: 'center' }}>\n                        <span style={{ display: 'inline-grid', placeItems: 'center', width: '24px', height: '24px', borderRadius: '50%', fontSize: '11px', fontWeight: 900, color: '#fff', marginRight: '8px', background: colorVar }}>{lead.grade}</span>\n                        <div>\n                          <div style={{ fontWeight: 800, color: 'var(--ink-100)' }}>{lead.name}</div>\n                          <div style={{ fontSize: '11px', color: 'var(--ink-300)' }}>{lead.prop}</div>\n                        </div>\n                      </div>\n                    </td>\n                    <td data-label=\"\">\n                      <div style={{ fontSize: '11px', fontWeight: 700, marginBottom: '2px', display: 'flex', justifyContent: 'space-between' }}>\n                        <span style={{ color: colorVar }}>{protectText}</span>\n                        <span className={styles['t-countdown']}>{timeDisplay}</span>\n                      </div>\n                      <div className={styles['progress-bg']}><div className={styles['progress-fill']} style={{ width: `${percent}%`, background: colorVar }}></div></div>\n                    </td>\n                    <td data-label=\"\"><span className={styles['uag-badge']} style={{ background: '#f0fdf4', color: '#16a34a', border: 'none' }}></span></td>\n                    <td data-label=\"\"><button className={`${styles['uag-btn']} ${styles['primary']}`} style={{ padding: '4px 12px', fontSize: '12px' }}> / </button></td>\n                  </tr>\n                );\n              })\n            )}\n          </tbody>\n        </table>\n      </div>\n    </section>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Plus } from 'lucide-react';\nimport { Listing, FeedPost } from '../types/uag.types';\nimport styles from '../UAG.module.css';\n\ninterface ListingFeedProps {\n  listings: Listing[];\n  feed: FeedPost[];\n}\n\nexport default function ListingFeed({ listings, feed }: ListingFeedProps) {\n  return (\n    <>\n      {/* [3] Listings */}\n      <section className={`${styles['uag-card']} ${styles['k-span-3']}`}>\n        <div className={styles['uag-card-header']}>\n          <div><div className={styles['uag-card-title']}></div><div className={styles['uag-card-sub']}></div></div>\n          <div className={styles['uag-actions']}>\n            <Link to=\"/property/upload\" className={styles['uag-btn']} style={{ display: 'inline-flex', alignItems: 'center', gap: '4px', textDecoration: 'none' }}>\n              <Plus size={14} />\n              \n            </Link>\n          </div>\n        </div>\n        <div id=\"listing-container\">\n          {listings.length === 0 ? (\n            <div style={{ padding: '12px', fontSize: '13px', color: '#94a3b8' }}></div>\n          ) : (\n            listings.map((item, idx) => (\n              <article className={styles['listing-item']} key={idx}>\n                {idx === 0 ? (\n                  <Link to=\"/property/MH-100001\" style={{ display: 'contents', textDecoration: 'none', color: 'inherit' }}>\n                    <div className={styles['l-thumb']} style={{ background: item.thumbColor }}></div>\n                    <div>\n                      <div className={styles['l-title']}>{item.title}</div>\n                      <div className={styles['l-tags']}>\n                        {item.tags?.map((t, i) => <span className={styles['l-tag']} key={i}>{t}</span>)}\n                      </div>\n                      <div className={styles['l-kpi']}>\n                        <span> <b>{item.view}</b></span>\n                        <span> <b>{item.click}</b></span>\n                        <span> <b>{item.fav}</b></span>\n                      </div>\n                    </div>\n                  </Link>\n                ) : (\n                  <>\n                    <div className={styles['l-thumb']} style={{ background: item.thumbColor }}></div>\n                    <div>\n                      <div className={styles['l-title']}>{item.title}</div>\n                      <div className={styles['l-tags']}>\n                        {item.tags?.map((t, i) => <span className={styles['l-tag']} key={i}>{t}</span>)}\n                      </div>\n                      <div className={styles['l-kpi']}>\n                        <span> <b>{item.view}</b></span>\n                        <span> <b>{item.click}</b></span>\n                        <span> <b>{item.fav}</b></span>\n                      </div>\n                    </div>\n                  </>\n                )}\n              </article>\n            ))\n          )}\n        </div>\n      </section>\n\n      {/* [4] Feed */}\n      <section className={`${styles['uag-card']} ${styles['k-span-3']}`}>\n        <div className={styles['uag-card-header']}>\n          <div><div className={styles['uag-card-title']}></div><div className={styles['uag-card-sub']}></div></div>\n          <div className={styles['uag-actions']}><button className={styles['uag-btn']}></button></div>\n        </div>\n        <div id=\"feed-container\">\n          {feed.length === 0 ? (\n            <div style={{ padding: '12px', fontSize: '13px', color: '#94a3b8' }}></div>\n          ) : (\n            feed.map((post, idx) => (\n              <article className={styles['feed-post']} key={idx}>\n                <div className={styles['fp-title']}>{post.title}</div>\n                <div className={styles['fp-meta']}>{post.meta}</div>\n                <div className={styles['fp-body']}>{post.body}</div>\n              </article>\n            ))\n          )}\n        </div>\n      </section>\n    </>\n  );\n}\n","import React, { useState, useRef } from 'react';\nimport { notify } from '../../../../lib/notify';\nimport { \n  Upload, Copy, ChevronRight, ChevronLeft,\n  Home, MapPin, Ruler, Calendar, Building, Compass, DollarSign,\n  MessageCircle, CheckCircle, Sparkles, X, ExternalLink\n} from 'lucide-react';\nimport uagStyles from '../../UAG.module.css';\nimport styles from './ReportGenerator.module.css';\nimport type { Listing } from '../../types/uag.types';\n\n// \ntype ReportStyle = 'simple' | 'investment' | 'marketing';\n\n// Props \ninterface ReportGeneratorProps {\n  listings?: Listing[];\n}\n\n// \ninterface Highlight {\n  id: string;\n  icon: string;\n  title: string;\n  description: string;\n  selected: boolean;\n}\n\n// \ninterface PropertyData {\n  id: string;\n  title: string;\n  address: string;\n  district: string;\n  price: number;\n  pricePerPing: number;\n  size: number;\n  rooms: string;\n  floor: string;\n  age: number;\n  direction: string;\n  parking: string;\n  managementFee: number;\n  community: string;\n  communityYear: number;\n  communityUnits: number;\n  images: string[];\n  highlights: Highlight[];\n}\n\n// \nconst DEFAULT_PROPERTY: PropertyData = {\n  id: 'demo-001',\n  title: ' 12F322',\n  address: ' 168 ',\n  district: '',\n  price: 32880000,\n  pricePerPing: 521000,\n  size: 67.3,\n  rooms: '322',\n  floor: '12F/15F',\n  age: 5,\n  direction: '',\n  parking: '',\n  managementFee: 3500,\n  community: '',\n  communityYear: 2019,\n  communityUnits: 280,\n  images: [],\n  highlights: [\n    { id: 'commute', icon: '', title: '', description: ' 5 ', selected: true },\n    { id: 'school', icon: '', title: '', description: '', selected: true },\n    { id: 'community', icon: '', title: '', description: '', selected: true },\n    { id: 'view', icon: '', title: '', description: '', selected: false },\n    { id: 'amenity', icon: '', title: '', description: '7-11  3 ', selected: false },\n    { id: 'parking', icon: '', title: '', description: '', selected: false },\n    { id: 'renovated', icon: '', title: '', description: '', selected: false },\n  ]\n};\n\n// \nconst MY_LISTINGS: PropertyData[] = [\n  DEFAULT_PROPERTY,\n  {\n    id: 'demo-002',\n    title: '423',\n    address: ' 256 ',\n    district: '',\n    price: 88000000,\n    pricePerPing: 1120000,\n    size: 78.5,\n    rooms: '423',\n    floor: '18F/22F',\n    age: 3,\n    direction: '',\n    parking: '',\n    managementFee: 6800,\n    community: '',\n    communityYear: 2021,\n    communityUnits: 156,\n    images: [],\n    highlights: [\n      { id: 'commute', icon: '', title: '', description: ' 3 ', selected: true },\n      { id: 'view', icon: '', title: '', description: ' 101', selected: true },\n      { id: 'community', icon: '', title: '', description: '', selected: true },\n      { id: 'school', icon: '', title: '', description: '', selected: false },\n      { id: 'amenity', icon: '', title: '', description: ' 5 ', selected: false },\n      { id: 'parking', icon: '', title: '', description: '', selected: false },\n      { id: 'renovated', icon: '', title: '', description: '', selected: false },\n    ]\n  },\n  {\n    id: 'demo-003',\n    title: '211',\n    address: ' 88 ',\n    district: '',\n    price: 24500000,\n    pricePerPing: 680000,\n    size: 36.0,\n    rooms: '211',\n    floor: '5F/12F',\n    age: 15,\n    direction: '',\n    parking: '',\n    managementFee: 2200,\n    community: '',\n    communityYear: 2009,\n    communityUnits: 88,\n    images: [],\n    highlights: [\n      { id: 'amenity', icon: '', title: '', description: 'SOGO', selected: true },\n      { id: 'school', icon: '', title: '', description: '', selected: true },\n      { id: 'community', icon: '', title: '', description: '', selected: true },\n      { id: 'commute', icon: '', title: '', description: '', selected: false },\n      { id: 'view', icon: '', title: '', description: '', selected: false },\n      { id: 'renovated', icon: '', title: '', description: '', selected: false },\n      { id: 'parking', icon: '', title: '', description: '', selected: false },\n    ]\n  }\n];\n\n// \nconst REPORT_STYLES: { id: ReportStyle; icon: string; title: string; desc: string }[] = [\n  { id: 'simple', icon: '', title: '', desc: '' },\n  { id: 'investment', icon: '', title: '', desc: '' },\n  { id: 'marketing', icon: '', title: '', desc: '' },\n];\n\nexport default function ReportGenerator({ listings = [] }: ReportGeneratorProps) {\n  const [step, setStep] = useState<1 | 2 | 3 | 4 | 5>(1);\n  const [selectedProperty, setSelectedProperty] = useState<PropertyData | null>(null);\n  const [selectedStyle, setSelectedStyle] = useState<ReportStyle>('simple');\n  const [highlights, setHighlights] = useState<Highlight[]>([]);\n  const [reportUrl, setReportUrl] = useState<string>('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const formatPrice = (price: number) => {\n    if (price >= 100000000) {\n      return `${(price / 100000000).toFixed(2)} `;\n    }\n    return `${(price / 10000).toFixed(0)} `;\n  };\n\n  const calculateMonthlyPayment = (price: number, downPaymentRatio = 0.2, years = 30, rate = 0.021) => {\n    const principal = price * (1 - downPaymentRatio);\n    const monthlyRate = rate / 12;\n    const months = years * 12;\n    const payment = principal * (monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);\n    return Math.round(payment);\n  };\n\n  const handleSelectProperty = (property: PropertyData) => {\n    setSelectedProperty(property);\n    setHighlights(property.highlights);\n    setStep(2);\n  };\n\n  const handleSelectStyle = (style: ReportStyle) => {\n    setSelectedStyle(style);\n    setStep(3);\n  };\n\n  const toggleHighlight = (id: string) => {\n    const selectedCount = highlights.filter(h => h.selected).length;\n    setHighlights(prev => prev.map(h => {\n      if (h.id === id) {\n        if (!h.selected && selectedCount >= 3) {\n          notify.error(' 3 ');\n          return h;\n        }\n        return { ...h, selected: !h.selected };\n      }\n      return h;\n    }));\n  };\n\n  const confirmHighlights = () => {\n    const selectedCount = highlights.filter(h => h.selected).length;\n    if (selectedCount < 1) {\n      notify.error(' 1 ');\n      return;\n    }\n    setStep(4);\n  };\n\n  const generateReport = async () => {\n    if (!selectedProperty) return;\n    \n    setIsGenerating(true);\n    const toastId = notify.loading('...');\n    \n    try {\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      const reportId = `R-${Date.now().toString(36).toUpperCase()}`;\n      const url = `${window.location.origin}/r/${reportId}`;\n      \n      setReportUrl(url);\n      setStep(5);\n      notify.success('', undefined, { id: toastId });\n    } catch {\n      notify.error('', undefined, { id: toastId });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const copyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(reportUrl);\n      notify.success(' LINE');\n    } catch {\n      notify.error('');\n    }\n  };\n\n  const shareToLine = () => {\n    const message = encodeURIComponent(`${selectedProperty?.title}\\n\\n \\n\\n${reportUrl}`);\n    window.open(`https://line.me/R/msg/text/?${message}`, '_blank');\n  };\n\n  const reset = () => {\n    setStep(1);\n    setSelectedProperty(null);\n    setSelectedStyle('simple');\n    setHighlights([]);\n    setReportUrl('');\n  };\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    const toastId = notify.loading('AI ...');\n\n    try {\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      const detectedProperty: PropertyData = {\n        id: 'detected-001',\n        title: ' 18F',\n        address: '',\n        district: '',\n        price: 188000000,\n        pricePerPing: 1560000,\n        size: 120.5,\n        rooms: '434',\n        floor: '18F/24F',\n        age: 10,\n        direction: '',\n        parking: '',\n        managementFee: 15000,\n        community: '',\n        communityYear: 2014,\n        communityUnits: 52,\n        images: [],\n        highlights: [\n          { id: 'view', icon: '', title: '', description: '', selected: true },\n          { id: 'community', icon: '', title: '', description: '', selected: true },\n          { id: 'renovated', icon: '', title: '', description: '', selected: true },\n          { id: 'parking', icon: '', title: '', description: '', selected: false },\n          { id: 'amenity', icon: '', title: '', description: '', selected: false },\n          { id: 'commute', icon: '', title: '', description: ' 8 ', selected: false },\n          { id: 'school', icon: '', title: '', description: '', selected: false },\n        ]\n      };\n      \n      setSelectedProperty(detectedProperty);\n      setHighlights(detectedProperty.highlights);\n      setStep(2);\n      notify.success('AI ', undefined, { id: toastId });\n    } catch {\n      notify.error('', undefined, { id: toastId });\n    }\n  };\n\n  const renderStep1 = () => (\n    <div className={styles.reportStep}>\n      <div className={styles.reportStepHeader}>\n        <span className={styles.reportStepBadge}>1/4</span>\n        <h3></h3>\n      </div>\n      \n      <div className={styles.reportImportSection}>\n        <input \n          type=\"file\" \n          ref={fileInputRef} \n          style={{ display: 'none' }} \n          accept=\"image/*\" \n          onChange={handleFileChange} \n        />\n        <button className={styles.reportImportBtn} onClick={handleImportClick}>\n          <Upload size={20} />\n          <span></span>\n          <small>AI </small>\n        </button>\n      </div>\n      \n      <div className={styles.reportDivider}>\n        <span></span>\n      </div>\n      \n      <div className={styles.reportListings}>\n        {MY_LISTINGS.map(property => (\n          <button\n            key={property.id}\n            className={styles.reportListingItem}\n            onClick={() => handleSelectProperty(property)}\n          >\n            <div className={styles.reportListingThumb}>\n              <Home size={24} />\n            </div>\n            <div className={styles.reportListingInfo}>\n              <div className={styles.reportListingTitle}>{property.title}</div>\n              <div className={styles.reportListingMeta}>\n                <span><MapPin size={12} /> {property.district}</span>\n                <span><DollarSign size={12} /> {formatPrice(property.price)}</span>\n              </div>\n            </div>\n            <ChevronRight size={20} className={styles.reportListingArrow} />\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderStep2 = () => (\n    <div className={styles.reportStep}>\n      <div className={styles.reportStepHeader}>\n        <button className={styles.reportBackBtn} onClick={() => setStep(1)}>\n          <ChevronLeft size={20} />\n        </button>\n        <span className={styles.reportStepBadge}>2/4</span>\n        <h3></h3>\n      </div>\n      \n      <div className={styles.reportSelectedProperty}>\n        <Home size={18} />\n        <span>{selectedProperty?.title}</span>\n      </div>\n      \n      <div className={styles.reportStyles}>\n        {REPORT_STYLES.map(style => (\n          <button\n            key={style.id}\n            className={`${styles.reportStyleItem} ${selectedStyle === style.id ? styles.selected : ''}`}\n            onClick={() => handleSelectStyle(style.id)}\n          >\n            <span className={styles.reportStyleIcon}>{style.icon}</span>\n            <div className={styles.reportStyleInfo}>\n              <div className={styles.reportStyleTitle}>{style.title}</div>\n              <div className={styles.reportStyleDesc}>{style.desc}</div>\n            </div>\n            {selectedStyle === style.id && <CheckCircle size={20} className={styles.reportStyleCheck} />}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderStep3 = () => (\n    <div className={styles.reportStep}>\n      <div className={styles.reportStepHeader}>\n        <button className={styles.reportBackBtn} onClick={() => setStep(2)}>\n          <ChevronLeft size={20} />\n        </button>\n        <span className={styles.reportStepBadge}>3/4</span>\n        <h3> 3 </h3>\n      </div>\n      \n      <p className={styles.reportStepHint}>\n        \n      </p>\n      \n      <div className={styles.reportHighlights}>\n        {highlights.map(highlight => (\n          <button\n            key={highlight.id}\n            className={`${styles.reportHighlightItem} ${highlight.selected ? styles.selected : ''}`}\n            onClick={() => toggleHighlight(highlight.id)}\n          >\n            <span className={styles.reportHighlightIcon}>{highlight.icon}</span>\n            <div className={styles.reportHighlightInfo}>\n              <div className={styles.reportHighlightTitle}>{highlight.title}</div>\n              <div className={styles.reportHighlightDesc}>{highlight.description}</div>\n            </div>\n            <div className={styles.reportHighlightCheck}>\n              {highlight.selected ? <CheckCircle size={20} /> : <div className={styles.reportHighlightUnchecked} />}\n            </div>\n          </button>\n        ))}\n      </div>\n      \n      <div className={styles.reportStepFooter}>\n        <span> {highlights.filter(h => h.selected).length}/3</span>\n        <button className={styles.reportNextBtn} onClick={confirmHighlights}>\n           <ChevronRight size={18} />\n        </button>\n      </div>\n    </div>\n  );\n\n  const renderStep4 = () => {\n    if (!selectedProperty) return null;\n    \n    const selectedHighlights = highlights.filter(h => h.selected);\n    const monthlyPayment = calculateMonthlyPayment(selectedProperty.price);\n    \n    return (\n      <div className={styles.reportStep}>\n        <div className={styles.reportStepHeader}>\n          <button className={styles.reportBackBtn} onClick={() => setStep(3)}>\n            <ChevronLeft size={20} />\n          </button>\n          <span className={styles.reportStepBadge}>4/4</span>\n          <h3></h3>\n        </div>\n        \n        <div className={styles.reportPhoneFrame}>\n          <div className={styles.reportPhoneNotch} />\n          <div className={styles.reportPhoneContent}>\n            <div className={styles.reportPreviewHero}>\n              <div className={styles.reportPreviewHeroImg}>\n                <Home size={48} />\n              </div>\n              <div className={styles.reportPreviewHeroOverlay}>\n                <div className={styles.reportPreviewPrice}>\n                  NT$ {formatPrice(selectedProperty.price)}\n                </div>\n                <div className={styles.reportPreviewTitle}>\n                  {selectedProperty.title}\n                </div>\n              </div>\n            </div>\n            \n            <div className={styles.reportPreviewSpecs}>\n              <div><Ruler size={14} /> {selectedProperty.size} </div>\n              <div><Building size={14} /> {selectedProperty.floor}</div>\n              <div><Calendar size={14} /> {selectedProperty.age} </div>\n              <div><Compass size={14} /> {selectedProperty.direction}</div>\n            </div>\n            \n            <div className={styles.reportPreviewMortgage}>\n              <div className={styles.reportPreviewMortgageLabel}> 8 30 </div>\n              <div className={styles.reportPreviewMortgageValue}>\n                 NT$ {monthlyPayment.toLocaleString()}\n              </div>\n            </div>\n            \n            <div className={styles.reportPreviewHighlights}>\n              {selectedHighlights.map(h => (\n                <div key={h.id} className={styles.reportPreviewHighlight}>\n                  <span>{h.icon}</span>\n                  <div>\n                    <strong>{h.title}</strong>\n                    <p>{h.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            <div className={styles.reportPreviewAgent}>\n              <div className={styles.reportPreviewAgentAvatar}></div>\n              <div className={styles.reportPreviewAgentInfo}>\n                <strong></strong>\n                <span>MaiHouses </span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <button \n          className={styles.reportGenerateBtn}\n          onClick={generateReport}\n          disabled={isGenerating}\n        >\n          {isGenerating ? (\n            <> ...</>\n          ) : (\n            <><Sparkles size={18} /> </>\n          )}\n        </button>\n      </div>\n    );\n  };\n\n  const renderStep5 = () => (\n    <div className={styles.reportStep}>\n      <div className={styles.reportStepHeader}>\n        <span className={styles.reportStepBadge}></span>\n        <h3></h3>\n      </div>\n      \n      <div className={styles.reportSuccess}>\n        <div className={styles.reportSuccessIcon}></div>\n        <p></p>\n      </div>\n      \n      <div className={styles.reportUrlBox}>\n        <input \n          type=\"text\" \n          value={reportUrl} \n          readOnly \n          className={styles.reportUrlInput}\n        />\n        <button className={styles.reportUrlCopy} onClick={copyLink}>\n          <Copy size={18} />\n        </button>\n      </div>\n      \n      <div className={styles.reportShareButtons}>\n        <button className={styles.reportShareBtnPrimary} onClick={copyLink}>\n          <Copy size={18} />\n          \n        </button>\n        <button className={styles.reportShareBtnLine} onClick={shareToLine}>\n          <MessageCircle size={18} />\n          LINE \n        </button>\n      </div>\n      \n      <button \n        className={styles.reportPreviewLink}\n        onClick={() => window.open(reportUrl, '_blank')}\n      >\n        <ExternalLink size={16} />\n        \n      </button>\n      \n      <button className={styles.reportResetBtn} onClick={reset}>\n        \n      </button>\n    </div>\n  );\n\n  return (\n    <section className={`${uagStyles['uag-card']} ${uagStyles['k-span-3']}`}>\n      <div className={uagStyles['uag-card-header']}>\n        <div>\n          <div className={uagStyles['uag-card-title']}> </div>\n          <div className={uagStyles['uag-card-sub']}> Word </div>\n        </div>\n        {step > 1 && step < 5 && (\n          <button \n            className={`${uagStyles['uag-btn']} ${uagStyles['secondary']}`}\n            onClick={reset}\n          >\n            <X size={14} /> \n          </button>\n        )}\n      </div>\n      \n      <div className={styles.reportContainer}>\n        {step === 1 && renderStep1()}\n        {step === 2 && renderStep2()}\n        {step === 3 && renderStep3()}\n        {step === 4 && renderStep4()}\n        {step === 5 && renderStep5()}\n      </div>\n    </section>\n  );\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Phone, Eye, DollarSign, FileText, Home, ChevronRight, RefreshCw, Plus, Check, AlertCircle, Zap } from 'lucide-react';\nimport styles from '../UAG.module.css';\n\n// ==================== Types ====================\ninterface TrustCase {\n  id: string;\n  buyerId: string;\n  buyerName: string;\n  propertyTitle: string;\n  currentStep: number;\n  status: 'active' | 'completed' | 'pending' | 'expired';\n  lastUpdate: number;\n  offerPrice?: number;\n  events: TrustEvent[];\n}\n\ninterface TrustEvent {\n  id: string;\n  step: number;\n  stepName: string;\n  action: string;\n  actor: 'agent' | 'buyer' | 'system';\n  timestamp: number;\n  hash?: string;\n  detail?: string;\n}\n\n// ==================== Mock Data ====================\nconst MOCK_CASES: TrustCase[] = [\n  {\n    id: 'TR-2024-001',\n    buyerId: 'A103',\n    buyerName: ' A103',\n    propertyTitle: ' 12F',\n    currentStep: 3,\n    status: 'active',\n    lastUpdate: Date.now() - 30 * 60000,\n    offerPrice: 31500000,\n    events: [\n      { id: 'e1', step: 1, stepName: 'M1 ', action: '', actor: 'agent', timestamp: Date.now() - 2 * 86400000, hash: '9f2a...c8d1' },\n      { id: 'e2', step: 2, stepName: 'M2 ', action: '', actor: 'buyer', timestamp: Date.now() - 1 * 86400000, hash: 'b7aa...f3e2', detail: 'GeoTag: ' },\n      { id: 'e3', step: 3, stepName: 'M3 ', action: '', actor: 'buyer', timestamp: Date.now() - 30 * 60000, hash: '1a7c...92b4', detail: ' NT$31,500,000' },\n    ]\n  },\n  {\n    id: 'TR-2024-002',\n    buyerId: 'B218',\n    buyerName: ' B218',\n    propertyTitle: ' 3',\n    currentStep: 2,\n    status: 'active',\n    lastUpdate: Date.now() - 2 * 3600000,\n    events: [\n      { id: 'e4', step: 1, stepName: 'M1 ', action: '', actor: 'agent', timestamp: Date.now() - 3 * 86400000, hash: '3c5d...a7b9' },\n      { id: 'e5', step: 2, stepName: 'M2 ', action: '', actor: 'buyer', timestamp: Date.now() - 2 * 3600000, hash: 'd8e2...1f4c', detail: ' 11/30 14:00' },\n    ]\n  },\n  {\n    id: 'TR-2024-003',\n    buyerId: 'S901',\n    buyerName: ' S901',\n    propertyTitle: '',\n    currentStep: 4,\n    status: 'active',\n    lastUpdate: Date.now() - 12 * 3600000,\n    offerPrice: 28800000,\n    events: [\n      { id: 'e6', step: 1, stepName: 'M1 ', action: '', actor: 'agent', timestamp: Date.now() - 7 * 86400000, hash: 'f1a2...b3c4' },\n      { id: 'e7', step: 2, stepName: 'M2 ', action: '', actor: 'buyer', timestamp: Date.now() - 5 * 86400000, hash: 'e5d6...c7f8' },\n      { id: 'e8', step: 3, stepName: 'M3 ', action: '', actor: 'buyer', timestamp: Date.now() - 3 * 86400000, hash: 'a9b0...d1e2' },\n      { id: 'e9', step: 4, stepName: 'M4 ', action: '', actor: 'agent', timestamp: Date.now() - 12 * 3600000, hash: 'c3d4...e5f6', detail: '' },\n    ]\n  }\n];\n\n// ==================== Helpers ====================\nconst STEPS = [\n  { key: 1, name: 'M1 ', icon: Phone },\n  { key: 2, name: 'M2 ', icon: Eye },\n  { key: 3, name: 'M3 ', icon: DollarSign },\n  { key: 4, name: 'M4 ', icon: FileText },\n  { key: 5, name: 'M5 ', icon: Home },\n];\n\nfunction formatTime(ts: number): string {\n  const d = new Date(ts);\n  return `${d.getMonth() + 1}/${d.getDate()} ${d.getHours().toString().padStart(2, '0')}:${d.getMinutes().toString().padStart(2, '0')}`;\n}\n\nfunction formatRelativeTime(ts: number): string {\n  const diff = Date.now() - ts;\n  if (diff < 60000) return '';\n  if (diff < 3600000) return `${Math.floor(diff / 60000)} `;\n  if (diff < 86400000) return `${Math.floor(diff / 3600000)} `;\n  return `${Math.floor(diff / 86400000)} `;\n}\n\nfunction getStatusBadge(status: TrustCase['status']) {\n  switch (status) {\n    case 'active': return { text: '', bg: '#dcfce7', color: '#16a34a' };\n    case 'completed': return { text: '', bg: '#dbeafe', color: '#2563eb' };\n    case 'pending': return { text: '', bg: '#fef3c7', color: '#d97706' };\n    case 'expired': return { text: '', bg: '#fee2e2', color: '#dc2626' };\n  }\n}\n\n// ==================== Component ====================\nexport default function TrustFlow() {\n  const [useMock, setUseMock] = useState(true);\n  const [cases, setCases] = useState<TrustCase[]>([]);\n  const [selectedCaseId, setSelectedCaseId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [expandedEvents, setExpandedEvents] = useState(false);\n\n  // Load data\n  const loadCases = useCallback(async () => {\n    setLoading(true);\n    try {\n      if (useMock) {\n        // Mock mode: use local data\n        await new Promise(r => setTimeout(r, 300)); // Simulate network\n        setCases(MOCK_CASES);\n        const firstCase = MOCK_CASES[0];\n        if (!selectedCaseId && firstCase) {\n          setSelectedCaseId(firstCase.id);\n        }\n      } else {\n        // Real mode: fetch from API\n        const res = await fetch('/api/trust/cases');\n        if (res.ok) {\n          const data = await res.json();\n          const loadedCases = data.cases || [];\n          setCases(loadedCases);\n          if (loadedCases.length > 0 && !selectedCaseId) {\n            setSelectedCaseId(loadedCases[0].id);\n          }\n        }\n      }\n    } catch (e) {\n      console.error('Failed to load cases:', e);\n    } finally {\n      setLoading(false);\n    }\n  }, [useMock, selectedCaseId]);\n\n  useEffect(() => {\n    loadCases();\n  }, [loadCases]);\n\n  const selectedCase = cases.find(c => c.id === selectedCaseId);\n  const recentEvents = selectedCase?.events.slice(-3).reverse() || [];\n\n  return (\n    <section className={`${styles['uag-card']} ${styles['k-span-3']}`}>\n      {/* Header */}\n      <div className={styles['uag-card-header']}>\n        <div>\n          <div className={styles['uag-card-title']}></div>\n          <div className={styles['uag-card-sub']}>\n            \n            {useMock && <span style={{ marginLeft: 8, color: '#f59e0b', fontSize: 11 }}> Mock</span>}\n          </div>\n        </div>\n        <div className={styles['uag-actions']}>\n          <button\n            className={styles['uag-btn']}\n            onClick={() => setUseMock(!useMock)}\n            title={useMock ? '' : ''}\n          >\n            <Zap size={14} style={{ marginRight: 4 }} />\n            {useMock ? 'Mock' : 'Live'}\n          </button>\n          <button className={styles['uag-btn']} onClick={loadCases} disabled={loading}>\n            <RefreshCw size={14} className={loading ? 'animate-spin' : ''} />\n          </button>\n        </div>\n      </div>\n\n      {/* Case Selector */}\n      {cases.length > 0 && (\n        <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap', marginBottom: 4 }}>\n          {cases.map(c => {\n            const isActive = c.id === selectedCaseId;\n            const statusBadge = getStatusBadge(c.status);\n            return (\n              <button\n                key={c.id}\n                onClick={() => setSelectedCaseId(c.id)}\n                style={{\n                  padding: '8px 12px',\n                  borderRadius: 8,\n                  border: isActive ? '2px solid #1749d7' : '1px solid #e2e8f0',\n                  background: isActive ? '#eef2ff' : '#fff',\n                  cursor: 'pointer',\n                  textAlign: 'left',\n                  minWidth: 140,\n                  transition: 'all 0.2s',\n                }}\n              >\n                <div style={{ fontSize: 12, fontWeight: 700, color: isActive ? '#1749d7' : '#334155', marginBottom: 2 }}>\n                  {c.buyerName}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginBottom: 4, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: 120 }}>\n                  {c.propertyTitle}\n                </div>\n                <div style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\n                  <span style={{\n                    fontSize: 10,\n                    padding: '2px 6px',\n                    borderRadius: 4,\n                    background: statusBadge.bg,\n                    color: statusBadge.color,\n                    fontWeight: 600,\n                  }}>\n                    M{c.currentStep}\n                  </span>\n                  <span style={{ fontSize: 10, color: '#94a3b8' }}>\n                    {formatRelativeTime(c.lastUpdate)}\n                  </span>\n                </div>\n              </button>\n            );\n          })}\n          <button\n            style={{\n              padding: '8px 12px',\n              borderRadius: 8,\n              border: '1px dashed #cbd5e1',\n              background: '#f8fafc',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              minWidth: 60,\n              color: '#64748b',\n            }}\n            onClick={() => {/* TODO: New case modal */}}\n          >\n            <Plus size={16} />\n          </button>\n        </div>\n      )}\n\n      {/* Progress Steps */}\n      {selectedCase && (\n        <div style={{ display: 'flex', alignItems: 'center', gap: 0, marginBottom: 8 }}>\n          {STEPS.map((step, idx) => {\n            const isPast = step.key < selectedCase.currentStep;\n            const isCurrent = step.key === selectedCase.currentStep;\n            const Icon = step.icon;\n            \n            return (\n              <React.Fragment key={step.key}>\n                <div style={{ flex: 1, textAlign: 'center' }}>\n                  <div\n                    style={{\n                      width: 32,\n                      height: 32,\n                      borderRadius: '50%',\n                      margin: '0 auto 4px',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      background: isPast ? '#16a34a' : isCurrent ? '#1749d7' : '#e5e7eb',\n                      color: isPast || isCurrent ? '#fff' : '#6b7280',\n                      transition: 'all 0.3s',\n                    }}\n                  >\n                    {isPast ? <Check size={16} /> : <Icon size={14} />}\n                  </div>\n                  <div style={{\n                    fontSize: 11,\n                    fontWeight: isCurrent ? 700 : 500,\n                    color: isPast ? '#16a34a' : isCurrent ? '#1749d7' : '#94a3b8',\n                  }}>\n                    {step.name}\n                  </div>\n                </div>\n                {idx < STEPS.length - 1 && (\n                  <div style={{\n                    flex: 0.5,\n                    height: 2,\n                    background: isPast ? '#16a34a' : '#e5e7eb',\n                    marginBottom: 20,\n                  }} />\n                )}\n              </React.Fragment>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Event Timeline */}\n      {selectedCase && (\n        <div style={{ background: '#f8fafc', borderRadius: 8, overflow: 'hidden' }}>\n          {/* Header */}\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: '80px 1fr 80px',\n            padding: '8px 12px',\n            fontSize: 11,\n            fontWeight: 600,\n            color: '#64748b',\n            background: '#f1f5f9',\n            borderBottom: '1px solid #e2e8f0',\n          }}>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n\n          {/* Events */}\n          {recentEvents.map((event, idx) => {\n            const isCurrent = idx === 0;\n            return (\n              <div\n                key={event.id}\n                style={{\n                  display: 'grid',\n                  gridTemplateColumns: '80px 1fr 80px',\n                  padding: '10px 12px',\n                  borderBottom: idx < recentEvents.length - 1 ? '1px solid #e2e8f0' : 'none',\n                  background: isCurrent ? '#fefce8' : 'transparent',\n                  alignItems: 'start',\n                }}\n              >\n                <div style={{ fontSize: 11, color: '#64748b' }}>\n                  {formatTime(event.timestamp)}\n                </div>\n                <div>\n                  <div style={{ fontSize: 12, color: '#0f172a' }}>\n                    <b>{event.stepName} {event.action}</b>\n                    <span style={{ color: '#64748b' }}>{event.actor === 'agent' ? '' : event.actor === 'buyer' ? '' : ''}</span>\n                  </div>\n                  {event.detail && (\n                    <div style={{ fontSize: 11, color: '#64748b', marginTop: 2 }}>\n                      {event.detail}\n                    </div>\n                  )}\n                </div>\n                <div>\n                  {event.hash && (\n                    <span style={{\n                      fontSize: 10,\n                      padding: '3px 8px',\n                      borderRadius: 4,\n                      background: isCurrent ? '#fef3c7' : '#f1f5f9',\n                      color: isCurrent ? '#92400e' : '#64748b',\n                      border: isCurrent ? '1px solid #fcd34d' : '1px solid #e2e8f0',\n                      fontFamily: 'monospace',\n                    }}>\n                      {event.hash}\n                    </span>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n\n          {/* Show more */}\n          {selectedCase.events.length > 3 && (\n            <button\n              onClick={() => setExpandedEvents(!expandedEvents)}\n              style={{\n                width: '100%',\n                padding: '8px',\n                fontSize: 11,\n                color: '#1749d7',\n                background: 'transparent',\n                border: 'none',\n                cursor: 'pointer',\n                fontWeight: 600,\n              }}\n            >\n              {expandedEvents ? '' : ` ${selectedCase.events.length} `}\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!selectedCase && !loading && (\n        <div style={{ textAlign: 'center', padding: '32px 16px', color: '#64748b' }}>\n          <AlertCircle size={32} style={{ margin: '0 auto 8px', opacity: 0.5 }} />\n          <div style={{ fontSize: 13, marginBottom: 8 }}></div>\n          <button className={`${styles['uag-btn']} ${styles['primary']}`}>\n            <Plus size={14} style={{ marginRight: 4 }} />\n            \n          </button>\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <div style={{ textAlign: 'center', padding: '24px', color: '#64748b' }}>\n          <RefreshCw size={20} className=\"animate-spin\" style={{ margin: '0 auto 8px' }} />\n          <div style={{ fontSize: 12 }}>...</div>\n        </div>\n      )}\n\n      {/* Action Footer */}\n      {selectedCase && (\n        <div style={{ display: 'flex', gap: 8, paddingTop: 8, borderTop: '1px solid #e2e8f0' }}>\n          <Link\n            to={`/assure?case=${selectedCase.id}`}\n            className={`${styles['uag-btn']} ${styles['primary']}`}\n            style={{ flex: 1, textAlign: 'center', textDecoration: 'none', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 6 }}\n          >\n             Trust Room\n            <ChevronRight size={14} />\n          </Link>\n          {selectedCase.currentStep === 3 && selectedCase.offerPrice && (\n            <button className={styles['uag-btn']} style={{ background: '#fef3c7', borderColor: '#fcd34d', color: '#92400e' }}>\n              <DollarSign size={14} style={{ marginRight: 4 }} />\n              \n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Summary Stats */}\n      {cases.length > 0 && (\n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: 'repeat(3, 1fr)',\n          gap: 8,\n          padding: '12px 0 0',\n          borderTop: '1px solid #e2e8f0',\n        }}>\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: 20, fontWeight: 700, color: '#1749d7' }}>{cases.length}</div>\n            <div style={{ fontSize: 11, color: '#64748b' }}></div>\n          </div>\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: 20, fontWeight: 700, color: '#16a34a' }}>\n              {cases.filter(c => c.currentStep >= 3).length}\n            </div>\n            <div style={{ fontSize: 11, color: '#64748b' }}></div>\n          </div>\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: 20, fontWeight: 700, color: '#f59e0b' }}>\n              {cases.filter(c => c.status === 'pending').length || 0}\n            </div>\n            <div style={{ fontSize: 11, color: '#64748b' }}></div>\n          </div>\n        </div>\n      )}\n    </section>\n  );\n}\n","import React, { useRef } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { QueryErrorResetBoundary } from '@tanstack/react-query';\n\nimport styles from './UAG.module.css';\nimport { useUAG } from './hooks/useUAG';\nimport { useLeadSelection } from './hooks/useLeadSelection';\n\nimport { UAGHeader } from './components/UAGHeader';\nimport { UAGFooter } from './components/UAGFooter';\nimport { UAGLoadingSkeleton } from './components/UAGLoadingSkeleton';\nimport { UAGErrorState } from './components/UAGErrorState';\n\nimport RadarCluster from './components/RadarCluster';\nimport ActionPanel from './components/ActionPanel';\nimport AssetMonitor from './components/AssetMonitor';\nimport ListingFeed from './components/ListingFeed';\nimport ReportGenerator from './components/ReportGenerator';\nimport TrustFlow from './components/TrustFlow';\n\nfunction UAGPageContent() {\n  const { data: appData, isLoading, buyLead, isBuying, useMock, toggleMode } = useUAG();\n  const { selectedLead, selectLead, close } = useLeadSelection();\n  const actionPanelRef = useRef<HTMLDivElement>(null);\n\n  const onBuyLead = async (leadId: string) => {\n    if (!appData || isBuying) return;\n\n    // Validation logic is now handled inside useUAG's buyLead\n    // Confirmation is handled in ActionPanel UI\n    buyLead(leadId);\n    close();\n  };\n\n  if (isLoading) return <UAGLoadingSkeleton />;\n  if (!appData) return null;\n\n  return (\n    <div className={styles['uag-page']}>\n      <UAGHeader />\n\n      <main className={styles['uag-container']}>\n        <div className={styles['uag-grid']}>\n          {/* [1] UAG Radar */}\n          <RadarCluster leads={appData.leads} onSelectLead={selectLead} />\n\n          {/* [Action Panel] */}\n          <ActionPanel \n            ref={actionPanelRef}\n            selectedLead={selectedLead} \n            onBuyLead={onBuyLead} \n            isProcessing={isBuying} \n          />\n\n          {/* [2] Asset Monitor */}\n          <AssetMonitor leads={appData.leads} />\n\n          {/* [3] Listings & [4] Feed */}\n          <ListingFeed listings={appData.listings} feed={appData.feed} />\n\n          {/* [5]  */}\n          <ReportGenerator listings={appData.listings} />\n\n          {/* [6] Trust Flow */}\n          <TrustFlow />\n        </div>\n      </main>\n\n      <UAGFooter user={appData.user} useMock={useMock} toggleMode={toggleMode} />\n    </div>\n  );\n}\n\nexport default function UAGPage() {\n  return (\n    <QueryErrorResetBoundary>\n      {({ reset }) => (\n        <ErrorBoundary\n          onReset={reset}\n          FallbackComponent={UAGErrorState}\n        >\n          <UAGPageContent />\n        </ErrorBoundary>\n      )}\n    </QueryErrorResetBoundary>\n  );\n}\n\n","import React, { useState, useMemo } from 'react';\nimport { Shield, ThumbsUp, Star, MessageCircle, Phone, Clock, CheckCircle, Calendar, X, FileText } from 'lucide-react';\nimport { Agent } from '../lib/types';\n\ninterface AgentTrustCardProps {\n  agent: Agent;\n  onLineClick?: () => void;\n  onCallClick?: () => void;\n  onBookingClick?: () => void;  // \n}\n\n// \nconst getTrustBreakdown = (score: number) => {\n  const base = Math.floor(score * 0.4);\n  const response = Math.floor(score * 0.3);\n  const deals = Math.floor(score * 0.3);\n  return [\n    { label: '', value: base, icon: CheckCircle },\n    { label: '', value: response, icon: Clock },\n    { label: '', value: deals, icon: FileText },\n  ];\n};\n\n//  Modal\nconst BookingModal: React.FC<{ isOpen: boolean; onClose: () => void; agentName: string }> = ({ isOpen, onClose, agentName }) => {\n  const [selectedSlot, setSelectedSlot] = useState<string | null>(null);\n  const [phone, setPhone] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n\n  //  7 \n  const timeSlots = useMemo(() => {\n    const slots: { date: string; day: string; times: string[] }[] = [];\n    const days: string[] = ['', '', '', '', '', '', ''];\n    \n    for (let i = 1; i <= 7; i++) {\n      const date = new Date();\n      date.setDate(date.getDate() + i);\n      const dayStr = `${date.getMonth() + 1}/${date.getDate()}`;\n      const dayName = days[date.getDay()] ?? '';\n      \n      // \n      const times = date.getDay() === 0 || date.getDay() === 6\n        ? ['10:00', '11:00', '14:00', '15:00', '16:00']\n        : ['14:00', '15:00', '19:00'];\n      \n      slots.push({ date: dayStr, day: dayName, times });\n    }\n    return slots;\n  }, []);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = () => {\n    if (!selectedSlot || !phone) return;\n    // TODO: \n    setSubmitted(true);\n    setTimeout(() => {\n      onClose();\n      setSubmitted(false);\n      setSelectedSlot(null);\n      setPhone('');\n    }, 2000);\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-modal flex items-end justify-center bg-black/50 p-4 backdrop-blur-sm sm:items-center\">\n      <div className=\"max-h-[80vh] w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-2xl\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-4 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-bold\"></h3>\n              <p className=\"text-sm opacity-80\">{agentName} </p>\n            </div>\n            <button onClick={onClose} className=\"rounded-full p-1 transition-colors hover:bg-white/20\">\n              <X size={20} />\n            </button>\n          </div>\n        </div>\n\n        {submitted ? (\n          <div className=\"p-8 text-center\">\n            <div className=\"mx-auto mb-4 flex size-16 items-center justify-center rounded-full bg-green-100\">\n              <CheckCircle className=\"text-green-500\" size={32} />\n            </div>\n            <h4 className=\"mb-2 text-xl font-bold text-slate-800\"></h4>\n            <p className=\"text-slate-500\"></p>\n          </div>\n        ) : (\n          <div className=\"max-h-[60vh] overflow-y-auto p-4\">\n            {/* Time Slots */}\n            <div className=\"mb-4 space-y-3\">\n              {timeSlots.slice(0, 4).map((slot) => (\n                <div key={slot.date}>\n                  <div className=\"mb-2 text-xs font-medium text-slate-500\">\n                    {slot.date} ({slot.day})\n                  </div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {slot.times.map((time) => {\n                      const slotId = `${slot.date}-${time}`;\n                      const isSelected = selectedSlot === slotId;\n                      return (\n                        <button\n                          key={slotId}\n                          onClick={() => setSelectedSlot(slotId)}\n                          className={`rounded-lg px-3 py-1.5 text-sm font-medium transition-all ${\n                            isSelected\n                              ? 'bg-[#003366] text-white'\n                              : 'bg-slate-100 text-slate-600 hover:bg-slate-200'\n                          }`}\n                        >\n                          {time}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Phone Input */}\n            <div className=\"mt-4\">\n              <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n              <input\n                type=\"tel\"\n                value={phone}\n                onChange={(e) => setPhone(e.target.value)}\n                placeholder=\"0912-345-678\"\n                className=\"w-full rounded-xl border border-slate-200 p-3 outline-none focus:border-transparent focus:ring-2 focus:ring-[#003366]\"\n              />\n            </div>\n\n            {/* Submit Button */}\n            <button\n              onClick={handleSubmit}\n              disabled={!selectedSlot || !phone}\n              className={`mt-4 flex w-full items-center justify-center gap-2 rounded-xl py-3 font-bold transition-all ${\n                selectedSlot && phone\n                  ? 'bg-[#003366] text-white hover:bg-[#004488]'\n                  : 'cursor-not-allowed bg-slate-100 text-slate-400'\n              }`}\n            >\n              <Calendar size={18} />\n              \n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport const AgentTrustCard: React.FC<AgentTrustCardProps> = ({ agent, onLineClick, onCallClick, onBookingClick }) => {\n  const [showTrustTooltip, setShowTrustTooltip] = useState(false);\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  \n  //  ()\n  const isOnline = useMemo(() => Math.random() > 0.3, []); // 70% \n  const trustBreakdown = getTrustBreakdown(agent.trustScore);\n  \n  // \n  const agentMetrics = useMemo(() => ({\n    responseTime: isOnline ? '5 ' : '2 ',\n    closureRate: Math.min(95, 60 + (agent.trustScore % 30)),\n    totalDeals: agent.encouragementCount * 2 + 10,\n    experience: Math.floor(agent.trustScore / 25) + 1\n  }), [agent.trustScore, agent.encouragementCount, isOnline]);\n\n  return (\n    <>\n      <div className=\"rounded-xl border border-slate-100 bg-white p-4 shadow-sm\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"relative\">\n            <img \n              src={agent.avatarUrl} \n              alt={agent.name} \n              className=\"size-16 rounded-full border-2 border-white object-cover shadow-md\"\n            />\n            {/*  */}\n            <div className={`absolute -bottom-1 -right-1 ${isOnline ? 'bg-green-500' : 'bg-slate-400'} flex items-center gap-0.5 rounded-full border border-white px-1.5 py-0.5 text-[10px] text-white`}>\n              <div className={`size-1.5 rounded-full ${isOnline ? 'animate-pulse bg-white' : 'bg-slate-300'}`} />\n              <span>{isOnline ? '' : ''}</span>\n            </div>\n          </div>\n          \n          <div className=\"min-w-0 flex-1\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <h3 className=\"flex items-center gap-2 text-lg font-bold text-slate-800\">\n                  {agent.name}\n                  <span className=\"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-normal text-slate-500\">\n                    {agent.company}\n                  </span>\n                </h3>\n                <div className=\"mt-0.5 flex items-center gap-2\">\n                  <p className=\"text-xs text-slate-400\">#{agent.internalCode}</p>\n                  <div className=\"flex items-center gap-0.5 rounded bg-green-50 px-1.5 py-0.5 text-[10px] text-green-600\">\n                    <Shield size={10} />\n                    <span></span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-3 flex items-center gap-4\">\n              {/*  -  Tooltip */}\n              <div \n                className=\"relative flex cursor-pointer items-center gap-1.5\"\n                onMouseEnter={() => setShowTrustTooltip(true)}\n                onMouseLeave={() => setShowTrustTooltip(false)}\n              >\n                <div className=\"flex size-8 items-center justify-center rounded-lg bg-blue-50 text-[#003366]\">\n                  <Star size={16} fill=\"currentColor\" />\n                </div>\n                <div>\n                  <div className=\"text-sm font-bold text-[#003366]\">{agent.trustScore}</div>\n                  <div className=\"text-[10px] text-slate-500\"></div>\n                </div>\n\n                {/* Trust Score Tooltip */}\n                {showTrustTooltip && (\n                  <div className=\"absolute bottom-full left-0 z-10 mb-2 w-48 rounded-lg bg-slate-800 p-3 text-xs text-white shadow-xl\">\n                    <div className=\"mb-2 font-bold\"></div>\n                    {trustBreakdown.map((item) => (\n                      <div key={item.label} className=\"flex items-center justify-between py-1\">\n                        <div className=\"flex items-center gap-1.5\">\n                          <item.icon size={12} className=\"text-green-400\" />\n                          <span>{item.label}</span>\n                        </div>\n                        <span className=\"font-medium\">+{item.value}</span>\n                      </div>\n                    ))}\n                    <div className=\"mt-2 flex justify-between border-t border-slate-600 pt-2 font-bold\">\n                      <span></span>\n                      <span className=\"text-green-400\">{agent.trustScore}</span>\n                    </div>\n                    {/* Tooltip Arrow */}\n                    <div className=\"absolute left-4 top-full border-8 border-transparent border-t-slate-800\" />\n                  </div>\n                )}\n              </div>\n\n              <div className=\"h-8 w-px bg-slate-100\"></div>\n\n              <div className=\"flex items-center gap-1.5\">\n                <div className=\"flex size-8 items-center justify-center rounded-lg bg-orange-50 text-orange-500\">\n                  <ThumbsUp size={16} />\n                </div>\n                <div>\n                  <div className=\"text-sm font-bold text-slate-800\">{agent.encouragementCount}</div>\n                  <div className=\"text-[10px] text-slate-500\"></div>\n                </div>\n              </div>\n            </div>\n\n            {/*  */}\n            {isOnline && (\n              <div className=\"mt-3 inline-flex items-center gap-1 rounded-lg bg-green-50 px-2 py-1 text-xs text-green-600\">\n                <Clock size={12} />\n                 {agentMetrics.responseTime} \n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/*  */}\n        <div className=\"mt-4 grid grid-cols-3 gap-2 border-y border-slate-100 py-3\">\n          <div className=\"text-center\">\n            <div className=\"text-lg font-bold text-[#003366]\">{agentMetrics.closureRate}%</div>\n            <div className=\"text-[10px] text-slate-500\"></div>\n          </div>\n          <div className=\"border-x border-slate-100 text-center\">\n            <div className=\"text-lg font-bold text-slate-800\">{agentMetrics.totalDeals}</div>\n            <div className=\"text-[10px] text-slate-500\"></div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-lg font-bold text-slate-800\">{agentMetrics.experience}</div>\n            <div className=\"text-[10px] text-slate-500\"></div>\n          </div>\n        </div>\n        \n        {/* CTA  -  */}\n        <div className=\"mt-4 space-y-2 border-t border-slate-50 pt-3\">\n          {/*  CTA LINE */}\n          <button \n            onClick={onLineClick}\n            className=\"flex w-full items-center justify-center gap-2 rounded-lg bg-[#06C755] py-2.5 text-sm font-bold text-white shadow-sm transition-colors hover:bg-[#05B04A]\"\n          >\n            <MessageCircle size={18} />\n             LINE \n          </button>\n          \n          {/*  CTA */}\n          <div className=\"flex gap-2\">\n            <button \n              onClick={() => onBookingClick ? onBookingClick() : setShowBookingModal(true)}\n              className=\"flex flex-1 items-center justify-center gap-1.5 rounded-lg bg-[#003366] py-2 text-sm font-medium text-white transition-colors hover:bg-[#004488]\"\n            >\n              <Calendar size={16} />\n              \n            </button>\n            <button \n              onClick={onCallClick}\n              className=\"flex flex-1 items-center justify-center gap-1.5 rounded-lg border border-[#003366] bg-white py-2 text-sm font-medium text-[#003366] transition-colors hover:bg-blue-50\"\n            >\n              <Phone size={16} />\n              \n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/*  Modal */}\n      <BookingModal \n        isOpen={showBookingModal} \n        onClose={() => setShowBookingModal(false)} \n        agentName={agent.name}\n      />\n    </>\n  );\n};\n","/**\n * \n *  CommunityPicker  propertyService\n */\n\n/**\n * \n * \n */\nexport const computeAddressFingerprint = (addr: string): string => {\n  let clean = addr;\n  // 1.  (3-5)\n  clean = clean.replace(/^\\d{3,5}/, '');\n  // 2. F\n  clean = clean.replace(/(\\d+[fF].*)$/, '');\n  // 3. X-X\n  clean = clean.replace(/[\\-]\\d+/g, '');\n  // 4. \n  clean = clean.replace(//g, '');\n  // 5. \n  clean = clean.replace(/\\s+/g, '');\n  return clean;\n};\n\n/**\n * vs \n * \n */\nexport const normalizeCommunityName = (name: string): string => {\n  return name\n    .trim()\n    .replace(/\\s+/g, '')           // \n    .replace(/[]/g, '')          // \n    .replace(/[]/g, s => s === '' ? '(' : ')')  // \n    .replace(/[]/g, '')    // \n    .replace(/[]/g, '')         // \n    .toLowerCase();                 // \n};\n\n","import { supabase } from '../lib/supabase';\nimport { Agent, Imported591Data } from '../lib/types';\nimport { computeAddressFingerprint, normalizeCommunityName } from '../utils/address';\n\n// \nexport interface PropertyData {\n  id: string;\n  publicId: string;\n  title: string;\n  price: number;\n  address: string;\n  description: string;\n  images: string[];\n  agent: Agent;\n  sourcePlatform?: 'MH' | '591';\n  // \n  advantage1?: string;\n  advantage2?: string;\n  disadvantage?: string;\n}\n\n// \nexport interface PropertyFormInput {\n  title: string;\n  price: string;\n  address: string;\n  communityName: string;  // \n  size: string;\n  age: string;\n  floorCurrent: string;\n  floorTotal: string;\n  rooms: string;\n  halls: string;\n  bathrooms: string;\n  type: string;\n  description: string;\n  advantage1: string;\n  advantage2: string;\n  disadvantage: string;\n  sourceExternalId: string;\n}\n\n//  (Fallback Data) - \nexport const DEFAULT_PROPERTY: PropertyData = {\n  id: 'b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a22',\n  publicId: 'MH-100001',\n  title: '101',\n  price: 3680,\n  address: '',\n  description: '101',\n  images: ['https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'],\n  agent: {\n    id: 'a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11',\n    internalCode: 1,\n    name: '',\n    avatarUrl: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',\n    company: '',\n    trustScore: 92,\n    encouragementCount: 156,\n  }\n};\n\nexport const propertyService = {\n  // 1. \n  getPropertyByPublicId: async (publicId: string): Promise<PropertyData | null> => {\n    try {\n      //  Supabase \n      const { data, error } = await supabase\n        .from('properties')\n        .select(`\n          *,\n          agent:agents (*)\n        `)\n        .eq('public_id', publicId)\n        .single();\n\n      if (error || !data) {\n        console.warn('', error);\n        //  ID\n        if (publicId === 'MH-100001' || import.meta.env.DEV) {\n          return DEFAULT_PROPERTY;\n        }\n        return null;\n      }\n\n      // \n      const result = {\n        id: data.id,\n        publicId: data.public_id,\n        title: data.title,\n        price: Number(data.price),\n        address: data.address,\n        description: data.description,\n        images: data.images || [],\n        sourcePlatform: data.source_platform,\n        agent: {\n          id: data.agent.id,\n          internalCode: data.agent.internal_code,\n          name: data.agent.name,\n          avatarUrl: data.agent.avatar_url || 'https://via.placeholder.com/150',\n          company: data.agent.company,\n          trustScore: data.agent.trust_score,\n          encouragementCount: data.agent.encouragement_count\n        }\n      };\n\n      return result;\n    } catch (e) {\n      console.error('Service Error:', e);\n      return DEFAULT_PROPERTY;\n    }\n  },\n\n  // 2.  ( - )\n  createProperty: async (data: Imported591Data, agentId: string) => {\n    //  public_id Trigger  (MH-100002, MH-100003...)\n    const { data: result, error } = await supabase\n      .from('properties')\n      .insert({\n        // public_id:  DB \n        title: data.title,\n        price: data.price,\n        address: data.address,\n        description: data.description,\n        images: data.images,\n        source_platform: data.sourcePlatform,\n        source_external_id: data.sourceExternalId,\n        agent_id: agentId\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n    return result;\n  },\n\n  // 3.  (UUID  +  + )\n  uploadImages: async (files: File[], options?: { \n    concurrency?: number;\n    onProgress?: (completed: number, total: number) => void;\n  }): Promise<{ \n    urls: string[]; \n    failed: { file: File; error: string }[];\n    allSuccess: boolean;\n  }> => {\n    const concurrency = options?.concurrency || 3; //  3\n    const results: string[] = [];\n    const failed: { file: File; error: string }[] = [];\n    let completed = 0;\n    \n    // \n    for (let i = 0; i < files.length; i += concurrency) {\n      const batch = files.slice(i, i + concurrency);\n      \n      const batchPromises = batch.map(async (file) => {\n        try {\n          const fileExt = file.name.split('.').pop()?.toLowerCase() || 'jpg';\n          const fileName = `${crypto.randomUUID()}.${fileExt}`;\n          \n          const { error } = await supabase.storage\n            .from('property-images')\n            .upload(fileName, file, {\n              contentType: file.type,\n              cacheControl: '31536000', // 1 \n            });\n\n          if (error) {\n            console.error('Image upload error:', error);\n            failed.push({ file, error: error.message });\n            return null;\n          }\n\n          const { data } = supabase.storage\n            .from('property-images')\n            .getPublicUrl(fileName);\n          \n          return data.publicUrl;\n        } catch (e: any) {\n          console.error('Image upload exception:', e);\n          failed.push({ file, error: e.message || '' });\n          return null;\n        } finally {\n          completed++;\n          options?.onProgress?.(completed, files.length);\n        }\n      });\n\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults.filter((url): url is string => !!url));\n    }\n\n    return {\n      urls: results,\n      failed,\n      allSuccess: failed.length === 0,\n    };\n  },\n\n  //  URL \n  uploadImagesLegacy: async (files: File[]): Promise<string[]> => {\n    const result = await propertyService.uploadImages(files);\n    return result.urls;\n  },\n\n  // 4.  ( -  + )\n  //     ()\n  createPropertyWithForm: async (form: PropertyFormInput, images: string[], existingCommunityId?: string) => {\n    // \n    const { data: { user } } = await supabase.auth.getUser();\n    \n    //  agent_id ()\n    const agentId = user?.id || 'a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11';\n\n    //  \n    let communityId: string | null = existingCommunityId || null;\n    let finalCommunityName = form.communityName?.trim() || null;\n    let isNewCommunity = false;\n    \n    // \n    if (finalCommunityName === '') {\n      communityId = null;\n      finalCommunityName = '';\n      console.log(' /');\n    }\n    // \n    else if (existingCommunityId) {\n      console.log('  ID:', existingCommunityId);\n    }\n    // \n    else if (form.address && finalCommunityName) {\n      // \n      const addressFingerprint = computeAddressFingerprint(form.address);\n      \n      // Step 1: \n      if (addressFingerprint.length >= 5) {\n        const { data: existingByAddress } = await supabase\n          .from('communities')\n          .select('id, name')\n          .eq('address_fingerprint', addressFingerprint)\n          .single();\n\n        if (existingByAddress) {\n          communityId = existingByAddress.id;\n          console.log(' :', existingByAddress.name);\n        }\n      }\n      \n      // Step 2: \n      if (!communityId && finalCommunityName.length >= 2) {\n        const normalizedInput = normalizeCommunityName(finalCommunityName);\n        \n        // \n        const district = form.address.match(/([^]+[])/)?.[1] || '';\n        const { data: candidates } = await supabase\n          .from('communities')\n          .select('id, name')\n          .eq('district', district)\n          .limit(50);\n\n        if (candidates && candidates.length > 0) {\n          // \n          const matched = candidates.find(c => \n            normalizeCommunityName(c.name) === normalizedInput\n          );\n          if (matched) {\n            communityId = matched.id;\n            finalCommunityName = matched.name; // \n            console.log(' :', matched.name);\n          }\n        }\n\n        // \n        if (!communityId) {\n          const { data: exactMatch } = await supabase\n            .from('communities')\n            .select('id, name')\n            .eq('name', finalCommunityName)\n            .single();\n\n          if (exactMatch) {\n            communityId = exactMatch.id;\n            console.log(' :', exactMatch.name);\n          }\n        }\n      }\n      \n      // Step 3: \n      if (!communityId) {\n        const district = form.address.match(/([^]+[])/)?.[1] || '';\n        const city = form.address.match(/^(.*?[])/)?.[1] || '';\n        \n        //   AI \n        const { data: newCommunity, error: communityError } = await supabase\n          .from('communities')\n          .insert({\n            name: finalCommunityName,\n            address: form.address,\n            address_fingerprint: addressFingerprint,\n            district: district,\n            city: city,\n            is_verified: false,\n            completeness_score: 20,  // AI \n            features: [form.type].filter(Boolean),\n          })\n          .select('id')\n          .single();\n\n        if (!communityError && newCommunity) {\n          communityId = newCommunity.id;\n          isNewCommunity = true;\n          console.log(' :', finalCommunityName);\n        } else {\n          console.error(' :', communityError);\n        }\n      }\n    }\n\n    // \n    const addressFingerprint = form.address ? computeAddressFingerprint(form.address) : null;\n\n    const { data, error } = await supabase\n      .from('properties')\n      .insert({\n        agent_id: agentId,\n        title: form.title,\n        price: Number(form.price),\n        address: form.address,\n        address_fingerprint: addressFingerprint,  // \n        community_name: finalCommunityName,\n        community_id: communityId,\n        size: Number(form.size || 0),\n        age: Number(form.age || 0),\n        \n        rooms: Number(form.rooms),\n        halls: Number(form.halls),\n        bathrooms: Number(form.bathrooms),\n        floor_current: form.floorCurrent,\n        floor_total: Number(form.floorTotal || 0),\n        property_type: form.type,\n        \n        //  ()\n        advantage_1: form.advantage1,\n        advantage_2: form.advantage2,\n        disadvantage: form.disadvantage,\n        \n        description: form.description,\n        images: images,\n        features: [form.type, form.advantage1, form.advantage2].filter(Boolean),\n        \n        source_platform: form.sourceExternalId ? '591' : 'MH',\n        source_external_id: form.sourceExternalId || null\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n    \n    //   community_reviews\n    if (communityId && (form.advantage1 || form.advantage2 || form.disadvantage)) {\n      await supabase.from('community_reviews').insert({\n        community_id: communityId,\n        property_id: data.id,\n        source: 'agent',\n        advantage_1: form.advantage1 || null,\n        advantage_2: form.advantage2 || null,\n        disadvantage: form.disadvantage || null,\n      });\n      \n      //  Fire-and-forget AI \n      //  two_good / one_fair \n      fetch('/api/generate-community-profile', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ communityId })\n      }).catch(err => console.warn('AI :', err));\n    }\n    \n    // \n    return {\n      ...data,\n      is_new_community: isNewCommunity\n    };\n  },\n\n  // 5.  ()\n  checkCommunityExists: async (name: string): Promise<{ exists: boolean; community?: { id: string; name: string } }> => {\n    if (!name || name.trim().length < 2) return { exists: false };\n    \n    const { data } = await supabase\n      .from('communities')\n      .select('id, name')\n      .ilike('name', `%${name.trim()}%`)\n      .limit(1)\n      .single();\n\n    return data ? { exists: true, community: data } : { exists: false };\n  }\n};\n","/**\n * Lead Service - \n * \n */\n\nimport { supabase } from '../lib/supabase';\n\n// Lead \nexport type LeadStatus = \n  | 'new'           // \n  | 'contacted'     // \n  | 'qualified'     // \n  | 'scheduled'     // \n  | 'visited'       // \n  | 'negotiating'   // \n  | 'closed_won'    // \n  | 'closed_lost';  // \n\n// Lead \nexport type LeadEventType = \n  | 'INITIAL_CONTACT'     // \n  | 'CALL_SUMMARY'        // \n  | 'LINE_MESSAGE'        // LINE \n  | 'VISIT_SCHEDULED'     // \n  | 'VISIT_COMPLETE'      // \n  | 'VISIT_CANCELLED'     // \n  | 'OFFER_SUBMITTED'     // \n  | 'OFFER_ACCEPTED'      // \n  | 'OFFER_REJECTED'      // \n  | 'CONTRACT_SIGNED'     // \n  | 'STATUS_CHANGE'       // \n  | 'NOTE_ADDED';         // \n\n// Lead \nexport interface Lead {\n  id: string;\n  customer_name: string;\n  customer_phone: string;\n  customer_email?: string;\n  customer_line_id?: string;\n  agent_id: string;\n  property_id: string;\n  source: 'sidebar' | 'mobile_bar' | 'booking' | 'direct';\n  status: LeadStatus;\n  budget_range?: string;\n  preferred_contact_time?: string;\n  needs_description?: string;\n  response_time_seconds?: number;\n  first_response_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\n// Lead \nexport interface LeadEvent {\n  id: string;\n  lead_id: string;\n  event_type: LeadEventType;\n  event_data: Record<string, unknown>;\n  notes?: string;\n  created_by?: string;\n  created_at: string;\n}\n\n//  Lead \nexport interface CreateLeadParams {\n  customerName: string;\n  customerPhone: string;\n  customerEmail?: string;\n  customerLineId?: string;\n  agentId: string;\n  propertyId: string;\n  source: 'sidebar' | 'mobile_bar' | 'booking' | 'direct';\n  budgetRange?: string;\n  preferredContactTime?: string;\n  needsDescription?: string;\n}\n\n//  Lead \nexport interface CreateLeadResponse {\n  success: boolean;\n  leadId?: string;\n  error?: string;\n}\n\n/**\n * \n */\nexport async function createLead(params: CreateLeadParams): Promise<CreateLeadResponse> {\n  try {\n    //  RPC  lead\n    const { data, error } = await supabase.rpc('create_lead', {\n      p_customer_name: params.customerName,\n      p_customer_phone: params.customerPhone,\n      p_customer_email: params.customerEmail || null,\n      p_customer_line_id: params.customerLineId || null,\n      p_agent_id: params.agentId,\n      p_property_id: params.propertyId,\n      p_source: params.source,\n      p_budget_range: params.budgetRange || null,\n      p_preferred_contact_time: params.preferredContactTime || null,\n      p_needs_description: params.needsDescription || null\n    });\n\n    if (error) {\n      console.error('[LeadService] Create lead error:', error);\n      return { success: false, error: error.message };\n    }\n\n    return { success: true, leadId: data };\n  } catch (err) {\n    const errorMessage = err instanceof Error ? err.message : '';\n    console.error('[LeadService] Create lead exception:', err);\n    return { success: false, error: errorMessage };\n  }\n}\n\n/**\n * \n */\nexport async function getLeadsForAgent(agentId: string): Promise<Lead[]> {\n  try {\n    const { data, error } = await supabase\n      .from('leads')\n      .select('*')\n      .eq('agent_id', agentId)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('[LeadService] Get leads error:', error);\n      return [];\n    }\n\n    return data || [];\n  } catch (err) {\n    console.error('[LeadService] Get leads exception:', err);\n    return [];\n  }\n}\n\n/**\n * \n */\nexport async function getLeadsForProperty(propertyId: string): Promise<Lead[]> {\n  try {\n    const { data, error } = await supabase\n      .from('leads')\n      .select('*')\n      .eq('property_id', propertyId)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('[LeadService] Get property leads error:', error);\n      return [];\n    }\n\n    return data || [];\n  } catch (err) {\n    console.error('[LeadService] Get property leads exception:', err);\n    return [];\n  }\n}\n\n/**\n *  Lead \n */\nexport async function updateLeadStatus(\n  leadId: string, \n  newStatus: LeadStatus,\n  notes?: string\n): Promise<boolean> {\n  try {\n    // \n    const { error: updateError } = await supabase\n      .from('leads')\n      .update({ \n        status: newStatus,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', leadId);\n\n    if (updateError) {\n      console.error('[LeadService] Update status error:', updateError);\n      return false;\n    }\n\n    // \n    await addLeadEvent(leadId, 'STATUS_CHANGE', { \n      new_status: newStatus \n    }, notes);\n\n    return true;\n  } catch (err) {\n    console.error('[LeadService] Update status exception:', err);\n    return false;\n  }\n}\n\n/**\n * \n */\nexport async function recordFirstResponse(leadId: string): Promise<boolean> {\n  try {\n    const now = new Date().toISOString();\n    \n    const { error } = await supabase\n      .from('leads')\n      .update({ \n        first_response_at: now,\n        updated_at: now\n      })\n      .eq('id', leadId)\n      .is('first_response_at', null); // \n\n    if (error) {\n      console.error('[LeadService] Record response error:', error);\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    console.error('[LeadService] Record response exception:', err);\n    return false;\n  }\n}\n\n/**\n *  Lead \n */\nexport async function addLeadEvent(\n  leadId: string,\n  eventType: LeadEventType,\n  eventData: Record<string, unknown> = {},\n  notes?: string\n): Promise<boolean> {\n  try {\n    // \n    const { data: { user } } = await supabase.auth.getUser();\n\n    const { error } = await supabase\n      .from('lead_events')\n      .insert({\n        lead_id: leadId,\n        event_type: eventType,\n        event_data: eventData,\n        notes: notes || null,\n        created_by: user?.id || null\n      });\n\n    if (error) {\n      console.error('[LeadService] Add event error:', error);\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    console.error('[LeadService] Add event exception:', err);\n    return false;\n  }\n}\n\n/**\n *  Lead \n */\nexport async function getLeadEvents(leadId: string): Promise<LeadEvent[]> {\n  try {\n    const { data, error } = await supabase\n      .from('lead_events')\n      .select('*')\n      .eq('lead_id', leadId)\n      .order('created_at', { ascending: true });\n\n    if (error) {\n      console.error('[LeadService] Get events error:', error);\n      return [];\n    }\n\n    return data || [];\n  } catch (err) {\n    console.error('[LeadService] Get events exception:', err);\n    return [];\n  }\n}\n\n/**\n * \n */\nexport async function getAgentLeadStats(agentId: string): Promise<{\n  total: number;\n  new: number;\n  contacted: number;\n  scheduled: number;\n  closedWon: number;\n  avgResponseTime: number | null;\n}> {\n  try {\n    const { data, error } = await supabase\n      .from('leads')\n      .select('status, response_time_seconds')\n      .eq('agent_id', agentId);\n\n    if (error) {\n      console.error('[LeadService] Get stats error:', error);\n      return { total: 0, new: 0, contacted: 0, scheduled: 0, closedWon: 0, avgResponseTime: null };\n    }\n\n    const leads = data || [];\n    const responseTimes = leads\n      .map(l => l.response_time_seconds)\n      .filter((t): t is number => t !== null && t !== undefined);\n\n    return {\n      total: leads.length,\n      new: leads.filter(l => l.status === 'new').length,\n      contacted: leads.filter(l => l.status === 'contacted').length,\n      scheduled: leads.filter(l => l.status === 'scheduled').length,\n      closedWon: leads.filter(l => l.status === 'closed_won').length,\n      avgResponseTime: responseTimes.length > 0 \n        ? Math.round(responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length)\n        : null\n    };\n  } catch (err) {\n    console.error('[LeadService] Get stats exception:', err);\n    return { total: 0, new: 0, contacted: 0, scheduled: 0, closedWon: 0, avgResponseTime: null };\n  }\n}\n\n/**\n * \n */\nexport async function recordCallSummary(\n  leadId: string,\n  duration: number,\n  summary: string,\n  outcome: 'interested' | 'follow_up' | 'not_interested'\n): Promise<boolean> {\n  return addLeadEvent(leadId, 'CALL_SUMMARY', {\n    duration_seconds: duration,\n    summary,\n    outcome\n  });\n}\n\n/**\n * \n */\nexport async function scheduleVisit(\n  leadId: string,\n  visitDate: string,\n  visitTime: string,\n  notes?: string\n): Promise<boolean> {\n  // \n  const statusUpdated = await updateLeadStatus(leadId, 'scheduled');\n  if (!statusUpdated) return false;\n\n  // \n  return addLeadEvent(leadId, 'VISIT_SCHEDULED', {\n    visit_date: visitDate,\n    visit_time: visitTime\n  }, notes);\n}\n\n/**\n * \n */\nexport async function completeVisit(\n  leadId: string,\n  feedback: 'very_interested' | 'interested' | 'neutral' | 'not_interested',\n  notes?: string\n): Promise<boolean> {\n  // \n  const statusUpdated = await updateLeadStatus(leadId, 'visited');\n  if (!statusUpdated) return false;\n\n  // \n  return addLeadEvent(leadId, 'VISIT_COMPLETE', {\n    customer_feedback: feedback\n  }, notes);\n}\n\nexport const leadService = {\n  createLead,\n  getLeadsForAgent,\n  getLeadsForProperty,\n  updateLeadStatus,\n  recordFirstResponse,\n  addLeadEvent,\n  getLeadEvents,\n  getAgentLeadStats,\n  recordCallSummary,\n  scheduleVisit,\n  completeVisit\n};\n","import React, { useState } from 'react';\nimport { X, Phone, MessageCircle, Mail, Calendar, Clock, CheckCircle, Loader2 } from 'lucide-react';\nimport { notify } from '../lib/notify';\nimport { createLead } from '../services/leadService';\n\n// \nexport type ContactChannel = 'phone' | 'line' | 'message';\n\n// \nexport interface ContactFormData {\n  name: string;\n  phone: string;\n  preferredChannel: ContactChannel;\n  preferredTime: string;\n  budget: string;\n  needs: string;\n}\n\n// Modal Props\ninterface ContactModalProps {\n  readonly isOpen: boolean;\n  readonly onClose: () => void;\n  readonly propertyId: string;\n  readonly propertyTitle: string;\n  readonly agentId: string;\n  readonly agentName: string;\n  readonly source: 'sidebar' | 'mobile_bar' | 'booking';\n}\n\nexport const ContactModal: React.FC<ContactModalProps> = ({\n  isOpen,\n  onClose,\n  propertyId,\n  propertyTitle,\n  agentId,\n  agentName,\n  source\n}) => {\n  const [step, setStep] = useState<'form' | 'submitting' | 'success'>('form');\n  const [form, setForm] = useState<ContactFormData>({\n    name: '',\n    phone: '',\n    preferredChannel: 'line',\n    preferredTime: '',\n    budget: '',\n    needs: ''\n  });\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // \n    if (!form.name.trim() || !form.phone.trim()) {\n      notify.error('');\n      return;\n    }\n\n    setStep('submitting');\n\n    try {\n      //  Lead -  leadService\n      const result = await createLead({\n        customerName: form.name,\n        customerPhone: form.phone,\n        agentId,\n        propertyId,\n        source,\n        ...(form.budget ? { budgetRange: form.budget } : {}),\n        ...(form.preferredTime ? { preferredContactTime: form.preferredTime } : {}),\n        ...(form.needs ? { needsDescription: form.needs } : {})\n      });\n\n      if (result.success) {\n        setStep('success');\n        // 3 \n        setTimeout(() => {\n          onClose();\n          setStep('form');\n          setForm({\n            name: '',\n            phone: '',\n            preferredChannel: 'line',\n            preferredTime: '',\n            budget: '',\n            needs: ''\n          });\n        }, 3000);\n      } else {\n        notify.error('', result.error || '');\n        setStep('form');\n      }\n    } catch {\n      notify.error('');\n      setStep('form');\n    }\n  };\n\n  const channelOptions: Array<{ value: ContactChannel; label: string; icon: React.ReactNode }> = [\n    { value: 'line', label: 'LINE', icon: <MessageCircle size={18} className=\"text-[#00c300]\" /> },\n    { value: 'phone', label: '', icon: <Phone size={18} className=\"text-blue-600\" /> },\n    { value: 'message', label: '', icon: <Mail size={18} className=\"text-slate-600\" /> }\n  ];\n\n  const timeOptions = [\n    ' 09:00-12:00',\n    ' 14:00-18:00',\n    ' 19:00-21:00',\n    ' 10:00-12:00',\n    ' 14:00-18:00',\n    ''\n  ];\n\n  const budgetOptions = [\n    '1000',\n    '1000-2000',\n    '2000-3000',\n    '3000-5000',\n    '5000',\n    ''\n  ];\n\n  return (\n    <div className=\"fixed inset-0 z-modal flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm\">\n      <div className=\"max-h-[90vh] w-full max-w-lg overflow-hidden rounded-2xl bg-white shadow-2xl\">\n        \n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-5 text-white\">\n          <div className=\"flex items-start justify-between\">\n            <div>\n              <h3 className=\"text-xl font-bold\"></h3>\n              <p className=\"mt-1 text-sm opacity-90\">\n                {agentName}  <span className=\"font-bold\">10 </span> \n              </p>\n            </div>\n            <button \n              onClick={onClose} \n              className=\"rounded-full p-1.5 transition-colors hover:bg-white/20\"\n            >\n              <X size={22} />\n            </button>\n          </div>\n          \n          {/*  */}\n          <div className=\"mt-3 rounded-lg bg-white/10 px-3 py-2 text-sm\">\n            <span className=\"opacity-80\"></span>\n            <span className=\"ml-1 font-medium\">{propertyTitle}</span>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"max-h-[60vh] overflow-y-auto p-5\">\n          \n          {step === 'success' ? (\n            /*  */\n            <div className=\"py-8 text-center\">\n              <div className=\"mx-auto mb-4 flex size-16 items-center justify-center rounded-full bg-green-100\">\n                <CheckCircle className=\"text-green-600\" size={32} />\n              </div>\n              <h4 className=\"mb-2 text-xl font-bold text-slate-800\"></h4>\n              <p className=\"mb-4 text-slate-600\">\n                {agentName}  <span className=\"font-bold text-[#003366]\">10 </span> \n              </p>\n              <div className=\"rounded-xl bg-blue-50 p-4 text-left text-sm\">\n                <p className=\"mb-2 font-medium text-[#003366]\"> </p>\n                <ul className=\"space-y-1 text-slate-600\">\n                  <li> </li>\n                  <li> </li>\n                  <li> </li>\n                </ul>\n              </div>\n            </div>\n          ) : step === 'submitting' ? (\n            /*  */\n            <div className=\"py-12 text-center\">\n              <Loader2 className=\"mx-auto mb-4 animate-spin text-[#003366]\" size={40} />\n              <p className=\"text-slate-600\">...</p>\n            </div>\n          ) : (\n            /*  */\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\n              \n              {/*   - SLA  */}\n              <div className=\"rounded-xl border border-amber-200 bg-amber-50 p-3\">\n                <p className=\"mb-2 flex items-center gap-1.5 text-sm font-bold text-amber-900\">\n                  <Clock size={14} />\n                  \n                </p>\n                <ul className=\"space-y-1 text-xs text-amber-800\">\n                  <li className=\"flex items-center gap-1.5\">\n                    <CheckCircle size={12} className=\"shrink-0 text-green-600\" />\n                     {agentName}  <strong>10 </strong> \n                  </li>\n                  <li className=\"flex items-center gap-1.5\">\n                    <CheckCircle size={12} className=\"shrink-0 text-green-600\" />\n                    \n                  </li>\n                  <li className=\"flex items-center gap-1.5\">\n                    <CheckCircle size={12} className=\"shrink-0 text-green-600\" />\n                    \n                  </li>\n                </ul>\n              </div>\n              \n              {/*  */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"mb-1.5 block text-sm font-medium text-slate-700\">\n                     <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={form.name}\n                    onChange={(e) => setForm({ ...form, name: e.target.value })}\n                    placeholder=\"\"\n                    className=\"w-full rounded-xl border border-slate-200 px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"mb-1.5 block text-sm font-medium text-slate-700\">\n                     <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"tel\"\n                    value={form.phone}\n                    onChange={(e) => setForm({ ...form, phone: e.target.value })}\n                    placeholder=\"0912-345-678\"\n                    className=\"w-full rounded-xl border border-slate-200 px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20\"\n                    required\n                  />\n                </div>\n              </div>\n\n              {/*  */}\n              <div>\n                <label className=\"mb-2 block text-sm font-medium text-slate-700\">\n                  \n                </label>\n                <div className=\"flex gap-2\">\n                  {channelOptions.map((opt) => (\n                    <button\n                      key={opt.value}\n                      type=\"button\"\n                      onClick={() => setForm({ ...form, preferredChannel: opt.value })}\n                      className={`flex flex-1 items-center justify-center gap-2 rounded-xl border-2 py-2.5 transition-all ${\n                        form.preferredChannel === opt.value\n                          ? 'border-[#003366] bg-blue-50 text-[#003366]'\n                          : 'border-slate-200 text-slate-600 hover:border-slate-300'\n                      }`}\n                    >\n                      {opt.icon}\n                      <span className=\"text-sm font-medium\">{opt.label}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/*  */}\n              <div>\n                <label className=\"mb-2 block text-sm font-medium text-slate-700\">\n                  <Clock size={14} className=\"mr-1 inline\" />\n                  \n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {timeOptions.map((time) => (\n                    <button\n                      key={time}\n                      type=\"button\"\n                      onClick={() => setForm({ ...form, preferredTime: time })}\n                      className={`rounded-lg px-3 py-2 text-xs font-medium transition-all ${\n                        form.preferredTime === time\n                          ? 'bg-[#003366] text-white'\n                          : 'bg-slate-100 text-slate-600 hover:bg-slate-200'\n                      }`}\n                    >\n                      {time}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/*  */}\n              <div>\n                <label className=\"mb-2 block text-sm font-medium text-slate-700\">\n                  \n                </label>\n                <select\n                  value={form.budget}\n                  onChange={(e) => setForm({ ...form, budget: e.target.value })}\n                  className=\"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20\"\n                >\n                  <option value=\"\"></option>\n                  {budgetOptions.map((opt) => (\n                    <option key={opt} value={opt}>{opt}</option>\n                  ))}\n                </select>\n              </div>\n\n              {/*  */}\n              <div>\n                <label className=\"mb-1.5 block text-sm font-medium text-slate-700\">\n                  \n                </label>\n                <textarea\n                  value={form.needs}\n                  onChange={(e) => setForm({ ...form, needs: e.target.value })}\n                  placeholder=\"...\"\n                  rows={3}\n                  className=\"w-full resize-none rounded-xl border border-slate-200 px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20\"\n                />\n              </div>\n\n              {/*  */}\n              <div className=\"flex items-start gap-3 rounded-xl border border-green-100 bg-green-50 p-3\">\n                <div className=\"flex size-8 shrink-0 items-center justify-center rounded-full bg-green-100\">\n                  <CheckCircle size={16} className=\"text-green-600\" />\n                </div>\n                <div className=\"text-xs text-green-800\">\n                  <p className=\"mb-1 font-medium\"> </p>\n                  <p></p>\n                </div>\n              </div>\n\n              {/*  */}\n              <button\n                type=\"submit\"\n                className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3.5 font-bold text-white shadow-lg shadow-blue-900/20 transition-colors hover:bg-[#004488]\"\n              >\n                <Calendar size={18} />\n                \n              </button>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ContactModal;\n","// \n\nexport type ReportStyle = 'simple' | 'investment' | 'marketing';\n\nexport interface ReportHighlight {\n  id: string;\n  icon: string;\n  title: string;\n  subtitle: string;\n  description: string;\n}\n\nexport interface ReportData {\n  id: string;\n  shortCode: string;\n  propertyId: string;\n  agentId: string;\n  \n  // \n  style: ReportStyle;\n  highlights: string[]; // highlight ids\n  photos: string[];\n  customMessage?: string;\n  \n  // \n  viewCount: number;\n  createdAt: string;\n  expiresAt: string;\n}\n\nexport interface PropertyReportData {\n  // \n  id: string;\n  publicId: string;\n  title: string;\n  price: number;\n  address: string;\n  description: string;\n  images: string[];\n  \n  // \n  size?: number;\n  age?: number;\n  rooms?: number;\n  halls?: number;\n  bathrooms?: number;\n  floorCurrent?: string;\n  floorTotal?: number;\n  propertyType?: string;\n  direction?: string;\n  parking?: string;\n  \n  // \n  communityName?: string;\n  communityYear?: number;\n  communityUnits?: number;\n  managementFee?: number;\n  \n  // \n  advantage1?: string;\n  advantage2?: string;\n  disadvantage?: string;\n  \n  // \n  agent: {\n    id: string;\n    name: string;\n    avatarUrl: string;\n    company: string;\n    phone?: string;\n    lineId?: string;\n    trustScore?: number;\n    reviewCount?: number;\n    experience?: number;\n  };\n}\n\n// \nexport const HIGHLIGHT_OPTIONS: ReportHighlight[] = [\n  {\n    id: 'commute',\n    icon: '',\n    title: '',\n    subtitle: '/',\n    description: ''\n  },\n  {\n    id: 'school',\n    icon: '',\n    title: '',\n    subtitle: '',\n    description: ''\n  },\n  {\n    id: 'community',\n    icon: '',\n    title: '',\n    subtitle: '',\n    description: ''\n  },\n  {\n    id: 'view',\n    icon: '',\n    title: '',\n    subtitle: '',\n    description: ''\n  },\n  {\n    id: 'amenity',\n    icon: '',\n    title: '',\n    subtitle: '',\n    description: ''\n  },\n  {\n    id: 'parking',\n    icon: '',\n    title: '',\n    subtitle: '',\n    description: ''\n  },\n  {\n    id: 'renovated',\n    icon: '',\n    title: '',\n    subtitle: '',\n    description: ''\n  }\n];\n\n// \nexport const REPORT_STYLES = {\n  simple: {\n    id: 'simple',\n    name: '',\n    description: '',\n    icon: ''\n  },\n  investment: {\n    id: 'investment',\n    name: '',\n    description: '',\n    icon: ''\n  },\n  marketing: {\n    id: 'marketing',\n    name: '',\n    description: '',\n    icon: ''\n  }\n} as const;\n","import React, { useState, useEffect } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { Phone, MessageCircle, Calendar, MapPin, Home, ChevronLeft, ChevronRight, Share2, ExternalLink } from 'lucide-react';\nimport { notify } from '../../lib/notify';\nimport { PropertyReportData, HIGHLIGHT_OPTIONS } from './types';\n\n// \nconst DEFAULT_REPORT_DATA: PropertyReportData = {\n  id: 'demo',\n  publicId: 'MH-100001',\n  title: '101',\n  price: 3680,\n  address: '100',\n  description: '',\n  images: [\n    'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800',\n    'https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800',\n    'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800',\n    'https://images.unsplash.com/photo-1600573472592-401b489a3cdc?w=800',\n  ],\n  size: 45.2,\n  age: 8,\n  rooms: 3,\n  halls: 2,\n  bathrooms: 2,\n  floorCurrent: '12',\n  floorTotal: 15,\n  propertyType: '',\n  direction: '',\n  parking: '',\n  communityName: '',\n  communityYear: 2016,\n  communityUnits: 420,\n  managementFee: 80,\n  advantage1: '',\n  advantage2: '',\n  disadvantage: '',\n  agent: {\n    id: 'agent-1',\n    name: '',\n    avatarUrl: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200',\n    company: '',\n    phone: '0912-345-678',\n    lineId: '@maihouses',\n    trustScore: 92,\n    reviewCount: 156,\n    experience: 10\n  }\n};\n\n// \nfunction calculateMonthlyPayment(price: number, loanRatio = 0.8, years = 30, rate = 0.02): number {\n  const principal = price * 10000 * loanRatio;\n  const monthlyRate = rate / 12;\n  const numPayments = years * 12;\n  const payment = principal * (monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / (Math.pow(1 + monthlyRate, numPayments) - 1);\n  return Math.round(payment);\n}\n\nexport default function ReportPage() {\n  const { id } = useParams<{ id: string }>();\n  const [searchParams] = useSearchParams();\n  const [property, setProperty] = useState<PropertyReportData>(DEFAULT_REPORT_DATA);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [viewCount, setViewCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  //  URL \n  const agentId = searchParams.get('aid');\n  const source = searchParams.get('src') || 'direct';\n  const highlights = searchParams.get('h')?.split(',') || ['commute', 'school', 'community'];\n\n  useEffect(() => {\n    // \n    const trackView = async () => {\n      try {\n        await fetch('/api/report/track', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            reportId: id,\n            agentId,\n            source,\n            userAgent: navigator.userAgent\n          })\n        });\n      } catch (e) {\n        console.log('Track failed:', e);\n      }\n    };\n\n    // \n    const loadReport = async () => {\n      setIsLoading(true);\n      try {\n        // TODO:  API \n        // const res = await fetch(`/api/report/${id}`);\n        // const data = await res.json();\n        // setProperty(data.property);\n        // setViewCount(data.viewCount);\n        \n        // \n        await new Promise(r => setTimeout(r, 300));\n        setProperty(DEFAULT_REPORT_DATA);\n        setViewCount(Math.floor(Math.random() * 20) + 5);\n      } catch (e) {\n        console.error('Load report failed:', e);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    trackView();\n    loadReport();\n  }, [id, agentId, source]);\n\n  // \n  const selectedHighlights = HIGHLIGHT_OPTIONS.filter(h => highlights.includes(h.id));\n\n  // \n  const monthlyPayment = calculateMonthlyPayment(property.price);\n\n  // \n  const handleShare = async () => {\n    const url = window.location.href;\n    const text = `${property.title} - NT$${property.price}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({ title: text, url });\n      } catch (e) {\n        console.log('Share cancelled');\n      }\n    } else {\n      await navigator.clipboard.writeText(url);\n      notify.success('', '');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-slate-50\">\n        <div className=\"text-center\">\n          <div className=\"mx-auto mb-4 size-12 animate-spin rounded-full border-4 border-blue-600 border-t-transparent\"></div>\n          <p className=\"text-slate-500\">...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      {/*  Hero  -  */}\n      <section className=\"relative\">\n        <div className=\"aspect-[4/3] overflow-hidden bg-slate-200\">\n          <img \n            src={property.images[currentImageIndex]} \n            alt={property.title}\n            className=\"size-full object-cover\"\n          />\n          \n          {/*  */}\n          {property.images.length > 1 && (\n            <>\n              <button \n                onClick={() => setCurrentImageIndex(i => i > 0 ? i - 1 : property.images.length - 1)}\n                className=\"absolute left-2 top-1/2 flex size-10 -translate-y-1/2 items-center justify-center rounded-full bg-black/30 text-white transition hover:bg-black/50\"\n              >\n                <ChevronLeft size={24} />\n              </button>\n              <button \n                onClick={() => setCurrentImageIndex(i => i < property.images.length - 1 ? i + 1 : 0)}\n                className=\"absolute right-2 top-1/2 flex size-10 -translate-y-1/2 items-center justify-center rounded-full bg-black/30 text-white transition hover:bg-black/50\"\n              >\n                <ChevronRight size={24} />\n              </button>\n              \n              {/*  */}\n              <div className=\"absolute bottom-4 left-1/2 flex -translate-x-1/2 gap-1.5\">\n                {property.images.map((_, i) => (\n                  <button \n                    key={i}\n                    onClick={() => setCurrentImageIndex(i)}\n                    className={`size-2 rounded-full transition ${i === currentImageIndex ? 'bg-white' : 'bg-white/50'}`}\n                  />\n                ))}\n              </div>\n            </>\n          )}\n          \n          {/*  */}\n          <div className=\"absolute right-4 top-4 flex items-center gap-1.5 rounded-full bg-white/90 px-3 py-1.5 text-sm font-bold text-[#003366] backdrop-blur\">\n            <Home size={14} />\n            \n          </div>\n        </div>\n      </section>\n\n      {/*   +  */}\n      <section className=\"border-b border-slate-100 bg-white px-4 py-5\">\n        <div className=\"mb-1 text-3xl font-black text-[#003366]\">\n          NT$ {property.price.toLocaleString()} \n        </div>\n        <h1 className=\"mb-2 text-lg font-bold text-slate-800\">{property.title}</h1>\n        <div className=\"flex items-center text-sm text-slate-500\">\n          <MapPin size={14} className=\"mr-1\" />\n          {property.address}\n        </div>\n      </section>\n\n      {/*   */}\n      <section className=\"border-b border-slate-100 bg-white p-4\">\n        <div className=\"grid grid-cols-3 gap-3 text-center\">\n          <div className=\"rounded-xl bg-slate-50 py-3\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.rooms}{property.halls}{property.bathrooms}</div>\n            <div className=\"text-xs text-slate-500\"></div>\n          </div>\n          <div className=\"rounded-xl bg-slate-50 py-3\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.size} </div>\n            <div className=\"text-xs text-slate-500\"></div>\n          </div>\n          <div className=\"rounded-xl bg-slate-50 py-3\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.age} </div>\n            <div className=\"text-xs text-slate-500\"></div>\n          </div>\n          <div className=\"rounded-xl bg-slate-50 py-3\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.floorCurrent}/{property.floorTotal}F</div>\n            <div className=\"text-xs text-slate-500\"></div>\n          </div>\n          <div className=\"rounded-xl bg-slate-50 py-3\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.direction}</div>\n            <div className=\"text-xs text-slate-500\"></div>\n          </div>\n          <div className=\"rounded-xl bg-slate-50 py-3\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.parking || ''}</div>\n            <div className=\"text-xs text-slate-500\"></div>\n          </div>\n        </div>\n      </section>\n\n      {/*   */}\n      <section className=\"border-b border-slate-100 bg-white p-4\">\n        <h2 className=\"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800\">\n           \n        </h2>\n        <div className=\"rounded-xl border border-blue-100 bg-gradient-to-r from-blue-50 to-cyan-50 p-4\">\n          <div className=\"mb-2 flex items-center justify-between\">\n            <span className=\"text-sm text-slate-600\"> 8 30 </span>\n            <span className=\"text-xs text-slate-400\"> 2%</span>\n          </div>\n          <div className=\"text-2xl font-black text-[#003366]\">\n             NT$ {monthlyPayment.toLocaleString()}\n          </div>\n        </div>\n      </section>\n\n      {/*   */}\n      <section className=\"border-b border-slate-100 bg-white p-4\">\n        <h2 className=\"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800\">\n           \n        </h2>\n        <div className=\"space-y-3\">\n          {selectedHighlights.map(h => (\n            <div key={h.id} className=\"flex items-start gap-3 rounded-xl bg-slate-50 p-3\">\n              <span className=\"text-2xl\">{h.icon}</span>\n              <div>\n                <div className=\"font-bold text-slate-800\">{h.title}</div>\n                <div className=\"text-sm text-slate-500\">{h.description}</div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      {/*   */}\n      {property.communityName && (\n        <section className=\"border-b border-slate-100 bg-white p-4\">\n          <h2 className=\"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800\">\n             \n          </h2>\n          <div className=\"space-y-2 rounded-xl bg-slate-50 p-4\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-slate-500\"></span>\n              <span className=\"font-medium text-slate-800\">{property.communityName}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-slate-500\"></span>\n              <span className=\"font-medium text-slate-800\">{property.communityYear} </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-slate-500\"></span>\n              <span className=\"font-medium text-slate-800\">{property.communityUnits} </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-slate-500\"></span>\n              <span className=\"font-medium text-slate-800\">{property.managementFee} /</span>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/*   */}\n      {property.images.length > 1 && (\n        <section className=\"border-b border-slate-100 bg-white p-4\">\n          <h2 className=\"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800\">\n             \n          </h2>\n          <div className=\"grid grid-cols-3 gap-2\">\n            {property.images.slice(0, 6).map((img, i) => (\n              <button \n                key={i}\n                onClick={() => setCurrentImageIndex(i)}\n                className=\"aspect-square overflow-hidden rounded-lg bg-slate-100\"\n              >\n                <img src={img} alt=\"\" className=\"size-full object-cover\" />\n              </button>\n            ))}\n          </div>\n        </section>\n      )}\n\n      {/*   */}\n      <section className=\"border-b border-slate-100 bg-white px-4 py-5\">\n        <h2 className=\"mb-4 flex items-center gap-2 text-sm font-bold text-slate-800\">\n           \n        </h2>\n        <div className=\"mb-4 flex items-center gap-4\">\n          <img \n            src={property.agent.avatarUrl} \n            alt={property.agent.name}\n            className=\"size-16 rounded-full border-2 border-slate-100 object-cover\"\n          />\n          <div className=\"flex-1\">\n            <div className=\"text-lg font-bold text-slate-800\">{property.agent.name}</div>\n            <div className=\"text-sm text-slate-500\">{property.agent.company}</div>\n            <div className=\"mt-1 flex items-center gap-2\">\n              <span className=\"text-sm text-amber-500\"> {(property.agent.trustScore! / 20).toFixed(1)}</span>\n              <span className=\"text-xs text-slate-400\">({property.agent.reviewCount} )</span>\n              {property.agent.experience && (\n                <span className=\"text-xs text-slate-400\">{property.agent.experience}</span>\n              )}\n            </div>\n          </div>\n        </div>\n        \n        {/* CTA  */}\n        <div className=\"space-y-3\">\n          <a \n            href={`tel:${property.agent.phone}`}\n            className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3.5 font-bold text-white transition hover:bg-[#002244]\"\n          >\n            <Phone size={18} />\n             {property.agent.phone}\n          </a>\n          <a \n            href={`https://line.me/R/ti/p/${property.agent.lineId}`}\n            className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3.5 font-bold text-white transition hover:bg-[#05a847]\"\n          >\n            <MessageCircle size={18} />\n            LINE \n          </a>\n          <button \n            className=\"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-slate-200 py-3.5 font-bold text-slate-700 transition hover:border-slate-300\"\n          >\n            <Calendar size={18} />\n            \n          </button>\n        </div>\n      </section>\n\n      {/*  Footer */}\n      <section className=\"bg-slate-100 px-4 py-6 text-center\">\n        <div className=\"mb-2 flex items-center justify-center gap-2 font-bold text-[#003366]\">\n          <Home size={18} />\n          MaiHouses \n        </div>\n        <div className=\"mb-3 text-sm text-slate-500\"></div>\n        \n        {viewCount > 0 && (\n          <div className=\"mb-2 text-xs text-slate-400\">\n              {viewCount} \n          </div>\n        )}\n        \n        <div className=\"text-xs text-slate-400\">\n          {new Date().toLocaleDateString('zh-TW')}\n        </div>\n        \n        {/*  */}\n        <button \n          onClick={handleShare}\n          className=\"mt-4 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm text-slate-600 transition hover:bg-slate-50\"\n        >\n          <Share2 size={14} />\n          \n        </button>\n        \n        {/*  */}\n        <a \n          href={`/maihouses/property/${property.publicId}?aid=${agentId || ''}&src=report`}\n          className=\"mt-3 flex items-center justify-center gap-1 text-sm text-[#003366] hover:underline\"\n        >\n          \n          <ExternalLink size={14} />\n        </a>\n      </section>\n    </div>\n  );\n}\n","import React, { useState, useMemo } from 'react';\nimport { X, ChevronRight, Check, Copy, Share2, FileText, Link2 } from 'lucide-react';\nimport { PropertyReportData, ReportStyle, REPORT_STYLES, HIGHLIGHT_OPTIONS } from './types';\nimport { notify } from '../../lib/notify';\n\ninterface ReportGeneratorProps {\n  property: PropertyReportData;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ntype Step = 'style' | 'highlights' | 'photos' | 'preview';\n\nexport default function ReportGenerator({ property, isOpen, onClose }: ReportGeneratorProps) {\n  const [step, setStep] = useState<Step>('style');\n  const [selectedStyle, setSelectedStyle] = useState<ReportStyle>('simple');\n  const [selectedHighlights, setSelectedHighlights] = useState<string[]>(['commute', 'school', 'community']);\n  const [selectedPhotos, setSelectedPhotos] = useState<number[]>([0, 1, 2, 3]);\n  const [customMessage, setCustomMessage] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generatedUrl, setGeneratedUrl] = useState<string | null>(null);\n\n  // \n  const defaultMessage = useMemo(() => \n    `${property.title} `,\n    [property.title]\n  );\n\n  // \n  const generateReportUrl = () => {\n    const baseUrl = window.location.origin;\n    const params = new URLSearchParams({\n      aid: property.agent.id,\n      src: 'line_share',\n      h: selectedHighlights.join(','),\n      s: selectedStyle\n    });\n    return `${baseUrl}/maihouses/r/${property.publicId}?${params.toString()}`;\n  };\n\n  // \n  const toggleHighlight = (id: string) => {\n    setSelectedHighlights(prev => {\n      if (prev.includes(id)) {\n        return prev.filter(h => h !== id);\n      }\n      if (prev.length >= 3) {\n        //  3 \n        return [...prev.slice(1), id];\n      }\n      return [...prev, id];\n    });\n  };\n\n  // \n  const togglePhoto = (index: number) => {\n    setSelectedPhotos(prev => {\n      if (prev.includes(index)) {\n        return prev.filter(i => i !== index);\n      }\n      if (prev.length >= 5) {\n        return [...prev.slice(1), index];\n      }\n      return [...prev, index];\n    });\n  };\n\n  // \n  const handleGenerate = async () => {\n    setIsGenerating(true);\n    \n    try {\n      // TODO:  API \n      // await fetch('/api/report/create', {\n      //   method: 'POST',\n      //   body: JSON.stringify({ ... })\n      // });\n      \n      await new Promise(r => setTimeout(r, 800));\n      const url = generateReportUrl();\n      setGeneratedUrl(url);\n      setStep('preview');\n    } catch (e) {\n      notify.error('');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // \n  const handleCopyLink = async () => {\n    if (!generatedUrl) return;\n    try {\n      await navigator.clipboard.writeText(generatedUrl);\n      notify.success('');\n    } catch (e) {\n      notify.error('');\n    }\n  };\n\n  // LINE \n  const handleLineShare = () => {\n    const message = customMessage || defaultMessage;\n    const url = encodeURIComponent(generatedUrl || '');\n    const text = encodeURIComponent(message);\n    window.open(`https://line.me/R/msg/text/?${text}%0A${url}`, '_blank');\n  };\n\n  // Web Share\n  const handleShare = async () => {\n    if (!navigator.share || !generatedUrl) {\n      handleCopyLink();\n      return;\n    }\n    \n    try {\n      await navigator.share({\n        title: property.title,\n        text: customMessage || defaultMessage,\n        url: generatedUrl\n      });\n    } catch (e) {\n      // \n    }\n  };\n\n  // \n  const handleClose = () => {\n    setStep('style');\n    setGeneratedUrl(null);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-modal flex items-end justify-center sm:items-center\">\n      {/*  */}\n      <div \n        className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n        onClick={handleClose}\n      />\n      \n      {/* Modal */}\n      <div className=\"relative flex max-h-[90vh] w-full max-w-lg flex-col overflow-hidden rounded-t-3xl bg-white sm:rounded-2xl\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between border-b border-slate-100 px-5 py-4\">\n          <h2 className=\"text-lg font-bold text-slate-800\"></h2>\n          <button \n            onClick={handleClose}\n            className=\"rounded-full p-2 transition hover:bg-slate-100\"\n          >\n            <X size={20} className=\"text-slate-500\" />\n          </button>\n        </div>\n\n        {/*  */}\n        <div className=\"border-b border-slate-100 bg-slate-50 px-5 py-3\">\n          <div className=\"flex items-center gap-2 text-sm\">\n            {(['style', 'highlights', 'photos', 'preview'] as Step[]).map((s, i) => (\n              <React.Fragment key={s}>\n                <div className={`flex items-center gap-1.5 ${step === s ? 'font-bold text-[#003366]' : 'text-slate-400'}`}>\n                  <div className={`flex size-6 items-center justify-center rounded-full text-xs font-bold ${\n                    step === s ? 'bg-[#003366] text-white' : \n                    (['style', 'highlights', 'photos', 'preview'].indexOf(step) > i) ? 'bg-green-500 text-white' : 'bg-slate-200'\n                  }`}>\n                    {(['style', 'highlights', 'photos', 'preview'].indexOf(step) > i) ? <Check size={14} /> : i + 1}\n                  </div>\n                  <span className=\"hidden sm:inline\">\n                    {s === 'style' && ''}\n                    {s === 'highlights' && ''}\n                    {s === 'photos' && ''}\n                    {s === 'preview' && ''}\n                  </span>\n                </div>\n                {i < 3 && <ChevronRight size={16} className=\"text-slate-300\" />}\n              </React.Fragment>\n            ))}\n          </div>\n        </div>\n\n        {/*  */}\n        <div className=\"flex-1 overflow-y-auto p-5\">\n          \n          {/* Step 1:  */}\n          {step === 'style' && (\n            <div className=\"space-y-4\">\n              <div className=\"mb-4 text-sm text-slate-500\">\n                \n              </div>\n              \n              {Object.values(REPORT_STYLES).map(style => (\n                <button\n                  key={style.id}\n                  onClick={() => setSelectedStyle(style.id as ReportStyle)}\n                  className={`w-full rounded-xl border-2 p-4 text-left transition ${\n                    selectedStyle === style.id \n                      ? 'border-[#003366] bg-blue-50' \n                      : 'border-slate-200 hover:border-slate-300'\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-2xl\">{style.icon}</span>\n                    <div className=\"flex-1\">\n                      <div className=\"font-bold text-slate-800\">{style.name}</div>\n                      <div className=\"text-sm text-slate-500\">{style.description}</div>\n                    </div>\n                    {selectedStyle === style.id && (\n                      <div className=\"flex size-6 items-center justify-center rounded-full bg-[#003366]\">\n                        <Check size={14} className=\"text-white\" />\n                      </div>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Step 2:  */}\n          {step === 'highlights' && (\n            <div className=\"space-y-4\">\n              <div className=\"mb-4 text-sm text-slate-500\">\n                 3  {selectedHighlights.length}/3\n              </div>\n              \n              {HIGHLIGHT_OPTIONS.map(h => (\n                <button\n                  key={h.id}\n                  onClick={() => toggleHighlight(h.id)}\n                  className={`w-full rounded-xl border-2 p-3 text-left transition ${\n                    selectedHighlights.includes(h.id)\n                      ? 'border-[#003366] bg-blue-50' \n                      : 'border-slate-200 hover:border-slate-300'\n                  }`}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <span className=\"text-xl\">{h.icon}</span>\n                    <div className=\"flex-1\">\n                      <div className=\"font-bold text-slate-800\">{h.title}</div>\n                      <div className=\"text-xs text-slate-500\">{h.subtitle}</div>\n                    </div>\n                    {selectedHighlights.includes(h.id) && (\n                      <div className=\"flex size-6 items-center justify-center rounded-full bg-[#003366]\">\n                        <Check size={14} className=\"text-white\" />\n                      </div>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Step 3:  */}\n          {step === 'photos' && (\n            <div className=\"space-y-4\">\n              <div className=\"mb-4 text-sm text-slate-500\">\n                 {selectedPhotos.length}/5\n              </div>\n              \n              <div className=\"grid grid-cols-3 gap-2\">\n                {property.images.map((img, i) => (\n                  <button\n                    key={i}\n                    onClick={() => togglePhoto(i)}\n                    className={`relative aspect-square overflow-hidden rounded-lg border-2 transition ${\n                      selectedPhotos.includes(i)\n                        ? 'border-[#003366] ring-2 ring-[#003366]/20' \n                        : 'border-transparent'\n                    }`}\n                  >\n                    <img src={img} alt=\"\" className=\"size-full object-cover\" />\n                    {selectedPhotos.includes(i) && (\n                      <div className=\"absolute right-1 top-1 flex size-5 items-center justify-center rounded-full bg-[#003366]\">\n                        <Check size={12} className=\"text-white\" />\n                      </div>\n                    )}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Step 4:  &  */}\n          {step === 'preview' && generatedUrl && (\n            <div className=\"space-y-5\">\n              {/*  */}\n              <div className=\"py-4 text-center\">\n                <div className=\"mx-auto mb-3 flex size-16 items-center justify-center rounded-full bg-green-100\">\n                  <Check size={32} className=\"text-green-600\" />\n                </div>\n                <h3 className=\"text-lg font-bold text-slate-800\"></h3>\n                <p className=\"mt-1 text-sm text-slate-500\"></p>\n              </div>\n\n              {/*  */}\n              <div className=\"rounded-xl bg-slate-50 p-3\">\n                <div className=\"mb-2 flex items-center gap-2 text-sm text-slate-600\">\n                  <Link2 size={14} />\n                  \n                </div>\n                <div className=\"break-all rounded-lg border border-slate-200 bg-white p-2 text-xs text-slate-500\">\n                  {generatedUrl}\n                </div>\n              </div>\n\n              {/*  */}\n              <div>\n                <label className=\"mb-2 block text-sm text-slate-600\"></label>\n                <textarea\n                  value={customMessage || defaultMessage}\n                  onChange={e => setCustomMessage(e.target.value)}\n                  className=\"w-full resize-none rounded-xl border border-slate-200 p-3 text-sm focus:border-[#003366] focus:outline-none focus:ring-2 focus:ring-[#003366]/20\"\n                  rows={3}\n                />\n              </div>\n\n              {/*  */}\n              <div className=\"space-y-3\">\n                <button\n                  onClick={handleCopyLink}\n                  className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white transition hover:bg-[#002244]\"\n                >\n                  <Copy size={18} />\n                  \n                </button>\n                \n                <button\n                  onClick={handleLineShare}\n                  className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3 font-bold text-white transition hover:bg-[#05a847]\"\n                >\n                  <svg viewBox=\"0 0 24 24\" className=\"size-5 fill-current\">\n                    <path d=\"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314\"/>\n                  </svg>\n                  LINE \n                </button>\n                \n                <button\n                  onClick={handleShare}\n                  className=\"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-slate-200 py-3 font-bold text-slate-700 transition hover:border-slate-300\"\n                >\n                  <Share2 size={18} />\n                  \n                </button>\n              </div>\n\n              {/*  */}\n              <a\n                href={generatedUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center justify-center gap-2 text-sm text-[#003366] hover:underline\"\n              >\n                <FileText size={14} />\n                \n              </a>\n            </div>\n          )}\n        </div>\n\n        {/* Footer  */}\n        {step !== 'preview' && (\n          <div className=\"flex gap-3 border-t border-slate-100 px-5 py-4\">\n            {step !== 'style' && (\n              <button\n                onClick={() => {\n                  const steps: Step[] = ['style', 'highlights', 'photos', 'preview'];\n                  const currentIndex = steps.indexOf(step);\n                  if (currentIndex > 0) {\n                    const prevStep = steps[currentIndex - 1];\n                    if (prevStep) setStep(prevStep);\n                  }\n                }}\n                className=\"flex-1 rounded-xl border-2 border-slate-200 py-3 font-bold text-slate-700 transition hover:border-slate-300\"\n              >\n                \n              </button>\n            )}\n            \n            <button\n              onClick={() => {\n                if (step === 'style') setStep('highlights');\n                else if (step === 'highlights') setStep('photos');\n                else if (step === 'photos') handleGenerate();\n              }}\n              disabled={isGenerating || (step === 'highlights' && selectedHighlights.length === 0)}\n              className=\"flex flex-1 items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white transition hover:bg-[#002244] disabled:bg-slate-300\"\n            >\n              {isGenerating ? (\n                <>\n                  <div className=\"size-5 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n                  ...\n                </>\n              ) : step === 'photos' ? (\n                ''\n              ) : (\n                <>\n                  \n                  <ChevronRight size={18} />\n                </>\n              )}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { Home, Heart, Phone, MessageCircle, Hash, MapPin, ArrowLeft, Shield, Eye, Users, Calendar, Flame, Star, Lock, ChevronRight, CheckCircle, FileText } from 'lucide-react';\nimport { AgentTrustCard } from '../components/AgentTrustCard';\nimport { propertyService, DEFAULT_PROPERTY, PropertyData } from '../services/propertyService';\nimport { ContactModal } from '../components/ContactModal';\nimport { ReportGenerator } from './Report';\n\n// UAG Tracker Hook v8.1 -  + S\n// : 1.district 2.S 3.fetch\nconst usePropertyTracker = (\n  propertyId: string, \n  agentId: string, \n  district: string,\n  onGradeUpgrade?: (newGrade: string, reason?: string) => void\n) => {\n  const enterTime = useRef(Date.now());\n  const actions = useRef({ click_photos: 0, click_line: 0, click_call: 0, scroll_depth: 0 });\n  const hasSent = useRef(false);\n  const currentGrade = useRef<string>('F');\n\n  //  session_id\n  const getSessionId = useCallback(() => {\n    let sid = localStorage.getItem('uag_session');\n    if (!sid) {\n      sid = `u_${Math.random().toString(36).substring(2, 11)}`;\n      localStorage.setItem('uag_session', sid);\n    }\n    return sid;\n  }, []);\n\n  //  payload\n  const buildPayload = useCallback((eventType: string) => ({\n    session_id: getSessionId(),\n    agent_id: agentId,\n    fingerprint: btoa(JSON.stringify({\n      screen: `${screen.width}x${screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: navigator.language\n    })),\n    event: {\n      type: eventType,\n      property_id: propertyId,\n      district: district || 'unknown', // :  district\n      duration: Math.round((Date.now() - enterTime.current) / 1000),\n      actions: { ...actions.current },\n      focus: []\n    }\n  }), [propertyId, agentId, district, getSessionId]);\n\n  //  ( S )\n  const sendEvent = useCallback(async (eventType: string, useBeacon = false) => {\n    const payload = buildPayload(eventType);\n\n    // page_exit  beacon ()\n    if (useBeacon || eventType === 'page_exit') {\n      const blob = new Blob([JSON.stringify(payload)], { type: 'application/json' });\n      navigator.sendBeacon('/api/uag-track', blob);\n      return;\n    }\n\n    //  fetch\n    try {\n      const res = await fetch('/api/uag-track', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n        keepalive: true // \n      });\n      const data = await res.json();\n      \n      //  S \n      if (data.success && data.grade) {\n        const gradeRank: Record<string, number> = { S: 5, A: 4, B: 3, C: 2, F: 1 };\n        const newRank = gradeRank[data.grade] || 1;\n        const oldRank = gradeRank[currentGrade.current] || 1;\n        \n        if (newRank > oldRank) {\n          currentGrade.current = data.grade;\n          // S  ( reason)\n          if (data.grade === 'S' && onGradeUpgrade) {\n            onGradeUpgrade('S', data.reason);\n          }\n        }\n      }\n    } catch (e) {\n      //  fallback  beacon\n      const blob = new Blob([JSON.stringify(payload)], { type: 'application/json' });\n      navigator.sendBeacon('/api/uag-track', blob);\n    }\n  }, [buildPayload, onGradeUpgrade]);\n\n  // \n  useEffect(() => {\n    const handleScroll = () => {\n      const depth = Math.round((window.scrollY + window.innerHeight) / document.body.scrollHeight * 100);\n      if (depth > actions.current.scroll_depth) {\n        actions.current.scroll_depth = depth;\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  //  page_view page_exit\n  useEffect(() => {\n    if (!propertyId) return;\n\n    //  page_view ( beacon)\n    sendEvent('page_view', true);\n\n    //  page_exit\n    const handleUnload = () => {\n      if (!hasSent.current) {\n        hasSent.current = true;\n        sendEvent('page_exit', true);\n      }\n    };\n\n    window.addEventListener('pagehide', handleUnload);\n    window.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'hidden') handleUnload();\n    });\n\n    return () => {\n      window.removeEventListener('pagehide', handleUnload);\n      handleUnload();\n    };\n  }, [propertyId, sendEvent]);\n\n  // \n  return {\n    trackPhotoClick: () => { actions.current.click_photos++; },\n    trackLineClick: () => { actions.current.click_line = 1; sendEvent('click_line'); },\n    trackCallClick: () => { actions.current.click_call = 1; sendEvent('click_call'); }\n  };\n};\n\nexport const PropertyDetailPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const [searchParams] = useSearchParams();\n  const [isFavorite, setIsFavorite] = useState(false);\n  \n  // Mock:  useAuth\n  const isLoggedIn = false;\n  \n  // \n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // ContactModal \n  const [showContactModal, setShowContactModal] = useState(false);\n  const [contactSource, setContactSource] = useState<'sidebar' | 'mobile_bar' | 'booking'>('sidebar');\n  \n  // S  VIP  Modal\n  const [showVipModal, setShowVipModal] = useState(false);\n  const [vipReason, setVipReason] = useState<string>('');\n  \n  //  Modal\n  const [showReportGenerator, setShowReportGenerator] = useState(false);\n  \n  //  DEFAULT_PROPERTY\n  const [property, setProperty] = useState<PropertyData>(DEFAULT_PROPERTY);\n\n  //  agent_id ( URL  localStorage)\n  const getAgentId = () => {\n    let aid = searchParams.get('aid');\n    if (!aid) aid = localStorage.getItem('uag_last_aid');\n    if (aid && aid !== 'unknown') localStorage.setItem('uag_last_aid', aid);\n    return aid || 'unknown';\n  };\n\n  // S \n  const handleGradeUpgrade = useCallback((grade: string, reason?: string) => {\n    if (grade === 'S') {\n      if (reason) setVipReason(reason);\n      //  500ms \n      setTimeout(() => setShowVipModal(true), 500);\n    }\n  }, []);\n\n  //  address  ( \"...\" -> \"\")\n  const extractDistrict = (address: string): string => {\n    const match = address.match(/[](.{2,3}[])/);\n    return match?.[1] ?? 'unknown';\n  };\n\n  //  ( district + S)\n  const tracker = usePropertyTracker(\n    id || '', \n    getAgentId(), \n    extractDistrict(property.address),\n    handleGradeUpgrade\n  );\n\n  //  Modal \n  const openContactModal = (source: 'sidebar' | 'mobile_bar' | 'booking') => {\n    setContactSource(source);\n    setShowContactModal(true);\n    // \n    if (source === 'mobile_bar') {\n      tracker.trackLineClick();\n    } else {\n      tracker.trackCallClick();\n    }\n  };\n\n  //  - \n  const socialProof = useMemo(() => {\n    //  property.publicId \n    const seed = property.publicId?.charCodeAt(3) || 0;\n    return {\n      currentViewers: Math.floor(seed % 5) + 2,      // 2-6 \n      weeklyBookings: Math.floor(seed % 8) + 5,      // 5-12 \n      isHot: seed % 3 === 0                           // 1/3 \n    };\n  }, [property.publicId]);\n\n  useEffect(() => {\n    const fetchProperty = async () => {\n      if (!id) return;\n      \n      try {\n        const data = await propertyService.getPropertyByPublicId(id);\n        if (data) {\n          setProperty(data);\n        }\n      } catch (error) {\n        console.error('Fetch error:', error);\n        // \n      }\n    };\n    fetchProperty();\n  }, [id]);\n\n  // [Safety] \n  const FALLBACK_IMAGE = 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';\n\n  let displayImage = (property.images && property.images.length > 0 && property.images[0]) \n    ? property.images[0] \n    : FALLBACK_IMAGE;\n\n  // [Double Safety]  picsum\n  if (displayImage && displayImage.includes('picsum')) {\n    displayImage = FALLBACK_IMAGE;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#f8fafc] font-sans text-slate-800\">\n      {/* Header */}\n      <nav className=\"sticky top-0 z-overlay flex h-16 items-center justify-between border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md\">\n        <div className=\"flex items-center gap-3\">\n          <button className=\"rounded-full p-2 transition-colors hover:bg-slate-100\">\n            <ArrowLeft size={20} className=\"text-slate-600\" />\n          </button>\n          <div className=\"flex items-center gap-2 text-xl font-extrabold text-[#003366]\">\n            <div className=\"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white\">\n              <Home size={18} />\n            </div>\n            \n          </div>\n        </div>\n        \n        {/*  */}\n        <div className=\"flex items-center rounded-lg border border-slate-200 bg-slate-50 px-3 py-1.5 font-mono text-xs text-slate-500\">\n          <Hash size={12} className=\"mr-1 text-gray-400\"/>\n          <span className=\"ml-1 font-bold text-[#003366]\">{property.publicId}</span>\n        </div>\n      </nav>\n\n      <main className=\"mx-auto max-w-4xl p-4 pb-24\">\n        {/* Image Gallery -  */}\n        <div className=\"mb-4\">\n          {/*  */}\n          <div className=\"group relative aspect-video overflow-hidden rounded-2xl bg-slate-200\">\n            <img \n              src={property.images?.[currentImageIndex] || displayImage} \n              alt={property.title}\n              onError={(e) => {\n                if (e.currentTarget.src !== FALLBACK_IMAGE) {\n                  e.currentTarget.src = FALLBACK_IMAGE;\n                }\n              }}\n              className=\"size-full object-cover transition-transform duration-700 group-hover:scale-105\"\n            />\n            <div className=\"absolute bottom-4 right-4 flex items-center gap-1 rounded-full bg-black/50 px-3 py-1.5 text-xs text-white backdrop-blur-md\">\n              <Home size={12} />\n              <span>{currentImageIndex + 1} / {property.images?.length || 1}</span>\n            </div>\n          </div>\n          \n          {/*  */}\n          {property.images && property.images.length > 1 && (\n            <div className=\"scrollbar-hide -mx-4 mt-3 flex gap-2 overflow-x-auto px-4 pb-2\">\n              {property.images.map((img, i) => (\n                <button\n                  key={i}\n                  onClick={() => {\n                    setCurrentImageIndex(i);\n                    tracker.trackPhotoClick();\n                  }}\n                  className={`h-14 w-20 shrink-0 overflow-hidden rounded-lg border-2 transition-all ${\n                    i === currentImageIndex \n                      ? 'border-[#003366] ring-2 ring-[#003366]/20' \n                      : 'border-transparent opacity-70 hover:opacity-100'\n                  }`}\n                >\n                  <img \n                    src={img} \n                    alt={` ${i + 1}`}\n                    onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}\n                    className=\"size-full object-cover\"\n                  />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/*   CTA -  */}\n        <div className=\"mb-6 lg:hidden\">\n          <div className=\"rounded-2xl border border-slate-100 bg-white p-4 shadow-lg\">\n            <div className=\"flex gap-3\">\n              <button \n                onClick={() => openContactModal('mobile_bar')}\n                className=\"flex flex-1 items-center justify-center gap-2 rounded-xl bg-[#003366] py-4 text-base font-bold text-white shadow-lg\"\n              >\n                <Phone size={20} />\n                \n              </button>\n              <button \n                onClick={() => openContactModal('mobile_bar')}\n                className=\"flex w-14 items-center justify-center rounded-xl bg-[#06C755] text-white shadow-lg\"\n              >\n                <MessageCircle size={22} />\n              </button>\n            </div>\n            <p className=\"mt-2 text-center text-xs text-slate-500\">\n                {socialProof.weeklyBookings} \n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-3\">\n          {/* Main Content */}\n          <div className=\"space-y-6 lg:col-span-2\">\n            <div>\n              <div className=\"flex items-start justify-between gap-4\">\n                <h1 className=\"text-2xl font-bold leading-tight text-slate-900\">\n                  {property.title}\n                </h1>\n                <button \n                  onClick={() => setIsFavorite(!isFavorite)}\n                  className={`rounded-full p-2 transition-all ${isFavorite ? 'bg-red-50 text-red-500' : 'bg-slate-50 text-slate-400 hover:bg-slate-100'}`}\n                >\n                  <Heart size={24} fill={isFavorite ? \"currentColor\" : \"none\"} />\n                </button>\n              </div>\n              \n              <div className=\"mt-2 flex items-center gap-2 text-sm text-slate-500\">\n                <MapPin size={16} />\n                {property.address}\n              </div>\n\n              <div className=\"mt-4 flex items-baseline gap-2\">\n                <span className=\"text-3xl font-extrabold text-[#003366]\">{property.price}</span>\n                <span className=\"text-lg font-medium text-slate-500\"></span>\n                <span className=\"ml-2 text-sm font-medium text-red-500\"></span>\n              </div>\n\n              {/*  - FOMO */}\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                {socialProof.isHot && (\n                  <div className=\"inline-flex animate-pulse items-center gap-1 rounded-full bg-orange-50 px-2 py-1 text-xs font-medium text-orange-600\">\n                    <Flame size={12} />\n                    \n                  </div>\n                )}\n                <div className=\"inline-flex items-center gap-1 rounded-full bg-slate-50 px-2 py-1 text-xs text-slate-600\">\n                  <Eye size={12} className=\"text-blue-500\" />\n                  {socialProof.currentViewers} \n                </div>\n                <div className=\"inline-flex items-center gap-1 rounded-full bg-slate-50 px-2 py-1 text-xs text-slate-600\">\n                  <Users size={12} className=\"text-green-500\" />\n                   {socialProof.weeklyBookings} \n                </div>\n              </div>\n            </div>\n\n            {/* Tags */}\n            <div className=\"flex flex-wrap gap-2\">\n              {['', '', '', ''].map(tag => (\n                <span key={tag} className=\"rounded-full bg-blue-50 px-3 py-1 text-xs font-medium text-[#003366]\">\n                  {tag}\n                </span>\n              ))}\n            </div>\n\n            <div className=\"h-px bg-slate-100\" />\n\n            {/* Description */}\n            <div className=\"prose prose-slate max-w-none\">\n              <h3 className=\"mb-3 text-lg font-bold text-slate-900\"></h3>\n              <p className=\"whitespace-pre-line leading-relaxed text-slate-600\">\n                {property.description}\n              </p>\n            </div>\n            \n            {/*   -  */}\n            <div className=\"rounded-2xl border border-slate-100 bg-white p-4 shadow-sm\">\n              <div className=\"mb-4 flex items-center justify-between\">\n                <h3 className=\"flex items-center gap-2 text-lg font-bold text-slate-900\">\n                  <Star size={18} className=\"text-yellow-500\" fill=\"currentColor\" />\n                  \n                </h3>\n                <span className=\"rounded-full bg-slate-50 px-2 py-1 text-xs text-slate-500\">\n                  88 \n                </span>\n              </div>\n              \n              {/*  */}\n              <div className=\"space-y-3\">\n                <div className=\"flex gap-3 rounded-xl bg-slate-50 p-3\">\n                  <div className=\"flex size-10 shrink-0 items-center justify-center rounded-full bg-[#003366] text-lg font-bold text-white\">\n                    J\n                  </div>\n                  <div className=\"min-w-0 flex-1\">\n                    <div className=\"mb-1 flex items-center gap-2\">\n                      <span className=\"text-sm font-bold text-slate-800\">J***</span>\n                      <span className=\"text-xs text-slate-500\">B</span>\n                      <span className=\"text-xs text-yellow-500\"></span>\n                    </div>\n                    <p className=\"text-sm leading-relaxed text-slate-600\">\n                      \n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"flex gap-3 rounded-xl bg-slate-50 p-3\">\n                  <div className=\"flex size-10 shrink-0 items-center justify-center rounded-full bg-[#00A8E8] text-lg font-bold text-white\">\n                    W\n                  </div>\n                  <div className=\"min-w-0 flex-1\">\n                    <div className=\"mb-1 flex items-center gap-2\">\n                      <span className=\"text-sm font-bold text-slate-800\">W***</span>\n                      <span className=\"text-xs text-slate-500\">12F</span>\n                      <span className=\"text-xs text-yellow-500\"></span>\n                    </div>\n                    <p className=\"text-sm leading-relaxed text-slate-600\">\n                      \n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              {/*  */}\n              <div className=\"relative mt-3 overflow-hidden rounded-xl\">\n                <div className={`flex gap-3 bg-slate-50 p-3 ${!isLoggedIn ? 'select-none blur-sm' : ''}`}>\n                  <div className=\"flex size-10 shrink-0 items-center justify-center rounded-full bg-green-500 text-lg font-bold text-white\">\n                    L\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"mb-1 flex items-center gap-2\">\n                      <span className=\"text-sm font-bold text-slate-800\">L***</span>\n                      <span className=\"text-xs text-slate-500\">C</span>\n                      {isLoggedIn && <span className=\"text-xs text-yellow-500\"></span>}\n                    </div>\n                    <p className=\"text-sm text-slate-600\">\n                      {isLoggedIn \n                        ? ''\n                        : '...'}\n                    </p>\n                  </div>\n                </div>\n                \n                {/*  -  */}\n                {!isLoggedIn && (\n                  <div className=\"absolute inset-0 flex items-end justify-center bg-gradient-to-b from-transparent via-white/80 to-white pb-3\">\n                    <button \n                      onClick={() => {\n                        window.location.href = '/auth.html?redirect=community';\n                      }}\n                      className=\"flex items-center gap-2 rounded-full bg-[#003366] px-4 py-2 text-sm font-bold text-white shadow-lg transition-colors hover:bg-[#004488]\"\n                    >\n                      <Lock size={14} />\n                       6 \n                      <ChevronRight size={14} />\n                    </button>\n                  </div>\n                )}\n              </div>\n              \n              {/*  */}\n              <div className=\"mt-4 flex items-center justify-between border-t border-slate-100 pt-3\">\n                <p className=\"text-xs text-slate-500\">\n                   \n                </p>\n                <button \n                  onClick={() => window.location.href = '/maihouses/community-wall_mvp.html'}\n                  className=\"flex items-center gap-1 text-xs font-bold text-[#003366] hover:underline\"\n                >\n                  \n                  <ChevronRight size={12} />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Sidebar / Agent Card */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"sticky top-24 space-y-4\">\n              <AgentTrustCard \n                agent={property.agent} \n                onLineClick={() => openContactModal('sidebar')}\n                onCallClick={() => openContactModal('sidebar')}\n                onBookingClick={() => openContactModal('booking')}\n              />\n              \n              <div className=\"rounded-xl border border-blue-100 bg-blue-50 p-4\">\n                <h4 className=\"mb-2 flex items-center gap-2 text-sm font-bold text-[#003366]\">\n                  <Shield size={16} />\n                  \n                </h4>\n                <ul className=\"space-y-2\">\n                  <li className=\"flex items-center gap-2 text-xs text-slate-600\">\n                    <div className=\"size-1 rounded-full bg-blue-400\" />\n                    \n                  </li>\n                  <li className=\"flex items-center gap-2 text-xs text-slate-600\">\n                    <div className=\"size-1 rounded-full bg-blue-400\" />\n                    \n                  </li>\n                  <li className=\"flex items-center gap-2 text-xs text-slate-600\">\n                    <div className=\"size-1 rounded-full bg-blue-400\" />\n                    \n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/*  30 -  */}\n      <button \n        onClick={() => openContactModal('booking')}\n        className=\"fixed bottom-28 right-4 z-40 flex size-16 animate-bounce flex-col items-center justify-center rounded-full bg-orange-500 text-xs font-bold text-white shadow-2xl transition-transform hover:scale-110 hover:bg-orange-600 lg:bottom-8\"\n        style={{ animationDuration: '2s' }}\n      >\n        <Phone size={22} />\n        <span className=\"mt-0.5 text-[10px]\">30</span>\n      </button>\n\n      {/* Mobile Bottom Bar -  */}\n      <div className=\"pb-safe fixed inset-x-0 bottom-0 z-overlay border-t border-slate-100 bg-white p-3 lg:hidden\">\n        {/*  */}\n        <div className=\"mb-2 flex items-center justify-center gap-4 text-[10px] text-slate-500\">\n          <span className=\"flex items-center gap-1\">\n            <Shield size={10} className=\"text-green-500\" />\n            \n          </span>\n          <span className=\"flex items-center gap-1\">\n            <Eye size={10} className=\"text-blue-500\" />\n            {socialProof.currentViewers} \n          </span>\n          {socialProof.isHot && (\n            <span className=\"flex items-center gap-1 font-medium text-orange-500\">\n              <Flame size={10} />\n              \n            </span>\n          )}\n        </div>\n        \n        {/*  */}\n        <div className=\"flex gap-2\">\n          {/*  LINE*/}\n          <button \n            onClick={() => openContactModal('mobile_bar')}\n            className=\"flex flex-[4] items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3 font-bold text-white shadow-lg shadow-green-500/20\"\n          >\n            <MessageCircle size={20} />\n             LINE \n          </button>\n          \n          {/* */}\n          <button \n            onClick={() => openContactModal('booking')}\n            className=\"flex flex-[6] items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white shadow-lg shadow-blue-900/20\"\n          >\n            <Calendar size={20} />\n            \n          </button>\n        </div>\n      </div>\n\n      {/*  Modal */}\n      <ContactModal\n        isOpen={showContactModal}\n        onClose={() => setShowContactModal(false)}\n        propertyId={property.publicId}\n        propertyTitle={property.title}\n        agentId={getAgentId()}\n        agentName={property.agent?.name || ''}\n        source={contactSource}\n      />\n\n      {/* VIP  (S-Grade) */}\n      {showVipModal && (\n        <div \n          className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4\"\n          onClick={() => setShowVipModal(false)}\n        >\n          <div \n            className=\"animate-in zoom-in-95 w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl duration-300\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Header */}\n            <div className=\"mb-4 text-center\">\n              <div className=\"mx-auto mb-3 flex size-16 items-center justify-center rounded-full bg-gradient-to-br from-orange-400 to-red-500\">\n                <Flame size={32} className=\"text-white\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-slate-800\"></h3>\n              <p className=\"mt-1 text-sm text-slate-500\">\n                {vipReason || ' VIP '}\n              </p>\n            </div>\n\n            {/* Benefits */}\n            <div className=\"mb-4 space-y-2 rounded-xl bg-slate-50 p-4\">\n              <div className=\"flex items-center gap-2 text-sm\">\n                <CheckCircle size={16} className=\"shrink-0 text-green-500\" />\n                <span></span>\n              </div>\n              <div className=\"flex items-center gap-2 text-sm\">\n                <CheckCircle size={16} className=\"shrink-0 text-green-500\" />\n                <span></span>\n              </div>\n              <div className=\"flex items-center gap-2 text-sm\">\n                <CheckCircle size={16} className=\"shrink-0 text-green-500\" />\n                <span></span>\n              </div>\n            </div>\n\n            {/* CTA Buttons */}\n            <div className=\"space-y-2\">\n              <button\n                onClick={() => {\n                  tracker.trackLineClick();\n                  setShowVipModal(false);\n                  openContactModal('mobile_bar');\n                }}\n                className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3 font-bold text-white shadow-lg\"\n              >\n                <MessageCircle size={20} />\n                 LINE \n              </button>\n              <button\n                onClick={() => {\n                  tracker.trackCallClick();\n                  setShowVipModal(false);\n                  openContactModal('booking');\n                }}\n                className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white\"\n              >\n                <Calendar size={20} />\n                VIP \n              </button>\n              <button\n                onClick={() => setShowVipModal(false)}\n                className=\"w-full py-2 text-sm text-slate-400 hover:text-slate-600\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/*  FAB  */}\n      <button\n        onClick={() => setShowReportGenerator(true)}\n        className=\"group fixed bottom-24 right-4 z-40 flex size-14 items-center justify-center rounded-full bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white shadow-lg transition-all hover:scale-105 hover:shadow-xl\"\n        title=\"\"\n      >\n        <FileText size={24} />\n        <span className=\"absolute right-full mr-3 whitespace-nowrap rounded-lg bg-slate-800 px-3 py-1.5 text-sm font-medium text-white opacity-0 transition-opacity group-hover:opacity-100\">\n          \n        </span>\n      </button>\n\n      {/*  Modal */}\n      <ReportGenerator\n        property={{\n          id: property.id,\n          publicId: property.publicId,\n          title: property.title,\n          price: property.price,\n          address: property.address,\n          description: property.description,\n          images: property.images,\n          agent: {\n            id: property.agent.id,\n            name: property.agent.name,\n            avatarUrl: property.agent.avatarUrl,\n            company: property.agent.company,\n            trustScore: property.agent.trustScore,\n            reviewCount: property.agent.encouragementCount\n          }\n        }}\n        isOpen={showReportGenerator}\n        onClose={() => setShowReportGenerator(false)}\n      />\n    </div>\n  );\n};\n","/**\n *  (Smart Community Picker)\n * \n * \n * 1. \n * 2. \n * 3. \n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { Building2, Search, Plus, Check, Loader2, Home } from 'lucide-react';\nimport { computeAddressFingerprint } from '../../utils/address';\n\ninterface Community {\n  id: string;\n  name: string;\n  address?: string;\n  property_count?: number;\n  is_verified?: boolean;\n}\n\ninterface CommunityPickerProps {\n  value: string;\n  address: string;  // \n  onChange: (name: string, communityId?: string) => void;\n  className?: string;\n  required?: boolean;  // \n}\n\n// \nconst NO_COMMUNITY_OPTION = { id: 'NONE', name: '', address: '//' };\n\nexport function CommunityPicker({ value, address, onChange, className = '', required = false }: CommunityPickerProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(value);\n  const [suggestions, setSuggestions] = useState<Community[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedCommunity, setSelectedCommunity] = useState<Community | null>(null);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const searchIdRef = useRef<number>(0); // \n\n  // \n  const extractDistrict = (addr: string): string => {\n    const match = addr.match(/([^]+[])/);\n    return match?.[1] || '';\n  };\n\n  //  race condition \n  const searchCommunities = async (term: string, addr: string) => {\n    if (!term && !addr) {\n      setSuggestions([]);\n      return;\n    }\n\n    // \n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    abortControllerRef.current = new AbortController();\n    const currentSearchId = ++searchIdRef.current;\n\n    setLoading(true);\n    try {\n      const district = extractDistrict(addr);\n      const fingerprint = addr ? computeAddressFingerprint(addr) : '';\n      \n      //  1: \n      if (fingerprint) {\n        const { data: exactMatch } = await supabase\n          .from('communities')\n          .select('id, name, address, property_count, is_verified')\n          .eq('address_fingerprint', fingerprint)\n          .limit(1)\n          .abortSignal(abortControllerRef.current.signal);\n        \n        // \n        if (currentSearchId !== searchIdRef.current) return;\n        \n        if (exactMatch && exactMatch.length > 0) {\n          setSuggestions(exactMatch);\n          setLoading(false);\n          return;\n        }\n      }\n      \n      //  2: \n      let query = supabase\n        .from('communities')\n        .select('id, name, address, property_count, is_verified')\n        .limit(8); //  8 \n\n      if (term) {\n        query = query.ilike('name', `%${term}%`);\n      }\n      \n      if (district) {\n        query = query.eq('district', district);\n      }\n\n      const { data, error } = await query\n        .order('property_count', { ascending: false })\n        .abortSignal(abortControllerRef.current.signal);\n\n      // \n      if (currentSearchId !== searchIdRef.current) return;\n\n      if (error) throw error;\n      setSuggestions(data || []);\n    } catch (err: any) {\n      //  abort \n      if (err?.name === 'AbortError') return;\n      console.error(':', err);\n      setSuggestions([]);\n    } finally {\n      //  loading \n      if (currentSearchId === searchIdRef.current) {\n        setLoading(false);\n      }\n    }\n  };\n\n  // Debounce \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      searchCommunities(searchTerm, address);\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchTerm, address]);\n\n  //  AbortController\n  useEffect(() => {\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, []);\n\n  // \n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (wrapperRef.current && !wrapperRef.current.contains(e.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // \n  const handleSelect = (community: Community) => {\n    setSelectedCommunity(community);\n    setSearchTerm(community.name);\n    //  ID\n    const communityId = community.id === 'NONE' ? undefined : community.id;\n    onChange(community.name, communityId);\n    setIsOpen(false);\n  };\n\n  // \n  const handleSelectNoCommunity = () => {\n    setSelectedCommunity(NO_COMMUNITY_OPTION as Community);\n    setSearchTerm('');\n    onChange('', undefined);\n    setIsOpen(false);\n  };\n\n  // \n  const handleCreateNew = () => {\n    if (!searchTerm.trim()) return;\n    setSelectedCommunity(null);\n    onChange(searchTerm.trim(), undefined);\n    setIsOpen(false);\n  };\n\n  // \n  const isValidCommunityName = (name: string): { valid: boolean; reason?: string } => {\n    const trimmed = name.trim();\n    \n    // \n    if (trimmed.length < 2) {\n      return { valid: false, reason: '' };\n    }\n    \n    // \n    const genericWords = /^(||||||A|B|C|[A-Z]\\d*?)$/;\n    if (genericWords.test(trimmed)) {\n      return { valid: false, reason: '' };\n    }\n    \n    // \n    if (/^.*[]\\d+?$/.test(trimmed) && !/|||/.test(trimmed)) {\n      return { valid: false, reason: '' };\n    }\n    \n    // \n    if (/|||||/.test(trimmed)) {\n      return { valid: false, reason: '' };\n    }\n    \n    //   \n    if (/|||||||||||$/.test(trimmed)) {\n      return { valid: true };\n    }\n    \n    //  >= 3 \n    if (trimmed.length >= 3 && /^[\\u4e00-\\u9fa5\\d]+$/.test(trimmed)) {\n      return { valid: true };\n    }\n    \n    return { valid: false, reason: '' };\n  };\n\n  const nameValidation = isValidCommunityName(searchTerm);\n  const showCreateOption = searchTerm.trim() && \n    !suggestions.some(s => s.name === searchTerm.trim()) &&\n    nameValidation.valid;\n\n  return (\n    <div ref={wrapperRef} className={`relative ${className}`}>\n      {/*  */}\n      <div className=\"relative\">\n        <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">\n          <Building2 size={16} />\n        </div>\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => {\n            setSearchTerm(e.target.value);\n            setSelectedCommunity(null);\n            setIsOpen(true);\n          }}\n          onFocus={() => setIsOpen(true)}\n          placeholder=\"...\"\n          className={`\n            w-full rounded-xl border bg-slate-50 px-10 py-3 text-sm outline-none\n            focus:border-transparent focus:ring-2 focus:ring-[#003366]\n            ${selectedCommunity ? 'border-green-300 bg-green-50/50' : 'border-slate-200'}\n          `}\n        />\n        <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n          {loading ? (\n            <Loader2 size={16} className=\"animate-spin text-slate-400\" />\n          ) : selectedCommunity ? (\n            <Check size={16} className=\"text-green-600\" />\n          ) : (\n            <Search size={16} className=\"text-slate-400\" />\n          )}\n        </div>\n      </div>\n\n      {/*  */}\n      {selectedCommunity && selectedCommunity.name !== '' && (\n        <p className=\"mt-1 flex items-center gap-1 text-xs text-green-600\">\n          <Check size={12} />\n          {selectedCommunity.name}\n          {selectedCommunity.property_count ? ` (${selectedCommunity.property_count} )` : ''}\n        </p>\n      )}\n      {selectedCommunity && selectedCommunity.name === '' && (\n        <p className=\"mt-1 flex items-center gap-1 text-xs text-slate-500\">\n           /\n        </p>\n      )}\n      {!selectedCommunity && searchTerm && nameValidation.valid && (\n        <p className=\"mt-1 text-xs text-amber-600\">\n           {searchTerm.trim()}\n        </p>\n      )}\n      {!selectedCommunity && searchTerm && !nameValidation.valid && searchTerm.length >= 2 && (\n        <p className=\"mt-1 text-xs text-amber-600\">\n           {nameValidation.reason || ''}8\n        </p>\n      )}\n\n      {/*  */}\n      {isOpen && (\n        <div className=\"absolute z-dropdown mt-1 max-h-80 w-full overflow-hidden overflow-y-auto rounded-xl border border-slate-200 bg-white shadow-lg\">\n          {/*  -  */}\n          <button\n            onClick={handleSelectNoCommunity}\n            className=\"flex w-full items-center gap-3 border-b border-slate-100 bg-slate-50/50 px-4 py-3 text-left hover:bg-slate-50\"\n          >\n            <div className=\"flex size-8 shrink-0 items-center justify-center rounded-lg bg-slate-200\">\n              <Home size={16} className=\"text-slate-500\" />\n            </div>\n            <div>\n              <span className=\"font-medium text-slate-600\"></span>\n              <span className=\"ml-2 text-xs text-slate-400\"></span>\n            </div>\n          </button>\n\n          {/*  */}\n          {suggestions.map((community) => (\n            <button\n              key={community.id}\n              onClick={() => handleSelect(community)}\n              className=\"flex w-full items-start gap-3 border-b border-slate-100 px-4 py-3 text-left last:border-0 hover:bg-slate-50\"\n            >\n              <div className=\"flex size-8 shrink-0 items-center justify-center rounded-lg bg-blue-100\">\n                <Building2 size={16} className=\"text-blue-600\" />\n              </div>\n              <div className=\"min-w-0 flex-1\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"truncate font-medium text-slate-800\">{community.name}</span>\n                  {community.is_verified && (\n                    <span className=\"rounded bg-green-100 px-1.5 py-0.5 text-[10px] text-green-700\"></span>\n                  )}\n                </div>\n                {community.address && (\n                  <p className=\"truncate text-xs text-slate-500\">{community.address}</p>\n                )}\n                {community.property_count ? (\n                  <p className=\"text-xs text-slate-400\">{community.property_count} </p>\n                ) : null}\n              </div>\n            </button>\n          ))}\n\n          {/*  */}\n          {showCreateOption && (\n            <button\n              onClick={handleCreateNew}\n              className=\"flex w-full items-center gap-3 border-t border-amber-100 bg-amber-50/50 px-4 py-3 text-left hover:bg-amber-50\"\n            >\n              <div className=\"flex size-8 shrink-0 items-center justify-center rounded-lg bg-amber-500\">\n                <Plus size={16} className=\"text-white\" />\n              </div>\n              <div>\n                <span className=\"font-medium text-amber-700\"></span>\n                <span className=\"ml-1 text-amber-600\">{searchTerm.trim()}</span>\n                <p className=\"mt-0.5 text-xs text-amber-600\"> </p>\n              </div>\n            </button>\n          )}\n\n          {/*  */}\n          {suggestions.length === 0 && !showCreateOption && searchTerm.length >= 2 && !loading && (\n            <div className=\"px-4 py-6 text-center\">\n              <div className=\"mx-auto mb-3 flex size-12 items-center justify-center rounded-full bg-slate-100\">\n                <Search size={20} className=\"text-slate-400\" />\n              </div>\n              <p className=\"text-sm font-medium text-slate-600\"></p>\n              <p className=\"mt-1 text-xs text-slate-400\"></p>\n            </div>\n          )}\n\n          {/* Loading Skeleton */}\n          {loading && suggestions.length === 0 && (\n            <div className=\"space-y-3 p-4\">\n              {[1, 2, 3].map((i) => (\n                <div key={i} className=\"flex animate-pulse items-center gap-3\">\n                  <div className=\"size-8 rounded-lg bg-slate-200\" />\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"h-4 w-3/4 rounded bg-slate-200\" />\n                    <div className=\"h-3 w-1/2 rounded bg-slate-100\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default CommunityPicker;\n","/**\n * \n * \n * \n * \n */\n\n// \nconst SENSITIVE_WORDS = [\n  // \n  '', '', '', '', '', '',\n  // /\n  '', '', '', '',\n  // \n  '', '', '',\n];\n\n// \nconst AD_WORDS = [\n  'LINE', '', '', '', '',\n  '', 'bit.ly', 'tinyurl', '',\n  '', '', '',\n];\n\n// \nconst COMMUNITY_NAME_BLACKLIST = [\n  '', '', '', '', '', '',\n  '', '', '', '', '', '',\n  '', '', '', '',\n  'A', 'B', 'C', 'A', 'B', 'C',\n];\n\nexport interface ContentCheckResult {\n  passed: boolean;\n  issues: {\n    type: 'sensitive' | 'ad' | 'blacklist' | 'format';\n    word?: string;\n    message: string;\n  }[];\n}\n\n/**\n * \n */\nexport function checkContent(text: string): ContentCheckResult {\n  const issues: ContentCheckResult['issues'] = [];\n  const lowerText = text.toLowerCase();\n\n  // \n  for (const word of SENSITIVE_WORDS) {\n    if (text.includes(word)) {\n      issues.push({\n        type: 'sensitive',\n        word,\n        message: `${word}`,\n      });\n    }\n  }\n\n  // \n  for (const word of AD_WORDS) {\n    if (lowerText.includes(word.toLowerCase())) {\n      issues.push({\n        type: 'ad',\n        word,\n        message: `${word}`,\n      });\n    }\n  }\n\n  return {\n    passed: issues.length === 0,\n    issues,\n  };\n}\n\n/**\n * \n */\nexport function checkCommunityName(name: string): ContentCheckResult {\n  const issues: ContentCheckResult['issues'] = [];\n  const trimmed = name.trim();\n\n  // \n  if (trimmed.length < 2) {\n    issues.push({\n      type: 'format',\n      message: ' 2 ',\n    });\n  }\n\n  if (trimmed.length > 30) {\n    issues.push({\n      type: 'format',\n      message: ' 30 ',\n    });\n  }\n\n  // \n  for (const word of COMMUNITY_NAME_BLACKLIST) {\n    if (trimmed === word || new RegExp(`^${word}$`, 'i').test(trimmed)) {\n      issues.push({\n        type: 'blacklist',\n        word,\n        message: `${word}`,\n      });\n    }\n  }\n\n  // +\n  if (/^.*[]\\d+?$/.test(trimmed) && !/|||/.test(trimmed)) {\n    issues.push({\n      type: 'format',\n      message: '',\n    });\n  }\n\n  // \n  if (/^\\d+$/.test(trimmed)) {\n    issues.push({\n      type: 'format',\n      message: '',\n    });\n  }\n\n  // \n  if (/^[a-zA-Z\\s]+$/.test(trimmed) && trimmed.length < 5) {\n    issues.push({\n      type: 'format',\n      message: '',\n    });\n  }\n\n  // \n  for (const word of ['', '', '', '', '', '']) {\n    if (trimmed.includes(word)) {\n      issues.push({\n        type: 'ad',\n        word,\n        message: `${word}`,\n      });\n    }\n  }\n\n  return {\n    passed: issues.length === 0,\n    issues,\n  };\n}\n\n/**\n * \n */\nexport function checkPropertyReview(text: string, type: 'advantage' | 'disadvantage'): ContentCheckResult {\n  const issues: ContentCheckResult['issues'] = [];\n  const trimmed = text.trim();\n\n  // \n  const contentCheck = checkContent(trimmed);\n  issues.push(...contentCheck.issues);\n\n  // /\n  if (trimmed.length > 0 && trimmed.length < 3) {\n    issues.push({\n      type: 'format',\n      message: '',\n    });\n  }\n\n  // \n  if (/^[\"\"'']+$/.test(trimmed)) {\n    issues.push({\n      type: 'format',\n      message: '',\n    });\n  }\n\n  // \n  if (/(.)\\1{4,}/.test(trimmed)) {\n    issues.push({\n      type: 'format',\n      message: '',\n    });\n  }\n\n  return {\n    passed: issues.length === 0,\n    issues,\n  };\n}\n\nexport default {\n  checkContent,\n  checkCommunityName,\n  checkPropertyReview,\n};\n","/**\n * usePropertyFormValidation\n * \n *  Hook - \n * \n */\n\nimport { useState, useCallback, useMemo } from 'react';\nimport { checkContent, ContentCheckResult } from '../utils/contentCheck';\n\n// \nexport const VALIDATION_RULES = {\n  advantage: { minLength: 5, maxLength: 100 },\n  disadvantage: { minLength: 10, maxLength: 200 },\n  communityName: { minLength: 2 },\n  title: { minLength: 1, maxLength: 100 },\n  price: { minLength: 1 },\n  address: { minLength: 5, maxLength: 200 },\n  images: { minCount: 1, maxCount: 20, maxSizeMB: 10 },\n} as const;\n\n// \nexport const ALLOWED_IMAGE_TYPES = [\n  'image/jpeg',\n  'image/jpg', \n  'image/png',\n  'image/webp',\n  'image/heic',\n  'image/heif',\n] as const;\n\nexport const MAX_IMAGE_SIZE_BYTES = VALIDATION_RULES.images.maxSizeMB * 1024 * 1024;\n\nexport interface FormFields {\n  title: string;\n  price: string;\n  address: string;\n  communityName: string;\n  advantage1: string;\n  advantage2: string;\n  disadvantage: string;\n}\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport interface ValidationState {\n  // \n  title: { valid: boolean; message: string };\n  price: { valid: boolean; message: string };\n  address: { valid: boolean; message: string };\n  communityName: { valid: boolean; message: string };\n  advantage1: { valid: boolean; message: string; charCount: number; contentWarning?: string };\n  advantage2: { valid: boolean; message: string; charCount: number; contentWarning?: string };\n  disadvantage: { valid: boolean; message: string; charCount: number; contentWarning?: string };\n  images: { valid: boolean; message: string; count: number };\n  \n  // \n  adv1Valid: boolean;\n  adv2Valid: boolean;\n  disValid: boolean;\n  communityValid: boolean;\n  \n  // \n  basicValid: boolean;\n  twoGoodOneFairValid: boolean;\n  allValid: boolean;\n  canSubmit: boolean;\n  \n  // \n  contentCheck: {\n    hasIssues: boolean;\n    blockSubmit: boolean;\n    warnings: string[];\n  };\n  \n  // \n  errors: ValidationError[];\n}\n\nexport interface ImageValidationResult {\n  valid: boolean;\n  file: File;\n  error?: string;\n}\n\n/**\n * \n */\nexport function validateImage(file: File): ImageValidationResult {\n  // \n  if (!ALLOWED_IMAGE_TYPES.includes(file.type as any)) {\n    return {\n      valid: false,\n      file,\n      error: `${file.type || ''} JPGPNG  WebP`,\n    };\n  }\n\n  // \n  if (file.size > MAX_IMAGE_SIZE_BYTES) {\n    const sizeMB = (file.size / 1024 / 1024).toFixed(1);\n    return {\n      valid: false,\n      file,\n      error: `${sizeMB}MB ${VALIDATION_RULES.images.maxSizeMB}MB`,\n    };\n  }\n\n  return { valid: true, file };\n}\n\n/**\n * \n */\nexport function validateImages(files: File[]): {\n  validFiles: File[];\n  invalidFiles: ImageValidationResult[];\n  allValid: boolean;\n} {\n  const results = files.map(validateImage);\n  const validFiles = results.filter(r => r.valid).map(r => r.file);\n  const invalidFiles = results.filter(r => !r.valid);\n  \n  return {\n    validFiles,\n    invalidFiles,\n    allValid: invalidFiles.length === 0,\n  };\n}\n\n/**\n *  Hook\n */\nexport function usePropertyFormValidation(\n  form: FormFields,\n  imageCount: number\n): ValidationState {\n  \n  const validation = useMemo(() => {\n    const errors: ValidationError[] = [];\n    \n    // \n    const titleValid = form.title.length >= VALIDATION_RULES.title.minLength;\n    const titleMessage = titleValid ? '' : '';\n    if (!titleValid && form.title.length > 0) {\n      errors.push({ field: 'title', message: titleMessage });\n    }\n    \n    // \n    const priceValid = form.price.length >= VALIDATION_RULES.price.minLength && /^\\d+$/.test(form.price);\n    const priceMessage = !form.price ? '' : (!priceValid ? '' : '');\n    if (!priceValid && form.price.length > 0) {\n      errors.push({ field: 'price', message: priceMessage });\n    }\n    \n    // \n    const addressValid = form.address.length >= VALIDATION_RULES.address.minLength;\n    const addressMessage = form.address.length === 0 \n      ? '' \n      : (addressValid ? '' : ` ${VALIDATION_RULES.address.minLength} `);\n    if (!addressValid && form.address.length > 0) {\n      errors.push({ field: 'address', message: addressMessage });\n    }\n    \n    // \n    const communityValid = form.communityName === '' || \n      form.communityName.length >= VALIDATION_RULES.communityName.minLength;\n    const communityMessage = communityValid ? '' : '';\n    if (!communityValid && form.communityName.length > 0) {\n      errors.push({ field: 'communityName', message: communityMessage });\n    }\n    \n    // 1 \n    const adv1Length = form.advantage1.length;\n    const adv1Valid = adv1Length >= VALIDATION_RULES.advantage.minLength;\n    const adv1Message = adv1Valid \n      ? '' \n      : ` ${VALIDATION_RULES.advantage.minLength - adv1Length} `;\n    if (!adv1Valid && adv1Length > 0) {\n      errors.push({ field: 'advantage1', message: `1${adv1Message}` });\n    }\n    \n    // 2 \n    const adv2Length = form.advantage2.length;\n    const adv2Valid = adv2Length >= VALIDATION_RULES.advantage.minLength;\n    const adv2Message = adv2Valid \n      ? '' \n      : ` ${VALIDATION_RULES.advantage.minLength - adv2Length} `;\n    if (!adv2Valid && adv2Length > 0) {\n      errors.push({ field: 'advantage2', message: `2${adv2Message}` });\n    }\n    \n    //  \n    const disLength = form.disadvantage.length;\n    const disValid = disLength >= VALIDATION_RULES.disadvantage.minLength;\n    const disMessage = disValid \n      ? '' \n      : ` ${VALIDATION_RULES.disadvantage.minLength - disLength} `;\n    if (!disValid && disLength > 0) {\n      errors.push({ field: 'disadvantage', message: `${disMessage}` });\n    }\n    \n    //  - \n    const contentWarnings: string[] = [];\n    let blockByContent = false;\n    \n    const adv1ContentCheck = form.advantage1.length > 0 ? checkContent(form.advantage1) : null;\n    const adv2ContentCheck = form.advantage2.length > 0 ? checkContent(form.advantage2) : null;\n    const disContentCheck = form.disadvantage.length > 0 ? checkContent(form.disadvantage) : null;\n    \n    // \n    const adv1ContentWarning = (!adv1ContentCheck || adv1ContentCheck.passed) \n      ? undefined \n      : adv1ContentCheck.issues.map(i => i.message).join('');\n    \n    const adv2ContentWarning = (!adv2ContentCheck || adv2ContentCheck.passed) \n      ? undefined \n      : adv2ContentCheck.issues.map(i => i.message).join('');\n    \n    const disContentWarning = (!disContentCheck || disContentCheck.passed) \n      ? undefined \n      : disContentCheck.issues.map(i => i.message).join('');\n    \n    // \n    const hasSensitiveIssue = (result: ContentCheckResult | null): boolean => {\n      if (!result) return false;\n      return result.issues.some(i => i.type === 'sensitive');\n    };\n    \n    // \n    if (adv1ContentCheck && !adv1ContentCheck.passed) {\n      const warning = `1${adv1ContentWarning}`;\n      contentWarnings.push(warning);\n      if (hasSensitiveIssue(adv1ContentCheck)) {\n        blockByContent = true;\n        errors.push({ field: 'advantage1', message: adv1ContentWarning! });\n      }\n    }\n    \n    if (adv2ContentCheck && !adv2ContentCheck.passed) {\n      const warning = `2${adv2ContentWarning}`;\n      contentWarnings.push(warning);\n      if (hasSensitiveIssue(adv2ContentCheck)) {\n        blockByContent = true;\n        errors.push({ field: 'advantage2', message: adv2ContentWarning! });\n      }\n    }\n    \n    if (disContentCheck && !disContentCheck.passed) {\n      const warning = `${disContentWarning}`;\n      contentWarnings.push(warning);\n      if (hasSensitiveIssue(disContentCheck)) {\n        blockByContent = true;\n        errors.push({ field: 'disadvantage', message: disContentWarning! });\n      }\n    }\n    \n    // \n    const imagesValid = imageCount >= VALIDATION_RULES.images.minCount;\n    const imagesMessage = imagesValid ? '' : '';\n    if (!imagesValid) {\n      errors.push({ field: 'images', message: imagesMessage });\n    }\n    \n    // \n    const basicValid = titleValid && priceValid && addressValid && communityValid;\n    const twoGoodOneFairValid = adv1Valid && adv2Valid && disValid;\n    const allValid = basicValid && twoGoodOneFairValid && imagesValid;\n    \n    // block \n    const canSubmit = allValid && !blockByContent;\n    \n    return {\n      title: { valid: titleValid, message: titleMessage },\n      price: { valid: priceValid, message: priceMessage },\n      address: { valid: addressValid, message: addressMessage },\n      communityName: { valid: communityValid, message: communityMessage },\n      advantage1: { \n        valid: adv1Valid, \n        message: adv1Message, \n        charCount: adv1Length,\n        ...(adv1ContentWarning && { contentWarning: adv1ContentWarning }),\n      },\n      advantage2: { \n        valid: adv2Valid, \n        message: adv2Message, \n        charCount: adv2Length,\n        ...(adv2ContentWarning && { contentWarning: adv2ContentWarning }),\n      },\n      disadvantage: { \n        valid: disValid, \n        message: disMessage, \n        charCount: disLength,\n        ...(disContentWarning && { contentWarning: disContentWarning }),\n      },\n      images: { valid: imagesValid, message: imagesMessage, count: imageCount },\n      // \n      adv1Valid,\n      adv2Valid,\n      disValid,\n      communityValid,\n      // \n      basicValid,\n      twoGoodOneFairValid,\n      allValid,\n      canSubmit,\n      contentCheck: {\n        hasIssues: contentWarnings.length > 0,\n        blockSubmit: blockByContent,\n        warnings: contentWarnings,\n      },\n      errors,\n    } as ValidationState;\n  }, [form, imageCount]);\n  \n  return validation;\n}\n\nexport default usePropertyFormValidation;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\nimport { propertyService, PropertyFormInput } from '../services/propertyService';\nimport { CommunityPicker } from '../components/ui/CommunityPicker';\nimport { usePropertyFormValidation, validateImages, VALIDATION_RULES } from '../hooks/usePropertyFormValidation';\nimport { notify } from '../lib/notify';\nimport { \n  Loader2, Upload, X, Sparkles, ThumbsUp, ThumbsDown, \n  Download, Check, Home, MapPin, Shield, ArrowLeft, Building2, AlertTriangle, Edit3\n} from 'lucide-react';\n\n// \ninterface UploadResult {\n  public_id: string;\n  community_id: string | null;\n  community_name: string | null;\n  is_new_community: boolean;\n}\n\nexport const PropertyUploadPage: React.FC = () => {\n  const navigate = useNavigate();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  const [loading, setLoading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState<{ current: number; total: number } | null>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [imageFiles, setImageFiles] = useState<File[]>([]);\n  const [user, setUser] = useState<any>(null);\n  const [selectedCommunityId, setSelectedCommunityId] = useState<string | undefined>();\n  \n  // \n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const [form, setForm] = useState<PropertyFormInput>({\n    title: '', price: '', address: '', communityName: '', size: '', age: '', \n    floorCurrent: '', floorTotal: '', rooms: '3', halls: '2', bathrooms: '2', \n    type: '', description: '',\n    advantage1: '', advantage2: '', disadvantage: '',\n    sourceExternalId: ''\n  });\n\n  useEffect(() => {\n    supabase.auth.getUser().then(({ data }) => {\n      setUser(data.user);\n    });\n  }, []);\n\n  const handleInput = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  // \n  const handleCommunityChange = (name: string, communityId?: string) => {\n    setForm({ ...form, communityName: name });\n    setSelectedCommunityId(communityId);\n  };\n\n  //  Hook\n  const validation = usePropertyFormValidation(\n    {\n      title: form.title,\n      price: form.price,\n      address: form.address,\n      communityName: form.communityName,\n      advantage1: form.advantage1,\n      advantage2: form.advantage2,\n      disadvantage: form.disadvantage,\n    },\n    imageFiles.length\n  );\n\n  const canSubmit = validation.canSubmit;\n\n  // 591 \n  const handleImport591 = () => {\n    const url = prompt(' 591 ');\n    if(!url) return;\n    setLoading(true);\n    setTimeout(() => {\n      setForm(prev => ({ \n        ...prev, \n        title: '', \n        price: '2880', \n        address: '', \n        size: '45.2',\n        sourceExternalId: '591-MOCK-ID' \n      }));\n      setLoading(false);\n    }, 1000);\n  };\n\n  // \n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const files = Array.from(e.target.files);\n      \n      // \n      const { validFiles, invalidFiles, allValid } = validateImages(files);\n      \n      // \n      if (!allValid) {\n        invalidFiles.forEach(({ file, error }) => {\n          notify.warning(`${file.name} `, error || '', { duration: 5000 });\n        });\n      }\n      \n      // \n      if (validFiles.length > 0) {\n        setImageFiles(prev => [...prev, ...validFiles]);\n        const urls = validFiles.map(file => URL.createObjectURL(file));\n        setImages(prev => [...prev, ...urls]);\n      }\n    }\n  };\n\n  const removeImage = (index: number) => {\n    setImages(prev => prev.filter((_, i) => i !== index));\n    setImageFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // \n  const publish = async () => {\n    // \n    if (!validation.basicValid) {\n      notify.error(\n        '',\n        validation.errors\n          .filter(e => ['title', 'price', 'address', 'communityName'].includes(e.field))\n          .map(e => e.message)\n          .join('')\n      );\n      return;\n    }\n    if (!validation.twoGoodOneFairValid) {\n      notify.error(\n        '',\n        ` ${VALIDATION_RULES.advantage.minLength}  ${VALIDATION_RULES.disadvantage.minLength} `\n      );\n      return;\n    }\n    if (!validation.images.valid) {\n      notify.error('', '');\n      return;\n    }\n    \n    setLoading(true);\n    setUploadProgress({ current: 0, total: imageFiles.length });\n    \n    try {\n      // \n      const uploadResult = await propertyService.uploadImages(imageFiles, {\n        concurrency: 3,\n        onProgress: (current, total) => setUploadProgress({ current, total }),\n      });\n      \n      // \n      if (!uploadResult.allSuccess) {\n        const failedNames = uploadResult.failed.map(f => f.file.name).join('');\n        notify.warning('', `${failedNames} `, { duration: 5000 });\n      }\n      \n      // \n      if (uploadResult.urls.length === 0) {\n        throw new Error('');\n      }\n      \n      // \n      const result = await propertyService.createPropertyWithForm(form, uploadResult.urls, selectedCommunityId);\n      \n      //  Toast\n      notify.success(' ', `${result.public_id}`, { duration: 3000 });\n      \n      // \n      setUploadResult({\n        public_id: result.public_id,\n        community_id: result.community_id,\n        community_name: result.community_name || form.communityName,\n        is_new_community: !selectedCommunityId && result.community_id !== null\n      });\n      setShowConfirmation(true);\n      \n    } catch (e: any) {\n      console.error('Publish error:', e);\n      notify.error('', e?.message || '', {\n        actionLabel: '',\n        onAction: publish,\n        duration: 5500,\n      });\n    } finally {\n      setLoading(false);\n      setUploadProgress(null);\n    }\n  };\n\n  const inputClass = \"w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none text-sm\";\n\n  // ========================================\n  // \n  // ========================================\n  if (showConfirmation && uploadResult) {\n    return (\n      <div className=\"min-h-screen bg-[#f8fafc] font-sans text-slate-800\">\n        <nav className=\"sticky top-0 z-overlay flex h-16 items-center border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md\">\n          <div className=\"flex items-center gap-2 text-xl font-extrabold text-[#003366]\">\n            <div className=\"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white\">\n              <Home size={18} />\n            </div>\n            \n          </div>\n        </nav>\n\n        <main className=\"mx-auto max-w-lg p-6 py-12\">\n          {/*  */}\n          <div className=\"mb-8 text-center\">\n            <div className=\"mx-auto mb-4 flex size-20 items-center justify-center rounded-full bg-green-100\">\n              <Check size={40} className=\"text-green-600\" />\n            </div>\n            <h1 className=\"text-2xl font-bold text-slate-800\"> </h1>\n            <p className=\"mt-2 text-slate-500\">{uploadResult.public_id}</p>\n          </div>\n\n          {/*  */}\n          {uploadResult.community_name && uploadResult.community_name !== '' && (\n            <section className=\"mb-6 rounded-2xl border border-slate-100 bg-white p-5 shadow-sm\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"flex size-10 shrink-0 items-center justify-center rounded-xl bg-blue-100\">\n                  <Building2 size={20} className=\"text-blue-600\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"font-bold text-slate-800\"></h3>\n                  <p className=\"mt-1 text-lg font-medium text-[#003366]\">\n                    {uploadResult.community_name}\n                  </p>\n                  {uploadResult.is_new_community ? (\n                    <p className=\"mt-1 flex items-center gap-1 text-sm text-amber-600\">\n                      <AlertTriangle size={14} />\n                      \n                    </p>\n                  ) : (\n                    <p className=\"mt-1 flex items-center gap-1 text-sm text-green-600\">\n                      <Check size={14} />\n                      \n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/*  */}\n              {uploadResult.community_id && (\n                <Link \n                  to={`/community/${uploadResult.community_id}`}\n                  className=\"mt-4 block w-full rounded-xl bg-blue-50 py-2 text-center text-sm font-medium text-blue-600 transition hover:bg-blue-100\"\n                >\n                   \n                </Link>\n              )}\n            </section>\n          )}\n\n          {/*  */}\n          {uploadResult.community_name && uploadResult.community_name !== '' && (\n            <section className=\"mb-6 rounded-2xl border border-amber-200 bg-amber-50 p-4\">\n              <div className=\"flex items-center gap-2 text-amber-800\">\n                <AlertTriangle size={18} />\n                <span className=\"font-medium\"></span>\n              </div>\n              <p className=\"mt-2 text-sm text-amber-700\">\n                \n              </p>\n              <button\n                onClick={() => {\n                  // \n                  navigate(`/property/${uploadResult.public_id}/edit?fix=community`);\n                }}\n                className=\"mt-3 flex w-full items-center justify-center gap-2 rounded-xl bg-amber-100 py-2 text-sm font-medium text-amber-800 transition hover:bg-amber-200\"\n              >\n                <Edit3 size={16} />\n                \n              </button>\n            </section>\n          )}\n\n          {/*  */}\n          <div className=\"space-y-3\">\n            <Link\n              to={`/property/${uploadResult.public_id}`}\n              className=\"block w-full rounded-xl bg-gradient-to-r from-[#003366] to-[#00A8E8] py-4 text-center font-bold text-white shadow-lg\"\n            >\n              \n            </Link>\n            <button\n              onClick={() => {\n                setShowConfirmation(false);\n                setUploadResult(null);\n                // \n                setForm({\n                  title: '', price: '', address: '', communityName: '', size: '', age: '', \n                  floorCurrent: '', floorTotal: '', rooms: '3', halls: '2', bathrooms: '2', \n                  type: '', description: '',\n                  advantage1: '', advantage2: '', disadvantage: '',\n                  sourceExternalId: ''\n                });\n                setImages([]);\n                setImageFiles([]);\n                setSelectedCommunityId(undefined);\n              }}\n              className=\"block w-full rounded-xl bg-slate-100 py-3 text-center font-medium text-slate-600 transition hover:bg-slate-200\"\n            >\n              \n            </button>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#f8fafc] font-sans text-slate-800\">\n      {/* Header */}\n      <nav className=\"sticky top-0 z-overlay flex h-16 items-center justify-between border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={() => navigate(-1)} className=\"rounded-full p-2 transition-colors hover:bg-slate-100\">\n            <ArrowLeft size={20} className=\"text-slate-600\" />\n          </button>\n          <div className=\"flex items-center gap-2 text-xl font-extrabold text-[#003366]\">\n            <div className=\"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white\">\n              <Home size={18} />\n            </div>\n            \n          </div>\n        </div>\n        \n        <button onClick={handleImport591} disabled={loading} className=\"flex items-center gap-1 rounded-lg border border-blue-100 bg-blue-50 px-3 py-1.5 text-xs font-bold text-[#00A8E8] hover:bg-blue-100\">\n          {loading ? <Loader2 size={12} className=\"animate-spin\"/> : <Download size={12}/>}\n          591 \n        </button>\n      </nav>\n\n      <main className=\"mx-auto max-w-2xl space-y-5 p-4 pb-32\">\n        \n        {/*  1:  */}\n        <section className=\"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm\">\n          <h2 className=\"mb-4 flex items-center gap-2 text-lg font-bold text-[#003366]\">\n            <Home size={18}/> \n          </h2>\n          \n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"mb-1 block text-xs font-medium text-slate-600\"> *</label>\n              <input name=\"title\" value={form.title} onChange={handleInput} className={inputClass + \" font-bold\"} placeholder=\"101\" />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"> () *</label>\n                <input name=\"price\" type=\"number\" value={form.price} onChange={handleInput} className={inputClass} placeholder=\"0\" />\n              </div>\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"> *</label>\n                <input name=\"address\" value={form.address} onChange={handleInput} className={inputClass} placeholder=\"...\" />\n              </div>\n            </div>\n\n            {/*  -  */}\n            <div>\n              <label className=\"mb-1 block text-xs font-medium text-slate-600\">\n                 * <span className=\"text-slate-400\">(/)</span>\n              </label>\n              <CommunityPicker\n                value={form.communityName}\n                address={form.address}\n                onChange={handleCommunityChange}\n                required={true}\n              />\n              {!validation.communityValid && form.communityName.length > 0 && (\n                <p className=\"mt-1 text-[10px] text-red-500\">\n                  2\n                </p>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-3\">\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n                <input name=\"size\" type=\"number\" value={form.size} onChange={handleInput} className={inputClass} placeholder=\"0\" />\n              </div>\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n                <input name=\"age\" type=\"number\" value={form.age} onChange={handleInput} className={inputClass} placeholder=\"0\" />\n              </div>\n              <div className=\"col-span-2\">\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n                <select name=\"type\" value={form.type} onChange={handleInput} className={inputClass}>\n                  <option></option>\n                  <option></option>\n                  <option></option>\n                  <option></option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n                <input name=\"rooms\" type=\"number\" value={form.rooms} onChange={handleInput} className={inputClass} />\n              </div>\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n                <input name=\"halls\" type=\"number\" value={form.halls} onChange={handleInput} className={inputClass} />\n              </div>\n              <div>\n                <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n                <input name=\"bathrooms\" type=\"number\" value={form.bathrooms} onChange={handleInput} className={inputClass} />\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/*  2:  */}\n        <section className=\"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm\">\n          <div className=\"mb-4 flex items-center gap-2\">\n            <Shield className=\"text-orange-500\" size={20} />\n            <div>\n              <h2 className=\"text-lg font-bold text-[#003366]\"></h2>\n              <p className=\"text-xs text-slate-500\"></p>\n            </div>\n          </div>\n\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"mb-1 flex items-center gap-1.5 text-xs font-medium text-green-700\">\n                <ThumbsUp size={14}/>  1 ( 5 )\n              </label>\n              <input \n                name=\"advantage1\" \n                value={form.advantage1} \n                onChange={handleInput} \n                className={inputClass + (validation.adv1Valid ? ' border-green-300 bg-green-50/50' : '') + (validation.advantage1.contentWarning ? ' border-red-300' : '')} \n                placeholder=\"\" \n              />\n              <div className=\"mt-0.5 flex items-center justify-between\">\n                <span className={\"text-xs \" + (validation.adv1Valid ? 'text-green-600' : 'text-slate-400')}>\n                  {form.advantage1.length}/5  {validation.adv1Valid && ''}\n                </span>\n                {validation.advantage1.contentWarning && (\n                  <span className=\"flex items-center gap-1 text-xs text-red-500\">\n                    <AlertTriangle size={12} /> {validation.advantage1.contentWarning}\n                  </span>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"mb-1 flex items-center gap-1.5 text-xs font-medium text-green-700\">\n                <ThumbsUp size={14}/>  2 ( 5 )\n              </label>\n              <input \n                name=\"advantage2\" \n                value={form.advantage2} \n                onChange={handleInput} \n                className={inputClass + (validation.adv2Valid ? ' border-green-300 bg-green-50/50' : '') + (validation.advantage2.contentWarning ? ' border-red-300' : '')} \n                placeholder=\"\" \n              />\n              <div className=\"mt-0.5 flex items-center justify-between\">\n                <span className={\"text-xs \" + (validation.adv2Valid ? 'text-green-600' : 'text-slate-400')}>\n                  {form.advantage2.length}/5  {validation.adv2Valid && ''}\n                </span>\n                {validation.advantage2.contentWarning && (\n                  <span className=\"flex items-center gap-1 text-xs text-red-500\">\n                    <AlertTriangle size={12} /> {validation.advantage2.contentWarning}\n                  </span>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"mb-1 flex items-center gap-1.5 text-xs font-medium text-orange-700\">\n                <ThumbsDown size={14}/>  ( 10 )\n              </label>\n              <input \n                name=\"disadvantage\" \n                value={form.disadvantage} \n                onChange={handleInput} \n                className={inputClass + (validation.disValid ? ' border-orange-300 bg-orange-50/50' : '') + (validation.disadvantage.contentWarning ? ' border-red-300' : '')} \n                placeholder=\"\" \n              />\n              <div className=\"mt-0.5 flex items-center justify-between\">\n                <span className={\"text-xs \" + (validation.disValid ? 'text-orange-600' : 'text-red-400')}>\n                  {form.disadvantage.length}/10  {validation.disValid ? '' : '()'}\n                </span>\n                {validation.disadvantage.contentWarning && (\n                  <span className=\"flex items-center gap-1 text-xs text-red-500\">\n                    <AlertTriangle size={12} /> {validation.disadvantage.contentWarning}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/*  */}\n          {validation.contentCheck.hasIssues && (\n            <div className={`mt-4 flex items-start gap-2 rounded-lg p-3 ${validation.contentCheck.blockSubmit ? 'border border-red-200 bg-red-50' : 'border border-yellow-200 bg-yellow-50'}`}>\n              <AlertTriangle className={validation.contentCheck.blockSubmit ? 'text-red-500' : 'text-yellow-600'} size={18} />\n              <div>\n                <p className={`text-sm font-medium ${validation.contentCheck.blockSubmit ? 'text-red-700' : 'text-yellow-700'}`}>\n                  {validation.contentCheck.blockSubmit ? '' : ''}\n                </p>\n                <ul className=\"mt-1 space-y-0.5 text-xs text-slate-600\">\n                  {validation.contentCheck.warnings.map((w, i) => (\n                    <li key={i}> {w}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          )}\n        </section>\n\n        {/*  3:  */}\n        <section className=\"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm\">\n          <h2 className=\"mb-4 flex items-center gap-2 text-lg font-bold text-[#003366]\">\n            <Sparkles size={18} className=\"text-yellow-500\"/> \n          </h2>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"mb-1 block text-xs font-medium text-slate-600\"></label>\n              <textarea \n                name=\"description\" \n                value={form.description} \n                onChange={handleInput} \n                rows={4} \n                className={inputClass + \" resize-none\"}\n                placeholder=\"...\" \n              />\n            </div>\n\n            <div>\n              <label className=\"mb-2 block text-xs font-medium text-slate-600\">\n                 * <span className=\"text-slate-400\">( 1 )</span>\n              </label>\n              <div className=\"grid grid-cols-4 gap-3\">\n                {images.map((url, i) => (\n                  <div key={i} className=\"group relative aspect-square overflow-hidden rounded-xl border border-slate-200\">\n                    <img src={url} alt=\"\" className=\"size-full object-cover\"/>\n                    <button \n                      onClick={() => removeImage(i)} \n                      className=\"absolute right-1 top-1 rounded-full bg-red-500 p-1 text-white opacity-0 transition group-hover:opacity-100\"\n                    >\n                      <X size={12}/>\n                    </button>\n                    {i === 0 && (\n                      <span className=\"absolute bottom-1 left-1 rounded bg-[#003366] px-1.5 py-0.5 text-[10px] text-white\">\n                        \n                      </span>\n                    )}\n                  </div>\n                ))}\n                <button \n                  onClick={() => fileInputRef.current?.click()} \n                  className=\"flex aspect-square flex-col items-center justify-center rounded-xl border-2 border-dashed border-slate-300 text-slate-400 transition-colors hover:border-[#00A8E8] hover:text-[#00A8E8]\"\n                >\n                  <Upload size={24}/>\n                  <span className=\"mt-1 text-xs\"></span>\n                </button>\n                <input type=\"file\" multiple ref={fileInputRef} onChange={handleFileSelect} className=\"hidden\" accept=\"image/*\" />\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/*  */}\n        {(form.title || form.price || images.length > 0) && (\n          <section className=\"rounded-2xl border border-slate-200 bg-slate-50 p-4\">\n            <h3 className=\"mb-3 flex items-center gap-2 text-sm font-bold text-slate-500\">\n              <MapPin size={14}/> \n            </h3>\n            <div className=\"overflow-hidden rounded-xl border border-slate-200 bg-white\">\n              {images.length > 0 && (\n                <div className=\"aspect-video\">\n                  <img src={images[0]} alt=\"\" className=\"size-full object-cover\"/>\n                </div>\n              )}\n              <div className=\"p-4\">\n                <h4 className=\"font-bold text-slate-900\">{form.title || ''}</h4>\n                <p className=\"mt-1 text-xs text-slate-500\">{form.address || ''}</p>\n                <div className=\"mt-2 flex items-baseline gap-1\">\n                  <span className=\"text-xl font-extrabold text-[#003366]\">{form.price || '0'}</span>\n                  <span className=\"text-sm text-slate-500\"></span>\n                </div>\n                <div className=\"mt-2 flex flex-wrap gap-1\">\n                  {[form.type, form.size && (form.size + ''), form.rooms + '' + form.halls + '' + form.bathrooms + ''].filter(Boolean).map((tag, i) => (\n                    <span key={i} className=\"rounded-full bg-blue-50 px-2 py-0.5 text-xs text-[#003366]\">{tag}</span>\n                  ))}\n                </div>\n                {/*  */}\n                {form.communityName && (\n                  <div className=\"mt-3 border-t border-slate-100 pt-2 text-xs text-slate-500\">\n                    <span className=\"flex items-center gap-1\">\n                       \n                      <span className={selectedCommunityId ? 'font-medium text-green-600' : 'font-medium text-blue-600'}>\n                        {form.communityName}\n                      </span>\n                      {selectedCommunityId ? (\n                        <span className=\"text-green-600\"></span>\n                      ) : (\n                        <span className=\"text-blue-600\"></span>\n                      )}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </section>\n        )}\n\n      </main>\n\n      {/*  */}\n      <div className=\"fixed inset-x-0 bottom-0 z-overlay border-t border-slate-100 bg-white p-4\">\n        <div className=\"mx-auto max-w-2xl\">\n          <button \n            onClick={publish} \n            disabled={loading || !canSubmit}\n            className={\"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all \" +\n              (canSubmit \n                ? 'bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg shadow-blue-900/20 hover:scale-[1.01]' \n                : 'bg-slate-200 text-slate-400 cursor-not-allowed'\n              )}\n          >\n            {loading ? <Loader2 className=\"animate-spin\" size={20}/> : <Check size={20}/>}\n            {loading ? '...' : canSubmit ? '' : ''}\n          </button>\n          \n          {!canSubmit && (\n            <div className=\"mt-2 flex justify-center gap-4 text-xs text-slate-400\">\n              <span className={validation.basicValid ? 'text-green-600' : ''}>\n                {validation.basicValid ? ' ' : ' '}\n              </span>\n              <span className={validation.twoGoodOneFairValid ? 'text-green-600' : ''}>\n                {validation.twoGoodOneFairValid ? ' ' : ' '}\n              </span>\n              <span className={imageFiles.length > 0 ? 'text-green-600' : ''}>\n                {imageFiles.length > 0 ? ' ' : ' '}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n *  - \n * \n * \n * 1. \n * 2. /\n * 3.  community_id\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\nimport { CommunityPicker } from '../components/ui/CommunityPicker';\nimport { \n  Loader2, ArrowLeft, Home, Building2, Check, AlertTriangle, Save\n} from 'lucide-react';\n\ninterface PropertyData {\n  id: string;\n  public_id: string;\n  title: string;\n  address: string;\n  community_id: string | null;\n  community_name: string | null;\n}\n\nexport const PropertyEditPage: React.FC = () => {\n  const { publicId } = useParams<{ publicId: string }>();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  \n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [property, setProperty] = useState<PropertyData | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  \n  // \n  const [newCommunityName, setNewCommunityName] = useState('');\n  const [newCommunityId, setNewCommunityId] = useState<string | undefined>();\n  const [hasChanges, setHasChanges] = useState(false);\n\n  // \n  const isFixCommunityMode = searchParams.get('fix') === 'community';\n\n  // \n  useEffect(() => {\n    const loadProperty = async () => {\n      if (!publicId) return;\n      \n      try {\n        const { data, error } = await supabase\n          .from('properties')\n          .select('id, public_id, title, address, community_id, community_name')\n          .eq('public_id', publicId)\n          .single();\n\n        if (error) throw error;\n        \n        setProperty(data);\n        setNewCommunityName(data.community_name || '');\n        setNewCommunityId(data.community_id || undefined);\n      } catch (e: any) {\n        setError('' + e.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadProperty();\n  }, [publicId]);\n\n  // \n  const handleCommunityChange = (name: string, communityId?: string) => {\n    setNewCommunityName(name);\n    setNewCommunityId(communityId);\n    setHasChanges(\n      name !== property?.community_name || \n      communityId !== property?.community_id\n    );\n  };\n\n  // \n  const handleSave = async () => {\n    if (!property || !hasChanges) return;\n    \n    setSaving(true);\n    try {\n      const { error } = await supabase\n        .from('properties')\n        .update({\n          community_id: newCommunityId || null,\n          community_name: newCommunityName || null\n        })\n        .eq('id', property.id);\n\n      if (error) throw error;\n\n      // \n      navigate(`/property/${publicId}`, {\n        state: { message: '' }\n      });\n    } catch (e: any) {\n      setError('' + e.message);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-[#f8fafc]\">\n        <Loader2 className=\"animate-spin text-[#003366]\" size={40} />\n      </div>\n    );\n  }\n\n  if (error || !property) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-[#f8fafc]\">\n        <div className=\"text-center\">\n          <AlertTriangle size={48} className=\"mx-auto mb-4 text-red-500\" />\n          <p className=\"text-red-600\">{error || ''}</p>\n          <button\n            onClick={() => navigate(-1)}\n            className=\"mt-4 text-blue-600 underline\"\n          >\n            \n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#f8fafc] font-sans text-slate-800\">\n      {/* Header */}\n      <nav className=\"sticky top-0 z-overlay flex h-16 items-center border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md\">\n        <button \n          onClick={() => navigate(-1)} \n          className=\"mr-3 rounded-full p-2 transition-colors hover:bg-slate-100\"\n        >\n          <ArrowLeft size={20} className=\"text-slate-600\" />\n        </button>\n        <div className=\"flex items-center gap-2 text-xl font-extrabold text-[#003366]\">\n          <div className=\"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white\">\n            <Home size={18} />\n          </div>\n          {isFixCommunityMode ? '' : ''}\n        </div>\n      </nav>\n\n      <main className=\"mx-auto max-w-lg p-6 py-8\">\n        {/*  */}\n        <section className=\"mb-6 rounded-2xl border border-slate-100 bg-white p-5 shadow-sm\">\n          <h2 className=\"mb-2 font-bold text-slate-800\">{property.title}</h2>\n          <p className=\"text-sm text-slate-500\">{property.address}</p>\n          <p className=\"mt-1 text-xs text-slate-400\">{property.public_id}</p>\n        </section>\n\n        {/*  */}\n        <section className=\"mb-6 rounded-2xl border border-slate-100 bg-white p-5 shadow-sm\">\n          <div className=\"mb-4 flex items-center gap-2\">\n            <Building2 className=\"text-blue-600\" size={20} />\n            <h3 className=\"font-bold text-slate-800\"></h3>\n          </div>\n\n          {/*  */}\n          <div className=\"mb-4 rounded-xl bg-slate-50 p-3\">\n            <p className=\"mb-1 text-xs text-slate-500\"></p>\n            <p className=\"font-medium text-slate-700\">\n              {property.community_name || ''}\n            </p>\n          </div>\n\n          {/*  */}\n          <div>\n            <label className=\"mb-2 block text-xs font-medium text-slate-600\">\n              \n            </label>\n            <CommunityPicker\n              value={newCommunityName}\n              address={property.address}\n              onChange={handleCommunityChange}\n              required={true}\n            />\n          </div>\n\n          {/*  */}\n          {hasChanges && (\n            <div className=\"mt-4 rounded-xl border border-amber-200 bg-amber-50 p-3\">\n              <p className=\"flex items-center gap-2 text-sm text-amber-700\">\n                <AlertTriangle size={16} />\n                \n                <span className=\"font-medium\">{newCommunityName || ''}</span>\n              </p>\n            </div>\n          )}\n        </section>\n\n        {/*  */}\n        <button\n          onClick={handleSave}\n          disabled={!hasChanges || saving}\n          className={`\n            flex w-full items-center justify-center gap-2 rounded-xl py-4 text-lg font-bold transition-all\n            ${hasChanges && !saving\n              ? 'bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg hover:scale-[1.01]'\n              : 'cursor-not-allowed bg-slate-200 text-slate-400'\n            }\n          `}\n        >\n          {saving ? (\n            <>\n              <Loader2 className=\"animate-spin\" size={20} />\n              ...\n            </>\n          ) : (\n            <>\n              <Save size={20} />\n              {hasChanges ? '' : ''}\n            </>\n          )}\n        </button>\n\n        {/*  */}\n        <button\n          onClick={() => navigate(-1)}\n          className=\"mt-3 w-full rounded-xl bg-slate-100 py-3 font-medium text-slate-600 transition hover:bg-slate-200\"\n        >\n          \n        </button>\n      </main>\n    </div>\n  );\n};\n\nexport default PropertyEditPage;\n","import { useEffect, useState } from 'react'\nimport { Routes, Route, useLocation } from 'react-router-dom'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools'\nimport { Toaster } from 'sonner'\nimport { getConfig, type AppConfig, type RuntimeOverrides } from './app/config'\nimport DevTools from './app/devtools'\nimport { trackEvent } from './services/analytics'\nimport Home from './pages/Home'\nimport Wall from './pages/Community/Wall'\nimport Suggested from './pages/Community/Suggested'\nimport Detail from './pages/Property/Detail'\nimport AssureDetail from './pages/Assure/Detail'\nimport ChatStandalone from './pages/Chat/Standalone'\nimport ErrorBoundary from './app/ErrorBoundary'\nimport { QuietModeProvider } from './context/QuietModeContext'\nimport { MoodProvider } from './context/MoodContext'\nimport { CookieConsent } from './components/CookieConsent'\n\nimport UAGPage from './pages/UAG'\nimport { PropertyDetailPage } from './pages/PropertyDetailPage'\nimport { PropertyUploadPage } from './pages/PropertyUploadPage'\nimport { PropertyEditPage } from './pages/PropertyEditPage'\nimport { ReportPage } from './pages/Report'\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60 * 5, // 5 minutes\n      retry: 1,\n    },\n  },\n})\n\nexport default function App() {\n  const [config, setConfig] = useState<(AppConfig & RuntimeOverrides) | null>(null)\n  const loc = useLocation()\n\n  useEffect(() => {\n    getConfig().then(setConfig)\n  }, [])\n\n  useEffect(() => {\n    if (config) trackEvent('page_view', loc.pathname)\n  }, [loc, config])\n\n  if (!config) {\n    return (\n      <div className=\"p-6 text-sm text-[var(--text-secondary)]\"></div>\n    )\n  }\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <QuietModeProvider>\n        <MoodProvider>\n          <Toaster\n            position=\"top-right\"\n            theme=\"light\"\n            richColors\n            closeButton\n            toastOptions={{ duration: 3200 }}\n          />\n          <Routes key={loc.pathname}>\n          <Route\n            path=\"/\"\n            element={\n              <ErrorBoundary>\n                <Home config={config} />\n              </ErrorBoundary>\n            }\n          />\n          {/* \n             basename  /maihouses/\n             /maihouses \n             /maihouses/maihouses \n          */}\n        <Route\n          path=\"/uag\"\n          element={\n            <UAGPage />\n          }\n        />\n        <Route\n          path=\"/community/:id/wall\"\n          element={\n            <ErrorBoundary>\n              <Wall />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/community/suggested\"\n          element={\n            <ErrorBoundary>\n              <Suggested />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/property/upload\"\n          element={\n            <ErrorBoundary>\n              <PropertyUploadPage />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/property/:publicId/edit\"\n          element={\n            <ErrorBoundary>\n              <PropertyEditPage />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/property/:id\"\n          element={\n            <ErrorBoundary>\n              <PropertyDetailPage />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/p/:id\"\n          element={\n            <ErrorBoundary>\n              <Detail />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/maihouses/trust/room\"\n          element={\n            <ErrorBoundary>\n              <AssureDetail />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/assure\"\n          element={\n            <ErrorBoundary>\n              <AssureDetail />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/chat\"\n          element={\n            <ErrorBoundary>\n              <ChatStandalone />\n            </ErrorBoundary>\n          }\n        />\n        <Route\n          path=\"/r/:id\"\n          element={\n            <ErrorBoundary>\n              <ReportPage />\n            </ErrorBoundary>\n          }\n        />\n      </Routes>\n      {import.meta.env.DEV && (\n        <ReactQueryDevtools initialIsOpen={false} />\n      )}\n      {config.devtools === '1' && <DevTools config={config} />}\n      <CookieConsent />\n        </MoodProvider>\n      </QuietModeProvider>\n    </QueryClientProvider>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App'\nimport './index.css'\n\nconst rootElement = document.getElementById('root');\nif (rootElement) {\n  //  basename /maihouses \n  //  https://.../maihouses/property/1  https://.../property/1\n  const basename = window.location.pathname.startsWith('/maihouses') \n    ? '/maihouses' \n    : '/';\n\n  ReactDOM.createRoot(rootElement).render(\n    <React.StrictMode>\n      <BrowserRouter basename={basename}>\n        <App />\n      </BrowserRouter>\n    </React.StrictMode>\n  );\n}\n"],"file":"assets/index-CW3T07jt.js"}