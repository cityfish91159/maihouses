const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BZqDonbH.js","assets/react-vendor-C7_UqiMA.js","assets/ui-libs-DdU-WtIB.js","assets/supabase-CWJqd-iF.js"])))=>i.map(i=>d[i]);
var pn=e=>{throw TypeError(e)};var tr=(e,t,r)=>t.has(e)||pn("Cannot "+r);var m=(e,t,r)=>(tr(e,t,"read from private field"),r?r.call(e):t.get(e)),F=(e,t,r)=>t.has(e)?pn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),M=(e,t,r,n)=>(tr(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),U=(e,t,r)=>(tr(e,t,"access private method"),r);var ys=(e,t,r,n)=>({set _(a){M(e,t,a,r)},get _(){return m(e,t,n)}});import{r as p,a as ko,R as Qt,u as La,L as ur,b as Oa,c as Fa,d as So,e as Co,f as Ee,B as zo}from"./react-vendor-C7_UqiMA.js";import{L as fn,a as xn,U as gn,X as Gt,M as Io,S as Da,P as ot,b as Eo,H as Ua,c as Po,d as To,K as Mo,C as $o,e as Ao,A as Ro,f as Za,E as Ws,g as qr,B as hr,D as Vs,h as Lo,i as hs,j as at,k as Hr,l as Ba,m as Oo,z as re,Z as mr,F as qa,R as Fo,n as Do,o as Uo,p as Ha,q as De,I as Zo,r as $e,s as Bo,t as qo,u as dt,v as $s,w as Wa,x as lt,y as Ps,G as Ce,J as Ho,N as Wo,O as _t,Q as Vo,T as pr,V as bn,W as fr,Y as Qs,_ as Qo,$ as As,a0 as xr,a1 as Rs,a2 as Ls,a3 as Go,a4 as Va,a5 as Ko,a6 as Qa,a7 as Jo,a8 as sr,a9 as Yo,aa as Xo,ab as el}from"./ui-libs-DdU-WtIB.js";import{c as tl}from"./supabase-CWJqd-iF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ga={exports:{}},Gs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=p,rl=Symbol.for("react.element"),nl=Symbol.for("react.fragment"),al=Object.prototype.hasOwnProperty,il=sl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ol={key:!0,ref:!0,__self:!0,__source:!0};function Ka(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)al.call(t,n)&&!ol.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:rl,type:e,key:i,ref:o,props:a,_owner:il.current}}Gs.Fragment=nl;Gs.jsx=Ka;Gs.jsxs=Ka;Ga.exports=Gs;var s=Ga.exports,gr={},vn=ko;gr.createRoot=vn.createRoot,gr.hydrateRoot=vn.hydrateRoot;var Kt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ll={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ke,Br,Sa,cl=(Sa=class{constructor(){F(this,Ke,ll);F(this,Br,!1)}setTimeoutProvider(e){M(this,Ke,e)}setTimeout(e,t){return m(this,Ke).setTimeout(e,t)}clearTimeout(e){m(this,Ke).clearTimeout(e)}setInterval(e,t){return m(this,Ke).setInterval(e,t)}clearInterval(e){m(this,Ke).clearInterval(e)}},Ke=new WeakMap,Br=new WeakMap,Sa),ht=new cl;function dl(e){setTimeout(e,0)}var Nt=typeof window>"u"||"Deno"in globalThis;function ge(){}function ul(e,t){return typeof e=="function"?e(t):e}function br(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ja(e,t){return Math.max(e+(t||0)-Date.now(),0)}function it(e,t){return typeof e=="function"?e(t):e}function Se(e,t){return typeof e=="function"?e(t):e}function yn(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Wr(o,t.options))return!1}else if(!rs(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function jn(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(kt(t.options.mutationKey)!==kt(i))return!1}else if(!rs(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Wr(e,t){return((t==null?void 0:t.queryKeyHashFn)||kt)(e)}function kt(e){return JSON.stringify(e,(t,r)=>vr(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function rs(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>rs(e[r],t[r])):!1}var hl=Object.prototype.hasOwnProperty;function Ya(e,t){if(e===t)return e;const r=wn(e)&&wn(t);if(!r&&!(vr(e)&&vr(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],h=e[u],f=t[u];if(h===f){l[u]=h,(r?d<a:hl.call(e,u))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[u]=f;continue}const x=Ya(h,f);l[u]=x,x===h&&c++}return a===o&&c===a?e:l}function Os(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function wn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vr(e){if(!_n(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!_n(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _n(e){return Object.prototype.toString.call(e)==="[object Object]"}function ml(e){return new Promise(t=>{ht.setTimeout(t,e)})}function yr(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ya(e,t):t}function pl(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function fl(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Vr=Symbol();function Xa(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Vr?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ei(e,t){return typeof e=="function"?e(...t):!!e}var mt,Je,At,Ca,xl=(Ca=class extends Kt{constructor(){super();F(this,mt);F(this,Je);F(this,At);M(this,At,t=>{if(!Nt&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){m(this,Je)||this.setEventListener(m(this,At))}onUnsubscribe(){var t;this.hasListeners()||((t=m(this,Je))==null||t.call(this),M(this,Je,void 0))}setEventListener(t){var r;M(this,At,t),(r=m(this,Je))==null||r.call(this),M(this,Je,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){m(this,mt)!==t&&(M(this,mt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof m(this,mt)=="boolean"?m(this,mt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},mt=new WeakMap,Je=new WeakMap,At=new WeakMap,Ca),Qr=new xl;function jr(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var gl=dl;function bl(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=gl;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var ie=bl(),Rt,Ye,Lt,za,vl=(za=class extends Kt{constructor(){super();F(this,Rt,!0);F(this,Ye);F(this,Lt);M(this,Lt,t=>{if(!Nt&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){m(this,Ye)||this.setEventListener(m(this,Lt))}onUnsubscribe(){var t;this.hasListeners()||((t=m(this,Ye))==null||t.call(this),M(this,Ye,void 0))}setEventListener(t){var r;M(this,Lt,t),(r=m(this,Ye))==null||r.call(this),M(this,Ye,t(this.setOnline.bind(this)))}setOnline(t){m(this,Rt)!==t&&(M(this,Rt,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return m(this,Rt)}},Rt=new WeakMap,Ye=new WeakMap,Lt=new WeakMap,za),Fs=new vl;function yl(e){return Math.min(1e3*2**e,3e4)}function ti(e){return(e??"online")==="online"?Fs.isOnline():!0}var wr=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function si(e){let t=!1,r=0,n;const a=jr(),i=()=>a.status!=="pending",o=b=>{var y;if(!i()){const g=new wr(b);f(g),(y=e.onCancel)==null||y.call(e,g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Qr.isFocused()&&(e.networkMode==="always"||Fs.isOnline())&&e.canRun(),u=()=>ti(e.networkMode)&&e.canRun(),h=b=>{i()||(n==null||n(),a.resolve(b))},f=b=>{i()||(n==null||n(),a.reject(b))},x=()=>new Promise(b=>{var y;n=g=>{(i()||d())&&b(g)},(y=e.onPause)==null||y.call(e)}).then(()=>{var b;n=void 0,i()||(b=e.onContinue)==null||b.call(e)}),v=()=>{if(i())return;let b;const y=r===0?e.initialPromise:void 0;try{b=y??e.fn()}catch(g){b=Promise.reject(g)}Promise.resolve(b).then(h).catch(g=>{var E;if(i())return;const T=e.retry??(Nt?0:3),C=e.retryDelay??yl,N=typeof C=="function"?C(r,g):C,w=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,g);if(t||!w){f(g);return}r++,(E=e.onFail)==null||E.call(e,r,g),ml(N).then(()=>d()?void 0:x()).then(()=>{t?f(g):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():x().then(v),a)}}var pt,Ia,ri=(Ia=class{constructor(){F(this,pt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),br(this.gcTime)&&M(this,pt,ht.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nt?1/0:5*60*1e3))}clearGcTimeout(){m(this,pt)&&(ht.clearTimeout(m(this,pt)),M(this,pt,void 0))}},pt=new WeakMap,Ia),ft,Ot,ke,xt,ce,os,gt,Te,Ze,Ea,jl=(Ea=class extends ri{constructor(t){super();F(this,Te);F(this,ft);F(this,Ot);F(this,ke);F(this,xt);F(this,ce);F(this,os);F(this,gt);M(this,gt,!1),M(this,os,t.defaultOptions),this.setOptions(t.options),this.observers=[],M(this,xt,t.client),M(this,ke,m(this,xt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,M(this,ft,kn(this.options)),this.state=t.state??m(this,ft),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=m(this,ce))==null?void 0:t.promise}setOptions(t){if(this.options={...m(this,os),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=kn(this.options);r.data!==void 0&&(this.setState(Nn(r.data,r.dataUpdatedAt)),M(this,ft,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&m(this,ke).remove(this)}setData(t,r){const n=yr(this.state.data,t,this.options);return U(this,Te,Ze).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){U(this,Te,Ze).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=m(this,ce))==null?void 0:n.promise;return(a=m(this,ce))==null||a.cancel(t),r?r.then(ge).catch(ge):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(m(this,ft))}isActive(){return this.observers.some(t=>Se(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>it(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ja(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=m(this,ce))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=m(this,ce))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),m(this,ke).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(m(this,ce)&&(m(this,gt)?m(this,ce).cancel({revert:!0}):m(this,ce).cancelRetry()),this.scheduleGc()),m(this,ke).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||U(this,Te,Ze).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,h,f,x,v,b,y,g,T,C;if(this.state.fetchStatus!=="idle"&&((c=m(this,ce))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(m(this,ce))return m(this,ce).continueRetry(),m(this,ce).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(w=>w.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(M(this,gt,!0),n.signal)})},i=()=>{const N=Xa(this.options,r),E=(()=>{const I={client:m(this,xt),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return M(this,gt,!1),this.options.persister?this.options.persister(N,E,this):N(E)},l=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:m(this,xt),state:this.state,fetchFn:i};return a(N),N})();(d=this.options.behavior)==null||d.onFetch(l,this),M(this,Ot,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&U(this,Te,Ze).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),M(this,ce,si({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof wr&&N.revert&&this.setState({...m(this,Ot),fetchStatus:"idle"}),n.abort()},onFail:(N,w)=>{U(this,Te,Ze).call(this,{type:"failed",failureCount:N,error:w})},onPause:()=>{U(this,Te,Ze).call(this,{type:"pause"})},onContinue:()=>{U(this,Te,Ze).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await m(this,ce).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(x=(f=m(this,ke).config).onSuccess)==null||x.call(f,N,this),(b=(v=m(this,ke).config).onSettled)==null||b.call(v,N,this.state.error,this),N}catch(N){if(N instanceof wr){if(N.silent)return m(this,ce).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw U(this,Te,Ze).call(this,{type:"error",error:N}),(g=(y=m(this,ke).config).onError)==null||g.call(y,N,this),(C=(T=m(this,ke).config).onSettled)==null||C.call(T,this.state.data,N,this),N}finally{this.scheduleGc()}}},ft=new WeakMap,Ot=new WeakMap,ke=new WeakMap,xt=new WeakMap,ce=new WeakMap,os=new WeakMap,gt=new WeakMap,Te=new WeakSet,Ze=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ni(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...Nn(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return M(this,Ot,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ie.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),m(this,ke).notify({query:this,type:"updated",action:t})})},Ea);function ni(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ti(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Nn(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function kn(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var be,q,ls,fe,bt,Ft,Be,Xe,cs,Dt,Ut,vt,yt,et,Zt,W,ts,_r,Nr,kr,Sr,Cr,zr,Ir,ai,Pa,wl=(Pa=class extends Kt{constructor(t,r){super();F(this,W);F(this,be);F(this,q);F(this,ls);F(this,fe);F(this,bt);F(this,Ft);F(this,Be);F(this,Xe);F(this,cs);F(this,Dt);F(this,Ut);F(this,vt);F(this,yt);F(this,et);F(this,Zt,new Set);this.options=r,M(this,be,t),M(this,Xe,null),M(this,Be,jr()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(m(this,q).addObserver(this),Sn(m(this,q),this.options)?U(this,W,ts).call(this):this.updateResult(),U(this,W,Sr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Er(m(this,q),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Er(m(this,q),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,U(this,W,Cr).call(this),U(this,W,zr).call(this),m(this,q).removeObserver(this)}setOptions(t){const r=this.options,n=m(this,q);if(this.options=m(this,be).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Se(this.options.enabled,m(this,q))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");U(this,W,Ir).call(this),m(this,q).setOptions(this.options),r._defaulted&&!Os(this.options,r)&&m(this,be).getQueryCache().notify({type:"observerOptionsUpdated",query:m(this,q),observer:this});const a=this.hasListeners();a&&Cn(m(this,q),n,this.options,r)&&U(this,W,ts).call(this),this.updateResult(),a&&(m(this,q)!==n||Se(this.options.enabled,m(this,q))!==Se(r.enabled,m(this,q))||it(this.options.staleTime,m(this,q))!==it(r.staleTime,m(this,q)))&&U(this,W,_r).call(this);const i=U(this,W,Nr).call(this);a&&(m(this,q)!==n||Se(this.options.enabled,m(this,q))!==Se(r.enabled,m(this,q))||i!==m(this,et))&&U(this,W,kr).call(this,i)}getOptimisticResult(t){const r=m(this,be).getQueryCache().build(m(this,be),t),n=this.createResult(r,t);return Nl(this,n)&&(M(this,fe,n),M(this,Ft,this.options),M(this,bt,m(this,q).state)),n}getCurrentResult(){return m(this,fe)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&m(this,Be).status==="pending"&&m(this,Be).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){m(this,Zt).add(t)}getCurrentQuery(){return m(this,q)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=m(this,be).defaultQueryOptions(t),n=m(this,be).getQueryCache().build(m(this,be),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return U(this,W,ts).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),m(this,fe)))}createResult(t,r){var A;const n=m(this,q),a=this.options,i=m(this,fe),o=m(this,bt),l=m(this,Ft),d=t!==n?t.state:m(this,ls),{state:u}=t;let h={...u},f=!1,x;if(r._optimisticResults){const k=this.hasListeners(),$=!k&&Sn(t,r),H=k&&Cn(t,n,r,a);($||H)&&(h={...h,...ni(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:y}=h;x=h.data;let g=!1;if(r.placeholderData!==void 0&&x===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(k=i.data,g=!0):k=typeof r.placeholderData=="function"?r.placeholderData((A=m(this,Ut))==null?void 0:A.state.data,m(this,Ut)):r.placeholderData,k!==void 0&&(y="success",x=yr(i==null?void 0:i.data,k,r),f=!0)}if(r.select&&x!==void 0&&!g)if(i&&x===(o==null?void 0:o.data)&&r.select===m(this,cs))x=m(this,Dt);else try{M(this,cs,r.select),x=r.select(x),x=yr(i==null?void 0:i.data,x,r),M(this,Dt,x),M(this,Xe,null)}catch(k){M(this,Xe,k)}m(this,Xe)&&(v=m(this,Xe),x=m(this,Dt),b=Date.now(),y="error");const T=h.fetchStatus==="fetching",C=y==="pending",N=y==="error",w=C&&T,E=x!==void 0,j={status:y,fetchStatus:h.fetchStatus,isPending:C,isSuccess:y==="success",isError:N,isInitialLoading:w,isLoading:w,data:x,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:N&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&E,isStale:Gr(t,r),refetch:this.refetch,promise:m(this,Be),isEnabled:Se(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const k=oe=>{j.status==="error"?oe.reject(j.error):j.data!==void 0&&oe.resolve(j.data)},$=()=>{const oe=M(this,Be,j.promise=jr());k(oe)},H=m(this,Be);switch(H.status){case"pending":t.queryHash===n.queryHash&&k(H);break;case"fulfilled":(j.status==="error"||j.data!==H.value)&&$();break;case"rejected":(j.status!=="error"||j.error!==H.reason)&&$();break}}return j}updateResult(){const t=m(this,fe),r=this.createResult(m(this,q),this.options);if(M(this,bt,m(this,q).state),M(this,Ft,this.options),m(this,bt).data!==void 0&&M(this,Ut,m(this,q)),Os(r,t))return;M(this,fe,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!m(this,Zt).size)return!0;const o=new Set(i??m(this,Zt));return this.options.throwOnError&&o.add("error"),Object.keys(m(this,fe)).some(l=>{const c=l;return m(this,fe)[c]!==t[c]&&o.has(c)})};U(this,W,ai).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&U(this,W,Sr).call(this)}},be=new WeakMap,q=new WeakMap,ls=new WeakMap,fe=new WeakMap,bt=new WeakMap,Ft=new WeakMap,Be=new WeakMap,Xe=new WeakMap,cs=new WeakMap,Dt=new WeakMap,Ut=new WeakMap,vt=new WeakMap,yt=new WeakMap,et=new WeakMap,Zt=new WeakMap,W=new WeakSet,ts=function(t){U(this,W,Ir).call(this);let r=m(this,q).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ge)),r},_r=function(){U(this,W,Cr).call(this);const t=it(this.options.staleTime,m(this,q));if(Nt||m(this,fe).isStale||!br(t))return;const n=Ja(m(this,fe).dataUpdatedAt,t)+1;M(this,vt,ht.setTimeout(()=>{m(this,fe).isStale||this.updateResult()},n))},Nr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(m(this,q)):this.options.refetchInterval)??!1},kr=function(t){U(this,W,zr).call(this),M(this,et,t),!(Nt||Se(this.options.enabled,m(this,q))===!1||!br(m(this,et))||m(this,et)===0)&&M(this,yt,ht.setInterval(()=>{(this.options.refetchIntervalInBackground||Qr.isFocused())&&U(this,W,ts).call(this)},m(this,et)))},Sr=function(){U(this,W,_r).call(this),U(this,W,kr).call(this,U(this,W,Nr).call(this))},Cr=function(){m(this,vt)&&(ht.clearTimeout(m(this,vt)),M(this,vt,void 0))},zr=function(){m(this,yt)&&(ht.clearInterval(m(this,yt)),M(this,yt,void 0))},Ir=function(){const t=m(this,be).getQueryCache().build(m(this,be),this.options);if(t===m(this,q))return;const r=m(this,q);M(this,q,t),M(this,ls,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ai=function(t){ie.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(m(this,fe))}),m(this,be).getQueryCache().notify({query:m(this,q),type:"observerResultsUpdated"})})},Pa);function _l(e,t){return Se(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Sn(e,t){return _l(e,t)||e.state.data!==void 0&&Er(e,t,t.refetchOnMount)}function Er(e,t,r){if(Se(t.enabled,e)!==!1&&it(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Gr(e,t)}return!1}function Cn(e,t,r,n){return(e!==t||Se(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Gr(e,r)}function Gr(e,t){return Se(t.enabled,e)!==!1&&e.isStaleByTime(it(t.staleTime,e))}function Nl(e,t){return!Os(e.getCurrentResult(),t)}function zn(e){return{onFetch:(t,r)=>{var u,h,f,x,v;const n=t.options,a=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let b=!1;const y=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},g=Xa(t.options,t.fetchOptions),T=async(C,N,w)=>{if(b)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};return y($),$})(),j=await g(I),{maxPages:A}=t.options,k=w?fl:pl;return{pages:k(C.pages,j,A),pageParams:k(C.pageParams,N,A)}};if(a&&i.length){const C=a==="backward",N=C?kl:In,w={pages:i,pageParams:o},E=N(n,w);l=await T(w,E,C)}else{const C=e??i.length;do{const N=c===0?o[0]??n.initialPageParam:In(n,l);if(c>0&&N==null)break;l=await T(l,N),c++}while(c<C)}return l};t.options.persister?t.fetchFn=()=>{var b,y;return(y=(b=t.options).persister)==null?void 0:y.call(b,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function In(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function kl(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ds,Le,xe,jt,Oe,Ge,Ta,Sl=(Ta=class extends ri{constructor(t){super();F(this,Oe);F(this,ds);F(this,Le);F(this,xe);F(this,jt);M(this,ds,t.client),this.mutationId=t.mutationId,M(this,xe,t.mutationCache),M(this,Le,[]),this.state=t.state||ii(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){m(this,Le).includes(t)||(m(this,Le).push(t),this.clearGcTimeout(),m(this,xe).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){M(this,Le,m(this,Le).filter(r=>r!==t)),this.scheduleGc(),m(this,xe).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){m(this,Le).length||(this.state.status==="pending"?this.scheduleGc():m(this,xe).remove(this))}continue(){var t;return((t=m(this,jt))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,h,f,x,v,b,y,g,T,C,N,w,E,I,j,A;const r=()=>{U(this,Oe,Ge).call(this,{type:"continue"})},n={client:m(this,ds),meta:this.options.meta,mutationKey:this.options.mutationKey};M(this,jt,si({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{U(this,Oe,Ge).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{U(this,Oe,Ge).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>m(this,xe).canRun(this)}));const a=this.state.status==="pending",i=!m(this,jt).canStart();try{if(a)r();else{U(this,Oe,Ge).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=m(this,xe).config).onMutate)==null?void 0:l.call(o,t,this,n));const $=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));$!==this.state.context&&U(this,Oe,Ge).call(this,{type:"pending",context:$,variables:t,isPaused:i})}const k=await m(this,jt).start();return await((h=(u=m(this,xe).config).onSuccess)==null?void 0:h.call(u,k,t,this.state.context,this,n)),await((x=(f=this.options).onSuccess)==null?void 0:x.call(f,k,t,this.state.context,n)),await((b=(v=m(this,xe).config).onSettled)==null?void 0:b.call(v,k,null,this.state.variables,this.state.context,this,n)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,k,null,t,this.state.context,n)),U(this,Oe,Ge).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(T=m(this,xe).config).onError)==null?void 0:C.call(T,k,t,this.state.context,this,n)),await((w=(N=this.options).onError)==null?void 0:w.call(N,k,t,this.state.context,n)),await((I=(E=m(this,xe).config).onSettled)==null?void 0:I.call(E,void 0,k,this.state.variables,this.state.context,this,n)),await((A=(j=this.options).onSettled)==null?void 0:A.call(j,void 0,k,t,this.state.context,n)),k}finally{U(this,Oe,Ge).call(this,{type:"error",error:k})}}finally{m(this,xe).runNext(this)}}},ds=new WeakMap,Le=new WeakMap,xe=new WeakMap,jt=new WeakMap,Oe=new WeakSet,Ge=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ie.batch(()=>{m(this,Le).forEach(n=>{n.onMutationUpdate(t)}),m(this,xe).notify({mutation:this,type:"updated",action:t})})},Ta);function ii(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qe,Me,us,Ma,Cl=(Ma=class extends Kt{constructor(t={}){super();F(this,qe);F(this,Me);F(this,us);this.config=t,M(this,qe,new Set),M(this,Me,new Map),M(this,us,0)}build(t,r,n){const a=new Sl({client:t,mutationCache:this,mutationId:++ys(this,us)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){m(this,qe).add(t);const r=js(t);if(typeof r=="string"){const n=m(this,Me).get(r);n?n.push(t):m(this,Me).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(m(this,qe).delete(t)){const r=js(t);if(typeof r=="string"){const n=m(this,Me).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&m(this,Me).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=js(t);if(typeof r=="string"){const n=m(this,Me).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=js(t);if(typeof r=="string"){const a=(n=m(this,Me).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ie.batch(()=>{m(this,qe).forEach(t=>{this.notify({type:"removed",mutation:t})}),m(this,qe).clear(),m(this,Me).clear()})}getAll(){return Array.from(m(this,qe))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>jn(r,n))}findAll(t={}){return this.getAll().filter(r=>jn(t,r))}notify(t){ie.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ie.batch(()=>Promise.all(t.map(r=>r.continue().catch(ge))))}},qe=new WeakMap,Me=new WeakMap,us=new WeakMap,Ma);function js(e){var t;return(t=e.options.scope)==null?void 0:t.id}var He,tt,ve,We,Ve,Ts,Pr,$a,zl=($a=class extends Kt{constructor(r,n){super();F(this,Ve);F(this,He);F(this,tt);F(this,ve);F(this,We);M(this,He,r),this.setOptions(n),this.bindMethods(),U(this,Ve,Ts).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=m(this,He).defaultMutationOptions(r),Os(this.options,n)||m(this,He).getMutationCache().notify({type:"observerOptionsUpdated",mutation:m(this,ve),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&kt(n.mutationKey)!==kt(this.options.mutationKey)?this.reset():((a=m(this,ve))==null?void 0:a.state.status)==="pending"&&m(this,ve).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=m(this,ve))==null||r.removeObserver(this)}onMutationUpdate(r){U(this,Ve,Ts).call(this),U(this,Ve,Pr).call(this,r)}getCurrentResult(){return m(this,tt)}reset(){var r;(r=m(this,ve))==null||r.removeObserver(this),M(this,ve,void 0),U(this,Ve,Ts).call(this),U(this,Ve,Pr).call(this)}mutate(r,n){var a;return M(this,We,n),(a=m(this,ve))==null||a.removeObserver(this),M(this,ve,m(this,He).getMutationCache().build(m(this,He),this.options)),m(this,ve).addObserver(this),m(this,ve).execute(r)}},He=new WeakMap,tt=new WeakMap,ve=new WeakMap,We=new WeakMap,Ve=new WeakSet,Ts=function(){var n;const r=((n=m(this,ve))==null?void 0:n.state)??ii();M(this,tt,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Pr=function(r){ie.batch(()=>{var n,a,i,o,l,c,d,u;if(m(this,We)&&this.hasListeners()){const h=m(this,tt).variables,f=m(this,tt).context,x={client:m(this,He),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=m(this,We)).onSuccess)==null||a.call(n,r.data,h,f,x),(o=(i=m(this,We)).onSettled)==null||o.call(i,r.data,null,h,f,x)):(r==null?void 0:r.type)==="error"&&((c=(l=m(this,We)).onError)==null||c.call(l,r.error,h,f,x),(u=(d=m(this,We)).onSettled)==null||u.call(d,void 0,r.error,h,f,x))}this.listeners.forEach(h=>{h(m(this,tt))})})},$a),Fe,Aa,Il=(Aa=class extends Kt{constructor(t={}){super();F(this,Fe);this.config=t,M(this,Fe,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Wr(a,r);let o=this.get(i);return o||(o=new jl({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){m(this,Fe).has(t.queryHash)||(m(this,Fe).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=m(this,Fe).get(t.queryHash);r&&(t.destroy(),r===t&&m(this,Fe).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ie.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return m(this,Fe).get(t)}getAll(){return[...m(this,Fe).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>yn(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>yn(t,n)):r}notify(t){ie.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ie.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ie.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fe=new WeakMap,Aa),te,st,rt,Bt,qt,nt,Ht,Wt,Ra,El=(Ra=class{constructor(e={}){F(this,te);F(this,st);F(this,rt);F(this,Bt);F(this,qt);F(this,nt);F(this,Ht);F(this,Wt);M(this,te,e.queryCache||new Il),M(this,st,e.mutationCache||new Cl),M(this,rt,e.defaultOptions||{}),M(this,Bt,new Map),M(this,qt,new Map),M(this,nt,0)}mount(){ys(this,nt)._++,m(this,nt)===1&&(M(this,Ht,Qr.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(this,te).onFocus())})),M(this,Wt,Fs.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(this,te).onOnline())})))}unmount(){var e,t;ys(this,nt)._--,m(this,nt)===0&&((e=m(this,Ht))==null||e.call(this),M(this,Ht,void 0),(t=m(this,Wt))==null||t.call(this),M(this,Wt,void 0))}isFetching(e){return m(this,te).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return m(this,st).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=m(this,te).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=m(this,te).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(it(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return m(this,te).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=m(this,te).get(n.queryHash),i=a==null?void 0:a.state.data,o=ul(t,i);if(o!==void 0)return m(this,te).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ie.batch(()=>m(this,te).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=m(this,te).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=m(this,te);ie.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=m(this,te);return ie.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ie.batch(()=>m(this,te).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(ge).catch(ge)}invalidateQueries(e,t={}){return ie.batch(()=>(m(this,te).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ie.batch(()=>m(this,te).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ge)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ge)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=m(this,te).build(this,t);return r.isStaleByTime(it(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ge).catch(ge)}fetchInfiniteQuery(e){return e.behavior=zn(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ge).catch(ge)}ensureInfiniteQueryData(e){return e.behavior=zn(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fs.isOnline()?m(this,st).resumePausedMutations():Promise.resolve()}getQueryCache(){return m(this,te)}getMutationCache(){return m(this,st)}getDefaultOptions(){return m(this,rt)}setDefaultOptions(e){M(this,rt,e)}setQueryDefaults(e,t){m(this,Bt).set(kt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...m(this,Bt).values()],r={};return t.forEach(n=>{rs(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){m(this,qt).set(kt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...m(this,qt).values()],r={};return t.forEach(n=>{rs(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...m(this,rt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Wr(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Vr&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...m(this,rt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){m(this,te).clear(),m(this,st).clear()}},te=new WeakMap,st=new WeakMap,rt=new WeakMap,Bt=new WeakMap,qt=new WeakMap,nt=new WeakMap,Ht=new WeakMap,Wt=new WeakMap,Ra),oi=p.createContext(void 0),Kr=e=>{const t=p.useContext(oi);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Pl=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(oi.Provider,{value:e,children:t})),li=p.createContext(!1),Tl=()=>p.useContext(li);li.Provider;function ci(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var di=p.createContext(ci()),Ml=()=>p.useContext(di),$l=({children:e})=>{const[t]=p.useState(()=>ci());return s.jsx(di.Provider,{value:t,children:typeof e=="function"?e(t):e})},Al=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Rl=e=>{p.useEffect(()=>{e.clearReset()},[e])},Ll=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||ei(r,[e.error,n])),Ol=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Fl=(e,t)=>e.isLoading&&e.isFetching&&!t,Dl=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,En=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ul(e,t,r){var h,f,x,v,b;const n=Tl(),a=Ml(),i=Kr(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",Ol(o),Al(o,a),Rl(a);const l=!i.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(y=>{const g=u?c.subscribe(ie.batchCalls(y)):ge;return c.updateResult(),g},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),Dl(o,d))throw En(o,c,a);if(Ll({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((v=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||v.call(x,o,d),o.experimental_prefetchInRender&&!Nt&&Fl(d,n)){const y=l?En(o,c,a):(b=i.getQueryCache().get(o.queryHash))==null?void 0:b.promise;y==null||y.catch(ge).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Zl(e,t){return Ul(e,wl)}function Bl(e,t){const r=Kr(),[n]=p.useState(()=>new zl(r,e));p.useEffect(()=>{n.setOptions(e)},[n,e]);const a=p.useSyncExternalStore(p.useCallback(o=>n.subscribe(ie.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=p.useCallback((o,l)=>{n.mutate(o,l).catch(ge)},[n]);if(a.error&&ei(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const ui="maihouse_config";async function ql(e){return(await fetch(e)).json()}function Hl(e){return e&&typeof e=="object"&&typeof e.apiBaseUrl=="string"&&typeof e.appVersion=="string"&&typeof e.minBackend=="string"&&typeof e.features=="object"}async function Wl(){try{const r=localStorage.getItem(ui);if(r){const n=JSON.parse(r);if(Hl(n))return{...n,...hi()}}}catch{}const t=`${window.location.origin}/maihouses/app.config.json`;return ql(t)}function Pe(e){const t=new URLSearchParams(location.search).get(e),r=location.hash.indexOf("?");return(r>-1?new URLSearchParams(location.hash.slice(r)).get(e):null)??t??void 0}function hi(){const e=Pe("slots"),t=e?e.split(",").reduce((r,n)=>(r[n.trim()]=!0,r),{}):void 0;return{apiBaseUrl:Pe("api"),features:t,mock:Pe("mock")?Pe("mock")==="1":void 0,latency:Pe("latency")?+Pe("latency"):void 0,error:Pe("error")?+Pe("error"):void 0,q:Pe("q"),devtools:Pe("devtools"),mockSeed:Pe("seed")}}async function mi(){const e=await Wl(),t=hi(),r={...e,...t,mock:t.mock??e.mock??!0,latency:t.latency??e.latency??0,error:t.error??e.error??0};try{localStorage.setItem(ui,JSON.stringify(r))}catch{}return r}const Vl="modulepreload",Ql=function(e){return"/maihouses/"+e},Pn={},Gl=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Ql(c),c in Pn)return;Pn[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Vl,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,x)=>{h.addEventListener("load",f),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};let ws;const Kl=new Uint8Array(16);function Jl(){if(!ws&&(ws=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ws))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ws(Kl)}const de=[];for(let e=0;e<256;++e)de.push((e+256).toString(16).slice(1));function Yl(e,t=0){return de[e[t+0]]+de[e[t+1]]+de[e[t+2]]+de[e[t+3]]+"-"+de[e[t+4]]+de[e[t+5]]+"-"+de[e[t+6]]+de[e[t+7]]+"-"+de[e[t+8]]+de[e[t+9]]+"-"+de[e[t+10]]+de[e[t+11]]+de[e[t+12]]+de[e[t+13]]+de[e[t+14]]+de[e[t+15]]}const Xl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tn={randomUUID:Xl};function Tr(e,t,r){if(Tn.randomUUID&&!e)return Tn.randomUUID();e=e||{};const n=e.random||(e.rng||Jl)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Yl(n)}function ye(e,t){try{console.debug("[track]",e,t||{})}catch{}}const je={QuietOn:"user.needs_quiet_space",QuietOff:"user.back_to_explore",QuietAutoOff:"user.quiet_space_timeout",QuietTurnUsed:"user.quiet_space_turn_used",WarmbarView:"ui.warmbar_view",WarmbarContinue:"ui.warmbar_click_continue",WarmbarDismiss:"ui.warmbar_click_dismiss",MoodPick:"user.feeling_set",NoteSaved:"user.reflects_on_viewing",DebriefGen:"user.debrief_mna_generated",DebriefSave:"user.debrief_saved",BudgetCopy:"user.seeks_budget_clarity",ELI5Open:"user.needs_plain_explain",RewriteGen:"user.needs_polite_message_generated",RewriteAdopt:"user.polite_message_adopted"},pi="mai-quiet-mode-v1",ec=p.createContext(null);function Mn(){try{const e=localStorage.getItem(pi);return e?JSON.parse(e):{isQuiet:!1,untilTs:null,remainingTurns:null}}catch{return{isQuiet:!1,untilTs:null,remainingTurns:null}}}function Et(e){localStorage.setItem(pi,JSON.stringify(e))}const tc=({children:e})=>{const[t,r]=p.useState(()=>Mn()),n=p.useRef(null),a=p.useCallback(()=>{if(!t.isQuiet)return!1;const d=Date.now();return!(t.untilTs&&d>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)},[t]);p.useEffect(()=>{const d=Date.now();t.isQuiet&&t.untilTs&&d>t.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),Et({isQuiet:!1,untilTs:null,remainingTurns:null}))},[t]),p.useEffect(()=>(n.current&&window.clearInterval(n.current),n.current=window.setInterval(()=>{const d=Date.now(),u=Mn();u.isQuiet&&u.untilTs&&d>u.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),Et({isQuiet:!1,untilTs:null,remainingTurns:null}))},3e4),()=>{n.current&&window.clearInterval(n.current)}),[]);const i=p.useCallback(d=>{const u=(d==null?void 0:d.minutes)??null,h=(d==null?void 0:d.turns)??10,f=d==null?void 0:d.reason,x=u?Date.now()+u*6e4:null,v={isQuiet:!0,...f&&{reason:f},untilTs:x,remainingTurns:h};r(v),Et(v),ye(je.QuietOn,{reason:f,minutes:u,turns:h})},[]),o=p.useCallback(()=>{const d={isQuiet:!1,untilTs:null,remainingTurns:null};r(d),Et(d),ye(je.QuietOff,{})},[]),l=p.useCallback(()=>{r(d=>{if(!d.isQuiet||d.remainingTurns===null)return d;const u=Math.max(0,(d.remainingTurns??0)-1),h={...d,remainingTurns:u};if(Et(h),u===0){const f={isQuiet:!1,untilTs:null,remainingTurns:null};return Et(f),ye(je.QuietAutoOff,{reason:"turns_exhausted"}),f}return h})},[]),c=p.useMemo(()=>({state:t,startQuiet:i,clearQuiet:o,decrementTurn:l,isActive:a}),[t,i,o,l,a]);return s.jsx(ec.Provider,{value:c,children:e})};function sc(){try{const e=localStorage.getItem("mai-quiet-mode-v1");if(!e)return!1;const t=JSON.parse(e),r=Date.now();return!(!t.isQuiet||t.untilTs&&r>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)}catch{return!1}}const fi="mai-user-profile-v1",$n="mai-first-seen-ts",xi="mai-warmbar-dismissed-date";function ms(){try{const e=localStorage.getItem(fi);return e?JSON.parse(e):{tags:[]}}catch{return{tags:[]}}}function gi(e){localStorage.setItem(fi,JSON.stringify(e))}function rc(e){const t=ms(),r=new Set([...t.tags||[],...e].filter(Boolean));t.tags=Array.from(r).slice(0,8),gi(t)}function nc(e){const t=ms();t.lastMood=e,gi(t)}function ac(){return localStorage.getItem($n)?{isFirstVisit:!1}:(localStorage.setItem($n,String(Date.now())),{isFirstVisit:!0})}function ic(){localStorage.setItem(xi,bi())}function oc(){return localStorage.getItem(xi)===bi()}function lc(e=3){return(ms().tags||[]).slice(0,e)}function bi(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function cc(e,t){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((n-a)/864e5)}function dc(e){if(!e)return null;const t=new Date;if(e.birthday){const r=An(e.birthday,t,7);if(r)return r}if(e.move_in_date){const r=An(e.move_in_date,t,7,"");if(r)return r}return null}function An(e,t,r=7,n){const[a,i,o]=e.split("-").map(d=>Number(d));if(!a||!i||!o)return null;const l=new Date(t.getFullYear(),i-1,o);return Math.abs(cc(l,t))<=r?n===""?"":"":null}const uc=` 20 





- 
-  emoji 1 
- 1-3  4-5 
- 

 




- 80% 20% 
- 
- 
- 


-  2  3 
- 
- ...
- 


- 
- 
- 

 



   
  ...
   24  
  ... 



 


[[:]]


... [[:...]] 



 




- 
- 
- 



 


...
...


 

[[::]]

  

 

 5 
- 
- 
-  OK 




 
[[::]]



 

 
[[::ID]]


 

 
[[:]]


 MaiMai v6.0 5


  


  


  

 

### 
- 
- 
- 
- 
- 

### 
- 
- 
-  2 
-  3 

### 
 
 
 
  5 

### 

- 
- 
-  2-3 


- 
- 
- 
-  AI
- 
- 



`,hc=["","","",""],mc=["","","",""];function pc(e,t){const r=e.toLowerCase();if(["","","","","","","","","","","","","","","",""].some(i=>r.includes(i)))return"explicit";let a=0;return t.forEach(i=>{a+=i}),a>=3?"semi-warm":"exploring"}let Rn=[];function fc(){if(typeof window<"u"){const e=localStorage.getItem("maimai_pain_points");if(e)try{Rn=JSON.parse(e)}catch{Rn=[]}}}const xc={:{weight:1,category:"education"},:{weight:1,category:"education"},:{weight:2,category:"education"},:{weight:3,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:1,category:"education"},:{weight:1,category:"commute"},:{weight:3,category:"commute"},:{weight:2,category:"commute"},:{weight:2,category:"commute"},:{weight:1,category:"commute"},:{weight:2,category:"commute"},:{weight:2,category:"commute"},:{weight:3,category:"noise"},:{weight:3,category:"noise"},:{weight:2,category:"noise"},:{weight:1,category:"noise"},:{weight:1,category:"noise"},:{weight:2,category:"noise"},:{weight:2,category:"pet"},:{weight:2,category:"pet"},:{weight:3,category:"pet"},:{weight:3,category:"pet"},:{weight:2,category:"pet"},:{weight:2,category:"life-change"},:{weight:3,category:"life-change"},:{weight:3,category:"life-change"},:{weight:2,category:"life-change"},:{weight:1,category:"life-change"},:{weight:2,category:"life-change"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:1,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:3,category:"quality"},:{weight:3,category:"quality"},:{weight:2,category:"quality"},:{weight:1,category:"quality"},:{weight:2,category:"quality"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:2,category:"healing"},:{weight:2,category:"healing"},:{weight:1,category:"healing"},:{weight:1,category:"healing"},:{weight:1,category:"healing"}};let wt=new Map;function gc(e){const t=e.toLowerCase();return Object.entries(xc).forEach(([r,{weight:n,category:a}])=>{if(t.includes(r)){const i=wt.get(a)||0;wt.set(a,i+n)}}),wt}function bc(){return wt}function vc(){let e=0;return wt.forEach(t=>{e+=t}),e}function yc(){let e=null,t=0;return wt.forEach((r,n)=>{r>t&&(t=r,e=n)}),t>=3?e:null}function jc(){wt=new Map}const wc={"no-need":[//,//,//,//,//,//,//,/.*/,/.*/,//,//],budget:[//,//,//,//,//,//,//,//,//],later:[//,//,//,//,//,//,//,//,//,//,//],"negative-emotion":[//,//,//,//,//,//,//,//,//]};function _c(e){const t=e.toLowerCase();for(const[r,n]of Object.entries(wc))if(n.some(a=>a.test(t)))return r;return null}let he={};function Nc(e){const t=e.toLowerCase(),r={},n=[/(?:||).*?(?:|)(.+?)(?:||||$)/,/(.+?)(?:|)/];for(const o of n){const l=t.match(o);if(l&&l[1]){he.workArea=l[1].trim(),r.workArea=l[1].trim();break}}const a=[/(?:|).*?(?:|)(.+?)(?:||||$)/,/(.+?)$/];for(const o of a){const l=t.match(o);if(l&&l[1]){he.homeArea=l[1].trim(),r.homeArea=l[1].trim();break}}/.*(?:||30||||)/.test(t)&&(he.commutePain=e,r.commutePain=e),/||||/.test(t)?(he.familyStatus="newlywed",r.familyStatus="newlywed"):/|||||/.test(t)?(he.familyStatus="with-kids",r.familyStatus="with-kids"):/||/.test(t)?(he.familyStatus="single",r.familyStatus="single"):/|||||/.test(t)?(he.familyStatus="couple",r.familyStatus="couple"):/|||/.test(t)&&(he.familyStatus="with-parents",r.familyStatus="with-parents");const i={"|||":"fitness","|||":"homebody","||":"social","||":"workaholic","||":"early-bird","||":"night-owl"};for(const[o,l]of Object.entries(i))new RegExp(o).test(t)&&(he.lifestyle=[...he.lifestyle||[],l],r.lifestyle=he.lifestyle);return Object.keys(r).length>0&&(he.lastUpdated=Date.now(),Sc()),r}function kc(){return he}function Sc(){typeof window<"u"&&localStorage.setItem("maimai_user_profile",JSON.stringify(he))}function Cc(){if(typeof window<"u"){const e=localStorage.getItem("maimai_user_profile");if(e)try{he=JSON.parse(e)}catch{he={}}}}function zc(){const e=vc();return ns>=10&&e>=5?{level:"intimate",label:"",tactics:["","",""],canRecommend:!0}:e>=4?{level:"hot",label:"",tactics:["","",""],canRecommend:!0}:e>=2?{level:"warm",label:"",tactics:["","",""],canRecommend:!1}:{level:"cold",label:"",tactics:["","",""],canRecommend:!1}}function Ic(){const e=new Date().getHours();return e>=6&&e<10?"morning":e>=10&&e<14?"lunch":e>=14&&e<17?"afternoon":e>=17&&e<21?"evening":"night"}const Ec={morning:"",lunch:"",afternoon:"",evening:"",night:""};function Pc(){return Ec[Ic()]}function Tc(e){const t=e.toLowerCase();return["","","","?","","","",""].some(i=>t.includes(i))?"good":["","","","","","","..."].filter(i=>t.includes(i)).length>=2?"bad":"neutral"}let Ms=0,ns=0;function Mc(e){return ns++,e==="exploring"?Ms++:Ms=0,Ms}function $c(){Ms=0}function Ln(){const t=(typeof window<"u"?parseInt(localStorage.getItem("mai-intimacy-rounds")||"0",10):0)+ns;return t>=50?{level:"soulmate",label:"",emoji:""}:t>=30?{level:"bestie",label:"",emoji:""}:t>=15?{level:"close",label:"",emoji:""}:t>=6?{level:"familiar",label:"",emoji:""}:{level:"new",label:"",emoji:""}}function Ac(){if(typeof window<"u"){const e=parseInt(localStorage.getItem("mai-intimacy-rounds")||"0",10);localStorage.setItem("mai-intimacy-rounds",String(e+ns)),ns=0}}const On=["",""," OK ","",""];function Rc(){const e=Math.floor(Math.random()*On.length),t=On[e];return t!==void 0?t:""}function Lc(e){const t=e.toLowerCase();if(["","","","",""].filter(c=>t.includes(c)).length>=2)return"storytelling";const n=["","","","","","","",""],a=["","","","","","","",""],i=["","","","","","",""],o=["","","","","",""],l=["","","","","","","","",""];return n.some(c=>t.includes(c))?"frustrated":a.some(c=>t.includes(c))?"stressed":i.some(c=>t.includes(c))?"confused":o.some(c=>t.includes(c))?"curious":l.some(c=>t.includes(c))?"happy":"neutral"}let Mt=!1,Jr=null;function Oc(e){Mt=!0,Jr=e}function Fc(){return{hasPaved:Mt,category:Jr}}function vi(){Mt=!1,Jr=null}function Dc(e){return["","","","","","","","","","","","",""].some(r=>e.includes(r))}let yi=null;function Uc(e){yi=e}function Zc(){return yi}function Bc(e,t,r,n,a,i,o){return r==="storytelling"||r==="frustrated"||r==="stressed"||t==="bad"?"none":e==="explicit"&&r==="curious"?"card":e==="explicit"?Mt?"card":"pave":e==="semi-warm"&&Mt&&i?"card":e==="semi-warm"&&t==="good"&&a&&!Mt?"pave":e==="exploring"&&n>=5?"seed":"none"}const qc={education:{name:"",topic:"",pavePhrase:"..."},commute:{name:"",topic:"5",pavePhrase:"..."},noise:{name:"",topic:"",pavePhrase:"... "},pet:{name:"",topic:"",pavePhrase:"..."},"life-change":{name:"",topic:"",pavePhrase:"..."},rental:{name:"",topic:"",pavePhrase:"... "},stress:{name:"",topic:"",pavePhrase:"..."},quality:{name:"",topic:"",pavePhrase:"... "},amenity:{name:"",topic:"",pavePhrase:"..."},healing:{name:"",topic:"",pavePhrase:"..."}};function Fn(e){return qc[e]}function Hc(e){const t=/[\u{1F300}-\u{1F9FF}]/u.test(e),r=e.length;return r<10&&!t?"brief":t||r>30?"expressive":"neutral"}function Wc(e){return["","","","","","","",""].some(r=>e.includes(r))}function Vc(){jc(),$c(),vi(),Uc(null)}function Qc(e,t,r,n,a,i){let o=uc;const l={exploring:`

 

- 
- 
- `,"semi-warm":`

 
${n||""}
- 
- 
- `,explicit:`

 

- 
- 
- `}[e];switch(o+=l,t==="storytelling"?o+=`

 
`:t==="frustrated"?o+=`

 


`:t==="stressed"&&(o+=`

 


`),r){case"seed":const d=Rc();o+=`

 
 ${a} 
${d}
`;break;case"pave":const u=Zc();if(u)o+=`

 
${u.script.topic}

${u.script.bridge}

${u.script.feature}
 `;else if(n){const h=Fn(n);o+=`

 
${n}
${h.pavePhrase}
 `}break;case"card":if(n){const h=Fn(n);o+=`

 
${n}

[[:${h.name}:${h.topic}]]`}break;case"listing":o+=`

 


[[::MH-2024-001]]`;break;default:o+=`

 
`}const c={brief:`

1-2`,expressive:`

`,neutral:""}[i];return c&&(o+=c),o}function Gc(e){if(e.size<2)return null;const t={education:"",commute:"",noise:"",pet:"","life-change":"",rental:"",stress:"",quality:"",amenity:"",healing:""},r=[];return e.forEach((n,a)=>{n>=2&&t[a]&&r.push(t[a])}),r.length===0?null:`
 ${r.join("")}

`}function Kc(e){typeof window<"u"&&localStorage.setItem("maimai_visit_memory",JSON.stringify(e))}function ji(){if(typeof window<"u"){const e=localStorage.getItem("maimai_visit_memory");if(e)try{return JSON.parse(e)}catch{return null}}return null}function Jc(){const e=ji();if(!e)return null;const t=Math.floor((Date.now()-e.lastVisit)/(1e3*60*60*24));if(t<1||t>7)return null;const r={commute:" ",education:"",noise:"",rental:"",pet:"","life-change":"",stress:"",quality:"",amenity:"",healing:""};return e.dominantCategory&&r[e.dominantCategory]?r[e.dominantCategory]:""}function Yc(e){const t=ji(),r={lastVisit:Date.now(),dominantCategory:e||(t==null?void 0:t.dominantCategory)||null,keywords:(t==null?void 0:t.keywords)||[],chitchatTopics:(t==null?void 0:t.chitchatTopics)||[]};Kc(r)}const Dn={rentalToWall:`
  


  


...


...

 


[[::]]


`,explicitToListing:`
   + 











 
 
 


[[::NH-2024-001]]

 5 


`};function Xc(e,t,r){return e==="semi-warm"&&t>=3&&r==="good"}const ed={commute:{communities:["","","",""],features:["","",""]},education:{communities:["","",""],features:["","",""]},noise:{communities:["","",""],features:["","",""]},pet:{communities:["","",""],features:["","",""]},rental:{communities:["","",""],features:["","",""]},quality:{communities:["","",""],features:["","",""]},"life-change":{communities:["","",""],features:["","",""]}};function td(e){return e&&ed[e]||null}const sd=[//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//];function rd(e){return sd.some(t=>t.test(e))}function nd(){const e=["...  ","... ","","... "," "],t=Math.floor(Math.random()*e.length),r=e[t];return r===void 0?"":r}let Ne={hasArea:!1,hasBudget:!1,hasTimeline:!1,hasViewedCommunity:!1,hasViewedListing:!1,hasFamilyNeeds:!1};function ad(e){const t=e.toLowerCase();/.*?|||.*|.*/.test(t)&&(Ne.hasArea=!0),/||||/.test(t)&&(Ne.hasBudget=!0),/||||||/.test(t)&&(Ne.hasTimeline=!0),/||||||/.test(t)&&(Ne.hasFamilyNeeds=!0),od()}function wi(){let e=0;return Ne.hasArea&&e++,Ne.hasBudget&&e++,Ne.hasTimeline&&e++,Ne.hasViewedCommunity&&e++,Ne.hasViewedListing&&e++,Ne.hasFamilyNeeds&&e++,e}function id(){return wi()>=4}function od(){typeof window<"u"&&localStorage.setItem("maimai_buying_readiness",JSON.stringify(Ne))}function ld(){if(typeof window<"u"){const e=localStorage.getItem("maimai_buying_readiness");if(e)try{Ne={...Ne,...JSON.parse(e)}}catch{}}}const rr=[{id:"priority",question:"",options:[{key:"A",text:"",category:"commute"},{key:"B",text:"",category:"education"},{key:"C",text:"",category:"noise"},{key:"D",text:"",category:"rental"}],followUp:"{type}..."},{id:"lifestyle",question:"",options:[{key:"A",text:"",category:"noise"},{key:"B",text:"",category:"amenity"},{key:"C",text:"",category:"education"},{key:"D",text:"",category:"pet"}],followUp:"{feature}"},{id:"dealbreaker",question:"",options:[{key:"A",text:" 1 ",category:"commute"},{key:"B",text:"",category:"noise"},{key:"C",text:"",category:"rental"},{key:"D",text:"",category:"quality"}],followUp:" "}];let _i=!1;function cd(e){return _i||e<4||e>6?!1:Math.random()>.6}function dd(){const e=Math.floor(Math.random()*rr.length),t=rr[e];if(_i=!0,t===void 0){const r=rr[0];return r===void 0?{id:"default",question:"",options:[{key:"A",text:"",category:"commute"},{key:"B",text:"",category:"education"},{key:"C",text:"",category:"noise"},{key:"D",text:"",category:"rental"}],followUp:""}:r}return t}const ud="100%  12 //";let Mr=!1;const nr=` 20 


- 
- 
- 
- 


- 
-  emoji 1 
-  1-3 
- 

`;function hd(e){Mr=e,Vc()}function md(e){return["","","","","",""].some(r=>e.includes(r))}function pd(e){var Q,V,R,Ae,Ie;if(sc())return ud;const r=localStorage.getItem("mai-mood-v1")||"neutral",a=(ms().tags||[]).slice(0,5),i=((Q=e==null?void 0:e.filter(J=>J.role==="user").pop())==null?void 0:Q.content)||"";if(Cc(),ld(),rd(i)){const J=nd();return nr+`

 

${J}`}if(Mr)if(md(i))Mr=!1;else return nr;const o=_c(i);if(o&&(o==="no-need"||o==="negative-emotion"))return nr+`

${o==="no-need"?"":""} 100% `;Nc(i),ad(i),gc(i);const l=bc(),c=yc();Yc(c);const d=pc(i,l),u=Mc(d),h=Lc(i),f=Tc(i),x=Fc();let v=!1;x.hasPaved&&(v=Dc(i),Wc(i)&&vi());const b=Bc(d,f,h,u,c,v);b==="pave"&&c&&Oc(c);const y=Hc(i);let g=Qc(d,h,b,c,u,y),T=0;if(l.forEach(J=>{T+=J}),Xc(d,T,f)){const J=Gc(l);J&&(g+=`

 




${J}`)}d==="semi-warm"&&b==="pave"?g+=`

 
${Dn.rentalToWall}`:d==="explicit"&&(g+=`

 
${Dn.explicitToListing}`);const C=zc();let N=`

 ${C.label}
`;C.tactics.forEach(J=>{N+=`
- ${J}`}),C.canRecommend||(N+=`
 `);const w=`

${Pc()}`,E=kc();let I="";(E.workArea||E.homeArea||E.commutePain||E.familyStatus)&&(I=`

 `,E.workArea&&(I+=`
- ${E.workArea}`),E.homeArea&&(I+=`
- ${E.homeArea}`),E.commutePain&&(I+=`
- `),E.familyStatus&&(I+=`
- ${{single:"",couple:"",newlywed:"","with-kids":"","with-parents":""}[E.familyStatus]||E.familyStatus}`),I+=`
 `);let j="";const A=td(c);A&&b==="pave"&&(j=`

 
${c}
- ${A.communities.slice(0,2).join("")}
- ${A.features.join("")}
 `);let k="";const $=wi();id()?k=`

 ${$}/6 - 

`:$>=2&&(k=`

 ${$}/6
`);let H="";if(cd(u)){const J=dd();J&&J.options.length>=4&&(H=`

 
${J.question}
A) ${((V=J.options[0])==null?void 0:V.text)??""}  B) ${((R=J.options[1])==null?void 0:R.text)??""}
C) ${((Ae=J.options[2])==null?void 0:Ae.text)??""}  D) ${((Ie=J.options[3])==null?void 0:Ie.text)??""}
 `)}const oe=r==="stress"?`
localStorage `:r==="rest"?`
localStorage `:"",Z=a.length?`
${a.join("")}`:"",z=`

[DEBUG] ${d} | ${h} | ${b} | ${c||""} | ${u} | ${C.level} | ${$}/6`;return g+N+w+I+j+k+H+oe+Z+z}async function ps(e,t,r){var d,u,h,f,x,v;const n=typeof t=="function"?t:void 0,a=typeof t=="object"?t:r,i=pd(e),o=await fetch("/api/openai-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:i},...e],temperature:(a==null?void 0:a.temperature)??.85,max_tokens:(a==null?void 0:a.max_tokens)??350,stream:!!n})});if(!o.ok)throw new Error(`LLM proxy error: ${o.status}`);if(n&&o.body){const b=o.body.getReader(),y=new TextDecoder;let g="";for(;;){const{done:T,value:C}=await b.read();if(T)break;const w=y.decode(C,{stream:!0}).split(`
`);for(const E of w)if(E.startsWith("data: ")){const I=E.slice(6);if(I==="[DONE]")continue;try{const j=JSON.parse(I),A=(h=(u=(d=j==null?void 0:j.choices)==null?void 0:d[0])==null?void 0:u.delta)==null?void 0:h.content;A&&(g+=A,n(A))}catch{}}}return g}const l=await o.json();return((v=(x=(f=l==null?void 0:l.choices)==null?void 0:f[0])==null?void 0:x.message)==null?void 0:v.content)??""}async function fd(e,t){const r=(t==null?void 0:t.audience)==="owner"?"":"",n=(()=>{switch(t==null?void 0:t.intent){case"view":return"";case"detail":return"";case"pet":return"";case"price":return"";default:return""}})(),a=`V1/V2${r}${n}
---
${e}
---

V1...
V2...`;return ps([{role:"user",content:a}],{max_tokens:220})}async function xd(e){const t=` 12 
${e}`;return ps([{role:"user",content:t}],{max_tokens:80})}async function gd(e){const t=`/122
${e}`;return ps([{role:"user",content:t}],{max_tokens:120})}async function bd(e,t,r){const n=`(Must)(Nice)(Avoid)232 #tags:  35 /
${e}
${t}
${r}`;return ps([{role:"user",content:n}],{max_tokens:160})}let Ni=Tr();const ki=()=>Ni;async function Si(e,t={}){const r=await mi(),n=`${r.apiBaseUrl}${e}`,a=(t.method||"GET").toUpperCase(),i={Accept:"application/json","X-API-Version":"v1","X-App-Version":r.appVersion,"X-Session-Id":Ni,"X-Request-Id":Tr(),"Accept-Language":"zh-Hant-TW"},o=(()=>{const u=t.headers;if(!u)return{};if(u instanceof Headers){const h={};for(const[f,x]of u)h[f]=x;return h}return Array.isArray(u)?Object.fromEntries(u):u})();a==="POST"&&!o["Idempotency-Key"]&&!o["idempotency-key"]&&(o["Idempotency-Key"]=Tr());const l={...i,...o};if(r.mock){const{mockHandler:u}=await Gl(async()=>{const{mockHandler:h}=await import("./index-BZqDonbH.js");return{mockHandler:h}},__vite__mapDeps([0,1,2,3]));return u(e,{...t,headers:l})}const c=new AbortController,d=setTimeout(()=>c.abort(),8e3);try{const u=await fetch(n,{...t,headers:l,signal:c.signal});return u.ok?{ok:!0,data:await u.json()}:{ok:!1,error:{code:"API_ERROR",message:"API "}}}catch(u){return(u==null?void 0:u.name)==="AbortError"?{ok:!1,error:{code:"NETWORK_TIMEOUT",message:""}}:{ok:!1,error:{code:"NETWORK_ERROR",message:u.message}}}finally{clearTimeout(d)}}const Ci=()=>Si("/api/v1/meta");function vd({config:e}){const[t,r]=p.useState(!0),[n,a]=p.useState(!!e.mock),[i,o]=p.useState(e.latency??0),[l,c]=p.useState(e.error??0),[d,u]=p.useState(e.q??""),[h,f]=p.useState(""),[x,v]=p.useState(e.mockSeed??"");if(p.useEffect(()=>{Ci().then(g=>f(g.ok&&g.data?g.data.backendVersion:""))},[]),!t)return null;const b=()=>{const g={...e,mock:n,latency:i,error:l,q:d,mockSeed:x,devtools:"1"};try{localStorage.setItem("maihouse_config",JSON.stringify(g))}catch{}location.reload()},y=()=>{const g=String(Date.now());v(g);try{localStorage.setItem("maihouse_config",JSON.stringify({...e,mockSeed:g,mock:n,latency:i,error:l,q:d,devtools:"1"}))}catch{}location.reload()};return s.jsxs("aside",{className:"fixed bottom-4 right-4 z-[var(--z-overlay)] w-[320px] rounded-[var(--r-lg)] bg-white p-4 text-sm shadow-[var(--shadow-card)]",children:[s.jsx("div",{className:"mb-2 font-medium",children:"Developer HUD"}),s.jsxs("div",{className:"space-y-1 text-[var(--text-secondary)]",children:[s.jsxs("div",{children:["API",e.apiBaseUrl]}),s.jsxs("div",{children:["App",e.appVersion]}),s.jsxs("div",{children:["Backend",h]}),s.jsxs("div",{children:["Session",ki()]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:g=>a(g.target.checked)})," Mock"]}),s.jsxs("label",{className:"flex items-center gap-2",children:["Latency",s.jsx("input",{className:"w-20 rounded border p-1",type:"number",value:i,onChange:g=>o(+g.target.value||0)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["Error",s.jsx("input",{className:"w-20 rounded border p-1",step:"0.1",type:"number",value:l,onChange:g=>c(+g.target.value||0)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["q ",s.jsx("input",{className:"flex-1 rounded border p-1",value:d,onChange:g=>u(g.target.value)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["seed",s.jsx("input",{className:"flex-1 rounded border p-1",value:x,onChange:g=>v(g.target.value)})]})]}),s.jsxs("div",{className:"mt-3 flex justify-between",children:[s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-100)] px-3 py-1",onClick:()=>r(!1),children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-300)] px-3 py-1",onClick:y,children:" "}),s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--brand)] px-3 py-1 text-[var(--brand-fg)]",onClick:b,children:""})]})]})]})}const zi="uag_queue",$r=1e4,yd=200,G=globalThis.__UAG__||(globalThis.__UAG__={queue:[],backoff:1e4,attempts:0});try{G.queue=JSON.parse(localStorage.getItem(zi)||"[]")}catch{G.queue=[]}const Ii=()=>{try{localStorage.setItem(zi,JSON.stringify(G.queue.slice(-$r)))}catch{}},Yr=3e5;async function Ei(e){var r;const t=await Si("/api/v1/uag/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const n=new Set(e.map(a=>a.requestId));G.queue=G.queue.filter(a=>!n.has(a.requestId)),Ii(),G.attempts=0,G.backoff=1e4}else{G.attempts++;const n=(r=t==null?void 0:t.data)==null?void 0:r.retryAfterMs;G.backoff=Math.min(n??G.backoff*2,Yr)}}function Ds(){G.timer&&clearTimeout(G.timer),G.timer=setTimeout(jd,G.backoff)}function jd(){if(G.queue.length){const e=G.queue.slice(0,yd);Ei(e).catch(()=>{G.attempts++,G.backoff=Math.min(G.backoff*2,Yr)}).finally(Ds)}else Ds()}Ds();function wd(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:t&3|8).toString(16)})}function Xr(e,t,r){if(!(e!=null&&e.trim())||!(t!=null&&t.trim())){console.warn("[UAG] ");return}const n={event:e,page:t,sessionId:ki(),userId:null,ts:new Date().toISOString(),meta:{origin:"gh-pages"},requestId:wd()};r&&(n.targetId=r),G.queue.push(n),G.queue.length>$r&&(G.queue=G.queue.slice(-$r)),Ii(),Ei([n]).catch(()=>{G.attempts++,G.backoff=Math.min(G.backoff*2,Yr),Ds()})}const _d=({showSlogan:e=!0,className:t="",onClick:r,href:n="/maihouses/"})=>{const a=()=>s.jsxs("div",{className:`flex items-center gap-3 group cursor-pointer ${t}`,children:[s.jsxs("div",{className:"relative w-[42px] h-[42px] bg-gradient-to-br from-brand-700 to-[#005282] rounded-xl flex items-center justify-center shadow-lg shadow-brand-700/20 overflow-hidden transition-all duration-300 group-hover:scale-105 group-hover:shadow-brand-700/30",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent translate-y-full group-hover:translate-y-0 transition-transform duration-700 ease-out"}),s.jsxs("svg",{className:"w-[22px] h-[22px] text-white relative z-10 drop-shadow-sm transform transition-transform duration-300 group-hover:-translate-y-[1px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 9.5L12 3L21 9.5V20.5C21 21.0523 20.5523 21.5 20 21.5H4C3.44772 21.5 3 21.0523 3 20.5V9.5Z"}),s.jsx("path",{d:"M9 21.5V13H15V21.5"})]}),s.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[#FF6B6B] rounded-full shadow-[0_0_0_1.5px_#004E7C]"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-[24px] font-bold font-serif text-brand-700 tracking-wide leading-none",children:""})}),e&&s.jsx("div",{className:"hidden sm:flex items-center ml-3 pl-3 border-l-2 border-brand-100/80 h-5",children:s.jsx("span",{className:"text-[15px] font-bold text-brand-500 tracking-[0.15em] uppercase group-hover:text-brand-700 transition-colors leading-none pt-[1px]",children:""})})]})]});return n?s.jsx("a",{href:n,onClick:r,className:"no-underline",children:s.jsx(a,{})}):s.jsx("div",{onClick:r,children:s.jsx(a,{})})};function Nd({onOpenAIStudio:e}){const[t,r]=p.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sticky top-0 z-50 border-b border-brand-100 bg-white/95 shadow-sm backdrop-blur-sm transition-all",children:[s.jsxs("div",{className:"mx-auto flex h-16 max-w-[1120px] items-center justify-between px-4",children:[s.jsx(_d,{showSlogan:!0,onClick:()=>window.scrollTo({top:0,behavior:"smooth"})}),s.jsxs("nav",{className:"hidden items-center gap-1 md:flex md:gap-2","aria-label":"",children:[s.jsxs("a",{href:"/maihouses/property.html",className:"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]",children:[s.jsx(fn,{size:18,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"/maihouses/auth.html?mode=login",className:"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]",children:[s.jsx(xn,{size:18,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"/maihouses/auth.html?mode=signup",className:"ml-1 flex items-center gap-2 rounded-xl border border-transparent bg-brand-700 px-5 py-2.5 text-[15px] font-bold text-white shadow-md shadow-brand-700/10 transition-all hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-lg hover:shadow-brand-700/20 active:scale-[0.98]",children:[s.jsx(gn,{size:18,strokeWidth:2.5}),s.jsx("span",{children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[s.jsx("a",{href:"/maihouses/auth.html?mode=login",className:"flex items-center justify-center rounded-lg px-3 py-2 text-sm font-bold text-brand-700 transition-all hover:bg-brand-50 active:scale-95",children:s.jsx(xn,{size:18,strokeWidth:2.5})}),s.jsxs("a",{href:"/maihouses/auth.html?mode=signup",className:"flex items-center gap-1.5 rounded-lg bg-brand-700 px-3 py-2 text-sm font-bold text-white shadow-sm transition-all hover:bg-brand-600 active:scale-95",children:[s.jsx(gn,{size:16,strokeWidth:2.5}),s.jsx("span",{children:""})]}),s.jsx("button",{onClick:()=>r(!t),className:"flex items-center justify-center rounded-lg p-2 text-brand-700 transition-all hover:bg-brand-50 active:scale-95","aria-label":"",children:t?s.jsx(Gt,{size:22,strokeWidth:2.5}):s.jsx(Io,{size:22,strokeWidth:2.5})})]})]}),t&&s.jsx("div",{className:"absolute left-0 right-0 top-full border-b border-brand-100 bg-white shadow-lg md:hidden",children:s.jsxs("nav",{className:"mx-auto max-w-[1120px] px-4 py-3",children:[s.jsxs("a",{href:"/maihouses/property.html",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsx(fn,{size:20,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"/maihouses/community-wall_mvp.html",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsxs("svg",{className:"size-5 opacity-80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:"https://maihouses.vercel.app/maihouses/uag",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsxs("svg",{className:"size-5 opacity-80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),s.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),s.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),s.jsx("span",{children:""})]})]})})]}),s.jsx("div",{className:"relative border-b border-brand-100/50 bg-brand-50",children:s.jsx("div",{className:"relative z-10 mx-auto max-w-[1120px] px-4 pb-6 pt-24",children:s.jsxs("div",{className:"relative mx-auto max-w-3xl",children:[s.jsxs("div",{className:"pointer-events-none absolute top-[-44px] right-[5%] z-0 animate-float select-none md:right-[10%] md:animate-float-desktop",children:[s.jsxs("div",{className:"absolute bottom-[92%] right-[55%] w-[260px] origin-bottom-right animate-fadeIn whitespace-normal rounded-2xl rounded-br-none border-2 border-brand-100 bg-white px-5 py-2 shadow-lg md:bottom-[94%] md:right-[65%] md:w-auto md:max-w-none md:whitespace-nowrap md:py-3",children:[s.jsxs("p",{className:"text-left text-[11px] font-bold leading-relaxed text-ink-700 md:text-sm",children:[" ",s.jsx("span",{className:"font-black text-brand-700",children:""}),""]}),s.jsx("div",{className:"absolute -bottom-2.5 right-3 size-5 rotate-45 border-b-2 border-r-2 border-brand-100 bg-white"})]}),s.jsx("div",{className:"relative z-10 size-20 md:size-24",children:s.jsxs("svg",{viewBox:"0 0 200 240",className:"size-full drop-shadow-sm",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"#00385a",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"#00385a",strokeWidth:"6",fill:"#F6F9FF",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 55 130 L 35 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 145 130 L 165 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"})]})})]}),s.jsx("div",{className:"group relative z-20",children:s.jsxs("div",{className:"flex h-[60px] items-center rounded-full border border-brand-100 bg-white pl-[28px] pr-2 shadow-[0_8px_30px_rgba(0,56,90,0.08)] transition-all duration-300 focus-within:border-brand-300 focus-within:ring-4 focus-within:ring-brand-50 group-hover:shadow-[0_12px_40px_rgba(0,56,90,0.12)]",children:[s.jsx("div",{className:"pr-4 text-gray-400 transition-colors group-focus-within:text-gray-600",children:s.jsx(Da,{size:22,strokeWidth:2.5})}),s.jsx("input",{type:"text",placeholder:"...",className:"size-full bg-transparent text-lg font-bold text-gray-700 outline-none placeholder:font-medium placeholder:text-gray-400"}),s.jsx("button",{className:"flex h-[46px] items-center justify-center whitespace-nowrap rounded-full bg-brand-700 px-8 text-base font-bold tracking-wide text-white shadow-md transition-colors hover:bg-brand-600 hover:shadow-lg active:translate-y-px",children:""})]})}),s.jsx("div",{className:"relative z-10 mt-6 grid grid-cols-3 gap-2",children:["","",""].map(n=>{const i=(l=>l===""?"/maihouses/community-wall_mvp.html":l===""?"https://maihouses.vercel.app/maihouses/uag":"#")(n),o=n===""?"_blank":void 0;return s.jsx("a",{href:i,target:o,rel:o?"noopener noreferrer":void 0,className:"flex items-center justify-center rounded-2xl border border-brand-700 bg-brand-700 py-3 text-lg font-bold tracking-wide text-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-md active:scale-[0.98]",children:n},n)})})]})})})]})}function kd({animated:e=!0}){const[t,r]=p.useState(0);p.useEffect(()=>{if(!e)return;const l=setInterval(()=>{r(c=>(c+1)%6)},2500);return()=>clearInterval(l)},[e]);const a=(()=>{switch(t){case 0:return{leftArm:"M 55 130 L 25 100",rightArm:"M 145 130 L 175 90",eyeY:125,mouthCurve:"smile"};case 1:return{leftArm:"M 55 130 L 30 130",rightArm:"M 145 130 L 170 130",eyeY:123,eyeSize:6,mouthCurve:"wow"};case 2:return{leftArm:"M 55 130 L 45 150",rightArm:"M 145 130 L 155 145",eyeY:125,mouthCurve:"focused"};case 3:return{leftArm:"M 55 130 L 30 105",rightArm:"M 145 130 L 170 105",eyeY:124,mouthCurve:"hopeful"};case 4:return{leftArm:"M 55 130 L 20 95",rightArm:"M 145 130 L 180 95",eyeY:122,mouthCurve:"happy",bounce:!0};case 5:return{leftArm:"M 55 130 L 25 120",rightArm:"M 145 130 L 175 120",eyeY:125,mouthCurve:"proud"};default:return{leftArm:"M 55 130 L 25 110",rightArm:"M 145 130 L 175 110",eyeY:125,mouthCurve:"smile"}}})(),i=a.eyeSize||4,o=()=>{switch(a.mouthCurve){case"smile":return s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"wow":return s.jsx("ellipse",{cx:"100",cy:"148",rx:"6",ry:"8",stroke:"currentColor",strokeWidth:"3",fill:"none"});case"focused":return s.jsx("path",{d:"M 92 145 Q 100 152 108 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"hopeful":return s.jsx("path",{d:"M 90 144 Q 100 156 110 144",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"happy":return s.jsx("path",{d:"M 85 142 Q 100 165 115 142",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"proud":return s.jsx("path",{d:"M 88 145 Q 100 158 112 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});default:return s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"})}};return s.jsxs("svg",{viewBox:"0 0 200 240",className:`w-full h-full drop-shadow-sm text-brand transition-transform duration-500 ${e?"hover:scale-105":""} ${a.bounce?"animate-bounce":""}`,children:[t===4&&s.jsxs(s.Fragment,{children:[s.jsx("text",{x:"25",y:"70",className:"text-xl animate-ping",fill:"#FF6B9D",children:""}),s.jsx("text",{x:"165",y:"75",className:"text-xl animate-ping",style:{animationDelay:"0.3s"},fill:"#FF6B9D",children:""})]}),s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:t===4?"animate-pulse":""}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),t===1?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 75 105 Q 85 98 95 105",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 105 105 Q 115 98 125 105",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):t===2?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 108 Q 85 105 92 109",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 107 Q 115 104 122 109",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):t===3?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 76 108 Q 85 103 94 108",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 106 108 Q 115 103 124 108",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),s.jsx("circle",{cx:"85",cy:a.eyeY,r:i,stroke:"currentColor",strokeWidth:"3",fill:t===4?"currentColor":"none",className:"transition-all duration-300"}),s.jsx("circle",{cx:"115",cy:a.eyeY,r:i,stroke:"currentColor",strokeWidth:"3",fill:t===4?"currentColor":"none",className:"transition-all duration-300"}),t===4&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 122 Q 85 128 92 122",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 122 Q 115 128 122 122",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round"})]}),o(),s.jsx("path",{d:a.leftArm,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:a.rightArm,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:t%2===0?"M 85 180 L 85 215 L 75 215":"M 85 180 L 80 215 L 70 212",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300"}),s.jsx("path",{d:t%2===0?"M 115 180 L 115 215 L 125 215":"M 115 180 L 120 215 L 130 212",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300"}),t===5&&s.jsxs("g",{className:"animate-pulse",children:[s.jsx("circle",{cx:"175",cy:"100",r:"8",stroke:"#FFB800",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 175 108 L 175 130 M 172 120 L 178 120 M 172 125 L 178 125",stroke:"#FFB800",strokeWidth:"3",fill:"none",strokeLinecap:"round"})]})]})}const Un=[{id:"01",title:"",desc:"",icon:ot},{id:"02",title:"",desc:"",icon:Eo},{id:"03",title:"",desc:"",icon:Ua},{id:"04",title:"",desc:"",icon:Po},{id:"05",title:"",desc:"",icon:To},{id:"06",title:"",desc:"",icon:Mo}],Sd=[{id:"J",name:"J*** ",rating:5,tags:["#/"],content:""},{id:"W",name:"W*** ",rating:4,tags:["#"],content:""},{id:"L",name:"L*** ",rating:4,tags:["#/"],content:""},{id:"A",name:"A*** ",rating:5,tags:["#/"],content:""},{id:"H",name:"H*** ",rating:3,tags:["#/"],content:""},{id:"K",name:"K*** ",rating:4,tags:["#/"],content:""}],Cd=[{id:1,image:"https://images.unsplash.com/photo-1600585154526-990dced4db0d?q=80&w=1600&auto=format&fit=crop",badge:" 5 ",title:"",tags:["34.2 ","3  2 ",""],price:"1,288",location:"  ",reviews:[{avatar:"A",name:"",role:"3",tag:"",text:""},{avatar:"B",name:"",role:"",tag:"",text:""}]},{id:2,image:"https://images.unsplash.com/photo-1575517111478-7f6afd0973db?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["28.6 ","2  2 ",""],price:"1,052",location:"  ",reviews:[{avatar:"C",name:"",role:"5",tag:"",text:""},{avatar:"D",name:"",role:"",tag:"",text:" 3 "}]},{id:3,image:"https://images.unsplash.com/photo-1515263487990-61b07816b324?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["22.1 ","2  1 ",""],price:"838",location:"  ",reviews:[{avatar:"E",name:"",role:"",tag:"",text:" 6 "},{avatar:"F",name:"",role:"",tag:"",text:""}]},{id:4,image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["36.8 ","3  2 ",""],price:"1,560",location:"  ",reviews:[{avatar:"G",name:"",role:"",tag:"",text:""},{avatar:"H",name:"",role:"",tag:"",text:" 2 "}]},{id:5,image:"https://images.unsplash.com/photo-1501183638710-841dd1904471?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["27.4 ","2  2 ",""],price:"968",location:"  ",reviews:[{avatar:"I",name:"",role:"",tag:"",text:""},{avatar:"J",name:"",role:"",tag:"",text:""}]},{id:6,image:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["24.9 ","2  1 ",""],price:"898",location:"  ",reviews:[{avatar:"K",name:"",role:"",tag:"",text:""},{avatar:"L",name:"",role:"",tag:"",text:""}]}];function Pi(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Pi(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function zd(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Pi(e))&&(n&&(n+=" "),n+=t);return n}const Id=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},Ed=(e,t)=>({classGroupId:e,validator:t}),Ti=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Us="-",Zn=[],Pd="arbitrary..",Td=e=>{const t=$d(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Md(o);const l=o.split(Us),c=l[0]===""&&l.length>1?1:0;return Mi(l,c,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=n[o],d=r[o];return c?d?Id(d,c):c:d||Zn}return r[o]||Zn}}},Mi=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],i=r.nextPart.get(a);if(i){const d=Mi(e,t+1,i);if(d)return d}const o=r.validators;if(o===null)return;const l=t===0?e.join(Us):e.slice(t).join(Us),c=o.length;for(let d=0;d<c;d++){const u=o[d];if(u.validator(l))return u.classGroupId}},Md=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Pd+n:void 0})(),$d=e=>{const{theme:t,classGroups:r}=e;return Ad(r,t)},Ad=(e,t)=>{const r=Ti();for(const n in e){const a=e[n];en(a,r,n,t)}return r},en=(e,t,r,n)=>{const a=e.length;for(let i=0;i<a;i++){const o=e[i];Rd(o,t,r,n)}},Rd=(e,t,r,n)=>{if(typeof e=="string"){Ld(e,t,r);return}if(typeof e=="function"){Od(e,t,r,n);return}Fd(e,t,r,n)},Ld=(e,t,r)=>{const n=e===""?t:$i(t,e);n.classGroupId=r},Od=(e,t,r,n)=>{if(Dd(e)){en(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Ed(r,e))},Fd=(e,t,r,n)=>{const a=Object.entries(e),i=a.length;for(let o=0;o<i;o++){const[l,c]=a[o];en(c,$i(t,l),r,n)}},$i=(e,t)=>{let r=e;const n=t.split(Us),a=n.length;for(let i=0;i<a;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=Ti(),r.nextPart.set(o,l)),r=l}return r},Dd=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Ud=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const a=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return a(i,o),o},set(i,o){i in r?r[i]=o:a(i,o)}}},Ar="!",Bn=":",Zd=[],qn=(e,t,r,n,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:a}),Bd=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=a=>{const i=[];let o=0,l=0,c=0,d;const u=a.length;for(let b=0;b<u;b++){const y=a[b];if(o===0&&l===0){if(y===Bn){i.push(a.slice(c,b)),c=b+1;continue}if(y==="/"){d=b;continue}}y==="["?o++:y==="]"?o--:y==="("?l++:y===")"&&l--}const h=i.length===0?a:a.slice(c);let f=h,x=!1;h.endsWith(Ar)?(f=h.slice(0,-1),x=!0):h.startsWith(Ar)&&(f=h.slice(1),x=!0);const v=d&&d>c?d-c:void 0;return qn(i,x,f,v)};if(t){const a=t+Bn,i=n;n=o=>o.startsWith(a)?i(o.slice(a.length)):qn(Zd,!1,o,void 0,!0)}if(r){const a=n;n=i=>r({className:i,parseClassName:a})}return n},qd=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let a=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",c=t.has(o);l||c?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(o)):a.push(o)}return a.length>0&&(a.sort(),n.push(...a)),n}},Hd=e=>({cache:Ud(e.cacheSize),parseClassName:Bd(e),sortModifiers:qd(e),...Td(e)}),Wd=/\s+/,Vd=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],l=e.trim().split(Wd);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{isExternal:h,modifiers:f,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:b}=r(u);if(h){c=u+(c.length>0?" "+c:c);continue}let y=!!b,g=n(y?v.substring(0,b):v);if(!g){if(!y){c=u+(c.length>0?" "+c:c);continue}if(g=n(v),!g){c=u+(c.length>0?" "+c:c);continue}y=!1}const T=f.length===0?"":f.length===1?f[0]:i(f).join(":"),C=x?T+Ar:T,N=C+g;if(o.indexOf(N)>-1)continue;o.push(N);const w=a(g,y);for(let E=0;E<w.length;++E){const I=w[E];o.push(C+I)}c=u+(c.length>0?" "+c:c)}return c},Qd=(...e)=>{let t=0,r,n,a="";for(;t<e.length;)(r=e[t++])&&(n=Ai(r))&&(a&&(a+=" "),a+=n);return a},Ai=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Ai(e[n]))&&(r&&(r+=" "),r+=t);return r},Gd=(e,...t)=>{let r,n,a,i;const o=c=>{const d=t.reduce((u,h)=>h(u),e());return r=Hd(d),n=r.cache.get,a=r.cache.set,i=l,l(c)},l=c=>{const d=n(c);if(d)return d;const u=Vd(c,r);return a(c,u),u};return i=o,(...c)=>i(Qd(...c))},Kd=[],ae=e=>{const t=r=>r[e]||Kd;return t.isThemeGetter=!0,t},Ri=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Li=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Jd=/^\d+\/\d+$/,Yd=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tu=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,su=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pt=e=>Jd.test(e),B=e=>!!e&&!Number.isNaN(Number(e)),Qe=e=>!!e&&Number.isInteger(Number(e)),ar=e=>e.endsWith("%")&&B(e.slice(0,-1)),Ue=e=>Yd.test(e),ru=()=>!0,nu=e=>Xd.test(e)&&!eu.test(e),Oi=()=>!1,au=e=>tu.test(e),iu=e=>su.test(e),ou=e=>!L(e)&&!O(e),lu=e=>Jt(e,Ui,Oi),L=e=>Ri.test(e),ut=e=>Jt(e,Zi,nu),ir=e=>Jt(e,mu,B),Hn=e=>Jt(e,Fi,Oi),cu=e=>Jt(e,Di,iu),_s=e=>Jt(e,Bi,au),O=e=>Li.test(e),es=e=>Yt(e,Zi),du=e=>Yt(e,pu),Wn=e=>Yt(e,Fi),uu=e=>Yt(e,Ui),hu=e=>Yt(e,Di),Ns=e=>Yt(e,Bi,!0),Jt=(e,t,r)=>{const n=Ri.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Yt=(e,t,r=!1)=>{const n=Li.exec(e);return n?n[1]?t(n[1]):r:!1},Fi=e=>e==="position"||e==="percentage",Di=e=>e==="image"||e==="url",Ui=e=>e==="length"||e==="size"||e==="bg-size",Zi=e=>e==="length",mu=e=>e==="number",pu=e=>e==="family-name",Bi=e=>e==="shadow",fu=()=>{const e=ae("color"),t=ae("font"),r=ae("text"),n=ae("font-weight"),a=ae("tracking"),i=ae("leading"),o=ae("breakpoint"),l=ae("container"),c=ae("spacing"),d=ae("radius"),u=ae("shadow"),h=ae("inset-shadow"),f=ae("text-shadow"),x=ae("drop-shadow"),v=ae("blur"),b=ae("perspective"),y=ae("aspect"),g=ae("ease"),T=ae("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...N(),O,L],E=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],j=()=>[O,L,c],A=()=>[Pt,"full","auto",...j()],k=()=>[Qe,"none","subgrid",O,L],$=()=>["auto",{span:["full",Qe,O,L]},Qe,O,L],H=()=>[Qe,"auto",O,L],oe=()=>["auto","min","max","fr",O,L],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...j()],V=()=>[Pt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],R=()=>[e,O,L],Ae=()=>[...N(),Wn,Hn,{position:[O,L]}],Ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",uu,lu,{size:[O,L]}],Xt=()=>[ar,es,ut],pe=()=>["","none","full",d,O,L],_e=()=>["",B,es,ut],xs=()=>["solid","dashed","dotted","double"],hn=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[B,ar,Wn,Hn],mn=()=>["","none",v,O,L],gs=()=>["none",B,O,L],bs=()=>["none",B,O,L],er=()=>[B,O,L],vs=()=>[Pt,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ue],breakpoint:[Ue],color:[ru],container:[Ue],"drop-shadow":[Ue],ease:["in","out","in-out"],font:[ou],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ue],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ue],shadow:[Ue],spacing:["px",B],text:[Ue],"text-shadow":[Ue],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pt,L,O,y]}],container:["container"],columns:[{columns:[B,L,O,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Qe,"auto",O,L]}],basis:[{basis:[Pt,"full","auto",l,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[B,Pt,"auto","initial","none",L]}],grow:[{grow:["",B,O,L]}],shrink:[{shrink:["",B,O,L]}],order:[{order:[Qe,"first","last","none",O,L]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":oe()}],"auto-rows":[{"auto-rows":oe()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[l,"screen",...V()]}],"min-w":[{"min-w":[l,"screen","none",...V()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",r,es,ut]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,O,ir]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ar,L]}],"font-family":[{font:[du,L,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,O,L]}],"line-clamp":[{"line-clamp":[B,"none",O,ir]}],leading:[{leading:[i,...j()]}],"list-image":[{"list-image":["none",O,L]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",O,L]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...xs(),"wavy"]}],"text-decoration-thickness":[{decoration:[B,"from-font","auto",O,ut]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[B,"auto",O,L]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O,L]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O,L]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:Ie()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qe,O,L],radial:["",O,L],conic:[Qe,O,L]},hu,cu]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:Xt()}],"gradient-via-pos":[{via:Xt()}],"gradient-to-pos":[{to:Xt()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...xs(),"hidden","none"]}],"divide-style":[{divide:[...xs(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...xs(),"none","hidden"]}],"outline-offset":[{"outline-offset":[B,O,L]}],"outline-w":[{outline:["",B,es,ut]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",u,Ns,_s]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",h,Ns,_s]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[B,ut]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",f,Ns,_s]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[B,O,L]}],"mix-blend":[{"mix-blend":[...hn(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":hn()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[B]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[O,L]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[B]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:Ie()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",O,L]}],filter:[{filter:["","none",O,L]}],blur:[{blur:mn()}],brightness:[{brightness:[B,O,L]}],contrast:[{contrast:[B,O,L]}],"drop-shadow":[{"drop-shadow":["","none",x,Ns,_s]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",B,O,L]}],"hue-rotate":[{"hue-rotate":[B,O,L]}],invert:[{invert:["",B,O,L]}],saturate:[{saturate:[B,O,L]}],sepia:[{sepia:["",B,O,L]}],"backdrop-filter":[{"backdrop-filter":["","none",O,L]}],"backdrop-blur":[{"backdrop-blur":mn()}],"backdrop-brightness":[{"backdrop-brightness":[B,O,L]}],"backdrop-contrast":[{"backdrop-contrast":[B,O,L]}],"backdrop-grayscale":[{"backdrop-grayscale":["",B,O,L]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[B,O,L]}],"backdrop-invert":[{"backdrop-invert":["",B,O,L]}],"backdrop-opacity":[{"backdrop-opacity":[B,O,L]}],"backdrop-saturate":[{"backdrop-saturate":[B,O,L]}],"backdrop-sepia":[{"backdrop-sepia":["",B,O,L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",O,L]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[B,"initial",O,L]}],ease:[{ease:["linear","initial",g,O,L]}],delay:[{delay:[B,O,L]}],animate:[{animate:["none",T,O,L]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,O,L]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:gs()}],"rotate-x":[{"rotate-x":gs()}],"rotate-y":[{"rotate-y":gs()}],"rotate-z":[{"rotate-z":gs()}],scale:[{scale:bs()}],"scale-x":[{"scale-x":bs()}],"scale-y":[{"scale-y":bs()}],"scale-z":[{"scale-z":bs()}],"scale-3d":["scale-3d"],skew:[{skew:er()}],"skew-x":[{"skew-x":er()}],"skew-y":[{"skew-y":er()}],transform:[{transform:[O,L,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:vs()}],"translate-x":[{"translate-x":vs()}],"translate-y":[{"translate-y":vs()}],"translate-z":[{"translate-z":vs()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O,L]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O,L]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[B,es,ut,ir]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},xu=Gd(fu);function gu(...e){return xu(zd(e))}const bu=(e,t)=>{const r=e.split(".").map(a=>+a||0),n=t.split(".").map(a=>+a||0);for(let a=0;a<3;a++){const i=r[a]??0,o=n[a]??0;if(i<o)return-1;if(i>o)return 1}return 0},tn=Qt.forwardRef(({className:e,variant:t="default",children:r,...n},a)=>{const i="transition-all duration-200 bg-white border border-border-light",o={default:"mh-card p-4 md:p-6",hero:"mh-card mh-card--hero p-6 md:p-10 bg-gradient-to-br from-white to-brand-50",ai:"mh-ai-card"};return s.jsx("section",{ref:a,className:gu(i,o[t],e),...n,children:r})});tn.displayName="HomeCard";const qi=Qt.memo(({index:e,title:t,desc:r,icon:n,isLast:a})=>s.jsxs("div",{className:"group relative flex md:flex-col items-center md:items-center gap-4 md:gap-4 p-2 rounded-xl hover:bg-bg-soft transition-colors duration-300 cursor-default",children:[s.jsxs("div",{className:"relative z-10 flex-shrink-0",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-border-light text-text-muted flex items-center justify-center group-hover:border-brand group-hover:text-brand group-hover:scale-110 transition-all duration-300 shadow-sm",children:s.jsx(n,{size:20})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-brand text-white text-[10px] font-bold flex items-center justify-center ring-2 ring-white",children:e+1})]}),s.jsxs("div",{className:"flex-1 md:text-center",children:[s.jsx("h4",{className:"text-base font-black text-text-ink mb-1 group-hover:text-brand transition-colors",children:t}),s.jsx("p",{className:"text-xs text-text-muted font-medium leading-relaxed",children:r})]}),s.jsx("div",{className:"md:hidden ml-auto text-border-light group-hover:text-brand transition-colors",children:!a&&s.jsx($o,{size:16,className:"opacity-0 group-hover:opacity-20"})})]}));qi.displayName="HeroStep";function vu(){return s.jsxs(tn,{variant:"hero",className:"group/container relative overflow-hidden",children:[s.jsxs("div",{className:"relative z-10 mb-10 flex flex-col items-center gap-6 md:flex-row md:gap-10",children:[s.jsx("div",{className:"relative h-32 w-28 shrink-0",children:s.jsx(kd,{})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full border border-[var(--brand)]/20 bg-[var(--bg-page)] px-3 py-1 text-xs font-bold text-[var(--brand)]",children:[s.jsx(Ao,{size:14}),s.jsx("span",{children:""})]}),s.jsx("h3",{className:"mb-3 text-2xl font-black tracking-tight text-[var(--brand)] md:text-3xl",children:""}),s.jsxs("p",{className:"max-w-2xl text-sm font-medium leading-relaxed text-[var(--text-secondary)] md:text-base",children:[" ",s.jsx("br",{className:"hidden md:block"}),""]})]}),s.jsxs("a",{href:"/#policy",className:"hidden shrink-0 items-center gap-2 rounded-xl border-2 border-[var(--brand)] bg-white px-5 py-2.5 text-sm font-bold text-[var(--brand)] shadow-sm transition-all hover:bg-[var(--brand)] hover:text-white md:flex",children:[" ",s.jsx(Ro,{size:16})]})]}),s.jsxs("div",{className:"relative mt-4 pl-2 md:pl-0",children:[s.jsx("div",{className:"absolute left-0 top-8 -z-0 hidden h-0.5 w-full bg-border-light md:block"}),s.jsx("div",{className:"absolute inset-y-0 left-8 -z-0 w-0.5 bg-border-light md:hidden"}),s.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-6 md:gap-2",children:Un.map((e,t)=>s.jsx(qi,{...e,index:t,isLast:t===Un.length-1},e.id))})]})]})}function yu(){const[e,t]=p.useState(0);p.useEffect(()=>{const a=setInterval(()=>{t(i=>(i+1)%3)},3e3);return()=>clearInterval(a)},[]);const n=(()=>{switch(e){case 0:return{left:"M 55 130 L 35 145",right:"M 145 130 L 165 145"};case 1:return{left:"M 55 130 L 35 145",right:"M 145 130 L 175 100"};case 2:return{left:"M 55 130 L 25 115",right:"M 145 130 L 175 115"};default:return{left:"M 55 130 L 35 145",right:"M 145 130 L 165 145"}}})();return s.jsxs("div",{className:"w-32 h-40 mb-4 text-brand relative",children:[s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-brand-100/50 rounded-full blur-2xl -z-10"}),s.jsxs("svg",{viewBox:"0 0 200 240",className:"w-full h-full drop-shadow-sm animate-float",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"100",cy:"85",r:"4",fill:"currentColor"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:n.left,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:n.right,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:"M 85 180 L 85 215 L 75 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 115 180 L 115 215 L 125 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}const Vn={:{reviewCount:28,rating:4.3},:{reviewCount:45,rating:4.1},:{reviewCount:67,rating:3.9},:{reviewCount:19,rating:4.5},:{reviewCount:32,rating:4.2},:{reviewCount:24,rating:4.4},default:{reviewCount:12,rating:4.2}};function ju(e){return Vn[e]||Vn.default}function wu({name:e,topic:t="",reviewCount:r,rating:n}){const a=ju(e),i=r??(a==null?void 0:a.reviewCount)??10,o=n??(a==null?void 0:a.rating)??4;return s.jsxs("a",{href:"/maihouses/community-wall_mvp.html",target:"_blank",rel:"noopener noreferrer",className:"block mt-3 p-4 rounded-xl bg-gradient-to-br from-brand-50 to-white border-2 border-brand-100 hover:border-brand-300 hover:shadow-md transition-all group",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-brand-100 flex items-center justify-center",children:s.jsx(Za,{size:16,className:"text-brand-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-black text-brand-700 text-sm",children:e}),s.jsx("p",{className:"text-[11px] text-ink-500 font-medium",children:""})]})]}),s.jsx(Ws,{size:16,className:"text-brand-400 group-hover:text-brand-600 transition-colors"})]}),s.jsxs("p",{className:"text-xs text-ink-600 font-medium mb-3 line-clamp-2",children:[" ",t]}),s.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-ink-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qr,{size:12,className:"text-amber-500 fill-amber-500"}),s.jsx("span",{className:"font-bold text-ink-700",children:o})]}),s.jsxs("span",{children:[i," "]})]}),s.jsx("div",{className:"mt-3 py-2 px-3 rounded-lg bg-brand-700 text-white text-center text-xs font-bold group-hover:bg-brand-600 transition-colors",children:" "})]})}const Qn={"MH-2024-001":{title:" 3",price:"2,180",size:"35.8",rooms:"322",address:"16812",highlight:"3"},"MH-2024-002":{title:" ",price:"3,280",size:"52.6",rooms:"422",address:"8818",highlight:""},"MH-2024-003":{title:" ",price:"1,480",size:"26.2",rooms:"211",address:"668",highlight:""},"MH-2024-004":{title:" ",price:"1,980",size:"32.1",rooms:"321",address:"18815",highlight:""},default:{title:"",price:"",size:"-",rooms:"-",address:"",highlight:""}};function _u(e){return Qn[e]??Qn.default??{title:"",price:"",size:"-",rooms:"-",address:"",highlight:""}}function Nu({community:e,propertyId:t}){const r=_u(t);return s.jsxs("a",{href:"/property.html",target:"_blank",rel:"noopener noreferrer",className:"block mt-3 p-4 rounded-xl bg-gradient-to-br from-orange-50 to-white border-2 border-orange-100 hover:border-orange-300 hover:shadow-md transition-all group max-w-sm",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(hr,{size:14,className:"text-orange-500"}),s.jsx("span",{className:"text-[11px] text-ink-500 font-medium",children:e})]}),s.jsx("p",{className:"font-bold text-ink-800 text-sm group-hover:text-orange-600 transition-colors",children:r.title})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.highlight&&s.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-2 py-0.5 rounded-full whitespace-nowrap font-medium",children:r.highlight}),s.jsx(Ws,{size:14,className:"text-orange-400 group-hover:text-orange-600 transition-colors"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Vs,{size:12,className:"text-orange-400"}),s.jsx("span",{className:"font-bold text-orange-600",children:r.price})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-ink-600",children:[s.jsx(Lo,{size:12,className:"text-ink-400"}),s.jsx("span",{children:r.size})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-ink-500",children:[s.jsx(hs,{size:11}),s.jsx("span",{children:r.address})]}),s.jsx("div",{className:"mt-1 text-[11px] text-ink-400",children:r.rooms}),s.jsx("div",{className:"mt-3 pt-2 border-t border-orange-100 text-[11px] text-orange-500 font-medium opacity-0 group-hover:opacity-100 transition-opacity text-center",children:" "})]})}function ku(e){const t=/\[\[:([^:]+):([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;){const a=n[1],i=n[2];a&&i&&r.push({name:a.trim(),topic:i.trim()})}return r}function Su(e){const t=/\[\[:([^:]+):([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;){const a=n[1],i=n[2];a&&i&&r.push({community:a.trim(),propertyId:i.trim()})}return r}function Cu(e){const t=/\[\[:([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;)n[1]&&r.push(n[1].trim());return r}function zu(e){return e.replace(/\[\[:[^:]+:[^\]]+\]\]/g,"").replace(/\[\[:[^:]+:[^\]]+\]\]/g,"").replace(/\[\[:[^\]]+\]\]/g,"").trim()}function Iu({description:e}){return s.jsxs("div",{className:"my-3 border-l-4 border-orange-300 pl-3 italic text-gray-600 bg-gradient-to-r from-orange-50/80 to-amber-50/50 p-3 rounded-r-lg",children:[s.jsx("span",{className:"text-lg mr-2",children:""}),s.jsx("span",{className:"leading-relaxed",children:e})]})}function Eu({role:e,content:t,timestamp:r}){const n=e==="assistant"?ku(t):[],a=e==="assistant"?Su(t):[],i=e==="assistant"?Cu(t):[],o=e==="assistant"?zu(t):t;return s.jsx("div",{className:`flex ${e==="user"?"justify-end":"justify-start"} animate-fadeIn`,children:s.jsxs("div",{className:`max-w-[85%] rounded-2xl px-5 py-3.5 text-[15px] font-medium leading-relaxed shadow-sm ${e==="user"?"bg-brand-700 text-white rounded-br-sm":"bg-white text-ink-900 border border-brand-100 rounded-bl-sm"}`,children:[s.jsx("div",{className:"whitespace-pre-wrap",children:o}),i.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:i.map((l,c)=>s.jsx(Iu,{description:l},`scenario-${c}`))}),n.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:n.map((l,c)=>s.jsx(wu,{name:l.name,topic:l.topic},`community-${c}`))}),a.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:a.map((l,c)=>s.jsx(Nu,{community:l.community,propertyId:l.propertyId},`property-${c}`))}),r&&s.jsx("div",{className:`mt-1.5 text-[11px] font-bold ${e==="user"?"text-brand-300":"text-brand-600/60"} text-right`,children:new Date(r).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})})]})})}function Hi(){const[e,t]=p.useState([]),[r,n]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState(Ln()),u=p.useRef(null),f=e.filter(v=>v.role==="user").length>=3?mc:hc;p.useEffect(()=>{fc();const v=localStorage.getItem("mai-last-chat"),b=new Date().toDateString();if(!v||v!==b){const y=Jc();y&&l(y);const g=setTimeout(()=>{t([{role:"assistant",content:y||"",timestamp:new Date().toISOString()}]),localStorage.setItem("mai-last-chat",b)},1500);return()=>clearTimeout(g)}},[]),p.useEffect(()=>{const v=new Date,b=v.getHours(),y=v.getMinutes();if(b===22&&y<30&&!localStorage.getItem("mai-goodnight-"+v.toDateString())&&e.length>0){const T=setTimeout(()=>{t(C=>[...C,{role:"assistant",content:` 
...`,timestamp:new Date().toISOString()}]),localStorage.setItem("mai-goodnight-"+v.toDateString(),"1")},5e3);return()=>clearTimeout(T)}},[e.length]),p.useEffect(()=>{d(Ln())},[e.length]),p.useEffect(()=>{const v=()=>{Ac()};return window.addEventListener("beforeunload",v),()=>window.removeEventListener("beforeunload",v)},[]),p.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[e]);const x=async(v=r)=>{if(!v.trim()||a)return;v===""&&hd(!0);const b={role:"user",content:v.trim(),timestamp:new Date().toISOString()};t(g=>[...g,b]),n(""),i(!0);const y={role:"assistant",content:"",timestamp:new Date().toISOString()};t(g=>[...g,y]);try{const g=await ps([...e,b],T=>{t(C=>{const N=[...C],w=N[N.length-1];return w&&w.role==="assistant"&&(w.content+=T),N})})}catch(g){console.error(g),t(T=>{const C=[...T],N=C[C.length-1];return N&&(N.content=""),C})}finally{i(!1)}};return s.jsxs("section",{className:"group relative bg-gradient-to-br from-white via-[#F8FAFC] to-[#00385a08] rounded-[24px] border border-brand-100 shadow-[0_8px_24px_rgba(0,56,90,0.06)] overflow-hidden hover:shadow-[0_12px_32px_rgba(0,56,90,0.1)] transition-all duration-300 isolate",children:[s.jsx("div",{className:"absolute -top-24 -right-24 w-80 h-80 bg-brand-100/30 rounded-full blur-3xl pointer-events-none mix-blend-multiply"}),s.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-brand-700/5 rounded-full blur-3xl pointer-events-none mix-blend-multiply"}),s.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#00385a08_1px,transparent_1px),linear-gradient(to_bottom,#00385a08_1px,transparent_1px)] bg-[size:24px_24px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none z-0"}),s.jsx("div",{className:"h-1.5 w-full bg-gradient-to-r from-brand-700 via-brand-600 to-brand-500 relative z-20"}),s.jsxs("div",{className:"p-5 md:p-8 md:pt-6 relative z-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/80 border border-brand-100 flex items-center justify-center text-brand-700 relative overflow-hidden shrink-0 shadow-sm backdrop-blur-sm group-hover:scale-105 transition-transform duration-300",children:s.jsx(at,{size:26,strokeWidth:2})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-black text-brand-700 text-xl tracking-tight flex items-center gap-2",children:["MaiMai ",s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gradient-to-r from-brand-700 to-brand-600 text-white text-[10px] font-bold tracking-wider uppercase shadow-sm",children:[s.jsx(Hr,{size:10})," v6.0"]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsx("p",{className:"text-xs text-ink-600 font-bold tracking-wide",children:" "}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-50 border border-pink-200 text-pink-600 text-[10px] font-bold",children:[s.jsx(Ba,{size:10,fill:"currentColor"})," ",c.label," ",c.emoji]})]})]})]}),s.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:f.map(v=>s.jsx("button",{onClick:()=>x(v),className:"px-3.5 py-1.5 rounded-full bg-white border border-brand-100 text-brand-700 text-xs font-bold hover:bg-brand-700 hover:text-white hover:border-brand-700 transition-all active:scale-95 shadow-sm hover:shadow-md backdrop-blur-sm",children:v},v))})]}),s.jsxs("div",{ref:u,className:"h-[380px] overflow-y-auto rounded-2xl bg-white/50 border border-brand-100/60 p-5 shadow-inner mb-4 flex flex-col gap-4 scroll-smooth backdrop-blur-md",role:"log","aria-live":"polite",children:[e.length===0?s.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-center p-4 opacity-80",children:[s.jsx(yu,{}),s.jsx("p",{className:"mb-2 font-black text-brand-700 text-base",children:o?o.split("")[0]+"":" "}),s.jsx("p",{className:"text-sm leading-relaxed text-ink-600 max-w-xs mx-auto font-medium",children:o?o.includes("")?o.split("").slice(1).join(""):"":s.jsxs(s.Fragment,{children:["",s.jsx("br",{}),""]})})]}):e.map((v,b)=>s.jsx(Eu,{role:v.role,content:v.content,timestamp:v.timestamp},b)),a&&s.jsx("div",{className:"flex justify-start animate-fadeIn",children:s.jsxs("div",{className:"rounded-2xl rounded-bl-sm px-4 py-3 bg-white border border-brand-100 text-brand-600 text-sm flex items-center gap-2 shadow-sm",children:[s.jsx("span",{className:"font-bold",children:"..."}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_ease-in-out_both]"}),s.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_ease-in-out_both_0.2s]"}),s.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_ease-in-out_both_0.4s]"})]})]})})]}),s.jsxs("div",{className:"relative group/input",children:[s.jsx("input",{type:"text",className:"w-full pl-5 pr-14 py-4 rounded-xl border-2 border-brand-100 bg-white/80 text-ink-900 font-bold text-[15px] placeholder:text-ink-400/80 transition-all focus:outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-50/50 hover:border-brand-300 shadow-sm backdrop-blur-sm",placeholder:"...",value:r,onChange:v=>n(v.target.value),onKeyDown:v=>v.key==="Enter"&&!v.shiftKey&&x(),disabled:a}),s.jsx("button",{onClick:()=>x(),disabled:a||!r.trim(),className:"absolute right-2 top-2 bottom-2 aspect-square rounded-lg bg-brand-700 text-white flex items-center justify-center shadow-md transition-all hover:bg-brand-600 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:transform-none disabled:shadow-none",children:s.jsx(Oo,{size:20,strokeWidth:2.5,className:"-ml-0.5 translate-y-[1px]"})})]})]})]})}const Wi=Qt.memo(({id:e,name:t,rating:r,tags:n,content:a})=>s.jsxs("article",{className:"flex gap-3 border border-[#E6EDF7] rounded-2xl p-3.5 bg-white relative hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] transition-all duration-200 hover:-translate-y-0.5",children:[s.jsx("div",{className:"w-[38px] h-[38px] rounded-full bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] border border-[#E6EDF7] flex items-center justify-center font-black text-[#00385a] text-[15px] shrink-0 shadow-[inset_0_1px_2px_rgba(255,255,255,0.8),0_2px_4px_rgba(0,56,90,0.05)]",children:e}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("div",{className:"font-black text-[15px] text-[#0A2246] flex items-center gap-1.5",children:t}),s.jsx("div",{className:"flex gap-0.5","aria-label":`${r} stars`,children:Array.from({length:5}).map((i,o)=>s.jsx("span",{className:`text-xs ${o<r?"text-[#00385a]":"text-[#E6EDF7]"}`,children:""},o))})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:n.map(i=>s.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-md bg-[#F6F9FF] border border-[#E6EDF7] text-[#00385a] font-bold tracking-wide",children:i},i))}),s.jsx("p",{className:"text-[13px] leading-relaxed text-[#4B5563] font-medium text-justify",children:a})]})]}));Wi.displayName="ReviewCard";function Pu(){return s.jsxs(tn,{className:"bg-white/96 backdrop-blur-md border border-[#E6EDF7] shadow-[0_4px_20px_rgba(0,56,90,0.03)] p-3",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#00385a] to-[#005585] rounded-2xl px-4 py-3 mb-4 flex justify-between items-center shadow-[0_2px_8px_rgba(0,56,90,0.15)] relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-6 -top-6 w-24 h-24 bg-white/5 rounded-full blur-2xl pointer-events-none"}),s.jsxs("div",{className:"flex items-center gap-2.5 relative z-10",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E63946] shadow-[0_0_8px_rgba(230,57,70,0.6)]"}),s.jsx("h3",{className:"text-lg font-black m-0 text-white tracking-wide text-shadow-sm",children:""}),s.jsx("span",{className:"text-[11px] font-bold text-[#00385a] bg-white/95 backdrop-blur-sm px-2.5 py-0.5 rounded-full shadow-sm border border-white/20",children:""})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Sd.map(e=>s.jsx(Wi,{...e},e.id))}),s.jsxs("a",{className:"mt-4 flex items-center gap-2.5 bg-gradient-to-b from-white to-[#F6F9FF] border border-[#E6EDF7] p-3.5 rounded-xl font-black text-[#00385a] no-underline relative lg:justify-center lg:text-center group hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] hover:border-[#00385a]/20 transition-all duration-200 active:translate-y-px",href:"/maihouses/community-wall_mvp.html","aria-label":"",children:[s.jsx("span",{className:"text-[15px] tracking-wide lg:mx-auto group-hover:text-[#004E7C] transition-colors",children:""}),s.jsx("span",{className:"ml-auto bg-[#00385a] text-white rounded-lg text-xs font-bold px-3 py-1.5 lg:absolute lg:right-[14px] lg:top-1/2 lg:-translate-y-1/2 lg:ml-0 group-hover:bg-[#004E7C] transition-colors shadow-sm",children:" "})]})]})}function Tu({property:e}){return s.jsxs("article",{className:"bg-white border border-[#E6EDF7] rounded-2xl overflow-hidden relative transition-all duration-[180ms] ease-out shadow-none hover:shadow-[0_10px_26px_rgba(13,39,94,0.12)] hover:-translate-y-0.5 hover:border-[#1749d738] group isolate",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(60%_60%_at_80%_-10%,rgba(23,73,215,0.12),transparent_60%)] opacity-80"}),s.jsxs("a",{href:`/property/${e.id}`,className:"block aspect-[4/3] bg-[#e9ecf5] relative overflow-hidden",children:[s.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover block transform scale-100 transition-transform duration-[600ms] cubic-bezier(0.2,0.65,0.2,1) group-hover:scale-105"}),s.jsx("span",{className:"absolute left-2.5 top-2.5 bg-black/75 text-white text-xs font-extrabold px-2 py-1 rounded-full tracking-[0.2px] shadow-[0_4px_10px_rgba(0,0,0,0.18)]",children:e.badge})]}),s.jsxs("div",{className:"p-3 pb-3.5",children:[s.jsx("div",{className:"font-extrabold text-base leading-[1.35] my-0.5 mb-2 tracking-[0.3px] text-[#0A2246] lg:text-[21px]",children:e.title}),s.jsx("div",{className:"flex flex-wrap gap-2 items-center text-[#6C7B91] text-[13px] mb-1.5",children:e.tags.map((t,r)=>s.jsx("span",{className:"px-2.5 py-0.5 rounded-full bg-[#F6F9FF] border border-[#E6EDF7] font-extrabold text-[#2A2F3A] transition-all duration-120 ease-out group-hover:-translate-y-px group-hover:shadow-[0_4px_10px_rgba(0,56,90,0.10)]",children:t},r))}),s.jsxs("div",{className:"text-[19px] font-black text-[#111] my-2 mb-1 tracking-[0.2px]",children:["NT$ ",e.price," "]}),s.jsx("div",{className:"text-[13px] text-[#6C7B91]",children:e.location}),s.jsxs("div",{className:"mt-2.5 px-3 py-2.5 border border-[#E6EDF7] rounded-xl bg-gradient-to-b from-[#F6F9FF] to-white",children:[s.jsx("div",{className:"flex items-center gap-2 text-[13px] font-black mb-2 text-black/85 before:content-[''] before:text-xs before:leading-none before:text-[#00385a] before:drop-shadow-[0_1px_0_rgba(0,56,90,0.12)]",children:""}),e.reviews.map((t,r)=>s.jsxs("div",{className:`flex gap-2.5 items-start py-2 ${r!==0?"border-t border-dashed border-black/10":""}`,children:[s.jsx("div",{className:"w-[30px] h-[30px] rounded-full grid place-items-center text-xs font-black bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-[#00385a] flex-none shadow-[inset_0_0_0_1px_rgba(0,56,90,0.15)]",children:t.avatar}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 text-xs text-black/60",children:[s.jsxs("span",{className:"font-black text-black/85",children:[t.name,"  ",t.role]}),s.jsx("span",{className:"w-1 h-1 rounded-full bg-black/20 inline-block"}),s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#00385a]/10 text-[#00385a] font-black",children:t.tag})]}),s.jsx("div",{className:"text-[13px] leading-[1.6] text-black/85",children:t.text})]})]},r)),s.jsx("button",{type:"button",className:"mt-2.5 w-full px-3 py-2.5 rounded-xl border border-[#00385a]/30 bg-gradient-to-b from-white to-[#F5F7FA] cursor-pointer text-[13px] font-black text-[#00385a] transition-all duration-150 ease-out hover:from-white hover:to-[#E8F0FF] hover:shadow-[0_6px_14px_rgba(0,56,90,0.18)] active:translate-y-px",children:""})]})]})]})}function Mu(){return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center gap-2.5 my-[18px] mb-3","aria-label":"",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 border border-[#E6EDF7] rounded-full bg-gradient-to-b from-white to-[#F6F9FF] text-[#00385a] font-black text-sm tracking-[0.2px]",children:[s.jsx("span",{className:"w-[18px] h-[18px] rounded-md grid place-items-center bg-gradient-to-b from-[#00385a] to-[#004E7C] text-white text-xs font-black shadow-[0_2px_6px_rgba(0,56,90,0.18)]",children:""}),s.jsx("span",{className:"leading-none text-base md:text-lg md:font-bold",children:""}),s.jsx("span",{className:"ml-1.5 text-sm text-[#6C7B91] font-bold",children:""})]}),s.jsx("div",{className:"h-1.5 rounded-full flex-1 bg-gradient-to-r from-[#00385a] via-[#004E7C] to-[#7EA5FF] bg-[length:200%_100%] opacity-25 ml-2.5 animate-mhRecoBar","aria-hidden":"true"})]}),s.jsx("div",{className:"grid grid-cols-1 gap-[18px] md:grid-cols-2 lg:grid-cols-3","aria-label":"",children:Cd.map(e=>s.jsx(Tu,{property:e},e.id))})]})}const $u=()=>{const[e,t]=p.useState(!1),r=p.useMemo(()=>ms(),[]),n=p.useMemo(()=>lc(3),[]),a=p.useMemo(()=>dc(r.milestones),[r.milestones]);if(p.useEffect(()=>{const{isFirstVisit:u}=ac(),h=n&&n.length>0||!!a||!!r.lastMood,f=!u&&!oc()&&h;t(f),f&&ye(je.WarmbarView,{tags:n,milestone:!!a,lastMood:r.lastMood})},[n,a,r.lastMood]),!e)return null;const i=u=>u==="stress"?"":u==="rest"?"":"",o=n&&n.length>0?`${n.join("")}`:null,l=a||(o?`${i(r.lastMood)}${o}`:`${i(r.lastMood)}`),c=()=>{ye(je.WarmbarContinue,{tags:n,milestone:!!a});const u=a?"":n&&n.length>0?` ${n.join("")}`:"";window.dispatchEvent(new CustomEvent("mai:chat:start",{detail:{text:u}}))},d=()=>{ic(),t(!1),ye(je.WarmbarDismiss,{})};return s.jsxs("div",{className:"w-full bg-[#F5F8FF] text-[#0a2246] text-sm leading-[34px] h-[34px] text-center tracking-wide border-b border-[#E6ECFF] flex items-center justify-center gap-3",role:"status","aria-live":"polite",children:[s.jsx("span",{children:l}),s.jsx("button",{className:"px-2.5 py-0.5 rounded-full border border-[#1749D7] bg-[#1749D7] text-white cursor-pointer leading-6 h-[26px] hover:bg-[#123cb3] transition-colors",onClick:c,children:""}),s.jsx("button",{className:"px-2.5 py-0.5 rounded-full border border-[#C9D5FF] bg-white text-[#1749D7] cursor-pointer leading-6 h-[26px] hover:bg-gray-50 transition-colors",onClick:d,children:""})]})};function Au({config:e}){const[t,r]=p.useState(null);p.useEffect(()=>{Ci().then(a=>{a.ok&&a.data&&(a.data.maintenance||bu(a.data.backendVersion,e.minBackend)<0)&&(console.warn(""),r(""))})},[e.minBackend]),p.useEffect(()=>{const a=i=>{var o;try{Xr("unhandled_promise_rejection","/",((o=i.reason)==null?void 0:o.message)||String(i.reason))}catch{}};return globalThis.addEventListener("unhandledrejection",a),()=>globalThis.removeEventListener("unhandledrejection",a)},[]);const n=e.features||{};return s.jsxs(s.Fragment,{children:[s.jsx(Nd,{}),s.jsx($u,{}),t&&s.jsx("div",{className:"mx-auto mt-4 max-w-container rounded-md bg-yellow-500 p-3 text-sm text-white",children:t}),s.jsxs("main",{className:"relative mx-auto max-w-container space-y-6 p-4 md:space-y-8 md:p-6",children:[n.heroAssure!==!1&&s.jsx(vu,{}),n.smartAsk!==!1&&s.jsx(Hi,{}),s.jsx(Pu,{}),n.propertyGrid!==!1&&s.jsx(Mu,{})]})]})}function Ru(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""})]})}function Lu(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""})]})}function Ou(e,t,r){const n=t/12/100,a=r*12;return n===0?e/a:e*n/(1-Math.pow(1+n,-a))}const Fu=()=>{const[e,t]=p.useState(1500),[r,n]=p.useState(30),[a,i]=p.useState(2.25),[o,l]=p.useState(20),[c,d]=p.useState(""),u=p.useMemo(()=>Math.max(0,e*(1-r/100)),[e,r]),h=p.useMemo(()=>Math.round(Ou(u*1e4,a,o)),[u,a,o]),f=3e3,x=p.useMemo(()=>typeof c!="number"||c<=0?null:Math.round((h+f)/c*100),[c,h]),v=()=>{const y=`
${e}${r}%  ${u.toFixed(0)}${o}${a}%   ${h}  ${f} `+(x!==null?`
 ${x}%`:"");navigator.clipboard.writeText(y).then(()=>ye(je.BudgetCopy,{}))},b=x===null?"":x>=50?"":x>=35?"/":"";return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Lite"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8},children:[s.jsxs("label",{children:["()",s.jsx("input",{type:"number",value:e,onChange:y=>t(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["(%)",s.jsx("input",{type:"number",value:r,onChange:y=>n(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["(%)",s.jsx("input",{type:"number",value:a,onChange:y=>i(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["",s.jsx("input",{type:"number",value:o,onChange:y=>l(Number(y.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["()",s.jsx("input",{type:"number",value:typeof c=="number"?c:"",onChange:y=>{const g=Number(y.target.value);d(Number.isFinite(g)?g:"")},style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]})]}),s.jsxs("div",{style:{marginTop:10,fontSize:14,color:"#0a2246"},children:[" ",s.jsx("b",{children:h.toLocaleString()}),"  ",s.jsx("b",{children:u.toFixed(0)})," ",x!==null&&s.jsxs(s.Fragment,{children:[" ",s.jsxs("b",{children:[x,"%"]}),""]})]}),s.jsx("div",{style:{marginTop:8,color:"#6b7280"},children:b}),s.jsx("button",{onClick:v,style:{marginTop:8,padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:""})]})},Du=({onAdopt:e})=>{const[t,r]=p.useState(""),[n,a]=p.useState("agent"),[i,o]=p.useState("detail"),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,f]=p.useState(!1),[x,v]=p.useState(!1),b=async()=>{const g=t.trim();if(g){f(!0);try{const C=(await fd(g,{audience:n,intent:i})).split(/\n+/).map(E=>E.trim()).filter(Boolean),N=C.find(E=>/^V1/.test(E))||"",w=C.find(E=>/^V2/.test(E))||"";c(N.replace(/^V1[:]\s?/,"")),u(w.replace(/^V2[:]\s?/,"")),ye(je.RewriteGen,{audience:n,intent:i})}finally{f(!1)}}},y=g=>{e==null||e(g),v(!0),ye(je.RewriteAdopt,{audience:n,intent:i}),setTimeout(()=>v(!1),2500)};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:""}),s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[s.jsxs("label",{children:["",s.jsxs("select",{value:n,onChange:g=>a(g.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[s.jsx("option",{value:"agent",children:""}),s.jsx("option",{value:"owner",children:""})]})]}),s.jsxs("label",{children:["",s.jsxs("select",{value:i,onChange:g=>o(g.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[s.jsx("option",{value:"detail",children:""}),s.jsx("option",{value:"view",children:""}),s.jsx("option",{value:"pet",children:""}),s.jsx("option",{value:"price",children:"/"})]})]})]}),s.jsx("textarea",{rows:3,placeholder:"/",value:t,onChange:g=>r(g.target.value),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:s.jsx("button",{onClick:b,disabled:h,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:h?"":""})}),(l||d)&&s.jsxs("div",{style:{marginTop:10,display:"grid",gap:8},children:[l&&s.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:""}),s.jsx("div",{style:{marginBottom:6},children:l}),s.jsx("button",{onClick:()=>y(l),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"/"})]}),d&&s.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:""}),s.jsx("div",{style:{marginBottom:6},children:d}),s.jsx("button",{onClick:()=>y(d),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"/"})]}),x&&s.jsx("div",{style:{color:"#16a34a"},children:" "})]})]})},Vi="mai-notes-v1";function Uu(){try{const e=localStorage.getItem(Vi);return e?JSON.parse(e):[]}catch{return[]}}function Zu(e){localStorage.setItem(Vi,JSON.stringify(e))}function Rr(e,t){const r=Uu(),n={id:Math.random().toString(36).slice(2),createdAt:Date.now(),note:e,...t&&{echo:t}};return r.unshift(n),Zu(r),n}const Bu=()=>{const[e,t]=p.useState(""),[r,n]=p.useState(null),[a,i]=p.useState(!1),[o,l]=p.useState(!1),c=async()=>{const d=e.trim();if(d){i(!0);try{const u=await xd(d);n(u),Rr(d,u),ye(je.NoteSaved,{})}catch{Rr(d)}finally{i(!1)}}};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:""}),s.jsx("textarea",{rows:3,placeholder:"",value:e,onChange:d=>t(d.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),o&&s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:4},children:""}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{onClick:c,disabled:a,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:a?"":""}),r&&s.jsxs("span",{style:{color:"#6b7280"},children:["AI ",r]})]})]})};function qu(e){const t=e.split(`
`).find(n=>n.trim().startsWith("#tags"));return t?t.replace(/^#tags\s*[:]\s*/i,"").split(",").map(n=>n.trim()).filter(Boolean).slice(0,5):[]}const Hu=()=>{const[e,t]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(null),[c,d]=p.useState(!1),u=async()=>{d(!0);try{const f=await bd(e,r,a);l(f);const x=qu(f);x.length&&rc(x),ye(je.DebriefGen,{tags:x})}finally{d(!1)}},h=()=>{const f=`
${e}
${r}
${a}
---
${o??""}`;Rr(f),ye(je.DebriefSave,{})};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Mini Debrief"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("input",{value:e,onChange:f=>t(f.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("input",{value:r,onChange:f=>n(f.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("input",{value:a,onChange:f=>i(f.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{onClick:u,disabled:c,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:c?"":" Must/Nice/Avoid + #tags"}),o&&s.jsx("button",{onClick:h,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:""})]}),o&&s.jsx("div",{style:{marginTop:10,whiteSpace:"pre-wrap",color:"#0a2246"},children:o})]})},Wu=["","","","","",""],Gn=({text:e})=>{const[t,r]=p.useState(!1),[n,a]=p.useState(""),[i,o]=p.useState(!1),l=async()=>{if(!n){o(!0);try{const d=await gd(e);a(d),ye(je.ELI5Open,{term:e})}finally{o(!1)}}};p.useEffect(()=>{const u=`mai-eli5-suggest-${new Date().toISOString().slice(0,10)}`;Wu.some(f=>e.includes(f))&&!localStorage.getItem(u)&&(localStorage.setItem(u,"1"),r(!0),l())},[]);const c=async()=>{const d=!t;r(d),d&&await l()};return s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",position:"relative"},children:[s.jsx("button",{"aria-label":"",onClick:c,style:{marginLeft:6,width:18,height:18,borderRadius:999,border:"1px solid #C9D5FF",background:"#F5F8FF",color:"#1749D7",fontSize:12,cursor:"pointer"},children:"?"}),t&&s.jsxs("div",{style:{position:"absolute",top:"120%",left:0,background:"#fff",border:"1px solid #E6ECFF",borderRadius:8,padding:10,width:280,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",zIndex:50},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:6},children:""}),s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:i?"":n})]})]})};function Vu(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container space-y-6 rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Fu,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Du,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Bu,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Hu,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",s.jsx(Gn,{text:""})," ",s.jsx(Gn,{text:""})," "]})]})]})}const Qu={5:30*1e3},Lr=e=>({id:e,currentStep:1,isPaid:!1,steps:{1:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},2:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,data:{risks:{water:!1,wall:!1,structure:!1,other:!1}}},3:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},4:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},5:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,paymentStatus:"pending",paymentDeadline:null,data:{}},6:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,checklist:[],data:{}}},supplements:[]}),Kn=e=>{if(typeof window>"u")return Lr(e);const t=sessionStorage.getItem(`mock_tx_${e}`);return t?JSON.parse(t):Lr(e)},Jn=e=>{typeof window<"u"&&sessionStorage.setItem(`mock_tx_${e.id}`,JSON.stringify(e))},ks={fetchData:async e=>Kn(e),dispatch:async(e,t,r,n)=>{var l,c,d;await new Promise(u=>setTimeout(u,600));const a=Kn(t),i=JSON.parse(JSON.stringify(a)),o=parseInt(n.step||i.currentStep);try{switch(e){case"submit":if(r!=="agent")throw new Error("");i.steps[o]&&(i.steps[o].data={...i.steps[o].data,...n.data},i.steps[o].agentStatus="submitted");break;case"confirm":if(r!=="buyer")throw new Error("");if(i.steps[o]&&(i.steps[o].buyerStatus="confirmed",n.note&&(i.steps[o].data={...i.steps[o].data,buyerNote:n.note})),o===5)i.steps[5]&&(i.steps[5].paymentStatus="initiated",i.steps[5].paymentDeadline=Date.now()+(Qu[5]||3e4));else if(o===6){if(!((c=(l=i.steps[6])==null?void 0:l.checklist)==null?void 0:c.every(x=>x.checked)))throw new Error("");i.steps[6]&&(i.steps[6].locked=!0)}else i.steps[o]&&(i.steps[o].locked=!0),i.currentStep+=1;break;case"payment":if(r!=="agent")throw new Error("");if(((d=i.steps[5])==null?void 0:d.paymentStatus)!=="initiated")throw new Error("");i.isPaid=!0,i.steps[5]&&(i.steps[5].paymentStatus="completed",i.steps[5].locked=!0),i.currentStep=6,i.steps[6]&&(i.steps[6].checklist=[{id:"utilities",label:" ",checked:!1},{id:"security",label:" ",checked:!1},{id:"keys",label:" ",checked:!1},{id:"condition",label:"  (/)",checked:!1}]);break;case"checklist":const u=i.steps[6];if(u&&u.checklist){const f=u.checklist.find(x=>x.id===n.itemId);f&&(f.checked=n.checked)}break;case"supplement":i.supplements.push({role:r,content:n.content,timestamp:Date.now()});break;case"reset":const h=Lr(t);return Jn(h),{success:!0,tx:h}}return Jn(i),{success:!0,tx:i}}catch(u){return{success:!1,error:u.message}}}},or={fetchData:async(e,t)=>{try{const r=await fetch(`/api/trust/status?id=${e}`);if(r.ok)return await r.json();if(r.status===401||r.status===403)throw new Error("UNAUTHORIZED");return null}catch(r){if(r.message==="UNAUTHORIZED")throw r;return console.error(r),null}},dispatch:async(e,t,r,n)=>{try{const a=await fetch(`/api/trust/${e}?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.status===401||a.status===403)return{success:!1,error:"UNAUTHORIZED"};const i=await a.json();return i.error?{success:!1,error:i.error}:{success:!0,tx:i.state||i}}catch(a){return{success:!1,error:a.message}}}};function Gu(){const[e,t]=p.useState(!1),[r,n]=p.useState(""),[a,i]=p.useState("agent"),[o,l]=p.useState(null),[c,d]=p.useState(!0),[u,h]=p.useState(!1),[f,x]=p.useState("--:--:--"),[v,b]=p.useState(!1);p.useEffect(()=>{if(typeof window>"u")return;(async()=>{const N=window.location.hash;if(N.includes("token=")){const w=N.split("token=")[1];window.history.replaceState(null,"",window.location.pathname);try{await fetch("/api/trust/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:w})})}catch(E){console.error("Session exchange failed",E),re.error("")}}try{const w=await fetch("/api/trust/me");if(w.ok){const E=await w.json();i(E.role),n(E.caseId),t(!1),b(!1),await g(E.caseId)}else d(!1)}catch(w){console.error(w),d(!1)}})()},[]);const y=p.useCallback(async()=>{t(!0),b(!1);const C="MOCK-DEMO-01";n(C),i("agent");const N=await ks.fetchData(C);l(N),re.success(" ()")},[]),g=p.useCallback(async C=>{const N=C||r;if(N&&!(v&&!e)){d(!0);try{let w;e?w=await ks.fetchData(N):w=await or.fetchData(N,""),w&&(l(w),b(!1))}catch(w){console.error(w),w.message==="UNAUTHORIZED"&&(b(!0),re.error(""))}finally{d(!1)}}},[e,r,v]);p.useEffect(()=>{if(!e&&r&&!v){const C=setInterval(()=>g(),5e3);return()=>clearInterval(C)}},[r,e,g,v]),p.useEffect(()=>{const C=setInterval(()=>{var N,w;if(((w=(N=o==null?void 0:o.steps)==null?void 0:N[5])==null?void 0:w.paymentStatus)==="initiated"&&o.steps[5].paymentDeadline){const E=o.steps[5].paymentDeadline-Date.now();if(E<=0)x(""),e||g();else{const I=Math.floor(E/36e5),j=Math.floor(E%36e5/6e4),A=Math.floor(E%6e4/1e3);x(`${I}:${j.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`)}}},1e3);return()=>clearInterval(C)},[o,e,g]);const T=p.useCallback(async(C,N={})=>{if(!u){h(!0);try{const w=e?ks:or;let E;return e?E=await ks.dispatch(C,r,a,N):E=await or.dispatch(C,r,"",N),E.success?(E.tx&&l(E.tx),await g(),re.success(""),!0):(E.error==="UNAUTHORIZED"?(b(!0),re.error("")):re.error(E.error||""),!1)}catch(w){return console.error(w),re.error(""),!1}finally{h(!1)}}},[e,r,a,g,u]);return{isMock:e,caseId:r,setCaseId:n,role:a,setRole:i,setToken:()=>{},token:"",tx:o,setTx:l,loading:c,isBusy:u,timeLeft:f,startMockMode:y,dispatchAction:T,fetchData:g}}function Yn(){La();const{isMock:e,caseId:t,role:r,setRole:n,tx:a,loading:i,isBusy:o,timeLeft:l,startMockMode:c,dispatchAction:d}=Gu(),[u,h]=p.useState(""),[f,x]=p.useState("");typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"));const v=async(I,j={})=>{await d(I,j)&&(h(""),x(""))},b=I=>v("submit",{step:I,data:{note:u}}),y=I=>v("confirm",{step:I,note:u}),g=()=>{confirm("")&&v("payment")},T=(I,j)=>{r==="buyer"&&v("checklist",{itemId:I,checked:j})},C=()=>v("supplement",{content:f}),N=()=>{confirm("")&&v("reset")},w=()=>{n(r==="agent"?"buyer":"agent")};if(!a&&!i)return s.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-4 font-sans",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-sm w-full text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mr,{size:32})}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:" Trust Room"}),s.jsx("p",{className:"text-sm text-gray-500 mb-6",children:" (Token)"}),s.jsxs("button",{onClick:c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition shadow-lg flex items-center justify-center gap-2",children:[s.jsx(mr,{size:18})," (Demo Mode)"]}),s.jsx("p",{className:"text-xs text-gray-400 mt-4",children:""})]})});if(!a)return s.jsx("div",{className:"p-8 text-center",children:"..."});const E=I=>{switch(I){case"1":return s.jsx(ot,{size:14});case"2":return s.jsx(qo,{size:14});case"3":return s.jsx(Ua,{size:14});case"4":return s.jsx(Za,{size:14});case"5":return s.jsx(Bo,{size:14});case"6":return s.jsx($e,{size:14});default:return s.jsx(Zo,{size:14})}};return s.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-white shadow-2xl relative pb-24 font-sans text-gray-800",children:[s.jsx(qa,{position:"top-center"}),s.jsxs("header",{className:`${e?"bg-indigo-900":"bg-slate-900"} text-white p-4 sticky top-0 z-50 flex justify-between items-center shadow-lg transition-colors`,children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"font-bold text-lg tracking-wide flex items-center gap-2",children:["MaiHouses ",s.jsx("span",{className:`text-xs px-1 rounded ${e?"bg-yellow-500 text-black":"bg-blue-600"}`,children:e?"DEMO":"V10"})]}),s.jsxs("div",{className:"flex items-center text-[10px] text-gray-400 gap-2",children:[s.jsxs("span",{children:[": ",t]}),i&&s.jsx("span",{className:"animate-pulse",children:""})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:N,className:"bg-white/10 hover:bg-white/20 w-8 h-8 rounded flex items-center justify-center transition",children:s.jsx(Fo,{size:14})}),s.jsxs("button",{onClick:w,className:`px-3 py-1 rounded-md text-xs font-bold border border-white/20 flex items-center gap-1 transition ${r==="agent"?"bg-blue-600":"bg-green-600"}`,children:[r==="agent"?s.jsx(Do,{size:12}):s.jsx(Uo,{size:12}),r==="agent"?"":""]})]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 border-b sticky top-[60px] z-40",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[" ",a.currentStep,"/6"]}),a.isPaid&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full font-bold",children:""})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-700",style:{width:`${a.currentStep/6*100}%`}})})]}),s.jsxs("div",{className:"p-4 space-y-0",children:[Object.entries(a.steps).map(([I,j])=>{var Z;const A=parseInt(I),k=A===a.currentStep,$=A<a.currentStep,H=A>a.currentStep;let oe="bg-gray-300 border-gray-300";return $||j.locked?oe="bg-green-500 border-green-500":k&&(oe="bg-blue-600 border-blue-600"),s.jsxs("div",{className:`relative pl-14 py-3 ${H?"opacity-50 grayscale":""}`,children:[s.jsx("div",{className:`absolute left-0 top-3 z-10 w-10 h-10 rounded-full flex items-center justify-center border-4 border-white shadow-sm transition-colors text-white ${oe}`,children:E(I)}),I!=="6"&&s.jsx("div",{className:"absolute left-[24px] top-[50px] bottom-[-20px] w-[2px] bg-gray-200 z-0"}),s.jsxs("div",{className:`bg-white border rounded-xl p-4 shadow-sm transition-all ${k?"border-blue-500 ring-2 ring-blue-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[j.name,I==="5"&&j.paymentStatus==="initiated"&&!j.locked&&s.jsx("span",{className:"text-[10px] text-orange-500 bg-orange-50 px-2 rounded animate-pulse",children:""}),I==="5"&&j.paymentStatus==="expired"&&s.jsx("span",{className:"text-[10px] text-red-500 bg-red-50 px-2 rounded",children:""})]}),j.locked&&s.jsx(Ha,{size:14,className:"text-green-600"})]}),I==="2"&&j.data.note&&s.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded border border-gray-100",children:[s.jsx("p",{className:"text-xs font-bold text-gray-500 mb-2 border-b pb-1",children:" "}),s.jsx("div",{className:"text-sm whitespace-pre-wrap",children:j.data.note})]}),I==="5"&&j.paymentStatus==="initiated"&&!j.locked&&s.jsxs("div",{className:"mb-4 text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-2xl font-mono text-orange-600 font-bold mb-1",children:l}),s.jsx("div",{className:"text-xs text-orange-400 mb-3",children:""}),r==="agent"?s.jsx("button",{onClick:g,disabled:o||l==="",className:`w-full text-white font-bold py-2 rounded shadow ${l===""?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-red-500 hover:shadow-lg"}`,children:l===""?"":o?"...":" NT$ 2,000"}):s.jsx("div",{className:"text-xs text-gray-400",children:"..."})]}),I==="6"&&!j.locked&&a.isPaid&&s.jsxs("div",{className:"space-y-2 mt-2",children:[(Z=j.checklist)==null?void 0:Z.map(z=>s.jsxs("div",{onClick:()=>T(z.id,!z.checked),className:`flex items-center p-4 border rounded transition cursor-pointer ${z.checked?"bg-indigo-50 border-indigo-200":"hover:bg-gray-50"}`,children:[s.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center bg-white ${z.checked?"bg-indigo-600 border-indigo-600":""}`,children:z.checked&&s.jsx(De,{size:12,className:"text-white"})}),s.jsx("span",{className:`ml-3 text-sm ${z.checked?"text-indigo-800 font-bold":""}`,children:z.label})]},z.id)),s.jsx("button",{onClick:()=>y("6"),className:"w-full bg-indigo-600 text-white py-2 rounded font-bold mt-2",children:""})]}),!j.locked&&k&&I!=="5"&&I!=="6"&&s.jsxs("div",{children:[r==="agent"&&(j.agentStatus==="pending"?s.jsxs("div",{children:[s.jsx("textarea",{value:u,onChange:z=>h(z.target.value),className:"w-full border p-2 rounded text-sm mb-2 focus:ring-2 ring-blue-200 outline-none",placeholder:"..."}),s.jsx("button",{onClick:()=>b(I),disabled:o,className:"w-full bg-slate-800 text-white py-2 rounded text-sm",children:o?"...":""})]}):s.jsx("div",{className:"text-center text-xs text-gray-400 py-2 bg-gray-50 rounded",children:"..."})),r==="buyer"&&(j.agentStatus==="submitted"?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:""}),s.jsx("div",{className:"p-2 bg-gray-50 rounded border text-sm mb-2 whitespace-pre-wrap",children:j.data.note||""}),s.jsx("textarea",{value:u,onChange:z=>h(z.target.value),className:"w-full border p-2 rounded text-sm mb-2 focus:ring-2 ring-green-200 outline-none",placeholder:" ()..."}),s.jsx("button",{onClick:()=>y(I),disabled:o,className:"w-full bg-green-600 text-white py-2 rounded text-sm",children:o?"...":""})]}):s.jsx("div",{className:"text-center text-xs text-gray-400 py-2",children:"..."}))]}),j.data.buyerNote&&s.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded border border-green-100 text-xs",children:[s.jsx("span",{className:"font-bold text-green-700",children:""})," ",j.data.buyerNote]}),I==="5"&&!j.locked&&j.paymentStatus==="pending"&&s.jsxs("div",{children:[r==="agent"&&j.agentStatus==="pending"&&s.jsx("button",{onClick:()=>b("5"),className:"w-full bg-slate-800 text-white py-2 rounded",children:""}),r==="buyer"&&j.agentStatus==="submitted"&&s.jsx("button",{onClick:()=>y("5"),className:"w-full bg-green-600 text-white py-2 rounded",children:" ()"})]}),a.supplements.length>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-dashed",children:a.supplements.map((z,Q)=>s.jsxs("div",{className:"text-xs mb-1 p-2 bg-gray-50 rounded border border-gray-100 flex gap-2",children:[s.jsx("span",{className:"font-bold",children:z.role==="agent"?"":""}),s.jsx("span",{className:"flex-1",children:z.content})]},Q))})]})]},I)}),s.jsxs("div",{className:"mt-8 bg-white p-4 rounded-xl shadow-sm border",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-2",children:"  (/)"}),s.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:f,onChange:I=>x(I.target.value),className:"flex-1 border rounded px-3 py-2 text-sm",placeholder:"..."}),s.jsx("button",{onClick:C,disabled:!f,className:"bg-gray-800 text-white px-4 rounded text-sm",children:""})]})]})]})]})}function Ku(){return s.jsx("main",{className:"mx-auto max-w-container p-4 md:p-6",children:s.jsx(Hi,{})})}let Re=class extends p.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.error(t);try{Xr("error_boundary","*",String(t.message||t))}catch{}}render(){return this.state.hasError?s.jsx("div",{className:"rounded-[var(--r-lg)] bg-white p-4 text-[var(--danger)] shadow-[var(--shadow-card)]",children:""}):this.props.children}};const Ju=p.createContext(null),Yu=({children:e})=>{const[t,r]=p.useState(()=>localStorage.getItem("mai-mood-v1")||"neutral"),n=l=>{r(l),localStorage.setItem("mai-mood-v1",l),nc(l),ye(je.MoodPick,{mood:l})},a=t==="stress"?"soothe":t==="rest"?"warm":"light",i=t==="stress"?2:t==="rest"?1:0,o=p.useMemo(()=>({mood:t,setMood:n,tone:a,throttleLevel:i}),[t]);return s.jsx(Ju.Provider,{value:o,children:e})};function Xu(){const[e,t]=p.useState(!1);p.useEffect(()=>{localStorage.getItem("cookie-consent")||t(!0)},[]);const r=()=>{localStorage.setItem("cookie-consent","true"),t(!1)};return e?s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-gray-900 p-4 text-white shadow-lg md:p-6",children:s.jsxs("div",{className:"mx-auto flex max-w-container flex-col items-center justify-between gap-4 md:flex-row",children:[s.jsx("div",{className:"text-sm text-gray-300",children:" Cookie "}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:r,className:"rounded-full bg-brand px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",children:""})})]})}):null}const eh=p.createContext(null),lr={didCatch:!1,error:null};class th extends p.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=lr}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(lr)}}componentDidCatch(t,r){var n,a;(n=(a=this.props).onError)===null||n===void 0||n.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:a}=this.props;if(n&&r.error!==null&&sh(t.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(lr)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let l=t;if(i){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(c);else if(n)l=p.createElement(n,c);else if(a!==void 0)l=a;else throw o}return p.createElement(eh.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function sh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}const rh="_primary_10s9u_154",nh="_float_10s9u_1",ah="_pulse_10s9u_1",ih="_selected_10s9u_210",oh="_urgent_10s9u_288",lh="_shimmer_10s9u_1",S={"uag-page":"_uag-page_10s9u_26","uag-header":"_uag-header_10s9u_51","uag-header-inner":"_uag-header-inner_10s9u_58","uag-logo":"_uag-logo_10s9u_63","uag-logo-badge":"_uag-logo-badge_10s9u_64","uag-container":"_uag-container_10s9u_70","uag-grid":"_uag-grid_10s9u_71","k-span-2":"_k-span-2_10s9u_74","k-span-3":"_k-span-3_10s9u_75","k-span-4":"_k-span-4_10s9u_76","k-span-6":"_k-span-6_10s9u_77","uag-breadcrumb":"_uag-breadcrumb_10s9u_87","uag-badge--pro":"_uag-badge--pro_10s9u_101","uag-card":"_uag-card_10s9u_108","uag-card-header":"_uag-card-header_10s9u_122","uag-card-title":"_uag-card-title_10s9u_123","uag-card-sub":"_uag-card-sub_10s9u_128","uag-actions":"_uag-actions_10s9u_133","uag-btn":"_uag-btn_10s9u_144",primary:rh,"uag-badge":"_uag-badge_10s9u_101","uag-badge--s":"_uag-badge--s_10s9u_169","uag-badge--a":"_uag-badge--a_10s9u_170","uag-cluster":"_uag-cluster_10s9u_173","uag-bubble":"_uag-bubble_10s9u_199",float:nh,pulse:ah,selected:ih,"uag-bubble-grade":"_uag-bubble-grade_10s9u_222","uag-bubble-label":"_uag-bubble-label_10s9u_227","uag-action-panel":"_uag-action-panel_10s9u_240","ap-head":"_ap-head_10s9u_247","ap-body":"_ap-body_10s9u_253","ap-stats-group":"_ap-stats-group_10s9u_262","ai-box":"_ai-box_10s9u_263","action-zone":"_action-zone_10s9u_264","ap-stat":"_ap-stat_10s9u_262",urgent:oh,"btn-attack":"_btn-attack_10s9u_295",shimmer:lh,"monitor-table":"_monitor-table_10s9u_335","progress-bg":"_progress-bg_10s9u_358","progress-fill":"_progress-fill_10s9u_359","t-countdown":"_t-countdown_10s9u_360","listing-item":"_listing-item_10s9u_363","l-thumb":"_l-thumb_10s9u_369","l-title":"_l-title_10s9u_370","l-tags":"_l-tags_10s9u_371","l-tag":"_l-tag_10s9u_371","l-kpi":"_l-kpi_10s9u_373","feed-post":"_feed-post_10s9u_382","fp-title":"_fp-title_10s9u_384","fp-meta":"_fp-meta_10s9u_385","fp-body":"_fp-body_10s9u_386","mai-card":"_mai-card_10s9u_389","mai-head":"_mai-head_10s9u_403","mai-tag":"_mai-tag_10s9u_408","mai-title":"_mai-title_10s9u_409","mai-sub":"_mai-sub_10s9u_410","mai-body":"_mai-body_10s9u_411","mai-left":"_mai-left_10s9u_412","mai-price":"_mai-price_10s9u_413","mai-price-label":"_mai-price-label_10s9u_414","mai-price-value":"_mai-price-value_10s9u_415","mai-price-unit":"_mai-price-unit_10s9u_416","mai-stats":"_mai-stats_10s9u_417","mai-right":"_mai-right_10s9u_420","mai-thumb":"_mai-thumb_10s9u_421","mai-mini":"_mai-mini_10s9u_422","mai-actions":"_mai-actions_10s9u_424","mai-btn":"_mai-btn_10s9u_425","flow-stage":"_flow-stage_10s9u_445","uag-footer-bar":"_uag-footer-bar_10s9u_448"},ch="https://mtqnjmoisrvjofdxhwhi.supabase.co",dh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10cW5qbW9pc3J2am9mZHhod2hpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MjE1MDEsImV4cCI6MjA3OTA5NzUwMX0.P2o5n09PQChfryl-WLT7v6wRVWhDK6Oik7ajjcwyNrc",X=tl(ch,dh,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});function _(e,t,r){function n(l,c){var d;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(d=l._zod).traits??(d.traits=new Set),l._zod.traits.add(e),t(l,c);for(const u in o.prototype)u in l||Object.defineProperty(l,u,{value:o.prototype[u].bind(l)});l._zod.constr=o,l._zod.def=c}const a=(r==null?void 0:r.Parent)??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(l){var c;const d=r!=null&&r.Parent?new i:this;n(d,l),(c=d._zod).deferred??(c.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>{var c,d;return r!=null&&r.Parent&&l instanceof r.Parent?!0:(d=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:d.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class $t extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Qi extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Gi={};function St(e){return Gi}function uh(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function Or(e,t){return typeof t=="bigint"?t.toString():t}function sn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function rn(e){return e==null}function nn(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function hh(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let a=(n.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(n)){const c=n.match(/\d?e-(\d?)/);c!=null&&c[1]&&(a=Number.parseInt(c[1]))}const i=r>a?r:a,o=Number.parseInt(e.toFixed(i).replace(".","")),l=Number.parseInt(t.toFixed(i).replace(".",""));return o%l/10**i}const Xn=Symbol("evaluating");function K(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==Xn)return n===void 0&&(n=Xn,n=r()),n},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function zt(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function It(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function ea(e){return JSON.stringify(e)}const Ki="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Zs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const mh=sn(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function as(e){if(Zs(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Zs(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Ji(e){return as(e)?{...e}:Array.isArray(e)?[...e]:e}const ph=new Set(["string","number","symbol"]);function Ks(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ct(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function D(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function fh(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const xh={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function gh(e,t){const r=e._zod.def,n=It(e._zod.def,{get shape(){const a={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(a[i]=r.shape[i])}return zt(this,"shape",a),a},checks:[]});return ct(e,n)}function bh(e,t){const r=e._zod.def,n=It(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete a[i]}return zt(this,"shape",a),a},checks:[]});return ct(e,n)}function vh(e,t){if(!as(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=It(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return zt(this,"shape",i),i},checks:[]});return ct(e,a)}function yh(e,t){if(!as(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return zt(this,"shape",n),n},checks:e._zod.def.checks};return ct(e,r)}function jh(e,t){const r=It(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return zt(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return ct(e,r)}function wh(e,t,r){const n=It(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:a[o]}):a[o])}else for(const o in a)i[o]=e?new e({type:"optional",innerType:a[o]}):a[o];return zt(this,"shape",i),i},checks:[]});return ct(t,n)}function _h(e,t,r){const n=It(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:a[o]}))}else for(const o in a)i[o]=new e({type:"nonoptional",innerType:a[o]});return zt(this,"shape",i),i},checks:[]});return ct(t,n)}function Tt(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Yi(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Ss(e){return typeof e=="string"?e:e==null?void 0:e.message}function Ct(e,t,r){var a,i,o,l,c,d;const n={...e,path:e.path??[]};if(!e.message){const u=Ss((o=(i=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Ss((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Ss((c=r.customError)==null?void 0:c.call(r,e))??Ss((d=r.localeError)==null?void 0:d.call(r,e))??"Invalid input";n.message=u}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function an(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function is(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Xi=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Or,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},eo=_("$ZodError",Xi),to=_("$ZodError",Xi,{Parent:Error});function Nh(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function kh(e,t=r=>r.message){const r={_errors:[]},n=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>n({issues:o}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let o=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(e),r}const on=e=>(t,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new $t;if(o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(c=>Ct(c,i,St())));throw Ki(l,a==null?void 0:a.callee),l}return o.value},ln=e=>async(t,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(c=>Ct(c,i,St())));throw Ki(l,a==null?void 0:a.callee),l}return o.value},Js=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new $t;return i.issues.length?{success:!1,error:new(e??eo)(i.issues.map(o=>Ct(o,a,St())))}:{success:!0,data:i.value}},Sh=Js(to),Ys=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>Ct(o,a,St())))}:{success:!0,data:i.value}},Ch=Ys(to),zh=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return on(e)(t,r,a)},Ih=e=>(t,r,n)=>on(e)(t,r,n),Eh=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ln(e)(t,r,a)},Ph=e=>async(t,r,n)=>ln(e)(t,r,n),Th=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Js(e)(t,r,a)},Mh=e=>(t,r,n)=>Js(e)(t,r,n),$h=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Ys(e)(t,r,a)},Ah=e=>async(t,r,n)=>Ys(e)(t,r,n),Rh=/^[cC][^\s-]{8,}$/,Lh=/^[0-9a-z]+$/,Oh=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Fh=/^[0-9a-vA-V]{20}$/,Dh=/^[A-Za-z0-9]{27}$/,Uh=/^[a-zA-Z0-9_-]{21}$/,Zh=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Bh=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ta=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,qh=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Hh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Wh(){return new RegExp(Hh,"u")}const Vh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qh=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Gh=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Kh=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Jh=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,so=/^[A-Za-z0-9_-]*$/,Yh=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Xh=/^\+(?:[0-9]){6,14}[0-9]$/,ro="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",em=new RegExp(`^${ro}$`);function no(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tm(e){return new RegExp(`^${no(e)}$`)}function sm(e){const t=no({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${ro}T(?:${n})$`)}const rm=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},nm=/^-?\d+$/,am=/^-?\d+(?:\.\d+)?/,im=/^null$/i,om=/^[^A-Z]*$/,lm=/^[^a-z]*$/,we=_("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),ao={number:"number",bigint:"bigint",object:"date"},io=_("$ZodCheckLessThan",(e,t)=>{we.init(e,t);const r=ao[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),oo=_("$ZodCheckGreaterThan",(e,t)=>{we.init(e,t);const r=ao[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),cm=_("$ZodCheckMultipleOf",(e,t)=>{we.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):hh(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),dm=_("$ZodCheckNumberFormat",(e,t)=>{var o;we.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[a,i]=xh[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=a,c.maximum=i,r&&(c.pattern=nm)}),e._zod.check=l=>{const c=l.value;if(r){if(!Number.isInteger(c)){l.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}c<a&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),c>i&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),um=_("$ZodCheckMaxLength",(e,t)=>{var r;we.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!rn(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const o=an(a);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),hm=_("$ZodCheckMinLength",(e,t)=>{var r;we.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!rn(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const o=an(a);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),mm=_("$ZodCheckLengthEquals",(e,t)=>{var r;we.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!rn(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,i=a.length;if(i===t.length)return;const o=an(a),l=i>t.length;n.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Xs=_("$ZodCheckStringFormat",(e,t)=>{var r,n;we.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),pm=_("$ZodCheckRegex",(e,t)=>{Xs.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),fm=_("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=om),Xs.init(e,t)}),xm=_("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=lm),Xs.init(e,t)}),gm=_("$ZodCheckIncludes",(e,t)=>{we.init(e,t);const r=Ks(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),bm=_("$ZodCheckStartsWith",(e,t)=>{we.init(e,t);const r=new RegExp(`^${Ks(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),vm=_("$ZodCheckEndsWith",(e,t)=>{we.init(e,t);const r=new RegExp(`.*${Ks(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ym=_("$ZodCheckOverwrite",(e,t)=>{we.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class jm{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const wm={major:4,minor:1,patch:12},se=_("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=wm;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const i=(l,c,d)=>{let u=Tt(l),h;for(const f of c){if(f._zod.def.when){if(!f._zod.def.when(l))continue}else if(u)continue;const x=l.issues.length,v=f._zod.check(l);if(v instanceof Promise&&(d==null?void 0:d.async)===!1)throw new $t;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,l.issues.length!==x&&(u||(u=Tt(l,x)))});else{if(l.issues.length===x)continue;u||(u=Tt(l,x))}}return h?h.then(()=>l):l},o=(l,c,d)=>{if(Tt(l))return l.aborted=!0,l;const u=i(c,n,d);if(u instanceof Promise){if(d.async===!1)throw new $t;return u.then(h=>e._zod.parse(h,d))}return e._zod.parse(u,d)};e._zod.run=(l,c)=>{if(c.skipChecks)return e._zod.parse(l,c);if(c.direction==="backward"){const u=e._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,l,c)):o(u,l,c)}const d=e._zod.parse(l,c);if(d instanceof Promise){if(c.async===!1)throw new $t;return d.then(u=>i(u,n,c))}return i(d,n,c)}}e["~standard"]={validate:i=>{var o;try{const l=Sh(e,i);return l.success?{value:l.data}:{issues:(o=l.error)==null?void 0:o.issues}}catch{return Ch(e,i).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),cn=_("$ZodString",(e,t)=>{var r;se.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??rm(e._zod.bag),e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Y=_("$ZodStringFormat",(e,t)=>{Xs.init(e,t),cn.init(e,t)}),_m=_("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Bh),Y.init(e,t)}),Nm=_("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ta(n))}else t.pattern??(t.pattern=ta());Y.init(e,t)}),km=_("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=qh),Y.init(e,t)}),Sm=_("$ZodURL",(e,t)=>{Y.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),a=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Yh.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Cm=_("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Wh()),Y.init(e,t)}),zm=_("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Uh),Y.init(e,t)}),Im=_("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Rh),Y.init(e,t)}),Em=_("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Lh),Y.init(e,t)}),Pm=_("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Oh),Y.init(e,t)}),Tm=_("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Fh),Y.init(e,t)}),Mm=_("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Dh),Y.init(e,t)}),$m=_("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=sm(t)),Y.init(e,t)}),Am=_("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=em),Y.init(e,t)}),Rm=_("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=tm(t)),Y.init(e,t)}),Lm=_("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Zh),Y.init(e,t)}),Om=_("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Vh),Y.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Fm=_("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Qh),Y.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Dm=_("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Gh),Y.init(e,t)}),Um=_("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Kh),Y.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[a,i]=n;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function lo(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Zm=_("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Jh),Y.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{lo(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Bm(e){if(!so.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return lo(r)}const qm=_("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=so),Y.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Bm(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Hm=_("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Xh),Y.init(e,t)});function Wm(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const Vm=_("$ZodJWT",(e,t)=>{Y.init(e,t),e._zod.check=r=>{Wm(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),co=_("$ZodNumber",(e,t)=>{se.init(e,t),e._zod.pattern=e._zod.bag.pattern??am,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),r}}),Qm=_("$ZodNumber",(e,t)=>{dm.init(e,t),co.init(e,t)}),Gm=_("$ZodNull",(e,t)=>{se.init(e,t),e._zod.pattern=im,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),Km=_("$ZodUnknown",(e,t)=>{se.init(e,t),e._zod.parse=r=>r}),Jm=_("$ZodNever",(e,t)=>{se.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function sa(e,t,r){e.issues.length&&t.issues.push(...Yi(r,e.issues)),t.value[r]=e.value}const Ym=_("$ZodArray",(e,t)=>{se.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const l=a[o],c=t.element._zod.run({value:l,issues:[]},n);c instanceof Promise?i.push(c.then(d=>sa(d,r,o))):sa(c,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function Bs(e,t,r,n){e.issues.length&&t.issues.push(...Yi(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function uo(e){var n,a,i,o;const t=Object.keys(e.shape);for(const l of t)if(!((o=(i=(a=(n=e.shape)==null?void 0:n[l])==null?void 0:a._zod)==null?void 0:i.traits)!=null&&o.has("$ZodType")))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const r=fh(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function ho(e,t,r,n,a,i){const o=[],l=a.keySet,c=a.catchall._zod,d=c.def.type;for(const u of Object.keys(t)){if(l.has(u))continue;if(d==="never"){o.push(u);continue}const h=c.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>Bs(f,r,u,t))):Bs(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const Xm=_("$ZodObject",(e,t)=>{se.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const l=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...l};return Object.defineProperty(t,"shape",{value:c}),c}})}const n=sn(()=>uo(t));K(e._zod,"propValues",()=>{const l=t.shape,c={};for(const d in l){const u=l[d]._zod;if(u.values){c[d]??(c[d]=new Set);for(const h of u.values)c[d].add(h)}}return c});const a=Zs,i=t.catchall;let o;e._zod.parse=(l,c)=>{o??(o=n.value);const d=l.value;if(!a(d))return l.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),l;l.value={};const u=[],h=o.shape;for(const f of o.keys){const v=h[f]._zod.run({value:d[f],issues:[]},c);v instanceof Promise?u.push(v.then(b=>Bs(b,l,f,d))):Bs(v,l,f,d)}return i?ho(u,d,l,c,n.value,e):u.length?Promise.all(u).then(()=>l):l}}),ep=_("$ZodObjectJIT",(e,t)=>{Xm.init(e,t);const r=e._zod.parse,n=sn(()=>uo(t)),a=f=>{const x=new jm(["shape","payload","ctx"]),v=n.value,b=C=>{const N=ea(C);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};x.write("const input = payload.value;");const y=Object.create(null);let g=0;for(const C of v.keys)y[C]=`key_${g++}`;x.write("const newResult = {};");for(const C of v.keys){const N=y[C],w=ea(C);x.write(`const ${N} = ${b(C)};`),x.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${w}, ...iss.path] : [${w}]
          })));
        }
        
        
        if (${N}.value === undefined) {
          if (${w} in input) {
            newResult[${w}] = undefined;
          }
        } else {
          newResult[${w}] = ${N}.value;
        }
        
      `)}x.write("payload.value = newResult;"),x.write("return payload;");const T=x.compile();return(C,N)=>T(f,C,N)};let i;const o=Zs,l=!Gi.jitless,d=l&&mh.value,u=t.catchall;let h;e._zod.parse=(f,x)=>{h??(h=n.value);const v=f.value;return o(v)?l&&d&&(x==null?void 0:x.async)===!1&&x.jitless!==!0?(i||(i=a(t.shape)),f=i(f,x),u?ho([],v,f,x,h,e):f):r(f,x):(f.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),f)}});function ra(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const a=e.filter(i=>!Tt(i));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>Ct(o,n,St())))}),t)}const tp=_("$ZodUnion",(e,t)=>{se.init(e,t),K(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),K(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),K(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),K(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>nn(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(r)return n(a,i);let o=!1;const l=[];for(const c of t.options){const d=c._zod.run({value:a.value,issues:[]},i);if(d instanceof Promise)l.push(d),o=!0;else{if(d.issues.length===0)return d;l.push(d)}}return o?Promise.all(l).then(c=>ra(c,a,e,i)):ra(l,a,e,i)}}),sp=_("$ZodIntersection",(e,t)=>{se.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,d])=>na(r,c,d)):na(r,i,o)}});function Fr(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(as(e)&&as(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=Fr(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=Fr(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function na(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Tt(e))return e;const n=Fr(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const rp=_("$ZodEnum",(e,t)=>{se.init(e,t);const r=uh(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(a=>ph.has(typeof a)).map(a=>typeof a=="string"?Ks(a):a.toString()).join("|")})$`),e._zod.parse=(a,i)=>{const o=a.value;return n.has(o)||a.issues.push({code:"invalid_value",values:r,input:o,inst:e}),a}}),np=_("$ZodTransform",(e,t)=>{se.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Qi(e.constructor.name);const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new $t;return r.value=a,r}});function aa(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const ap=_("$ZodOptional",(e,t)=>{se.init(e,t),e._zod.optin="optional",e._zod.optout="optional",K(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),K(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${nn(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>aa(i,r.value)):aa(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),ip=_("$ZodNullable",(e,t)=>{se.init(e,t),K(e._zod,"optin",()=>t.innerType._zod.optin),K(e._zod,"optout",()=>t.innerType._zod.optout),K(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${nn(r.source)}|null)$`):void 0}),K(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),op=_("$ZodDefault",(e,t)=>{se.init(e,t),e._zod.optin="optional",K(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>ia(i,t)):ia(a,t)}});function ia(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const lp=_("$ZodPrefault",(e,t)=>{se.init(e,t),e._zod.optin="optional",K(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),cp=_("$ZodNonOptional",(e,t)=>{se.init(e,t),K(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>oa(i,e)):oa(a,e)}});function oa(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const dp=_("$ZodCatch",(e,t)=>{se.init(e,t),K(e._zod,"optin",()=>t.innerType._zod.optin),K(e._zod,"optout",()=>t.innerType._zod.optout),K(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>Ct(o,n,St()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>Ct(i,n,St()))},input:r.value}),r.issues=[]),r)}}),up=_("$ZodPipe",(e,t)=>{se.init(e,t),K(e._zod,"values",()=>t.in._zod.values),K(e._zod,"optin",()=>t.in._zod.optin),K(e._zod,"optout",()=>t.out._zod.optout),K(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>Cs(o,t.in,n)):Cs(i,t.in,n)}const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(i=>Cs(i,t.out,n)):Cs(a,t.out,n)}});function Cs(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const hp=_("$ZodReadonly",(e,t)=>{se.init(e,t),K(e._zod,"propValues",()=>t.innerType._zod.propValues),K(e._zod,"values",()=>t.innerType._zod.values),K(e._zod,"optin",()=>t.innerType._zod.optin),K(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(la):la(a)}});function la(e){return e.value=Object.freeze(e.value),e}const mp=_("$ZodCustom",(e,t)=>{we.init(e,t),se.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>ca(i,r,n,e));ca(a,r,n,e)}});function ca(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(is(a))}}class pp{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const a={...n,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function fp(){return new pp}const zs=fp();function xp(e,t){return new e({type:"string",...D(t)})}function gp(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...D(t)})}function da(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...D(t)})}function bp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...D(t)})}function vp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...D(t)})}function yp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...D(t)})}function jp(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...D(t)})}function wp(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...D(t)})}function _p(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...D(t)})}function Np(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...D(t)})}function kp(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...D(t)})}function Sp(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...D(t)})}function Cp(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...D(t)})}function zp(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...D(t)})}function Ip(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...D(t)})}function Ep(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...D(t)})}function Pp(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...D(t)})}function Tp(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...D(t)})}function Mp(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...D(t)})}function $p(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...D(t)})}function Ap(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...D(t)})}function Rp(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...D(t)})}function Lp(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...D(t)})}function Op(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...D(t)})}function Fp(e,t){return new e({type:"string",format:"date",check:"string_format",...D(t)})}function Dp(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...D(t)})}function Up(e,t){return new e({type:"string",format:"duration",check:"string_format",...D(t)})}function Zp(e,t){return new e({type:"number",checks:[],...D(t)})}function Bp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...D(t)})}function qp(e,t){return new e({type:"null",...D(t)})}function Hp(e){return new e({type:"unknown"})}function Wp(e,t){return new e({type:"never",...D(t)})}function ua(e,t){return new io({check:"less_than",...D(t),value:e,inclusive:!1})}function cr(e,t){return new io({check:"less_than",...D(t),value:e,inclusive:!0})}function ha(e,t){return new oo({check:"greater_than",...D(t),value:e,inclusive:!1})}function dr(e,t){return new oo({check:"greater_than",...D(t),value:e,inclusive:!0})}function ma(e,t){return new cm({check:"multiple_of",...D(t),value:e})}function mo(e,t){return new um({check:"max_length",...D(t),maximum:e})}function qs(e,t){return new hm({check:"min_length",...D(t),minimum:e})}function po(e,t){return new mm({check:"length_equals",...D(t),length:e})}function Vp(e,t){return new pm({check:"string_format",format:"regex",...D(t),pattern:e})}function Qp(e){return new fm({check:"string_format",format:"lowercase",...D(e)})}function Gp(e){return new xm({check:"string_format",format:"uppercase",...D(e)})}function Kp(e,t){return new gm({check:"string_format",format:"includes",...D(t),includes:e})}function Jp(e,t){return new bm({check:"string_format",format:"starts_with",...D(t),prefix:e})}function Yp(e,t){return new vm({check:"string_format",format:"ends_with",...D(t),suffix:e})}function fs(e){return new ym({check:"overwrite",tx:e})}function Xp(e){return fs(t=>t.normalize(e))}function ef(){return fs(e=>e.trim())}function tf(){return fs(e=>e.toLowerCase())}function sf(){return fs(e=>e.toUpperCase())}function rf(e,t,r){return new e({type:"array",element:t,...D(r)})}function nf(e,t,r){return new e({type:"custom",check:"custom",fn:t,...D(r)})}function af(e){const t=of(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(is(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(is(a))}},e(r.value,r)));return t}function of(e,t){const r=new we({check:"custom",...D(t)});return r._zod.check=e,r}const lf=_("ZodISODateTime",(e,t)=>{$m.init(e,t),ee.init(e,t)});function cf(e){return Op(lf,e)}const df=_("ZodISODate",(e,t)=>{Am.init(e,t),ee.init(e,t)});function uf(e){return Fp(df,e)}const hf=_("ZodISOTime",(e,t)=>{Rm.init(e,t),ee.init(e,t)});function mf(e){return Dp(hf,e)}const pf=_("ZodISODuration",(e,t)=>{Lm.init(e,t),ee.init(e,t)});function ff(e){return Up(pf,e)}const xf=(e,t)=>{eo.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>kh(e,r)},flatten:{value:r=>Nh(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Or,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Or,2)}},isEmpty:{get(){return e.issues.length===0}}})},ze=_("ZodError",xf,{Parent:Error}),gf=on(ze),bf=ln(ze),vf=Js(ze),yf=Ys(ze),jf=zh(ze),wf=Ih(ze),_f=Eh(ze),Nf=Ph(ze),kf=Th(ze),Sf=Mh(ze),Cf=$h(ze),zf=Ah(ze),ne=_("ZodType",(e,t)=>(se.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(It(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),e.clone=(r,n)=>ct(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>gf(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>vf(e,r,n),e.parseAsync=async(r,n)=>bf(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>yf(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>jf(e,r,n),e.decode=(r,n)=>wf(e,r,n),e.encodeAsync=async(r,n)=>_f(e,r,n),e.decodeAsync=async(r,n)=>Nf(e,r,n),e.safeEncode=(r,n)=>kf(e,r,n),e.safeDecode=(r,n)=>Sf(e,r,n),e.safeEncodeAsync=async(r,n)=>Cf(e,r,n),e.safeDecodeAsync=async(r,n)=>zf(e,r,n),e.refine=(r,n)=>e.check(bx(r,n)),e.superRefine=r=>e.check(vx(r)),e.overwrite=r=>e.check(fs(r)),e.optional=()=>ga(e),e.nullable=()=>ba(e),e.nullish=()=>ga(ba(e)),e.nonoptional=r=>ux(e,r),e.array=()=>ss(e),e.or=r=>go([e,r]),e.and=r=>rx(e,r),e.transform=r=>va(e,ax(r)),e.default=r=>lx(e,r),e.prefault=r=>dx(e,r),e.catch=r=>mx(e,r),e.pipe=r=>va(e,r),e.readonly=()=>xx(e),e.describe=r=>{const n=e.clone();return zs.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=zs.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return zs.get(e);const n=e.clone();return zs.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),fo=_("_ZodString",(e,t)=>{cn.init(e,t),ne.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Vp(...n)),e.includes=(...n)=>e.check(Kp(...n)),e.startsWith=(...n)=>e.check(Jp(...n)),e.endsWith=(...n)=>e.check(Yp(...n)),e.min=(...n)=>e.check(qs(...n)),e.max=(...n)=>e.check(mo(...n)),e.length=(...n)=>e.check(po(...n)),e.nonempty=(...n)=>e.check(qs(1,...n)),e.lowercase=n=>e.check(Qp(n)),e.uppercase=n=>e.check(Gp(n)),e.trim=()=>e.check(ef()),e.normalize=(...n)=>e.check(Xp(...n)),e.toLowerCase=()=>e.check(tf()),e.toUpperCase=()=>e.check(sf())}),If=_("ZodString",(e,t)=>{cn.init(e,t),fo.init(e,t),e.email=r=>e.check(gp(Ef,r)),e.url=r=>e.check(wp(Pf,r)),e.jwt=r=>e.check(Lp(Wf,r)),e.emoji=r=>e.check(_p(Tf,r)),e.guid=r=>e.check(da(pa,r)),e.uuid=r=>e.check(bp(Is,r)),e.uuidv4=r=>e.check(vp(Is,r)),e.uuidv6=r=>e.check(yp(Is,r)),e.uuidv7=r=>e.check(jp(Is,r)),e.nanoid=r=>e.check(Np(Mf,r)),e.guid=r=>e.check(da(pa,r)),e.cuid=r=>e.check(kp($f,r)),e.cuid2=r=>e.check(Sp(Af,r)),e.ulid=r=>e.check(Cp(Rf,r)),e.base64=r=>e.check($p(Bf,r)),e.base64url=r=>e.check(Ap(qf,r)),e.xid=r=>e.check(zp(Lf,r)),e.ksuid=r=>e.check(Ip(Of,r)),e.ipv4=r=>e.check(Ep(Ff,r)),e.ipv6=r=>e.check(Pp(Df,r)),e.cidrv4=r=>e.check(Tp(Uf,r)),e.cidrv6=r=>e.check(Mp(Zf,r)),e.e164=r=>e.check(Rp(Hf,r)),e.datetime=r=>e.check(cf(r)),e.date=r=>e.check(uf(r)),e.time=r=>e.check(mf(r)),e.duration=r=>e.check(ff(r))});function me(e){return xp(If,e)}const ee=_("ZodStringFormat",(e,t)=>{Y.init(e,t),fo.init(e,t)}),Ef=_("ZodEmail",(e,t)=>{km.init(e,t),ee.init(e,t)}),pa=_("ZodGUID",(e,t)=>{_m.init(e,t),ee.init(e,t)}),Is=_("ZodUUID",(e,t)=>{Nm.init(e,t),ee.init(e,t)}),Pf=_("ZodURL",(e,t)=>{Sm.init(e,t),ee.init(e,t)}),Tf=_("ZodEmoji",(e,t)=>{Cm.init(e,t),ee.init(e,t)}),Mf=_("ZodNanoID",(e,t)=>{zm.init(e,t),ee.init(e,t)}),$f=_("ZodCUID",(e,t)=>{Im.init(e,t),ee.init(e,t)}),Af=_("ZodCUID2",(e,t)=>{Em.init(e,t),ee.init(e,t)}),Rf=_("ZodULID",(e,t)=>{Pm.init(e,t),ee.init(e,t)}),Lf=_("ZodXID",(e,t)=>{Tm.init(e,t),ee.init(e,t)}),Of=_("ZodKSUID",(e,t)=>{Mm.init(e,t),ee.init(e,t)}),Ff=_("ZodIPv4",(e,t)=>{Om.init(e,t),ee.init(e,t)}),Df=_("ZodIPv6",(e,t)=>{Fm.init(e,t),ee.init(e,t)}),Uf=_("ZodCIDRv4",(e,t)=>{Dm.init(e,t),ee.init(e,t)}),Zf=_("ZodCIDRv6",(e,t)=>{Um.init(e,t),ee.init(e,t)}),Bf=_("ZodBase64",(e,t)=>{Zm.init(e,t),ee.init(e,t)}),qf=_("ZodBase64URL",(e,t)=>{qm.init(e,t),ee.init(e,t)}),Hf=_("ZodE164",(e,t)=>{Hm.init(e,t),ee.init(e,t)}),Wf=_("ZodJWT",(e,t)=>{Vm.init(e,t),ee.init(e,t)}),xo=_("ZodNumber",(e,t)=>{co.init(e,t),ne.init(e,t),e.gt=(n,a)=>e.check(ha(n,a)),e.gte=(n,a)=>e.check(dr(n,a)),e.min=(n,a)=>e.check(dr(n,a)),e.lt=(n,a)=>e.check(ua(n,a)),e.lte=(n,a)=>e.check(cr(n,a)),e.max=(n,a)=>e.check(cr(n,a)),e.int=n=>e.check(fa(n)),e.safe=n=>e.check(fa(n)),e.positive=n=>e.check(ha(0,n)),e.nonnegative=n=>e.check(dr(0,n)),e.negative=n=>e.check(ua(0,n)),e.nonpositive=n=>e.check(cr(0,n)),e.multipleOf=(n,a)=>e.check(ma(n,a)),e.step=(n,a)=>e.check(ma(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ue(e){return Zp(xo,e)}const Vf=_("ZodNumberFormat",(e,t)=>{Qm.init(e,t),xo.init(e,t)});function fa(e){return Bp(Vf,e)}const Qf=_("ZodNull",(e,t)=>{Gm.init(e,t),ne.init(e,t)});function Gf(e){return qp(Qf,e)}const Kf=_("ZodUnknown",(e,t)=>{Km.init(e,t),ne.init(e,t)});function xa(){return Hp(Kf)}const Jf=_("ZodNever",(e,t)=>{Jm.init(e,t),ne.init(e,t)});function Yf(e){return Wp(Jf,e)}const Xf=_("ZodArray",(e,t)=>{Ym.init(e,t),ne.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(qs(r,n)),e.nonempty=r=>e.check(qs(1,r)),e.max=(r,n)=>e.check(mo(r,n)),e.length=(r,n)=>e.check(po(r,n)),e.unwrap=()=>e.element});function ss(e,t){return rf(Xf,e,t)}const ex=_("ZodObject",(e,t)=>{ep.init(e,t),ne.init(e,t),K(e,"shape",()=>t.shape),e.keyof=()=>dn(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:xa()}),e.loose=()=>e.clone({...e._zod.def,catchall:xa()}),e.strict=()=>e.clone({...e._zod.def,catchall:Yf()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>vh(e,r),e.safeExtend=r=>yh(e,r),e.merge=r=>jh(e,r),e.pick=r=>gh(e,r),e.omit=r=>bh(e,r),e.partial=(...r)=>wh(bo,e,r[0]),e.required=(...r)=>_h(vo,e,r[0])});function Vt(e,t){const r={type:"object",shape:e??{},...D(t)};return new ex(r)}const tx=_("ZodUnion",(e,t)=>{tp.init(e,t),ne.init(e,t),e.options=t.options});function go(e,t){return new tx({type:"union",options:e,...D(t)})}const sx=_("ZodIntersection",(e,t)=>{sp.init(e,t),ne.init(e,t)});function rx(e,t){return new sx({type:"intersection",left:e,right:t})}const Dr=_("ZodEnum",(e,t)=>{rp.init(e,t),ne.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Dr({...t,checks:[],...D(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Dr({...t,checks:[],...D(a),entries:i})}});function dn(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Dr({type:"enum",entries:r,...D(t)})}const nx=_("ZodTransform",(e,t)=>{np.init(e,t),ne.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Qi(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(is(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(is(o))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function ax(e){return new nx({type:"transform",transform:e})}const bo=_("ZodOptional",(e,t)=>{ap.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ga(e){return new bo({type:"optional",innerType:e})}const ix=_("ZodNullable",(e,t)=>{ip.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ba(e){return new ix({type:"nullable",innerType:e})}const ox=_("ZodDefault",(e,t)=>{op.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function lx(e,t){return new ox({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Ji(t)}})}const cx=_("ZodPrefault",(e,t)=>{lp.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dx(e,t){return new cx({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Ji(t)}})}const vo=_("ZodNonOptional",(e,t)=>{cp.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ux(e,t){return new vo({type:"nonoptional",innerType:e,...D(t)})}const hx=_("ZodCatch",(e,t)=>{dp.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function mx(e,t){return new hx({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const px=_("ZodPipe",(e,t)=>{up.init(e,t),ne.init(e,t),e.in=t.in,e.out=t.out});function va(e,t){return new px({type:"pipe",in:e,out:t})}const fx=_("ZodReadonly",(e,t)=>{hp.init(e,t),ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xx(e){return new fx({type:"readonly",innerType:e})}const gx=_("ZodCustom",(e,t)=>{mp.init(e,t),ne.init(e,t)});function bx(e,t={}){return nf(gx,e,t)}function vx(e){return af(e)}const yx=dn(["S","A","B","C","F"]),jx=dn(["new","purchased"]),wx=Vt({id:me(),name:me(),grade:yx,intent:ue(),prop:me(),visit:ue(),price:ue(),status:jx,purchased_at:go([me(),ue(),Gf()]).optional(),purchased_by:me().nullable().optional(),transaction_hash:me().nullable().optional(),ai:me(),remaining_hours:ue().nullable().optional(),x:ue().optional(),y:ue().optional(),created_at:me().optional()}).passthrough(),yo=wx.extend({remainingHours:ue().optional()}),jo=Vt({title:me(),tags:ss(me()).optional().nullable(),view_count:ue().optional(),click_count:ue().optional(),fav_count:ue().optional(),thumb_color:me().optional(),view:ue().optional(),click:ue().optional(),fav:ue().optional(),thumbColor:me().optional()}).passthrough(),wo=Vt({title:me(),meta:me(),body:me(),created_at:me().optional()}).passthrough(),_o=Vt({points:ue(),quota:Vt({s:ue(),a:ue()})});Vt({user:_o,leads:ss(yo),listings:ss(jo),feed:ss(wo)});const ya={TABLET:1024},un={S:120,A:72,B:336,C:336,F:336},_x=(e,t)=>{if(!e)return 0;const r=un[t]||336,n=new Date(e).getTime(),a=(Date.now()-n)/(1e3*60*60);return Math.max(0,Math.min(r,r-a))},Nx=(e,t,r,n)=>{const a={points:e.points,quota:{s:e.quota_s,a:e.quota_a}},i=_o.safeParse(a);if(!i.success)throw console.error("Critical: User Data Validation Failed",i.error),new Error("Failed to load user profile");const o=t.map(d=>{let u=d.remaining_hours!=null?Number(d.remaining_hours):null;return u==null&&d.purchased_at&&d.status==="purchased"&&(u=_x(d.purchased_at,d.grade)),{...d,grade:d.grade,status:d.status,...u!=null?{remainingHours:u}:{}}}).filter(d=>{const u=yo.safeParse(d);return u.success?!0:(console.warn(`Skipping invalid lead (${d.id}):`,u.error.flatten()),!1)}),l=r.map(d=>({...d,title:d.title,tags:d.tags??[],view:d.view_count??0,click:d.click_count??0,fav:d.fav_count??0,thumbColor:d.thumb_color??"#e5e7eb"})).filter(d=>{const u=jo.safeParse(d);return u.success?!0:(console.warn("Skipping invalid listing:",u.error.flatten()),!1)}),c=n.filter(d=>{const u=wo.safeParse(d);return u.success?!0:(console.warn("Skipping invalid feed post:",u.error.flatten()),!1)});return{user:i.data,leads:o,listings:l,feed:c}};class Hs{static async fetchAppData(t){const[r,n,a,i]=await Promise.all([X.from("users").select("points, quota_s, quota_a").single(),X.from("leads").select("*"),X.from("listings").select("*").eq("agent_id",t),X.from("feed").select("*").order("created_at",{ascending:!1}).limit(5)]);if(r.error)throw r.error;if(n.error)throw n.error;if(a.error)throw a.error;if(i.error)throw i.error;return Nx(r.data,n.data,a.data,i.data)}static async fetchPropertyViewStats(t){try{const{data:r,error:n}=await X.rpc("get_agent_property_stats",{p_agent_id:t});return n?(console.warn("PropertyViewStats RPC error, using fallback:",n),await Hs.fetchPropertyViewStatsFallback(t)):r||[]}catch(r){return console.error("fetchPropertyViewStats error:",r),[]}}static async fetchPropertyViewStatsFallback(t){const{data:r,error:n}=await X.from("properties").select("public_id").eq("agent_id",t);if(n||!(r!=null&&r.length))return[];const a=r.map(d=>d.public_id),{data:i,error:o}=await X.from("uag_events").select("property_id, session_id, duration, actions").in("property_id",a);if(o||!i)return[];const l=new Map;for(const d of i){const u=d.property_id;l.has(u)||l.set(u,{property_id:u,view_count:0,unique_sessions:0,total_duration:0,line_clicks:0,call_clicks:0});const h=l.get(u);h.view_count++,h.total_duration+=d.duration||0;const f=d.actions;f!=null&&f.click_line&&h.line_clicks++,f!=null&&f.click_call&&h.call_clicks++}const c=new Map;for(const d of i)c.has(d.property_id)||c.set(d.property_id,new Set),c.get(d.property_id).add(d.session_id);for(const[d,u]of c){const h=l.get(d);h&&(h.unique_sessions=u.size)}return Array.from(l.values())}static async purchaseLead(t,r,n,a){const{error:i}=await X.rpc("purchase_lead",{p_user_id:t,p_lead_id:r,p_cost:n,p_grade:a});if(i)throw i}}const kx={user:{points:1280,quota:{s:2,a:3}},leads:[{id:"S-5566",name:" S-5566",grade:"S",intent:98,prop:"",visit:15,price:20,status:"purchased",purchased_at:Date.now()-2*36e5,ai:"S ",remainingHours:118},{id:"S-9011",name:" S-9011",grade:"S",intent:93,prop:"",visit:11,price:20,status:"purchased",purchased_at:Date.now()-6*36e5,ai:"",remainingHours:114},{id:"A-7788",name:" A-7788",grade:"A",intent:79,prop:"",visit:6,price:10,status:"purchased",purchased_at:Date.now()-20*36e5,ai:"A ",remainingHours:52},{id:"A-6600",name:" A-6600",grade:"A",intent:74,prop:"",visit:5,price:10,status:"purchased",purchased_at:Date.now()-10*36e5,ai:"",remainingHours:62},{id:"B218",name:" B218",grade:"S",intent:92,prop:" 3 ",visit:7,price:20,status:"new",ai:" ",x:25,y:25},{id:"A103",name:" A103",grade:"S",intent:88,prop:" 12F",visit:12,price:20,status:"new",ai:"",x:15,y:45},{id:"S901",name:" S901",grade:"S",intent:94,prop:"",visit:9,price:20,status:"new",ai:"",x:40,y:32},{id:"S880",name:" S880",grade:"S",intent:90,prop:"",visit:8,price:20,status:"new",ai:"",x:60,y:40},{id:"C055",name:" C055",grade:"A",intent:75,prop:"",visit:4,price:10,status:"new",ai:"A ",x:60,y:20},{id:"A230",name:" A230",grade:"A",intent:71,prop:" 3 ",visit:3,price:10,status:"new",ai:"",x:70,y:30},{id:"A550",name:" A550",grade:"A",intent:69,prop:"",visit:3,price:10,status:"new",ai:"",x:50,y:15},{id:"D330",name:" D330",grade:"B",intent:62,prop:"",visit:3,price:3,status:"new",ai:"",x:40,y:60},{id:"B778",name:" B778",grade:"B",intent:58,prop:"",visit:2,price:3,status:"new",ai:"",x:30,y:70},{id:"C021",name:" C021",grade:"C",intent:48,prop:"",visit:2,price:1,status:"new",ai:"",x:75,y:55},{id:"C990",name:" C990",grade:"C",intent:42,prop:"",visit:1,price:1,status:"new",ai:"",x:82,y:65},{id:"H009",name:" H009",grade:"F",intent:28,prop:"",visit:1,price:.5,status:"new",ai:"",x:70,y:75},{id:"F778",name:" F778",grade:"F",intent:22,prop:"",visit:1,price:.5,status:"new",ai:"",x:55,y:80}],listings:[{title:"12/15F ",tags:["","",""],view:1284,click:214,fav:37,thumbColor:"#eef2ff"},{title:" 3 ",tags:["",""],view:986,click:163,fav:22,thumbColor:"#f0fdf4"},{title:"3",tags:["",""],view:846,click:128,fav:15,thumbColor:"#fff7ed"}],feed:[{title:"12F ",meta:"",body:""},{title:"",meta:" 41",body:" 9 "}]};function Sx(){const[e,t]=p.useState(null),[r,n]=p.useState(null),[a,i]=p.useState(!0);return p.useEffect(()=>{X.auth.getSession().then(({data:{session:l}})=>{t(l),n((l==null?void 0:l.user)??null),i(!1)});const{data:{subscription:o}}=X.auth.onAuthStateChange((l,c)=>{t(c),n((c==null?void 0:c.user)??null),i(!1)});return()=>o.unsubscribe()},[]),{session:e,user:r,loading:a}}const ja=(e,t)=>e.grade==="S"&&t.quota.s<=0?{valid:!1,error:"S "}:e.grade==="A"&&t.quota.a<=0?{valid:!1,error:"A "}:{valid:!0};function Cx(){var h,f;const{session:e}=Sx(),[t,r]=p.useState(!0),n=Kr();p.useEffect(()=>{if(typeof window>"u")return;const v=new URLSearchParams(window.location.search).get("mode");let b=!0;if(v==="mock"||v==="live")b=v==="mock",localStorage.setItem("uag_mode",v);else{const y=localStorage.getItem("uag_mode");(y==="mock"||y==="live")&&(b=y==="mock")}r(b)},[]);const a=()=>{{dt.error("");return}},{data:i,isLoading:o,error:l,refetch:c}=Zl({queryKey:["uagData",t,(h=e==null?void 0:e.user)==null?void 0:h.id],queryFn:async()=>{var x;if(t)return kx;if(!((x=e==null?void 0:e.user)!=null&&x.id))throw new Error("Not authenticated");return Hs.fetchAppData(e.user.id)},enabled:t||!!((f=e==null?void 0:e.user)!=null&&f.id),staleTime:1e3*10,refetchInterval:t?!1:3e4}),d=Bl({mutationFn:async({leadId:x,cost:v,grade:b})=>{var y;if(t){await new Promise(g=>setTimeout(g,500));return}if(!((y=e==null?void 0:e.user)!=null&&y.id))throw new Error("Not authenticated");await Hs.purchaseLead(e.user.id,x,v,b)},onMutate:async({leadId:x,cost:v,grade:b})=>{var g,T;await n.cancelQueries({queryKey:["uagData"]});const y=n.getQueryData(["uagData",t,(g=e==null?void 0:e.user)==null?void 0:g.id]);if(y){const C=y.leads.find(w=>w.id===x);if(C){const{valid:w,error:E}=ja(C,y.user);if(!w)throw new Error(E||" (Optimistic Check)")}const N={...y,user:{...y.user,points:y.user.points-v,quota:{...y.user.quota,s:b==="S"?y.user.quota.s-1:y.user.quota.s,a:b==="A"?y.user.quota.a-1:y.user.quota.a}},leads:y.leads.map(w=>w.id===x?{...w,status:"purchased",remainingHours:un[b]||48}:w)};n.setQueryData(["uagData",t,(T=e==null?void 0:e.user)==null?void 0:T.id],N)}return{previousData:y}},onError:(x,v,b)=>{var y;b!=null&&b.previousData&&n.setQueryData(["uagData",t,(y=e==null?void 0:e.user)==null?void 0:y.id],b.previousData),dt.error(`: ${x instanceof Error?x.message:"Unknown error"}`)},onSettled:()=>{n.invalidateQueries({queryKey:["uagData"]})}});return{data:i,isLoading:o,error:l,buyLead:async x=>{if(!i||d.isPending)return;const v=i.leads.find(T=>T.id===x);if(!v){dt.error("");return}if(v.status!=="new"){dt.error("");return}const{valid:b,error:y}=ja(v,i.user);if(!b){dt.error(y||"");return}const g=v.price||10;if(i.user.points<g){dt.error("");return}d.mutate({leadId:x,cost:g,grade:v.grade},{onSuccess:()=>{dt.success("")}})},isBuying:d.isPending,useMock:t,toggleMode:a,refetch:c}}function zx(e,t){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e(...n),t)}}function Ix(){const[e,t]=p.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return p.useEffect(()=>{if(typeof window>"u")return;const r=zx(()=>{t({width:window.innerWidth,height:window.innerHeight})},150);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function Ex(){const[e,t]=p.useState(null),{width:r}=Ix();p.useEffect(()=>{r>ya.TABLET&&e&&t(null)},[r,e]);const n=p.useCallback(i=>{t(i),requestAnimationFrame(()=>{var o;window.innerWidth<=ya.TABLET&&((o=document.getElementById("action-panel-container"))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))})},[]),a=p.useCallback(()=>t(null),[]);return{selectedLead:e,selectLead:n,close:a}}const Px=()=>s.jsx("header",{className:S["uag-header"],children:s.jsxs("div",{className:S["uag-header-inner"],children:[s.jsxs("div",{className:S["uag-logo"],children:[s.jsx("div",{className:S["uag-logo-badge"],children:""}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:S["uag-breadcrumb"],children:[s.jsx("span",{children:" 21"}),s.jsx("span",{className:`${S["uag-badge"]} ${S["uag-badge--pro"]}`,children:" PRO"})]})]})}),Tx=({user:e,useMock:t,toggleMode:r})=>s.jsxs("div",{className:S["uag-footer-bar"],children:[s.jsxs("div",{style:{marginRight:"auto",fontSize:"12px",color:"var(--ink-300)"},children:["",s.jsx("strong",{style:{color:t?"#f59e0b":"#16a34a"},children:t?"Local Mock":"Live API"}),s.jsx("button",{onClick:r,style:{marginLeft:"10px",fontSize:"10px",cursor:"pointer",border:"1px solid #ccc",padding:"2px 6px",borderRadius:"4px"},children:""})]}),s.jsx("button",{className:S["uag-btn"],children:""}),s.jsx("button",{className:`${S["uag-btn"]} ${S.primary}`,children:""}),s.jsxs("span",{className:S["uag-badge"],style:{fontSize:"14px",background:"#fff8dc",color:"#92400e",borderColor:"#fcd34d"},children:[" ",s.jsx("span",{id:"user-points",children:e.points})]})]}),Mx=()=>s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"animate-pulse flex space-x-4 justify-center",children:s.jsxs("div",{className:"flex-1 space-y-4 py-1 max-w-md",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mx-auto"})]})]})}),s.jsx("div",{className:"mt-4 text-gray-500",children:"..."})]}),$x=({error:e,resetErrorBoundary:t})=>s.jsxs("div",{role:"alert",className:"p-6 text-center text-red-600",children:[s.jsx("p",{className:"font-bold text-lg mb-2",children:""}),s.jsx("pre",{className:"bg-red-50 p-4 rounded text-sm mb-4 overflow-auto max-w-lg mx-auto",children:e.message}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:""})]});function Ax({leads:e,onSelectLead:t}){const r=e.filter(n=>n.status==="new");return s.jsxs("section",{className:`${S["uag-card"]} ${S["k-span-6"]}`,id:"radar-section",style:{minHeight:"450px"},children:[s.jsxs("div",{className:S["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:S["uag-card-title"],children:"UAG "}),s.jsx("div",{className:S["uag-card-sub"],children:"S/A B/C/F "})]}),s.jsx("div",{className:S["uag-actions"],style:{gap:"4px"}})]}),s.jsxs("div",{className:S["uag-cluster"],id:"radar-container",children:[s.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"300px",height:"300px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),s.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"150px",height:"150px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),s.jsxs("div",{style:{position:"absolute",left:"16px",top:"16px",background:"rgba(255,255,255,0.9)",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",color:"#0f172a",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0",zIndex:5},children:[s.jsx("span",{style:{width:"8px",height:"8px",background:"#22c55e",borderRadius:"50%",display:"inline-block",marginRight:"4px"}}),s.jsx("span",{style:{fontWeight:700},children:"Live "})]}),r.map(n=>{const a=n.x!=null?n.x:50,i=n.y!=null?n.y:50,o=n.grade==="S"?120:n.grade==="A"?100:n.grade==="B"?90:n.grade==="C"?80:60,l=5+Math.random()*3+"s";return s.jsxs("div",{className:S["uag-bubble"],"data-grade":n.grade,role:"button","aria-label":`${n.name||n.id} - ${n.grade}`,tabIndex:0,style:{"--w":o+"px","--float":l,left:a+"%",top:i+"%"},onClick:()=>t(n),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&t(n)},children:[s.jsx("div",{className:S["uag-bubble-grade"],style:{background:`var(--grade-${n.grade.toLowerCase()})`,color:"#fff"},children:n.grade}),s.jsxs("div",{style:{textAlign:"center",lineHeight:1.2},children:[s.jsx("div",{style:{fontWeight:800,fontSize:"14px"},children:n.id}),s.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:[n.intent,"%"]})]}),s.jsx("div",{className:S["uag-bubble-label"],children:n.prop})]},n.id)})]})]})}const Es=({label:e,value:t,highlight:r=!1})=>s.jsxs("div",{className:S["ap-stat"],children:[s.jsx("span",{children:e}),s.jsx("b",{style:r?{color:"var(--uag-brand)"}:{},children:t})]}),Rx=p.forwardRef(({selectedLead:e,onBuyLead:t,isProcessing:r},n)=>{const[a,i]=p.useState(!1);if(p.useEffect(()=>{i(!1)},[e]),!e)return s.jsx("section",{className:S["k-span-6"],id:"action-panel-container",ref:n,children:s.jsx("div",{className:S["uag-action-panel"],id:"action-panel",children:s.jsx("div",{style:{height:"100%",minHeight:"200px",display:"grid",placeItems:"center",color:"var(--ink-300)",textAlign:"center",padding:"40px 20px"},children:s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:""}),s.jsxs("div",{children:["",s.jsx("br",{}),""]})]})})})});const o=e.grade==="S"||e.grade==="A",l=()=>{i(!0)},c=()=>{t(e.id),i(!1)},d=()=>{i(!1)};return s.jsx("section",{className:S["k-span-6"],id:"action-panel-container",ref:n,children:s.jsxs("div",{className:S["uag-action-panel"],id:"action-panel",children:[s.jsx("div",{className:S["ap-head"],children:s.jsxs("span",{className:`${S["uag-badge"]} ${S["uag-badge--"+e.grade.toLowerCase()]}`,children:[e.grade,"",e.name]})}),s.jsxs("div",{className:S["ap-body"],children:[s.jsxs("div",{className:S["ap-stats-group"],children:[s.jsx(Es,{label:"",value:e.prop}),s.jsx(Es,{label:"",value:`${e.intent}%`,highlight:!0}),s.jsx(Es,{label:"",value:`${e.visit} `}),s.jsx(Es,{label:"",value:`${e.price} `})]}),s.jsx("div",{className:`${S["ai-box"]} ${S.urgent}`,children:s.jsx("div",{children:e.ai})}),s.jsxs("div",{className:S["action-zone"],children:[o&&s.jsx("div",{style:{background:"#fff7ed",color:"#ea580c",fontWeight:700,fontSize:"12px",textAlign:"center",padding:"6px",borderRadius:"4px",border:"1px solid #ffedd5",marginBottom:"10px"},children:"  "}),a?s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("button",{className:S["btn-attack"],style:{background:"#ef4444",flex:1},onClick:c,disabled:r,children:r?"...":` ${e.price} ?`}),s.jsx("button",{className:S["btn-attack"],style:{background:"#94a3b8",flex:1},onClick:d,disabled:r,children:""})]}):s.jsx("button",{className:S["btn-attack"],onClick:l,disabled:r,children:r?"...":"  (/)"}),s.jsxs("div",{style:{textAlign:"center",fontSize:"11px",color:"#94a3b8",marginTop:"8px"},children:["/",s.jsx("br",{}),""]})]})]})]})})}),Lx=e=>{const t=un[e.grade]??336,r=e.remainingHours??t,n=Math.max(0,Math.min(100,r/t*100)),a=e.grade==="S"||e.grade==="A";let i="";return a?i=`${r.toFixed(1)} `:i=`${(r/24).toFixed(1)} `,{total:t,remaining:r,percent:n,isExclusive:a,timeDisplay:i}};function Ox({leads:e}){const t=e.filter(r=>r.status==="purchased");return s.jsxs("section",{className:`${S["uag-card"]} ${S["k-span-6"]}`,children:[s.jsxs("div",{className:S["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:S["uag-card-title"],children:""}),s.jsx("div",{className:S["uag-card-sub"],children:"S  120hr / A  72hr B/C/F  14 "})]}),s.jsx("div",{className:S["uag-actions"],children:s.jsx("button",{className:S["uag-btn"],children:""})})]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{className:S["monitor-table"],children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"25%"},children:"/"}),s.jsx("th",{style:{width:"35%"},children:""}),s.jsx("th",{style:{width:"20%"},children:""}),s.jsx("th",{style:{width:"20%"},children:""})]})}),s.jsx("tbody",{id:"asset-list",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:""})}):t.map(r=>{const{percent:n,isExclusive:a,timeDisplay:i}=Lx(r),o=`var(--grade-${r.grade.toLowerCase()})`,l=a?"":"";return s.jsxs("tr",{children:[s.jsx("td",{"data-label":"/",children:s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("span",{style:{display:"inline-grid",placeItems:"center",width:"24px",height:"24px",borderRadius:"50%",fontSize:"11px",fontWeight:900,color:"#fff",marginRight:"8px",background:o},children:r.grade}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:800,color:"var(--ink-100)"},children:r.name}),s.jsx("div",{style:{fontSize:"11px",color:"var(--ink-300)"},children:r.prop})]})]})}),s.jsxs("td",{"data-label":"",children:[s.jsxs("div",{style:{fontSize:"11px",fontWeight:700,marginBottom:"2px",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{color:o},children:l}),s.jsx("span",{className:S["t-countdown"],children:i})]}),s.jsx("div",{className:S["progress-bg"],children:s.jsx("div",{className:S["progress-fill"],style:{width:`${n}%`,background:o}})})]}),s.jsx("td",{"data-label":"",children:s.jsx("span",{className:S["uag-badge"],style:{background:"#f0fdf4",color:"#16a34a",border:"none"},children:""})}),s.jsx("td",{"data-label":"",children:s.jsx("button",{className:`${S["uag-btn"]} ${S.primary}`,style:{padding:"4px 12px",fontSize:"12px"},children:" / "})})]},r.id)})})]})})]})}function Fx({listings:e,feed:t}){return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`${S["uag-card"]} ${S["k-span-3"]}`,children:[s.jsxs("div",{className:S["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:S["uag-card-title"],children:""}),s.jsx("div",{className:S["uag-card-sub"],children:""})]}),s.jsx("div",{className:S["uag-actions"],children:s.jsxs(ur,{to:"/property/upload",className:S["uag-btn"],style:{display:"inline-flex",alignItems:"center",gap:"4px",textDecoration:"none"},children:[s.jsx($s,{size:14}),""]})})]}),s.jsx("div",{id:"listing-container",children:e.length===0?s.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:""}):e.map((r,n)=>{var a,i;return s.jsx("article",{className:S["listing-item"],children:n===0?s.jsxs(ur,{to:"/property/MH-100001",style:{display:"contents",textDecoration:"none",color:"inherit"},children:[s.jsx("div",{className:S["l-thumb"],style:{background:r.thumbColor}}),s.jsxs("div",{children:[s.jsx("div",{className:S["l-title"],children:r.title}),s.jsx("div",{className:S["l-tags"],children:(a=r.tags)==null?void 0:a.map((o,l)=>s.jsx("span",{className:S["l-tag"],children:o},l))}),s.jsxs("div",{className:S["l-kpi"],children:[s.jsxs("span",{children:[" ",s.jsx("b",{children:r.view})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.click})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.fav})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:S["l-thumb"],style:{background:r.thumbColor}}),s.jsxs("div",{children:[s.jsx("div",{className:S["l-title"],children:r.title}),s.jsx("div",{className:S["l-tags"],children:(i=r.tags)==null?void 0:i.map((o,l)=>s.jsx("span",{className:S["l-tag"],children:o},l))}),s.jsxs("div",{className:S["l-kpi"],children:[s.jsxs("span",{children:[" ",s.jsx("b",{children:r.view})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.click})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.fav})]})]})]})]})},n)})})]}),s.jsxs("section",{className:`${S["uag-card"]} ${S["k-span-3"]}`,children:[s.jsxs("div",{className:S["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:S["uag-card-title"],children:""}),s.jsx("div",{className:S["uag-card-sub"],children:""})]}),s.jsx("div",{className:S["uag-actions"],children:s.jsx("button",{className:S["uag-btn"],children:""})})]}),s.jsx("div",{id:"feed-container",children:t.length===0?s.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:""}):t.map((r,n)=>s.jsxs("article",{className:S["feed-post"],children:[s.jsx("div",{className:S["fp-title"],children:r.title}),s.jsx("div",{className:S["fp-meta"],children:r.meta}),s.jsx("div",{className:S["fp-body"],children:r.body})]},n))})]})]})}const Dx="_reportContainer_exvqp_4",Ux="_reportStep_exvqp_9",Zx="_reportStepHeader_exvqp_15",Bx="_reportStepBadge_exvqp_27",qx="_reportStepHint_exvqp_36",Hx="_reportBackBtn_exvqp_42",Wx="_reportImportSection_exvqp_62",Vx="_reportImportBtn_exvqp_66",Qx="_reportDivider_exvqp_97",Gx="_reportListings_exvqp_114",Kx="_reportListingItem_exvqp_122",Jx="_reportListingThumb_exvqp_140",Yx="_reportListingInfo_exvqp_152",Xx="_reportListingTitle_exvqp_157",eg="_reportListingMeta_exvqp_166",tg="_reportListingArrow_exvqp_180",sg="_reportSelectedProperty_exvqp_186",rg="_reportStyles_exvqp_199",ng="_reportStyleItem_exvqp_205",ag="_selected_exvqp_222",ig="_reportStyleIcon_exvqp_227",og="_reportStyleInfo_exvqp_231",lg="_reportStyleTitle_exvqp_235",cg="_reportStyleDesc_exvqp_241",dg="_reportStyleCheck_exvqp_247",ug="_reportHighlights_exvqp_252",hg="_reportHighlightItem_exvqp_260",mg="_reportHighlightIcon_exvqp_282",pg="_reportHighlightInfo_exvqp_286",fg="_reportHighlightTitle_exvqp_290",xg="_reportHighlightDesc_exvqp_296",gg="_reportHighlightCheck_exvqp_302",bg="_reportHighlightUnchecked_exvqp_306",vg="_reportStepFooter_exvqp_318",yg="_reportNextBtn_exvqp_328",jg="_reportPhoneFrame_exvqp_349",wg="_reportPhoneNotch_exvqp_360",_g="_reportPhoneContent_exvqp_372",Ng="_reportPreviewHero_exvqp_381",kg="_reportPreviewHeroImg_exvqp_390",Sg="_reportPreviewHeroOverlay_exvqp_394",Cg="_reportPreviewPrice_exvqp_404",zg="_reportPreviewTitle_exvqp_409",Ig="_reportPreviewSpecs_exvqp_415",Eg="_reportPreviewMortgage_exvqp_432",Pg="_reportPreviewMortgageLabel_exvqp_438",Tg="_reportPreviewMortgageValue_exvqp_443",Mg="_reportPreviewHighlights_exvqp_449",$g="_reportPreviewHighlight_exvqp_449",Ag="_reportPreviewAgent_exvqp_477",Rg="_reportPreviewAgentAvatar_exvqp_486",Lg="_reportPreviewAgentInfo_exvqp_497",Og="_reportGenerateBtn_exvqp_512",Fg="_reportSuccess_exvqp_541",Dg="_reportSuccessIcon_exvqp_546",Ug="_reportUrlBox_exvqp_557",Zg="_reportUrlInput_exvqp_565",Bg="_reportUrlCopy_exvqp_575",qg="_reportShareButtons_exvqp_592",Hg="_reportShareBtnPrimary_exvqp_599",Wg="_reportShareBtnLine_exvqp_600",Vg="_reportPreviewLink_exvqp_634",Qg="_reportResetBtn_exvqp_656",P={reportContainer:Dx,reportStep:Ux,reportStepHeader:Zx,reportStepBadge:Bx,reportStepHint:qx,reportBackBtn:Hx,reportImportSection:Wx,reportImportBtn:Vx,reportDivider:Qx,reportListings:Gx,reportListingItem:Kx,reportListingThumb:Jx,reportListingInfo:Yx,reportListingTitle:Xx,reportListingMeta:eg,reportListingArrow:tg,reportSelectedProperty:sg,reportStyles:rg,reportStyleItem:ng,selected:ag,reportStyleIcon:ig,reportStyleInfo:og,reportStyleTitle:lg,reportStyleDesc:cg,reportStyleCheck:dg,reportHighlights:ug,reportHighlightItem:hg,reportHighlightIcon:mg,reportHighlightInfo:pg,reportHighlightTitle:fg,reportHighlightDesc:xg,reportHighlightCheck:gg,reportHighlightUnchecked:bg,reportStepFooter:vg,reportNextBtn:yg,reportPhoneFrame:jg,reportPhoneNotch:wg,reportPhoneContent:_g,reportPreviewHero:Ng,reportPreviewHeroImg:kg,reportPreviewHeroOverlay:Sg,reportPreviewPrice:Cg,reportPreviewTitle:zg,reportPreviewSpecs:Ig,reportPreviewMortgage:Eg,reportPreviewMortgageLabel:Pg,reportPreviewMortgageValue:Tg,reportPreviewHighlights:Mg,reportPreviewHighlight:$g,reportPreviewAgent:Ag,reportPreviewAgentAvatar:Rg,reportPreviewAgentInfo:Lg,reportGenerateBtn:Og,reportSuccess:Fg,reportSuccessIcon:Dg,reportUrlBox:Ug,reportUrlInput:Zg,reportUrlCopy:Bg,reportShareButtons:qg,reportShareBtnPrimary:Hg,reportShareBtnLine:Wg,reportPreviewLink:Vg,reportResetBtn:Qg},Gg={id:"demo-001",title:" 12F322",address:" 168 ",district:"",price:3288e4,pricePerPing:521e3,size:67.3,rooms:"322",floor:"12F/15F",age:5,direction:"",parking:"",managementFee:3500,community:"",communityYear:2019,communityUnits:280,images:[],highlights:[{id:"commute",icon:"",title:"",description:" 5 ",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"view",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:"7-11  3 ",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1}]},Kg=[Gg,{id:"demo-002",title:"423",address:" 256 ",district:"",price:88e6,pricePerPing:112e4,size:78.5,rooms:"423",floor:"18F/22F",age:3,direction:"",parking:"",managementFee:6800,community:"",communityYear:2021,communityUnits:156,images:[],highlights:[{id:"commute",icon:"",title:"",description:" 3 ",selected:!0},{id:"view",icon:"",title:"",description:" 101",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:" 5 ",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1}]},{id:"demo-003",title:"211",address:" 88 ",district:"",price:245e5,pricePerPing:68e4,size:36,rooms:"211",floor:"5F/12F",age:15,direction:"",parking:"",managementFee:2200,community:"",communityYear:2009,communityUnits:88,images:[],highlights:[{id:"amenity",icon:"",title:"",description:"SOGO",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"commute",icon:"",title:"",description:"",selected:!1},{id:"view",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1}]}],Jg=[{id:"simple",icon:"",title:"",desc:""},{id:"investment",icon:"",title:"",desc:""},{id:"marketing",icon:"",title:"",desc:""}];function Yg({listings:e=[]}){const[t,r]=p.useState(1),[n,a]=p.useState(null),[i,o]=p.useState("simple"),[l,c]=p.useState([]),[d,u]=p.useState(""),[h,f]=p.useState(!1),x=p.useRef(null),v=z=>z>=1e8?`${(z/1e8).toFixed(2)} `:`${(z/1e4).toFixed(0)} `,b=(z,Q=.2,V=30,R=.021)=>{const Ae=z*(1-Q),Ie=R/12,J=V*12,Xt=Ae*(Ie*Math.pow(1+Ie,J))/(Math.pow(1+Ie,J)-1);return Math.round(Xt)},y=z=>{a(z),c(z.highlights),r(2)},g=z=>{o(z),r(3)},T=z=>{const Q=l.filter(V=>V.selected).length;c(V=>V.map(R=>R.id===z?!R.selected&&Q>=3?(re.error(" 3 "),R):{...R,selected:!R.selected}:R))},C=()=>{if(l.filter(Q=>Q.selected).length<1){re.error(" 1 ");return}r(4)},N=async()=>{if(!n)return;f(!0);const z=re.loading("...");try{await new Promise(R=>setTimeout(R,1500));const Q=`R-${Date.now().toString(36).toUpperCase()}`,V=`${window.location.origin}/r/${Q}`;u(V),r(5),re.success("",{id:z})}catch{re.error("",{id:z})}finally{f(!1)}},w=async()=>{try{await navigator.clipboard.writeText(d),re.success(" LINE")}catch{re.error("")}},E=()=>{const z=encodeURIComponent(`${n==null?void 0:n.title}

 

${d}`);window.open(`https://line.me/R/msg/text/?${z}`,"_blank")},I=()=>{r(1),a(null),o("simple"),c([]),u("")},j=()=>{var z;(z=x.current)==null||z.click()},A=async z=>{var R;if(!((R=z.target.files)==null?void 0:R[0]))return;const V=re.loading("AI ...");try{await new Promise(Ie=>setTimeout(Ie,2e3));const Ae={id:"detected-001",title:" 18F",address:"",district:"",price:188e6,pricePerPing:156e4,size:120.5,rooms:"434",floor:"18F/24F",age:10,direction:"",parking:"",managementFee:15e3,community:"",communityYear:2014,communityUnits:52,images:[],highlights:[{id:"view",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"renovated",icon:"",title:"",description:"",selected:!0},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:"",selected:!1},{id:"commute",icon:"",title:"",description:" 8 ",selected:!1},{id:"school",icon:"",title:"",description:"",selected:!1}]};a(Ae),c(Ae.highlights),r(2),re.success("AI ",{id:V})}catch{re.error("",{id:V})}},k=()=>s.jsxs("div",{className:P.reportStep,children:[s.jsxs("div",{className:P.reportStepHeader,children:[s.jsx("span",{className:P.reportStepBadge,children:"1/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:P.reportImportSection,children:[s.jsx("input",{type:"file",ref:x,style:{display:"none"},accept:"image/*",onChange:A}),s.jsxs("button",{className:P.reportImportBtn,onClick:j,children:[s.jsx(Wa,{size:20}),s.jsx("span",{children:""}),s.jsx("small",{children:"AI "})]})]}),s.jsx("div",{className:P.reportDivider,children:s.jsx("span",{children:""})}),s.jsx("div",{className:P.reportListings,children:Kg.map(z=>s.jsxs("button",{className:P.reportListingItem,onClick:()=>y(z),children:[s.jsx("div",{className:P.reportListingThumb,children:s.jsx($e,{size:24})}),s.jsxs("div",{className:P.reportListingInfo,children:[s.jsx("div",{className:P.reportListingTitle,children:z.title}),s.jsxs("div",{className:P.reportListingMeta,children:[s.jsxs("span",{children:[s.jsx(hs,{size:12})," ",z.district]}),s.jsxs("span",{children:[s.jsx(Vs,{size:12})," ",v(z.price)]})]})]}),s.jsx(lt,{size:20,className:P.reportListingArrow})]},z.id))})]}),$=()=>s.jsxs("div",{className:P.reportStep,children:[s.jsxs("div",{className:P.reportStepHeader,children:[s.jsx("button",{className:P.reportBackBtn,onClick:()=>r(1),children:s.jsx(Ps,{size:20})}),s.jsx("span",{className:P.reportStepBadge,children:"2/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:P.reportSelectedProperty,children:[s.jsx($e,{size:18}),s.jsx("span",{children:n==null?void 0:n.title})]}),s.jsx("div",{className:P.reportStyles,children:Jg.map(z=>s.jsxs("button",{className:`${P.reportStyleItem} ${i===z.id?P.selected:""}`,onClick:()=>g(z.id),children:[s.jsx("span",{className:P.reportStyleIcon,children:z.icon}),s.jsxs("div",{className:P.reportStyleInfo,children:[s.jsx("div",{className:P.reportStyleTitle,children:z.title}),s.jsx("div",{className:P.reportStyleDesc,children:z.desc})]}),i===z.id&&s.jsx(Ce,{size:20,className:P.reportStyleCheck})]},z.id))})]}),H=()=>s.jsxs("div",{className:P.reportStep,children:[s.jsxs("div",{className:P.reportStepHeader,children:[s.jsx("button",{className:P.reportBackBtn,onClick:()=>r(2),children:s.jsx(Ps,{size:20})}),s.jsx("span",{className:P.reportStepBadge,children:"3/4"}),s.jsx("h3",{children:" 3 "})]}),s.jsx("p",{className:P.reportStepHint,children:""}),s.jsx("div",{className:P.reportHighlights,children:l.map(z=>s.jsxs("button",{className:`${P.reportHighlightItem} ${z.selected?P.selected:""}`,onClick:()=>T(z.id),children:[s.jsx("span",{className:P.reportHighlightIcon,children:z.icon}),s.jsxs("div",{className:P.reportHighlightInfo,children:[s.jsx("div",{className:P.reportHighlightTitle,children:z.title}),s.jsx("div",{className:P.reportHighlightDesc,children:z.description})]}),s.jsx("div",{className:P.reportHighlightCheck,children:z.selected?s.jsx(Ce,{size:20}):s.jsx("div",{className:P.reportHighlightUnchecked})})]},z.id))}),s.jsxs("div",{className:P.reportStepFooter,children:[s.jsxs("span",{children:[" ",l.filter(z=>z.selected).length,"/3"]}),s.jsxs("button",{className:P.reportNextBtn,onClick:C,children:[" ",s.jsx(lt,{size:18})]})]})]}),oe=()=>{if(!n)return null;const z=l.filter(V=>V.selected),Q=b(n.price);return s.jsxs("div",{className:P.reportStep,children:[s.jsxs("div",{className:P.reportStepHeader,children:[s.jsx("button",{className:P.reportBackBtn,onClick:()=>r(3),children:s.jsx(Ps,{size:20})}),s.jsx("span",{className:P.reportStepBadge,children:"4/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:P.reportPhoneFrame,children:[s.jsx("div",{className:P.reportPhoneNotch}),s.jsxs("div",{className:P.reportPhoneContent,children:[s.jsxs("div",{className:P.reportPreviewHero,children:[s.jsx("div",{className:P.reportPreviewHeroImg,children:s.jsx($e,{size:48})}),s.jsxs("div",{className:P.reportPreviewHeroOverlay,children:[s.jsxs("div",{className:P.reportPreviewPrice,children:["NT$ ",v(n.price)]}),s.jsx("div",{className:P.reportPreviewTitle,children:n.title})]})]}),s.jsxs("div",{className:P.reportPreviewSpecs,children:[s.jsxs("div",{children:[s.jsx(Ho,{size:14})," ",n.size," "]}),s.jsxs("div",{children:[s.jsx(Wo,{size:14})," ",n.floor]}),s.jsxs("div",{children:[s.jsx(_t,{size:14})," ",n.age," "]}),s.jsxs("div",{children:[s.jsx(Vo,{size:14})," ",n.direction]})]}),s.jsxs("div",{className:P.reportPreviewMortgage,children:[s.jsx("div",{className:P.reportPreviewMortgageLabel,children:" 8 30 "}),s.jsxs("div",{className:P.reportPreviewMortgageValue,children:[" NT$ ",Q.toLocaleString()]})]}),s.jsx("div",{className:P.reportPreviewHighlights,children:z.map(V=>s.jsxs("div",{className:P.reportPreviewHighlight,children:[s.jsx("span",{children:V.icon}),s.jsxs("div",{children:[s.jsx("strong",{children:V.title}),s.jsx("p",{children:V.description})]})]},V.id))}),s.jsxs("div",{className:P.reportPreviewAgent,children:[s.jsx("div",{className:P.reportPreviewAgentAvatar,children:""}),s.jsxs("div",{className:P.reportPreviewAgentInfo,children:[s.jsx("strong",{children:""}),s.jsx("span",{children:"MaiHouses "})]})]})]})]}),s.jsx("button",{className:P.reportGenerateBtn,onClick:N,disabled:h,children:h?s.jsx(s.Fragment,{children:" ..."}):s.jsxs(s.Fragment,{children:[s.jsx(Hr,{size:18})," "]})})]})},Z=()=>s.jsxs("div",{className:P.reportStep,children:[s.jsxs("div",{className:P.reportStepHeader,children:[s.jsx("span",{className:P.reportStepBadge,children:""}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:P.reportSuccess,children:[s.jsx("div",{className:P.reportSuccessIcon,children:""}),s.jsx("p",{children:""})]}),s.jsxs("div",{className:P.reportUrlBox,children:[s.jsx("input",{type:"text",value:d,readOnly:!0,className:P.reportUrlInput}),s.jsx("button",{className:P.reportUrlCopy,onClick:w,children:s.jsx(pr,{size:18})})]}),s.jsxs("div",{className:P.reportShareButtons,children:[s.jsxs("button",{className:P.reportShareBtnPrimary,onClick:w,children:[s.jsx(pr,{size:18}),""]}),s.jsxs("button",{className:P.reportShareBtnLine,onClick:E,children:[s.jsx(at,{size:18}),"LINE "]})]}),s.jsxs("button",{className:P.reportPreviewLink,onClick:()=>window.open(d,"_blank"),children:[s.jsx(Ws,{size:16}),""]}),s.jsx("button",{className:P.reportResetBtn,onClick:I,children:""})]});return s.jsxs("section",{className:`${S["uag-card"]} ${S["k-span-3"]}`,children:[s.jsxs("div",{className:S["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:S["uag-card-title"],children:" "}),s.jsx("div",{className:S["uag-card-sub"],children:" Word "})]}),t>1&&t<5&&s.jsxs("button",{className:`${S["uag-btn"]} ${S.secondary}`,onClick:I,children:[s.jsx(Gt,{size:14})," "]})]}),s.jsxs("div",{className:P.reportContainer,children:[t===1&&k(),t===2&&$(),t===3&&H(),t===4&&oe(),t===5&&Z()]})]})}const wa=[{id:"TR-2024-001",buyerId:"A103",buyerName:" A103",propertyTitle:" 12F",currentStep:3,status:"active",lastUpdate:Date.now()-30*6e4,offerPrice:315e5,events:[{id:"e1",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-2*864e5,hash:"9f2a...c8d1"},{id:"e2",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-1*864e5,hash:"b7aa...f3e2",detail:"GeoTag: "},{id:"e3",step:3,stepName:"M3 ",action:"",actor:"buyer",timestamp:Date.now()-30*6e4,hash:"1a7c...92b4",detail:" NT$31,500,000"}]},{id:"TR-2024-002",buyerId:"B218",buyerName:" B218",propertyTitle:" 3",currentStep:2,status:"active",lastUpdate:Date.now()-2*36e5,events:[{id:"e4",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-3*864e5,hash:"3c5d...a7b9"},{id:"e5",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-2*36e5,hash:"d8e2...1f4c",detail:" 11/30 14:00"}]},{id:"TR-2024-003",buyerId:"S901",buyerName:" S901",propertyTitle:"",currentStep:4,status:"active",lastUpdate:Date.now()-12*36e5,offerPrice:288e5,events:[{id:"e6",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-7*864e5,hash:"f1a2...b3c4"},{id:"e7",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-5*864e5,hash:"e5d6...c7f8"},{id:"e8",step:3,stepName:"M3 ",action:"",actor:"buyer",timestamp:Date.now()-3*864e5,hash:"a9b0...d1e2"},{id:"e9",step:4,stepName:"M4 ",action:"",actor:"agent",timestamp:Date.now()-12*36e5,hash:"c3d4...e5f6",detail:""}]}],_a=[{key:1,name:"M1 ",icon:ot},{key:2,name:"M2 ",icon:fr},{key:3,name:"M3 ",icon:Vs},{key:4,name:"M4 ",icon:Qs},{key:5,name:"M5 ",icon:$e}];function Xg(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}function e0(e){const t=Date.now()-e;return t<6e4?"":t<36e5?`${Math.floor(t/6e4)} `:t<864e5?`${Math.floor(t/36e5)} `:`${Math.floor(t/864e5)} `}function t0(e){switch(e){case"active":return{text:"",bg:"#dcfce7",color:"#16a34a"};case"completed":return{text:"",bg:"#dbeafe",color:"#2563eb"};case"pending":return{text:"",bg:"#fef3c7",color:"#d97706"};case"expired":return{text:"",bg:"#fee2e2",color:"#dc2626"}}}function s0(){const[e,t]=p.useState(!0),[r,n]=p.useState([]),[a,i]=p.useState(null),[o,l]=p.useState(!1),[c,d]=p.useState(!1),u=p.useCallback(async()=>{l(!0);try{if(e){await new Promise(v=>setTimeout(v,300)),n(wa);const x=wa[0];!a&&x&&i(x.id)}else{const x=await fetch("/api/trust/cases");if(x.ok){const b=(await x.json()).cases||[];n(b),b.length>0&&!a&&i(b[0].id)}}}catch(x){console.error("Failed to load cases:",x)}finally{l(!1)}},[e,a]);p.useEffect(()=>{u()},[u]);const h=r.find(x=>x.id===a),f=(h==null?void 0:h.events.slice(-3).reverse())||[];return s.jsxs("section",{className:`${S["uag-card"]} ${S["k-span-3"]}`,children:[s.jsxs("div",{className:S["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:S["uag-card-title"],children:""}),s.jsxs("div",{className:S["uag-card-sub"],children:["",e&&s.jsx("span",{style:{marginLeft:8,color:"#f59e0b",fontSize:11},children:" Mock"})]})]}),s.jsxs("div",{className:S["uag-actions"],children:[s.jsxs("button",{className:S["uag-btn"],onClick:()=>t(!e),title:e?"":"",children:[s.jsx(mr,{size:14,style:{marginRight:4}}),e?"Mock":"Live"]}),s.jsx("button",{className:S["uag-btn"],onClick:u,disabled:o,children:s.jsx(bn,{size:14,className:o?"animate-spin":""})})]})]}),r.length>0&&s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:4},children:[r.map(x=>{const v=x.id===a,b=t0(x.status);return s.jsxs("button",{onClick:()=>i(x.id),style:{padding:"8px 12px",borderRadius:8,border:v?"2px solid #1749d7":"1px solid #e2e8f0",background:v?"#eef2ff":"#fff",cursor:"pointer",textAlign:"left",minWidth:140,transition:"all 0.2s"},children:[s.jsx("div",{style:{fontSize:12,fontWeight:700,color:v?"#1749d7":"#334155",marginBottom:2},children:x.buyerName}),s.jsx("div",{style:{fontSize:11,color:"#64748b",marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:x.propertyTitle}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsxs("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:b.bg,color:b.color,fontWeight:600},children:["M",x.currentStep]}),s.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:e0(x.lastUpdate)})]})]},x.id)}),s.jsx("button",{style:{padding:"8px 12px",borderRadius:8,border:"1px dashed #cbd5e1",background:"#f8fafc",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:60,color:"#64748b"},onClick:()=>{},children:s.jsx($s,{size:16})})]}),h&&s.jsx("div",{style:{display:"flex",alignItems:"center",gap:0,marginBottom:8},children:_a.map((x,v)=>{const b=x.key<h.currentStep,y=x.key===h.currentStep,g=x.icon;return s.jsxs(Qt.Fragment,{children:[s.jsxs("div",{style:{flex:1,textAlign:"center"},children:[s.jsx("div",{style:{width:32,height:32,borderRadius:"50%",margin:"0 auto 4px",display:"flex",alignItems:"center",justifyContent:"center",background:b?"#16a34a":y?"#1749d7":"#e5e7eb",color:b||y?"#fff":"#6b7280",transition:"all 0.3s"},children:b?s.jsx(De,{size:16}):s.jsx(g,{size:14})}),s.jsx("div",{style:{fontSize:11,fontWeight:y?700:500,color:b?"#16a34a":y?"#1749d7":"#94a3b8"},children:x.name})]}),v<_a.length-1&&s.jsx("div",{style:{flex:.5,height:2,background:b?"#16a34a":"#e5e7eb",marginBottom:20}})]},x.key)})}),h&&s.jsxs("div",{style:{background:"#f8fafc",borderRadius:8,overflow:"hidden"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 80px",padding:"8px 12px",fontSize:11,fontWeight:600,color:"#64748b",background:"#f1f5f9",borderBottom:"1px solid #e2e8f0"},children:[s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""})]}),f.map((x,v)=>{const b=v===0;return s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 80px",padding:"10px 12px",borderBottom:v<f.length-1?"1px solid #e2e8f0":"none",background:b?"#fefce8":"transparent",alignItems:"start"},children:[s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:Xg(x.timestamp)}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:12,color:"#0f172a"},children:[s.jsxs("b",{children:[x.stepName," ",x.action]}),s.jsxs("span",{style:{color:"#64748b"},children:["",x.actor==="agent"?"":x.actor==="buyer"?"":""]})]}),x.detail&&s.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:x.detail})]}),s.jsx("div",{children:x.hash&&s.jsx("span",{style:{fontSize:10,padding:"3px 8px",borderRadius:4,background:b?"#fef3c7":"#f1f5f9",color:b?"#92400e":"#64748b",border:b?"1px solid #fcd34d":"1px solid #e2e8f0",fontFamily:"monospace"},children:x.hash})})]},x.id)}),h.events.length>3&&s.jsx("button",{onClick:()=>d(!c),style:{width:"100%",padding:"8px",fontSize:11,color:"#1749d7",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:c?"":` ${h.events.length} `})]}),!h&&!o&&s.jsxs("div",{style:{textAlign:"center",padding:"32px 16px",color:"#64748b"},children:[s.jsx(Qo,{size:32,style:{margin:"0 auto 8px",opacity:.5}}),s.jsx("div",{style:{fontSize:13,marginBottom:8},children:""}),s.jsxs("button",{className:`${S["uag-btn"]} ${S.primary}`,children:[s.jsx($s,{size:14,style:{marginRight:4}}),""]})]}),o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px",color:"#64748b"},children:[s.jsx(bn,{size:20,className:"animate-spin",style:{margin:"0 auto 8px"}}),s.jsx("div",{style:{fontSize:12},children:"..."})]}),h&&s.jsxs("div",{style:{display:"flex",gap:8,paddingTop:8,borderTop:"1px solid #e2e8f0"},children:[s.jsxs(ur,{to:`/assure?case=${h.id}`,className:`${S["uag-btn"]} ${S.primary}`,style:{flex:1,textAlign:"center",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[" Trust Room",s.jsx(lt,{size:14})]}),h.currentStep===3&&h.offerPrice&&s.jsxs("button",{className:S["uag-btn"],style:{background:"#fef3c7",borderColor:"#fcd34d",color:"#92400e"},children:[s.jsx(Vs,{size:14,style:{marginRight:4}}),""]})]}),r.length>0&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,padding:"12px 0 0",borderTop:"1px solid #e2e8f0"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#1749d7"},children:r.length}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#16a34a"},children:r.filter(x=>x.currentStep>=3).length}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#f59e0b"},children:r.filter(x=>x.status==="pending").length||0}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]})]})]})}function r0(){const{data:e,isLoading:t,buyLead:r,isBuying:n,useMock:a,toggleMode:i}=Cx(),{selectedLead:o,selectLead:l,close:c}=Ex(),d=p.useRef(null),u=async h=>{!e||n||(r(h),c())};return t?s.jsx(Mx,{}):e?s.jsxs("div",{className:S["uag-page"],children:[s.jsx(qa,{position:"top-center"}),s.jsx(Px,{}),s.jsx("main",{className:S["uag-container"],children:s.jsxs("div",{className:S["uag-grid"],children:[s.jsx(Ax,{leads:e.leads,onSelectLead:l}),s.jsx(Rx,{ref:d,selectedLead:o,onBuyLead:u,isProcessing:n}),s.jsx(Ox,{leads:e.leads}),s.jsx(Fx,{listings:e.listings,feed:e.feed}),s.jsx(Yg,{listings:e.listings}),s.jsx(s0,{})]})}),s.jsx(Tx,{user:e.user,useMock:a,toggleMode:i})]}):null}function n0(){return s.jsx($l,{children:({reset:e})=>s.jsx(th,{onReset:e,FallbackComponent:$x,children:s.jsx(r0,{})})})}const a0=e=>{const t=Math.floor(e*.4),r=Math.floor(e*.3),n=Math.floor(e*.3);return[{label:"",value:t,icon:Ce},{label:"",value:r,icon:Rs},{label:"",value:n,icon:Qs}]},i0=({isOpen:e,onClose:t,agentName:r})=>{const[n,a]=p.useState(null),[i,o]=p.useState(""),[l,c]=p.useState(!1),d=p.useMemo(()=>{const h=[],f=["","","","","","",""];for(let x=1;x<=7;x++){const v=new Date;v.setDate(v.getDate()+x);const b=`${v.getMonth()+1}/${v.getDate()}`,y=f[v.getDay()]??"",g=v.getDay()===0||v.getDay()===6?["10:00","11:00","14:00","15:00","16:00"]:["14:00","15:00","19:00"];h.push({date:b,day:y,times:g})}return h},[]);if(!e)return null;const u=()=>{!n||!i||(c(!0),setTimeout(()=>{t(),c(!1),a(null),o("")},2e3))};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-4 text-white",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",children:""}),s.jsxs("p",{className:"text-sm opacity-80",children:["",r," "]})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(Gt,{size:20})})]})}),l?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ce,{className:"text-green-500",size:32})}),s.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),s.jsx("p",{className:"text-slate-500",children:""})]}):s.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[s.jsx("div",{className:"space-y-3 mb-4",children:d.slice(0,4).map(h=>s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-medium text-slate-500 mb-2",children:[h.date," (",h.day,")"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:h.times.map(f=>{const x=`${h.date}-${f}`,v=n===x;return s.jsx("button",{onClick:()=>a(x),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${v?"bg-[#003366] text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:f},x)})})]},h.date))}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{type:"tel",value:i,onChange:h=>o(h.target.value),placeholder:"0912-345-678",className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none"})]}),s.jsxs("button",{onClick:u,disabled:!n||!i,className:`w-full mt-4 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${n&&i?"bg-[#003366] text-white hover:bg-[#004488]":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:[s.jsx(_t,{size:18}),""]})]})]})})},o0=({agent:e,onLineClick:t,onCallClick:r,onBookingClick:n})=>{const[a,i]=p.useState(!1),[o,l]=p.useState(!1),c=p.useMemo(()=>Math.random()>.3,[]),d=a0(e.trustScore),u=p.useMemo(()=>({responseTime:c?"5 ":"2 ",closureRate:Math.min(95,60+e.trustScore%30),totalDeals:e.encouragementCount*2+10,experience:Math.floor(e.trustScore/25)+1}),[e.trustScore,e.encouragementCount,c]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-4",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-md"}),s.jsxs("div",{className:`absolute -bottom-1 -right-1 ${c?"bg-green-500":"bg-slate-400"} text-white text-[10px] px-1.5 py-0.5 rounded-full flex items-center gap-0.5 border border-white`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${c?"bg-white animate-pulse":"bg-slate-300"}`}),s.jsx("span",{children:c?"":""})]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.name,s.jsx("span",{className:"text-xs font-normal text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full",children:e.company})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsxs("p",{className:"text-xs text-slate-400",children:["#",e.internalCode]}),s.jsxs("div",{className:"flex items-center gap-0.5 text-green-600 bg-green-50 px-1.5 py-0.5 rounded text-[10px]",children:[s.jsx(As,{size:10}),s.jsx("span",{children:""})]})]})]})}),s.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 relative cursor-pointer",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center text-[#003366]",children:s.jsx(qr,{size:16,fill:"currentColor"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-[#003366]",children:e.trustScore}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),a&&s.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-slate-800 text-white text-xs rounded-lg p-3 shadow-xl z-10",children:[s.jsx("div",{className:"font-bold mb-2",children:""}),d.map(h=>s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(h.icon,{size:12,className:"text-green-400"}),s.jsx("span",{children:h.label})]}),s.jsxs("span",{className:"font-medium",children:["+",h.value]})]},h.label)),s.jsxs("div",{className:"border-t border-slate-600 mt-2 pt-2 flex justify-between font-bold",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-green-400",children:e.trustScore})]}),s.jsx("div",{className:"absolute top-full left-4 border-8 border-transparent border-t-slate-800"})]})]}),s.jsx("div",{className:"w-px h-8 bg-slate-100"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center text-orange-500",children:s.jsx(xr,{size:16})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-800",children:e.encouragementCount}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]})]})]}),c&&s.jsxs("div",{className:"mt-3 text-xs text-green-600 bg-green-50 px-2 py-1 rounded-lg inline-flex items-center gap-1",children:[s.jsx(Rs,{size:12})," ",u.responseTime," "]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 py-3 border-y border-slate-100",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-[#003366]",children:[u.closureRate,"%"]}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center border-x border-slate-100",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:u.totalDeals}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[u.experience,""]}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-50 space-y-2",children:[s.jsxs("button",{onClick:t,className:"w-full bg-[#06C755] text-white text-sm font-bold py-2.5 rounded-lg hover:bg-[#05B04A] transition-colors flex items-center justify-center gap-2 shadow-sm",children:[s.jsx(at,{size:18})," LINE "]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>n?n():l(!0),className:"flex-1 bg-[#003366] text-white text-sm font-medium py-2 rounded-lg hover:bg-[#004488] transition-colors flex items-center justify-center gap-1.5",children:[s.jsx(_t,{size:16}),""]}),s.jsxs("button",{onClick:r,className:"flex-1 bg-white border border-[#003366] text-[#003366] text-sm font-medium py-2 rounded-lg hover:bg-blue-50 transition-colors flex items-center justify-center gap-1.5",children:[s.jsx(ot,{size:16}),""]})]})]})]}),s.jsx(i0,{isOpen:o,onClose:()=>l(!1),agentName:e.name})]})},Ur={id:"b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a22",publicId:"MH-100001",title:"101",price:3680,address:"",description:"101",images:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"],agent:{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",internalCode:1,name:"",avatarUrl:"https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",company:"",trustScore:92,encouragementCount:156}},Zr={getPropertyByPublicId:async e=>{try{const{data:t,error:r}=await X.from("properties").select(`
          *,
          agent:agents (*)
        `).eq("public_id",e).single();return r||!t?(console.warn("",r),e==="MH-100001"?Ur:null):{id:t.id,publicId:t.public_id,title:t.title,price:Number(t.price),address:t.address,description:t.description,images:t.images||[],sourcePlatform:t.source_platform,agent:{id:t.agent.id,internalCode:t.agent.internal_code,name:t.agent.name,avatarUrl:t.agent.avatar_url||"https://via.placeholder.com/150",company:t.agent.company,trustScore:t.agent.trust_score,encouragementCount:t.agent.encouragement_count}}}catch(t){return console.error("Service Error:",t),Ur}},createProperty:async(e,t)=>{const{data:r,error:n}=await X.from("properties").insert({title:e.title,price:e.price,address:e.address,description:e.description,images:e.images,source_platform:e.sourcePlatform,source_external_id:e.sourceExternalId,agent_id:t}).select().single();if(n)throw n;return r},uploadImages:async e=>{const t=e.map(async n=>{const a=n.name.split(".").pop(),i=`${crypto.randomUUID()}.${a}`,{error:o}=await X.storage.from("property-images").upload(i,n);if(o)return console.error("Image upload error:",o),null;const{data:l}=X.storage.from("property-images").getPublicUrl(i);return l.publicUrl});return(await Promise.all(t)).filter(n=>!!n)},createPropertyWithForm:async(e,t,r)=>{var c,d,u;const{data:{user:n}}=await X.auth.getUser(),a=(n==null?void 0:n.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11";let i=r||null;if(!i&&e.communityName&&e.communityName.trim().length>=2){const h=e.communityName.trim(),f=e.address.replace(/[\-]/g,"").replace(/\d+.*$/,"").replace(/\s+/g,""),{data:x}=await X.from("communities").select("id").eq("address_fingerprint",f).single();if(x)i=x.id;else{const{data:v}=await X.from("communities").select("id").eq("name",h).single();if(v)i=v.id;else{const b=((c=e.address.match(/([^]+[])/))==null?void 0:c[1])||"",y=((d=e.address.match(/^(.*?[])/))==null?void 0:d[1])||"",{data:g,error:T}=await X.from("communities").insert({name:h,address:e.address,address_fingerprint:f,district:b,city:y,is_verified:!1,two_good:[e.advantage1,e.advantage2].filter(Boolean),one_fair:e.disadvantage||null,features:[e.type].filter(Boolean)}).select("id").single();!T&&g&&(i=g.id,console.log(" :",h))}}}const{data:o,error:l}=await X.from("properties").insert({agent_id:a,title:e.title,price:Number(e.price),address:e.address,community_name:((u=e.communityName)==null?void 0:u.trim())||null,community_id:i,size:Number(e.size||0),age:Number(e.age||0),rooms:Number(e.rooms),halls:Number(e.halls),bathrooms:Number(e.bathrooms),floor_current:e.floorCurrent,floor_total:Number(e.floorTotal||0),property_type:e.type,advantage_1:e.advantage1,advantage_2:e.advantage2,disadvantage:e.disadvantage,description:e.description,images:t,features:[e.type,e.advantage1,e.advantage2].filter(Boolean),source_platform:e.sourceExternalId?"591":"MH",source_external_id:e.sourceExternalId||null}).select().single();if(l)throw l;return o},checkCommunityExists:async e=>{if(!e||e.trim().length<2)return{exists:!1};const{data:t}=await X.from("communities").select("id, name").ilike("name",`%${e.trim()}%`).limit(1).single();return t?{exists:!0,community:t}:{exists:!1}}};async function l0(e){try{const{data:t,error:r}=await X.rpc("create_lead",{p_customer_name:e.customerName,p_customer_phone:e.customerPhone,p_customer_email:e.customerEmail||null,p_customer_line_id:e.customerLineId||null,p_agent_id:e.agentId,p_property_id:e.propertyId,p_source:e.source,p_budget_range:e.budgetRange||null,p_preferred_contact_time:e.preferredContactTime||null,p_needs_description:e.needsDescription||null});return r?(console.error("[LeadService] Create lead error:",r),{success:!1,error:r.message}):{success:!0,leadId:t}}catch(t){const r=t instanceof Error?t.message:"";return console.error("[LeadService] Create lead exception:",t),{success:!1,error:r}}}const c0=({isOpen:e,onClose:t,propertyId:r,propertyTitle:n,agentId:a,agentName:i,source:o})=>{const[l,c]=p.useState("form"),[d,u]=p.useState({name:"",phone:"",preferredChannel:"line",preferredTime:"",budget:"",needs:""});if(!e)return null;const h=async b=>{if(b.preventDefault(),!d.name.trim()||!d.phone.trim()){alert("");return}c("submitting");try{const y=await l0({customerName:d.name,customerPhone:d.phone,agentId:a,propertyId:r,source:o,...d.budget?{budgetRange:d.budget}:{},...d.preferredTime?{preferredContactTime:d.preferredTime}:{},...d.needs?{needsDescription:d.needs}:{}});y.success?(c("success"),setTimeout(()=>{t(),c("form"),u({name:"",phone:"",preferredChannel:"line",preferredTime:"",budget:"",needs:""})},3e3)):(alert(y.error||""),c("form"))}catch{alert(""),c("form")}},f=[{value:"line",label:"LINE",icon:s.jsx(at,{size:18,className:"text-[#00c300]"})},{value:"phone",label:"",icon:s.jsx(ot,{size:18,className:"text-blue-600"})},{value:"message",label:"",icon:s.jsx(Go,{size:18,className:"text-slate-600"})}],x=[" 09:00-12:00"," 14:00-18:00"," 19:00-21:00"," 10:00-12:00"," 14:00-18:00",""],v=["1000","1000-2000","2000-3000","3000-5000","5000",""];return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-5 text-white",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-xl",children:""}),s.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[i,"  ",s.jsx("span",{className:"font-bold",children:"10 "})," "]})]}),s.jsx("button",{onClick:t,className:"p-1.5 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(Gt,{size:22})})]}),s.jsxs("div",{className:"mt-3 bg-white/10 rounded-lg px-3 py-2 text-sm",children:[s.jsx("span",{className:"opacity-80",children:""}),s.jsx("span",{className:"font-medium ml-1",children:n})]})]}),s.jsx("div",{className:"p-5 overflow-y-auto max-h-[60vh]",children:l==="success"?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ce,{className:"text-green-600",size:32})}),s.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),s.jsxs("p",{className:"text-slate-600 mb-4",children:[i,"  ",s.jsx("span",{className:"font-bold text-[#003366]",children:"10 "})," "]}),s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-left text-sm",children:[s.jsx("p",{className:"font-medium text-[#003366] mb-2",children:" "}),s.jsxs("ul",{className:"space-y-1 text-slate-600",children:[s.jsx("li",{children:" "}),s.jsx("li",{children:" "}),s.jsx("li",{children:" "})]})]})]}):l==="submitting"?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ls,{className:"animate-spin text-[#003366] mx-auto mb-4",size:40}),s.jsx("p",{className:"text-slate-600",children:"..."})]}):s.jsxs("form",{onSubmit:h,className:"space-y-5",children:[s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:[s.jsxs("p",{className:"font-bold text-amber-900 text-sm mb-2 flex items-center gap-1.5",children:[s.jsx(Rs,{size:14}),""]}),s.jsxs("ul",{className:"text-amber-800 text-xs space-y-1",children:[s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(Ce,{size:12,className:"text-green-600 flex-shrink-0"})," ",i,"  ",s.jsx("strong",{children:"10 "})," "]}),s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(Ce,{size:12,className:"text-green-600 flex-shrink-0"}),""]}),s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(Ce,{size:12,className:"text-green-600 flex-shrink-0"}),""]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:d.name,onChange:b=>u({...d,name:b.target.value}),placeholder:"",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:d.phone,onChange:b=>u({...d,phone:b.target.value}),placeholder:"0912-345-678",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("div",{className:"flex gap-2",children:f.map(b=>s.jsxs("button",{type:"button",onClick:()=>u({...d,preferredChannel:b.value}),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl border-2 transition-all ${d.preferredChannel===b.value?"border-[#003366] bg-blue-50 text-[#003366]":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[b.icon,s.jsx("span",{className:"font-medium text-sm",children:b.label})]},b.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[s.jsx(Rs,{size:14,className:"inline mr-1"}),""]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(b=>s.jsx("button",{type:"button",onClick:()=>u({...d,preferredTime:b}),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${d.preferredTime===b?"bg-[#003366] text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:b},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsxs("select",{value:d.budget,onChange:b=>u({...d,budget:b.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all bg-white",children:[s.jsx("option",{value:"",children:""}),v.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:""}),s.jsx("textarea",{value:d.needs,onChange:b=>u({...d,needs:b.target.value}),placeholder:"...",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366] outline-none transition-all resize-none"})]}),s.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-xl p-3 flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(Ce,{size:16,className:"text-green-600"})}),s.jsxs("div",{className:"text-xs text-green-800",children:[s.jsx("p",{className:"font-medium mb-1",children:" "}),s.jsx("p",{children:""})]})]}),s.jsxs("button",{type:"submit",className:"w-full bg-[#003366] text-white font-bold py-3.5 rounded-xl hover:bg-[#004488] transition-colors shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2",children:[s.jsx(_t,{size:18}),""]})]})})]})})},No=[{id:"commute",icon:"",title:"",subtitle:"/",description:""},{id:"school",icon:"",title:"",subtitle:"",description:""},{id:"community",icon:"",title:"",subtitle:"",description:""},{id:"view",icon:"",title:"",subtitle:"",description:""},{id:"amenity",icon:"",title:"",subtitle:"",description:""},{id:"parking",icon:"",title:"",subtitle:"",description:""},{id:"renovated",icon:"",title:"",subtitle:"",description:""}],d0={simple:{id:"simple",name:"",description:"",icon:""},investment:{id:"investment",name:"",description:"",icon:""},marketing:{id:"marketing",name:"",description:"",icon:""}},Na={id:"demo",publicId:"MH-100001",title:"101",price:3680,address:"100",description:"",images:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800","https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800","https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800","https://images.unsplash.com/photo-1600573472592-401b489a3cdc?w=800"],size:45.2,age:8,rooms:3,halls:2,bathrooms:2,floorCurrent:"12",floorTotal:15,propertyType:"",direction:"",parking:"",communityName:"",communityYear:2016,communityUnits:420,managementFee:80,advantage1:"",advantage2:"",disadvantage:"",agent:{id:"agent-1",name:"",avatarUrl:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200",company:"",phone:"0912-345-678",lineId:"@maihouses",trustScore:92,reviewCount:156,experience:10}};function u0(e,t=.8,r=30,n=.02){const a=e*1e4*t,i=n/12,o=r*12,l=a*(i*Math.pow(1+i,o))/(Math.pow(1+i,o)-1);return Math.round(l)}function h0(){var y;const{id:e}=Oa(),[t]=Fa(),[r,n]=p.useState(Na),[a,i]=p.useState(0),[o,l]=p.useState(0),[c,d]=p.useState(!0),u=t.get("aid"),h=t.get("src")||"direct",f=((y=t.get("h"))==null?void 0:y.split(","))||["commute","school","community"];p.useEffect(()=>{const g=async()=>{try{await fetch("/api/report/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:e,agentId:u,source:h,userAgent:navigator.userAgent})})}catch(C){console.log("Track failed:",C)}},T=async()=>{d(!0);try{await new Promise(C=>setTimeout(C,300)),n(Na),l(Math.floor(Math.random()*20)+5)}catch(C){console.error("Load report failed:",C)}finally{d(!1)}};g(),T()},[e,u,h]);const x=No.filter(g=>f.includes(g.id)),v=u0(r.price),b=async()=>{const g=window.location.href,T=`${r.title} - NT$${r.price}`;if(navigator.share)try{await navigator.share({title:T,url:g})}catch{console.log("Share cancelled")}else await navigator.clipboard.writeText(g),alert("")};return c?s.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500",children:"..."})]})}):s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx("section",{className:"relative",children:s.jsxs("div",{className:"aspect-[4/3] bg-slate-200 overflow-hidden",children:[s.jsx("img",{src:r.images[a],alt:r.title,className:"w-full h-full object-cover"}),r.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>i(g=>g>0?g-1:r.images.length-1),className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center text-white transition",children:s.jsx(Ps,{size:24})}),s.jsx("button",{onClick:()=>i(g=>g<r.images.length-1?g+1:0),className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center text-white transition",children:s.jsx(lt,{size:24})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1.5",children:r.images.map((g,T)=>s.jsx("button",{onClick:()=>i(T),className:`w-2 h-2 rounded-full transition ${T===a?"bg-white":"bg-white/50"}`},T))})]}),s.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-1.5 rounded-full text-sm font-bold text-[#003366] flex items-center gap-1.5",children:[s.jsx($e,{size:14}),""]})]})}),s.jsxs("section",{className:"bg-white px-4 py-5 border-b border-slate-100",children:[s.jsxs("div",{className:"text-3xl font-black text-[#003366] mb-1",children:["NT$ ",r.price.toLocaleString()," "]}),s.jsx("h1",{className:"text-lg font-bold text-slate-800 mb-2",children:r.title}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(hs,{size:14,className:"mr-1"}),r.address]})]}),s.jsx("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.rooms,"",r.halls,"",r.bathrooms,""]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.size," "]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.age," "]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.floorCurrent,"/",r.floorTotal,"F"]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.direction}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl py-3",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.parking||""}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]})]})}),s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-slate-600",children:" 8 30 "}),s.jsx("span",{className:"text-xs text-slate-400",children:" 2%"})]}),s.jsxs("div",{className:"text-2xl font-black text-[#003366]",children:[" NT$ ",v.toLocaleString()]})]})]}),s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsx("div",{className:"space-y-3",children:x.map(g=>s.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 rounded-xl p-3",children:[s.jsx("span",{className:"text-2xl",children:g.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-slate-800",children:g.title}),s.jsx("div",{className:"text-sm text-slate-500",children:g.description})]})]},g.id))})]}),r.communityName&&s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsx("span",{className:"font-medium text-slate-800",children:r.communityName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.communityYear," "]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.communityUnits," "]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.managementFee," /"]})]})]})]}),r.images.length>1&&s.jsxs("section",{className:"bg-white px-4 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.images.slice(0,6).map((g,T)=>s.jsx("button",{onClick:()=>i(T),className:"aspect-square rounded-lg overflow-hidden bg-slate-100",children:s.jsx("img",{src:g,alt:"",className:"w-full h-full object-cover"})},T))})]}),s.jsxs("section",{className:"bg-white px-4 py-5 border-b border-slate-100",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("img",{src:r.agent.avatarUrl,alt:r.agent.name,className:"w-16 h-16 rounded-full object-cover border-2 border-slate-100"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-lg text-slate-800",children:r.agent.name}),s.jsx("div",{className:"text-sm text-slate-500",children:r.agent.company}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-sm text-amber-500",children:[" ",(r.agent.trustScore/20).toFixed(1)]}),s.jsxs("span",{className:"text-xs text-slate-400",children:["(",r.agent.reviewCount," )"]}),r.agent.experience&&s.jsxs("span",{className:"text-xs text-slate-400",children:["",r.agent.experience,""]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:`tel:${r.agent.phone}`,className:"flex items-center justify-center gap-2 w-full py-3.5 bg-[#003366] hover:bg-[#002244] text-white font-bold rounded-xl transition",children:[s.jsx(ot,{size:18})," ",r.agent.phone]}),s.jsxs("a",{href:`https://line.me/R/ti/p/${r.agent.lineId}`,className:"flex items-center justify-center gap-2 w-full py-3.5 bg-[#06C755] hover:bg-[#05a847] text-white font-bold rounded-xl transition",children:[s.jsx(at,{size:18}),"LINE "]}),s.jsxs("button",{className:"flex items-center justify-center gap-2 w-full py-3.5 border-2 border-slate-200 hover:border-slate-300 text-slate-700 font-bold rounded-xl transition",children:[s.jsx(_t,{size:18}),""]})]})]}),s.jsxs("section",{className:"bg-slate-100 px-4 py-6 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[#003366] font-bold mb-2",children:[s.jsx($e,{size:18}),"MaiHouses "]}),s.jsx("div",{className:"text-sm text-slate-500 mb-3",children:""}),o>0&&s.jsxs("div",{className:"text-xs text-slate-400 mb-2",children:["  ",o," "]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["",new Date().toLocaleDateString("zh-TW")]}),s.jsxs("button",{onClick:b,className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-full text-sm text-slate-600 hover:bg-slate-50 transition",children:[s.jsx(Va,{size:14}),""]}),s.jsxs("a",{href:`/maihouses/property/${r.publicId}?aid=${u||""}&src=report`,className:"mt-3 flex items-center justify-center gap-1 text-sm text-[#003366] hover:underline",children:["",s.jsx(Ws,{size:14})]})]})]})}function m0({property:e,isOpen:t,onClose:r}){const[n,a]=p.useState("style"),[i,o]=p.useState("simple"),[l,c]=p.useState(["commute","school","community"]),[d,u]=p.useState([0,1,2,3]),[h,f]=p.useState(""),[x,v]=p.useState(!1),[b,y]=p.useState(null),g=p.useMemo(()=>`${e.title} `,[e.title]),T=()=>{const k=window.location.origin,$=new URLSearchParams({aid:e.agent.id,src:"line_share",h:l.join(","),s:i});return`${k}/maihouses/r/${e.publicId}?${$.toString()}`},C=k=>{c($=>$.includes(k)?$.filter(H=>H!==k):$.length>=3?[...$.slice(1),k]:[...$,k])},N=k=>{u($=>$.includes(k)?$.filter(H=>H!==k):$.length>=5?[...$.slice(1),k]:[...$,k])},w=async()=>{v(!0);try{await new Promise($=>setTimeout($,800));const k=T();y(k),a("preview")}catch{re.error("")}finally{v(!1)}},E=async()=>{if(b)try{await navigator.clipboard.writeText(b),re.success("")}catch{re.error("")}},I=()=>{const k=h||g,$=encodeURIComponent(b||""),H=encodeURIComponent(k);window.open(`https://line.me/R/msg/text/?${H}%0A${$}`,"_blank")},j=async()=>{if(!navigator.share||!b){E();return}try{await navigator.share({title:e.title,text:h||g,url:b})}catch{}},A=()=>{a("style"),y(null),r()};return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:A}),s.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-800",children:""}),s.jsx("button",{onClick:A,className:"p-2 hover:bg-slate-100 rounded-full transition",children:s.jsx(Gt,{size:20,className:"text-slate-500"})})]}),s.jsx("div",{className:"px-5 py-3 bg-slate-50 border-b border-slate-100",children:s.jsx("div",{className:"flex items-center gap-2 text-sm",children:["style","highlights","photos","preview"].map((k,$)=>s.jsxs(Qt.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-1.5 ${n===k?"text-[#003366] font-bold":"text-slate-400"}`,children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${n===k?"bg-[#003366] text-white":["style","highlights","photos","preview"].indexOf(n)>$?"bg-green-500 text-white":"bg-slate-200"}`,children:["style","highlights","photos","preview"].indexOf(n)>$?s.jsx(De,{size:14}):$+1}),s.jsxs("span",{className:"hidden sm:inline",children:[k==="style"&&"",k==="highlights"&&"",k==="photos"&&"",k==="preview"&&""]})]}),$<3&&s.jsx(lt,{size:16,className:"text-slate-300"})]},k))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5",children:[n==="style"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-slate-500 mb-4",children:""}),Object.values(d0).map(k=>s.jsx("button",{onClick:()=>o(k.id),className:`w-full p-4 rounded-xl border-2 text-left transition ${i===k.id?"border-[#003366] bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:k.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-800",children:k.name}),s.jsx("div",{className:"text-sm text-slate-500",children:k.description})]}),i===k.id&&s.jsx("div",{className:"w-6 h-6 bg-[#003366] rounded-full flex items-center justify-center",children:s.jsx(De,{size:14,className:"text-white"})})]})},k.id))]}),n==="highlights"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-slate-500 mb-4",children:[" 3  ",l.length,"/3"]}),No.map(k=>s.jsx("button",{onClick:()=>C(k.id),className:`w-full p-3 rounded-xl border-2 text-left transition ${l.includes(k.id)?"border-[#003366] bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:k.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-800",children:k.title}),s.jsx("div",{className:"text-xs text-slate-500",children:k.subtitle})]}),l.includes(k.id)&&s.jsx("div",{className:"w-6 h-6 bg-[#003366] rounded-full flex items-center justify-center",children:s.jsx(De,{size:14,className:"text-white"})})]})},k.id))]}),n==="photos"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-slate-500 mb-4",children:[" ",d.length,"/5"]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.images.map((k,$)=>s.jsxs("button",{onClick:()=>N($),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition ${d.includes($)?"border-[#003366] ring-2 ring-[#003366]/20":"border-transparent"}`,children:[s.jsx("img",{src:k,alt:"",className:"w-full h-full object-cover"}),d.includes($)&&s.jsx("div",{className:"absolute top-1 right-1 w-5 h-5 bg-[#003366] rounded-full flex items-center justify-center",children:s.jsx(De,{size:12,className:"text-white"})})]},$))})]}),n==="preview"&&b&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(De,{size:32,className:"text-green-600"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:""})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[s.jsx(Ko,{size:14}),""]}),s.jsx("div",{className:"bg-white rounded-lg p-2 text-xs text-slate-500 break-all border border-slate-200",children:b})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600 mb-2 block",children:""}),s.jsx("textarea",{value:h||g,onChange:k=>f(k.target.value),className:"w-full p-3 border border-slate-200 rounded-xl text-sm resize-none focus:outline-none focus:ring-2 focus:ring-[#003366]/20 focus:border-[#003366]",rows:3})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-2 w-full py-3 bg-[#003366] hover:bg-[#002244] text-white font-bold rounded-xl transition",children:[s.jsx(pr,{size:18}),""]}),s.jsxs("button",{onClick:I,className:"flex items-center justify-center gap-2 w-full py-3 bg-[#06C755] hover:bg-[#05a847] text-white font-bold rounded-xl transition",children:[s.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current",children:s.jsx("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),"LINE "]}),s.jsxs("button",{onClick:j,className:"flex items-center justify-center gap-2 w-full py-3 border-2 border-slate-200 hover:border-slate-300 text-slate-700 font-bold rounded-xl transition",children:[s.jsx(Va,{size:18}),""]})]}),s.jsxs("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-[#003366] hover:underline",children:[s.jsx(Qs,{size:14}),""]})]})]}),n!=="preview"&&s.jsxs("div",{className:"px-5 py-4 border-t border-slate-100 flex gap-3",children:[n!=="style"&&s.jsx("button",{onClick:()=>{const k=["style","highlights","photos","preview"],$=k.indexOf(n);if($>0){const H=k[$-1];H&&a(H)}},className:"flex-1 py-3 border-2 border-slate-200 hover:border-slate-300 text-slate-700 font-bold rounded-xl transition",children:""}),s.jsx("button",{onClick:()=>{n==="style"?a("highlights"):n==="highlights"?a("photos"):n==="photos"&&w()},disabled:x||n==="highlights"&&l.length===0,className:"flex-1 py-3 bg-[#003366] hover:bg-[#002244] disabled:bg-slate-300 text-white font-bold rounded-xl transition flex items-center justify-center gap-2",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):n==="photos"?"":s.jsxs(s.Fragment,{children:["",s.jsx(lt,{size:18})]})})]})]})]}):null}const p0=(e,t,r,n)=>{const a=p.useRef(Date.now()),i=p.useRef({click_photos:0,click_line:0,click_call:0,scroll_depth:0}),o=p.useRef(!1),l=p.useRef("F"),c=p.useCallback(()=>{let h=localStorage.getItem("uag_session");return h||(h=`u_${Math.random().toString(36).substring(2,11)}`,localStorage.setItem("uag_session",h)),h},[]),d=p.useCallback(h=>({session_id:c(),agent_id:t,fingerprint:btoa(JSON.stringify({screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language})),event:{type:h,property_id:e,district:r||"unknown",duration:Math.round((Date.now()-a.current)/1e3),actions:{...i.current},focus:[]}}),[e,t,r,c]),u=p.useCallback(async(h,f=!1)=>{const x=d(h);if(f||h==="page_exit"){const v=new Blob([JSON.stringify(x)],{type:"application/json"});navigator.sendBeacon("/api/uag-track",v);return}try{const b=await(await fetch("/api/uag-track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x),keepalive:!0})).json();if(b.success&&b.grade){const y={S:5,A:4,B:3,C:2,F:1},g=y[b.grade]||1,T=y[l.current]||1;g>T&&(l.current=b.grade,b.grade==="S"&&n&&n("S",b.reason))}}catch{const b=new Blob([JSON.stringify(x)],{type:"application/json"});navigator.sendBeacon("/api/uag-track",b)}},[d,n]);return p.useEffect(()=>{const h=()=>{const f=Math.round((window.scrollY+window.innerHeight)/document.body.scrollHeight*100);f>i.current.scroll_depth&&(i.current.scroll_depth=f)};return window.addEventListener("scroll",h,{passive:!0}),()=>window.removeEventListener("scroll",h)},[]),p.useEffect(()=>{if(!e)return;u("page_view",!0);const h=()=>{o.current||(o.current=!0,u("page_exit",!0))};return window.addEventListener("pagehide",h),window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&h()}),()=>{window.removeEventListener("pagehide",h),h()}},[e,u]),{trackPhotoClick:()=>{i.current.click_photos++},trackLineClick:()=>{i.current.click_line=1,u("click_line")},trackCallClick:()=>{i.current.click_call=1,u("click_call")}}},f0=()=>{var $,H,oe;const{id:e}=Oa(),[t]=Fa(),[r,n]=p.useState(!1),a=!1,[i,o]=p.useState(0),[l,c]=p.useState(!1),[d,u]=p.useState("sidebar"),[h,f]=p.useState(!1),[x,v]=p.useState(""),[b,y]=p.useState(!1),[g,T]=p.useState(Ur),C=()=>{let Z=t.get("aid");return Z||(Z=localStorage.getItem("uag_last_aid")),Z&&Z!=="unknown"&&localStorage.setItem("uag_last_aid",Z),Z||"unknown"},N=p.useCallback((Z,z)=>{Z==="S"&&(z&&v(z),setTimeout(()=>f(!0),500))},[]),w=Z=>{const z=Z.match(/[](.{2,3}[])/);return(z==null?void 0:z[1])??"unknown"},E=p0(e||"",C(),w(g.address),N),I=Z=>{u(Z),c(!0),Z==="mobile_bar"?E.trackLineClick():E.trackCallClick()},j=p.useMemo(()=>{var z;const Z=((z=g.publicId)==null?void 0:z.charCodeAt(3))||0;return{currentViewers:Math.floor(Z%5)+2,weeklyBookings:Math.floor(Z%8)+5,isHot:Z%3===0}},[g.publicId]);p.useEffect(()=>{(async()=>{if(e)try{const z=await Zr.getPropertyByPublicId(e);z&&T(z)}catch(z){console.error("Fetch error:",z)}})()},[e]);const A="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80";let k=g.images&&g.images.length>0&&g.images[0]?g.images[0]:A;return k&&k.includes("picsum")&&(k=A),s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 h-16 flex items-center px-4 shadow-sm justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx(Qa,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center text-[#003366] font-extrabold text-xl gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#003366] to-[#00A8E8] rounded-lg flex items-center justify-center text-white",children:s.jsx($e,{size:18})}),""]})]}),s.jsxs("div",{className:"flex items-center text-xs font-mono text-slate-500 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[s.jsx(Jo,{size:12,className:"mr-1 text-gray-400"}),"",s.jsx("span",{className:"font-bold text-[#003366] ml-1",children:g.publicId})]})]}),s.jsxs("main",{className:"max-w-4xl mx-auto p-4 pb-24",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"aspect-video bg-slate-200 rounded-2xl overflow-hidden relative group",children:[s.jsx("img",{src:(($=g.images)==null?void 0:$[i])||k,alt:g.title,onError:Z=>{Z.currentTarget.src!==A&&(Z.currentTarget.src=A)},className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 backdrop-blur-md text-white text-xs px-3 py-1.5 rounded-full flex items-center gap-1",children:[s.jsx($e,{size:12}),s.jsxs("span",{children:[i+1," / ",((H=g.images)==null?void 0:H.length)||1]})]})]}),g.images&&g.images.length>1&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mt-3 -mx-4 px-4 scrollbar-hide",children:g.images.map((Z,z)=>s.jsx("button",{onClick:()=>{o(z),E.trackPhotoClick()},className:`flex-shrink-0 w-20 h-14 rounded-lg overflow-hidden border-2 transition-all ${z===i?"border-[#003366] ring-2 ring-[#003366]/20":"border-transparent opacity-70 hover:opacity-100"}`,children:s.jsx("img",{src:Z,alt:` ${z+1}`,onError:Q=>{Q.currentTarget.src=A},className:"w-full h-full object-cover"})},z))})]}),s.jsx("div",{className:"lg:hidden mb-6",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-100 p-4",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>I("mobile_bar"),className:"flex-1 bg-[#003366] text-white font-bold py-4 rounded-xl text-base shadow-lg flex items-center justify-center gap-2",children:[s.jsx(ot,{size:20}),""]}),s.jsx("button",{onClick:()=>I("mobile_bar"),className:"w-14 bg-[#06C755] text-white rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(at,{size:22})})]}),s.jsxs("p",{className:"text-center text-xs text-slate-500 mt-2",children:["  ",j.weeklyBookings," "]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 leading-tight",children:g.title}),s.jsx("button",{onClick:()=>n(!r),className:`p-2 rounded-full transition-all ${r?"bg-red-50 text-red-500":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:s.jsx(Ba,{size:24,fill:r?"currentColor":"none"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mt-2 text-sm",children:[s.jsx(hs,{size:16}),g.address]}),s.jsxs("div",{className:"mt-4 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-3xl font-extrabold text-[#003366]",children:g.price}),s.jsx("span",{className:"text-lg text-slate-500 font-medium",children:""}),s.jsx("span",{className:"text-sm text-red-500 font-medium ml-2",children:""})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[j.isHot&&s.jsxs("div",{className:"inline-flex items-center gap-1 text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded-full animate-pulse",children:[s.jsx(sr,{size:12}),""]}),s.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-slate-600 bg-slate-50 px-2 py-1 rounded-full",children:[s.jsx(fr,{size:12,className:"text-blue-500"}),j.currentViewers," "]}),s.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-slate-600 bg-slate-50 px-2 py-1 rounded-full",children:[s.jsx(Yo,{size:12,className:"text-green-500"})," ",j.weeklyBookings," "]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["","","",""].map(Z=>s.jsx("span",{className:"px-3 py-1 bg-blue-50 text-[#003366] text-xs font-medium rounded-full",children:Z},Z))}),s.jsx("div",{className:"h-px bg-slate-100"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3",children:""}),s.jsx("p",{className:"text-slate-600 leading-relaxed whitespace-pre-line",children:g.description})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 p-4 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[s.jsx(qr,{size:18,className:"text-yellow-500",fill:"currentColor"}),""]}),s.jsx("span",{className:"text-xs text-slate-500 bg-slate-50 px-2 py-1 rounded-full",children:"88 "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#003366] text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:"J"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"J***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"B"}),s.jsx("span",{className:"text-yellow-500 text-xs",children:""})]}),s.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:""})]})]}),s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00A8E8] text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:"W"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"W***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"12F"}),s.jsx("span",{className:"text-yellow-500 text-xs",children:""})]}),s.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:""})]})]})]}),s.jsxs("div",{className:"relative mt-3 overflow-hidden rounded-xl",children:[s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 blur-sm select-none",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:"L"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"L***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"C"}),a]}),s.jsx("p",{className:"text-sm text-slate-600",children:"..."})]})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/80 to-white flex items-end justify-center pb-3",children:s.jsxs("button",{onClick:()=>{window.location.href="/auth.html?redirect=community"},className:"flex items-center gap-2 bg-[#003366] text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg hover:bg-[#004488] transition-colors",children:[s.jsx(Ha,{size:14})," 6 ",s.jsx(lt,{size:14})]})})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-slate-500",children:" "}),s.jsxs("button",{onClick:()=>window.location.href="/maihouses/community-wall_mvp.html",className:"text-xs text-[#003366] font-bold hover:underline flex items-center gap-1",children:["",s.jsx(lt,{size:12})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"sticky top-24 space-y-4",children:[s.jsx(o0,{agent:g.agent,onLineClick:()=>I("sidebar"),onCallClick:()=>I("sidebar"),onBookingClick:()=>I("booking")}),s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-100",children:[s.jsxs("h4",{className:"font-bold text-[#003366] text-sm mb-2 flex items-center gap-2",children:[s.jsx(As,{size:16}),""]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"text-xs text-slate-600 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),""]}),s.jsxs("li",{className:"text-xs text-slate-600 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),""]}),s.jsxs("li",{className:"text-xs text-slate-600 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),""]})]})]})]})})]})]}),s.jsxs("button",{onClick:()=>I("booking"),className:"fixed right-4 bottom-28 lg:bottom-8 z-40 bg-orange-500 hover:bg-orange-600 text-white w-16 h-16 rounded-full shadow-2xl flex flex-col items-center justify-center text-xs font-bold transition-transform hover:scale-110 animate-bounce",style:{animationDuration:"2s"},children:[s.jsx(ot,{size:22}),s.jsx("span",{className:"text-[10px] mt-0.5",children:"30"})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 p-3 lg:hidden z-50 pb-safe",children:[s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2 text-[10px] text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(As,{size:10,className:"text-green-500"}),""]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(fr,{size:10,className:"text-blue-500"}),j.currentViewers," "]}),j.isHot&&s.jsxs("span",{className:"flex items-center gap-1 text-orange-500 font-medium",children:[s.jsx(sr,{size:10}),""]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>I("mobile_bar"),className:"flex-[4] bg-[#06C755] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[s.jsx(at,{size:20})," LINE "]}),s.jsxs("button",{onClick:()=>I("booking"),className:"flex-[6] bg-[#003366] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-blue-900/20",children:[s.jsx(_t,{size:20}),""]})]})]}),s.jsx(c0,{isOpen:l,onClose:()=>c(!1),propertyId:g.publicId,propertyTitle:g.title,agentId:C(),agentName:((oe=g.agent)==null?void 0:oe.name)||"",source:d}),h&&s.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 flex items-center justify-center p-4",onClick:()=>f(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl animate-in zoom-in-95 duration-300",onClick:Z=>Z.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(sr,{size:32,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:x||" VIP "})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ce,{size:16,className:"text-green-500 flex-shrink-0"}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ce,{size:16,className:"text-green-500 flex-shrink-0"}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ce,{size:16,className:"text-green-500 flex-shrink-0"}),s.jsx("span",{children:""})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{E.trackLineClick(),f(!1),I("mobile_bar")},className:"w-full bg-[#06C755] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[s.jsx(at,{size:20})," LINE "]}),s.jsxs("button",{onClick:()=>{E.trackCallClick(),f(!1),I("booking")},className:"w-full bg-[#003366] text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2",children:[s.jsx(_t,{size:20}),"VIP "]}),s.jsx("button",{onClick:()=>f(!1),className:"w-full text-slate-400 text-sm py-2 hover:text-slate-600",children:""})]})]})}),s.jsxs("button",{onClick:()=>y(!0),className:"fixed right-4 bottom-24 z-40 w-14 h-14 bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105 flex items-center justify-center group",title:"",children:[s.jsx(Qs,{size:24}),s.jsx("span",{className:"absolute right-full mr-3 px-3 py-1.5 bg-slate-800 text-white text-sm font-medium rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:""})]}),s.jsx(m0,{property:{id:g.id,publicId:g.publicId,title:g.title,price:g.price,address:g.address,description:g.description,images:g.images,agent:{id:g.agent.id,name:g.agent.name,avatarUrl:g.agent.avatarUrl,company:g.agent.company,trustScore:g.agent.trustScore,reviewCount:g.agent.encouragementCount}},isOpen:b,onClose:()=>y(!1)})]})};function x0({value:e,address:t,onChange:r,className:n=""}){const[a,i]=p.useState(!1),[o,l]=p.useState(e),[c,d]=p.useState([]),[u,h]=p.useState(!1),[f,x]=p.useState(null),v=p.useRef(null),b=w=>{const E=w.match(/([^]+[])/);return(E==null?void 0:E[1])||""},y=async(w,E)=>{if(!w&&!E){d([]);return}h(!0);try{const I=b(E);let j=X.from("communities").select("id, name, address, property_count, is_verified").limit(5);w&&(j=j.ilike("name",`%${w}%`)),I&&(j=j.eq("district",I));const{data:A,error:k}=await j.order("property_count",{ascending:!1});if(k)throw k;d(A||[])}catch(I){console.error(":",I),d([])}finally{h(!1)}};p.useEffect(()=>{const w=setTimeout(()=>{y(o,t)},300);return()=>clearTimeout(w)},[o,t]),p.useEffect(()=>{const w=E=>{v.current&&!v.current.contains(E.target)&&i(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const g=w=>{x(w),l(w.name),r(w.name,w.id),i(!1)},T=()=>{o.trim()&&(x(null),r(o.trim(),void 0),i(!1))},C=w=>w.length<2?!1:/||||||||||/.test(w)?!0:/|||/.test(w)&&!/|/.test(w)?!1:w.length>=2,N=o.trim()&&!c.some(w=>w.name===o.trim())&&C(o.trim());return s.jsxs("div",{ref:v,className:`relative ${n}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx(hr,{size:16})}),s.jsx("input",{type:"text",value:o,onChange:w=>{l(w.target.value),x(null),i(!0)},onFocus:()=>i(!0),placeholder:"...",className:`
            w-full pl-10 pr-10 py-3 rounded-xl bg-slate-50 border text-sm
            focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none
            ${f?"border-green-300 bg-green-50/50":"border-slate-200"}
          `}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:u?s.jsx(Ls,{size:16,className:"animate-spin text-slate-400"}):f?s.jsx(De,{size:16,className:"text-green-600"}):s.jsx(Da,{size:16,className:"text-slate-400"})})]}),f&&s.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[s.jsx(De,{size:12}),"",f.name,"",f.property_count?` (${f.property_count} )`:""]}),!f&&o&&C(o)&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" "}),!f&&o&&!C(o)&&o.length>=2&&s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:" XX"}),a&&(c.length>0||N)&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-xl shadow-lg overflow-hidden",children:[c.map(w=>s.jsxs("button",{onClick:()=>g(w),className:"w-full px-4 py-3 text-left hover:bg-slate-50 flex items-start gap-3 border-b border-slate-100 last:border-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:s.jsx(hr,{size:16,className:"text-blue-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-slate-800 truncate",children:w.name}),w.is_verified&&s.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:""})]}),w.address&&s.jsx("p",{className:"text-xs text-slate-500 truncate",children:w.address}),w.property_count?s.jsxs("p",{className:"text-xs text-slate-400",children:[w.property_count," "]}):null]})]},w.id)),N&&s.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left hover:bg-blue-50 flex items-center gap-3 bg-blue-50/50",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500 flex items-center justify-center flex-shrink-0",children:s.jsx($s,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-blue-700",children:""}),s.jsx("span",{className:"text-blue-600 ml-1",children:o.trim()})]})]})]})]})}const g0=()=>{const e=So(),t=p.useRef(null),[r,n]=p.useState(!1),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState(null),[u,h]=p.useState(),[f,x]=p.useState({title:"",price:"",address:"",communityName:"",size:"",age:"",floorCurrent:"",floorTotal:"",rooms:"3",halls:"2",bathrooms:"2",type:"",description:"",advantage1:"",advantage2:"",disadvantage:"",sourceExternalId:""});p.useEffect(()=>{X.auth.getUser().then(({data:j})=>{d(j.user)})},[]);const v=j=>{x({...f,[j.target.name]:j.target.value})},b=(j,A)=>{x({...f,communityName:j}),h(A)},y={adv1Valid:f.advantage1.length>=5,adv2Valid:f.advantage2.length>=5,disValid:f.disadvantage.length>=10,get allValid(){return this.adv1Valid&&this.adv2Valid&&this.disValid}},g=f.title.length>0&&f.price.length>0&&f.address.length>0,T=g&&y.allValid&&o.length>0,C=()=>{prompt(" 591 ")&&(n(!0),setTimeout(()=>{x(A=>({...A,title:"",price:"2880",address:"",size:"45.2",sourceExternalId:"591-MOCK-ID"})),n(!1)},1e3))},N=j=>{if(j.target.files&&j.target.files.length>0){const A=Array.from(j.target.files);l($=>[...$,...A]);const k=A.map($=>URL.createObjectURL($));i($=>[...$,...k])}},w=j=>{i(A=>A.filter((k,$)=>$!==j)),l(A=>A.filter((k,$)=>$!==j))},E=async()=>{if(!g)return alert("");if(!y.allValid)return alert("");if(o.length===0)return alert("");n(!0);try{const j=await Zr.uploadImages(o),A=await Zr.createPropertyWithForm(f,j,u);alert(" "+A.public_id),e("/property/"+A.public_id)}catch(j){alert(""+j.message)}finally{n(!1)}},I="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none text-sm";return s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 h-16 flex items-center px-4 shadow-sm justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:s.jsx(Qa,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center text-[#003366] font-extrabold text-xl gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#003366] to-[#00A8E8] rounded-lg flex items-center justify-center text-white",children:s.jsx($e,{size:18})}),""]})]}),s.jsxs("button",{onClick:C,disabled:r,className:"text-xs bg-blue-50 text-[#00A8E8] px-3 py-1.5 rounded-lg font-bold hover:bg-blue-100 flex items-center gap-1 border border-blue-100",children:[r?s.jsx(Ls,{size:12,className:"animate-spin"}):s.jsx(Xo,{size:12}),"591 "]})]}),s.jsxs("main",{className:"max-w-2xl mx-auto p-4 pb-32 space-y-5",children:[s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-[#003366] mb-4 flex items-center gap-2",children:[s.jsx($e,{size:18})," "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:" *"}),s.jsx("input",{name:"title",value:f.title,onChange:v,className:I+" font-bold",placeholder:"101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:" () *"}),s.jsx("input",{name:"price",type:"number",value:f.price,onChange:v,className:I,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:" *"}),s.jsx("input",{name:"address",value:f.address,onChange:v,className:I,placeholder:"..."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:[" ",s.jsx("span",{className:"text-slate-400",children:"()"})]}),s.jsx(x0,{value:f.communityName,address:f.address,onChange:b})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"size",type:"number",value:f.size,onChange:v,className:I,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"age",type:"number",value:f.age,onChange:v,className:I,placeholder:"0"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsxs("select",{name:"type",value:f.type,onChange:v,className:I,children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"rooms",type:"number",value:f.rooms,onChange:v,className:I})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"halls",type:"number",value:f.halls,onChange:v,className:I})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("input",{name:"bathrooms",type:"number",value:f.bathrooms,onChange:v,className:I})]})]})]})]}),s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(As,{className:"text-orange-500",size:20}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-[#003366]",children:""}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1.5 font-medium text-green-700 mb-1 text-xs",children:[s.jsx(xr,{size:14}),"  1 ( 5 )"]}),s.jsx("input",{name:"advantage1",value:f.advantage1,onChange:v,className:I+(y.adv1Valid?" border-green-300 bg-green-50/50":""),placeholder:""}),s.jsxs("span",{className:"text-xs mt-0.5 block "+(y.adv1Valid?"text-green-600":"text-slate-400"),children:[f.advantage1.length,"/5  ",y.adv1Valid&&""]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1.5 font-medium text-green-700 mb-1 text-xs",children:[s.jsx(xr,{size:14}),"  2 ( 5 )"]}),s.jsx("input",{name:"advantage2",value:f.advantage2,onChange:v,className:I+(y.adv2Valid?" border-green-300 bg-green-50/50":""),placeholder:""}),s.jsxs("span",{className:"text-xs mt-0.5 block "+(y.adv2Valid?"text-green-600":"text-slate-400"),children:[f.advantage2.length,"/5  ",y.adv2Valid&&""]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1.5 font-medium text-orange-700 mb-1 text-xs",children:[s.jsx(el,{size:14}),"  ( 10 )"]}),s.jsx("input",{name:"disadvantage",value:f.disadvantage,onChange:v,className:I+(y.disValid?" border-orange-300 bg-orange-50/50":""),placeholder:""}),s.jsxs("span",{className:"text-xs mt-0.5 block "+(y.disValid?"text-orange-600":"text-red-400"),children:[f.disadvantage.length,"/10  ",y.disValid?"":"()"]})]})]})]}),s.jsxs("section",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-[#003366] mb-4 flex items-center gap-2",children:[s.jsx(Hr,{size:18,className:"text-yellow-500"})," "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:""}),s.jsx("textarea",{name:"description",value:f.description,onChange:v,rows:4,className:I+" resize-none",placeholder:"..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:[" * ",s.jsx("span",{className:"text-slate-400",children:"( 1 )"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.map((j,A)=>s.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden relative group border border-slate-200",children:[s.jsx("img",{src:j,alt:"",className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>w(A),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition",children:s.jsx(Gt,{size:12})}),A===0&&s.jsx("span",{className:"absolute bottom-1 left-1 bg-[#003366] text-white text-[10px] px-1.5 py-0.5 rounded",children:""})]},A)),s.jsxs("button",{onClick:()=>{var j;return(j=t.current)==null?void 0:j.click()},className:"aspect-square rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-slate-400 hover:border-[#00A8E8] hover:text-[#00A8E8] transition-colors",children:[s.jsx(Wa,{size:24}),s.jsx("span",{className:"text-xs mt-1",children:""})]}),s.jsx("input",{type:"file",multiple:!0,ref:t,onChange:N,className:"hidden",accept:"image/*"})]})]})]})]}),(f.title||f.price||a.length>0)&&s.jsxs("section",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-500 mb-3 flex items-center gap-2",children:[s.jsx(hs,{size:14})," "]}),s.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[a.length>0&&s.jsx("div",{className:"aspect-video",children:s.jsx("img",{src:a[0],alt:"",className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:"font-bold text-slate-900",children:f.title||""}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:f.address||""}),s.jsxs("div",{className:"flex items-baseline gap-1 mt-2",children:[s.jsx("span",{className:"text-xl font-extrabold text-[#003366]",children:f.price||"0"}),s.jsx("span",{className:"text-sm text-slate-500",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:[f.type,f.size&&f.size+"",f.rooms+""+f.halls+""+f.bathrooms+""].filter(Boolean).map((j,A)=>s.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-[#003366] text-xs rounded-full",children:j},A))})]})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 p-4 z-50",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("button",{onClick:E,disabled:r||!T,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all "+(T?"bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg shadow-blue-900/20 hover:scale-[1.01]":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:[r?s.jsx(Ls,{className:"animate-spin",size:20}):s.jsx(De,{size:20}),r?"...":T?"":""]}),!T&&s.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs text-slate-400",children:[s.jsx("span",{className:g?"text-green-600":"",children:g?" ":" "}),s.jsx("span",{className:y.allValid?"text-green-600":"",children:y.allValid?" ":" "}),s.jsx("span",{className:o.length>0?"text-green-600":"",children:o.length>0?" ":" "})]})]})})]})},b0=new El({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});function v0(){const[e,t]=p.useState(null),r=La();return p.useEffect(()=>{mi().then(t)},[]),p.useEffect(()=>{e&&Xr("page_view",r.pathname)},[r,e]),e?s.jsx(Pl,{client:b0,children:s.jsx(tc,{children:s.jsxs(Yu,{children:[s.jsxs(Co,{children:[s.jsx(Ee,{path:"/",element:s.jsx(Re,{children:s.jsx(Au,{config:e})})}),s.jsx(Ee,{path:"/uag",element:s.jsx(n0,{})}),s.jsx(Ee,{path:"/community/:id/wall",element:s.jsx(Re,{children:s.jsx(Ru,{})})}),s.jsx(Ee,{path:"/community/suggested",element:s.jsx(Re,{children:s.jsx(Lu,{})})}),s.jsx(Ee,{path:"/property/upload",element:s.jsx(Re,{children:s.jsx(g0,{})})}),s.jsx(Ee,{path:"/property/:id",element:s.jsx(Re,{children:s.jsx(f0,{})})}),s.jsx(Ee,{path:"/p/:id",element:s.jsx(Re,{children:s.jsx(Vu,{})})}),s.jsx(Ee,{path:"/maihouses/trust/room",element:s.jsx(Re,{children:s.jsx(Yn,{})})}),s.jsx(Ee,{path:"/assure",element:s.jsx(Re,{children:s.jsx(Yn,{})})}),s.jsx(Ee,{path:"/chat",element:s.jsx(Re,{children:s.jsx(Ku,{})})}),s.jsx(Ee,{path:"/r/:id",element:s.jsx(Re,{children:s.jsx(h0,{})})})]},r.pathname),e.devtools==="1"&&s.jsx(vd,{config:e}),s.jsx(Xu,{})]})})}):s.jsx("div",{className:"p-6 text-sm text-[var(--text-secondary)]",children:""})}const ka=document.getElementById("root");if(ka){const e=window.location.pathname.startsWith("/maihouses")?"/maihouses":"/";gr.createRoot(ka).render(s.jsx(Qt.StrictMode,{children:s.jsx(zo,{basename:e,children:s.jsx(v0,{})})}))}export{mi as g};
//# sourceMappingURL=index-Che8_b1d.js.map
