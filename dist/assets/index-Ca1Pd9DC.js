const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B-bmOHmJ.js","assets/react-vendor-DIo7f8p2.js","assets/ui-libs-VmEHap5X.js","assets/supabase-Dar8dO9-.js"])))=>i.map(i=>d[i]);
var Cs=e=>{throw TypeError(e)};var Er=(e,t,r)=>t.has(e)||Cs("Cannot "+r);var d=(e,t,r)=>(Er(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?Cs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),k=(e,t,r,s)=>(Er(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),P=(e,t,r)=>(Er(e,t,"access private method"),r);var er=(e,t,r,s)=>({set _(n){k(e,t,n,r)},get _(){return d(e,t,s)}});import{r as f,a as di,L as On,R as yr,u as Mn,b as hi,c as mi,d as ye,B as fi}from"./react-vendor-DIo7f8p2.js";import{P as pi,S as gi,H as bi,M as xi,L as vi,K as yi,C as wi,a as _i,A as ji,n as Ke,z as tr,F as ki}from"./ui-libs-VmEHap5X.js";import{c as Si}from"./supabase-Dar8dO9-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Dn={exports:{}},wr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=f,Ci=Symbol.for("react.element"),zi=Symbol.for("react.fragment"),Ei=Object.prototype.hasOwnProperty,Ii=Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ri={key:!0,ref:!0,__self:!0,__source:!0};function Fn(e,t,r){var s,n={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)Ei.call(t,s)&&!Ri.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:Ci,type:e,key:i,ref:a,props:n,_owner:Ii.current}}wr.Fragment=zi;wr.jsx=Fn;wr.jsxs=Fn;Dn.exports=wr;var o=Dn.exports,Pr={},zs=di;Pr.createRoot=zs.createRoot,Pr.hydrateRoot=zs.hydrateRoot;var Rt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ai={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Oe,ss,Sn,Ti=(Sn=class{constructor(){E(this,Oe,Ai);E(this,ss,!1)}setTimeoutProvider(e){k(this,Oe,e)}setTimeout(e,t){return d(this,Oe).setTimeout(e,t)}clearTimeout(e){d(this,Oe).clearTimeout(e)}setInterval(e,t){return d(this,Oe).setInterval(e,t)}clearInterval(e){d(this,Oe).clearInterval(e)}},Oe=new WeakMap,ss=new WeakMap,Sn),Je=new Ti;function $i(e){setTimeout(e,0)}var at=typeof window>"u"||"Deno"in globalThis;function ie(){}function Pi(e,t){return typeof e=="function"?e(t):e}function Or(e){return typeof e=="number"&&e>=0&&e!==1/0}function Zn(e,t){return Math.max(e+(t||0)-Date.now(),0)}function qe(e,t){return typeof e=="function"?e(t):e}function fe(e,t){return typeof e=="function"?e(t):e}function Es(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:c}=e;if(a){if(s){if(t.queryHash!==ns(a,t.options))return!1}else if(!Dt(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||n&&n!==t.state.fetchStatus||i&&!i(t))}function Is(e,t){const{exact:r,status:s,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ct(t.options.mutationKey)!==ct(i))return!1}else if(!Dt(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function ns(e,t){return((t==null?void 0:t.queryKeyHashFn)||ct)(e)}function ct(e){return JSON.stringify(e,(t,r)=>Mr(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function Dt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Dt(e[r],t[r])):!1}var Oi=Object.prototype.hasOwnProperty;function Ln(e,t){if(e===t)return e;const r=Rs(e)&&Rs(t);if(!r&&!(Mr(e)&&Mr(t)))return t;const n=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),a=i.length,c=r?new Array(a):{};let l=0;for(let u=0;u<a;u++){const h=r?u:i[u],m=e[h],b=t[h];if(m===b){c[h]=m,(r?u<n:Oi.call(e,h))&&l++;continue}if(m===null||b===null||typeof m!="object"||typeof b!="object"){c[h]=b;continue}const g=Ln(m,b);c[h]=g,g===m&&l++}return n===a&&l===n?e:c}function mr(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Rs(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Mr(e){if(!As(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!As(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function As(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mi(e){return new Promise(t=>{Je.setTimeout(t,e)})}function Dr(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ln(e,t):t}function Di(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Fi(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var os=Symbol();function Un(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===os?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Bn(e,t){return typeof e=="function"?e(...t):!!e}var Ye,Me,xt,Nn,Zi=(Nn=class extends Rt{constructor(){super();E(this,Ye);E(this,Me);E(this,xt);k(this,xt,t=>{if(!at&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){d(this,Me)||this.setEventListener(d(this,xt))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Me))==null||t.call(this),k(this,Me,void 0))}setEventListener(t){var r;k(this,xt,t),(r=d(this,Me))==null||r.call(this),k(this,Me,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){d(this,Ye)!==t&&(k(this,Ye,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof d(this,Ye)=="boolean"?d(this,Ye):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ye=new WeakMap,Me=new WeakMap,xt=new WeakMap,Nn),is=new Zi;function Fr(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}var Li=$i;function Ui(){let e=[],t=0,r=c=>{c()},s=c=>{c()},n=Li;const i=c=>{t?e.push(c):n(()=>{r(c)})},a=()=>{const c=e;e=[],c.length&&n(()=>{s(()=>{c.forEach(l=>{r(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||a()}return l},batchCalls:c=>(...l)=>{i(()=>{c(...l)})},schedule:i,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{n=c}}}var H=Ui(),vt,De,yt,Cn,Bi=(Cn=class extends Rt{constructor(){super();E(this,vt,!0);E(this,De);E(this,yt);k(this,yt,t=>{if(!at&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){d(this,De)||this.setEventListener(d(this,yt))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,De))==null||t.call(this),k(this,De,void 0))}setEventListener(t){var r;k(this,yt,t),(r=d(this,De))==null||r.call(this),k(this,De,t(this.setOnline.bind(this)))}setOnline(t){d(this,vt)!==t&&(k(this,vt,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return d(this,vt)}},vt=new WeakMap,De=new WeakMap,yt=new WeakMap,Cn),fr=new Bi;function Qi(e){return Math.min(1e3*2**e,3e4)}function Qn(e){return(e??"online")==="online"?fr.isOnline():!0}var Zr=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function qn(e){let t=!1,r=0,s;const n=Fr(),i=()=>n.status!=="pending",a=w=>{var v;if(!i()){const y=new Zr(w);b(y),(v=e.onCancel)==null||v.call(e,y)}},c=()=>{t=!0},l=()=>{t=!1},u=()=>is.isFocused()&&(e.networkMode==="always"||fr.isOnline())&&e.canRun(),h=()=>Qn(e.networkMode)&&e.canRun(),m=w=>{i()||(s==null||s(),n.resolve(w))},b=w=>{i()||(s==null||s(),n.reject(w))},g=()=>new Promise(w=>{var v;s=y=>{(i()||u())&&w(y)},(v=e.onPause)==null||v.call(e)}).then(()=>{var w;s=void 0,i()||(w=e.onContinue)==null||w.call(e)}),j=()=>{if(i())return;let w;const v=r===0?e.initialPromise:void 0;try{w=v??e.fn()}catch(y){w=Promise.reject(y)}Promise.resolve(w).then(m).catch(y=>{var $;if(i())return;const R=e.retry??(at?0:3),S=e.retryDelay??Qi,_=typeof S=="function"?S(r,y):S,A=R===!0||typeof R=="number"&&r<R||typeof R=="function"&&R(r,y);if(t||!A){b(y);return}r++,($=e.onFail)==null||$.call(e,r,y),Mi(_).then(()=>u()?void 0:g()).then(()=>{t?b(y):j()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(s==null||s(),n),cancelRetry:c,continueRetry:l,canStart:h,start:()=>(h()?j():g().then(j),n)}}var Xe,zn,Wn=(zn=class{constructor(){E(this,Xe)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Or(this.gcTime)&&k(this,Xe,Je.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(at?1/0:5*60*1e3))}clearGcTimeout(){d(this,Xe)&&(Je.clearTimeout(d(this,Xe)),k(this,Xe,void 0))}},Xe=new WeakMap,zn),et,wt,me,tt,Y,Lt,rt,xe,Ce,En,qi=(En=class extends Wn{constructor(t){super();E(this,xe);E(this,et);E(this,wt);E(this,me);E(this,tt);E(this,Y);E(this,Lt);E(this,rt);k(this,rt,!1),k(this,Lt,t.defaultOptions),this.setOptions(t.options),this.observers=[],k(this,tt,t.client),k(this,me,d(this,tt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,k(this,et,$s(this.options)),this.state=t.state??d(this,et),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=d(this,Y))==null?void 0:t.promise}setOptions(t){if(this.options={...d(this,Lt),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=$s(this.options);r.data!==void 0&&(this.setState(Ts(r.data,r.dataUpdatedAt)),k(this,et,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,me).remove(this)}setData(t,r){const s=Dr(this.state.data,t,this.options);return P(this,xe,Ce).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){P(this,xe,Ce).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,n;const r=(s=d(this,Y))==null?void 0:s.promise;return(n=d(this,Y))==null||n.cancel(t),r?r.then(ie).catch(ie):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,et))}isActive(){return this.observers.some(t=>fe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===os||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>qe(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Zn(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,Y))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,Y))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),d(this,me).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(d(this,Y)&&(d(this,rt)?d(this,Y).cancel({revert:!0}):d(this,Y).cancelRetry()),this.scheduleGc()),d(this,me).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||P(this,xe,Ce).call(this,{type:"invalidate"})}async fetch(t,r){var l,u,h,m,b,g,j,w,v,y,R,S;if(this.state.fetchStatus!=="idle"&&((l=d(this,Y))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(d(this,Y))return d(this,Y).continueRetry(),d(this,Y).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(A=>A.options.queryFn);_&&this.setOptions(_.options)}const s=new AbortController,n=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(k(this,rt,!0),s.signal)})},i=()=>{const _=Un(this.options,r),$=(()=>{const U={client:d(this,tt),queryKey:this.queryKey,meta:this.meta};return n(U),U})();return k(this,rt,!1),this.options.persister?this.options.persister(_,$,this):_($)},c=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:d(this,tt),state:this.state,fetchFn:i};return n(_),_})();(u=this.options.behavior)==null||u.onFetch(c,this),k(this,wt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&P(this,xe,Ce).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta}),k(this,Y,qn({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:_=>{_ instanceof Zr&&_.revert&&this.setState({...d(this,wt),fetchStatus:"idle"}),s.abort()},onFail:(_,A)=>{P(this,xe,Ce).call(this,{type:"failed",failureCount:_,error:A})},onPause:()=>{P(this,xe,Ce).call(this,{type:"pause"})},onContinue:()=>{P(this,xe,Ce).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const _=await d(this,Y).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(g=(b=d(this,me).config).onSuccess)==null||g.call(b,_,this),(w=(j=d(this,me).config).onSettled)==null||w.call(j,_,this.state.error,this),_}catch(_){if(_ instanceof Zr){if(_.silent)return d(this,Y).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw P(this,xe,Ce).call(this,{type:"error",error:_}),(y=(v=d(this,me).config).onError)==null||y.call(v,_,this),(S=(R=d(this,me).config).onSettled)==null||S.call(R,this.state.data,_,this),_}finally{this.scheduleGc()}}},et=new WeakMap,wt=new WeakMap,me=new WeakMap,tt=new WeakMap,Y=new WeakMap,Lt=new WeakMap,rt=new WeakMap,xe=new WeakSet,Ce=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Vn(s.data,this.options),fetchMeta:t.meta??null};case"success":const n={...s,...Ts(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return k(this,wt,t.manual?n:void 0),n;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),H.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),d(this,me).notify({query:this,type:"updated",action:t})})},En);function Vn(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ts(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $s(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ae,D,Ut,ne,st,_t,ze,Fe,Bt,jt,kt,nt,ot,Ze,St,F,Ot,Lr,Ur,Br,Qr,qr,Wr,Vr,Gn,In,Wi=(In=class extends Rt{constructor(t,r){super();E(this,F);E(this,ae);E(this,D);E(this,Ut);E(this,ne);E(this,st);E(this,_t);E(this,ze);E(this,Fe);E(this,Bt);E(this,jt);E(this,kt);E(this,nt);E(this,ot);E(this,Ze);E(this,St,new Set);this.options=r,k(this,ae,t),k(this,Fe,null),k(this,ze,Fr()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,D).addObserver(this),Ps(d(this,D),this.options)?P(this,F,Ot).call(this):this.updateResult(),P(this,F,Qr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gr(d(this,D),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gr(d(this,D),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,P(this,F,qr).call(this),P(this,F,Wr).call(this),d(this,D).removeObserver(this)}setOptions(t){const r=this.options,s=d(this,D);if(this.options=d(this,ae).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fe(this.options.enabled,d(this,D))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");P(this,F,Vr).call(this),d(this,D).setOptions(this.options),r._defaulted&&!mr(this.options,r)&&d(this,ae).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,D),observer:this});const n=this.hasListeners();n&&Os(d(this,D),s,this.options,r)&&P(this,F,Ot).call(this),this.updateResult(),n&&(d(this,D)!==s||fe(this.options.enabled,d(this,D))!==fe(r.enabled,d(this,D))||qe(this.options.staleTime,d(this,D))!==qe(r.staleTime,d(this,D)))&&P(this,F,Lr).call(this);const i=P(this,F,Ur).call(this);n&&(d(this,D)!==s||fe(this.options.enabled,d(this,D))!==fe(r.enabled,d(this,D))||i!==d(this,Ze))&&P(this,F,Br).call(this,i)}getOptimisticResult(t){const r=d(this,ae).getQueryCache().build(d(this,ae),t),s=this.createResult(r,t);return Gi(this,s)&&(k(this,ne,s),k(this,_t,this.options),k(this,st,d(this,D).state)),s}getCurrentResult(){return d(this,ne)}trackResult(t,r){return new Proxy(t,{get:(s,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&d(this,ze).status==="pending"&&d(this,ze).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,n))})}trackProp(t){d(this,St).add(t)}getCurrentQuery(){return d(this,D)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=d(this,ae).defaultQueryOptions(t),s=d(this,ae).getQueryCache().build(d(this,ae),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return P(this,F,Ot).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,ne)))}createResult(t,r){var W;const s=d(this,D),n=this.options,i=d(this,ne),a=d(this,st),c=d(this,_t),u=t!==s?t.state:d(this,Ut),{state:h}=t;let m={...h},b=!1,g;if(r._optimisticResults){const O=this.hasListeners(),X=!O&&Ps(t,r),ge=O&&Os(t,s,r,n);(X||ge)&&(m={...m,...Vn(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:j,errorUpdatedAt:w,status:v}=m;g=m.data;let y=!1;if(r.placeholderData!==void 0&&g===void 0&&v==="pending"){let O;i!=null&&i.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData)?(O=i.data,y=!0):O=typeof r.placeholderData=="function"?r.placeholderData((W=d(this,kt))==null?void 0:W.state.data,d(this,kt)):r.placeholderData,O!==void 0&&(v="success",g=Dr(i==null?void 0:i.data,O,r),b=!0)}if(r.select&&g!==void 0&&!y)if(i&&g===(a==null?void 0:a.data)&&r.select===d(this,Bt))g=d(this,jt);else try{k(this,Bt,r.select),g=r.select(g),g=Dr(i==null?void 0:i.data,g,r),k(this,jt,g),k(this,Fe,null)}catch(O){k(this,Fe,O)}d(this,Fe)&&(j=d(this,Fe),g=d(this,jt),w=Date.now(),v="error");const R=m.fetchStatus==="fetching",S=v==="pending",_=v==="error",A=S&&R,$=g!==void 0,N={status:v,fetchStatus:m.fetchStatus,isPending:S,isSuccess:v==="success",isError:_,isInitialLoading:A,isLoading:A,data:g,dataUpdatedAt:m.dataUpdatedAt,error:j,errorUpdatedAt:w,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:R,isRefetching:R&&!S,isLoadingError:_&&!$,isPaused:m.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:_&&$,isStale:as(t,r),refetch:this.refetch,promise:d(this,ze),isEnabled:fe(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=Ve=>{N.status==="error"?Ve.reject(N.error):N.data!==void 0&&Ve.resolve(N.data)},X=()=>{const Ve=k(this,ze,N.promise=Fr());O(Ve)},ge=d(this,ze);switch(ge.status){case"pending":t.queryHash===s.queryHash&&O(ge);break;case"fulfilled":(N.status==="error"||N.data!==ge.value)&&X();break;case"rejected":(N.status!=="error"||N.error!==ge.reason)&&X();break}}return N}updateResult(){const t=d(this,ne),r=this.createResult(d(this,D),this.options);if(k(this,st,d(this,D).state),k(this,_t,this.options),d(this,st).data!==void 0&&k(this,kt,d(this,D)),mr(r,t))return;k(this,ne,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!d(this,St).size)return!0;const a=new Set(i??d(this,St));return this.options.throwOnError&&a.add("error"),Object.keys(d(this,ne)).some(c=>{const l=c;return d(this,ne)[l]!==t[l]&&a.has(l)})};P(this,F,Gn).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&P(this,F,Qr).call(this)}},ae=new WeakMap,D=new WeakMap,Ut=new WeakMap,ne=new WeakMap,st=new WeakMap,_t=new WeakMap,ze=new WeakMap,Fe=new WeakMap,Bt=new WeakMap,jt=new WeakMap,kt=new WeakMap,nt=new WeakMap,ot=new WeakMap,Ze=new WeakMap,St=new WeakMap,F=new WeakSet,Ot=function(t){P(this,F,Vr).call(this);let r=d(this,D).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ie)),r},Lr=function(){P(this,F,qr).call(this);const t=qe(this.options.staleTime,d(this,D));if(at||d(this,ne).isStale||!Or(t))return;const s=Zn(d(this,ne).dataUpdatedAt,t)+1;k(this,nt,Je.setTimeout(()=>{d(this,ne).isStale||this.updateResult()},s))},Ur=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,D)):this.options.refetchInterval)??!1},Br=function(t){P(this,F,Wr).call(this),k(this,Ze,t),!(at||fe(this.options.enabled,d(this,D))===!1||!Or(d(this,Ze))||d(this,Ze)===0)&&k(this,ot,Je.setInterval(()=>{(this.options.refetchIntervalInBackground||is.isFocused())&&P(this,F,Ot).call(this)},d(this,Ze)))},Qr=function(){P(this,F,Lr).call(this),P(this,F,Br).call(this,P(this,F,Ur).call(this))},qr=function(){d(this,nt)&&(Je.clearTimeout(d(this,nt)),k(this,nt,void 0))},Wr=function(){d(this,ot)&&(Je.clearInterval(d(this,ot)),k(this,ot,void 0))},Vr=function(){const t=d(this,ae).getQueryCache().build(d(this,ae),this.options);if(t===d(this,D))return;const r=d(this,D);k(this,D,t),k(this,Ut,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Gn=function(t){H.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(d(this,ne))}),d(this,ae).getQueryCache().notify({query:d(this,D),type:"observerResultsUpdated"})})},In);function Vi(e,t){return fe(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ps(e,t){return Vi(e,t)||e.state.data!==void 0&&Gr(e,t,t.refetchOnMount)}function Gr(e,t,r){if(fe(t.enabled,e)!==!1&&qe(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&as(e,t)}return!1}function Os(e,t,r,s){return(e!==t||fe(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&as(e,r)}function as(e,t){return fe(t.enabled,e)!==!1&&e.isStaleByTime(qe(t.staleTime,e))}function Gi(e,t){return!mr(e.getCurrentResult(),t)}function Ms(e){return{onFetch:(t,r)=>{var h,m,b,g,j;const s=t.options,n=(b=(m=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:b.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],a=((j=t.state.data)==null?void 0:j.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const u=async()=>{let w=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},y=Un(t.options,t.fetchOptions),R=async(S,_,A)=>{if(w)return Promise.reject();if(_==null&&S.pages.length)return Promise.resolve(S);const U=(()=>{const X={client:t.client,queryKey:t.queryKey,pageParam:_,direction:A?"backward":"forward",meta:t.options.meta};return v(X),X})(),N=await y(U),{maxPages:W}=t.options,O=A?Fi:Di;return{pages:O(S.pages,N,W),pageParams:O(S.pageParams,_,W)}};if(n&&i.length){const S=n==="backward",_=S?Ki:Ds,A={pages:i,pageParams:a},$=_(s,A);c=await R(A,$,S)}else{const S=e??i.length;do{const _=l===0?a[0]??s.initialPageParam:Ds(s,c);if(l>0&&_==null)break;c=await R(c,_),l++}while(l<S)}return c};t.options.persister?t.fetchFn=()=>{var w,v;return(v=(w=t.options).persister)==null?void 0:v.call(w,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Ds(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function Ki(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Qt,we,oe,it,_e,Pe,Rn,Hi=(Rn=class extends Wn{constructor(t){super();E(this,_e);E(this,Qt);E(this,we);E(this,oe);E(this,it);k(this,Qt,t.client),this.mutationId=t.mutationId,k(this,oe,t.mutationCache),k(this,we,[]),this.state=t.state||Kn(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){d(this,we).includes(t)||(d(this,we).push(t),this.clearGcTimeout(),d(this,oe).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){k(this,we,d(this,we).filter(r=>r!==t)),this.scheduleGc(),d(this,oe).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){d(this,we).length||(this.state.status==="pending"?this.scheduleGc():d(this,oe).remove(this))}continue(){var t;return((t=d(this,it))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,c,l,u,h,m,b,g,j,w,v,y,R,S,_,A,$,U,N,W;const r=()=>{P(this,_e,Pe).call(this,{type:"continue"})},s={client:d(this,Qt),meta:this.options.meta,mutationKey:this.options.mutationKey};k(this,it,qn({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(O,X)=>{P(this,_e,Pe).call(this,{type:"failed",failureCount:O,error:X})},onPause:()=>{P(this,_e,Pe).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,oe).canRun(this)}));const n=this.state.status==="pending",i=!d(this,it).canStart();try{if(n)r();else{P(this,_e,Pe).call(this,{type:"pending",variables:t,isPaused:i}),await((c=(a=d(this,oe).config).onMutate)==null?void 0:c.call(a,t,this,s));const X=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,s));X!==this.state.context&&P(this,_e,Pe).call(this,{type:"pending",context:X,variables:t,isPaused:i})}const O=await d(this,it).start();return await((m=(h=d(this,oe).config).onSuccess)==null?void 0:m.call(h,O,t,this.state.context,this,s)),await((g=(b=this.options).onSuccess)==null?void 0:g.call(b,O,t,this.state.context,s)),await((w=(j=d(this,oe).config).onSettled)==null?void 0:w.call(j,O,null,this.state.variables,this.state.context,this,s)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,O,null,t,this.state.context,s)),P(this,_e,Pe).call(this,{type:"success",data:O}),O}catch(O){try{throw await((S=(R=d(this,oe).config).onError)==null?void 0:S.call(R,O,t,this.state.context,this,s)),await((A=(_=this.options).onError)==null?void 0:A.call(_,O,t,this.state.context,s)),await((U=($=d(this,oe).config).onSettled)==null?void 0:U.call($,void 0,O,this.state.variables,this.state.context,this,s)),await((W=(N=this.options).onSettled)==null?void 0:W.call(N,void 0,O,t,this.state.context,s)),O}finally{P(this,_e,Pe).call(this,{type:"error",error:O})}}finally{d(this,oe).runNext(this)}}},Qt=new WeakMap,we=new WeakMap,oe=new WeakMap,it=new WeakMap,_e=new WeakSet,Pe=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),H.batch(()=>{d(this,we).forEach(s=>{s.onMutationUpdate(t)}),d(this,oe).notify({mutation:this,type:"updated",action:t})})},Rn);function Kn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ee,ve,qt,An,Ji=(An=class extends Rt{constructor(t={}){super();E(this,Ee);E(this,ve);E(this,qt);this.config=t,k(this,Ee,new Set),k(this,ve,new Map),k(this,qt,0)}build(t,r,s){const n=new Hi({client:t,mutationCache:this,mutationId:++er(this,qt)._,options:t.defaultMutationOptions(r),state:s});return this.add(n),n}add(t){d(this,Ee).add(t);const r=rr(t);if(typeof r=="string"){const s=d(this,ve).get(r);s?s.push(t):d(this,ve).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(d(this,Ee).delete(t)){const r=rr(t);if(typeof r=="string"){const s=d(this,ve).get(r);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&d(this,ve).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=rr(t);if(typeof r=="string"){const s=d(this,ve).get(r),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const r=rr(t);if(typeof r=="string"){const n=(s=d(this,ve).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){H.batch(()=>{d(this,Ee).forEach(t=>{this.notify({type:"removed",mutation:t})}),d(this,Ee).clear(),d(this,ve).clear()})}getAll(){return Array.from(d(this,Ee))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Is(r,s))}findAll(t={}){return this.getAll().filter(r=>Is(t,r))}notify(t){H.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return H.batch(()=>Promise.all(t.map(r=>r.continue().catch(ie))))}},Ee=new WeakMap,ve=new WeakMap,qt=new WeakMap,An);function rr(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ie,Le,ce,Re,Te,dr,Kr,Tn,Yi=(Tn=class extends Rt{constructor(r,s){super();E(this,Te);E(this,Ie);E(this,Le);E(this,ce);E(this,Re);k(this,Ie,r),this.setOptions(s),this.bindMethods(),P(this,Te,dr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const s=this.options;this.options=d(this,Ie).defaultMutationOptions(r),mr(this.options,s)||d(this,Ie).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,ce),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ct(s.mutationKey)!==ct(this.options.mutationKey)?this.reset():((n=d(this,ce))==null?void 0:n.state.status)==="pending"&&d(this,ce).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=d(this,ce))==null||r.removeObserver(this)}onMutationUpdate(r){P(this,Te,dr).call(this),P(this,Te,Kr).call(this,r)}getCurrentResult(){return d(this,Le)}reset(){var r;(r=d(this,ce))==null||r.removeObserver(this),k(this,ce,void 0),P(this,Te,dr).call(this),P(this,Te,Kr).call(this)}mutate(r,s){var n;return k(this,Re,s),(n=d(this,ce))==null||n.removeObserver(this),k(this,ce,d(this,Ie).getMutationCache().build(d(this,Ie),this.options)),d(this,ce).addObserver(this),d(this,ce).execute(r)}},Ie=new WeakMap,Le=new WeakMap,ce=new WeakMap,Re=new WeakMap,Te=new WeakSet,dr=function(){var s;const r=((s=d(this,ce))==null?void 0:s.state)??Kn();k(this,Le,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Kr=function(r){H.batch(()=>{var s,n,i,a,c,l,u,h;if(d(this,Re)&&this.hasListeners()){const m=d(this,Le).variables,b=d(this,Le).context,g={client:d(this,Ie),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((n=(s=d(this,Re)).onSuccess)==null||n.call(s,r.data,m,b,g),(a=(i=d(this,Re)).onSettled)==null||a.call(i,r.data,null,m,b,g)):(r==null?void 0:r.type)==="error"&&((l=(c=d(this,Re)).onError)==null||l.call(c,r.error,m,b,g),(h=(u=d(this,Re)).onSettled)==null||h.call(u,void 0,r.error,m,b,g))}this.listeners.forEach(m=>{m(d(this,Le))})})},Tn),je,$n,Xi=($n=class extends Rt{constructor(t={}){super();E(this,je);this.config=t,k(this,je,new Map)}build(t,r,s){const n=r.queryKey,i=r.queryHash??ns(n,r);let a=this.get(i);return a||(a=new qi({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(a)),a}add(t){d(this,je).has(t.queryHash)||(d(this,je).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=d(this,je).get(t.queryHash);r&&(t.destroy(),r===t&&d(this,je).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){H.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return d(this,je).get(t)}getAll(){return[...d(this,je).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Es(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>Es(t,s)):r}notify(t){H.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){H.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){H.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},je=new WeakMap,$n),q,Ue,Be,Nt,Ct,Qe,zt,Et,Pn,ea=(Pn=class{constructor(e={}){E(this,q);E(this,Ue);E(this,Be);E(this,Nt);E(this,Ct);E(this,Qe);E(this,zt);E(this,Et);k(this,q,e.queryCache||new Xi),k(this,Ue,e.mutationCache||new Ji),k(this,Be,e.defaultOptions||{}),k(this,Nt,new Map),k(this,Ct,new Map),k(this,Qe,0)}mount(){er(this,Qe)._++,d(this,Qe)===1&&(k(this,zt,is.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,q).onFocus())})),k(this,Et,fr.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,q).onOnline())})))}unmount(){var e,t;er(this,Qe)._--,d(this,Qe)===0&&((e=d(this,zt))==null||e.call(this),k(this,zt,void 0),(t=d(this,Et))==null||t.call(this),k(this,Et,void 0))}isFetching(e){return d(this,q).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return d(this,Ue).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,q).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=d(this,q).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(qe(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return d(this,q).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),n=d(this,q).get(s.queryHash),i=n==null?void 0:n.state.data,a=Pi(t,i);if(a!==void 0)return d(this,q).build(this,s).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return H.batch(()=>d(this,q).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,q).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=d(this,q);H.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=d(this,q);return H.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=H.batch(()=>d(this,q).findAll(e).map(n=>n.cancel(r)));return Promise.all(s).then(ie).catch(ie)}invalidateQueries(e,t={}){return H.batch(()=>(d(this,q).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=H.batch(()=>d(this,q).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(ie)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ie)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=d(this,q).build(this,t);return r.isStaleByTime(qe(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ie).catch(ie)}fetchInfiniteQuery(e){return e.behavior=Ms(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ie).catch(ie)}ensureInfiniteQueryData(e){return e.behavior=Ms(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return fr.isOnline()?d(this,Ue).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,q)}getMutationCache(){return d(this,Ue)}getDefaultOptions(){return d(this,Be)}setDefaultOptions(e){k(this,Be,e)}setQueryDefaults(e,t){d(this,Nt).set(ct(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...d(this,Nt).values()],r={};return t.forEach(s=>{Dt(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){d(this,Ct).set(ct(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...d(this,Ct).values()],r={};return t.forEach(s=>{Dt(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...d(this,Be).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ns(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===os&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...d(this,Be).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){d(this,q).clear(),d(this,Ue).clear()}},q=new WeakMap,Ue=new WeakMap,Be=new WeakMap,Nt=new WeakMap,Ct=new WeakMap,Qe=new WeakMap,zt=new WeakMap,Et=new WeakMap,Pn),Hn=f.createContext(void 0),cs=e=>{const t=f.useContext(Hn);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ta=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(Hn.Provider,{value:e,children:t})),Jn=f.createContext(!1),ra=()=>f.useContext(Jn);Jn.Provider;function Yn(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Xn=f.createContext(Yn()),sa=()=>f.useContext(Xn),na=({children:e})=>{const[t]=f.useState(()=>Yn());return o.jsx(Xn.Provider,{value:t,children:typeof e=="function"?e(t):e})},oa=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ia=e=>{f.useEffect(()=>{e.clearReset()},[e])},aa=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(n&&e.data===void 0||Bn(r,[e.error,s])),ca=e=>{if(e.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...n)=>r(s(...n)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},la=(e,t)=>e.isLoading&&e.isFetching&&!t,ua=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Fs=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function da(e,t,r){var m,b,g,j,w;const s=ra(),n=sa(),i=cs(),a=i.defaultQueryOptions(e);(b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||b.call(m,a),a._optimisticResults=s?"isRestoring":"optimistic",ca(a),oa(a,n),ia(n);const c=!i.getQueryCache().get(a.queryHash),[l]=f.useState(()=>new t(i,a)),u=l.getOptimisticResult(a),h=!s&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(v=>{const y=h?l.subscribe(H.batchCalls(v)):ie;return l.updateResult(),y},[l,h]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),f.useEffect(()=>{l.setOptions(a)},[a,l]),ua(a,u))throw Fs(a,l,n);if(aa({result:u,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((j=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||j.call(g,a,u),a.experimental_prefetchInRender&&!at&&la(u,s)){const v=c?Fs(a,l,n):(w=i.getQueryCache().get(a.queryHash))==null?void 0:w.promise;v==null||v.catch(ie).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?u:l.trackResult(u)}function ha(e,t){return da(e,Wi)}function ma(e,t){const r=cs(),[s]=f.useState(()=>new Yi(r,e));f.useEffect(()=>{s.setOptions(e)},[s,e]);const n=f.useSyncExternalStore(f.useCallback(a=>s.subscribe(H.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=f.useCallback((a,c)=>{s.mutate(a,c).catch(ie)},[s]);if(n.error&&Bn(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const eo="maihouse_config";async function fa(e){return(await fetch(e)).json()}function pa(e){return e&&typeof e=="object"&&typeof e.apiBaseUrl=="string"&&typeof e.appVersion=="string"&&typeof e.minBackend=="string"&&typeof e.features=="object"}async function ga(){try{const r=localStorage.getItem(eo);if(r){const s=JSON.parse(r);if(pa(s))return{...s,...to()}}}catch{}const t=`${window.location.origin}/maihouses/app.config.json`;return fa(t)}function be(e){const t=new URLSearchParams(location.search).get(e),r=location.hash.indexOf("?");return(r>-1?new URLSearchParams(location.hash.slice(r)).get(e):null)??t??void 0}function to(){const e=be("slots"),t=e?e.split(",").reduce((r,s)=>(r[s.trim()]=!0,r),{}):void 0;return{apiBaseUrl:be("api"),features:t,mock:be("mock")?be("mock")==="1":void 0,latency:be("latency")?+be("latency"):void 0,error:be("error")?+be("error"):void 0,q:be("q"),devtools:be("devtools"),mockSeed:be("seed")}}async function ro(){const e=await ga(),t=to(),r={...e,...t,mock:t.mock??e.mock??!0,latency:t.latency??e.latency??0,error:t.error??e.error??0};try{localStorage.setItem(eo,JSON.stringify(r))}catch{}return r}const ba="modulepreload",xa=function(e){return"/maihouses/"+e},Zs={},va=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(r.map(l=>{if(l=xa(l),l in Zs)return;Zs[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":ba,u||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((b,g)=>{m.addEventListener("load",b),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return n.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};let sr;const ya=new Uint8Array(16);function wa(){if(!sr&&(sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sr(ya)}const ee=[];for(let e=0;e<256;++e)ee.push((e+256).toString(16).slice(1));function _a(e,t=0){return ee[e[t+0]]+ee[e[t+1]]+ee[e[t+2]]+ee[e[t+3]]+"-"+ee[e[t+4]]+ee[e[t+5]]+"-"+ee[e[t+6]]+ee[e[t+7]]+"-"+ee[e[t+8]]+ee[e[t+9]]+"-"+ee[e[t+10]]+ee[e[t+11]]+ee[e[t+12]]+ee[e[t+13]]+ee[e[t+14]]+ee[e[t+15]]}const ja=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ls={randomUUID:ja};function Hr(e,t,r){if(Ls.randomUUID&&!e)return Ls.randomUUID();e=e||{};const s=e.random||(e.rng||wa)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,_a(s)}function le(e,t){try{console.debug("[track]",e,t||{})}catch{}}const ue={QuietOn:"user.needs_quiet_space",QuietOff:"user.back_to_explore",QuietAutoOff:"user.quiet_space_timeout",QuietTurnUsed:"user.quiet_space_turn_used",WarmbarView:"ui.warmbar_view",WarmbarContinue:"ui.warmbar_click_continue",WarmbarDismiss:"ui.warmbar_click_dismiss",MoodPick:"user.feeling_set",NoteSaved:"user.reflects_on_viewing",DebriefGen:"user.debrief_mna_generated",DebriefSave:"user.debrief_saved",BudgetCopy:"user.seeks_budget_clarity",ELI5Open:"user.needs_plain_explain",RewriteGen:"user.needs_polite_message_generated",RewriteAdopt:"user.polite_message_adopted"},so="mai-quiet-mode-v1",ka=f.createContext(null);function Us(){try{const e=localStorage.getItem(so);return e?JSON.parse(e):{isQuiet:!1,untilTs:null,remainingTurns:null}}catch{return{isQuiet:!1,untilTs:null,remainingTurns:null}}}function ft(e){localStorage.setItem(so,JSON.stringify(e))}const Sa=({children:e})=>{const[t,r]=f.useState(()=>Us()),s=f.useRef(null),n=f.useCallback(()=>{if(!t.isQuiet)return!1;const u=Date.now();return!(t.untilTs&&u>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)},[t]);f.useEffect(()=>{const u=Date.now();t.isQuiet&&t.untilTs&&u>t.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),ft({isQuiet:!1,untilTs:null,remainingTurns:null}))},[t]),f.useEffect(()=>(s.current&&window.clearInterval(s.current),s.current=window.setInterval(()=>{const u=Date.now(),h=Us();h.isQuiet&&h.untilTs&&u>h.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),ft({isQuiet:!1,untilTs:null,remainingTurns:null}))},3e4),()=>{s.current&&window.clearInterval(s.current)}),[]);const i=f.useCallback(u=>{const h=(u==null?void 0:u.minutes)??null,m=(u==null?void 0:u.turns)??10,b=u==null?void 0:u.reason,g=h?Date.now()+h*6e4:null,j={isQuiet:!0,...b&&{reason:b},untilTs:g,remainingTurns:m};r(j),ft(j),le(ue.QuietOn,{reason:b,minutes:h,turns:m})},[]),a=f.useCallback(()=>{const u={isQuiet:!1,untilTs:null,remainingTurns:null};r(u),ft(u),le(ue.QuietOff,{})},[]),c=f.useCallback(()=>{r(u=>{if(!u.isQuiet||u.remainingTurns===null)return u;const h=Math.max(0,(u.remainingTurns??0)-1),m={...u,remainingTurns:h};if(ft(m),h===0){const b={isQuiet:!1,untilTs:null,remainingTurns:null};return ft(b),le(ue.QuietAutoOff,{reason:"turns_exhausted"}),b}return m})},[]),l=f.useMemo(()=>({state:t,startQuiet:i,clearQuiet:a,decrementTurn:c,isActive:n}),[t,i,a,c,n]);return o.jsx(ka.Provider,{value:l,children:e})};function Na(){try{const e=localStorage.getItem("mai-quiet-mode-v1");if(!e)return!1;const t=JSON.parse(e),r=Date.now();return!(!t.isQuiet||t.untilTs&&r>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)}catch{return!1}}const no="mai-user-profile-v1",Bs="mai-first-seen-ts",oo="mai-warmbar-dismissed-date";function Wt(){try{const e=localStorage.getItem(no);return e?JSON.parse(e):{tags:[]}}catch{return{tags:[]}}}function io(e){localStorage.setItem(no,JSON.stringify(e))}function Ca(e){const t=Wt(),r=new Set([...t.tags||[],...e].filter(Boolean));t.tags=Array.from(r).slice(0,8),io(t)}function za(e){const t=Wt();t.lastMood=e,io(t)}function Ea(){return localStorage.getItem(Bs)?{isFirstVisit:!1}:(localStorage.setItem(Bs,String(Date.now())),{isFirstVisit:!0})}function Ia(){localStorage.setItem(oo,ao())}function Ra(){return localStorage.getItem(oo)===ao()}function Aa(e=3){return(Wt().tags||[]).slice(0,e)}function ao(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`}function Ta(e,t){const s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((s-n)/864e5)}function $a(e){if(!e)return null;const t=new Date;if(e.birthday){const r=Qs(e.birthday,t,7);if(r)return r}if(e.move_in_date){const r=Qs(e.move_in_date,t,7,"搬家");if(r)return r}return null}function Qs(e,t,r=7,s){const[n,i,a]=e.split("-").map(u=>Number(u));if(!n||!i||!a)return null;const c=new Date(t.getFullYear(),i-1,a);return Math.abs(Ta(c,t))<=r?s==="搬家"?"搬家一週年！":"生日快樂！":null}const Pa="你是邁房子的在地好鄰居助理（暱稱：邁邁）。語氣溫暖、尊重，台灣語境。回覆≤2行，先同理再資訊，避免推銷語。",Oa="你是邁邁。使用者啟用安靜模式，現在只想被陪伴。100% 傾聽與同理，回覆 1–2 句；嚴禁主動推薦任何房源/社區/廣告。";function Ma(){const e=Na(),t=localStorage.getItem("mai-mood-v1")||"neutral",s=(Wt().tags||[]).slice(0,5),n=t==="stress"?"偵測到對方壓力較大：降低資訊量、避免指示語、用安撫口吻。":t==="rest"?"對方想放鬆：可以輕鬆、溫暖地聊天，不必急著提供建議。":"保持友善、清晰的語氣。",i=s.length?`使用者在意：${s.join("、")}。未被詢問時不要主動推任何清單，但可在相關話題出現時輕柔承接。`:"";return[e?Oa:Pa,n,i,"所有輸出需簡潔、真誠，拒絕銷售話術。"].filter(Boolean).join(`
`)}async function Vt(e,t,r){var l,u,h,m,b,g;const s=typeof t=="function"?t:void 0,n=typeof t=="object"?t:r,i=await fetch("/api/openai-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:Ma()},...e],temperature:(n==null?void 0:n.temperature)??.7,max_tokens:(n==null?void 0:n.max_tokens)??300,stream:!!s})});if(!i.ok)throw new Error(`LLM proxy error: ${i.status}`);if(s&&i.body){const j=i.body.getReader(),w=new TextDecoder;let v="";for(;;){const{done:y,value:R}=await j.read();if(y)break;const _=w.decode(R,{stream:!0}).split(`
`);for(const A of _)if(A.startsWith("data: ")){const $=A.slice(6);if($==="[DONE]")continue;try{const U=JSON.parse($),N=(h=(u=(l=U==null?void 0:U.choices)==null?void 0:l[0])==null?void 0:u.delta)==null?void 0:h.content;N&&(v+=N,s(N))}catch{}}}return v}const a=await i.json();return((g=(b=(m=a==null?void 0:a.choices)==null?void 0:m[0])==null?void 0:b.message)==null?void 0:g.content)??""}async function Da(e,t){const r=(t==null?void 0:t.audience)==="owner"?"屋主":"仲介",s=(()=>{switch(t==null?void 0:t.intent){case"view":return"預約看房";case"detail":return"詢問物件細節";case"pet":return"確認是否可養寵物";case"price":return"詢問價格與議價空間";default:return"一般詢問"}})(),n=`請將以下訊息改寫成「禮貌、簡短、尊重」的兩個版本（V1/V2），情境：要發給「${r}」，目的：「${s}」。維持原意，避免命令語：
---
${e}
---
格式：
V1：...
V2：...`;return Vt([{role:"user",content:n}],{max_tokens:220})}async function Fa(e){const t=`以下是一段對物件的主觀感受，請以同理的語氣回聲，僅 1–2 句、避免建議：
「${e}」`;return Vt([{role:"user",content:t}],{max_tokens:80})}async function Za(e){const t=`請用白話、非法律意見的方式解釋這段名詞/條款，列出「重點」與「注意」各1–2點，總長≤2行：
${e}`;return Vt([{role:"user",content:t}],{max_tokens:120})}async function La(e,t,r){const s=`我看完一間房，請把重點分成「必要(Must)」「加分(Nice)」「不要(Avoid)」各2–3點，總長≤2行；並在最後一行輸出 #tags: 以逗號分隔 3–5 個關鍵字（避免人名/品牌）。
喜歡：${e}
困擾：${t}
下一步：${r}`;return Vt([{role:"user",content:s}],{max_tokens:160})}let co=Hr();const lo=()=>co;async function ls(e,t={}){const r=await ro(),s=`${r.apiBaseUrl}${e}`,n=(t.method||"GET").toUpperCase(),i={Accept:"application/json","X-API-Version":"v1","X-App-Version":r.appVersion,"X-Session-Id":co,"X-Request-Id":Hr(),"Accept-Language":"zh-Hant-TW"},a=(()=>{const h=t.headers;if(!h)return{};if(h instanceof Headers){const m={};for(const[b,g]of h)m[b]=g;return m}return Array.isArray(h)?Object.fromEntries(h):h})();n==="POST"&&!a["Idempotency-Key"]&&!a["idempotency-key"]&&(a["Idempotency-Key"]=Hr());const c={...i,...a};if(r.mock){const{mockHandler:h}=await va(async()=>{const{mockHandler:m}=await import("./index-B-bmOHmJ.js");return{mockHandler:m}},__vite__mapDeps([0,1,2,3]));return h(e,{...t,headers:c})}const l=new AbortController,u=setTimeout(()=>l.abort(),8e3);try{const h=await fetch(s,{...t,headers:c,signal:l.signal});return h.ok?{ok:!0,data:await h.json()}:{ok:!1,error:{code:"API_ERROR",message:"API 請求失敗"}}}catch(h){return(h==null?void 0:h.name)==="AbortError"?{ok:!1,error:{code:"NETWORK_TIMEOUT",message:"請求超時"}}:{ok:!1,error:{code:"NETWORK_ERROR",message:h.message}}}finally{clearTimeout(u)}}const uo=()=>ls("/api/v1/meta"),Ua=(e,t,r)=>ls(`/api/v1/properties?${new URLSearchParams({page:String(e),pageSize:String(t),...r?{q:r}:{}})}`),Ba=async(e,t)=>{try{const r=e.messages.map(i=>({role:i.role,content:i.content}));console.log("🟢 發送訊息:",r);const s=await Vt(r,t);console.log("🟢 postLLM 回傳:",s);const n={answers:[s],recommends:[]};return console.log("🟢 最終 aiResult:",n),{ok:!0,data:n}}catch(r){return console.error("AI Ask 失敗:",r),{ok:!1,error:{code:"AI_ERROR",message:r instanceof Error?r.message:"AI 暫時無法使用"}}}};function Qa({config:e}){const[t,r]=f.useState(!0),[s,n]=f.useState(!!e.mock),[i,a]=f.useState(e.latency??0),[c,l]=f.useState(e.error??0),[u,h]=f.useState(e.q??""),[m,b]=f.useState("—"),[g,j]=f.useState(e.mockSeed??"");if(f.useEffect(()=>{uo().then(y=>b(y.ok&&y.data?y.data.backendVersion:"—"))},[]),!t)return null;const w=()=>{const y={...e,mock:s,latency:i,error:c,q:u,mockSeed:g,devtools:"1"};try{localStorage.setItem("maihouse_config",JSON.stringify(y))}catch{}location.reload()},v=()=>{const y=String(Date.now());j(y);try{localStorage.setItem("maihouse_config",JSON.stringify({...e,mockSeed:y,mock:s,latency:i,error:c,q:u,devtools:"1"}))}catch{}location.reload()};return o.jsxs("aside",{className:"fixed bottom-4 right-4 z-[var(--z-overlay)] w-[320px] rounded-[var(--r-lg)] bg-white p-4 text-sm shadow-[var(--shadow-card)]",children:[o.jsx("div",{className:"mb-2 font-medium",children:"Developer HUD"}),o.jsxs("div",{className:"space-y-1 text-[var(--text-secondary)]",children:[o.jsxs("div",{children:["API：",e.apiBaseUrl]}),o.jsxs("div",{children:["App：",e.appVersion]}),o.jsxs("div",{children:["Backend：",m]}),o.jsxs("div",{children:["Session：",lo()]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:s,onChange:y=>n(y.target.checked)})," Mock"]}),o.jsxs("label",{className:"flex items-center gap-2",children:["Latency",o.jsx("input",{className:"w-20 rounded border p-1",type:"number",value:i,onChange:y=>a(+y.target.value||0)})]}),o.jsxs("label",{className:"flex items-center gap-2",children:["Error",o.jsx("input",{className:"w-20 rounded border p-1",step:"0.1",type:"number",value:c,onChange:y=>l(+y.target.value||0)})]}),o.jsxs("label",{className:"flex items-center gap-2",children:["q ",o.jsx("input",{className:"flex-1 rounded border p-1",value:u,onChange:y=>h(y.target.value)})]}),o.jsxs("label",{className:"flex items-center gap-2",children:["seed",o.jsx("input",{className:"flex-1 rounded border p-1",value:g,onChange:y=>j(y.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex justify-between",children:[o.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-100)] px-3 py-1",onClick:()=>r(!1),children:"關閉"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-300)] px-3 py-1",onClick:v,children:"🎲 換數據"}),o.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--brand)] px-3 py-1 text-[var(--brand-fg)]",onClick:w,children:"更新"})]})]})]})}const ho="uag_queue",Jr=1e4,qa=200,Z=globalThis.__UAG__||(globalThis.__UAG__={queue:[],backoff:1e4,attempts:0});try{Z.queue=JSON.parse(localStorage.getItem(ho)||"[]")}catch{Z.queue=[]}const mo=()=>{try{localStorage.setItem(ho,JSON.stringify(Z.queue.slice(-Jr)))}catch{}},us=3e5;async function fo(e){var r;const t=await ls("/api/v1/uag/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const s=new Set(e.map(n=>n.requestId));Z.queue=Z.queue.filter(n=>!s.has(n.requestId)),mo(),Z.attempts=0,Z.backoff=1e4}else{Z.attempts++;const s=(r=t==null?void 0:t.data)==null?void 0:r.retryAfterMs;Z.backoff=Math.min(s??Z.backoff*2,us)}}function pr(){Z.timer&&clearTimeout(Z.timer),Z.timer=setTimeout(Wa,Z.backoff)}function Wa(){if(Z.queue.length){const e=Z.queue.slice(0,qa);fo(e).catch(()=>{Z.attempts++,Z.backoff=Math.min(Z.backoff*2,us)}).finally(pr)}else pr()}pr();function Va(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:t&3|8).toString(16)})}function At(e,t,r){if(!(e!=null&&e.trim())||!(t!=null&&t.trim())){console.warn("[UAG] 無效的事件或頁面名稱，已忽略上報");return}const s={event:e,page:t,sessionId:lo(),userId:null,ts:new Date().toISOString(),meta:{origin:"gh-pages"},requestId:Va()};r&&(s.targetId=r),Z.queue.push(s),Z.queue.length>Jr&&(Z.queue=Z.queue.slice(-Jr)),mo(),fo([s]).catch(()=>{Z.attempts++,Z.backoff=Math.min(Z.backoff*2,us),pr()})}const Ga=[{type:"text",value:"買房這麼大的事，先到 "},{type:"highlight",value:"邁鄰居"},{type:"text",value:" 為未來的家查口碑、找評價，最放心！"}],Ka=[{label:"房地產表列",href:"/maihouses/property.html",iconPath:"M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"},{label:"登入",href:"/auth.html?mode=login",iconPath:"M10 17l5-5-5-5v3H3v4h7v3zm9-12h-8v2h8v10h-8v2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"},{label:"註冊",href:"/auth.html?mode=signup",iconPath:"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm-9 9a9 9 0 0 1 18 0z",primary:!0}],Ha=[{id:"community",label:"社區評價",icon:"●",type:"link",href:"/maihouses/community-wall_mvp.html"},{id:"agent",label:"房仲專區",icon:"●",type:"modal",modal:{title:"房仲專區",body:"專業房仲服務與物件推薦"}},{id:"neighbor",label:"邁鄰居",icon:"●",type:"modal",modal:{title:"邁鄰居",body:"認識您的鄰居，建立社區連結"}}];function Ja(){const[e,t]=f.useState(!1),[r,s]=f.useState({title:"",body:""}),n=(i,a)=>{s({title:i,body:a}),t(!0)};return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"site-header",children:o.jsxs("div",{className:"header-inner",children:[o.jsxs("div",{className:"brand",children:[o.jsx("div",{className:"mark"}),o.jsx("span",{className:"brand-name",children:"邁房子"}),o.jsx("span",{className:"brand-slogan",children:"讓家，不只是地址"})]}),o.jsx("div",{className:"auth",children:o.jsx("nav",{className:"mh-nav-right","aria-label":"主要動作",children:Ka.map(i=>{const a=i.href.includes(".html"),c=`mh-pill${i.primary?" mh-pill--primary":""}`,l=o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"mh-icon",viewBox:"0 0 24 24","aria-hidden":"true",children:o.jsx("path",{d:i.iconPath})}),o.jsx("span",{className:"mh-label",children:i.label})]});return a?o.jsx("a",{className:c,href:i.href,children:l},i.label):o.jsx(On,{className:c,to:i.href,children:l},i.label)})})})]})}),o.jsxs("div",{className:"panel",children:[o.jsx("div",{className:"marquee-container","aria-live":"polite",children:Ga.map((i,a)=>i.type==="highlight"?o.jsx("b",{className:"brand-highlight",children:i.value},i.value+a):o.jsx("span",{children:i.value},i.value+a))}),o.jsxs("div",{className:"search-container",children:[o.jsxs("div",{className:"search-box-modern",children:[o.jsx("label",{htmlFor:"search-input",className:"sr-only",children:"搜尋框"}),o.jsx("input",{type:"text",id:"search-input",name:"search-query",className:"search-input",placeholder:"輸入社區名稱、地址或捷運站...","aria-label":"搜尋框",onKeyDown:i=>i.key==="Enter"&&console.log("Search triggered")}),o.jsx("button",{className:"search-btn-primary",onClick:()=>console.log("Search triggered"),children:"搜索"})]}),o.jsx("div",{className:"filter-pills",children:Ha.map(i=>i.type==="link"?o.jsxs("a",{href:i.href,className:"pill",style:{textDecoration:"none"},children:[o.jsx("span",{className:"pill-icon","aria-hidden":"true",children:i.icon}),i.label]},i.id):o.jsxs("button",{className:"pill",type:"button",onClick:()=>n(i.modal.title,i.modal.body),children:[o.jsx("span",{className:"pill-icon","aria-hidden":"true",children:i.icon}),i.label]},i.id))})]})]}),e&&o.jsx("div",{className:"modal-overlay",onClick:()=>t(!1),children:o.jsxs("div",{className:"modal",onClick:i=>i.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:r.title}),o.jsx("button",{className:"modal-close",onClick:()=>t(!1),children:"×"})]}),o.jsx("div",{className:"modal-body",children:o.jsx("p",{children:r.body})})]})})]})}function Ya(){return o.jsxs("svg",{viewBox:"0 0 200 240",className:"w-full h-full drop-shadow-sm transform hover:scale-105 transition-transform duration-300 text-brand",children:[o.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),o.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),o.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),o.jsx("path",{d:"M 55 130 L 25 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M 145 130 L 175 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M 85 180 L 85 215 L 75 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M 115 180 L 115 215 L 125 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})}const qs=[{id:"01",title:"已電聯",desc:"紀錄談話內容",icon:pi},{id:"02",title:"已帶看",desc:"賞屋重點紀錄",icon:gi},{id:"03",title:"已出價",desc:"紀錄價格條件",icon:bi},{id:"04",title:"已斡旋",desc:"議價過程紀錄",icon:xi},{id:"05",title:"已成交",desc:"貸款相關事項",icon:vi},{id:"06",title:"已交屋",desc:"確認圓滿交屋",icon:yi}],Xa=[{id:"J",name:"J***｜景安和院 住戶",rating:5,tags:["#物業/管理"],content:"公設維護得乾淨，假日草皮有人整理。之前反映停車動線，管委會一週內就公告改善。"},{id:"W",name:"W***｜松濤苑 住戶",rating:4,tags:["#噪音"],content:"住起來整體舒服，但臨路面向在上下班尖峰車聲明顯，喜靜者建議考慮中高樓層。"},{id:"L",name:"L***｜遠揚柏悅 住戶",rating:4,tags:["#漏水/壁癌"],content:"頂樓排水設計不錯，颱風天沒有積水。不過垃圾車時間稍晚，偶爾有下水道味。"},{id:"A",name:"A***｜華固名邸 住戶",rating:5,tags:["#物業/管理"],content:"管理員很負責，包裹收發與公告都有效率；電梯偶爾故障但維修速度快。"},{id:"H",name:"H***｜寶輝花園廣場 住戶",rating:3,tags:["#停車/車位"],content:"地下室車位轉彎半徑偏小，新手要多注意；平日夜間社區整體很安靜。"},{id:"K",name:"K***｜潤泰峰匯 住戶",rating:4,tags:["#採光/日照"],content:"採光好、通風佳，夏天不會太悶熱；但西曬戶下午還是會稍微熱一些。"}],ec=["3房以內","30坪以下","近捷運","新成屋"];function po(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=po(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function tc(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=po(e))&&(s&&(s+=" "),s+=t);return s}const rc=(e,t)=>{const r=new Array(e.length+t.length);for(let s=0;s<e.length;s++)r[s]=e[s];for(let s=0;s<t.length;s++)r[e.length+s]=t[s];return r},sc=(e,t)=>({classGroupId:e,validator:t}),go=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),gr="-",Ws=[],nc="arbitrary..",oc=e=>{const t=ac(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return ic(a);const c=a.split(gr),l=c[0]===""&&c.length>1?1:0;return bo(c,l,t)},getConflictingClassGroupIds:(a,c)=>{if(c){const l=s[a],u=r[a];return l?u?rc(u,l):l:u||Ws}return r[a]||Ws}}},bo=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const n=e[t],i=r.nextPart.get(n);if(i){const u=bo(e,t+1,i);if(u)return u}const a=r.validators;if(a===null)return;const c=t===0?e.join(gr):e.slice(t).join(gr),l=a.length;for(let u=0;u<l;u++){const h=a[u];if(h.validator(c))return h.classGroupId}},ic=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),s=t.slice(0,r);return s?nc+s:void 0})(),ac=e=>{const{theme:t,classGroups:r}=e;return cc(r,t)},cc=(e,t)=>{const r=go();for(const s in e){const n=e[s];ds(n,r,s,t)}return r},ds=(e,t,r,s)=>{const n=e.length;for(let i=0;i<n;i++){const a=e[i];lc(a,t,r,s)}},lc=(e,t,r,s)=>{if(typeof e=="string"){uc(e,t,r);return}if(typeof e=="function"){dc(e,t,r,s);return}hc(e,t,r,s)},uc=(e,t,r)=>{const s=e===""?t:xo(t,e);s.classGroupId=r},dc=(e,t,r,s)=>{if(mc(e)){ds(e(s),t,r,s);return}t.validators===null&&(t.validators=[]),t.validators.push(sc(r,e))},hc=(e,t,r,s)=>{const n=Object.entries(e),i=n.length;for(let a=0;a<i;a++){const[c,l]=n[a];ds(l,xo(t,c),r,s)}},xo=(e,t)=>{let r=e;const s=t.split(gr),n=s.length;for(let i=0;i<n;i++){const a=s[i];let c=r.nextPart.get(a);c||(c=go(),r.nextPart.set(a,c)),r=c}return r},mc=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,fc=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null);const n=(i,a)=>{r[i]=a,t++,t>e&&(t=0,s=r,r=Object.create(null))};return{get(i){let a=r[i];if(a!==void 0)return a;if((a=s[i])!==void 0)return n(i,a),a},set(i,a){i in r?r[i]=a:n(i,a)}}},Yr="!",Vs=":",pc=[],Gs=(e,t,r,s,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:n}),gc=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=n=>{const i=[];let a=0,c=0,l=0,u;const h=n.length;for(let w=0;w<h;w++){const v=n[w];if(a===0&&c===0){if(v===Vs){i.push(n.slice(l,w)),l=w+1;continue}if(v==="/"){u=w;continue}}v==="["?a++:v==="]"?a--:v==="("?c++:v===")"&&c--}const m=i.length===0?n:n.slice(l);let b=m,g=!1;m.endsWith(Yr)?(b=m.slice(0,-1),g=!0):m.startsWith(Yr)&&(b=m.slice(1),g=!0);const j=u&&u>l?u-l:void 0;return Gs(i,g,b,j)};if(t){const n=t+Vs,i=s;s=a=>a.startsWith(n)?i(a.slice(n.length)):Gs(pc,!1,a,void 0,!0)}if(r){const n=s;s=i=>r({className:i,parseClassName:n})}return s},bc=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,s)=>{t.set(r,1e6+s)}),r=>{const s=[];let n=[];for(let i=0;i<r.length;i++){const a=r[i],c=a[0]==="[",l=t.has(a);c||l?(n.length>0&&(n.sort(),s.push(...n),n=[]),s.push(a)):n.push(a)}return n.length>0&&(n.sort(),s.push(...n)),s}},xc=e=>({cache:fc(e.cacheSize),parseClassName:gc(e),sortModifiers:bc(e),...oc(e)}),vc=/\s+/,yc=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:i}=t,a=[],c=e.trim().split(vc);let l="";for(let u=c.length-1;u>=0;u-=1){const h=c[u],{isExternal:m,modifiers:b,hasImportantModifier:g,baseClassName:j,maybePostfixModifierPosition:w}=r(h);if(m){l=h+(l.length>0?" "+l:l);continue}let v=!!w,y=s(v?j.substring(0,w):j);if(!y){if(!v){l=h+(l.length>0?" "+l:l);continue}if(y=s(j),!y){l=h+(l.length>0?" "+l:l);continue}v=!1}const R=b.length===0?"":b.length===1?b[0]:i(b).join(":"),S=g?R+Yr:R,_=S+y;if(a.indexOf(_)>-1)continue;a.push(_);const A=n(y,v);for(let $=0;$<A.length;++$){const U=A[$];a.push(S+U)}l=h+(l.length>0?" "+l:l)}return l},wc=(...e)=>{let t=0,r,s,n="";for(;t<e.length;)(r=e[t++])&&(s=vo(r))&&(n&&(n+=" "),n+=s);return n},vo=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=vo(e[s]))&&(r&&(r+=" "),r+=t);return r},_c=(e,...t)=>{let r,s,n,i;const a=l=>{const u=t.reduce((h,m)=>m(h),e());return r=xc(u),s=r.cache.get,n=r.cache.set,i=c,c(l)},c=l=>{const u=s(l);if(u)return u;const h=yc(l,r);return n(l,h),h};return i=a,(...l)=>i(wc(...l))},jc=[],K=e=>{const t=r=>r[e]||jc;return t.isThemeGetter=!0,t},yo=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wo=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kc=/^\d+\/\d+$/,Sc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nc=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,zc=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ec=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pt=e=>kc.test(e),M=e=>!!e&&!Number.isNaN(Number(e)),$e=e=>!!e&&Number.isInteger(Number(e)),Ir=e=>e.endsWith("%")&&M(e.slice(0,-1)),Se=e=>Sc.test(e),Ic=()=>!0,Rc=e=>Nc.test(e)&&!Cc.test(e),_o=()=>!1,Ac=e=>zc.test(e),Tc=e=>Ec.test(e),$c=e=>!C(e)&&!z(e),Pc=e=>Tt(e,So,_o),C=e=>yo.test(e),He=e=>Tt(e,No,Rc),Rr=e=>Tt(e,Zc,M),Ks=e=>Tt(e,jo,_o),Oc=e=>Tt(e,ko,Tc),nr=e=>Tt(e,Co,Ac),z=e=>wo.test(e),Pt=e=>$t(e,No),Mc=e=>$t(e,Lc),Hs=e=>$t(e,jo),Dc=e=>$t(e,So),Fc=e=>$t(e,ko),or=e=>$t(e,Co,!0),Tt=(e,t,r)=>{const s=yo.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},$t=(e,t,r=!1)=>{const s=wo.exec(e);return s?s[1]?t(s[1]):r:!1},jo=e=>e==="position"||e==="percentage",ko=e=>e==="image"||e==="url",So=e=>e==="length"||e==="size"||e==="bg-size",No=e=>e==="length",Zc=e=>e==="number",Lc=e=>e==="family-name",Co=e=>e==="shadow",Uc=()=>{const e=K("color"),t=K("font"),r=K("text"),s=K("font-weight"),n=K("tracking"),i=K("leading"),a=K("breakpoint"),c=K("container"),l=K("spacing"),u=K("radius"),h=K("shadow"),m=K("inset-shadow"),b=K("text-shadow"),g=K("drop-shadow"),j=K("blur"),w=K("perspective"),v=K("aspect"),y=K("ease"),R=K("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[..._(),z,C],$=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],N=()=>[z,C,l],W=()=>[pt,"full","auto",...N()],O=()=>[$e,"none","subgrid",z,C],X=()=>["auto",{span:["full",$e,z,C]},$e,z,C],ge=()=>[$e,"auto",z,C],Ve=()=>["auto","min","max","fr",z,C],Nr=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],mt=()=>["start","end","center","stretch","center-safe","end-safe"],ke=()=>["auto",...N()],Ge=()=>[pt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],T=()=>[e,z,C],_s=()=>[..._(),Hs,Ks,{position:[z,C]}],js=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ks=()=>["auto","cover","contain",Dc,Pc,{size:[z,C]}],Cr=()=>[Ir,Pt,He],se=()=>["","none","full",u,z,C],he=()=>["",M,Pt,He],Ht=()=>["solid","dashed","dotted","double"],Ss=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>[M,Ir,Hs,Ks],Ns=()=>["","none",j,z,C],Jt=()=>["none",M,z,C],Yt=()=>["none",M,z,C],zr=()=>[M,z,C],Xt=()=>[pt,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Se],breakpoint:[Se],color:[Ic],container:[Se],"drop-shadow":[Se],ease:["in","out","in-out"],font:[$c],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Se],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Se],shadow:[Se],spacing:["px",M],text:[Se],"text-shadow":[Se],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",pt,C,z,v]}],container:["container"],columns:[{columns:[M,C,z,c]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[$e,"auto",z,C]}],basis:[{basis:[pt,"full","auto",c,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[M,pt,"auto","initial","none",C]}],grow:[{grow:["",M,z,C]}],shrink:[{shrink:["",M,z,C]}],order:[{order:[$e,"first","last","none",z,C]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":ge()}],"col-end":[{"col-end":ge()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":ge()}],"row-end":[{"row-end":ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ve()}],"auto-rows":[{"auto-rows":Ve()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...Nr(),"normal"]}],"justify-items":[{"justify-items":[...mt(),"normal"]}],"justify-self":[{"justify-self":["auto",...mt()]}],"align-content":[{content:["normal",...Nr()]}],"align-items":[{items:[...mt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...mt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Nr()}],"place-items":[{"place-items":[...mt(),"baseline"]}],"place-self":[{"place-self":["auto",...mt()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ke()}],mx:[{mx:ke()}],my:[{my:ke()}],ms:[{ms:ke()}],me:[{me:ke()}],mt:[{mt:ke()}],mr:[{mr:ke()}],mb:[{mb:ke()}],ml:[{ml:ke()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ge()}],w:[{w:[c,"screen",...Ge()]}],"min-w":[{"min-w":[c,"screen","none",...Ge()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...Ge()]}],h:[{h:["screen","lh",...Ge()]}],"min-h":[{"min-h":["screen","lh","none",...Ge()]}],"max-h":[{"max-h":["screen","lh",...Ge()]}],"font-size":[{text:["base",r,Pt,He]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,z,Rr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ir,C]}],"font-family":[{font:[Mc,C,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,z,C]}],"line-clamp":[{"line-clamp":[M,"none",z,Rr]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",z,C]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",z,C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ht(),"wavy"]}],"text-decoration-thickness":[{decoration:[M,"from-font","auto",z,He]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[M,"auto",z,C]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",z,C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",z,C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_s()}],"bg-repeat":[{bg:js()}],"bg-size":[{bg:ks()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$e,z,C],radial:["",z,C],conic:[$e,z,C]},Fc,Oc]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:Cr()}],"gradient-via-pos":[{via:Cr()}],"gradient-to-pos":[{to:Cr()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ht(),"hidden","none"]}],"divide-style":[{divide:[...Ht(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...Ht(),"none","hidden"]}],"outline-offset":[{"outline-offset":[M,z,C]}],"outline-w":[{outline:["",M,Pt,He]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",h,or,nr]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",m,or,nr]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[M,He]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",b,or,nr]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[M,z,C]}],"mix-blend":[{"mix-blend":[...Ss(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ss()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[M]}],"mask-image-linear-from-pos":[{"mask-linear-from":J()}],"mask-image-linear-to-pos":[{"mask-linear-to":J()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":J()}],"mask-image-t-to-pos":[{"mask-t-to":J()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":J()}],"mask-image-r-to-pos":[{"mask-r-to":J()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":J()}],"mask-image-b-to-pos":[{"mask-b-to":J()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":J()}],"mask-image-l-to-pos":[{"mask-l-to":J()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":J()}],"mask-image-x-to-pos":[{"mask-x-to":J()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":J()}],"mask-image-y-to-pos":[{"mask-y-to":J()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[z,C]}],"mask-image-radial-from-pos":[{"mask-radial-from":J()}],"mask-image-radial-to-pos":[{"mask-radial-to":J()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[M]}],"mask-image-conic-from-pos":[{"mask-conic-from":J()}],"mask-image-conic-to-pos":[{"mask-conic-to":J()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_s()}],"mask-repeat":[{mask:js()}],"mask-size":[{mask:ks()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",z,C]}],filter:[{filter:["","none",z,C]}],blur:[{blur:Ns()}],brightness:[{brightness:[M,z,C]}],contrast:[{contrast:[M,z,C]}],"drop-shadow":[{"drop-shadow":["","none",g,or,nr]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",M,z,C]}],"hue-rotate":[{"hue-rotate":[M,z,C]}],invert:[{invert:["",M,z,C]}],saturate:[{saturate:[M,z,C]}],sepia:[{sepia:["",M,z,C]}],"backdrop-filter":[{"backdrop-filter":["","none",z,C]}],"backdrop-blur":[{"backdrop-blur":Ns()}],"backdrop-brightness":[{"backdrop-brightness":[M,z,C]}],"backdrop-contrast":[{"backdrop-contrast":[M,z,C]}],"backdrop-grayscale":[{"backdrop-grayscale":["",M,z,C]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[M,z,C]}],"backdrop-invert":[{"backdrop-invert":["",M,z,C]}],"backdrop-opacity":[{"backdrop-opacity":[M,z,C]}],"backdrop-saturate":[{"backdrop-saturate":[M,z,C]}],"backdrop-sepia":[{"backdrop-sepia":["",M,z,C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",z,C]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[M,"initial",z,C]}],ease:[{ease:["linear","initial",y,z,C]}],delay:[{delay:[M,z,C]}],animate:[{animate:["none",R,z,C]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,z,C]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Jt()}],"rotate-x":[{"rotate-x":Jt()}],"rotate-y":[{"rotate-y":Jt()}],"rotate-z":[{"rotate-z":Jt()}],scale:[{scale:Yt()}],"scale-x":[{"scale-x":Yt()}],"scale-y":[{"scale-y":Yt()}],"scale-z":[{"scale-z":Yt()}],"scale-3d":["scale-3d"],skew:[{skew:zr()}],"skew-x":[{"skew-x":zr()}],"skew-y":[{"skew-y":zr()}],transform:[{transform:[z,C,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xt()}],"translate-x":[{"translate-x":Xt()}],"translate-y":[{"translate-y":Xt()}],"translate-z":[{"translate-z":Xt()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",z,C]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",z,C]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[M,Pt,He,Rr]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Bc=_c(Uc);function hr(...e){return Bc(tc(e))}const Qc=(e,t)=>{const r=e.split(".").map(n=>+n||0),s=t.split(".").map(n=>+n||0);for(let n=0;n<3;n++){const i=r[n]??0,a=s[n]??0;if(i<a)return-1;if(i>a)return 1}return 0},Gt=yr.forwardRef(({className:e,variant:t="default",children:r,...s},n)=>{const i="transition-all duration-200 bg-white border border-border-light",a={default:"mh-card p-4 md:p-6",hero:"mh-card mh-card--hero p-6 md:p-10 bg-gradient-to-br from-white to-brand-50",ai:"mh-ai-card"};return o.jsx("section",{ref:n,className:hr(i,a[t],e),...s,children:r})});Gt.displayName="HomeCard";const zo=yr.memo(({index:e,title:t,desc:r,icon:s,isLast:n})=>o.jsxs("div",{className:"group relative flex md:flex-col items-center md:items-center gap-4 md:gap-4 p-2 rounded-xl hover:bg-bg-soft transition-colors duration-300 cursor-default",children:[o.jsxs("div",{className:"relative z-10 flex-shrink-0",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-border-light text-text-muted flex items-center justify-center group-hover:border-brand group-hover:text-brand group-hover:scale-110 transition-all duration-300 shadow-sm",children:o.jsx(s,{size:20})}),o.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-brand text-white text-[10px] font-bold flex items-center justify-center ring-2 ring-white",children:e+1})]}),o.jsxs("div",{className:"flex-1 md:text-center",children:[o.jsx("h4",{className:"text-base font-black text-text-ink mb-1 group-hover:text-brand transition-colors",children:t}),o.jsx("p",{className:"text-xs text-text-muted font-medium leading-relaxed",children:r})]}),o.jsx("div",{className:"md:hidden ml-auto text-border-light group-hover:text-brand transition-colors",children:!n&&o.jsx(wi,{size:16,className:"opacity-0 group-hover:opacity-20"})})]}));zo.displayName="HeroStep";function qc(){return o.jsxs(Gt,{variant:"hero",className:"group/container relative overflow-hidden",children:[o.jsxs("div",{className:"relative z-10 mb-10 flex flex-col items-center gap-6 md:flex-row md:gap-10",children:[o.jsx("div",{className:"relative h-32 w-28 shrink-0",children:o.jsx(Ya,{})}),o.jsxs("div",{className:"flex-1 text-center md:text-left",children:[o.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full border border-brand/20 bg-bg-soft px-3 py-1 text-xs font-bold text-brand",children:[o.jsx(_i,{size:14}),o.jsx("span",{children:"全程透明．安心留痕"})]}),o.jsx("h3",{className:"mb-3 text-2xl font-black tracking-tight text-brand md:text-3xl",children:"安心留痕保障"}),o.jsxs("p",{className:"max-w-2xl text-sm font-medium leading-relaxed text-text-muted md:text-base",children:["介紹改從第一次電話聯絡開始，買賣雙方的每一通聯絡紀錄、每一句承諾與每項協議， 都會經過雙方確認並完整留痕。",o.jsx("br",{className:"hidden md:block"}),"讓整個交易過程都有跡可循，保障雙方權益，直到圓滿交屋。"]})]}),o.jsxs("a",{href:"/#policy",className:"hidden shrink-0 items-center gap-2 rounded-xl border-2 border-brand bg-white px-5 py-2.5 text-sm font-bold text-brand shadow-sm transition-all hover:bg-brand hover:text-white md:flex",children:["履保規範 ",o.jsx(ji,{size:16})]})]}),o.jsxs("div",{className:"relative mt-4 pl-2 md:pl-0",children:[o.jsx("div",{className:"absolute left-0 top-8 -z-0 hidden h-0.5 w-full bg-border-light md:block"}),o.jsx("div",{className:"absolute inset-y-0 left-8 -z-0 w-0.5 bg-border-light md:hidden"}),o.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-6 md:gap-2",children:qs.map((e,t)=>o.jsx(zo,{...e,index:t,isLast:t===qs.length-1},e.id))})]})]})}function Wc(){const[e,t]=f.useState([]),[r,s]=f.useState([]),[n,i]=f.useState(!1),[a,c]=f.useState(0),l=f.useCallback(async u=>{var g,j;if(!u.trim()||n)return;const h={role:"user",content:u.trim(),timestamp:new Date().toISOString()},m=[...e,h];t(m),i(!0),At("ai_message_sent","/");const b={role:"assistant",content:"",timestamp:new Date().toISOString()};t(w=>[...w,b]);try{let w=!1;const v=await Ba({messages:m},y=>{w=!0,t(R=>{const S=[...R],_=S[S.length-1];if(_){const A={role:_.role||"assistant",content:(_.content||"")+y};_.timestamp&&(A.timestamp=_.timestamp),S[S.length-1]=A}return S})});if(v.ok&&v.data){!w&&v.data.answers&&v.data.answers.length>0&&t(R=>{const S=[...R];if(S.length>0){const _=S[S.length-1];S[S.length-1]={..._,role:"assistant",content:v.data.answers[0]||""}}return S});const y=v.data.recommends||[];s(y),(g=y[0])!=null&&g.communityId&&localStorage.setItem("recoCommunity",y[0].communityId),(j=v.data.usage)!=null&&j.totalTokens&&c(R=>R+v.data.usage.totalTokens)}else t(y=>{const R=[...y];if(R.length>0){const S=R[R.length-1];R[R.length-1]={...S,role:"assistant",content:"抱歉，AI 服務目前暫時不可用，請稍後再試。您也可以先描述需求讓我為您推薦房源格局與區域喔。"}}return R})}catch{t(v=>{const y=[...v];if(y.length>1){const R=y[y.length-1];y[y.length-1]={...R,role:"assistant",content:"抱歉，AI 服務連線失敗（可能未設定金鑰）。請稍後再試，或通知我們協助處理。"}}return y})}finally{i(!1)}},[e,n]);return{messages:e,reco:r,loading:n,totalTokens:a,sendMessage:l}}const Eo=f.memo(({message:e})=>{const t=e.role==="user";return o.jsx("div",{className:hr("flex animate-[fadeIn_0.3s_ease-out]",t?"justify-end":"justify-start"),children:o.jsxs("div",{className:hr("shadow-sm min-w-0 max-w-[85%] md:max-w-[75%] rounded-2xl px-4 py-3 text-[15px]",t?"bg-brand text-white rounded-tr-sm":"bg-white border border-border-light text-text-primary rounded-tl-sm"),children:[o.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:e.content}),e.timestamp&&o.jsx("div",{className:hr("mt-1.5 text-xs",t?"text-white/70":"text-text-tertiary"),children:new Date(e.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})})]})})});Eo.displayName="ChatBubble";const Io=f.memo(({onSelect:e})=>o.jsx("div",{className:"flex flex-wrap items-center gap-1 md:flex-nowrap min-w-fit",children:ec.map(t=>o.jsx("button",{"data-text":t,className:"cursor-pointer whitespace-nowrap rounded-full border border-border-default bg-white px-2 py-1.5 text-xs font-medium text-text-secondary transition-all duration-200 hover:border-brand hover:shadow-sm",onClick:()=>e(t),"aria-label":`快速輸入 ${t}`,children:t},t))}));Io.displayName="SuggestionChips";const Ro=f.memo(()=>o.jsx("div",{className:"flex h-full items-center justify-center text-sm text-slate-500",children:o.jsxs("div",{className:"text-center max-w-[340px]",children:[o.jsx("p",{className:"mb-3 text-3xl",children:"🏡"}),o.jsx("p",{className:"mb-3 font-semibold leading-relaxed text-[15px] text-slate-800",children:"歡迎來到邁房子 ☺️"}),o.jsxs("p",{className:"mx-auto text-sm leading-relaxed text-slate-500",children:["買房不只看物件，更要看生活。",o.jsx("br",{}),"這裡有真實住戶分享，我們一起慢慢看"]})]})}));Ro.displayName="EmptyState";const hs=f.memo(({property:e})=>o.jsxs("article",{className:"rounded-xl bg-white p-3 transition-all hover:-translate-y-1 hover:shadow-lg border border-border-light hover:border-brand",children:[o.jsx("div",{className:"mb-2 h-28 rounded-md bg-cover bg-center",style:{backgroundImage:`url(${e.cover})`},"aria-hidden":"true"}),o.jsx("div",{className:"mb-1 font-semibold text-text-primary text-sm line-clamp-1",children:e.title}),o.jsx("div",{className:"mb-2 text-xs text-text-secondary",children:e.communityName}),o.jsxs("div",{className:"mb-2 font-bold text-brand text-base",children:["NT$ ",e.price," 萬"]}),o.jsx("a",{href:`#/community/${e.communityId}/wall`,className:"inline-block rounded-full px-3 py-1.5 text-xs font-medium text-white transition-all hover:-translate-y-0.5 bg-gradient-to-br from-brand to-brand-light","aria-label":"前往社區牆",children:"看社區牆 →"})]}));hs.displayName="RecommendationCard";function Ao(){const{messages:e,reco:t,loading:r,sendMessage:s}=Wc(),[n,i]=f.useState(""),a=f.useRef(null);f.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]);const c=()=>{!n.trim()||r||(s(n),i(""))},l=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),c())},u=h=>{i(h)};return o.jsxs(Gt,{variant:"ai",children:[o.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[o.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[o.jsx("div",{className:"size-2.5 rounded-full bg-brand shadow-[0_0_8px_rgba(74,144,226,0.6)]"}),o.jsx("h3",{className:"truncate font-black text-slate-800 text-[clamp(18px,2.2vw,21px)]",children:"社區鄰居管家"})]}),o.jsx("div",{className:"w-14","aria-hidden":"true"}),o.jsx(Io,{onSelect:u}),o.jsx("div",{className:"ml-auto min-w-[150px] text-right text-xs font-medium text-text-secondary",children:"多輪對話・智能推薦"})]}),o.jsxs("div",{ref:a,role:"log","aria-live":"polite",className:"mh-ai-chat",children:[e.length===0?o.jsx(Ro,{}):e.map((h,m)=>o.jsx(Eo,{message:h},`${h.role}-${m}`)),r&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:"max-w-[80%] rounded-xl border border-border-light bg-slate-50 px-4 py-2.5 text-sm text-slate-500",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"正在思考"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("span",{className:"inline-block size-1.5 animate-bounce rounded-full bg-slate-500"}),o.jsx("span",{className:"inline-block size-1.5 animate-bounce rounded-full bg-slate-500 delay-100"}),o.jsx("span",{className:"inline-block size-1.5 animate-bounce rounded-full bg-slate-500 delay-200"})]})]})})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{id:"smart-ask-input",name:"smart-ask-query",type:"text",className:"mh-ai-input",placeholder:"輸入需求（例:西屯區 2房 預算1500萬）",value:n,onChange:h=>i(h.target.value),onKeyDown:l,disabled:r,maxLength:500,"aria-label":"輸入詢問"}),o.jsx("button",{onClick:c,disabled:r||!n.trim(),className:"rounded-full bg-brand px-5 py-2 text-sm font-medium text-white shadow-md transition-all hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-50",children:"送出"})]}),!!t.length&&o.jsxs("div",{className:"mt-4 border-t border-border-light pt-4",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"text-[calc(var(--fs-base)+6px)] font-semibold text-slate-500 md:text-[calc(var(--fs-base)+12px)] md:font-bold",children:"🏠 智能房源推薦"}),o.jsx("div",{className:"mt-1 text-xs text-slate-400",children:"依瀏覽行為與社區口碑輔助排序"})]}),o.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:t.map(h=>o.jsx(hs,{property:h},h.id))})]})]})}const To=yr.memo(({id:e,name:t,rating:r,tags:s,content:n})=>o.jsxs("article",{className:"flex gap-2 border border-border-light rounded-[var(--r-sm)] p-3 bg-white relative hover:shadow-md transition-shadow duration-200",children:[o.jsx("div",{className:"w-[34px] h-[34px] rounded-full bg-brand/10 border-2 border-brand flex items-center justify-center font-extrabold text-brand text-[17px] shrink-0",children:e}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-extrabold text-sm text-text-ink flex items-center gap-1",children:[t,o.jsxs("span",{className:"text-yellow-400 text-xs","aria-label":`${r} stars`,children:["★".repeat(r),"☆".repeat(5-r)]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:s.map(i=>o.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-success/10 border border-success/40 text-success font-bold",children:i},i))}),o.jsx("p",{className:"mt-2 text-sm leading-relaxed text-brand font-medium",children:n})]})]}));To.displayName="ReviewCard";function Vc(){return o.jsxs(Gt,{className:"bg-white/96 backdrop-blur-md p-2.5",children:[o.jsx("div",{className:"flex justify-between items-center gap-1.5 mb-3 px-1",children:o.jsx("h3",{className:"text-lg font-extrabold m-0 text-brand tracking-wide",children:"社區評價（聚合）"})}),o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Xa.map(e=>o.jsx(To,{...e},e.id))}),o.jsxs("a",{className:"mt-3 flex items-center gap-2.5 bg-gradient-to-r from-success/25 to-success/10 border border-success/40 p-3 rounded-[var(--r-sm)] font-black text-success no-underline relative lg:justify-center lg:text-center group hover:shadow-md transition-all duration-200",href:"/maihouses/community-wall_mvp.html","aria-label":"點我看更多社區評價",children:[o.jsx("span",{className:"text-[17px] tracking-wide lg:mx-auto max-sm:text-[15px]",children:"👉 點我看更多社區評價"}),o.jsx("span",{className:"ml-auto bg-success text-white rounded-full text-sm px-3 py-2 lg:absolute lg:right-[14px] lg:top-1/2 lg:-translate-y-1/2 lg:ml-0 max-sm:text-xs max-sm:px-2.5 max-sm:py-[7px] group-hover:bg-success/90 transition-colors shadow-sm",children:"前往社區牆"})]})]})}function Gc({q:e}){const[t,r]=f.useState([]),[s,n]=f.useState(1),[i,a]=f.useState(0),c=8,l=Math.max(1,Math.ceil(i/c));return f.useEffect(()=>{n(1)},[e]),f.useEffect(()=>{Ua(s,c,e).then(u=>{u.ok&&u.data?(r(u.data.items),a(u.data.total)):(r([]),a(0))})},[s,e]),o.jsxs(Gt,{children:[o.jsx("h3",{className:"mb-2 font-black text-text-primary text-[clamp(19px,2.4vw,22px)] mt-0",children:"精選房源"}),t.length===0?o.jsx("div",{className:"py-16 text-center text-text-secondary text-base",children:e?o.jsxs(o.Fragment,{children:["找不到含「",o.jsx("span",{className:"font-semibold text-brand",children:e}),"」的物件"]}):"暫無物件，稍後再試"}):o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:t.map(u=>o.jsx(hs,{property:u},u.id))}),l>1&&o.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[o.jsx("button",{onClick:()=>n(u=>Math.max(1,u-1)),disabled:s===1,className:"px-3 py-1 rounded border border-border-light disabled:opacity-50 hover:bg-bg-soft transition-colors",children:"上一頁"}),o.jsxs("span",{className:"px-3 py-1 text-text-secondary",children:[s," / ",l]}),o.jsx("button",{onClick:()=>n(u=>Math.min(l,u+1)),disabled:s===l,className:"px-3 py-1 rounded border border-border-light disabled:opacity-50 hover:bg-bg-soft transition-colors",children:"下一頁"})]})]})}const Kc={width:"100%",background:"#F5F8FF",color:"#0a2246",fontSize:14,lineHeight:"34px",height:34,textAlign:"center",letterSpacing:"0.3px",borderBottom:"1px solid #E6ECFF",display:"flex",alignItems:"center",justifyContent:"center",gap:12},Hc={padding:"2px 10px",borderRadius:999,border:"1px solid #1749D7",background:"#1749D7",color:"#fff",cursor:"pointer",lineHeight:"24px",height:26},Jc={padding:"2px 10px",borderRadius:999,border:"1px solid #C9D5FF",background:"#fff",color:"#1749D7",cursor:"pointer",lineHeight:"24px",height:26},Yc=()=>{const[e,t]=f.useState(!1),r=Wt(),s=f.useMemo(()=>Aa(3),[]),n=f.useMemo(()=>$a(r.milestones),[r.milestones]);if(f.useEffect(()=>{const{isFirstVisit:h}=Ea(),m=s&&s.length>0||!!n||!!r.lastMood,b=!h&&!Ra()&&m;t(b),b&&le(ue.WarmbarView,{tags:s,milestone:!!n,lastMood:r.lastMood})},[s,n,r.lastMood]),!e)return null;const i=h=>h==="stress"?"最近辛苦了":h==="rest"?"慢慢來就好":"好久不見",a=s&&s.length>0?`上次你提到「${s.join("・")}」`:null,c=n||(a?`${i(r.lastMood)}，${a}`:`${i(r.lastMood)}，這幾天過得怎麼樣`),l=()=>{le(ue.WarmbarContinue,{tags:s,milestone:!!n});const h=n?"最近有點紀念日的感覺，想輕鬆聊聊。":s&&s.length>0?`還記得我們聊過 ${s.join("、")}，你有新想法嗎？`:"想跟你聊聊近況～";window.dispatchEvent(new CustomEvent("mai:chat:start",{detail:{text:h}}))},u=()=>{Ia(),t(!1),le(ue.WarmbarDismiss,{})};return o.jsxs("div",{style:Kc,role:"status","aria-live":"polite",children:[o.jsx("span",{children:c}),o.jsx("button",{style:Hc,onClick:l,children:"接著聊"}),o.jsx("button",{style:Jc,onClick:u,children:"今天不再顯示"})]})};function Js({config:e}){const[t,r]=f.useState(null);f.useEffect(()=>{uo().then(n=>{n.ok&&n.data&&(n.data.maintenance||Qc(n.data.backendVersion,e.minBackend)<0)&&(console.warn("版本不相容或維護中"),r("版本不相容或維護中"))})},[e.minBackend]),f.useEffect(()=>{const n=i=>{var a;try{At("unhandled_promise_rejection","/",((a=i.reason)==null?void 0:a.message)||String(i.reason))}catch{}};return globalThis.addEventListener("unhandledrejection",n),()=>globalThis.removeEventListener("unhandledrejection",n)},[]);const s=e.features||{};return o.jsxs(o.Fragment,{children:[o.jsx(Ja,{}),o.jsx(Yc,{}),o.jsx("div",{className:"absolute left-0 top-0 -z-10 h-[420px] w-full bg-gradient-to-b from-brand to-brand-light"}),t&&o.jsx("div",{className:"mx-auto mt-4 max-w-container rounded-md bg-yellow-500 p-3 text-sm text-white",children:t}),o.jsxs("main",{className:"relative mx-auto max-w-container space-y-6 p-4 md:space-y-8 md:p-6",children:[s.heroAssure!==!1&&o.jsx(qc,{}),s.smartAsk!==!1&&o.jsx(Ao,{}),o.jsx(Vc,{}),s.propertyGrid!==!1&&o.jsx(Gc,{})]})]})}const Xc=void 0,el=void 0;throw new Error("Missing Supabase environment variables");const Ae=Si(Xc,el,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});async function tl(e,t){const{data:r,error:s}=await Ae.auth.signUp({email:e,password:t});if(s)throw s;return r}async function rl(e,t){const{data:r,error:s}=await Ae.auth.signInWithPassword({email:e,password:t});if(s)throw s;return r}function sl(){const e=Mn(),[t,r]=f.useState(""),[s,n]=f.useState(""),[i,a]=f.useState(""),[c,l]=f.useState(!1),[u,h]=f.useState(!1),m=async b=>{b.preventDefault(),a(""),h(!0);try{At("register_submit","/auth/register"),await tl(t,s),l(!0),setTimeout(()=>e("/auth/login"),2e3)}catch(g){a(g.message||"註冊失敗")}finally{h(!1)}};return o.jsxs("section",{className:"mx-auto mt-8 max-w-md rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[o.jsx("h1",{className:"mb-4 text-xl font-semibold",children:"註冊"}),i&&o.jsx("div",{className:"mb-4 rounded-[var(--r-md)] bg-red-50 border border-red-200 p-3 text-red-600 text-sm",children:i}),c&&o.jsx("div",{className:"mb-4 rounded-[var(--r-md)] bg-green-50 border border-green-200 p-3 text-green-600 text-sm",children:"註冊成功! 請檢查您的信箱確認帳號,稍後將跳轉到登入頁面..."}),o.jsxs("form",{onSubmit:m,className:"space-y-3",children:[o.jsx("input",{id:"register-email",name:"email",className:"w-full rounded-[var(--r-md)] border border-[var(--border-default)] p-2",type:"email",placeholder:"Email","aria-label":"Email",value:t,onChange:b=>r(b.target.value),required:!0}),o.jsx("input",{id:"register-password",name:"password",className:"w-full rounded-[var(--r-md)] border border-[var(--border-default)] p-2",type:"password",placeholder:"密碼 (至少6個字元)","aria-label":"密碼",value:s,onChange:b=>n(b.target.value),minLength:6,required:!0}),o.jsx("button",{type:"submit",disabled:u||c,className:"w-full rounded-[var(--r-pill)] bg-[var(--brand)] px-4 py-2 text-[var(--brand-fg)] disabled:opacity-50 disabled:cursor-not-allowed",children:u?"註冊中...":c?"註冊成功":"註冊"})]})]})}function $o(){const[e,t]=f.useState(null),[r,s]=f.useState(null),[n,i]=f.useState(!0);return f.useEffect(()=>{Ae.auth.getSession().then(({data:{session:c}})=>{t(c),s((c==null?void 0:c.user)??null),i(!1)});const{data:{subscription:a}}=Ae.auth.onAuthStateChange((c,l)=>{t(l),s((l==null?void 0:l.user)??null),i(!1)});return()=>a.unsubscribe()},[]),{session:e,user:r,loading:n}}function nl(){const e=Mn(),{user:t}=$o(),[r,s]=f.useState(""),[n,i]=f.useState(""),[a,c]=f.useState(""),[l,u]=f.useState(!1);f.useEffect(()=>{t&&e("/")},[t,e]);const h=async m=>{m.preventDefault(),c(""),u(!0);try{try{At("login_submit","/auth/login")}catch(g){console.warn("Analytics error:",g)}const{user:b}=await rl(r,n);b&&e("/")}catch(b){console.error("Login error:",b),c(b.message||"登入失敗")}finally{u(!1)}};return o.jsxs("section",{className:"mx-auto mt-8 max-w-md rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[o.jsx("h1",{className:"mb-4 text-xl font-semibold",children:"登入"}),a&&o.jsx("div",{className:"mb-4 rounded-[var(--r-md)] bg-red-50 border border-red-200 p-3 text-red-600 text-sm",children:a}),o.jsxs("form",{onSubmit:h,className:"space-y-3",children:[o.jsx("input",{id:"login-email",name:"email",className:"w-full rounded-[var(--r-md)] border border-[var(--border-default)] p-2",type:"email",placeholder:"Email","aria-label":"Email",value:r,onChange:m=>s(m.target.value),required:!0}),o.jsx("input",{id:"login-password",name:"password",className:"w-full rounded-[var(--r-md)] border border-[var(--border-default)] p-2",type:"password",placeholder:"密碼","aria-label":"密碼",value:n,onChange:m=>i(m.target.value),required:!0}),o.jsx("button",{type:"submit",disabled:l,className:"w-full rounded-[var(--r-pill)] bg-[var(--brand)] px-4 py-2 text-[var(--brand-fg)] disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:l?"登入中...":"登入"})]}),o.jsxs("div",{className:"mt-4 text-center text-sm text-[var(--text-secondary)]",children:["還沒有帳號？ ",o.jsx(On,{to:"/auth/register",className:"text-[var(--brand)] hover:underline",children:"立即註冊"})]})]})}function ol(){return o.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"社區牆"}),o.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"此頁為示意佈局，實作請接後端。"})]})}function il(){return o.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"推薦社區"}),o.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"依據您的偏好，為您推薦可能喜歡的社區。"})]})}function al(e,t,r){const s=t/12/100,n=r*12;return s===0?e/n:e*s/(1-Math.pow(1+s,-n))}const cl=()=>{const[e,t]=f.useState(1500),[r,s]=f.useState(30),[n,i]=f.useState(2.25),[a,c]=f.useState(20),[l,u]=f.useState(""),h=f.useMemo(()=>Math.max(0,e*(1-r/100)),[e,r]),m=f.useMemo(()=>Math.round(al(h*1e4,n,a)),[h,n,a]),b=3e3,g=f.useMemo(()=>typeof l!="number"||l<=0?null:Math.round((m+b)/l*100),[l,m]),j=()=>{const v=`概算（僅供參考）：
總價${e}萬，頭期${r}% → 貸款約${h.toFixed(0)}萬；${a}年利率${n}% → 月付約 ${m} 元；管理費約 ${b} 元。`+(g!==null?`
月負擔率約 ${g}%（含管理費）。`:"");navigator.clipboard.writeText(v).then(()=>le(ue.BudgetCopy,{}))},w=g===null?"這個數字僅供參考，別給自己太大壓力。":g>=50?"負擔率偏高了，先別急著決定；我們可以討論更有彈性的做法。":g>=35?"負擔率有點高，可再看看地點/年限的權衡。":"看起來在可接受範圍內，但仍建議保留彈性。";return o.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[o.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"預算規劃（Lite）"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8},children:[o.jsxs("label",{children:["總價(萬)",o.jsx("input",{type:"number",value:e,onChange:v=>t(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),o.jsxs("label",{children:["頭期(%)",o.jsx("input",{type:"number",value:r,onChange:v=>s(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),o.jsxs("label",{children:["利率(%)",o.jsx("input",{type:"number",value:n,onChange:v=>i(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),o.jsxs("label",{children:["年限",o.jsx("input",{type:"number",value:a,onChange:v=>c(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),o.jsxs("label",{children:["月收入(可選)",o.jsx("input",{type:"number",value:typeof l=="number"?l:"",onChange:v=>{const y=Number(v.target.value);u(Number.isFinite(y)?y:"")},style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]})]}),o.jsxs("div",{style:{marginTop:10,fontSize:14,color:"#0a2246"},children:["概算（僅供參考）：月付約 ",o.jsx("b",{children:m.toLocaleString()})," 元；貸款本金約 ",o.jsx("b",{children:h.toFixed(0)})," 萬。",g!==null&&o.jsxs(o.Fragment,{children:["　｜　月負擔率約 ",o.jsxs("b",{children:[g,"%"]}),"（含管理費）"]})]}),o.jsx("div",{style:{marginTop:8,color:"#6b7280"},children:w}),o.jsx("button",{onClick:j,style:{marginTop:8,padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"複製概算模板"})]})},ll=({onAdopt:e})=>{const[t,r]=f.useState(""),[s,n]=f.useState("agent"),[i,a]=f.useState("detail"),[c,l]=f.useState(null),[u,h]=f.useState(null),[m,b]=f.useState(!1),[g,j]=f.useState(!1),w=async()=>{const y=t.trim();if(y){b(!0);try{const S=(await Da(y,{audience:s,intent:i})).split(/\n+/).map($=>$.trim()).filter(Boolean),_=S.find($=>/^V1/.test($))||"",A=S.find($=>/^V2/.test($))||"";l(_.replace(/^V1[:：]\s?/,"")),h(A.replace(/^V2[:：]\s?/,"")),le(ue.RewriteGen,{audience:s,intent:i})}finally{b(!1)}}},v=y=>{e==null||e(y),j(!0),le(ue.RewriteAdopt,{audience:s,intent:i}),setTimeout(()=>j(!1),2500)};return o.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[o.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"禮貌改寫小幫手"}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[o.jsxs("label",{children:["對象",o.jsxs("select",{value:s,onChange:y=>n(y.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[o.jsx("option",{value:"agent",children:"仲介"}),o.jsx("option",{value:"owner",children:"屋主"})]})]}),o.jsxs("label",{children:["目的",o.jsxs("select",{value:i,onChange:y=>a(y.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[o.jsx("option",{value:"detail",children:"詢問細節"}),o.jsx("option",{value:"view",children:"預約看房"}),o.jsx("option",{value:"pet",children:"可否養寵物"}),o.jsx("option",{value:"price",children:"價格/議價"})]})]})]}),o.jsx("textarea",{rows:3,placeholder:"貼上你想發的訊息（我會根據對象/目的幫你潤飾）",value:t,onChange:y=>r(y.target.value),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),o.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:o.jsx("button",{onClick:w,disabled:m,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:m?"生成中…":"禮貌改寫"})}),(c||u)&&o.jsxs("div",{style:{marginTop:10,display:"grid",gap:8},children:[c&&o.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[o.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"版本一"}),o.jsx("div",{style:{marginBottom:6},children:c}),o.jsx("button",{onClick:()=>v(c),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"採用（複製/送出）"})]}),u&&o.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[o.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"版本二"}),o.jsx("div",{style:{marginBottom:6},children:u}),o.jsx("button",{onClick:()=>v(u),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"採用（複製/送出）"})]}),g&&o.jsx("div",{style:{color:"#16a34a"},children:"已準備好訊息，祝溝通順利 🤞"})]})]})},Po="mai-notes-v1";function ul(){try{const e=localStorage.getItem(Po);return e?JSON.parse(e):[]}catch{return[]}}function dl(e){localStorage.setItem(Po,JSON.stringify(e))}function Xr(e,t){const r=ul(),s={id:Math.random().toString(36).slice(2),createdAt:Date.now(),note:e,...t&&{echo:t}};return r.unshift(s),dl(r),s}const hl=()=>{const[e,t]=f.useState(""),[r,s]=f.useState(null),[n,i]=f.useState(!1),[a,c]=f.useState(!1),l=async()=>{const u=e.trim();if(u){i(!0);try{const h=await Fa(u);s(h),Xr(u,h),le(ue.NoteSaved,{})}catch{Xr(u)}finally{i(!1)}}};return o.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[o.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"收藏備註（感受）"}),o.jsx("textarea",{rows:3,placeholder:"寫下這間帶給你的感覺…",value:e,onChange:u=>t(u.target.value),onFocus:()=>c(!0),onBlur:()=>c(!1),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),a&&o.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:4},children:"慢慢寫，我在。"}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[o.jsx("button",{onClick:l,disabled:n,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:n?"生成中…":"存入便條（含回聲）"}),r&&o.jsxs("span",{style:{color:"#6b7280"},children:["AI 回聲：",r]})]})]})};function ml(e){const t=e.split(`
`).find(s=>s.trim().startsWith("#tags"));return t?t.replace(/^#tags\s*[:：]\s*/i,"").split(",").map(s=>s.trim()).filter(Boolean).slice(0,5):[]}const fl=()=>{const[e,t]=f.useState(""),[r,s]=f.useState(""),[n,i]=f.useState(""),[a,c]=f.useState(null),[l,u]=f.useState(!1),h=async()=>{u(!0);try{const b=await La(e,r,n);c(b);const g=ml(b);g.length&&Ca(g),le(ue.DebriefGen,{tags:g})}finally{u(!1)}},m=()=>{const b=`【看屋小結】
喜歡：${e}
困擾：${r}
下一步：${n}
---
${a??""}`;Xr(b),le(ue.DebriefSave,{})};return o.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[o.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"看屋後三問（Mini Debrief）"}),o.jsxs("div",{style:{display:"grid",gap:8},children:[o.jsx("input",{value:e,onChange:b=>t(b.target.value),placeholder:"第一直覺如何？（例：採光很好）",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),o.jsx("input",{value:r,onChange:b=>s(b.target.value),placeholder:"哪裡卡卡的？（例：廚房太小）",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),o.jsx("input",{value:n,onChange:b=>i(b.target.value),placeholder:"下一步想做什麼？（例：再看一間對比）",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}})]}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[o.jsx("button",{onClick:h,disabled:l,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:l?"整理中…":"生成 Must/Nice/Avoid + #tags"}),a&&o.jsx("button",{onClick:m,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"存到便條"})]}),a&&o.jsx("div",{style:{marginTop:10,whiteSpace:"pre-wrap",color:"#0a2246"},children:a})]})},pl=["持分","使用分區","公設比","地上權","都更","容積率"],Ys=({text:e})=>{const[t,r]=f.useState(!1),[s,n]=f.useState(""),[i,a]=f.useState(!1),c=async()=>{if(!s){a(!0);try{const u=await Za(e);n(u),le(ue.ELI5Open,{term:e})}finally{a(!1)}}};f.useEffect(()=>{const h=`mai-eli5-suggest-${new Date().toISOString().slice(0,10)}`;pl.some(b=>e.includes(b))&&!localStorage.getItem(h)&&(localStorage.setItem(h,"1"),r(!0),c())},[]);const l=async()=>{const u=!t;r(u),u&&await c()};return o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",position:"relative"},children:[o.jsx("button",{"aria-label":"白話解釋",onClick:l,style:{marginLeft:6,width:18,height:18,borderRadius:999,border:"1px solid #C9D5FF",background:"#F5F8FF",color:"#1749D7",fontSize:12,cursor:"pointer"},children:"?"}),t&&o.jsxs("div",{style:{position:"absolute",top:"120%",left:0,background:"#fff",border:"1px solid #E6ECFF",borderRadius:8,padding:10,width:280,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",zIndex:50},children:[o.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:6},children:"白話解釋（僅供參考，非法律意見）"}),o.jsx("div",{style:{whiteSpace:"pre-wrap"},children:i?"生成中…":s})]})]})};function gl(){return o.jsxs("section",{className:"mx-auto mt-8 max-w-container space-y-6 rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"物件詳情"}),o.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"示意頁。"}),o.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsx("h2",{className:"mb-3 text-lg font-medium",children:"房貸負擔試算"}),o.jsx(cl,{})]}),o.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsx("h2",{className:"mb-3 text-lg font-medium",children:"禮貌改寫訊息"}),o.jsx(ll,{})]}),o.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsx("h2",{className:"mb-3 text-lg font-medium",children:"看房筆記"}),o.jsx(hl,{})]}),o.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsx("h2",{className:"mb-3 text-lg font-medium",children:"看房心得"}),o.jsx(fl,{})]}),o.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsx("h2",{className:"mb-3 text-lg font-medium",children:"專有名詞解釋"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["這個物件的",o.jsx(Ys,{text:"容積率"})," 和",o.jsx(Ys,{text:"建蔽率"})," 都符合法規標準。"]})]})]})}function bl(){return o.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"安心保障"}),o.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"留痕追蹤 / 社區評分 / 成交週期"})]})}function xl(){return o.jsx("main",{className:"mx-auto max-w-container p-4 md:p-6",children:o.jsx(Ao,{})})}let Ne=class extends f.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.error(t);try{At("error_boundary","*",String(t.message||t))}catch{}}render(){return this.state.hasError?o.jsx("div",{className:"rounded-[var(--r-lg)] bg-white p-4 text-[var(--danger)] shadow-[var(--shadow-card)]",children:"區塊錯誤，請重試。"}):this.props.children}};const vl=f.createContext(null),yl=({children:e})=>{const[t,r]=f.useState(()=>localStorage.getItem("mai-mood-v1")||"neutral"),s=c=>{r(c),localStorage.setItem("mai-mood-v1",c),za(c),le(ue.MoodPick,{mood:c})},n=t==="stress"?"soothe":t==="rest"?"warm":"light",i=t==="stress"?2:t==="rest"?1:0,a=f.useMemo(()=>({mood:t,setMood:s,tone:n,throttleLevel:i}),[t]);return o.jsx(vl.Provider,{value:a,children:e})};function wl(){const[e,t]=f.useState(!1);f.useEffect(()=>{localStorage.getItem("cookie-consent")||t(!0)},[]);const r=()=>{localStorage.setItem("cookie-consent","true"),t(!1)};return e?o.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-gray-900 p-4 text-white shadow-lg md:p-6",children:o.jsxs("div",{className:"mx-auto flex max-w-container flex-col items-center justify-between gap-4 md:flex-row",children:[o.jsx("div",{className:"text-sm text-gray-300",children:"我們使用 Cookie 來改善您的瀏覽體驗並提供個人化內容。繼續瀏覽即表示您同意我們的隱私權政策。"}),o.jsx("div",{className:"flex gap-3",children:o.jsx("button",{onClick:r,className:"rounded-full bg-brand px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",children:"我同意"})})]})}):null}const _l=f.createContext(null),Ar={didCatch:!1,error:null};class jl extends f.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ar}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,s,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];(r=(s=this.props).onReset)===null||r===void 0||r.call(s,{args:i,reason:"imperative-api"}),this.setState(Ar)}}componentDidCatch(t,r){var s,n;(s=(n=this.props).onError)===null||s===void 0||s.call(n,t,r)}componentDidUpdate(t,r){const{didCatch:s}=this.state,{resetKeys:n}=this.props;if(s&&r.error!==null&&kl(t.resetKeys,n)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:n,prev:t.resetKeys,reason:"keys"}),this.setState(Ar)}}render(){const{children:t,fallbackRender:r,FallbackComponent:s,fallback:n}=this.props,{didCatch:i,error:a}=this.state;let c=t;if(i){const l={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(l);else if(s)c=f.createElement(s,l);else if(n!==void 0)c=n;else throw a}return f.createElement(_l.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},c)}}function kl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,s)=>!Object.is(r,t[s]))}const Sl="_primary_10s9u_154",Nl="_float_10s9u_1",Cl="_pulse_10s9u_1",zl="_selected_10s9u_210",El="_urgent_10s9u_288",Il="_shimmer_10s9u_1",p={"uag-page":"_uag-page_10s9u_26","uag-header":"_uag-header_10s9u_51","uag-header-inner":"_uag-header-inner_10s9u_58","uag-logo":"_uag-logo_10s9u_63","uag-logo-badge":"_uag-logo-badge_10s9u_64","uag-container":"_uag-container_10s9u_70","uag-grid":"_uag-grid_10s9u_71","k-span-2":"_k-span-2_10s9u_74","k-span-3":"_k-span-3_10s9u_75","k-span-4":"_k-span-4_10s9u_76","k-span-6":"_k-span-6_10s9u_77","uag-breadcrumb":"_uag-breadcrumb_10s9u_87","uag-badge--pro":"_uag-badge--pro_10s9u_101","uag-card":"_uag-card_10s9u_108","uag-card-header":"_uag-card-header_10s9u_122","uag-card-title":"_uag-card-title_10s9u_123","uag-card-sub":"_uag-card-sub_10s9u_128","uag-actions":"_uag-actions_10s9u_133","uag-btn":"_uag-btn_10s9u_144",primary:Sl,"uag-badge":"_uag-badge_10s9u_101","uag-badge--s":"_uag-badge--s_10s9u_169","uag-badge--a":"_uag-badge--a_10s9u_170","uag-cluster":"_uag-cluster_10s9u_173","uag-bubble":"_uag-bubble_10s9u_199",float:Nl,pulse:Cl,selected:zl,"uag-bubble-grade":"_uag-bubble-grade_10s9u_222","uag-bubble-label":"_uag-bubble-label_10s9u_227","uag-action-panel":"_uag-action-panel_10s9u_240","ap-head":"_ap-head_10s9u_247","ap-body":"_ap-body_10s9u_253","ap-stats-group":"_ap-stats-group_10s9u_262","ai-box":"_ai-box_10s9u_263","action-zone":"_action-zone_10s9u_264","ap-stat":"_ap-stat_10s9u_262",urgent:El,"btn-attack":"_btn-attack_10s9u_295",shimmer:Il,"monitor-table":"_monitor-table_10s9u_335","progress-bg":"_progress-bg_10s9u_358","progress-fill":"_progress-fill_10s9u_359","t-countdown":"_t-countdown_10s9u_360","listing-item":"_listing-item_10s9u_363","l-thumb":"_l-thumb_10s9u_369","l-title":"_l-title_10s9u_370","l-tags":"_l-tags_10s9u_371","l-tag":"_l-tag_10s9u_371","l-kpi":"_l-kpi_10s9u_373","feed-post":"_feed-post_10s9u_382","fp-title":"_fp-title_10s9u_384","fp-meta":"_fp-meta_10s9u_385","fp-body":"_fp-body_10s9u_386","mai-card":"_mai-card_10s9u_389","mai-head":"_mai-head_10s9u_403","mai-tag":"_mai-tag_10s9u_408","mai-title":"_mai-title_10s9u_409","mai-sub":"_mai-sub_10s9u_410","mai-body":"_mai-body_10s9u_411","mai-left":"_mai-left_10s9u_412","mai-price":"_mai-price_10s9u_413","mai-price-label":"_mai-price-label_10s9u_414","mai-price-value":"_mai-price-value_10s9u_415","mai-price-unit":"_mai-price-unit_10s9u_416","mai-stats":"_mai-stats_10s9u_417","mai-right":"_mai-right_10s9u_420","mai-thumb":"_mai-thumb_10s9u_421","mai-mini":"_mai-mini_10s9u_422","mai-actions":"_mai-actions_10s9u_424","mai-btn":"_mai-btn_10s9u_425","flow-stage":"_flow-stage_10s9u_445","uag-footer-bar":"_uag-footer-bar_10s9u_448"};function x(e,t,r){function s(c,l){var u;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(u=c._zod).traits??(u.traits=new Set),c._zod.traits.add(e),t(c,l);for(const h in a.prototype)h in c||Object.defineProperty(c,h,{value:a.prototype[h].bind(c)});c._zod.constr=a,c._zod.def=l}const n=(r==null?void 0:r.Parent)??Object;class i extends n{}Object.defineProperty(i,"name",{value:e});function a(c){var l;const u=r!=null&&r.Parent?new i:this;s(u,c),(l=u._zod).deferred??(l.deferred=[]);for(const h of u._zod.deferred)h();return u}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:c=>{var l,u;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(u=(l=c==null?void 0:c._zod)==null?void 0:l.traits)==null?void 0:u.has(e)}}),Object.defineProperty(a,"name",{value:e}),a}class bt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Oo extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Mo={};function lt(e){return Mo}function Rl(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,n])=>t.indexOf(+s)===-1).map(([s,n])=>n)}function es(e,t){return typeof t=="bigint"?t.toString():t}function ms(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function fs(e){return e==null}function ps(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Al(e,t){const r=(e.toString().split(".")[1]||"").length,s=t.toString();let n=(s.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(s)){const l=s.match(/\d?e-(\d?)/);l!=null&&l[1]&&(n=Number.parseInt(l[1]))}const i=r>n?r:n,a=Number.parseInt(e.toFixed(i).replace(".","")),c=Number.parseInt(t.toFixed(i).replace(".",""));return a%c/10**i}const Xs=Symbol("evaluating");function L(e,t,r){let s;Object.defineProperty(e,t,{get(){if(s!==Xs)return s===void 0&&(s=Xs,s=r()),s},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function dt(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ht(...e){const t={};for(const r of e){const s=Object.getOwnPropertyDescriptors(r);Object.assign(t,s)}return Object.defineProperties({},t)}function en(e){return JSON.stringify(e)}const Do="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function br(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Tl=ms(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ft(e){if(br(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(br(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Fo(e){return Ft(e)?{...e}:Array.isArray(e)?[...e]:e}const $l=new Set(["string","number","symbol"]);function _r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function We(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(s._zod.parent=e),s}function I(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Pl(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Ol={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ml(e,t){const r=e._zod.def,s=ht(e._zod.def,{get shape(){const n={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(n[i]=r.shape[i])}return dt(this,"shape",n),n},checks:[]});return We(e,s)}function Dl(e,t){const r=e._zod.def,s=ht(e._zod.def,{get shape(){const n={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete n[i]}return dt(this,"shape",n),n},checks:[]});return We(e,s)}function Fl(e,t){if(!Ft(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=ht(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return dt(this,"shape",i),i},checks:[]});return We(e,n)}function Zl(e,t){if(!Ft(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return dt(this,"shape",s),s},checks:e._zod.def.checks};return We(e,r)}function Ll(e,t){const r=ht(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return dt(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return We(e,r)}function Ul(e,t,r){const s=ht(t._zod.def,{get shape(){const n=t._zod.def.shape,i={...n};if(r)for(const a in r){if(!(a in n))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=e?new e({type:"optional",innerType:n[a]}):n[a])}else for(const a in n)i[a]=e?new e({type:"optional",innerType:n[a]}):n[a];return dt(this,"shape",i),i},checks:[]});return We(t,s)}function Bl(e,t,r){const s=ht(t._zod.def,{get shape(){const n=t._zod.def.shape,i={...n};if(r)for(const a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new e({type:"nonoptional",innerType:n[a]}))}else for(const a in n)i[a]=new e({type:"nonoptional",innerType:n[a]});return dt(this,"shape",i),i},checks:[]});return We(t,s)}function gt(e,t=0){var r;if(e.aborted===!0)return!0;for(let s=t;s<e.issues.length;s++)if(((r=e.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function Zo(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function ir(e){return typeof e=="string"?e:e==null?void 0:e.message}function ut(e,t,r){var n,i,a,c,l,u;const s={...e,path:e.path??[]};if(!e.message){const h=ir((a=(i=(n=e.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:a.call(i,e))??ir((c=t==null?void 0:t.error)==null?void 0:c.call(t,e))??ir((l=r.customError)==null?void 0:l.call(r,e))??ir((u=r.localeError)==null?void 0:u.call(r,e))??"Invalid input";s.message=h}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function gs(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Zt(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const Lo=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,es,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Uo=x("$ZodError",Lo),Bo=x("$ZodError",Lo,{Parent:Error});function Ql(e,t=r=>r.message){const r={},s=[];for(const n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):s.push(t(n));return{formErrors:s,fieldErrors:r}}function ql(e,t=r=>r.message){const r={_errors:[]},s=n=>{for(const i of n.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>s({issues:a}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let a=r,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(i))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(e),r}const bs=e=>(t,r,s,n)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new bt;if(a.issues.length){const c=new((n==null?void 0:n.Err)??e)(a.issues.map(l=>ut(l,i,lt())));throw Do(c,n==null?void 0:n.callee),c}return a.value},xs=e=>async(t,r,s,n)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const c=new((n==null?void 0:n.Err)??e)(a.issues.map(l=>ut(l,i,lt())));throw Do(c,n==null?void 0:n.callee),c}return a.value},jr=e=>(t,r,s)=>{const n=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},n);if(i instanceof Promise)throw new bt;return i.issues.length?{success:!1,error:new(e??Uo)(i.issues.map(a=>ut(a,n,lt())))}:{success:!0,data:i.value}},Wl=jr(Bo),kr=e=>async(t,r,s)=>{const n=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(a=>ut(a,n,lt())))}:{success:!0,data:i.value}},Vl=kr(Bo),Gl=e=>(t,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return bs(e)(t,r,n)},Kl=e=>(t,r,s)=>bs(e)(t,r,s),Hl=e=>async(t,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return xs(e)(t,r,n)},Jl=e=>async(t,r,s)=>xs(e)(t,r,s),Yl=e=>(t,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return jr(e)(t,r,n)},Xl=e=>(t,r,s)=>jr(e)(t,r,s),eu=e=>async(t,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return kr(e)(t,r,n)},tu=e=>async(t,r,s)=>kr(e)(t,r,s),ru=/^[cC][^\s-]{8,}$/,su=/^[0-9a-z]+$/,nu=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ou=/^[0-9a-vA-V]{20}$/,iu=/^[A-Za-z0-9]{27}$/,au=/^[a-zA-Z0-9_-]{21}$/,cu=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,lu=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,tn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,uu=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,du="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function hu(){return new RegExp(du,"u")}const mu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fu=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,pu=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gu=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bu=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Qo=/^[A-Za-z0-9_-]*$/,xu=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,vu=/^\+(?:[0-9]){6,14}[0-9]$/,qo="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",yu=new RegExp(`^${qo}$`);function Wo(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function wu(e){return new RegExp(`^${Wo(e)}$`)}function _u(e){const t=Wo({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${qo}T(?:${s})$`)}const ju=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},ku=/^-?\d+$/,Su=/^-?\d+(?:\.\d+)?/,Nu=/^null$/i,Cu=/^[^A-Z]*$/,zu=/^[^a-z]*$/,de=x("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Vo={number:"number",bigint:"bigint",object:"date"},Go=x("$ZodCheckLessThan",(e,t)=>{de.init(e,t);const r=Vo[typeof t.value];e._zod.onattach.push(s=>{const n=s._zod.bag,i=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:r,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ko=x("$ZodCheckGreaterThan",(e,t)=>{de.init(e,t);const r=Vo[typeof t.value];e._zod.onattach.push(s=>{const n=s._zod.bag,i=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:r,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Eu=x("$ZodCheckMultipleOf",(e,t)=>{de.init(e,t),e._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Al(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Iu=x("$ZodCheckNumberFormat",(e,t)=>{var a;de.init(e,t),t.format=t.format||"float64";const r=(a=t.format)==null?void 0:a.includes("int"),s=r?"int":"number",[n,i]=Ol[t.format];e._zod.onattach.push(c=>{const l=c._zod.bag;l.format=t.format,l.minimum=n,l.maximum=i,r&&(l.pattern=ku)}),e._zod.check=c=>{const l=c.value;if(r){if(!Number.isInteger(l)){c.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?c.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):c.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}l<n&&c.issues.push({origin:"number",input:l,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),l>i&&c.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),Ru=x("$ZodCheckMaxLength",(e,t)=>{var r;de.init(e,t),(r=e._zod.def).when??(r.when=s=>{const n=s.value;return!fs(n)&&n.length!==void 0}),e._zod.onattach.push(s=>{const n=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const n=s.value;if(n.length<=t.maximum)return;const a=gs(n);s.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Au=x("$ZodCheckMinLength",(e,t)=>{var r;de.init(e,t),(r=e._zod.def).when??(r.when=s=>{const n=s.value;return!fs(n)&&n.length!==void 0}),e._zod.onattach.push(s=>{const n=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const n=s.value;if(n.length>=t.minimum)return;const a=gs(n);s.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Tu=x("$ZodCheckLengthEquals",(e,t)=>{var r;de.init(e,t),(r=e._zod.def).when??(r.when=s=>{const n=s.value;return!fs(n)&&n.length!==void 0}),e._zod.onattach.push(s=>{const n=s._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=s=>{const n=s.value,i=n.length;if(i===t.length)return;const a=gs(n),c=i>t.length;s.issues.push({origin:a,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Sr=x("$ZodCheckStringFormat",(e,t)=>{var r,s;de.init(e,t),e._zod.onattach.push(n=>{const i=n._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),$u=x("$ZodCheckRegex",(e,t)=>{Sr.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Pu=x("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Cu),Sr.init(e,t)}),Ou=x("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=zu),Sr.init(e,t)}),Mu=x("$ZodCheckIncludes",(e,t)=>{de.init(e,t);const r=_r(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Du=x("$ZodCheckStartsWith",(e,t)=>{de.init(e,t);const r=new RegExp(`^${_r(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),Fu=x("$ZodCheckEndsWith",(e,t)=>{de.init(e,t);const r=new RegExp(`.*${_r(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),Zu=x("$ZodCheckOverwrite",(e,t)=>{de.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Lu{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(a=>a),n=Math.min(...s.map(a=>a.length-a.trimStart().length)),i=s.map(a=>a.slice(n)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const t=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,n.join(`
`))}}const Uu={major:4,minor:1,patch:12},V=x("$ZodType",(e,t)=>{var n;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Uu;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const a of i._zod.onattach)a(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),(n=e._zod.deferred)==null||n.push(()=>{e._zod.run=e._zod.parse});else{const i=(c,l,u)=>{let h=gt(c),m;for(const b of l){if(b._zod.def.when){if(!b._zod.def.when(c))continue}else if(h)continue;const g=c.issues.length,j=b._zod.check(c);if(j instanceof Promise&&(u==null?void 0:u.async)===!1)throw new bt;if(m||j instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await j,c.issues.length!==g&&(h||(h=gt(c,g)))});else{if(c.issues.length===g)continue;h||(h=gt(c,g))}}return m?m.then(()=>c):c},a=(c,l,u)=>{if(gt(c))return c.aborted=!0,c;const h=i(l,s,u);if(h instanceof Promise){if(u.async===!1)throw new bt;return h.then(m=>e._zod.parse(m,u))}return e._zod.parse(h,u)};e._zod.run=(c,l)=>{if(l.skipChecks)return e._zod.parse(c,l);if(l.direction==="backward"){const h=e._zod.parse({value:c.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(m=>a(m,c,l)):a(h,c,l)}const u=e._zod.parse(c,l);if(u instanceof Promise){if(l.async===!1)throw new bt;return u.then(h=>i(h,s,l))}return i(u,s,l)}}e["~standard"]={validate:i=>{var a;try{const c=Wl(e,i);return c.success?{value:c.data}:{issues:(a=c.error)==null?void 0:a.issues}}catch{return Vl(e,i).then(l=>{var u;return l.success?{value:l.data}:{issues:(u=l.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),vs=x("$ZodString",(e,t)=>{var r;V.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??ju(e._zod.bag),e._zod.parse=(s,n)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),B=x("$ZodStringFormat",(e,t)=>{Sr.init(e,t),vs.init(e,t)}),Bu=x("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=lu),B.init(e,t)}),Qu=x("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=tn(s))}else t.pattern??(t.pattern=tn());B.init(e,t)}),qu=x("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=uu),B.init(e,t)}),Wu=x("$ZodURL",(e,t)=>{B.init(e,t),e._zod.check=r=>{try{const s=r.value.trim(),n=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:xu.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=n.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Vu=x("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=hu()),B.init(e,t)}),Gu=x("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=au),B.init(e,t)}),Ku=x("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ru),B.init(e,t)}),Hu=x("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=su),B.init(e,t)}),Ju=x("$ZodULID",(e,t)=>{t.pattern??(t.pattern=nu),B.init(e,t)}),Yu=x("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ou),B.init(e,t)}),Xu=x("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=iu),B.init(e,t)}),ed=x("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=_u(t)),B.init(e,t)}),td=x("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=yu),B.init(e,t)}),rd=x("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=wu(t)),B.init(e,t)}),sd=x("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=cu),B.init(e,t)}),nd=x("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=mu),B.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),od=x("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=fu),B.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),id=x("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=pu),B.init(e,t)}),ad=x("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=gu),B.init(e,t),e._zod.check=r=>{const s=r.value.split("/");try{if(s.length!==2)throw new Error;const[n,i]=s;if(!i)throw new Error;const a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Ho(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const cd=x("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=bu),B.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Ho(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function ld(e){if(!Qo.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Ho(r)}const ud=x("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Qo),B.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{ld(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),dd=x("$ZodE164",(e,t)=>{t.pattern??(t.pattern=vu),B.init(e,t)});function hd(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const n=JSON.parse(atob(s));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch{return!1}}const md=x("$ZodJWT",(e,t)=>{B.init(e,t),e._zod.check=r=>{hd(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Jo=x("$ZodNumber",(e,t)=>{V.init(e,t),e._zod.pattern=e._zod.bag.pattern??Su,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;const i=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...i?{received:i}:{}}),r}}),fd=x("$ZodNumber",(e,t)=>{Iu.init(e,t),Jo.init(e,t)}),pd=x("$ZodNull",(e,t)=>{V.init(e,t),e._zod.pattern=Nu,e._zod.values=new Set([null]),e._zod.parse=(r,s)=>{const n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),r}}),gd=x("$ZodUnknown",(e,t)=>{V.init(e,t),e._zod.parse=r=>r}),bd=x("$ZodNever",(e,t)=>{V.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function rn(e,t,r){e.issues.length&&t.issues.push(...Zo(r,e.issues)),t.value[r]=e.value}const xd=x("$ZodArray",(e,t)=>{V.init(e,t),e._zod.parse=(r,s)=>{const n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);const i=[];for(let a=0;a<n.length;a++){const c=n[a],l=t.element._zod.run({value:c,issues:[]},s);l instanceof Promise?i.push(l.then(u=>rn(u,r,a))):rn(l,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function xr(e,t,r,s){e.issues.length&&t.issues.push(...Zo(r,e.issues)),e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}function Yo(e){var s,n,i,a;const t=Object.keys(e.shape);for(const c of t)if(!((a=(i=(n=(s=e.shape)==null?void 0:s[c])==null?void 0:n._zod)==null?void 0:i.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${c}": expected a Zod schema`);const r=Pl(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function Xo(e,t,r,s,n,i){const a=[],c=n.keySet,l=n.catchall._zod,u=l.def.type;for(const h of Object.keys(t)){if(c.has(h))continue;if(u==="never"){a.push(h);continue}const m=l.run({value:t[h],issues:[]},s);m instanceof Promise?e.push(m.then(b=>xr(b,r,h,t))):xr(m,r,h,t)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const vd=x("$ZodObject",(e,t)=>{V.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const l={...c};return Object.defineProperty(t,"shape",{value:l}),l}})}const s=ms(()=>Yo(t));L(e._zod,"propValues",()=>{const c=t.shape,l={};for(const u in c){const h=c[u]._zod;if(h.values){l[u]??(l[u]=new Set);for(const m of h.values)l[u].add(m)}}return l});const n=br,i=t.catchall;let a;e._zod.parse=(c,l)=>{a??(a=s.value);const u=c.value;if(!n(u))return c.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),c;c.value={};const h=[],m=a.shape;for(const b of a.keys){const j=m[b]._zod.run({value:u[b],issues:[]},l);j instanceof Promise?h.push(j.then(w=>xr(w,c,b,u))):xr(j,c,b,u)}return i?Xo(h,u,c,l,s.value,e):h.length?Promise.all(h).then(()=>c):c}}),yd=x("$ZodObjectJIT",(e,t)=>{vd.init(e,t);const r=e._zod.parse,s=ms(()=>Yo(t)),n=b=>{const g=new Lu(["shape","payload","ctx"]),j=s.value,w=S=>{const _=en(S);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};g.write("const input = payload.value;");const v=Object.create(null);let y=0;for(const S of j.keys)v[S]=`key_${y++}`;g.write("const newResult = {};");for(const S of j.keys){const _=v[S],A=en(S);g.write(`const ${_} = ${w(S)};`),g.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${A}, ...iss.path] : [${A}]
          })));
        }
        
        
        if (${_}.value === undefined) {
          if (${A} in input) {
            newResult[${A}] = undefined;
          }
        } else {
          newResult[${A}] = ${_}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const R=g.compile();return(S,_)=>R(b,S,_)};let i;const a=br,c=!Mo.jitless,u=c&&Tl.value,h=t.catchall;let m;e._zod.parse=(b,g)=>{m??(m=s.value);const j=b.value;return a(j)?c&&u&&(g==null?void 0:g.async)===!1&&g.jitless!==!0?(i||(i=n(t.shape)),b=i(b,g),h?Xo([],j,b,g,m,e):b):r(b,g):(b.issues.push({expected:"object",code:"invalid_type",input:j,inst:e}),b)}});function sn(e,t,r,s){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const n=e.filter(i=>!gt(i));return n.length===1?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(a=>ut(a,s,lt())))}),t)}const wd=x("$ZodUnion",(e,t)=>{V.init(e,t),L(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),L(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),L(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),L(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${n.map(i=>ps(i.source)).join("|")})$`)}});const r=t.options.length===1,s=t.options[0]._zod.run;e._zod.parse=(n,i)=>{if(r)return s(n,i);let a=!1;const c=[];for(const l of t.options){const u=l._zod.run({value:n.value,issues:[]},i);if(u instanceof Promise)c.push(u),a=!0;else{if(u.issues.length===0)return u;c.push(u)}}return a?Promise.all(c).then(l=>sn(l,n,e,i)):sn(c,n,e,i)}}),_d=x("$ZodIntersection",(e,t)=>{V.init(e,t),e._zod.parse=(r,s)=>{const n=r.value,i=t.left._zod.run({value:n,issues:[]},s),a=t.right._zod.run({value:n,issues:[]},s);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,u])=>nn(r,l,u)):nn(r,i,a)}});function ts(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ft(e)&&Ft(t)){const r=Object.keys(t),s=Object.keys(e).filter(i=>r.indexOf(i)!==-1),n={...e,...t};for(const i of s){const a=ts(e[i],t[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};n[i]=a.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const n=e[s],i=t[s],a=ts(n,i);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function nn(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),gt(e))return e;const s=ts(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const jd=x("$ZodEnum",(e,t)=>{V.init(e,t);const r=Rl(t.entries),s=new Set(r);e._zod.values=s,e._zod.pattern=new RegExp(`^(${r.filter(n=>$l.has(typeof n)).map(n=>typeof n=="string"?_r(n):n.toString()).join("|")})$`),e._zod.parse=(n,i)=>{const a=n.value;return s.has(a)||n.issues.push({code:"invalid_value",values:r,input:a,inst:e}),n}}),kd=x("$ZodTransform",(e,t)=>{V.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new Oo(e.constructor.name);const n=t.transform(r.value,r);if(s.async)return(n instanceof Promise?n:Promise.resolve(n)).then(a=>(r.value=a,r));if(n instanceof Promise)throw new bt;return r.value=n,r}});function on(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Sd=x("$ZodOptional",(e,t)=>{V.init(e,t),e._zod.optin="optional",e._zod.optout="optional",L(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),L(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ps(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>{if(t.innerType._zod.optin==="optional"){const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>on(i,r.value)):on(n,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,s)}}),Nd=x("$ZodNullable",(e,t)=>{V.init(e,t),L(e._zod,"optin",()=>t.innerType._zod.optin),L(e._zod,"optout",()=>t.innerType._zod.optout),L(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ps(r.source)}|null)$`):void 0}),L(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),Cd=x("$ZodDefault",(e,t)=>{V.init(e,t),e._zod.optin="optional",L(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);if(r.value===void 0)return r.value=t.defaultValue,r;const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>an(i,t)):an(n,t)}});function an(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const zd=x("$ZodPrefault",(e,t)=>{V.init(e,t),e._zod.optin="optional",L(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),Ed=x("$ZodNonOptional",(e,t)=>{V.init(e,t),L(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>cn(i,e)):cn(n,e)}});function cn(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Id=x("$ZodCatch",(e,t)=>{V.init(e,t),L(e._zod,"optin",()=>t.innerType._zod.optin),L(e._zod,"optout",()=>t.innerType._zod.optout),L(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(a=>ut(a,s,lt()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=t.catchValue({...r,error:{issues:n.issues.map(i=>ut(i,s,lt()))},input:r.value}),r.issues=[]),r)}}),Rd=x("$ZodPipe",(e,t)=>{V.init(e,t),L(e._zod,"values",()=>t.in._zod.values),L(e._zod,"optin",()=>t.in._zod.optin),L(e._zod,"optout",()=>t.out._zod.optout),L(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{if(s.direction==="backward"){const i=t.out._zod.run(r,s);return i instanceof Promise?i.then(a=>ar(a,t.in,s)):ar(i,t.in,s)}const n=t.in._zod.run(r,s);return n instanceof Promise?n.then(i=>ar(i,t.out,s)):ar(n,t.out,s)}});function ar(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Ad=x("$ZodReadonly",(e,t)=>{V.init(e,t),L(e._zod,"propValues",()=>t.innerType._zod.propValues),L(e._zod,"values",()=>t.innerType._zod.values),L(e._zod,"optin",()=>t.innerType._zod.optin),L(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(ln):ln(n)}});function ln(e){return e.value=Object.freeze(e.value),e}const Td=x("$ZodCustom",(e,t)=>{de.init(e,t),V.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,n=t.fn(s);if(n instanceof Promise)return n.then(i=>un(i,r,s,e));un(n,r,s,e)}});function un(e,t,r,s){if(!e){const n={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(n.params=s._zod.def.params),t.issues.push(Zt(n))}}class $d{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const n={...s,...this._map.get(t)};return Object.keys(n).length?n:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Pd(){return new $d}const cr=Pd();function Od(e,t){return new e({type:"string",...I(t)})}function Md(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...I(t)})}function dn(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...I(t)})}function Dd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...I(t)})}function Fd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...I(t)})}function Zd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...I(t)})}function Ld(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...I(t)})}function Ud(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...I(t)})}function Bd(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...I(t)})}function Qd(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...I(t)})}function qd(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...I(t)})}function Wd(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...I(t)})}function Vd(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...I(t)})}function Gd(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...I(t)})}function Kd(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...I(t)})}function Hd(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...I(t)})}function Jd(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...I(t)})}function Yd(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...I(t)})}function Xd(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...I(t)})}function eh(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...I(t)})}function th(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...I(t)})}function rh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...I(t)})}function sh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...I(t)})}function nh(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...I(t)})}function oh(e,t){return new e({type:"string",format:"date",check:"string_format",...I(t)})}function ih(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...I(t)})}function ah(e,t){return new e({type:"string",format:"duration",check:"string_format",...I(t)})}function ch(e,t){return new e({type:"number",checks:[],...I(t)})}function lh(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...I(t)})}function uh(e,t){return new e({type:"null",...I(t)})}function dh(e){return new e({type:"unknown"})}function hh(e,t){return new e({type:"never",...I(t)})}function hn(e,t){return new Go({check:"less_than",...I(t),value:e,inclusive:!1})}function Tr(e,t){return new Go({check:"less_than",...I(t),value:e,inclusive:!0})}function mn(e,t){return new Ko({check:"greater_than",...I(t),value:e,inclusive:!1})}function $r(e,t){return new Ko({check:"greater_than",...I(t),value:e,inclusive:!0})}function fn(e,t){return new Eu({check:"multiple_of",...I(t),value:e})}function ei(e,t){return new Ru({check:"max_length",...I(t),maximum:e})}function vr(e,t){return new Au({check:"min_length",...I(t),minimum:e})}function ti(e,t){return new Tu({check:"length_equals",...I(t),length:e})}function mh(e,t){return new $u({check:"string_format",format:"regex",...I(t),pattern:e})}function fh(e){return new Pu({check:"string_format",format:"lowercase",...I(e)})}function ph(e){return new Ou({check:"string_format",format:"uppercase",...I(e)})}function gh(e,t){return new Mu({check:"string_format",format:"includes",...I(t),includes:e})}function bh(e,t){return new Du({check:"string_format",format:"starts_with",...I(t),prefix:e})}function xh(e,t){return new Fu({check:"string_format",format:"ends_with",...I(t),suffix:e})}function Kt(e){return new Zu({check:"overwrite",tx:e})}function vh(e){return Kt(t=>t.normalize(e))}function yh(){return Kt(e=>e.trim())}function wh(){return Kt(e=>e.toLowerCase())}function _h(){return Kt(e=>e.toUpperCase())}function jh(e,t,r){return new e({type:"array",element:t,...I(r)})}function kh(e,t,r){return new e({type:"custom",check:"custom",fn:t,...I(r)})}function Sh(e){const t=Nh(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Zt(s,r.value,t._zod.def));else{const n=s;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(Zt(n))}},e(r.value,r)));return t}function Nh(e,t){const r=new de({check:"custom",...I(t)});return r._zod.check=e,r}const Ch=x("ZodISODateTime",(e,t)=>{ed.init(e,t),Q.init(e,t)});function zh(e){return nh(Ch,e)}const Eh=x("ZodISODate",(e,t)=>{td.init(e,t),Q.init(e,t)});function Ih(e){return oh(Eh,e)}const Rh=x("ZodISOTime",(e,t)=>{rd.init(e,t),Q.init(e,t)});function Ah(e){return ih(Rh,e)}const Th=x("ZodISODuration",(e,t)=>{sd.init(e,t),Q.init(e,t)});function $h(e){return ah(Th,e)}const Ph=(e,t)=>{Uo.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ql(e,r)},flatten:{value:r=>Ql(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,es,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,es,2)}},isEmpty:{get(){return e.issues.length===0}}})},pe=x("ZodError",Ph,{Parent:Error}),Oh=bs(pe),Mh=xs(pe),Dh=jr(pe),Fh=kr(pe),Zh=Gl(pe),Lh=Kl(pe),Uh=Hl(pe),Bh=Jl(pe),Qh=Yl(pe),qh=Xl(pe),Wh=eu(pe),Vh=tu(pe),G=x("ZodType",(e,t)=>(V.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(ht(t,{checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),e.clone=(r,s)=>We(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>Oh(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>Dh(e,r,s),e.parseAsync=async(r,s)=>Mh(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>Fh(e,r,s),e.spa=e.safeParseAsync,e.encode=(r,s)=>Zh(e,r,s),e.decode=(r,s)=>Lh(e,r,s),e.encodeAsync=async(r,s)=>Uh(e,r,s),e.decodeAsync=async(r,s)=>Bh(e,r,s),e.safeEncode=(r,s)=>Qh(e,r,s),e.safeDecode=(r,s)=>qh(e,r,s),e.safeEncodeAsync=async(r,s)=>Wh(e,r,s),e.safeDecodeAsync=async(r,s)=>Vh(e,r,s),e.refine=(r,s)=>e.check(Mm(r,s)),e.superRefine=r=>e.check(Dm(r)),e.overwrite=r=>e.check(Kt(r)),e.optional=()=>xn(e),e.nullable=()=>vn(e),e.nullish=()=>xn(vn(e)),e.nonoptional=r=>Im(e,r),e.array=()=>Mt(e),e.or=r=>ni([e,r]),e.and=r=>_m(e,r),e.transform=r=>yn(e,km(r)),e.default=r=>Cm(e,r),e.prefault=r=>Em(e,r),e.catch=r=>Am(e,r),e.pipe=r=>yn(e,r),e.readonly=()=>Pm(e),e.describe=r=>{const s=e.clone();return cr.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){var r;return(r=cr.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return cr.get(e);const s=e.clone();return cr.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ri=x("_ZodString",(e,t)=>{vs.init(e,t),G.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(mh(...s)),e.includes=(...s)=>e.check(gh(...s)),e.startsWith=(...s)=>e.check(bh(...s)),e.endsWith=(...s)=>e.check(xh(...s)),e.min=(...s)=>e.check(vr(...s)),e.max=(...s)=>e.check(ei(...s)),e.length=(...s)=>e.check(ti(...s)),e.nonempty=(...s)=>e.check(vr(1,...s)),e.lowercase=s=>e.check(fh(s)),e.uppercase=s=>e.check(ph(s)),e.trim=()=>e.check(yh()),e.normalize=(...s)=>e.check(vh(...s)),e.toLowerCase=()=>e.check(wh()),e.toUpperCase=()=>e.check(_h())}),Gh=x("ZodString",(e,t)=>{vs.init(e,t),ri.init(e,t),e.email=r=>e.check(Md(Kh,r)),e.url=r=>e.check(Ud(Hh,r)),e.jwt=r=>e.check(sh(dm,r)),e.emoji=r=>e.check(Bd(Jh,r)),e.guid=r=>e.check(dn(pn,r)),e.uuid=r=>e.check(Dd(lr,r)),e.uuidv4=r=>e.check(Fd(lr,r)),e.uuidv6=r=>e.check(Zd(lr,r)),e.uuidv7=r=>e.check(Ld(lr,r)),e.nanoid=r=>e.check(Qd(Yh,r)),e.guid=r=>e.check(dn(pn,r)),e.cuid=r=>e.check(qd(Xh,r)),e.cuid2=r=>e.check(Wd(em,r)),e.ulid=r=>e.check(Vd(tm,r)),e.base64=r=>e.check(eh(cm,r)),e.base64url=r=>e.check(th(lm,r)),e.xid=r=>e.check(Gd(rm,r)),e.ksuid=r=>e.check(Kd(sm,r)),e.ipv4=r=>e.check(Hd(nm,r)),e.ipv6=r=>e.check(Jd(om,r)),e.cidrv4=r=>e.check(Yd(im,r)),e.cidrv6=r=>e.check(Xd(am,r)),e.e164=r=>e.check(rh(um,r)),e.datetime=r=>e.check(zh(r)),e.date=r=>e.check(Ih(r)),e.time=r=>e.check(Ah(r)),e.duration=r=>e.check($h(r))});function re(e){return Od(Gh,e)}const Q=x("ZodStringFormat",(e,t)=>{B.init(e,t),ri.init(e,t)}),Kh=x("ZodEmail",(e,t)=>{qu.init(e,t),Q.init(e,t)}),pn=x("ZodGUID",(e,t)=>{Bu.init(e,t),Q.init(e,t)}),lr=x("ZodUUID",(e,t)=>{Qu.init(e,t),Q.init(e,t)}),Hh=x("ZodURL",(e,t)=>{Wu.init(e,t),Q.init(e,t)}),Jh=x("ZodEmoji",(e,t)=>{Vu.init(e,t),Q.init(e,t)}),Yh=x("ZodNanoID",(e,t)=>{Gu.init(e,t),Q.init(e,t)}),Xh=x("ZodCUID",(e,t)=>{Ku.init(e,t),Q.init(e,t)}),em=x("ZodCUID2",(e,t)=>{Hu.init(e,t),Q.init(e,t)}),tm=x("ZodULID",(e,t)=>{Ju.init(e,t),Q.init(e,t)}),rm=x("ZodXID",(e,t)=>{Yu.init(e,t),Q.init(e,t)}),sm=x("ZodKSUID",(e,t)=>{Xu.init(e,t),Q.init(e,t)}),nm=x("ZodIPv4",(e,t)=>{nd.init(e,t),Q.init(e,t)}),om=x("ZodIPv6",(e,t)=>{od.init(e,t),Q.init(e,t)}),im=x("ZodCIDRv4",(e,t)=>{id.init(e,t),Q.init(e,t)}),am=x("ZodCIDRv6",(e,t)=>{ad.init(e,t),Q.init(e,t)}),cm=x("ZodBase64",(e,t)=>{cd.init(e,t),Q.init(e,t)}),lm=x("ZodBase64URL",(e,t)=>{ud.init(e,t),Q.init(e,t)}),um=x("ZodE164",(e,t)=>{dd.init(e,t),Q.init(e,t)}),dm=x("ZodJWT",(e,t)=>{md.init(e,t),Q.init(e,t)}),si=x("ZodNumber",(e,t)=>{Jo.init(e,t),G.init(e,t),e.gt=(s,n)=>e.check(mn(s,n)),e.gte=(s,n)=>e.check($r(s,n)),e.min=(s,n)=>e.check($r(s,n)),e.lt=(s,n)=>e.check(hn(s,n)),e.lte=(s,n)=>e.check(Tr(s,n)),e.max=(s,n)=>e.check(Tr(s,n)),e.int=s=>e.check(gn(s)),e.safe=s=>e.check(gn(s)),e.positive=s=>e.check(mn(0,s)),e.nonnegative=s=>e.check($r(0,s)),e.negative=s=>e.check(hn(0,s)),e.nonpositive=s=>e.check(Tr(0,s)),e.multipleOf=(s,n)=>e.check(fn(s,n)),e.step=(s,n)=>e.check(fn(s,n)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function te(e){return ch(si,e)}const hm=x("ZodNumberFormat",(e,t)=>{fd.init(e,t),si.init(e,t)});function gn(e){return lh(hm,e)}const mm=x("ZodNull",(e,t)=>{pd.init(e,t),G.init(e,t)});function fm(e){return uh(mm,e)}const pm=x("ZodUnknown",(e,t)=>{gd.init(e,t),G.init(e,t)});function bn(){return dh(pm)}const gm=x("ZodNever",(e,t)=>{bd.init(e,t),G.init(e,t)});function bm(e){return hh(gm,e)}const xm=x("ZodArray",(e,t)=>{xd.init(e,t),G.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(vr(r,s)),e.nonempty=r=>e.check(vr(1,r)),e.max=(r,s)=>e.check(ei(r,s)),e.length=(r,s)=>e.check(ti(r,s)),e.unwrap=()=>e.element});function Mt(e,t){return jh(xm,e,t)}const vm=x("ZodObject",(e,t)=>{yd.init(e,t),G.init(e,t),L(e,"shape",()=>t.shape),e.keyof=()=>ys(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:bn()}),e.loose=()=>e.clone({...e._zod.def,catchall:bn()}),e.strict=()=>e.clone({...e._zod.def,catchall:bm()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Fl(e,r),e.safeExtend=r=>Zl(e,r),e.merge=r=>Ll(e,r),e.pick=r=>Ml(e,r),e.omit=r=>Dl(e,r),e.partial=(...r)=>Ul(oi,e,r[0]),e.required=(...r)=>Bl(ii,e,r[0])});function It(e,t){const r={type:"object",shape:e??{},...I(t)};return new vm(r)}const ym=x("ZodUnion",(e,t)=>{wd.init(e,t),G.init(e,t),e.options=t.options});function ni(e,t){return new ym({type:"union",options:e,...I(t)})}const wm=x("ZodIntersection",(e,t)=>{_d.init(e,t),G.init(e,t)});function _m(e,t){return new wm({type:"intersection",left:e,right:t})}const rs=x("ZodEnum",(e,t)=>{jd.init(e,t),G.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,n)=>{const i={};for(const a of s)if(r.has(a))i[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new rs({...t,checks:[],...I(n),entries:i})},e.exclude=(s,n)=>{const i={...t.entries};for(const a of s)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new rs({...t,checks:[],...I(n),entries:i})}});function ys(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new rs({type:"enum",entries:r,...I(t)})}const jm=x("ZodTransform",(e,t)=>{kd.init(e,t),G.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new Oo(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Zt(i,r.value,t));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),r.issues.push(Zt(a))}};const n=t.transform(r.value,r);return n instanceof Promise?n.then(i=>(r.value=i,r)):(r.value=n,r)}});function km(e){return new jm({type:"transform",transform:e})}const oi=x("ZodOptional",(e,t)=>{Sd.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xn(e){return new oi({type:"optional",innerType:e})}const Sm=x("ZodNullable",(e,t)=>{Nd.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vn(e){return new Sm({type:"nullable",innerType:e})}const Nm=x("ZodDefault",(e,t)=>{Cd.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Cm(e,t){return new Nm({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Fo(t)}})}const zm=x("ZodPrefault",(e,t)=>{zd.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Em(e,t){return new zm({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Fo(t)}})}const ii=x("ZodNonOptional",(e,t)=>{Ed.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Im(e,t){return new ii({type:"nonoptional",innerType:e,...I(t)})}const Rm=x("ZodCatch",(e,t)=>{Id.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Am(e,t){return new Rm({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Tm=x("ZodPipe",(e,t)=>{Rd.init(e,t),G.init(e,t),e.in=t.in,e.out=t.out});function yn(e,t){return new Tm({type:"pipe",in:e,out:t})}const $m=x("ZodReadonly",(e,t)=>{Ad.init(e,t),G.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Pm(e){return new $m({type:"readonly",innerType:e})}const Om=x("ZodCustom",(e,t)=>{Td.init(e,t),G.init(e,t)});function Mm(e,t={}){return kh(Om,e,t)}function Dm(e){return Sh(e)}const Fm=ys(["S","A","B","C","F"]),Zm=ys(["new","purchased"]),Lm=It({id:re(),name:re(),grade:Fm,intent:te(),prop:re(),visit:te(),price:te(),status:Zm,purchased_at:ni([re(),te(),fm()]).optional(),purchased_by:re().nullable().optional(),transaction_hash:re().nullable().optional(),ai:re(),remaining_hours:te().nullable().optional(),x:te().optional(),y:te().optional(),created_at:re().optional()}).passthrough(),ai=Lm.extend({remainingHours:te().optional()}),ci=It({title:re(),tags:Mt(re()).optional().nullable(),view_count:te().optional(),click_count:te().optional(),fav_count:te().optional(),thumb_color:re().optional(),view:te().optional(),click:te().optional(),fav:te().optional(),thumbColor:re().optional()}).passthrough(),li=It({title:re(),meta:re(),body:re(),created_at:re().optional()}).passthrough(),ui=It({points:te(),quota:It({s:te(),a:te()})});It({user:ui,leads:Mt(ai),listings:Mt(ci),feed:Mt(li)});const wn={TABLET:1024},ws={S:120,A:72,B:336,C:336,F:336},Um=(e,t)=>{if(!e)return 0;const r=ws[t]||336,s=new Date(e).getTime(),n=(Date.now()-s)/(1e3*60*60);return Math.max(0,Math.min(r,r-n))},Bm=(e,t,r,s)=>{const n={points:e.points,quota:{s:e.quota_s,a:e.quota_a}},i=ui.safeParse(n);if(!i.success)throw console.error("Critical: User Data Validation Failed",i.error),new Error("Failed to load user profile");const a=t.map(u=>{let h=u.remaining_hours!=null?Number(u.remaining_hours):null;return h==null&&u.purchased_at&&u.status==="purchased"&&(h=Um(u.purchased_at,u.grade)),{...u,grade:u.grade,status:u.status,...h!=null?{remainingHours:h}:{}}}).filter(u=>{const h=ai.safeParse(u);return h.success?!0:(console.warn(`Skipping invalid lead (${u.id}):`,h.error.flatten()),!1)}),c=r.map(u=>({...u,title:u.title,tags:u.tags??[],view:u.view_count??0,click:u.click_count??0,fav:u.fav_count??0,thumbColor:u.thumb_color??"#e5e7eb"})).filter(u=>{const h=ci.safeParse(u);return h.success?!0:(console.warn("Skipping invalid listing:",h.error.flatten()),!1)}),l=s.filter(u=>{const h=li.safeParse(u);return h.success?!0:(console.warn("Skipping invalid feed post:",h.error.flatten()),!1)});return{user:i.data,leads:a,listings:c,feed:l}};class _n{static async fetchAppData(t){const[r,s,n,i]=await Promise.all([Ae.from("users").select("points, quota_s, quota_a").single(),Ae.from("leads").select("*"),Ae.from("listings").select("*").eq("agent_id",t),Ae.from("feed").select("*").order("created_at",{ascending:!1}).limit(5)]);if(r.error)throw r.error;if(s.error)throw s.error;if(n.error)throw n.error;if(i.error)throw i.error;return Bm(r.data,s.data,n.data,i.data)}static async purchaseLead(t,r,s,n){const{error:i}=await Ae.rpc("purchase_lead",{p_user_id:t,p_lead_id:r,p_cost:s,p_grade:n});if(i)throw i}}const Qm={user:{points:1280,quota:{s:2,a:3}},leads:[{id:"S-5566",name:"買家 S-5566",grade:"S",intent:98,prop:"捷運宅",visit:15,price:20,status:"purchased",purchased_at:Date.now()-2*36e5,ai:"S 級熱度拉滿，請優先處理。",remainingHours:118},{id:"S-9011",name:"買家 S-9011",grade:"S",intent:93,prop:"高樓景觀宅",visit:11,price:20,status:"purchased",purchased_at:Date.now()-6*36e5,ai:"已連續三天造訪同社區。",remainingHours:114},{id:"A-7788",name:"買家 A-7788",grade:"A",intent:79,prop:"學區房",visit:6,price:10,status:"purchased",purchased_at:Date.now()-20*36e5,ai:"A 級學區需求穩定。",remainingHours:52},{id:"A-6600",name:"買家 A-6600",grade:"A",intent:74,prop:"預售捷運宅",visit:5,price:10,status:"purchased",purchased_at:Date.now()-10*36e5,ai:"適合搭配預售案一次推薦。",remainingHours:62},{id:"B218",name:"買家 B218",grade:"S",intent:92,prop:"捷運共構 3 房",visit:7,price:20,status:"new",ai:"🔥 強烈建議立即發送訊息！",x:25,y:25},{id:"A103",name:"買家 A103",grade:"S",intent:88,prop:"惠宇上晴 12F",visit:12,price:20,status:"new",ai:"建議立即發送獨家邀約！",x:15,y:45},{id:"S901",name:"買家 S901",grade:"S",intent:94,prop:"高樓景觀宅",visit:9,price:20,status:"new",ai:"重複詢問同一社區，請發送簡訊跟進。",x:40,y:32},{id:"S880",name:"買家 S880",grade:"S",intent:90,prop:"預售捷運宅",visit:8,price:20,status:"new",ai:"對捷運沿線有強烈偏好。",x:60,y:40},{id:"C055",name:"買家 C055",grade:"A",intent:75,prop:"南屯學區宅",visit:4,price:10,status:"new",ai:"A 級學區需求明確。",x:60,y:20},{id:"A230",name:"買家 A230",grade:"A",intent:71,prop:"次高樓層 3 房",visit:3,price:10,status:"new",ai:"已追蹤兩個以上相似物件。",x:70,y:30},{id:"A550",name:"買家 A550",grade:"A",intent:69,prop:"公園首排",visit:3,price:10,status:"new",ai:"假日時段瀏覽頻繁。",x:50,y:15},{id:"D330",name:"買家 D330",grade:"B",intent:62,prop:"捷運生活圈",visit:3,price:3,status:"new",ai:"建議發送訊息提供車位資訊。",x:40,y:60},{id:"B778",name:"買家 B778",grade:"B",intent:58,prop:"小坪數投資宅",visit:2,price:3,status:"new",ai:"屬於投資族群，可搭配多案推薦。",x:30,y:70},{id:"C021",name:"買家 C021",grade:"C",intent:48,prop:"老屋翻新",visit:2,price:1,status:"new",ai:"對低總價物件有興趣。",x:75,y:55},{id:"C990",name:"買家 C990",grade:"C",intent:42,prop:"套房",visit:1,price:1,status:"new",ai:"瀏覽時間短，建議先以訊息觸及。",x:82,y:65},{id:"H009",name:"買家 H009",grade:"F",intent:28,prop:"小坪數",visit:1,price:.5,status:"new",ai:"潛在客戶。",x:70,y:75},{id:"F778",name:"買家 F778",grade:"F",intent:22,prop:"套房出租",visit:1,price:.5,status:"new",ai:"互動較少，可作為備選追蹤。",x:55,y:80}],listings:[{title:"惠宇上晴｜12/15F 視野戶・雙平車",tags:["南屯區","近捷運","雙平車"],view:1284,click:214,fav:37,thumbColor:"#eef2ff"},{title:"捷運共構 3 房｜視野棟距佳",tags:["捷運共構","次高樓層"],view:986,click:163,fav:22,thumbColor:"#f0fdf4"},{title:"南屯捷運宅｜3房・高樓層",tags:["近學區","雙衛浴"],view:846,click:128,fav:15,thumbColor:"#fff7ed"}],feed:[{title:"成交故事｜12F 視野戶為什麼受歡迎",meta:"來自：社區牆・成交故事",body:"買方看重的是採光、棟距與公設使用率。"},{title:"住戶心得｜公設使用率與噪音表現",meta:"本週一・互動 41",body:"晚間 9 點後社區安靜。"}]},jn=(e,t)=>e.grade==="S"&&t.quota.s<=0?{valid:!1,error:"S 級配額已用完"}:e.grade==="A"&&t.quota.a<=0?{valid:!1,error:"A 級配額已用完"}:{valid:!0};function qm(){var m,b;const{session:e}=$o(),[t,r]=f.useState(!0),s=cs();f.useEffect(()=>{if(typeof window>"u")return;const j=new URLSearchParams(window.location.search).get("mode");let w=!0;if(j==="mock"||j==="live")w=j==="mock",localStorage.setItem("uag_mode",j);else{const v=localStorage.getItem("uag_mode");(v==="mock"||v==="live")&&(w=v==="mock")}r(w)},[]);const n=()=>{{Ke.error("生產環境無法切換模式");return}},{data:i,isLoading:a,error:c,refetch:l}=ha({queryKey:["uagData",t,(m=e==null?void 0:e.user)==null?void 0:m.id],queryFn:async()=>{var g;if(t)return Qm;if(!((g=e==null?void 0:e.user)!=null&&g.id))throw new Error("Not authenticated");return _n.fetchAppData(e.user.id)},enabled:t||!!((b=e==null?void 0:e.user)!=null&&b.id),staleTime:1e3*10,refetchInterval:t?!1:3e4}),u=ma({mutationFn:async({leadId:g,cost:j,grade:w})=>{var v;if(t){await new Promise(y=>setTimeout(y,500));return}if(!((v=e==null?void 0:e.user)!=null&&v.id))throw new Error("Not authenticated");await _n.purchaseLead(e.user.id,g,j,w)},onMutate:async({leadId:g,cost:j,grade:w})=>{var y,R;await s.cancelQueries({queryKey:["uagData"]});const v=s.getQueryData(["uagData",t,(y=e==null?void 0:e.user)==null?void 0:y.id]);if(v){const S=v.leads.find(A=>A.id===g);if(S){const{valid:A,error:$}=jn(S,v.user);if(!A)throw new Error($||"配額不足 (Optimistic Check)")}const _={...v,user:{...v.user,points:v.user.points-j,quota:{...v.user.quota,s:w==="S"?v.user.quota.s-1:v.user.quota.s,a:w==="A"?v.user.quota.a-1:v.user.quota.a}},leads:v.leads.map(A=>A.id===g?{...A,status:"purchased",remainingHours:ws[w]||48}:A)};s.setQueryData(["uagData",t,(R=e==null?void 0:e.user)==null?void 0:R.id],_)}return{previousData:v}},onError:(g,j,w)=>{var v;w!=null&&w.previousData&&s.setQueryData(["uagData",t,(v=e==null?void 0:e.user)==null?void 0:v.id],w.previousData),Ke.error(`購買失敗: ${g instanceof Error?g.message:"Unknown error"}`)},onSettled:()=>{s.invalidateQueries({queryKey:["uagData"]})}});return{data:i,isLoading:a,error:c,buyLead:async g=>{if(!i||u.isPending)return;const j=i.leads.find(R=>R.id===g);if(!j){Ke.error("客戶不存在");return}if(j.status!=="new"){Ke.error("此客戶已被購買");return}const{valid:w,error:v}=jn(j,i.user);if(!w){Ke.error(v||"配額不足");return}const y=j.price||10;if(i.user.points<y){Ke.error("點數不足");return}u.mutate({leadId:g,cost:y,grade:j.grade},{onSuccess:()=>{Ke.success("購買成功")}})},isBuying:u.isPending,useMock:t,toggleMode:n,refetch:l}}function Wm(e,t){let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>e(...s),t)}}function Vm(){const[e,t]=f.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return f.useEffect(()=>{if(typeof window>"u")return;const r=Wm(()=>{t({width:window.innerWidth,height:window.innerHeight})},150);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function Gm(){const[e,t]=f.useState(null),{width:r}=Vm();f.useEffect(()=>{r>wn.TABLET&&e&&t(null)},[r,e]);const s=f.useCallback(i=>{t(i),requestAnimationFrame(()=>{var a;window.innerWidth<=wn.TABLET&&((a=document.getElementById("action-panel-container"))==null||a.scrollIntoView({behavior:"smooth",block:"center"}))})},[]),n=f.useCallback(()=>t(null),[]);return{selectedLead:e,selectLead:s,close:n}}const Km=()=>o.jsx("header",{className:p["uag-header"],children:o.jsxs("div",{className:p["uag-header-inner"],children:[o.jsxs("div",{className:p["uag-logo"],children:[o.jsx("div",{className:p["uag-logo-badge"],children:"邁"}),o.jsx("span",{children:"邁房子廣告後台"})]}),o.jsxs("div",{className:p["uag-breadcrumb"],children:[o.jsx("span",{children:"游杰倫 21世紀不動產河南店"}),o.jsx("span",{className:`${p["uag-badge"]} ${p["uag-badge--pro"]}`,children:"專業版 PRO"})]})]})}),Hm=({user:e,useMock:t,toggleMode:r})=>o.jsxs("div",{className:p["uag-footer-bar"],children:[o.jsxs("div",{style:{marginRight:"auto",fontSize:"12px",color:"var(--ink-300)"},children:["系統模式：",o.jsx("strong",{style:{color:t?"#f59e0b":"#16a34a"},children:t?"Local Mock":"Live API"}),o.jsx("button",{onClick:r,style:{marginLeft:"10px",fontSize:"10px",cursor:"pointer",border:"1px solid #ccc",padding:"2px 6px",borderRadius:"4px"},children:"切換模式"})]}),o.jsx("button",{className:p["uag-btn"],children:"方案設定"}),o.jsx("button",{className:`${p["uag-btn"]} ${p.primary}`,children:"加值點數"}),o.jsxs("span",{className:p["uag-badge"],style:{fontSize:"14px",background:"#fff8dc",color:"#92400e",borderColor:"#fcd34d"},children:["點數 ",o.jsx("span",{id:"user-points",children:e.points})]})]}),Jm=()=>o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("div",{className:"animate-pulse flex space-x-4 justify-center",children:o.jsxs("div",{className:"flex-1 space-y-4 py-1 max-w-md",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mx-auto"})]})]})}),o.jsx("div",{className:"mt-4 text-gray-500",children:"載入中..."})]}),Ym=({error:e,resetErrorBoundary:t})=>o.jsxs("div",{role:"alert",className:"p-6 text-center text-red-600",children:[o.jsx("p",{className:"font-bold text-lg mb-2",children:"系統發生錯誤"}),o.jsx("pre",{className:"bg-red-50 p-4 rounded text-sm mb-4 overflow-auto max-w-lg mx-auto",children:e.message}),o.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"重試"})]});function Xm({leads:e,onSelectLead:t}){const r=e.filter(s=>s.status==="new");return o.jsxs("section",{className:`${p["uag-card"]} ${p["k-span-6"]}`,id:"radar-section",style:{minHeight:"450px"},children:[o.jsxs("div",{className:p["uag-card-header"],children:[o.jsxs("div",{children:[o.jsx("div",{className:p["uag-card-title"],children:"UAG 精準導客雷達"}),o.jsx("div",{className:p["uag-card-sub"],children:"S/A 級獨家聯絡權｜B/C/F 級點數兌換"})]}),o.jsx("div",{className:p["uag-actions"],style:{gap:"4px"}})]}),o.jsxs("div",{className:p["uag-cluster"],id:"radar-container",children:[o.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"300px",height:"300px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"150px",height:"150px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),o.jsxs("div",{style:{position:"absolute",left:"16px",top:"16px",background:"rgba(255,255,255,0.9)",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",color:"#0f172a",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0",zIndex:5},children:[o.jsx("span",{style:{width:"8px",height:"8px",background:"#22c55e",borderRadius:"50%",display:"inline-block",marginRight:"4px"}}),o.jsx("span",{style:{fontWeight:700},children:"Live 監控中"})]}),r.map(s=>{const n=s.x!=null?s.x:50,i=s.y!=null?s.y:50,a=s.grade==="S"?120:s.grade==="A"?100:s.grade==="B"?90:s.grade==="C"?80:60,c=5+Math.random()*3+"s";return o.jsxs("div",{className:p["uag-bubble"],"data-grade":s.grade,role:"button","aria-label":`${s.name||s.id} - ${s.grade}級`,tabIndex:0,style:{"--w":a+"px","--float":c,left:n+"%",top:i+"%"},onClick:()=>t(s),onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&t(s)},children:[o.jsx("div",{className:p["uag-bubble-grade"],style:{background:`var(--grade-${s.grade.toLowerCase()})`,color:"#fff"},children:s.grade}),o.jsxs("div",{style:{textAlign:"center",lineHeight:1.2},children:[o.jsx("div",{style:{fontWeight:800,fontSize:"14px"},children:s.id}),o.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:[s.intent,"%"]})]}),o.jsx("div",{className:p["uag-bubble-label"],children:s.prop})]},s.id)})]})]})}const ur=({label:e,value:t,highlight:r=!1})=>o.jsxs("div",{className:p["ap-stat"],children:[o.jsx("span",{children:e}),o.jsx("b",{style:r?{color:"var(--uag-brand)"}:{},children:t})]}),ef=f.forwardRef(({selectedLead:e,onBuyLead:t,isProcessing:r},s)=>{const[n,i]=f.useState(!1);if(f.useEffect(()=>{i(!1)},[e]),!e)return o.jsx("section",{className:p["k-span-6"],id:"action-panel-container",ref:s,children:o.jsx("div",{className:p["uag-action-panel"],id:"action-panel",children:o.jsx("div",{style:{height:"100%",minHeight:"200px",display:"grid",placeItems:"center",color:"var(--ink-300)",textAlign:"center",padding:"40px 20px"},children:o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:"👆"}),o.jsxs("div",{children:["請點擊上方雷達泡泡",o.jsx("br",{}),"查看分析與購買"]})]})})})});const a=e.grade==="S"||e.grade==="A",c=()=>{i(!0)},l=()=>{t(e.id),i(!1)},u=()=>{i(!1)};return o.jsx("section",{className:p["k-span-6"],id:"action-panel-container",ref:s,children:o.jsxs("div",{className:p["uag-action-panel"],id:"action-panel",children:[o.jsx("div",{className:p["ap-head"],children:o.jsxs("span",{className:`${p["uag-badge"]} ${p["uag-badge--"+e.grade.toLowerCase()]}`,children:[e.grade,"級｜",e.name]})}),o.jsxs("div",{className:p["ap-body"],children:[o.jsxs("div",{className:p["ap-stats-group"],children:[o.jsx(ur,{label:"關注房源",value:e.prop}),o.jsx(ur,{label:"意向分數",value:`${e.intent}%`,highlight:!0}),o.jsx(ur,{label:"瀏覽次數",value:`${e.visit} 次`}),o.jsx(ur,{label:"購買成本",value:`${e.price} 點`})]}),o.jsx("div",{className:`${p["ai-box"]} ${p.urgent}`,children:o.jsx("div",{children:e.ai})}),o.jsxs("div",{className:p["action-zone"],children:[a&&o.jsx("div",{style:{background:"#fff7ed",color:"#ea580c",fontWeight:700,fontSize:"12px",textAlign:"center",padding:"6px",borderRadius:"4px",border:"1px solid #ffedd5",marginBottom:"10px"},children:"✨ 此客戶包含獨家訊息聯絡權 ✨"}),n?o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{className:p["btn-attack"],style:{background:"#ef4444",flex:1},onClick:l,disabled:r,children:r?"處理中...":`確定花費 ${e.price} 點?`}),o.jsx("button",{className:p["btn-attack"],style:{background:"#94a3b8",flex:1},onClick:u,disabled:r,children:"取消"})]}):o.jsx("button",{className:p["btn-attack"],onClick:c,disabled:r,children:r?"處理中...":"🚀 獲取聯絡權限 (簡訊/站內信)"}),o.jsxs("div",{style:{textAlign:"center",fontSize:"11px",color:"#94a3b8",marginTop:"8px"},children:["符合個資法規範：僅能以簡訊/站內信聯繫",o.jsx("br",{}),"系統將自動發送您的名片與電話給客戶"]})]})]})]})})}),tf=e=>{const t=ws[e.grade]??336,r=e.remainingHours??t,s=Math.max(0,Math.min(100,r/t*100)),n=e.grade==="S"||e.grade==="A";let i="";return n?i=`${r.toFixed(1)} 小時`:i=`${(r/24).toFixed(1)} 天`,{total:t,remaining:r,percent:s,isExclusive:n,timeDisplay:i}};function rf({leads:e}){const t=e.filter(r=>r.status==="purchased");return o.jsxs("section",{className:`${p["uag-card"]} ${p["k-span-6"]}`,children:[o.jsxs("div",{className:p["uag-card-header"],children:[o.jsxs("div",{children:[o.jsx("div",{className:p["uag-card-title"],children:"已購客戶資產與保護監控"}),o.jsx("div",{className:p["uag-card-sub"],children:"S 級 120hr / A 級 72hr 獨家倒數｜B/C/F 級 14 天防撞"})]}),o.jsx("div",{className:p["uag-actions"],children:o.jsx("button",{className:p["uag-btn"],children:"匯出報表"})})]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{className:p["monitor-table"],children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{width:"25%"},children:"客戶等級/名稱"}),o.jsx("th",{style:{width:"35%"},children:"保護期倒數"}),o.jsx("th",{style:{width:"20%"},children:"目前狀態"}),o.jsx("th",{style:{width:"20%"},children:"操作"})]})}),o.jsx("tbody",{id:"asset-list",children:t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:"尚無已購資產，請從上方雷達進攻。"})}):t.map(r=>{const{percent:s,isExclusive:n,timeDisplay:i}=tf(r),a=`var(--grade-${r.grade.toLowerCase()})`,c=n?"獨家鎖定中":"去重保護中";return o.jsxs("tr",{children:[o.jsx("td",{"data-label":"客戶等級/名稱",children:o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx("span",{style:{display:"inline-grid",placeItems:"center",width:"24px",height:"24px",borderRadius:"50%",fontSize:"11px",fontWeight:900,color:"#fff",marginRight:"8px",background:a},children:r.grade}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:800,color:"var(--ink-100)"},children:r.name}),o.jsx("div",{style:{fontSize:"11px",color:"var(--ink-300)"},children:r.prop})]})]})}),o.jsxs("td",{"data-label":"保護期倒數",children:[o.jsxs("div",{style:{fontSize:"11px",fontWeight:700,marginBottom:"2px",display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{color:a},children:c}),o.jsx("span",{className:p["t-countdown"],children:i})]}),o.jsx("div",{className:p["progress-bg"],children:o.jsx("div",{className:p["progress-fill"],style:{width:`${s}%`,background:a}})})]}),o.jsx("td",{"data-label":"目前狀態",children:o.jsx("span",{className:p["uag-badge"],style:{background:"#f0fdf4",color:"#16a34a",border:"none"},children:"簡訊已發送"})}),o.jsx("td",{"data-label":"操作",children:o.jsx("button",{className:`${p["uag-btn"]} ${p.primary}`,style:{padding:"4px 12px",fontSize:"12px"},children:"寫紀錄 / 預約"})})]},r.id)})})]})})]})}function sf({listings:e,feed:t}){return o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:`${p["uag-card"]} ${p["k-span-3"]}`,children:[o.jsx("div",{className:p["uag-card-header"],children:o.jsxs("div",{children:[o.jsx("div",{className:p["uag-card-title"],children:"我的房源總覽"}),o.jsx("div",{className:p["uag-card-sub"],children:"即時掌握曝光、點擊與收藏"})]})}),o.jsx("div",{id:"listing-container",children:e.length===0?o.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:"尚無房源資料。"}):e.map((r,s)=>{var n;return o.jsxs("article",{className:p["listing-item"],children:[o.jsx("div",{className:p["l-thumb"],style:{background:r.thumbColor}}),o.jsxs("div",{children:[o.jsx("div",{className:p["l-title"],children:r.title}),o.jsx("div",{className:p["l-tags"],children:(n=r.tags)==null?void 0:n.map((i,a)=>o.jsx("span",{className:p["l-tag"],children:i},a))}),o.jsxs("div",{className:p["l-kpi"],children:[o.jsxs("span",{children:["曝光 ",o.jsx("b",{children:r.view})]}),o.jsxs("span",{children:["點擊 ",o.jsx("b",{children:r.click})]}),o.jsxs("span",{children:["收藏 ",o.jsx("b",{children:r.fav})]})]})]})]},s)})})]}),o.jsxs("section",{className:`${p["uag-card"]} ${p["k-span-3"]}`,children:[o.jsxs("div",{className:p["uag-card-header"],children:[o.jsxs("div",{children:[o.jsx("div",{className:p["uag-card-title"],children:"社區牆＆真實口碑"}),o.jsx("div",{className:p["uag-card-sub"],children:"用真實交流建立信任"})]}),o.jsx("div",{className:p["uag-actions"],children:o.jsx("button",{className:p["uag-btn"],children:"貼文"})})]}),o.jsx("div",{id:"feed-container",children:t.length===0?o.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:"尚無社區牆互動。"}):t.map((r,s)=>o.jsxs("article",{className:p["feed-post"],children:[o.jsx("div",{className:p["fp-title"],children:r.title}),o.jsx("div",{className:p["fp-meta"],children:r.meta}),o.jsx("div",{className:p["fp-body"],children:r.body})]},s))})]})]})}function nf({title:e="惠宇上晴 12F｜3房2廳2衛",subTitle:t="南屯區 · 67.3 坪 · 屋齡 5 年",price:r="NT$ 32,880,000",pricePerPing:s="參考：52.1 萬/坪",stats:n=[{label:"議價建議",value:"-2% ~ -6%"},{label:"貸款月付",value:"≈ 8.6 萬"},{label:"近三筆實登",value:"52.8 / 51.5 / 50.9"}],imageUrl:i="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='200'%3E%3Crect width='100%25' height='100%25' fill='%23e5edff'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='%231749d7'%3EMAIN%3C/text%3E%3C/svg%3E"}){const[a,c]=f.useState(e),[l,u]=f.useState(t),[h,m]=f.useState(r),[b,g]=f.useState(s),[j,w]=f.useState(n),[v,y]=f.useState(i),R=f.useRef(null),S=()=>{tr.success("系統提示：報告生成中...")},_=()=>{var $;($=R.current)==null||$.click()},A=async $=>{var W;const U=(W=$.target.files)==null?void 0:W[0];if(!U)return;const N=tr.loading("正在分析房仲頁面...");try{const O=new FileReader;O.onloadend=async()=>{const X=O.result;y(X),setTimeout(()=>{c("偵測結果：帝寶 18F｜豪宅規格"),u("大安區 · 120.5 坪 · 屋齡 10 年"),m("NT$ 188,000,000"),g("參考：156.0 萬/坪"),w([{label:"議價建議",value:"-5% ~ -8%"},{label:"貸款月付",value:"≈ 45.2 萬"},{label:"近三筆實登",value:"155.0 / 152.3 / 148.9"}]),tr.success("分析完成！已自動填入資訊",{id:N})},1500)},O.readAsDataURL(U)}catch{tr.error("分析失敗",{id:N})}};return o.jsxs("section",{className:`${p["uag-card"]} ${p["k-span-3"]}`,children:[o.jsxs("div",{className:p["uag-card-header"],children:[o.jsxs("div",{children:[o.jsx("div",{className:p["uag-card-title"],children:"手機報告生成器"}),o.jsx("div",{className:p["uag-card-sub"],children:"半屏小卡・行動優先"})]}),o.jsxs("div",{className:p["uag-actions"],children:[o.jsx("input",{type:"file",ref:R,style:{display:"none"},accept:"image/*",onChange:A}),o.jsx("button",{className:`${p["uag-btn"]} ${p.secondary}`,onClick:_,style:{marginRight:"8px"},children:"匯入房仲頁面"}),o.jsx("button",{className:`${p["uag-btn"]} ${p.primary}`,onClick:S,children:"生成報告"})]})]}),o.jsx("div",{className:p["card-body"],children:o.jsxs("section",{"aria-label":"手機報告生成小卡",className:p["mai-card"],children:[o.jsxs("header",{className:p["mai-head"],children:[o.jsx("span",{className:p["mai-tag"],children:"快速報告"}),o.jsx("h3",{className:p["mai-title"],children:a}),o.jsx("p",{className:p["mai-sub"],children:l})]}),o.jsxs("div",{className:p["mai-body"],children:[o.jsxs("div",{className:p["mai-left"],children:[o.jsxs("div",{className:p["mai-price"],children:[o.jsx("div",{className:p["mai-price-label"],children:"開價"}),o.jsx("div",{className:p["mai-price-value"],children:h}),o.jsx("div",{className:p["mai-price-unit"],children:b})]}),o.jsx("ul",{className:p["mai-stats"],children:j.map(($,U)=>o.jsxs("li",{children:[o.jsx("span",{children:$.label}),o.jsx("b",{children:$.value})]},U))})]}),o.jsxs("div",{className:p["mai-right"],children:[o.jsx("div",{className:p["mai-thumb"],children:o.jsx("img",{alt:"物件主圖",src:v,style:{width:"100%",height:"100%",objectFit:"cover"}})}),o.jsxs("div",{className:p["mai-mini"],children:[o.jsx("div",{style:{background:"#f0f4ff",borderRadius:"8px",aspectRatio:"3/2"}}),o.jsx("div",{style:{background:"#f0f4ff",borderRadius:"8px",aspectRatio:"3/2"}}),o.jsx("div",{style:{background:"#f0f4ff",borderRadius:"8px",aspectRatio:"3/2"}})]})]})]}),o.jsxs("div",{className:p["mai-actions"],children:[o.jsx("button",{className:`${p["mai-btn"]} ${p.primary}`,children:"一鍵生成報告"}),o.jsx("button",{className:`${p["mai-btn"]} ${p.line}`,children:"LINE 分享"})]})]})})]})}function of(){return o.jsxs("section",{className:`${p["uag-card"]} ${p["k-span-3"]}`,children:[o.jsxs("div",{className:p["uag-card-header"],children:[o.jsx("div",{className:p["uag-card-title"],children:"安心流程管理"}),o.jsx("div",{className:p["uag-card-sub"],children:"五階段・交易留痕"})]}),o.jsxs("div",{className:p["card-body"],children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:"8px",marginBottom:"8px"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{className:p["flow-stage"],style:{background:"#16a34a",color:"#fff"},children:"✓"}),o.jsx("div",{className:"small",style:{fontWeight:700,color:"#16a34a"},children:"M1 接洽"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{className:p["flow-stage"],style:{background:"#16a34a",color:"#fff"},children:"✓"}),o.jsx("div",{className:"small",style:{fontWeight:700,color:"#16a34a"},children:"M2 帶看"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{className:p["flow-stage"],style:{background:"#1749d7",color:"#fff"},children:"●"}),o.jsx("div",{className:"small",style:{fontWeight:700,color:"#1749d7"},children:"M3 出價"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{className:p["flow-stage"],style:{background:"#e5e7eb",color:"#6b7280"},children:"・"}),o.jsx("div",{className:"small",style:{color:"#6b7a90"},children:"M4 簽約"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{className:p["flow-stage"],style:{background:"#e5e7eb",color:"#6b7280"},children:"・"}),o.jsx("div",{className:"small",style:{color:"#6b7a90"},children:"M5 交屋"})]})]}),o.jsxs("div",{className:"timeline-wrap",children:[o.jsxs("div",{className:"timeline-header",style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",gap:0,padding:"8px 12px",fontSize:"13px"},children:[o.jsx("div",{children:"時間"}),o.jsx("div",{children:"事件與參與者"}),o.jsx("div",{children:"留痕"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",alignItems:"start",borderBottom:"1px solid var(--line-soft)",padding:"8px 12px"},children:[o.jsx("div",{className:"small",children:"10/30 22:10"}),o.jsxs("div",{children:[o.jsxs("div",{className:"small",style:{color:"var(--ink-100)"},children:[o.jsx("b",{children:"M1 初次接洽建立"}),"｜買方 A103"]}),o.jsx("div",{className:"small",style:{color:"var(--ink-300)"},children:"房源：惠宇上晴 12F"})]}),o.jsx("div",{children:o.jsx("div",{className:p["uag-badge"],style:{fontSize:"10px"},children:"hash: 9f2a…"})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",alignItems:"start",borderBottom:"1px solid var(--line-soft)",padding:"8px 12px"},children:[o.jsx("div",{className:"small",children:"10/31 09:20"}),o.jsxs("div",{children:[o.jsxs("div",{className:"small",style:{color:"var(--ink-100)"},children:[o.jsx("b",{children:"M2 帶看雙方到場"}),"｜買方 A103"]}),o.jsx("div",{className:"small",style:{color:"var(--ink-300)"},children:"GeoTag: 南屯社區大廳"})]}),o.jsx("div",{children:o.jsx("div",{className:p["uag-badge"],style:{fontSize:"10px"},children:"sig: b7aa…"})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",alignItems:"start",background:"#fefce8",padding:"8px 12px"},children:[o.jsx("div",{className:"small",children:"10/31 10:40"}),o.jsxs("div",{children:[o.jsxs("div",{className:"small",style:{color:"var(--ink-100)"},children:[o.jsx("b",{children:"M3 買方出價"}),"｜買方 A103"]}),o.jsx("div",{className:"small",style:{color:"var(--ink-300)"},children:"出價 NT$31,500,000"})]}),o.jsx("div",{children:o.jsx("div",{className:p["uag-badge"],style:{fontSize:"10px",background:"#fef3c7",color:"#92400e",border:"1px solid #f6d88a"},children:"hash: 1a7c…"})})]})]})]})]})}function af(){const{data:e,isLoading:t,buyLead:r,isBuying:s,useMock:n,toggleMode:i}=qm(),{selectedLead:a,selectLead:c,close:l}=Gm(),u=f.useRef(null),h=async m=>{!e||s||(r(m),l())};return t?o.jsx(Jm,{}):e?o.jsxs("div",{className:p["uag-page"],children:[o.jsx(ki,{position:"top-center"}),o.jsx(Km,{}),o.jsx("main",{className:p["uag-container"],children:o.jsxs("div",{className:p["uag-grid"],children:[o.jsx(Xm,{leads:e.leads,onSelectLead:c}),o.jsx(ef,{ref:u,selectedLead:a,onBuyLead:h,isProcessing:s}),o.jsx(rf,{leads:e.leads}),o.jsx(sf,{listings:e.listings,feed:e.feed}),o.jsx(nf,{}),o.jsx(of,{})]})}),o.jsx(Hm,{user:e.user,useMock:n,toggleMode:i})]}):null}function cf(){return o.jsx(na,{children:({reset:e})=>o.jsx(jl,{onReset:e,FallbackComponent:Ym,children:o.jsx(af,{})})})}const lf=new ea({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});function uf(){const[e,t]=f.useState(null),r=hi();return f.useEffect(()=>{ro().then(t)},[]),f.useEffect(()=>{e&&At("page_view",r.pathname)},[r,e]),e?o.jsx(ta,{client:lf,children:o.jsx(Sa,{children:o.jsxs(yl,{children:[o.jsxs(mi,{children:[o.jsx(ye,{path:"/",element:o.jsx(Ne,{children:o.jsx(Js,{config:e})})}),o.jsx(ye,{path:"/maihouses",element:o.jsx(Ne,{children:o.jsx(Js,{config:e})})}),o.jsx(ye,{path:"/uag",element:o.jsx(cf,{})}),o.jsx(ye,{path:"/auth/register",element:o.jsx(Ne,{children:o.jsx(sl,{})})}),o.jsx(ye,{path:"/auth/login",element:o.jsx(Ne,{children:o.jsx(nl,{})})}),o.jsx(ye,{path:"/community/:id/wall",element:o.jsx(Ne,{children:o.jsx(ol,{})})}),o.jsx(ye,{path:"/community/suggested",element:o.jsx(Ne,{children:o.jsx(il,{})})}),o.jsx(ye,{path:"/property/:id",element:o.jsx(Ne,{children:o.jsx(gl,{})})}),o.jsx(ye,{path:"/assure",element:o.jsx(Ne,{children:o.jsx(bl,{})})}),o.jsx(ye,{path:"/chat",element:o.jsx(Ne,{children:o.jsx(xl,{})})})]},r.pathname),e.devtools==="1"&&o.jsx(Qa,{config:e}),o.jsx(wl,{})]})})}):o.jsx("div",{className:"p-6 text-sm text-[var(--text-secondary)]",children:"載入中…"})}const kn=document.getElementById("root");kn&&Pr.createRoot(kn).render(o.jsx(yr.StrictMode,{children:o.jsx(fi,{basename:"/maihouses/",children:o.jsx(uf,{})})}));export{ro as g};
//# sourceMappingURL=index-Ca1Pd9DC.js.map
