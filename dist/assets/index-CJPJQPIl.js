const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BE3T1KOW.js","assets/react-vendor-DIo7f8p2.js","assets/ui-libs-DIjOzRzZ.js","assets/supabase-Dar8dO9-.js"])))=>i.map(i=>d[i]);
var ks=e=>{throw TypeError(e)};var Tr=(e,t,r)=>t.has(e)||ks("Cannot "+r);var d=(e,t,r)=>(Tr(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?ks("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),N=(e,t,r,s)=>(Tr(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),M=(e,t,r)=>(Tr(e,t,"access private method"),r);var cr=(e,t,r,s)=>({set _(a){N(e,t,a,r)},get _(){return d(e,t,s)}});import{r as f,a as po,R as Sr,u as On,L as Pn,b as Fn,c as fo,d as Te,B as go}from"./react-vendor-DIo7f8p2.js";import{L as bo,a as xo,U as vo,S as yo,P as Mn,b as wo,H as Dn,M as jo,c as _o,K as ko,C as No,d as So,A as Co,B as zo,e as Eo,f as Io,Z as Ns,F as Ln,R as Ao,g as To,h as $o,i as Ro,j as Oo,z as ge,I as Po,k as Fo,l as Mo,m as Do,n as Lo,o as it}from"./ui-libs-DIjOzRzZ.js";import{c as Zo}from"./supabase-Dar8dO9-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Zn={exports:{}},Cr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=f,Bo=Symbol.for("react.element"),Wo=Symbol.for("react.fragment"),qo=Object.prototype.hasOwnProperty,Qo=Uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vo={key:!0,ref:!0,__self:!0,__source:!0};function Un(e,t,r){var s,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)qo.call(t,s)&&!Vo.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Bo,type:e,key:o,ref:i,props:a,_owner:Qo.current}}Cr.Fragment=Wo;Cr.jsx=Un;Cr.jsxs=Un;Zn.exports=Cr;var n=Zn.exports,Mr={},Ss=po;Mr.createRoot=Ss.createRoot,Mr.hydrateRoot=Ss.hydrateRoot;var Ut=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Go={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ke,os,kn,Ho=(kn=class{constructor(){E(this,Ke,Go);E(this,os,!1)}setTimeoutProvider(e){N(this,Ke,e)}setTimeout(e,t){return d(this,Ke).setTimeout(e,t)}clearTimeout(e){d(this,Ke).clearTimeout(e)}setInterval(e,t){return d(this,Ke).setInterval(e,t)}clearInterval(e){d(this,Ke).clearInterval(e)}},Ke=new WeakMap,os=new WeakMap,kn),lt=new Ho;function Ko(e){setTimeout(e,0)}var vt=typeof window>"u"||"Deno"in globalThis;function he(){}function Jo(e,t){return typeof e=="function"?e(t):e}function Dr(e){return typeof e=="number"&&e>=0&&e!==1/0}function Bn(e,t){return Math.max(e+(t||0)-Date.now(),0)}function at(e,t){return typeof e=="function"?e(t):e}function Ne(e,t){return typeof e=="function"?e(t):e}function Cs(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:i,stale:c}=e;if(i){if(s){if(t.queryHash!==is(i,t.options))return!1}else if(!Ht(t.queryKey,i))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||a&&a!==t.state.fetchStatus||o&&!o(t))}function zs(e,t){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(yt(t.options.mutationKey)!==yt(o))return!1}else if(!Ht(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function is(e,t){return((t==null?void 0:t.queryKeyHashFn)||yt)(e)}function yt(e){return JSON.stringify(e,(t,r)=>Lr(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function Ht(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ht(e[r],t[r])):!1}var Yo=Object.prototype.hasOwnProperty;function Wn(e,t){if(e===t)return e;const r=Es(e)&&Es(t);if(!r&&!(Lr(e)&&Lr(t)))return t;const a=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),i=o.length,c=r?new Array(i):{};let l=0;for(let u=0;u<i;u++){const h=r?u:o[u],m=e[h],g=t[h];if(m===g){c[h]=m,(r?u<a:Yo.call(e,h))&&l++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){c[h]=g;continue}const p=Wn(m,g);c[h]=p,p===m&&l++}return a===i&&l===a?e:c}function vr(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Es(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Lr(e){if(!Is(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Is(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Is(e){return Object.prototype.toString.call(e)==="[object Object]"}function Xo(e){return new Promise(t=>{lt.setTimeout(t,e)})}function Zr(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Wn(e,t):t}function ei(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function ti(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var cs=Symbol();function qn(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===cs?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Qn(e,t){return typeof e=="function"?e(...t):!!e}var ut,Je,Et,Nn,ri=(Nn=class extends Ut{constructor(){super();E(this,ut);E(this,Je);E(this,Et);N(this,Et,t=>{if(!vt&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){d(this,Je)||this.setEventListener(d(this,Et))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Je))==null||t.call(this),N(this,Je,void 0))}setEventListener(t){var r;N(this,Et,t),(r=d(this,Je))==null||r.call(this),N(this,Je,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){d(this,ut)!==t&&(N(this,ut,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof d(this,ut)=="boolean"?d(this,ut):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ut=new WeakMap,Je=new WeakMap,Et=new WeakMap,Nn),ls=new ri;function Ur(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var si=Ko;function ni(){let e=[],t=0,r=c=>{c()},s=c=>{c()},a=si;const o=c=>{t?e.push(c):a(()=>{r(c)})},i=()=>{const c=e;e=[],c.length&&a(()=>{s(()=>{c.forEach(l=>{r(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||i()}return l},batchCalls:c=>(...l)=>{o(()=>{c(...l)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{a=c}}}var se=ni(),It,Ye,At,Sn,ai=(Sn=class extends Ut{constructor(){super();E(this,It,!0);E(this,Ye);E(this,At);N(this,At,t=>{if(!vt&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){d(this,Ye)||this.setEventListener(d(this,At))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Ye))==null||t.call(this),N(this,Ye,void 0))}setEventListener(t){var r;N(this,At,t),(r=d(this,Ye))==null||r.call(this),N(this,Ye,t(this.setOnline.bind(this)))}setOnline(t){d(this,It)!==t&&(N(this,It,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return d(this,It)}},It=new WeakMap,Ye=new WeakMap,At=new WeakMap,Sn),yr=new ai;function oi(e){return Math.min(1e3*2**e,3e4)}function Vn(e){return(e??"online")==="online"?yr.isOnline():!0}var Br=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Gn(e){let t=!1,r=0,s;const a=Ur(),o=()=>a.status!=="pending",i=_=>{var v;if(!o()){const w=new Br(_);g(w),(v=e.onCancel)==null||v.call(e,w)}},c=()=>{t=!0},l=()=>{t=!1},u=()=>ls.isFocused()&&(e.networkMode==="always"||yr.isOnline())&&e.canRun(),h=()=>Vn(e.networkMode)&&e.canRun(),m=_=>{o()||(s==null||s(),a.resolve(_))},g=_=>{o()||(s==null||s(),a.reject(_))},p=()=>new Promise(_=>{var v;s=w=>{(o()||u())&&_(w)},(v=e.onPause)==null||v.call(e)}).then(()=>{var _;s=void 0,o()||(_=e.onContinue)==null||_.call(e)}),j=()=>{if(o())return;let _;const v=r===0?e.initialPromise:void 0;try{_=v??e.fn()}catch(w){_=Promise.reject(w)}Promise.resolve(_).then(m).catch(w=>{var O;if(o())return;const F=e.retry??(vt?0:3),I=e.retryDelay??oi,k=typeof I=="function"?I(r,w):I,$=F===!0||typeof F=="number"&&r<F||typeof F=="function"&&F(r,w);if(t||!$){g(w);return}r++,(O=e.onFail)==null||O.call(e,r,w),Xo(k).then(()=>u()?void 0:p()).then(()=>{t?g(w):j()})})};return{promise:a,status:()=>a.status,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:c,continueRetry:l,canStart:h,start:()=>(h()?j():p().then(j),a)}}var dt,Cn,Hn=(Cn=class{constructor(){E(this,dt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dr(this.gcTime)&&N(this,dt,lt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(vt?1/0:5*60*1e3))}clearGcTimeout(){d(this,dt)&&(lt.clearTimeout(d(this,dt)),N(this,dt,void 0))}},dt=new WeakMap,Cn),ht,Tt,ke,mt,ne,Yt,pt,Ee,Ze,zn,ii=(zn=class extends Hn{constructor(t){super();E(this,Ee);E(this,ht);E(this,Tt);E(this,ke);E(this,mt);E(this,ne);E(this,Yt);E(this,pt);N(this,pt,!1),N(this,Yt,t.defaultOptions),this.setOptions(t.options),this.observers=[],N(this,mt,t.client),N(this,ke,d(this,mt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,N(this,ht,Ts(this.options)),this.state=t.state??d(this,ht),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=d(this,ne))==null?void 0:t.promise}setOptions(t){if(this.options={...d(this,Yt),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Ts(this.options);r.data!==void 0&&(this.setState(As(r.data,r.dataUpdatedAt)),N(this,ht,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,ke).remove(this)}setData(t,r){const s=Zr(this.state.data,t,this.options);return M(this,Ee,Ze).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){M(this,Ee,Ze).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=d(this,ne))==null?void 0:s.promise;return(a=d(this,ne))==null||a.cancel(t),r?r.then(he).catch(he):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,ht))}isActive(){return this.observers.some(t=>Ne(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>at(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Bn(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,ne))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,ne))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),d(this,ke).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(d(this,ne)&&(d(this,pt)?d(this,ne).cancel({revert:!0}):d(this,ne).cancelRetry()),this.scheduleGc()),d(this,ke).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||M(this,Ee,Ze).call(this,{type:"invalidate"})}async fetch(t,r){var l,u,h,m,g,p,j,_,v,w,F,I;if(this.state.fetchStatus!=="idle"&&((l=d(this,ne))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(d(this,ne))return d(this,ne).continueRetry(),d(this,ne).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find($=>$.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,a=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(N(this,pt,!0),s.signal)})},o=()=>{const k=qn(this.options,r),O=(()=>{const B={client:d(this,mt),queryKey:this.queryKey,meta:this.meta};return a(B),B})();return N(this,pt,!1),this.options.persister?this.options.persister(k,O,this):k(O)},c=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:d(this,mt),state:this.state,fetchFn:o};return a(k),k})();(u=this.options.behavior)==null||u.onFetch(c,this),N(this,Tt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&M(this,Ee,Ze).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta}),N(this,ne,Gn({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:k=>{k instanceof Br&&k.revert&&this.setState({...d(this,Tt),fetchStatus:"idle"}),s.abort()},onFail:(k,$)=>{M(this,Ee,Ze).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{M(this,Ee,Ze).call(this,{type:"pause"})},onContinue:()=>{M(this,Ee,Ze).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const k=await d(this,ne).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(p=(g=d(this,ke).config).onSuccess)==null||p.call(g,k,this),(_=(j=d(this,ke).config).onSettled)==null||_.call(j,k,this.state.error,this),k}catch(k){if(k instanceof Br){if(k.silent)return d(this,ne).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw M(this,Ee,Ze).call(this,{type:"error",error:k}),(w=(v=d(this,ke).config).onError)==null||w.call(v,k,this),(I=(F=d(this,ke).config).onSettled)==null||I.call(F,this.state.data,k,this),k}finally{this.scheduleGc()}}},ht=new WeakMap,Tt=new WeakMap,ke=new WeakMap,mt=new WeakMap,ne=new WeakMap,Yt=new WeakMap,pt=new WeakMap,Ee=new WeakSet,Ze=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Kn(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...As(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return N(this,Tt,t.manual?a:void 0),a;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),se.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),d(this,ke).notify({query:this,type:"updated",action:t})})},zn);function Kn(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function As(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ts(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var pe,Z,Xt,ue,ft,$t,Ue,Xe,er,Rt,Ot,gt,bt,et,Pt,U,Vt,Wr,qr,Qr,Vr,Gr,Hr,Kr,Jn,En,ci=(En=class extends Ut{constructor(t,r){super();E(this,U);E(this,pe);E(this,Z);E(this,Xt);E(this,ue);E(this,ft);E(this,$t);E(this,Ue);E(this,Xe);E(this,er);E(this,Rt);E(this,Ot);E(this,gt);E(this,bt);E(this,et);E(this,Pt,new Set);this.options=r,N(this,pe,t),N(this,Xe,null),N(this,Ue,Ur()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,Z).addObserver(this),$s(d(this,Z),this.options)?M(this,U,Vt).call(this):this.updateResult(),M(this,U,Vr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jr(d(this,Z),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jr(d(this,Z),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,M(this,U,Gr).call(this),M(this,U,Hr).call(this),d(this,Z).removeObserver(this)}setOptions(t){const r=this.options,s=d(this,Z);if(this.options=d(this,pe).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ne(this.options.enabled,d(this,Z))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");M(this,U,Kr).call(this),d(this,Z).setOptions(this.options),r._defaulted&&!vr(this.options,r)&&d(this,pe).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,Z),observer:this});const a=this.hasListeners();a&&Rs(d(this,Z),s,this.options,r)&&M(this,U,Vt).call(this),this.updateResult(),a&&(d(this,Z)!==s||Ne(this.options.enabled,d(this,Z))!==Ne(r.enabled,d(this,Z))||at(this.options.staleTime,d(this,Z))!==at(r.staleTime,d(this,Z)))&&M(this,U,Wr).call(this);const o=M(this,U,qr).call(this);a&&(d(this,Z)!==s||Ne(this.options.enabled,d(this,Z))!==Ne(r.enabled,d(this,Z))||o!==d(this,et))&&M(this,U,Qr).call(this,o)}getOptimisticResult(t){const r=d(this,pe).getQueryCache().build(d(this,pe),t),s=this.createResult(r,t);return ui(this,s)&&(N(this,ue,s),N(this,$t,this.options),N(this,ft,d(this,Z).state)),s}getCurrentResult(){return d(this,ue)}trackResult(t,r){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&d(this,Ue).status==="pending"&&d(this,Ue).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){d(this,Pt).add(t)}getCurrentQuery(){return d(this,Z)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=d(this,pe).defaultQueryOptions(t),s=d(this,pe).getQueryCache().build(d(this,pe),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return M(this,U,Vt).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,ue)))}createResult(t,r){var Q;const s=d(this,Z),a=this.options,o=d(this,ue),i=d(this,ft),c=d(this,$t),u=t!==s?t.state:d(this,Xt),{state:h}=t;let m={...h},g=!1,p;if(r._optimisticResults){const P=this.hasListeners(),te=!P&&$s(t,r),ye=P&&Rs(t,s,r,a);(te||ye)&&(m={...m,...Kn(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:j,errorUpdatedAt:_,status:v}=m;p=m.data;let w=!1;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let P;o!=null&&o.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData)?(P=o.data,w=!0):P=typeof r.placeholderData=="function"?r.placeholderData((Q=d(this,Ot))==null?void 0:Q.state.data,d(this,Ot)):r.placeholderData,P!==void 0&&(v="success",p=Zr(o==null?void 0:o.data,P,r),g=!0)}if(r.select&&p!==void 0&&!w)if(o&&p===(i==null?void 0:i.data)&&r.select===d(this,er))p=d(this,Rt);else try{N(this,er,r.select),p=r.select(p),p=Zr(o==null?void 0:o.data,p,r),N(this,Rt,p),N(this,Xe,null)}catch(P){N(this,Xe,P)}d(this,Xe)&&(j=d(this,Xe),p=d(this,Rt),_=Date.now(),v="error");const F=m.fetchStatus==="fetching",I=v==="pending",k=v==="error",$=I&&F,O=p!==void 0,S={status:v,fetchStatus:m.fetchStatus,isPending:I,isSuccess:v==="success",isError:k,isInitialLoading:$,isLoading:$,data:p,dataUpdatedAt:m.dataUpdatedAt,error:j,errorUpdatedAt:_,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:F,isRefetching:F&&!I,isLoadingError:k&&!O,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:k&&O,isStale:us(t,r),refetch:this.refetch,promise:d(this,Ue),isEnabled:Ne(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=Fe=>{S.status==="error"?Fe.reject(S.error):S.data!==void 0&&Fe.resolve(S.data)},te=()=>{const Fe=N(this,Ue,S.promise=Ur());P(Fe)},ye=d(this,Ue);switch(ye.status){case"pending":t.queryHash===s.queryHash&&P(ye);break;case"fulfilled":(S.status==="error"||S.data!==ye.value)&&te();break;case"rejected":(S.status!=="error"||S.error!==ye.reason)&&te();break}}return S}updateResult(){const t=d(this,ue),r=this.createResult(d(this,Z),this.options);if(N(this,ft,d(this,Z).state),N(this,$t,this.options),d(this,ft).data!==void 0&&N(this,Ot,d(this,Z)),vr(r,t))return;N(this,ue,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!d(this,Pt).size)return!0;const i=new Set(o??d(this,Pt));return this.options.throwOnError&&i.add("error"),Object.keys(d(this,ue)).some(c=>{const l=c;return d(this,ue)[l]!==t[l]&&i.has(l)})};M(this,U,Jn).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&M(this,U,Vr).call(this)}},pe=new WeakMap,Z=new WeakMap,Xt=new WeakMap,ue=new WeakMap,ft=new WeakMap,$t=new WeakMap,Ue=new WeakMap,Xe=new WeakMap,er=new WeakMap,Rt=new WeakMap,Ot=new WeakMap,gt=new WeakMap,bt=new WeakMap,et=new WeakMap,Pt=new WeakMap,U=new WeakSet,Vt=function(t){M(this,U,Kr).call(this);let r=d(this,Z).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(he)),r},Wr=function(){M(this,U,Gr).call(this);const t=at(this.options.staleTime,d(this,Z));if(vt||d(this,ue).isStale||!Dr(t))return;const s=Bn(d(this,ue).dataUpdatedAt,t)+1;N(this,gt,lt.setTimeout(()=>{d(this,ue).isStale||this.updateResult()},s))},qr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,Z)):this.options.refetchInterval)??!1},Qr=function(t){M(this,U,Hr).call(this),N(this,et,t),!(vt||Ne(this.options.enabled,d(this,Z))===!1||!Dr(d(this,et))||d(this,et)===0)&&N(this,bt,lt.setInterval(()=>{(this.options.refetchIntervalInBackground||ls.isFocused())&&M(this,U,Vt).call(this)},d(this,et)))},Vr=function(){M(this,U,Wr).call(this),M(this,U,Qr).call(this,M(this,U,qr).call(this))},Gr=function(){d(this,gt)&&(lt.clearTimeout(d(this,gt)),N(this,gt,void 0))},Hr=function(){d(this,bt)&&(lt.clearInterval(d(this,bt)),N(this,bt,void 0))},Kr=function(){const t=d(this,pe).getQueryCache().build(d(this,pe),this.options);if(t===d(this,Z))return;const r=d(this,Z);N(this,Z,t),N(this,Xt,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Jn=function(t){se.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(d(this,ue))}),d(this,pe).getQueryCache().notify({query:d(this,Z),type:"observerResultsUpdated"})})},En);function li(e,t){return Ne(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function $s(e,t){return li(e,t)||e.state.data!==void 0&&Jr(e,t,t.refetchOnMount)}function Jr(e,t,r){if(Ne(t.enabled,e)!==!1&&at(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&us(e,t)}return!1}function Rs(e,t,r,s){return(e!==t||Ne(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&us(e,r)}function us(e,t){return Ne(t.enabled,e)!==!1&&e.isStaleByTime(at(t.staleTime,e))}function ui(e,t){return!vr(e.getCurrentResult(),t)}function Os(e){return{onFetch:(t,r)=>{var h,m,g,p,j;const s=t.options,a=(g=(m=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],i=((j=t.state.data)==null?void 0:j.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const u=async()=>{let _=!1;const v=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},w=qn(t.options,t.fetchOptions),F=async(I,k,$)=>{if(_)return Promise.reject();if(k==null&&I.pages.length)return Promise.resolve(I);const B=(()=>{const te={client:t.client,queryKey:t.queryKey,pageParam:k,direction:$?"backward":"forward",meta:t.options.meta};return v(te),te})(),S=await w(B),{maxPages:Q}=t.options,P=$?ti:ei;return{pages:P(I.pages,S,Q),pageParams:P(I.pageParams,k,Q)}};if(a&&o.length){const I=a==="backward",k=I?di:Ps,$={pages:o,pageParams:i},O=k(s,$);c=await F($,O,I)}else{const I=e??o.length;do{const k=l===0?i[0]??s.initialPageParam:Ps(s,c);if(l>0&&k==null)break;c=await F(c,k),l++}while(l<I)}return c};t.options.persister?t.fetchFn=()=>{var _,v;return(v=(_=t.options).persister)==null?void 0:v.call(_,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Ps(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function di(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var tr,$e,de,xt,Re,He,In,hi=(In=class extends Hn{constructor(t){super();E(this,Re);E(this,tr);E(this,$e);E(this,de);E(this,xt);N(this,tr,t.client),this.mutationId=t.mutationId,N(this,de,t.mutationCache),N(this,$e,[]),this.state=t.state||Yn(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){d(this,$e).includes(t)||(d(this,$e).push(t),this.clearGcTimeout(),d(this,de).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){N(this,$e,d(this,$e).filter(r=>r!==t)),this.scheduleGc(),d(this,de).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){d(this,$e).length||(this.state.status==="pending"?this.scheduleGc():d(this,de).remove(this))}continue(){var t;return((t=d(this,xt))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,c,l,u,h,m,g,p,j,_,v,w,F,I,k,$,O,B,S,Q;const r=()=>{M(this,Re,He).call(this,{type:"continue"})},s={client:d(this,tr),meta:this.options.meta,mutationKey:this.options.mutationKey};N(this,xt,Gn({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,te)=>{M(this,Re,He).call(this,{type:"failed",failureCount:P,error:te})},onPause:()=>{M(this,Re,He).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,de).canRun(this)}));const a=this.state.status==="pending",o=!d(this,xt).canStart();try{if(a)r();else{M(this,Re,He).call(this,{type:"pending",variables:t,isPaused:o}),await((c=(i=d(this,de).config).onMutate)==null?void 0:c.call(i,t,this,s));const te=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,s));te!==this.state.context&&M(this,Re,He).call(this,{type:"pending",context:te,variables:t,isPaused:o})}const P=await d(this,xt).start();return await((m=(h=d(this,de).config).onSuccess)==null?void 0:m.call(h,P,t,this.state.context,this,s)),await((p=(g=this.options).onSuccess)==null?void 0:p.call(g,P,t,this.state.context,s)),await((_=(j=d(this,de).config).onSettled)==null?void 0:_.call(j,P,null,this.state.variables,this.state.context,this,s)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,P,null,t,this.state.context,s)),M(this,Re,He).call(this,{type:"success",data:P}),P}catch(P){try{throw await((I=(F=d(this,de).config).onError)==null?void 0:I.call(F,P,t,this.state.context,this,s)),await(($=(k=this.options).onError)==null?void 0:$.call(k,P,t,this.state.context,s)),await((B=(O=d(this,de).config).onSettled)==null?void 0:B.call(O,void 0,P,this.state.variables,this.state.context,this,s)),await((Q=(S=this.options).onSettled)==null?void 0:Q.call(S,void 0,P,t,this.state.context,s)),P}finally{M(this,Re,He).call(this,{type:"error",error:P})}}finally{d(this,de).runNext(this)}}},tr=new WeakMap,$e=new WeakMap,de=new WeakMap,xt=new WeakMap,Re=new WeakSet,He=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),se.batch(()=>{d(this,$e).forEach(s=>{s.onMutationUpdate(t)}),d(this,de).notify({mutation:this,type:"updated",action:t})})},In);function Yn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Be,Ie,rr,An,mi=(An=class extends Ut{constructor(t={}){super();E(this,Be);E(this,Ie);E(this,rr);this.config=t,N(this,Be,new Set),N(this,Ie,new Map),N(this,rr,0)}build(t,r,s){const a=new hi({client:t,mutationCache:this,mutationId:++cr(this,rr)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){d(this,Be).add(t);const r=lr(t);if(typeof r=="string"){const s=d(this,Ie).get(r);s?s.push(t):d(this,Ie).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(d(this,Be).delete(t)){const r=lr(t);if(typeof r=="string"){const s=d(this,Ie).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&d(this,Ie).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=lr(t);if(typeof r=="string"){const s=d(this,Ie).get(r),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=lr(t);if(typeof r=="string"){const a=(s=d(this,Ie).get(r))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){se.batch(()=>{d(this,Be).forEach(t=>{this.notify({type:"removed",mutation:t})}),d(this,Be).clear(),d(this,Ie).clear()})}getAll(){return Array.from(d(this,Be))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>zs(r,s))}findAll(t={}){return this.getAll().filter(r=>zs(t,r))}notify(t){se.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return se.batch(()=>Promise.all(t.map(r=>r.continue().catch(he))))}},Be=new WeakMap,Ie=new WeakMap,rr=new WeakMap,An);function lr(e){var t;return(t=e.options.scope)==null?void 0:t.id}var We,tt,fe,qe,Qe,xr,Yr,Tn,pi=(Tn=class extends Ut{constructor(r,s){super();E(this,Qe);E(this,We);E(this,tt);E(this,fe);E(this,qe);N(this,We,r),this.setOptions(s),this.bindMethods(),M(this,Qe,xr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=d(this,We).defaultMutationOptions(r),vr(this.options,s)||d(this,We).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,fe),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&yt(s.mutationKey)!==yt(this.options.mutationKey)?this.reset():((a=d(this,fe))==null?void 0:a.state.status)==="pending"&&d(this,fe).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=d(this,fe))==null||r.removeObserver(this)}onMutationUpdate(r){M(this,Qe,xr).call(this),M(this,Qe,Yr).call(this,r)}getCurrentResult(){return d(this,tt)}reset(){var r;(r=d(this,fe))==null||r.removeObserver(this),N(this,fe,void 0),M(this,Qe,xr).call(this),M(this,Qe,Yr).call(this)}mutate(r,s){var a;return N(this,qe,s),(a=d(this,fe))==null||a.removeObserver(this),N(this,fe,d(this,We).getMutationCache().build(d(this,We),this.options)),d(this,fe).addObserver(this),d(this,fe).execute(r)}},We=new WeakMap,tt=new WeakMap,fe=new WeakMap,qe=new WeakMap,Qe=new WeakSet,xr=function(){var s;const r=((s=d(this,fe))==null?void 0:s.state)??Yn();N(this,tt,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Yr=function(r){se.batch(()=>{var s,a,o,i,c,l,u,h;if(d(this,qe)&&this.hasListeners()){const m=d(this,tt).variables,g=d(this,tt).context,p={client:d(this,We),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(s=d(this,qe)).onSuccess)==null||a.call(s,r.data,m,g,p),(i=(o=d(this,qe)).onSettled)==null||i.call(o,r.data,null,m,g,p)):(r==null?void 0:r.type)==="error"&&((l=(c=d(this,qe)).onError)==null||l.call(c,r.error,m,g,p),(h=(u=d(this,qe)).onSettled)==null||h.call(u,void 0,r.error,m,g,p))}this.listeners.forEach(m=>{m(d(this,tt))})})},Tn),Oe,$n,fi=($n=class extends Ut{constructor(t={}){super();E(this,Oe);this.config=t,N(this,Oe,new Map)}build(t,r,s){const a=r.queryKey,o=r.queryHash??is(a,r);let i=this.get(o);return i||(i=new ii({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){d(this,Oe).has(t.queryHash)||(d(this,Oe).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=d(this,Oe).get(t.queryHash);r&&(t.destroy(),r===t&&d(this,Oe).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){se.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return d(this,Oe).get(t)}getAll(){return[...d(this,Oe).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Cs(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>Cs(t,s)):r}notify(t){se.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){se.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){se.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Oe=new WeakMap,$n),J,rt,st,Ft,Mt,nt,Dt,Lt,Rn,gi=(Rn=class{constructor(e={}){E(this,J);E(this,rt);E(this,st);E(this,Ft);E(this,Mt);E(this,nt);E(this,Dt);E(this,Lt);N(this,J,e.queryCache||new fi),N(this,rt,e.mutationCache||new mi),N(this,st,e.defaultOptions||{}),N(this,Ft,new Map),N(this,Mt,new Map),N(this,nt,0)}mount(){cr(this,nt)._++,d(this,nt)===1&&(N(this,Dt,ls.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,J).onFocus())})),N(this,Lt,yr.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,J).onOnline())})))}unmount(){var e,t;cr(this,nt)._--,d(this,nt)===0&&((e=d(this,Dt))==null||e.call(this),N(this,Dt,void 0),(t=d(this,Lt))==null||t.call(this),N(this,Lt,void 0))}isFetching(e){return d(this,J).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return d(this,rt).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,J).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=d(this,J).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(at(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return d(this,J).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=d(this,J).get(s.queryHash),o=a==null?void 0:a.state.data,i=Jo(t,o);if(i!==void 0)return d(this,J).build(this,s).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return se.batch(()=>d(this,J).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,J).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=d(this,J);se.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=d(this,J);return se.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=se.batch(()=>d(this,J).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(he).catch(he)}invalidateQueries(e,t={}){return se.batch(()=>(d(this,J).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=se.batch(()=>d(this,J).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(he)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(he)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=d(this,J).build(this,t);return r.isStaleByTime(at(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(he).catch(he)}fetchInfiniteQuery(e){return e.behavior=Os(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(he).catch(he)}ensureInfiniteQueryData(e){return e.behavior=Os(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return yr.isOnline()?d(this,rt).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,J)}getMutationCache(){return d(this,rt)}getDefaultOptions(){return d(this,st)}setDefaultOptions(e){N(this,st,e)}setQueryDefaults(e,t){d(this,Ft).set(yt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...d(this,Ft).values()],r={};return t.forEach(s=>{Ht(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){d(this,Mt).set(yt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...d(this,Mt).values()],r={};return t.forEach(s=>{Ht(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...d(this,st).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=is(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===cs&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...d(this,st).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){d(this,J).clear(),d(this,rt).clear()}},J=new WeakMap,rt=new WeakMap,st=new WeakMap,Ft=new WeakMap,Mt=new WeakMap,nt=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,Rn),Xn=f.createContext(void 0),ds=e=>{const t=f.useContext(Xn);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},bi=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(Xn.Provider,{value:e,children:t})),ea=f.createContext(!1),xi=()=>f.useContext(ea);ea.Provider;function ta(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ra=f.createContext(ta()),vi=()=>f.useContext(ra),yi=({children:e})=>{const[t]=f.useState(()=>ta());return n.jsx(ra.Provider,{value:t,children:typeof e=="function"?e(t):e})},wi=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ji=e=>{f.useEffect(()=>{e.clearReset()},[e])},_i=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Qn(r,[e.error,s])),ki=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>r(s(...a)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ni=(e,t)=>e.isLoading&&e.isFetching&&!t,Si=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Fs=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ci(e,t,r){var m,g,p,j,_;const s=xi(),a=vi(),o=ds(),i=o.defaultQueryOptions(e);(g=(m=o.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,i),i._optimisticResults=s?"isRestoring":"optimistic",ki(i),wi(i,a),ji(a);const c=!o.getQueryCache().get(i.queryHash),[l]=f.useState(()=>new t(o,i)),u=l.getOptimisticResult(i),h=!s&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(v=>{const w=h?l.subscribe(se.batchCalls(v)):he;return l.updateResult(),w},[l,h]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),f.useEffect(()=>{l.setOptions(i)},[i,l]),Si(i,u))throw Fs(i,l,a);if(_i({result:u,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((j=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||j.call(p,i,u),i.experimental_prefetchInRender&&!vt&&Ni(u,s)){const v=c?Fs(i,l,a):(_=o.getQueryCache().get(i.queryHash))==null?void 0:_.promise;v==null||v.catch(he).finally(()=>{l.updateResult()})}return i.notifyOnChangeProps?u:l.trackResult(u)}function zi(e,t){return Ci(e,ci)}function Ei(e,t){const r=ds(),[s]=f.useState(()=>new pi(r,e));f.useEffect(()=>{s.setOptions(e)},[s,e]);const a=f.useSyncExternalStore(f.useCallback(i=>s.subscribe(se.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=f.useCallback((i,c)=>{s.mutate(i,c).catch(he)},[s]);if(a.error&&Qn(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}const sa="maihouse_config";async function Ii(e){return(await fetch(e)).json()}function Ai(e){return e&&typeof e=="object"&&typeof e.apiBaseUrl=="string"&&typeof e.appVersion=="string"&&typeof e.minBackend=="string"&&typeof e.features=="object"}async function Ti(){try{const r=localStorage.getItem(sa);if(r){const s=JSON.parse(r);if(Ai(s))return{...s,...na()}}}catch{}const t=`${window.location.origin}/maihouses/app.config.json`;return Ii(t)}function ze(e){const t=new URLSearchParams(location.search).get(e),r=location.hash.indexOf("?");return(r>-1?new URLSearchParams(location.hash.slice(r)).get(e):null)??t??void 0}function na(){const e=ze("slots"),t=e?e.split(",").reduce((r,s)=>(r[s.trim()]=!0,r),{}):void 0;return{apiBaseUrl:ze("api"),features:t,mock:ze("mock")?ze("mock")==="1":void 0,latency:ze("latency")?+ze("latency"):void 0,error:ze("error")?+ze("error"):void 0,q:ze("q"),devtools:ze("devtools"),mockSeed:ze("seed")}}async function aa(){const e=await Ti(),t=na(),r={...e,...t,mock:t.mock??e.mock??!0,latency:t.latency??e.latency??0,error:t.error??e.error??0};try{localStorage.setItem(sa,JSON.stringify(r))}catch{}return r}const $i="modulepreload",Ri=function(e){return"/maihouses/"+e},Ms={},Oi=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=Ri(l),l in Ms)return;Ms[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":$i,u||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((g,p)=>{m.addEventListener("load",g),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return a.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};let ur;const Pi=new Uint8Array(16);function Fi(){if(!ur&&(ur=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ur))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ur(Pi)}const ie=[];for(let e=0;e<256;++e)ie.push((e+256).toString(16).slice(1));function Mi(e,t=0){return ie[e[t+0]]+ie[e[t+1]]+ie[e[t+2]]+ie[e[t+3]]+"-"+ie[e[t+4]]+ie[e[t+5]]+"-"+ie[e[t+6]]+ie[e[t+7]]+"-"+ie[e[t+8]]+ie[e[t+9]]+"-"+ie[e[t+10]]+ie[e[t+11]]+ie[e[t+12]]+ie[e[t+13]]+ie[e[t+14]]+ie[e[t+15]]}const Di=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ds={randomUUID:Di};function Xr(e,t,r){if(Ds.randomUUID&&!e)return Ds.randomUUID();e=e||{};const s=e.random||(e.rng||Fi)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Mi(s)}function be(e,t){try{console.debug("[track]",e,t||{})}catch{}}const xe={QuietOn:"user.needs_quiet_space",QuietOff:"user.back_to_explore",QuietAutoOff:"user.quiet_space_timeout",QuietTurnUsed:"user.quiet_space_turn_used",WarmbarView:"ui.warmbar_view",WarmbarContinue:"ui.warmbar_click_continue",WarmbarDismiss:"ui.warmbar_click_dismiss",MoodPick:"user.feeling_set",NoteSaved:"user.reflects_on_viewing",DebriefGen:"user.debrief_mna_generated",DebriefSave:"user.debrief_saved",BudgetCopy:"user.seeks_budget_clarity",ELI5Open:"user.needs_plain_explain",RewriteGen:"user.needs_polite_message_generated",RewriteAdopt:"user.polite_message_adopted"},oa="mai-quiet-mode-v1",Li=f.createContext(null);function Ls(){try{const e=localStorage.getItem(oa);return e?JSON.parse(e):{isQuiet:!1,untilTs:null,remainingTurns:null}}catch{return{isQuiet:!1,untilTs:null,remainingTurns:null}}}function Nt(e){localStorage.setItem(oa,JSON.stringify(e))}const Zi=({children:e})=>{const[t,r]=f.useState(()=>Ls()),s=f.useRef(null),a=f.useCallback(()=>{if(!t.isQuiet)return!1;const u=Date.now();return!(t.untilTs&&u>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)},[t]);f.useEffect(()=>{const u=Date.now();t.isQuiet&&t.untilTs&&u>t.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),Nt({isQuiet:!1,untilTs:null,remainingTurns:null}))},[t]),f.useEffect(()=>(s.current&&window.clearInterval(s.current),s.current=window.setInterval(()=>{const u=Date.now(),h=Ls();h.isQuiet&&h.untilTs&&u>h.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),Nt({isQuiet:!1,untilTs:null,remainingTurns:null}))},3e4),()=>{s.current&&window.clearInterval(s.current)}),[]);const o=f.useCallback(u=>{const h=(u==null?void 0:u.minutes)??null,m=(u==null?void 0:u.turns)??10,g=u==null?void 0:u.reason,p=h?Date.now()+h*6e4:null,j={isQuiet:!0,...g&&{reason:g},untilTs:p,remainingTurns:m};r(j),Nt(j),be(xe.QuietOn,{reason:g,minutes:h,turns:m})},[]),i=f.useCallback(()=>{const u={isQuiet:!1,untilTs:null,remainingTurns:null};r(u),Nt(u),be(xe.QuietOff,{})},[]),c=f.useCallback(()=>{r(u=>{if(!u.isQuiet||u.remainingTurns===null)return u;const h=Math.max(0,(u.remainingTurns??0)-1),m={...u,remainingTurns:h};if(Nt(m),h===0){const g={isQuiet:!1,untilTs:null,remainingTurns:null};return Nt(g),be(xe.QuietAutoOff,{reason:"turns_exhausted"}),g}return m})},[]),l=f.useMemo(()=>({state:t,startQuiet:o,clearQuiet:i,decrementTurn:c,isActive:a}),[t,o,i,c,a]);return n.jsx(Li.Provider,{value:l,children:e})};function Ui(){try{const e=localStorage.getItem("mai-quiet-mode-v1");if(!e)return!1;const t=JSON.parse(e),r=Date.now();return!(!t.isQuiet||t.untilTs&&r>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)}catch{return!1}}const ia="mai-user-profile-v1",Zs="mai-first-seen-ts",ca="mai-warmbar-dismissed-date";function sr(){try{const e=localStorage.getItem(ia);return e?JSON.parse(e):{tags:[]}}catch{return{tags:[]}}}function la(e){localStorage.setItem(ia,JSON.stringify(e))}function Bi(e){const t=sr(),r=new Set([...t.tags||[],...e].filter(Boolean));t.tags=Array.from(r).slice(0,8),la(t)}function Wi(e){const t=sr();t.lastMood=e,la(t)}function qi(){return localStorage.getItem(Zs)?{isFirstVisit:!1}:(localStorage.setItem(Zs,String(Date.now())),{isFirstVisit:!0})}function Qi(){localStorage.setItem(ca,ua())}function Vi(){return localStorage.getItem(ca)===ua()}function Gi(e=3){return(sr().tags||[]).slice(0,e)}function ua(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${s}`}function Hi(e,t){const s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((s-a)/864e5)}function Ki(e){if(!e)return null;const t=new Date;if(e.birthday){const r=Us(e.birthday,t,7);if(r)return r}if(e.move_in_date){const r=Us(e.move_in_date,t,7,"搬家");if(r)return r}return null}function Us(e,t,r=7,s){const[a,o,i]=e.split("-").map(u=>Number(u));if(!a||!o||!i)return null;const c=new Date(t.getFullYear(),o-1,i);return Math.abs(Hi(c,t))<=r?s==="搬家"?"搬家一週年！":"生日快樂！":null}const Ji="你是邁房子的在地好鄰居助理（暱稱：邁邁）。語氣溫暖、尊重，台灣語境。回覆≤2行，先同理再資訊，避免推銷語。",Yi="你是邁邁。使用者啟用安靜模式，現在只想被陪伴。100% 傾聽與同理，回覆 1–2 句；嚴禁主動推薦任何房源/社區/廣告。";function Xi(){const e=Ui(),t=localStorage.getItem("mai-mood-v1")||"neutral",s=(sr().tags||[]).slice(0,5),a=t==="stress"?"偵測到對方壓力較大：降低資訊量、避免指示語、用安撫口吻。":t==="rest"?"對方想放鬆：可以輕鬆、溫暖地聊天，不必急著提供建議。":"保持友善、清晰的語氣。",o=s.length?`使用者在意：${s.join("、")}。未被詢問時不要主動推任何清單，但可在相關話題出現時輕柔承接。`:"";return[e?Yi:Ji,a,o,"所有輸出需簡潔、真誠，拒絕銷售話術。"].filter(Boolean).join(`
`)}async function nr(e,t,r){var l,u,h,m,g,p;const s=typeof t=="function"?t:void 0,a=typeof t=="object"?t:r,o=await fetch("/api/openai-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:Xi()},...e],temperature:(a==null?void 0:a.temperature)??.7,max_tokens:(a==null?void 0:a.max_tokens)??300,stream:!!s})});if(!o.ok)throw new Error(`LLM proxy error: ${o.status}`);if(s&&o.body){const j=o.body.getReader(),_=new TextDecoder;let v="";for(;;){const{done:w,value:F}=await j.read();if(w)break;const k=_.decode(F,{stream:!0}).split(`
`);for(const $ of k)if($.startsWith("data: ")){const O=$.slice(6);if(O==="[DONE]")continue;try{const B=JSON.parse(O),S=(h=(u=(l=B==null?void 0:B.choices)==null?void 0:l[0])==null?void 0:u.delta)==null?void 0:h.content;S&&(v+=S,s(S))}catch{}}}return v}const i=await o.json();return((p=(g=(m=i==null?void 0:i.choices)==null?void 0:m[0])==null?void 0:g.message)==null?void 0:p.content)??""}async function ec(e,t){const r=(t==null?void 0:t.audience)==="owner"?"屋主":"仲介",s=(()=>{switch(t==null?void 0:t.intent){case"view":return"預約看房";case"detail":return"詢問物件細節";case"pet":return"確認是否可養寵物";case"price":return"詢問價格與議價空間";default:return"一般詢問"}})(),a=`請將以下訊息改寫成「禮貌、簡短、尊重」的兩個版本（V1/V2），情境：要發給「${r}」，目的：「${s}」。維持原意，避免命令語：
---
${e}
---
格式：
V1：...
V2：...`;return nr([{role:"user",content:a}],{max_tokens:220})}async function tc(e){const t=`以下是一段對物件的主觀感受，請以同理的語氣回聲，僅 1–2 句、避免建議：
「${e}」`;return nr([{role:"user",content:t}],{max_tokens:80})}async function rc(e){const t=`請用白話、非法律意見的方式解釋這段名詞/條款，列出「重點」與「注意」各1–2點，總長≤2行：
${e}`;return nr([{role:"user",content:t}],{max_tokens:120})}async function sc(e,t,r){const s=`我看完一間房，請把重點分成「必要(Must)」「加分(Nice)」「不要(Avoid)」各2–3點，總長≤2行；並在最後一行輸出 #tags: 以逗號分隔 3–5 個關鍵字（避免人名/品牌）。
喜歡：${e}
困擾：${t}
下一步：${r}`;return nr([{role:"user",content:s}],{max_tokens:160})}let da=Xr();const ha=()=>da;async function ma(e,t={}){const r=await aa(),s=`${r.apiBaseUrl}${e}`,a=(t.method||"GET").toUpperCase(),o={Accept:"application/json","X-API-Version":"v1","X-App-Version":r.appVersion,"X-Session-Id":da,"X-Request-Id":Xr(),"Accept-Language":"zh-Hant-TW"},i=(()=>{const h=t.headers;if(!h)return{};if(h instanceof Headers){const m={};for(const[g,p]of h)m[g]=p;return m}return Array.isArray(h)?Object.fromEntries(h):h})();a==="POST"&&!i["Idempotency-Key"]&&!i["idempotency-key"]&&(i["Idempotency-Key"]=Xr());const c={...o,...i};if(r.mock){const{mockHandler:h}=await Oi(async()=>{const{mockHandler:m}=await import("./index-BE3T1KOW.js");return{mockHandler:m}},__vite__mapDeps([0,1,2,3]));return h(e,{...t,headers:c})}const l=new AbortController,u=setTimeout(()=>l.abort(),8e3);try{const h=await fetch(s,{...t,headers:c,signal:l.signal});return h.ok?{ok:!0,data:await h.json()}:{ok:!1,error:{code:"API_ERROR",message:"API 請求失敗"}}}catch(h){return(h==null?void 0:h.name)==="AbortError"?{ok:!1,error:{code:"NETWORK_TIMEOUT",message:"請求超時"}}:{ok:!1,error:{code:"NETWORK_ERROR",message:h.message}}}finally{clearTimeout(u)}}const pa=()=>ma("/api/v1/meta");function nc({config:e}){const[t,r]=f.useState(!0),[s,a]=f.useState(!!e.mock),[o,i]=f.useState(e.latency??0),[c,l]=f.useState(e.error??0),[u,h]=f.useState(e.q??""),[m,g]=f.useState("—"),[p,j]=f.useState(e.mockSeed??"");if(f.useEffect(()=>{pa().then(w=>g(w.ok&&w.data?w.data.backendVersion:"—"))},[]),!t)return null;const _=()=>{const w={...e,mock:s,latency:o,error:c,q:u,mockSeed:p,devtools:"1"};try{localStorage.setItem("maihouse_config",JSON.stringify(w))}catch{}location.reload()},v=()=>{const w=String(Date.now());j(w);try{localStorage.setItem("maihouse_config",JSON.stringify({...e,mockSeed:w,mock:s,latency:o,error:c,q:u,devtools:"1"}))}catch{}location.reload()};return n.jsxs("aside",{className:"fixed bottom-4 right-4 z-[var(--z-overlay)] w-[320px] rounded-[var(--r-lg)] bg-white p-4 text-sm shadow-[var(--shadow-card)]",children:[n.jsx("div",{className:"mb-2 font-medium",children:"Developer HUD"}),n.jsxs("div",{className:"space-y-1 text-[var(--text-secondary)]",children:[n.jsxs("div",{children:["API：",e.apiBaseUrl]}),n.jsxs("div",{children:["App：",e.appVersion]}),n.jsxs("div",{children:["Backend：",m]}),n.jsxs("div",{children:["Session：",ha()]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:w=>a(w.target.checked)})," Mock"]}),n.jsxs("label",{className:"flex items-center gap-2",children:["Latency",n.jsx("input",{className:"w-20 rounded border p-1",type:"number",value:o,onChange:w=>i(+w.target.value||0)})]}),n.jsxs("label",{className:"flex items-center gap-2",children:["Error",n.jsx("input",{className:"w-20 rounded border p-1",step:"0.1",type:"number",value:c,onChange:w=>l(+w.target.value||0)})]}),n.jsxs("label",{className:"flex items-center gap-2",children:["q ",n.jsx("input",{className:"flex-1 rounded border p-1",value:u,onChange:w=>h(w.target.value)})]}),n.jsxs("label",{className:"flex items-center gap-2",children:["seed",n.jsx("input",{className:"flex-1 rounded border p-1",value:p,onChange:w=>j(w.target.value)})]})]}),n.jsxs("div",{className:"mt-3 flex justify-between",children:[n.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-100)] px-3 py-1",onClick:()=>r(!1),children:"關閉"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-300)] px-3 py-1",onClick:v,children:"🎲 換數據"}),n.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--brand)] px-3 py-1 text-[var(--brand-fg)]",onClick:_,children:"更新"})]})]})]})}const fa="uag_queue",es=1e4,ac=200,W=globalThis.__UAG__||(globalThis.__UAG__={queue:[],backoff:1e4,attempts:0});try{W.queue=JSON.parse(localStorage.getItem(fa)||"[]")}catch{W.queue=[]}const ga=()=>{try{localStorage.setItem(fa,JSON.stringify(W.queue.slice(-es)))}catch{}},hs=3e5;async function ba(e){var r;const t=await ma("/api/v1/uag/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const s=new Set(e.map(a=>a.requestId));W.queue=W.queue.filter(a=>!s.has(a.requestId)),ga(),W.attempts=0,W.backoff=1e4}else{W.attempts++;const s=(r=t==null?void 0:t.data)==null?void 0:r.retryAfterMs;W.backoff=Math.min(s??W.backoff*2,hs)}}function wr(){W.timer&&clearTimeout(W.timer),W.timer=setTimeout(oc,W.backoff)}function oc(){if(W.queue.length){const e=W.queue.slice(0,ac);ba(e).catch(()=>{W.attempts++,W.backoff=Math.min(W.backoff*2,hs)}).finally(wr)}else wr()}wr();function ic(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:t&3|8).toString(16)})}function ar(e,t,r){if(!(e!=null&&e.trim())||!(t!=null&&t.trim())){console.warn("[UAG] 無效的事件或頁面名稱，已忽略上報");return}const s={event:e,page:t,sessionId:ha(),userId:null,ts:new Date().toISOString(),meta:{origin:"gh-pages"},requestId:ic()};r&&(s.targetId=r),W.queue.push(s),W.queue.length>es&&(W.queue=W.queue.slice(-es)),ga(),ba([s]).catch(()=>{W.attempts++,W.backoff=Math.min(W.backoff*2,hs),wr()})}const cc=({showSlogan:e=!0,className:t="",onClick:r,href:s="/maihouses/"})=>{const a=()=>n.jsxs("div",{className:`flex items-center gap-3 group cursor-pointer ${t}`,children:[n.jsxs("div",{className:"relative w-[42px] h-[42px] bg-gradient-to-br from-brand-700 to-[#005282] rounded-xl flex items-center justify-center shadow-lg shadow-brand-700/20 overflow-hidden transition-all duration-300 group-hover:scale-105 group-hover:shadow-brand-700/30",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent translate-y-full group-hover:translate-y-0 transition-transform duration-700 ease-out"}),n.jsxs("svg",{className:"w-[22px] h-[22px] text-white relative z-10 drop-shadow-sm transform transition-transform duration-300 group-hover:-translate-y-[1px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M3 9.5L12 3L21 9.5V20.5C21 21.0523 20.5523 21.5 20 21.5H4C3.44772 21.5 3 21.0523 3 20.5V9.5Z"}),n.jsx("path",{d:"M9 21.5V13H15V21.5"})]}),n.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[#FF6B6B] rounded-full shadow-[0_0_0_1.5px_#004E7C]"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex items-baseline gap-1",children:n.jsx("span",{className:"text-[24px] font-bold font-serif text-brand-700 tracking-wide leading-none",children:"邁房子"})}),e&&n.jsx("div",{className:"hidden sm:flex items-center ml-3 pl-3 border-l-2 border-brand-100/80 h-5",children:n.jsx("span",{className:"text-[15px] font-bold text-brand-500 tracking-[0.15em] uppercase group-hover:text-brand-700 transition-colors leading-none pt-[1px]",children:"讓家，不只是地址"})})]})]});return s?n.jsx("a",{href:s,onClick:r,className:"no-underline",children:n.jsx(a,{})}):n.jsx("div",{onClick:r,children:n.jsx(a,{})})};function xa({onOpenAIStudio:e}){return n.jsxs(n.Fragment,{children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-brand-100 shadow-sm transition-all",children:n.jsxs("div",{className:"max-w-[1120px] mx-auto px-4 h-16 flex items-center justify-between",children:[n.jsx(cc,{showSlogan:!0,onClick:()=>window.scrollTo({top:0,behavior:"smooth"})}),n.jsxs("nav",{className:"flex items-center gap-1 md:gap-2","aria-label":"主要動作",children:[n.jsxs("a",{href:"/maihouses/property.html",className:"hidden md:flex items-center gap-2 px-4 py-2.5 rounded-xl text-brand-700 font-bold text-[15px] hover:bg-brand-50/80 hover:text-brand-600 transition-all active:scale-[0.98]",children:[n.jsx(bo,{size:18,strokeWidth:2.5,className:"opacity-80"}),n.jsx("span",{children:"房地產列表"})]}),n.jsxs("a",{href:"/maihouses/auth.html?mode=login",className:"hidden md:flex items-center gap-2 px-4 py-2.5 rounded-xl text-brand-700 font-bold text-[15px] hover:bg-brand-50/80 hover:text-brand-600 transition-all active:scale-[0.98]",children:[n.jsx(xo,{size:18,strokeWidth:2.5,className:"opacity-80"}),n.jsx("span",{children:"登入"})]}),n.jsxs("a",{href:"/maihouses/auth.html?mode=signup",className:"ml-1 flex items-center gap-2 px-5 py-2.5 rounded-xl bg-brand-700 text-white font-bold text-[15px] shadow-md shadow-brand-700/10 border border-transparent hover:bg-brand-600 hover:shadow-lg hover:shadow-brand-700/20 hover:-translate-y-0.5 transition-all active:scale-[0.98]",children:[n.jsx(vo,{size:18,strokeWidth:2.5}),n.jsx("span",{children:"免費註冊"})]})]})]})}),n.jsx("div",{className:"relative bg-brand-50 border-b border-brand-100/50",children:n.jsx("div",{className:"max-w-[1120px] mx-auto relative z-10 pt-24 pb-6 px-4",children:n.jsxs("div",{className:"max-w-3xl mx-auto relative",children:[n.jsxs("div",{className:"absolute -top-[44px] right-[5%] md:right-[10%] z-0 pointer-events-none select-none animate-float md:animate-float-desktop",children:[n.jsxs("div",{className:"absolute bottom-[92%] right-[55%] w-[260px] whitespace-normal md:w-auto md:max-w-none md:whitespace-nowrap md:bottom-[94%] md:right-[65%] bg-white border-2 border-brand-100 px-5 py-2 md:py-3 rounded-2xl rounded-br-none shadow-lg animate-fadeIn origin-bottom-right",children:[n.jsxs("p",{className:"text-[11px] md:text-sm font-bold text-ink-700 leading-relaxed text-left",children:["買房這麼大的事，先到 ",n.jsx("span",{className:"text-brand-700 font-black",children:"邁鄰居"}),"，為未來的家查口碑、找評價，最放心！"]}),n.jsx("div",{className:"absolute -bottom-2.5 right-3 w-5 h-5 bg-white border-r-2 border-b-2 border-brand-100 transform rotate-45"})]}),n.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 relative z-10",children:n.jsxs("svg",{viewBox:"0 0 200 240",className:"w-full h-full drop-shadow-sm",children:[n.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"#00385a",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"#00385a",strokeWidth:"6",fill:"#F6F9FF",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),n.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),n.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),n.jsx("path",{d:"M 55 130 L 35 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 145 130 L 165 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"})]})})]}),n.jsx("div",{className:"relative group z-20",children:n.jsxs("div",{className:"flex items-center h-[60px] pl-[28px] pr-2 rounded-full transition-all duration-300 bg-white border border-brand-100 shadow-[0_8px_30px_rgba(0,56,90,0.08)] group-hover:shadow-[0_12px_40px_rgba(0,56,90,0.12)] focus-within:border-brand-300 focus-within:ring-4 focus-within:ring-brand-50",children:[n.jsx("div",{className:"pr-4 text-gray-400 group-focus-within:text-gray-600 transition-colors",children:n.jsx(yo,{size:22,strokeWidth:2.5})}),n.jsx("input",{type:"text",placeholder:"找評價最高的社區、捷運站周邊好屋...",className:"w-full h-full bg-transparent text-gray-700 font-bold text-lg placeholder:text-gray-400 placeholder:font-medium outline-none"}),n.jsx("button",{className:"h-[46px] px-8 bg-brand-700 text-white rounded-full font-bold text-base hover:bg-brand-600 transition-colors flex items-center justify-center tracking-wide shadow-md hover:shadow-lg active:translate-y-px whitespace-nowrap",children:"搜尋"})]})}),n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-6 relative z-10",children:["社區評價","房仲專區","邁鄰居"].map(t=>{const r=t==="社區評價"?"/maihouses/community-wall_mvp.html":t==="房仲專區"?"https://maihouses.vercel.app/maihouses/uag":"#",s=t==="房仲專區"?"_blank":void 0;return n.jsx("a",{href:r,target:s,rel:s?"noopener noreferrer":void 0,className:"flex items-center justify-center py-3 rounded-2xl bg-brand-700 border border-brand-700 text-white font-bold text-lg tracking-wide shadow-sm transition-all duration-200 hover:bg-brand-600 hover:shadow-md hover:-translate-y-0.5 active:scale-[0.98]",children:t},t)})})]})})})]})}function lc(){return n.jsxs("svg",{viewBox:"0 0 200 240",className:"w-full h-full drop-shadow-sm transform hover:scale-105 transition-transform duration-300 text-brand",children:[n.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),n.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),n.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),n.jsx("path",{d:"M 55 130 L 25 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 145 130 L 175 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 85 180 L 85 215 L 75 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 115 180 L 115 215 L 125 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})}const Bs=[{id:"01",title:"已電聯",desc:"紀錄談話內容",icon:Mn},{id:"02",title:"已帶看",desc:"賞屋重點紀錄",icon:wo},{id:"03",title:"已出價",desc:"紀錄價格條件",icon:Dn},{id:"04",title:"已斡旋",desc:"議價過程紀錄",icon:jo},{id:"05",title:"已成交",desc:"貸款相關事項",icon:_o},{id:"06",title:"已交屋",desc:"確認圓滿交屋",icon:ko}],uc=[{id:"J",name:"J***｜景安和院 住戶",rating:5,tags:["#物業/管理"],content:"公設維護得乾淨，假日草皮有人整理。之前反映停車動線，管委會一週內就公告改善。"},{id:"W",name:"W***｜松濤苑 住戶",rating:4,tags:["#噪音"],content:"住起來整體舒服，但臨路面向在上下班尖峰車聲明顯，喜靜者建議考慮中高樓層。"},{id:"L",name:"L***｜遠揚柏悅 住戶",rating:4,tags:["#漏水/壁癌"],content:"頂樓排水設計不錯，颱風天沒有積水。不過垃圾車時間稍晚，偶爾有下水道味。"},{id:"A",name:"A***｜華固名邸 住戶",rating:5,tags:["#物業/管理"],content:"管理員很負責，包裹收發與公告都有效率；電梯偶爾故障但維修速度快。"},{id:"H",name:"H***｜寶輝花園廣場 住戶",rating:3,tags:["#停車/車位"],content:"地下室車位轉彎半徑偏小，新手要多注意；平日夜間社區整體很安靜。"},{id:"K",name:"K***｜潤泰峰匯 住戶",rating:4,tags:["#採光/日照"],content:"採光好、通風佳，夏天不會太悶熱；但西曬戶下午還是會稍微熱一些。"}],dc=[{id:1,image:"https://images.unsplash.com/photo-1600585154526-990dced4db0d?q=80&w=1600&auto=format&fit=crop",badge:"捷運 5 分鐘",title:"新板特區｜三房含車位，採光面中庭",tags:["34.2 坪","3 房 2 廳","高樓層"],price:"1,288",location:"新北市板橋區 · 中山路一段",reviews:[{avatar:"A",name:"王小姐",role:"3年住戶",tag:"管理到位",text:"管委反應快，公設打理乾淨，晚上也安靜好睡。"},{avatar:"B",name:"林先生",role:"屋主",tag:"車位好停",text:"坡道寬、指示清楚，下班回家不太需要繞圈找位。"}]},{id:2,image:"https://images.unsplash.com/photo-1575517111478-7f6afd0973db?q=80&w=1600&auto=format&fit=crop",badge:"社區中庭",title:"松山民生社區｜邊間大兩房，採光佳",tags:["28.6 坪","2 房 2 廳","可寵物"],price:"1,052",location:"台北市松山區 · 民生東路五段",reviews:[{avatar:"C",name:"陳太太",role:"5年住戶",tag:"鄰里友善",text:"警衛熱心、包裹代收確實，社區群組很活躍。"},{avatar:"D",name:"賴先生",role:"上班族",tag:"生活便利",text:"走路 3 分鐘有超市與市場，下班買菜很方便。"}]},{id:3,image:"https://images.unsplash.com/photo-1515263487990-61b07816b324?q=80&w=1600&auto=format&fit=crop",badge:"學區宅",title:"新店七張｜電梯二房，附機車位",tags:["22.1 坪","2 房 1 廳","低公設比"],price:"838",location:"新北市新店區 · 北新路二段",reviews:[{avatar:"E",name:"張小姐",role:"上班族",tag:"通勤方便",text:"步行到捷運七張站約 6 分鐘，雨天也有騎樓遮蔽。"},{avatar:"F",name:"李先生",role:"家長",tag:"學區完整",text:"附近幼兒園到國中選擇多，放學接送動線順。"}]},{id:4,image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1600&auto=format&fit=crop",badge:"河岸景觀",title:"大直美堤｜景觀三房，沁涼通風",tags:["36.8 坪","3 房 2 廳","邊間"],price:"1,560",location:"台北市中山區 · 敦化北路",reviews:[{avatar:"G",name:"蘇先生",role:"住戶",tag:"景觀佳",text:"客廳看河景很放鬆，夏天自然風就很涼。"},{avatar:"H",name:"高小姐",role:"通勤族",tag:"交通便利",text:"離公車站 2 分鐘，轉乘捷運時間可控。"}]},{id:5,image:"https://images.unsplash.com/photo-1501183638710-841dd1904471?q=80&w=1600&auto=format&fit=crop",badge:"社區花園",title:"內湖東湖｜雙面採光，小家庭首選",tags:["27.4 坪","2 房 2 廳","含機車位"],price:"968",location:"台北市內湖區 · 康寧路三段",reviews:[{avatar:"I",name:"許太太",role:"家長",tag:"公園多",text:"社區旁邊就有親子公園，假日散步很方便。"},{avatar:"J",name:"黃先生",role:"工程師",tag:"環境安靜",text:"臨巷內，夜間車流少，對面鄰居素質也不錯。"}]},{id:6,image:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1600&auto=format&fit=crop",badge:"捷運生活圈",title:"中和橋和站｜採光兩房，低管理費",tags:["24.9 坪","2 房 1 廳","社區新"],price:"898",location:"新北市中和區 · 中和路",reviews:[{avatar:"K",name:"簡小姐",role:"新婚",tag:"費用透明",text:"管委會公告清楚，管理費與車位費用都公開透明。"},{avatar:"L",name:"羅先生",role:"通勤族",tag:"通勤穩定",text:"尖峰等車可控，公車轉乘動線順，延誤較少。"}]}];function va(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=va(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function hc(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=va(e))&&(s&&(s+=" "),s+=t);return s}const mc=(e,t)=>{const r=new Array(e.length+t.length);for(let s=0;s<e.length;s++)r[s]=e[s];for(let s=0;s<t.length;s++)r[e.length+s]=t[s];return r},pc=(e,t)=>({classGroupId:e,validator:t}),ya=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),jr="-",Ws=[],fc="arbitrary..",gc=e=>{const t=xc(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return bc(i);const c=i.split(jr),l=c[0]===""&&c.length>1?1:0;return wa(c,l,t)},getConflictingClassGroupIds:(i,c)=>{if(c){const l=s[i],u=r[i];return l?u?mc(u,l):l:u||Ws}return r[i]||Ws}}},wa=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],o=r.nextPart.get(a);if(o){const u=wa(e,t+1,o);if(u)return u}const i=r.validators;if(i===null)return;const c=t===0?e.join(jr):e.slice(t).join(jr),l=i.length;for(let u=0;u<l;u++){const h=i[u];if(h.validator(c))return h.classGroupId}},bc=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),s=t.slice(0,r);return s?fc+s:void 0})(),xc=e=>{const{theme:t,classGroups:r}=e;return vc(r,t)},vc=(e,t)=>{const r=ya();for(const s in e){const a=e[s];ms(a,r,s,t)}return r},ms=(e,t,r,s)=>{const a=e.length;for(let o=0;o<a;o++){const i=e[o];yc(i,t,r,s)}},yc=(e,t,r,s)=>{if(typeof e=="string"){wc(e,t,r);return}if(typeof e=="function"){jc(e,t,r,s);return}_c(e,t,r,s)},wc=(e,t,r)=>{const s=e===""?t:ja(t,e);s.classGroupId=r},jc=(e,t,r,s)=>{if(kc(e)){ms(e(s),t,r,s);return}t.validators===null&&(t.validators=[]),t.validators.push(pc(r,e))},_c=(e,t,r,s)=>{const a=Object.entries(e),o=a.length;for(let i=0;i<o;i++){const[c,l]=a[i];ms(l,ja(t,c),r,s)}},ja=(e,t)=>{let r=e;const s=t.split(jr),a=s.length;for(let o=0;o<a;o++){const i=s[o];let c=r.nextPart.get(i);c||(c=ya(),r.nextPart.set(i,c)),r=c}return r},kc=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Nc=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null);const a=(o,i)=>{r[o]=i,t++,t>e&&(t=0,s=r,r=Object.create(null))};return{get(o){let i=r[o];if(i!==void 0)return i;if((i=s[o])!==void 0)return a(o,i),i},set(o,i){o in r?r[o]=i:a(o,i)}}},ts="!",qs=":",Sc=[],Qs=(e,t,r,s,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:a}),Cc=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=a=>{const o=[];let i=0,c=0,l=0,u;const h=a.length;for(let _=0;_<h;_++){const v=a[_];if(i===0&&c===0){if(v===qs){o.push(a.slice(l,_)),l=_+1;continue}if(v==="/"){u=_;continue}}v==="["?i++:v==="]"?i--:v==="("?c++:v===")"&&c--}const m=o.length===0?a:a.slice(l);let g=m,p=!1;m.endsWith(ts)?(g=m.slice(0,-1),p=!0):m.startsWith(ts)&&(g=m.slice(1),p=!0);const j=u&&u>l?u-l:void 0;return Qs(o,p,g,j)};if(t){const a=t+qs,o=s;s=i=>i.startsWith(a)?o(i.slice(a.length)):Qs(Sc,!1,i,void 0,!0)}if(r){const a=s;s=o=>r({className:o,parseClassName:a})}return s},zc=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,s)=>{t.set(r,1e6+s)}),r=>{const s=[];let a=[];for(let o=0;o<r.length;o++){const i=r[o],c=i[0]==="[",l=t.has(i);c||l?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(i)):a.push(i)}return a.length>0&&(a.sort(),s.push(...a)),s}},Ec=e=>({cache:Nc(e.cacheSize),parseClassName:Cc(e),sortModifiers:zc(e),...gc(e)}),Ic=/\s+/,Ac=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:o}=t,i=[],c=e.trim().split(Ic);let l="";for(let u=c.length-1;u>=0;u-=1){const h=c[u],{isExternal:m,modifiers:g,hasImportantModifier:p,baseClassName:j,maybePostfixModifierPosition:_}=r(h);if(m){l=h+(l.length>0?" "+l:l);continue}let v=!!_,w=s(v?j.substring(0,_):j);if(!w){if(!v){l=h+(l.length>0?" "+l:l);continue}if(w=s(j),!w){l=h+(l.length>0?" "+l:l);continue}v=!1}const F=g.length===0?"":g.length===1?g[0]:o(g).join(":"),I=p?F+ts:F,k=I+w;if(i.indexOf(k)>-1)continue;i.push(k);const $=a(w,v);for(let O=0;O<$.length;++O){const B=$[O];i.push(I+B)}l=h+(l.length>0?" "+l:l)}return l},Tc=(...e)=>{let t=0,r,s,a="";for(;t<e.length;)(r=e[t++])&&(s=_a(r))&&(a&&(a+=" "),a+=s);return a},_a=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=_a(e[s]))&&(r&&(r+=" "),r+=t);return r},$c=(e,...t)=>{let r,s,a,o;const i=l=>{const u=t.reduce((h,m)=>m(h),e());return r=Ec(u),s=r.cache.get,a=r.cache.set,o=c,c(l)},c=l=>{const u=s(l);if(u)return u;const h=Ac(l,r);return a(l,h),h};return o=i,(...l)=>o(Tc(...l))},Rc=[],re=e=>{const t=r=>r[e]||Rc;return t.isThemeGetter=!0,t},ka=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Na=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Oc=/^\d+\/\d+$/,Pc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fc=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Mc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Dc=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Lc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,St=e=>Oc.test(e),D=e=>!!e&&!Number.isNaN(Number(e)),Ge=e=>!!e&&Number.isInteger(Number(e)),$r=e=>e.endsWith("%")&&D(e.slice(0,-1)),De=e=>Pc.test(e),Zc=()=>!0,Uc=e=>Fc.test(e)&&!Mc.test(e),Sa=()=>!1,Bc=e=>Dc.test(e),Wc=e=>Lc.test(e),qc=e=>!C(e)&&!z(e),Qc=e=>Bt(e,Ea,Sa),C=e=>ka.test(e),ct=e=>Bt(e,Ia,Uc),Rr=e=>Bt(e,Jc,D),Vs=e=>Bt(e,Ca,Sa),Vc=e=>Bt(e,za,Wc),dr=e=>Bt(e,Aa,Bc),z=e=>Na.test(e),Qt=e=>Wt(e,Ia),Gc=e=>Wt(e,Yc),Gs=e=>Wt(e,Ca),Hc=e=>Wt(e,Ea),Kc=e=>Wt(e,za),hr=e=>Wt(e,Aa,!0),Bt=(e,t,r)=>{const s=ka.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},Wt=(e,t,r=!1)=>{const s=Na.exec(e);return s?s[1]?t(s[1]):r:!1},Ca=e=>e==="position"||e==="percentage",za=e=>e==="image"||e==="url",Ea=e=>e==="length"||e==="size"||e==="bg-size",Ia=e=>e==="length",Jc=e=>e==="number",Yc=e=>e==="family-name",Aa=e=>e==="shadow",Xc=()=>{const e=re("color"),t=re("font"),r=re("text"),s=re("font-weight"),a=re("tracking"),o=re("leading"),i=re("breakpoint"),c=re("container"),l=re("spacing"),u=re("radius"),h=re("shadow"),m=re("inset-shadow"),g=re("text-shadow"),p=re("drop-shadow"),j=re("blur"),_=re("perspective"),v=re("aspect"),w=re("ease"),F=re("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],$=()=>[...k(),z,C],O=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],S=()=>[z,C,l],Q=()=>[St,"full","auto",...S()],P=()=>[Ge,"none","subgrid",z,C],te=()=>["auto",{span:["full",Ge,z,C]},Ge,z,C],ye=()=>[Ge,"auto",z,C],Fe=()=>["auto","min","max","fr",z,C],qt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ve=()=>["start","end","center","stretch","center-safe","end-safe"],Ce=()=>["auto",...S()],A=()=>[St,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],y=()=>[e,z,C],X=()=>[...k(),Gs,Vs,{position:[z,C]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],we=()=>["auto","cover","contain",Hc,Qc,{size:[z,C]}],me=()=>[$r,Qt,ct],V=()=>["","none","full",u,z,C],R=()=>["",D,Qt,ct],K=()=>["solid","dashed","dotted","double"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>[D,$r,Gs,Vs],oe=()=>["","none",j,z,C],_e=()=>["none",D,z,C],Ae=()=>["none",D,z,C],Me=()=>[D,z,C],ir=()=>[St,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[De],breakpoint:[De],color:[Zc],container:[De],"drop-shadow":[De],ease:["in","out","in-out"],font:[qc],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[De],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[De],shadow:[De],spacing:["px",D],text:[De],"text-shadow":[De],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",St,C,z,v]}],container:["container"],columns:[{columns:[D,C,z,c]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:$()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Q()}],"inset-x":[{"inset-x":Q()}],"inset-y":[{"inset-y":Q()}],start:[{start:Q()}],end:[{end:Q()}],top:[{top:Q()}],right:[{right:Q()}],bottom:[{bottom:Q()}],left:[{left:Q()}],visibility:["visible","invisible","collapse"],z:[{z:[Ge,"auto",z,C]}],basis:[{basis:[St,"full","auto",c,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[D,St,"auto","initial","none",C]}],grow:[{grow:["",D,z,C]}],shrink:[{shrink:["",D,z,C]}],order:[{order:[Ge,"first","last","none",z,C]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":ye()}],"col-end":[{"col-end":ye()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":ye()}],"row-end":[{"row-end":ye()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Fe()}],"auto-rows":[{"auto-rows":Fe()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...qt(),"normal"]}],"justify-items":[{"justify-items":[...Ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ve()]}],"align-content":[{content:["normal",...qt()]}],"align-items":[{items:[...Ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":qt()}],"place-items":[{"place-items":[...Ve(),"baseline"]}],"place-self":[{"place-self":["auto",...Ve()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:Ce()}],mx:[{mx:Ce()}],my:[{my:Ce()}],ms:[{ms:Ce()}],me:[{me:Ce()}],mt:[{mt:Ce()}],mr:[{mr:Ce()}],mb:[{mb:Ce()}],ml:[{ml:Ce()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],w:[{w:[c,"screen",...A()]}],"min-w":[{"min-w":[c,"screen","none",...A()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",r,Qt,ct]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,z,Rr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",$r,C]}],"font-family":[{font:[Gc,C,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,z,C]}],"line-clamp":[{"line-clamp":[D,"none",z,Rr]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",z,C]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",z,C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:y()}],"text-color":[{text:y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[D,"from-font","auto",z,ct]}],"text-decoration-color":[{decoration:y()}],"underline-offset":[{"underline-offset":[D,"auto",z,C]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",z,C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",z,C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:we()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ge,z,C],radial:["",z,C],conic:[Ge,z,C]},Kc,Vc]}],"bg-color":[{bg:y()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:y()}],"gradient-via":[{via:y()}],"gradient-to":[{to:y()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:y()}],"border-color-x":[{"border-x":y()}],"border-color-y":[{"border-y":y()}],"border-color-s":[{"border-s":y()}],"border-color-e":[{"border-e":y()}],"border-color-t":[{"border-t":y()}],"border-color-r":[{"border-r":y()}],"border-color-b":[{"border-b":y()}],"border-color-l":[{"border-l":y()}],"divide-color":[{divide:y()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[D,z,C]}],"outline-w":[{outline:["",D,Qt,ct]}],"outline-color":[{outline:y()}],shadow:[{shadow:["","none",h,hr,dr]}],"shadow-color":[{shadow:y()}],"inset-shadow":[{"inset-shadow":["none",m,hr,dr]}],"inset-shadow-color":[{"inset-shadow":y()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:y()}],"ring-offset-w":[{"ring-offset":[D,ct]}],"ring-offset-color":[{"ring-offset":y()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":y()}],"text-shadow":[{"text-shadow":["none",g,hr,dr]}],"text-shadow-color":[{"text-shadow":y()}],opacity:[{opacity:[D,z,C]}],"mix-blend":[{"mix-blend":[...je(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":je()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[D]}],"mask-image-linear-from-pos":[{"mask-linear-from":L()}],"mask-image-linear-to-pos":[{"mask-linear-to":L()}],"mask-image-linear-from-color":[{"mask-linear-from":y()}],"mask-image-linear-to-color":[{"mask-linear-to":y()}],"mask-image-t-from-pos":[{"mask-t-from":L()}],"mask-image-t-to-pos":[{"mask-t-to":L()}],"mask-image-t-from-color":[{"mask-t-from":y()}],"mask-image-t-to-color":[{"mask-t-to":y()}],"mask-image-r-from-pos":[{"mask-r-from":L()}],"mask-image-r-to-pos":[{"mask-r-to":L()}],"mask-image-r-from-color":[{"mask-r-from":y()}],"mask-image-r-to-color":[{"mask-r-to":y()}],"mask-image-b-from-pos":[{"mask-b-from":L()}],"mask-image-b-to-pos":[{"mask-b-to":L()}],"mask-image-b-from-color":[{"mask-b-from":y()}],"mask-image-b-to-color":[{"mask-b-to":y()}],"mask-image-l-from-pos":[{"mask-l-from":L()}],"mask-image-l-to-pos":[{"mask-l-to":L()}],"mask-image-l-from-color":[{"mask-l-from":y()}],"mask-image-l-to-color":[{"mask-l-to":y()}],"mask-image-x-from-pos":[{"mask-x-from":L()}],"mask-image-x-to-pos":[{"mask-x-to":L()}],"mask-image-x-from-color":[{"mask-x-from":y()}],"mask-image-x-to-color":[{"mask-x-to":y()}],"mask-image-y-from-pos":[{"mask-y-from":L()}],"mask-image-y-to-pos":[{"mask-y-to":L()}],"mask-image-y-from-color":[{"mask-y-from":y()}],"mask-image-y-to-color":[{"mask-y-to":y()}],"mask-image-radial":[{"mask-radial":[z,C]}],"mask-image-radial-from-pos":[{"mask-radial-from":L()}],"mask-image-radial-to-pos":[{"mask-radial-to":L()}],"mask-image-radial-from-color":[{"mask-radial-from":y()}],"mask-image-radial-to-color":[{"mask-radial-to":y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[D]}],"mask-image-conic-from-pos":[{"mask-conic-from":L()}],"mask-image-conic-to-pos":[{"mask-conic-to":L()}],"mask-image-conic-from-color":[{"mask-conic-from":y()}],"mask-image-conic-to-color":[{"mask-conic-to":y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:we()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",z,C]}],filter:[{filter:["","none",z,C]}],blur:[{blur:oe()}],brightness:[{brightness:[D,z,C]}],contrast:[{contrast:[D,z,C]}],"drop-shadow":[{"drop-shadow":["","none",p,hr,dr]}],"drop-shadow-color":[{"drop-shadow":y()}],grayscale:[{grayscale:["",D,z,C]}],"hue-rotate":[{"hue-rotate":[D,z,C]}],invert:[{invert:["",D,z,C]}],saturate:[{saturate:[D,z,C]}],sepia:[{sepia:["",D,z,C]}],"backdrop-filter":[{"backdrop-filter":["","none",z,C]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[D,z,C]}],"backdrop-contrast":[{"backdrop-contrast":[D,z,C]}],"backdrop-grayscale":[{"backdrop-grayscale":["",D,z,C]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[D,z,C]}],"backdrop-invert":[{"backdrop-invert":["",D,z,C]}],"backdrop-opacity":[{"backdrop-opacity":[D,z,C]}],"backdrop-saturate":[{"backdrop-saturate":[D,z,C]}],"backdrop-sepia":[{"backdrop-sepia":["",D,z,C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",z,C]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[D,"initial",z,C]}],ease:[{ease:["linear","initial",w,z,C]}],delay:[{delay:[D,z,C]}],animate:[{animate:["none",F,z,C]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,z,C]}],"perspective-origin":[{"perspective-origin":$()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:Ae()}],"scale-x":[{"scale-x":Ae()}],"scale-y":[{"scale-y":Ae()}],"scale-z":[{"scale-z":Ae()}],"scale-3d":["scale-3d"],skew:[{skew:Me()}],"skew-x":[{"skew-x":Me()}],"skew-y":[{"skew-y":Me()}],transform:[{transform:[z,C,"","none","gpu","cpu"]}],"transform-origin":[{origin:$()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ir()}],"translate-x":[{"translate-x":ir()}],"translate-y":[{"translate-y":ir()}],"translate-z":[{"translate-z":ir()}],"translate-none":["translate-none"],accent:[{accent:y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",z,C]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",z,C]}],fill:[{fill:["none",...y()]}],"stroke-w":[{stroke:[D,Qt,ct,Rr]}],stroke:[{stroke:["none",...y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},el=$c(Xc);function tl(...e){return el(hc(e))}const rl=(e,t)=>{const r=e.split(".").map(a=>+a||0),s=t.split(".").map(a=>+a||0);for(let a=0;a<3;a++){const o=r[a]??0,i=s[a]??0;if(o<i)return-1;if(o>i)return 1}return 0},ps=Sr.forwardRef(({className:e,variant:t="default",children:r,...s},a)=>{const o="transition-all duration-200 bg-white border border-border-light",i={default:"mh-card p-4 md:p-6",hero:"mh-card mh-card--hero p-6 md:p-10 bg-gradient-to-br from-white to-brand-50",ai:"mh-ai-card"};return n.jsx("section",{ref:a,className:tl(o,i[t],e),...s,children:r})});ps.displayName="HomeCard";const Ta=Sr.memo(({index:e,title:t,desc:r,icon:s,isLast:a})=>n.jsxs("div",{className:"group relative flex md:flex-col items-center md:items-center gap-4 md:gap-4 p-2 rounded-xl hover:bg-bg-soft transition-colors duration-300 cursor-default",children:[n.jsxs("div",{className:"relative z-10 flex-shrink-0",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-border-light text-text-muted flex items-center justify-center group-hover:border-brand group-hover:text-brand group-hover:scale-110 transition-all duration-300 shadow-sm",children:n.jsx(s,{size:20})}),n.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-brand text-white text-[10px] font-bold flex items-center justify-center ring-2 ring-white",children:e+1})]}),n.jsxs("div",{className:"flex-1 md:text-center",children:[n.jsx("h4",{className:"text-base font-black text-text-ink mb-1 group-hover:text-brand transition-colors",children:t}),n.jsx("p",{className:"text-xs text-text-muted font-medium leading-relaxed",children:r})]}),n.jsx("div",{className:"md:hidden ml-auto text-border-light group-hover:text-brand transition-colors",children:!a&&n.jsx(No,{size:16,className:"opacity-0 group-hover:opacity-20"})})]}));Ta.displayName="HeroStep";function sl(){return n.jsxs(ps,{variant:"hero",className:"group/container relative overflow-hidden",children:[n.jsxs("div",{className:"relative z-10 mb-10 flex flex-col items-center gap-6 md:flex-row md:gap-10",children:[n.jsx("div",{className:"relative h-32 w-28 shrink-0",children:n.jsx(lc,{})}),n.jsxs("div",{className:"flex-1 text-center md:text-left",children:[n.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full border border-[var(--brand)]/20 bg-[var(--bg-page)] px-3 py-1 text-xs font-bold text-[var(--brand)]",children:[n.jsx(So,{size:14}),n.jsx("span",{children:"全程透明．安心留痕"})]}),n.jsx("h3",{className:"mb-3 text-2xl font-black tracking-tight text-[var(--brand)] md:text-3xl",children:"安心留痕保障"}),n.jsxs("p",{className:"max-w-2xl text-sm font-medium leading-relaxed text-[var(--text-secondary)] md:text-base",children:["介紹改從第一次電話聯絡開始，買賣雙方的每一通聯絡紀錄、每一句承諾與每項協議， 都會經過雙方確認並完整留痕。",n.jsx("br",{className:"hidden md:block"}),"讓整個交易過程都有跡可循，保障雙方權益，直到圓滿交屋。"]})]}),n.jsxs("a",{href:"/#policy",className:"hidden shrink-0 items-center gap-2 rounded-xl border-2 border-[var(--brand)] bg-white px-5 py-2.5 text-sm font-bold text-[var(--brand)] shadow-sm transition-all hover:bg-[var(--brand)] hover:text-white md:flex",children:["履保規範 ",n.jsx(Co,{size:16})]})]}),n.jsxs("div",{className:"relative mt-4 pl-2 md:pl-0",children:[n.jsx("div",{className:"absolute left-0 top-8 -z-0 hidden h-0.5 w-full bg-border-light md:block"}),n.jsx("div",{className:"absolute inset-y-0 left-8 -z-0 w-0.5 bg-border-light md:hidden"}),n.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-6 md:gap-2",children:Bs.map((e,t)=>n.jsx(Ta,{...e,index:t,isLast:t===Bs.length-1},e.id))})]})]})}function nl(){return n.jsxs("div",{className:"w-36 h-36 mb-6 text-brand-200 -mt-8 relative",children:[n.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-28 h-28 bg-brand-100/50 rounded-full blur-2xl -z-10"}),n.jsxs("svg",{viewBox:"0 0 200 240",className:"w-full h-full drop-shadow-sm animate-float",children:[n.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),n.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),n.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),n.jsx("path",{d:"M 55 130 L 25 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 145 130 L 175 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),n.jsx("path",{d:"M 85 180 L 85 215 L 75 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M 115 180 L 115 215 L 125 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}function al({role:e,content:t,timestamp:r}){return n.jsx("div",{className:`flex ${e==="user"?"justify-end":"justify-start"} animate-fadeIn`,children:n.jsxs("div",{className:`max-w-[85%] rounded-2xl px-5 py-3.5 text-[15px] font-medium leading-relaxed shadow-sm ${e==="user"?"bg-brand-700 text-white rounded-br-sm":"bg-white text-ink-900 border border-brand-100 rounded-bl-sm"}`,children:[n.jsx("div",{className:"whitespace-pre-wrap",children:t}),r&&n.jsx("div",{className:`mt-1.5 text-[11px] font-bold ${e==="user"?"text-brand-300":"text-brand-600/60"} text-right`,children:new Date(r).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})})]})})}const ol=["3房以內","30坪以下","近捷運","新成屋"];function $a(){const[e,t]=f.useState([]),[r,s]=f.useState(""),[a,o]=f.useState(!1),i=f.useRef(null);f.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[e]);const c=async(l=r)=>{if(!l.trim()||a)return;const u={role:"user",content:l.trim(),timestamp:new Date().toISOString()};t(h=>[...h,u]),s(""),o(!0),t(h=>[...h,{role:"assistant",content:"",timestamp:new Date().toISOString()}]);try{await nr([...e,u],h=>{t(m=>{const g=[...m],p=g[g.length-1];return p.role==="assistant"&&(p.content+=h),g})})}catch(h){console.error(h),t(m=>{const g=[...m],p=g[g.length-1];return p.content="抱歉，AI 服務目前暫時不可用，請稍後再試。",g})}finally{o(!1)}};return n.jsxs("section",{className:"group relative bg-gradient-to-br from-white via-[#F8FAFC] to-[#00385a08] rounded-[24px] border border-brand-100 shadow-[0_8px_24px_rgba(0,56,90,0.06)] overflow-hidden hover:shadow-[0_12px_32px_rgba(0,56,90,0.1)] transition-all duration-300 isolate",children:[n.jsx("div",{className:"absolute -top-24 -right-24 w-80 h-80 bg-brand-100/30 rounded-full blur-3xl pointer-events-none mix-blend-multiply"}),n.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-brand-700/5 rounded-full blur-3xl pointer-events-none mix-blend-multiply"}),n.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#00385a08_1px,transparent_1px),linear-gradient(to_bottom,#00385a08_1px,transparent_1px)] bg-[size:24px_24px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none z-0"}),n.jsx("div",{className:"h-1.5 w-full bg-gradient-to-r from-brand-700 via-brand-600 to-brand-500 relative z-20"}),n.jsxs("div",{className:"p-5 md:p-8 md:pt-6 relative z-10",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/80 border border-brand-100 flex items-center justify-center text-brand-700 relative overflow-hidden shrink-0 shadow-sm backdrop-blur-sm group-hover:scale-105 transition-transform duration-300",children:n.jsx(zo,{size:28,strokeWidth:2})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-black text-brand-700 text-xl tracking-tight flex items-center gap-2",children:["社區鄰居管家",n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gradient-to-r from-brand-700 to-brand-600 text-white text-[10px] font-bold tracking-wider uppercase shadow-sm",children:[n.jsx(Eo,{size:10})," AI Beta"]})]}),n.jsx("p",{className:"text-xs text-ink-600 font-bold mt-0.5 tracking-wide",children:"全天候待命 · 分析房價 · 區域諮詢"})]})]}),n.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:ol.map(l=>n.jsx("button",{onClick:()=>c(l),className:"px-3.5 py-1.5 rounded-full bg-white border border-brand-100 text-brand-700 text-xs font-bold hover:bg-brand-700 hover:text-white hover:border-brand-700 transition-all active:scale-95 shadow-sm hover:shadow-md backdrop-blur-sm",children:l},l))})]}),n.jsxs("div",{ref:i,className:"h-[380px] overflow-y-auto rounded-2xl bg-white/50 border border-brand-100/60 p-5 shadow-inner mb-4 flex flex-col gap-4 scroll-smooth backdrop-blur-md",role:"log","aria-live":"polite",children:[e.length===0?n.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-center p-4 opacity-80",children:[n.jsx(nl,{}),n.jsx("p",{className:"mb-2 font-black text-brand-700 text-base",children:"歡迎來到邁房子！我是邁邁 🤖"}),n.jsxs("p",{className:"text-sm leading-relaxed text-ink-600 max-w-xs mx-auto font-medium",children:["買房不只看物件，更要看生活。",n.jsx("br",{}),"告訴我您的預算或想住的區域，讓我幫您分析！"]})]}):e.map((l,u)=>n.jsx(al,{role:l.role,content:l.content,timestamp:l.timestamp},u)),a&&n.jsx("div",{className:"flex justify-start animate-fadeIn",children:n.jsxs("div",{className:"rounded-2xl rounded-bl-sm px-4 py-3 bg-white border border-brand-100 text-brand-600 text-sm flex items-center gap-2 shadow-sm",children:[n.jsx("span",{className:"font-bold",children:"邁邁正在思考"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_in-out_both]"}),n.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_in-out_both_0.2s]"}),n.jsx("span",{className:"w-1.5 h-1.5 bg-brand-500 rounded-full animate-[bounce_1.4s_infinite_in-out_both_0.4s]"})]})]})})]}),n.jsxs("div",{className:"relative group/input",children:[n.jsx("input",{type:"text",className:"w-full pl-5 pr-14 py-4 rounded-xl border-2 border-brand-100 bg-white/80 text-ink-900 font-bold text-[15px] placeholder:text-ink-400/80 transition-all focus:outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-50/50 hover:border-brand-300 shadow-sm backdrop-blur-sm",placeholder:"輸入需求，例如：新北板橋 2000萬內 3房...",value:r,onChange:l=>s(l.target.value),onKeyDown:l=>l.key==="Enter"&&!l.shiftKey&&c(),disabled:a}),n.jsx("button",{onClick:()=>c(),disabled:a||!r.trim(),className:"absolute right-2 top-2 bottom-2 aspect-square rounded-lg bg-brand-700 text-white flex items-center justify-center shadow-md transition-all hover:bg-brand-600 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:transform-none disabled:shadow-none",children:n.jsx(Io,{size:20,strokeWidth:2.5,className:"-ml-0.5 translate-y-[1px]"})})]})]})]})}const Ra=Sr.memo(({id:e,name:t,rating:r,tags:s,content:a})=>n.jsxs("article",{className:"flex gap-3 border border-[#E6EDF7] rounded-2xl p-3.5 bg-white relative hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] transition-all duration-200 hover:-translate-y-0.5",children:[n.jsx("div",{className:"w-[38px] h-[38px] rounded-full bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] border border-[#E6EDF7] flex items-center justify-center font-black text-[#00385a] text-[15px] shrink-0 shadow-[inset_0_1px_2px_rgba(255,255,255,0.8),0_2px_4px_rgba(0,56,90,0.05)]",children:e}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsx("div",{className:"font-black text-[15px] text-[#0A2246] flex items-center gap-1.5",children:t}),n.jsx("div",{className:"flex gap-0.5","aria-label":`${r} stars`,children:Array.from({length:5}).map((o,i)=>n.jsx("span",{className:`text-xs ${i<r?"text-[#00385a]":"text-[#E6EDF7]"}`,children:"★"},i))})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:s.map(o=>n.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-md bg-[#F6F9FF] border border-[#E6EDF7] text-[#00385a] font-bold tracking-wide",children:o},o))}),n.jsx("p",{className:"text-[13px] leading-relaxed text-[#4B5563] font-medium text-justify",children:a})]})]}));Ra.displayName="ReviewCard";function il(){return n.jsxs(ps,{className:"bg-white/96 backdrop-blur-md border border-[#E6EDF7] shadow-[0_4px_20px_rgba(0,56,90,0.03)] p-3",children:[n.jsxs("div",{className:"bg-gradient-to-r from-[#00385a] to-[#005585] rounded-2xl px-4 py-3 mb-4 flex justify-between items-center shadow-[0_2px_8px_rgba(0,56,90,0.15)] relative overflow-hidden",children:[n.jsx("div",{className:"absolute -right-6 -top-6 w-24 h-24 bg-white/5 rounded-full blur-2xl pointer-events-none"}),n.jsxs("div",{className:"flex items-center gap-2.5 relative z-10",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E63946] shadow-[0_0_8px_rgba(230,57,70,0.6)]"}),n.jsx("h3",{className:"text-lg font-black m-0 text-white tracking-wide text-shadow-sm",children:"社區評價"}),n.jsx("span",{className:"text-[11px] font-bold text-[#00385a] bg-white/95 backdrop-blur-sm px-2.5 py-0.5 rounded-full shadow-sm border border-white/20",children:"聚合"})]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:uc.map(e=>n.jsx(Ra,{...e},e.id))}),n.jsxs("a",{className:"mt-4 flex items-center gap-2.5 bg-gradient-to-b from-white to-[#F6F9FF] border border-[#E6EDF7] p-3.5 rounded-xl font-black text-[#00385a] no-underline relative lg:justify-center lg:text-center group hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] hover:border-[#00385a]/20 transition-all duration-200 active:translate-y-px",href:"/maihouses/community-wall_mvp.html","aria-label":"點我看更多社區評價",children:[n.jsx("span",{className:"text-[15px] tracking-wide lg:mx-auto group-hover:text-[#004E7C] transition-colors",children:"查看更多真實住戶評價"}),n.jsx("span",{className:"ml-auto bg-[#00385a] text-white rounded-lg text-xs font-bold px-3 py-1.5 lg:absolute lg:right-[14px] lg:top-1/2 lg:-translate-y-1/2 lg:ml-0 group-hover:bg-[#004E7C] transition-colors shadow-sm",children:"前往社區牆 →"})]})]})}function cl({property:e}){return n.jsxs("article",{className:"bg-white border border-[#E6EDF7] rounded-2xl overflow-hidden relative transition-all duration-[180ms] ease-out shadow-none hover:shadow-[0_10px_26px_rgba(13,39,94,0.12)] hover:-translate-y-0.5 hover:border-[#1749d738] group isolate",children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(60%_60%_at_80%_-10%,rgba(23,73,215,0.12),transparent_60%)] opacity-80"}),n.jsxs("a",{href:`/property/${e.id}`,className:"block aspect-[4/3] bg-[#e9ecf5] relative overflow-hidden",children:[n.jsx("img",{src:e.image,alt:"物件封面",className:"w-full h-full object-cover block transform scale-100 transition-transform duration-[600ms] cubic-bezier(0.2,0.65,0.2,1) group-hover:scale-105"}),n.jsx("span",{className:"absolute left-2.5 top-2.5 bg-black/75 text-white text-xs font-extrabold px-2 py-1 rounded-full tracking-[0.2px] shadow-[0_4px_10px_rgba(0,0,0,0.18)]",children:e.badge})]}),n.jsxs("div",{className:"p-3 pb-3.5",children:[n.jsx("div",{className:"font-extrabold text-base leading-[1.35] my-0.5 mb-2 tracking-[0.3px] text-[#0A2246] lg:text-[21px]",children:e.title}),n.jsx("div",{className:"flex flex-wrap gap-2 items-center text-[#6C7B91] text-[13px] mb-1.5",children:e.tags.map((t,r)=>n.jsx("span",{className:"px-2.5 py-0.5 rounded-full bg-[#F6F9FF] border border-[#E6EDF7] font-extrabold text-[#2A2F3A] transition-all duration-120 ease-out group-hover:-translate-y-px group-hover:shadow-[0_4px_10px_rgba(0,56,90,0.10)]",children:t},r))}),n.jsxs("div",{className:"text-[19px] font-black text-[#111] my-2 mb-1 tracking-[0.2px]",children:["NT$ ",e.price," 萬"]}),n.jsx("div",{className:"text-[13px] text-[#6C7B91]",children:e.location}),n.jsxs("div",{className:"mt-2.5 px-3 py-2.5 border border-[#E6EDF7] rounded-xl bg-gradient-to-b from-[#F6F9FF] to-white",children:[n.jsx("div",{className:"flex items-center gap-2 text-[13px] font-black mb-2 text-black/85 before:content-['★'] before:text-xs before:leading-none before:text-[#00385a] before:drop-shadow-[0_1px_0_rgba(0,56,90,0.12)]",children:"住戶真實留言"}),e.reviews.map((t,r)=>n.jsxs("div",{className:`flex gap-2.5 items-start py-2 ${r!==0?"border-t border-dashed border-black/10":""}`,children:[n.jsx("div",{className:"w-[30px] h-[30px] rounded-full grid place-items-center text-xs font-black bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-[#00385a] flex-none shadow-[inset_0_0_0_1px_rgba(0,56,90,0.15)]",children:t.avatar}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 text-xs text-black/60",children:[n.jsxs("span",{className:"font-black text-black/85",children:[t.name," · ",t.role]}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-black/20 inline-block"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#00385a]/10 text-[#00385a] font-black",children:t.tag})]}),n.jsx("div",{className:"text-[13px] leading-[1.6] text-black/85",children:t.text})]})]},r)),n.jsx("button",{type:"button",className:"mt-2.5 w-full px-3 py-2.5 rounded-xl border border-[#00385a]/30 bg-gradient-to-b from-white to-[#F5F7FA] cursor-pointer text-[13px] font-black text-[#00385a] transition-all duration-150 ease-out hover:from-white hover:to-[#E8F0FF] hover:shadow-[0_6px_14px_rgba(0,56,90,0.18)] active:translate-y-px",children:"註冊後看更多評價"})]})]})]})}function ll(){return n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex items-center gap-2.5 my-[18px] mb-3","aria-label":"智能房源推薦",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 border border-[#E6EDF7] rounded-full bg-gradient-to-b from-white to-[#F6F9FF] text-[#00385a] font-black text-sm tracking-[0.2px]",children:[n.jsx("span",{className:"w-[18px] h-[18px] rounded-md grid place-items-center bg-gradient-to-b from-[#00385a] to-[#004E7C] text-white text-xs font-black shadow-[0_2px_6px_rgba(0,56,90,0.18)]",children:"★"}),n.jsx("span",{className:"leading-none text-base md:text-lg md:font-bold",children:"〔智能房源推薦〕"}),n.jsx("span",{className:"ml-1.5 text-sm text-[#6C7B91] font-bold",children:"依瀏覽行為與社區口碑輔助排序"})]}),n.jsx("div",{className:"h-1.5 rounded-full flex-1 bg-gradient-to-r from-[#00385a] via-[#004E7C] to-[#7EA5FF] bg-[length:200%_100%] opacity-25 ml-2.5 animate-mhRecoBar","aria-hidden":"true"})]}),n.jsx("div",{className:"grid grid-cols-1 gap-[18px] md:grid-cols-2 lg:grid-cols-3","aria-label":"房源清單",children:dc.map(e=>n.jsx(cl,{property:e},e.id))})]})}const ul=()=>{const[e,t]=f.useState(!1),r=sr(),s=f.useMemo(()=>Gi(3),[]),a=f.useMemo(()=>Ki(r.milestones),[r.milestones]);if(f.useEffect(()=>{const{isFirstVisit:h}=qi(),m=s&&s.length>0||!!a||!!r.lastMood,g=!h&&!Vi()&&m;t(g),g&&be(xe.WarmbarView,{tags:s,milestone:!!a,lastMood:r.lastMood})},[s,a,r.lastMood]),!e)return null;const o=h=>h==="stress"?"最近辛苦了":h==="rest"?"慢慢來就好":"好久不見",i=s&&s.length>0?`上次你提到「${s.join("・")}」`:null,c=a||(i?`${o(r.lastMood)}，${i}`:`${o(r.lastMood)}，這幾天過得怎麼樣`),l=()=>{be(xe.WarmbarContinue,{tags:s,milestone:!!a});const h=a?"最近有點紀念日的感覺，想輕鬆聊聊。":s&&s.length>0?`還記得我們聊過 ${s.join("、")}，你有新想法嗎？`:"想跟你聊聊近況～";window.dispatchEvent(new CustomEvent("mai:chat:start",{detail:{text:h}}))},u=()=>{Qi(),t(!1),be(xe.WarmbarDismiss,{})};return n.jsxs("div",{className:"w-full bg-[#F5F8FF] text-[#0a2246] text-sm leading-[34px] h-[34px] text-center tracking-wide border-b border-[#E6ECFF] flex items-center justify-center gap-3",role:"status","aria-live":"polite",children:[n.jsx("span",{children:c}),n.jsx("button",{className:"px-2.5 py-0.5 rounded-full border border-[#1749D7] bg-[#1749D7] text-white cursor-pointer leading-6 h-[26px] hover:bg-[#123cb3] transition-colors",onClick:l,children:"接著聊"}),n.jsx("button",{className:"px-2.5 py-0.5 rounded-full border border-[#C9D5FF] bg-white text-[#1749D7] cursor-pointer leading-6 h-[26px] hover:bg-gray-50 transition-colors",onClick:u,children:"今天不再顯示"})]})};function dl({config:e}){const[t,r]=f.useState(null);f.useEffect(()=>{pa().then(a=>{a.ok&&a.data&&(a.data.maintenance||rl(a.data.backendVersion,e.minBackend)<0)&&(console.warn("版本不相容或維護中"),r("版本不相容或維護中"))})},[e.minBackend]),f.useEffect(()=>{const a=o=>{var i;try{ar("unhandled_promise_rejection","/",((i=o.reason)==null?void 0:i.message)||String(o.reason))}catch{}};return globalThis.addEventListener("unhandledrejection",a),()=>globalThis.removeEventListener("unhandledrejection",a)},[]);const s=e.features||{};return n.jsxs(n.Fragment,{children:[n.jsx(xa,{}),n.jsx(ul,{}),t&&n.jsx("div",{className:"mx-auto mt-4 max-w-container rounded-md bg-yellow-500 p-3 text-sm text-white",children:t}),n.jsxs("main",{className:"relative mx-auto max-w-container space-y-6 p-4 md:space-y-8 md:p-6",children:[s.heroAssure!==!1&&n.jsx(sl,{}),s.smartAsk!==!1&&n.jsx($a,{}),n.jsx(il,{}),s.propertyGrid!==!1&&n.jsx(ll,{})]})]})}const hl="https://mtqnjmoisrvjofdxhwhi.supabase.co",ml="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10cW5qbW9pc3J2am9mZHhod2hpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MjE1MDEsImV4cCI6MjA3OTA5NzUwMX0.P2o5n09PQChfryl-WLT7v6wRVWhDK6Oik7ajjcwyNrc",Pe=Zo(hl,ml,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});async function pl(e,t){const{data:r,error:s}=await Pe.auth.signUp({email:e,password:t});if(s)throw s;return r}async function fl(e,t){const{data:r,error:s}=await Pe.auth.signInWithPassword({email:e,password:t});if(s)throw s;return r}async function Oa(){const{data:e,error:t}=await Pe.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${globalThis.location.origin}/`,queryParams:{access_type:"offline",prompt:"consent"}}});if(t)throw t;return e}function gl(){const e=On(),[t,r]=f.useState(""),[s,a]=f.useState(""),[o,i]=f.useState(""),[c,l]=f.useState(!1),[u,h]=f.useState(!1),m=async p=>{p.preventDefault(),i(""),h(!0);try{try{ar("register_submit","/auth/register")}catch(j){console.warn("Analytics failed",j)}await pl(t,s),l(!0),setTimeout(()=>e("/auth/login"),2e3)}catch(j){i(j.message||"註冊失敗")}finally{h(!1)}},g=async()=>{try{h(!0),await Oa()}catch(p){i(p.message||"Google 註冊失敗"),h(!1)}};return n.jsxs("section",{className:"mx-auto mt-8 max-w-md rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[n.jsx("h1",{className:"mb-4 text-xl font-semibold",children:"註冊"}),o&&n.jsx("div",{className:"mb-4 rounded-[var(--r-md)] bg-red-50 border border-red-200 p-3 text-red-600 text-sm",children:o}),c&&n.jsx("div",{className:"mb-4 rounded-[var(--r-md)] bg-green-50 border border-green-200 p-3 text-green-600 text-sm",children:"註冊成功! 請檢查您的信箱確認帳號,稍後將跳轉到登入頁面..."}),n.jsxs("form",{onSubmit:m,className:"space-y-3 relative z-10",children:[n.jsx("input",{id:"register-email",name:"email",className:"w-full rounded-[var(--r-md)] border border-[var(--border-default)] p-2",type:"email",placeholder:"Email","aria-label":"Email",value:t,onChange:p=>r(p.target.value),required:!0,autoComplete:"email"}),n.jsx("input",{id:"register-password",name:"password",className:"w-full rounded-[var(--r-md)] border border-[var(--border-default)] p-2",type:"password",placeholder:"密碼 (至少6個字元)","aria-label":"密碼",value:s,onChange:p=>a(p.target.value),minLength:6,required:!0,autoComplete:"new-password"}),n.jsx("button",{type:"submit",disabled:u||c,className:"w-full rounded-[var(--r-pill)] bg-[var(--brand)] px-4 py-2 text-[var(--brand-fg)] disabled:opacity-50 disabled:cursor-not-allowed",children:u?"註冊中...":c?"註冊成功":"註冊"})]}),n.jsxs("div",{className:"relative my-4",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-[var(--border-default)]"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"bg-white px-2 text-[var(--text-secondary)]",children:"或"})})]}),n.jsx("button",{type:"button",onClick:g,disabled:u||c,className:"relative z-10 w-full rounded-[var(--r-pill)] border border-[var(--border-default)] bg-white px-4 py-2 text-[var(--text-primary)] hover:bg-gray-50 disabled:opacity-50",children:n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[n.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),n.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),n.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),n.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"使用 Google 註冊"]})})]})}function Pa(){const[e,t]=f.useState(null),[r,s]=f.useState(null),[a,o]=f.useState(!0);return f.useEffect(()=>{Pe.auth.getSession().then(({data:{session:c}})=>{t(c),s((c==null?void 0:c.user)??null),o(!1)});const{data:{subscription:i}}=Pe.auth.onAuthStateChange((c,l)=>{t(l),s((l==null?void 0:l.user)??null),o(!1)});return()=>i.unsubscribe()},[]),{session:e,user:r,loading:a}}function bl(){const e=On(),{user:t}=Pa(),[r,s]=f.useState(""),[a,o]=f.useState(""),[i,c]=f.useState(""),[l,u]=f.useState(!1);f.useEffect(()=>{t&&e("/")},[t,e]);const h=async g=>{g.preventDefault(),c(""),u(!0);try{try{ar("login_submit","/auth/login")}catch(p){console.warn("Analytics failed",p)}await fl(r,a)}catch(p){c(p.message||"登入失敗"),u(!1)}},m=async()=>{try{u(!0),await Oa()}catch(g){c(g.message||"Google 登入失敗"),u(!1)}};return n.jsxs("div",{className:"min-h-screen bg-[var(--bg-page)] font-sans",children:[n.jsx(xa,{}),n.jsx("main",{className:"container mx-auto px-4 py-12 md:py-20 flex justify-center items-center",children:n.jsxs("div",{className:"w-full max-w-[420px] bg-white rounded-[24px] shadow-[0_20px_40px_-12px_rgba(0,0,0,0.1)] p-8 md:p-10 border border-slate-100",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-2xl font-bold text-[var(--brand)] mb-2",children:"歡迎回來"}),n.jsx("p",{className:"text-[var(--text-secondary)] text-sm",children:"登入以繼續使用邁房子服務"})]}),i&&n.jsxs("div",{className:"mb-6 rounded-xl bg-red-50 border border-red-100 p-4 text-red-600 text-sm flex items-center gap-2",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 flex-shrink-0",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})}),i]}),n.jsxs("form",{onSubmit:h,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"login-email",className:"block text-sm font-bold text-[var(--text-primary)] mb-1.5 ml-1",children:"Email"}),n.jsx("input",{id:"login-email",name:"email",className:"w-full rounded-xl border border-slate-200 bg-slate-50 p-3 text-[var(--text-primary)] placeholder:text-slate-400 focus:bg-white focus:border-[var(--brand-light)] focus:ring-4 focus:ring-[var(--brand-light)]/10 transition-all outline-none",type:"email",placeholder:"name@example.com","aria-label":"Email",value:r,onChange:g=>s(g.target.value),required:!0,autoComplete:"email"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-1",children:[n.jsx("label",{htmlFor:"login-password",className:"block text-sm font-bold text-[var(--text-primary)]",children:"密碼"}),n.jsx("a",{href:"#",className:"text-xs font-semibold text-[var(--brand-light)] hover:text-[var(--brand)] transition-colors",children:"忘記密碼？"})]}),n.jsx("input",{id:"login-password",name:"password",className:"w-full rounded-xl border border-slate-200 bg-slate-50 p-3 text-[var(--text-primary)] placeholder:text-slate-400 focus:bg-white focus:border-[var(--brand-light)] focus:ring-4 focus:ring-[var(--brand-light)]/10 transition-all outline-none",type:"password",placeholder:"••••••••","aria-label":"密碼",value:a,onChange:g=>o(g.target.value),required:!0,autoComplete:"current-password"})]}),n.jsx("button",{type:"submit",disabled:l,className:"w-full rounded-full bg-[var(--brand)] px-4 py-3.5 text-white font-bold text-[15px] shadow-lg shadow-[var(--brand)]/20 hover:bg-[#002d4a] hover:shadow-xl hover:shadow-[var(--brand)]/30 hover:-translate-y-0.5 active:translate-y-0 active:shadow-md transition-all disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none",children:l?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"登入中..."]}):"登入"})]}),n.jsxs("div",{className:"relative my-8",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"bg-white px-4 text-slate-400 font-medium",children:"或"})})]}),n.jsxs("button",{type:"button",onClick:m,disabled:l,className:"w-full rounded-full border border-slate-200 bg-white px-4 py-3 text-[var(--text-primary)] font-bold text-[15px] hover:bg-slate-50 hover:border-slate-300 transition-all active:bg-slate-100 disabled:opacity-70 flex items-center justify-center gap-3 group",children:[n.jsxs("svg",{className:"h-5 w-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[n.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),n.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),n.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),n.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"使用 Google 登入"]}),n.jsxs("div",{className:"mt-8 text-center text-[15px] text-[var(--text-secondary)]",children:["還沒有帳號？ ",n.jsx(Pn,{to:"/auth/register",className:"text-[var(--brand-light)] font-bold hover:text-[var(--brand)] hover:underline transition-colors",children:"立即註冊"})]})]})})]})}function xl(){return n.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"社區牆"}),n.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"此頁為示意佈局，實作請接後端。"})]})}function vl(){return n.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"推薦社區"}),n.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"依據您的偏好，為您推薦可能喜歡的社區。"})]})}function yl(e,t,r){const s=t/12/100,a=r*12;return s===0?e/a:e*s/(1-Math.pow(1+s,-a))}const wl=()=>{const[e,t]=f.useState(1500),[r,s]=f.useState(30),[a,o]=f.useState(2.25),[i,c]=f.useState(20),[l,u]=f.useState(""),h=f.useMemo(()=>Math.max(0,e*(1-r/100)),[e,r]),m=f.useMemo(()=>Math.round(yl(h*1e4,a,i)),[h,a,i]),g=3e3,p=f.useMemo(()=>typeof l!="number"||l<=0?null:Math.round((m+g)/l*100),[l,m]),j=()=>{const v=`概算（僅供參考）：
總價${e}萬，頭期${r}% → 貸款約${h.toFixed(0)}萬；${i}年利率${a}% → 月付約 ${m} 元；管理費約 ${g} 元。`+(p!==null?`
月負擔率約 ${p}%（含管理費）。`:"");navigator.clipboard.writeText(v).then(()=>be(xe.BudgetCopy,{}))},_=p===null?"這個數字僅供參考，別給自己太大壓力。":p>=50?"負擔率偏高了，先別急著決定；我們可以討論更有彈性的做法。":p>=35?"負擔率有點高，可再看看地點/年限的權衡。":"看起來在可接受範圍內，但仍建議保留彈性。";return n.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"預算規劃（Lite）"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8},children:[n.jsxs("label",{children:["總價(萬)",n.jsx("input",{type:"number",value:e,onChange:v=>t(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),n.jsxs("label",{children:["頭期(%)",n.jsx("input",{type:"number",value:r,onChange:v=>s(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),n.jsxs("label",{children:["利率(%)",n.jsx("input",{type:"number",value:a,onChange:v=>o(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),n.jsxs("label",{children:["年限",n.jsx("input",{type:"number",value:i,onChange:v=>c(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),n.jsxs("label",{children:["月收入(可選)",n.jsx("input",{type:"number",value:typeof l=="number"?l:"",onChange:v=>{const w=Number(v.target.value);u(Number.isFinite(w)?w:"")},style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]})]}),n.jsxs("div",{style:{marginTop:10,fontSize:14,color:"#0a2246"},children:["概算（僅供參考）：月付約 ",n.jsx("b",{children:m.toLocaleString()})," 元；貸款本金約 ",n.jsx("b",{children:h.toFixed(0)})," 萬。",p!==null&&n.jsxs(n.Fragment,{children:["　｜　月負擔率約 ",n.jsxs("b",{children:[p,"%"]}),"（含管理費）"]})]}),n.jsx("div",{style:{marginTop:8,color:"#6b7280"},children:_}),n.jsx("button",{onClick:j,style:{marginTop:8,padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"複製概算模板"})]})},jl=({onAdopt:e})=>{const[t,r]=f.useState(""),[s,a]=f.useState("agent"),[o,i]=f.useState("detail"),[c,l]=f.useState(null),[u,h]=f.useState(null),[m,g]=f.useState(!1),[p,j]=f.useState(!1),_=async()=>{const w=t.trim();if(w){g(!0);try{const I=(await ec(w,{audience:s,intent:o})).split(/\n+/).map(O=>O.trim()).filter(Boolean),k=I.find(O=>/^V1/.test(O))||"",$=I.find(O=>/^V2/.test(O))||"";l(k.replace(/^V1[:：]\s?/,"")),h($.replace(/^V2[:：]\s?/,"")),be(xe.RewriteGen,{audience:s,intent:o})}finally{g(!1)}}},v=w=>{e==null||e(w),j(!0),be(xe.RewriteAdopt,{audience:s,intent:o}),setTimeout(()=>j(!1),2500)};return n.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"禮貌改寫小幫手"}),n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[n.jsxs("label",{children:["對象",n.jsxs("select",{value:s,onChange:w=>a(w.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[n.jsx("option",{value:"agent",children:"仲介"}),n.jsx("option",{value:"owner",children:"屋主"})]})]}),n.jsxs("label",{children:["目的",n.jsxs("select",{value:o,onChange:w=>i(w.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[n.jsx("option",{value:"detail",children:"詢問細節"}),n.jsx("option",{value:"view",children:"預約看房"}),n.jsx("option",{value:"pet",children:"可否養寵物"}),n.jsx("option",{value:"price",children:"價格/議價"})]})]})]}),n.jsx("textarea",{rows:3,placeholder:"貼上你想發的訊息（我會根據對象/目的幫你潤飾）",value:t,onChange:w=>r(w.target.value),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),n.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:n.jsx("button",{onClick:_,disabled:m,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:m?"生成中…":"禮貌改寫"})}),(c||u)&&n.jsxs("div",{style:{marginTop:10,display:"grid",gap:8},children:[c&&n.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[n.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"版本一"}),n.jsx("div",{style:{marginBottom:6},children:c}),n.jsx("button",{onClick:()=>v(c),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"採用（複製/送出）"})]}),u&&n.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[n.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"版本二"}),n.jsx("div",{style:{marginBottom:6},children:u}),n.jsx("button",{onClick:()=>v(u),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"採用（複製/送出）"})]}),p&&n.jsx("div",{style:{color:"#16a34a"},children:"已準備好訊息，祝溝通順利 🤞"})]})]})},Fa="mai-notes-v1";function _l(){try{const e=localStorage.getItem(Fa);return e?JSON.parse(e):[]}catch{return[]}}function kl(e){localStorage.setItem(Fa,JSON.stringify(e))}function rs(e,t){const r=_l(),s={id:Math.random().toString(36).slice(2),createdAt:Date.now(),note:e,...t&&{echo:t}};return r.unshift(s),kl(r),s}const Nl=()=>{const[e,t]=f.useState(""),[r,s]=f.useState(null),[a,o]=f.useState(!1),[i,c]=f.useState(!1),l=async()=>{const u=e.trim();if(u){o(!0);try{const h=await tc(u);s(h),rs(u,h),be(xe.NoteSaved,{})}catch{rs(u)}finally{o(!1)}}};return n.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"收藏備註（感受）"}),n.jsx("textarea",{rows:3,placeholder:"寫下這間帶給你的感覺…",value:e,onChange:u=>t(u.target.value),onFocus:()=>c(!0),onBlur:()=>c(!1),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),i&&n.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:4},children:"慢慢寫，我在。"}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[n.jsx("button",{onClick:l,disabled:a,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:a?"生成中…":"存入便條（含回聲）"}),r&&n.jsxs("span",{style:{color:"#6b7280"},children:["AI 回聲：",r]})]})]})};function Sl(e){const t=e.split(`
`).find(s=>s.trim().startsWith("#tags"));return t?t.replace(/^#tags\s*[:：]\s*/i,"").split(",").map(s=>s.trim()).filter(Boolean).slice(0,5):[]}const Cl=()=>{const[e,t]=f.useState(""),[r,s]=f.useState(""),[a,o]=f.useState(""),[i,c]=f.useState(null),[l,u]=f.useState(!1),h=async()=>{u(!0);try{const g=await sc(e,r,a);c(g);const p=Sl(g);p.length&&Bi(p),be(xe.DebriefGen,{tags:p})}finally{u(!1)}},m=()=>{const g=`【看屋小結】
喜歡：${e}
困擾：${r}
下一步：${a}
---
${i??""}`;rs(g),be(xe.DebriefSave,{})};return n.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"看屋後三問（Mini Debrief）"}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("input",{value:e,onChange:g=>t(g.target.value),placeholder:"第一直覺如何？（例：採光很好）",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),n.jsx("input",{value:r,onChange:g=>s(g.target.value),placeholder:"哪裡卡卡的？（例：廚房太小）",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),n.jsx("input",{value:a,onChange:g=>o(g.target.value),placeholder:"下一步想做什麼？（例：再看一間對比）",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}})]}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[n.jsx("button",{onClick:h,disabled:l,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:l?"整理中…":"生成 Must/Nice/Avoid + #tags"}),i&&n.jsx("button",{onClick:m,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"存到便條"})]}),i&&n.jsx("div",{style:{marginTop:10,whiteSpace:"pre-wrap",color:"#0a2246"},children:i})]})},zl=["持分","使用分區","公設比","地上權","都更","容積率"],Hs=({text:e})=>{const[t,r]=f.useState(!1),[s,a]=f.useState(""),[o,i]=f.useState(!1),c=async()=>{if(!s){i(!0);try{const u=await rc(e);a(u),be(xe.ELI5Open,{term:e})}finally{i(!1)}}};f.useEffect(()=>{const h=`mai-eli5-suggest-${new Date().toISOString().slice(0,10)}`;zl.some(g=>e.includes(g))&&!localStorage.getItem(h)&&(localStorage.setItem(h,"1"),r(!0),c())},[]);const l=async()=>{const u=!t;r(u),u&&await c()};return n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",position:"relative"},children:[n.jsx("button",{"aria-label":"白話解釋",onClick:l,style:{marginLeft:6,width:18,height:18,borderRadius:999,border:"1px solid #C9D5FF",background:"#F5F8FF",color:"#1749D7",fontSize:12,cursor:"pointer"},children:"?"}),t&&n.jsxs("div",{style:{position:"absolute",top:"120%",left:0,background:"#fff",border:"1px solid #E6ECFF",borderRadius:8,padding:10,width:280,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",zIndex:50},children:[n.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:6},children:"白話解釋（僅供參考，非法律意見）"}),n.jsx("div",{style:{whiteSpace:"pre-wrap"},children:o?"生成中…":s})]})]})};function El(){return n.jsxs("section",{className:"mx-auto mt-8 max-w-container space-y-6 rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"物件詳情"}),n.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:"示意頁。"}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[n.jsx("h2",{className:"mb-3 text-lg font-medium",children:"房貸負擔試算"}),n.jsx(wl,{})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[n.jsx("h2",{className:"mb-3 text-lg font-medium",children:"禮貌改寫訊息"}),n.jsx(jl,{})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[n.jsx("h2",{className:"mb-3 text-lg font-medium",children:"看房筆記"}),n.jsx(Nl,{})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[n.jsx("h2",{className:"mb-3 text-lg font-medium",children:"看房心得"}),n.jsx(Cl,{})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[n.jsx("h2",{className:"mb-3 text-lg font-medium",children:"專有名詞解釋"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["這個物件的",n.jsx(Hs,{text:"容積率"})," 和",n.jsx(Hs,{text:"建蔽率"})," 都符合法規標準。"]})]})]})}const Il={5:30*1e3},Ks=e=>({id:e,currentStep:1,isPaid:!1,steps:{1:{name:"已電聯",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},2:{name:"已帶看",agentStatus:"pending",buyerStatus:"pending",locked:!1,data:{risks:{water:!1,wall:!1,structure:!1,other:!1}}},3:{name:"已出價",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},4:{name:"已斡旋",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},5:{name:"已成交",agentStatus:"pending",buyerStatus:"pending",locked:!1,paymentStatus:"pending",paymentDeadline:null,data:{}},6:{name:"已交屋",agentStatus:"pending",buyerStatus:"pending",locked:!1,checklist:[],data:{}}},supplements:[]});function Js(){const e=Fn(),[t,r]=f.useState(!1),[s,a]=f.useState(""),[o,i]=f.useState("agent"),[c,l]=f.useState(""),[u,h]=f.useState(null),[m,g]=f.useState(!1),[p,j]=f.useState(!1),[_,v]=f.useState(""),[w,F]=f.useState(""),[I,k]=f.useState("--:--:--"),$=window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1");f.useEffect(()=>{const A=e.hash;let y="";if(A.includes("token=")?(y=A.split("token=")[1]??"",localStorage.setItem("mh_token",y),window.location.hash=""):y=localStorage.getItem("mh_token")||"",y){l(y);try{const X=y.split(".")[1];if(!X)throw new Error("Invalid token");const ae=JSON.parse(atob(X));i(ae.role),a(ae.caseId)}catch(X){console.error("Token invalid",X),localStorage.removeItem("mh_token")}}else $&&a("demo-v10")},[e,$]);const O=()=>{r(!0),a("MOCK-DEMO-01"),i("agent"),h(Ks("MOCK-DEMO-01")),ge.success("已進入演示模式 (資料僅暫存於瀏覽器)")},B=async()=>{if(!t&&!(!c||!s)){g(!0);try{const A=await fetch(`/api/trust/status?id=${s}`,{headers:{Authorization:`Bearer ${c}`}});if(A.ok){const y=await A.json();h(y)}else(A.status===401||A.status===403)&&ge.error("憑證失效，請重新登入")}catch(A){console.error(A)}g(!1)}};f.useEffect(()=>{if(!t&&c&&s){B();const A=setInterval(B,5e3);return()=>clearInterval(A)}},[c,s,t]),f.useEffect(()=>{const A=setInterval(()=>{var y,X;if(((X=(y=u==null?void 0:u.steps)==null?void 0:y[5])==null?void 0:X.paymentStatus)==="initiated"&&u.steps[5].paymentDeadline){const ae=u.steps[5].paymentDeadline-Date.now();if(ae<=0)k("已逾期"),t&&h(we=>{if(!we)return null;const me={...we};return me.steps[5]&&(me.steps[5].paymentStatus="expired"),me});else{const we=Math.floor(ae/36e5),me=Math.floor(ae%36e5/6e4),V=Math.floor(ae%6e4/1e3);k(`${we}:${me.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`)}}},1e3);return()=>clearInterval(A)},[u,t]);const S=async(A,y={})=>{var X,ae,we,me,V;if(!p){if(j(!0),t){if(await new Promise(je=>setTimeout(je,600)),!u)return;const R=JSON.parse(JSON.stringify(u)),K=parseInt(y.step||u.currentStep);if(!R.steps[K]){ge.error("Invalid step"),j(!1);return}try{switch(A){case"submit":if(o!=="agent")throw new Error("權限不足");R.steps[K]&&(R.steps[K].data={...R.steps[K].data,...y.data},R.steps[K].agentStatus="submitted");break;case"confirm":if(o!=="buyer")throw new Error("權限不足");if(R.steps[K]&&(R.steps[K].buyerStatus="confirmed"),K===5)R.steps[5]&&(R.steps[5].paymentStatus="initiated",R.steps[5].paymentDeadline=Date.now()+(Il[5]||3e4));else if(K===6){if(!((ae=(X=R.steps[6])==null?void 0:X.checklist)==null?void 0:ae.every(_e=>_e.checked)))throw new Error("檢查項目未完成");R.steps[6]&&(R.steps[6].locked=!0)}else R.steps[K]&&(R.steps[K].locked=!0),R.currentStep+=1;break;case"payment":if(((we=R.steps[5])==null?void 0:we.paymentStatus)!=="initiated")throw new Error("非付款狀態");R.isPaid=!0,R.steps[5]&&(R.steps[5].paymentStatus="completed",R.steps[5].locked=!0),R.currentStep=6;const je=((V=(me=R.steps[2])==null?void 0:me.data)==null?void 0:V.risks)||{};R.steps[6]&&(R.steps[6].checklist=[{label:"🚰 水電瓦斯功能正常",checked:!1},{label:"🪟 門窗鎖具開關正常",checked:!1},{label:"🔑 鑰匙門禁卡點交",checked:!1},{label:`🧱 驗證房仲承諾：${je.water?"有":"無"}漏水`,checked:!1},{label:`🧱 驗證房仲承諾：${je.wall?"有":"無"}壁癌`,checked:!1}]);break;case"checklist":const L=R.steps[6];if(L&&L.checklist){const oe=L.checklist[y.index];oe&&(oe.checked=y.checked)}break;case"supplement":R.supplements.push({role:o,content:y.content,timestamp:Date.now()});break;case"reset":h(Ks(s)),ge.success("已重置 (Mock)"),j(!1);return}h(R),ge.success("操作成功 (Mock)"),v(""),F("")}catch(je){ge.error(je.message)}j(!1);return}try{const K=await(await fetch(`/api/trust/${A}?id=${s}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(y)})).json();K.error?ge.error(K.error):(v(""),F(""),await B(),ge.success("成功"))}catch(R){ge.error(R.message)}j(!1)}},Q=A=>{var y,X;return S("submit",{step:A,data:A==="2"?{risks:(X=(y=u==null?void 0:u.steps["2"])==null?void 0:y.data)==null?void 0:X.risks}:{note:_}})},P=A=>S("confirm",{step:A}),te=()=>{confirm("確認模擬付款？")&&S("payment")},ye=(A,y)=>{o==="buyer"&&S("checklist",{index:A,checked:y})},Fe=()=>S("supplement",{content:w}),qt=()=>{confirm("重置所有進度？")&&S("reset")},Ve=()=>{const A=o==="agent"?"buyer":"agent";i(A),ge("切換身份為: "+(A==="agent"?"房仲":"買方"),{icon:A==="agent"?"👨‍💼":"👤"})};if(!u&&!m)return n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-4 font-sans",children:n.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-sm w-full text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Ns,{size:32})}),n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"安心留痕 Trust Room"}),n.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"目前未檢測到有效的登入憑證 (Token)。您可以進入演示模式來測試功能。"}),n.jsxs("button",{onClick:O,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition shadow-lg flex items-center justify-center gap-2",children:[n.jsx(Ns,{size:18}),"啟動演示模式 (Demo Mode)"]}),n.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"此模式下資料不會保存到資料庫。"})]})});if(!u)return n.jsx("div",{className:"p-8 text-center",children:"載入中..."});const Ce=A=>{switch(A){case"1":return n.jsx(Mn,{size:14});case"2":return n.jsx(Lo,{size:14});case"3":return n.jsx(Dn,{size:14});case"4":return n.jsx(Do,{size:14});case"5":return n.jsx(Mo,{size:14});case"6":return n.jsx(Fo,{size:14});default:return n.jsx(Po,{size:14})}};return n.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-white shadow-2xl relative pb-24 font-sans text-gray-800",children:[n.jsx(Ln,{position:"top-center"}),n.jsxs("header",{className:`${t?"bg-indigo-900":"bg-slate-900"} text-white p-4 sticky top-0 z-50 flex justify-between items-center shadow-lg transition-colors`,children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"font-bold text-lg tracking-wide flex items-center gap-2",children:["MaiHouses ",n.jsx("span",{className:`text-xs px-1 rounded ${t?"bg-yellow-500 text-black":"bg-blue-600"}`,children:t?"DEMO":"V10"})]}),n.jsxs("div",{className:"flex items-center text-[10px] text-gray-400 gap-2",children:[n.jsxs("span",{children:["案號: ",s]}),m&&n.jsx("span",{className:"animate-pulse",children:"●"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:qt,className:"bg-white/10 hover:bg-white/20 w-8 h-8 rounded flex items-center justify-center transition",children:n.jsx(Ao,{size:14})}),n.jsxs("button",{onClick:Ve,className:`px-3 py-1 rounded-md text-xs font-bold border border-white/20 flex items-center gap-1 transition ${o==="agent"?"bg-blue-600":"bg-green-600"}`,children:[o==="agent"?n.jsx(To,{size:12}):n.jsx($o,{size:12}),o==="agent"?"房仲":"買方"]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border-b sticky top-[60px] z-40",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-xs font-bold text-slate-700",children:["進度 ",u.currentStep,"/6"]}),u.isPaid&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full font-bold",children:"已履約"})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-700",style:{width:`${u.currentStep/6*100}%`}})})]}),n.jsxs("div",{className:"p-4 space-y-0",children:[Object.entries(u.steps).map(([A,y])=>{var R,K,je;const X=parseInt(A),ae=X===u.currentStep,we=X<u.currentStep,me=X>u.currentStep;let V="bg-gray-300 border-gray-300";return we||y.locked?V="bg-green-500 border-green-500":ae&&(V="bg-blue-600 border-blue-600"),n.jsxs("div",{className:`relative pl-14 py-3 ${me?"opacity-50 grayscale":""}`,children:[n.jsx("div",{className:`absolute left-0 top-3 z-10 w-10 h-10 rounded-full flex items-center justify-center border-4 border-white shadow-sm transition-colors text-white ${V}`,children:Ce(A)}),A!=="6"&&n.jsx("div",{className:"absolute left-[24px] top-[50px] bottom-[-20px] w-[2px] bg-gray-200 z-0"}),n.jsxs("div",{className:`bg-white border rounded-xl p-4 shadow-sm transition-all ${ae?"border-blue-500 ring-2 ring-blue-50":"border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[y.name,A==="5"&&y.paymentStatus==="initiated"&&!y.locked&&n.jsx("span",{className:"text-[10px] text-orange-500 bg-orange-50 px-2 rounded animate-pulse",children:"付款中"}),A==="5"&&y.paymentStatus==="expired"&&n.jsx("span",{className:"text-[10px] text-red-500 bg-red-50 px-2 rounded",children:"逾期"})]}),y.locked&&n.jsx(Ro,{size:14,className:"text-green-600"})]}),A==="2"&&n.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded border border-gray-100",children:[n.jsx("p",{className:"text-xs font-bold text-gray-500 mb-2 border-b pb-1",children:"📢 房仲屋況聲明"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("label",{className:"flex items-center space-x-2 text-xs cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:((R=y.data.risks)==null?void 0:R.water)||!1,onChange:L=>{var oe,_e;if(u){const Ae={...u},Me=(_e=(oe=Ae.steps[2])==null?void 0:oe.data)==null?void 0:_e.risks;Me&&(Me.water=L.target.checked,h(Ae))}},disabled:y.locked||o!=="agent",className:"rounded text-blue-600"}),n.jsx("span",{children:"漏水/滲水"})]}),n.jsxs("label",{className:"flex items-center space-x-2 text-xs cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:((K=y.data.risks)==null?void 0:K.wall)||!1,onChange:L=>{var oe,_e;if(u){const Ae={...u},Me=(_e=(oe=Ae.steps[2])==null?void 0:oe.data)==null?void 0:_e.risks;Me&&(Me.wall=L.target.checked,h(Ae))}},disabled:y.locked||o!=="agent",className:"rounded text-blue-600"}),n.jsx("span",{children:"壁癌/白華"})]})]})]}),A==="5"&&y.paymentStatus==="initiated"&&!y.locked&&n.jsxs("div",{className:"mb-4 text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[n.jsx("div",{className:"text-2xl font-mono text-orange-600 font-bold mb-1",children:I}),n.jsx("div",{className:"text-xs text-orange-400 mb-3",children:"付款截止"}),o==="buyer"?n.jsx("button",{onClick:te,disabled:p||I==="已逾期",className:`w-full text-white font-bold py-2 rounded shadow transition ${I==="已逾期"?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-red-500 hover:shadow-lg"}`,children:I==="已逾期"?"付款已截止":p?"處理中...":"立即支付 NT$ 2,000"}):n.jsx("div",{className:"text-xs text-gray-400",children:"等待買方付款..."})]}),A==="6"&&!y.locked&&u.isPaid&&n.jsxs("div",{className:"space-y-2 mt-2",children:[(je=y.checklist)==null?void 0:je.map((L,oe)=>n.jsxs("div",{onClick:()=>ye(oe,!L.checked),className:`flex items-center p-3 border rounded transition cursor-pointer ${L.checked?"bg-indigo-50 border-indigo-200":"hover:bg-gray-50"}`,children:[n.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center bg-white ${L.checked?"bg-indigo-600 border-indigo-600":""}`,children:L.checked&&n.jsx(Oo,{size:12,className:"text-white"})}),n.jsx("span",{className:`ml-3 text-sm ${L.checked?"text-indigo-800 font-bold":""}`,children:L.label})]},oe)),n.jsx("button",{onClick:()=>P("6"),className:"w-full bg-indigo-600 text-white py-2 rounded font-bold mt-2",children:"完成交屋"})]}),!y.locked&&ae&&A!=="5"&&A!=="6"&&n.jsxs("div",{children:[o==="agent"&&(y.agentStatus==="pending"?n.jsxs("div",{children:[A!=="2"&&n.jsx("textarea",{value:_,onChange:L=>v(L.target.value),className:"w-full border p-2 rounded text-sm mb-2 focus:ring-2 ring-blue-200 outline-none",placeholder:"輸入紀錄..."}),n.jsx("button",{onClick:()=>Q(A),disabled:p,className:"w-full bg-slate-800 text-white py-2 rounded text-sm",children:p?"...":"送出"})]}):n.jsx("div",{className:"text-center text-xs text-gray-400 py-2 bg-gray-50 rounded",children:"等待買方確認..."})),o==="buyer"&&(y.agentStatus==="submitted"?n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"房仲已提交，請核對："}),n.jsx("div",{className:"p-2 bg-gray-50 rounded border text-sm mb-2 whitespace-pre-wrap",children:y.data.note||"（已提交表單）"}),n.jsx("button",{onClick:()=>P(A),disabled:p,className:"w-full bg-green-600 text-white py-2 rounded text-sm",children:p?"...":"確認無誤"})]}):n.jsx("div",{className:"text-center text-xs text-gray-400 py-2",children:"等待房仲提交..."}))]}),A==="5"&&!y.locked&&y.paymentStatus==="pending"&&n.jsxs("div",{children:[o==="agent"&&y.agentStatus==="pending"&&n.jsx("button",{onClick:()=>Q("5"),className:"w-full bg-slate-800 text-white py-2 rounded",children:"上傳合約並送出"}),o==="buyer"&&y.agentStatus==="submitted"&&n.jsx("button",{onClick:()=>P("5"),className:"w-full bg-green-600 text-white py-2 rounded",children:"確認合約 (將啟動付款)"})]}),u.supplements.length>0&&n.jsx("div",{className:"mt-4 pt-4 border-t border-dashed",children:u.supplements.map((L,oe)=>n.jsxs("div",{className:"text-xs mb-1 p-2 bg-gray-50 rounded border border-gray-100 flex gap-2",children:[n.jsx("span",{className:"font-bold",children:L.role==="agent"?"👨‍💼":"👤"}),n.jsx("span",{className:"flex-1",children:L.content})]},oe))})]})]},A)}),n.jsxs("div",{className:"mt-8 bg-white p-4 rounded-xl shadow-sm border",children:[n.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-2",children:"📝 新增補充紀錄"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{value:w,onChange:A=>F(A.target.value),className:"flex-1 border rounded px-3 py-2 text-sm",placeholder:"輸入備註..."}),n.jsx("button",{onClick:Fe,disabled:!w,className:"bg-gray-800 text-white px-4 rounded text-sm",children:"送出"})]})]})]})]})}function Al(){return n.jsx("main",{className:"mx-auto max-w-container p-4 md:p-6",children:n.jsx($a,{})})}let Le=class extends f.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.error(t);try{ar("error_boundary","*",String(t.message||t))}catch{}}render(){return this.state.hasError?n.jsx("div",{className:"rounded-[var(--r-lg)] bg-white p-4 text-[var(--danger)] shadow-[var(--shadow-card)]",children:"區塊錯誤，請重試。"}):this.props.children}};const Tl=f.createContext(null),$l=({children:e})=>{const[t,r]=f.useState(()=>localStorage.getItem("mai-mood-v1")||"neutral"),s=c=>{r(c),localStorage.setItem("mai-mood-v1",c),Wi(c),be(xe.MoodPick,{mood:c})},a=t==="stress"?"soothe":t==="rest"?"warm":"light",o=t==="stress"?2:t==="rest"?1:0,i=f.useMemo(()=>({mood:t,setMood:s,tone:a,throttleLevel:o}),[t]);return n.jsx(Tl.Provider,{value:i,children:e})};function Rl(){const[e,t]=f.useState(!1);f.useEffect(()=>{localStorage.getItem("cookie-consent")||t(!0)},[]);const r=()=>{localStorage.setItem("cookie-consent","true"),t(!1)};return e?n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-gray-900 p-4 text-white shadow-lg md:p-6",children:n.jsxs("div",{className:"mx-auto flex max-w-container flex-col items-center justify-between gap-4 md:flex-row",children:[n.jsx("div",{className:"text-sm text-gray-300",children:"我們使用 Cookie 來改善您的瀏覽體驗並提供個人化內容。繼續瀏覽即表示您同意我們的隱私權政策。"}),n.jsx("div",{className:"flex gap-3",children:n.jsx("button",{onClick:r,className:"rounded-full bg-brand px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",children:"我同意"})})]})}):null}const Ol=f.createContext(null),Or={didCatch:!1,error:null};class Pl extends f.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Or}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,s,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];(r=(s=this.props).onReset)===null||r===void 0||r.call(s,{args:o,reason:"imperative-api"}),this.setState(Or)}}componentDidCatch(t,r){var s,a;(s=(a=this.props).onError)===null||s===void 0||s.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:s}=this.state,{resetKeys:a}=this.props;if(s&&r.error!==null&&Fl(t.resetKeys,a)){var o,i;(o=(i=this.props).onReset)===null||o===void 0||o.call(i,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(Or)}}render(){const{children:t,fallbackRender:r,FallbackComponent:s,fallback:a}=this.props,{didCatch:o,error:i}=this.state;let c=t;if(o){const l={error:i,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(l);else if(s)c=f.createElement(s,l);else if(a!==void 0)c=a;else throw i}return f.createElement(Ol.Provider,{value:{didCatch:o,error:i,resetErrorBoundary:this.resetErrorBoundary}},c)}}function Fl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,s)=>!Object.is(r,t[s]))}const Ml="_primary_10s9u_154",Dl="_float_10s9u_1",Ll="_pulse_10s9u_1",Zl="_selected_10s9u_210",Ul="_urgent_10s9u_288",Bl="_shimmer_10s9u_1",b={"uag-page":"_uag-page_10s9u_26","uag-header":"_uag-header_10s9u_51","uag-header-inner":"_uag-header-inner_10s9u_58","uag-logo":"_uag-logo_10s9u_63","uag-logo-badge":"_uag-logo-badge_10s9u_64","uag-container":"_uag-container_10s9u_70","uag-grid":"_uag-grid_10s9u_71","k-span-2":"_k-span-2_10s9u_74","k-span-3":"_k-span-3_10s9u_75","k-span-4":"_k-span-4_10s9u_76","k-span-6":"_k-span-6_10s9u_77","uag-breadcrumb":"_uag-breadcrumb_10s9u_87","uag-badge--pro":"_uag-badge--pro_10s9u_101","uag-card":"_uag-card_10s9u_108","uag-card-header":"_uag-card-header_10s9u_122","uag-card-title":"_uag-card-title_10s9u_123","uag-card-sub":"_uag-card-sub_10s9u_128","uag-actions":"_uag-actions_10s9u_133","uag-btn":"_uag-btn_10s9u_144",primary:Ml,"uag-badge":"_uag-badge_10s9u_101","uag-badge--s":"_uag-badge--s_10s9u_169","uag-badge--a":"_uag-badge--a_10s9u_170","uag-cluster":"_uag-cluster_10s9u_173","uag-bubble":"_uag-bubble_10s9u_199",float:Dl,pulse:Ll,selected:Zl,"uag-bubble-grade":"_uag-bubble-grade_10s9u_222","uag-bubble-label":"_uag-bubble-label_10s9u_227","uag-action-panel":"_uag-action-panel_10s9u_240","ap-head":"_ap-head_10s9u_247","ap-body":"_ap-body_10s9u_253","ap-stats-group":"_ap-stats-group_10s9u_262","ai-box":"_ai-box_10s9u_263","action-zone":"_action-zone_10s9u_264","ap-stat":"_ap-stat_10s9u_262",urgent:Ul,"btn-attack":"_btn-attack_10s9u_295",shimmer:Bl,"monitor-table":"_monitor-table_10s9u_335","progress-bg":"_progress-bg_10s9u_358","progress-fill":"_progress-fill_10s9u_359","t-countdown":"_t-countdown_10s9u_360","listing-item":"_listing-item_10s9u_363","l-thumb":"_l-thumb_10s9u_369","l-title":"_l-title_10s9u_370","l-tags":"_l-tags_10s9u_371","l-tag":"_l-tag_10s9u_371","l-kpi":"_l-kpi_10s9u_373","feed-post":"_feed-post_10s9u_382","fp-title":"_fp-title_10s9u_384","fp-meta":"_fp-meta_10s9u_385","fp-body":"_fp-body_10s9u_386","mai-card":"_mai-card_10s9u_389","mai-head":"_mai-head_10s9u_403","mai-tag":"_mai-tag_10s9u_408","mai-title":"_mai-title_10s9u_409","mai-sub":"_mai-sub_10s9u_410","mai-body":"_mai-body_10s9u_411","mai-left":"_mai-left_10s9u_412","mai-price":"_mai-price_10s9u_413","mai-price-label":"_mai-price-label_10s9u_414","mai-price-value":"_mai-price-value_10s9u_415","mai-price-unit":"_mai-price-unit_10s9u_416","mai-stats":"_mai-stats_10s9u_417","mai-right":"_mai-right_10s9u_420","mai-thumb":"_mai-thumb_10s9u_421","mai-mini":"_mai-mini_10s9u_422","mai-actions":"_mai-actions_10s9u_424","mai-btn":"_mai-btn_10s9u_425","flow-stage":"_flow-stage_10s9u_445","uag-footer-bar":"_uag-footer-bar_10s9u_448"};function x(e,t,r){function s(c,l){var u;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(u=c._zod).traits??(u.traits=new Set),c._zod.traits.add(e),t(c,l);for(const h in i.prototype)h in c||Object.defineProperty(c,h,{value:i.prototype[h].bind(c)});c._zod.constr=i,c._zod.def=l}const a=(r==null?void 0:r.Parent)??Object;class o extends a{}Object.defineProperty(o,"name",{value:e});function i(c){var l;const u=r!=null&&r.Parent?new o:this;s(u,c),(l=u._zod).deferred??(l.deferred=[]);for(const h of u._zod.deferred)h();return u}return Object.defineProperty(i,"init",{value:s}),Object.defineProperty(i,Symbol.hasInstance,{value:c=>{var l,u;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(u=(l=c==null?void 0:c._zod)==null?void 0:l.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class zt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ma extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Da={};function wt(e){return Da}function Wl(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,a])=>t.indexOf(+s)===-1).map(([s,a])=>a)}function ss(e,t){return typeof t=="bigint"?t.toString():t}function fs(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function gs(e){return e==null}function bs(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function ql(e,t){const r=(e.toString().split(".")[1]||"").length,s=t.toString();let a=(s.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(s)){const l=s.match(/\d?e-(\d?)/);l!=null&&l[1]&&(a=Number.parseInt(l[1]))}const o=r>a?r:a,i=Number.parseInt(e.toFixed(o).replace(".","")),c=Number.parseInt(t.toFixed(o).replace(".",""));return i%c/10**o}const Ys=Symbol("evaluating");function q(e,t,r){let s;Object.defineProperty(e,t,{get(){if(s!==Ys)return s===void 0&&(s=Ys,s=r()),s},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function _t(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function kt(...e){const t={};for(const r of e){const s=Object.getOwnPropertyDescriptors(r);Object.assign(t,s)}return Object.defineProperties({},t)}function Xs(e){return JSON.stringify(e)}const La="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function _r(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ql=fs(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Kt(e){if(_r(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(_r(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Za(e){return Kt(e)?{...e}:Array.isArray(e)?[...e]:e}const Vl=new Set(["string","number","symbol"]);function zr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ot(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(s._zod.parent=e),s}function T(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Gl(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Hl={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Kl(e,t){const r=e._zod.def,s=kt(e._zod.def,{get shape(){const a={};for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(a[o]=r.shape[o])}return _t(this,"shape",a),a},checks:[]});return ot(e,s)}function Jl(e,t){const r=e._zod.def,s=kt(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete a[o]}return _t(this,"shape",a),a},checks:[]});return ot(e,s)}function Yl(e,t){if(!Kt(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=kt(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return _t(this,"shape",o),o},checks:[]});return ot(e,a)}function Xl(e,t){if(!Kt(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return _t(this,"shape",s),s},checks:e._zod.def.checks};return ot(e,r)}function eu(e,t){const r=kt(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return _t(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return ot(e,r)}function tu(e,t,r){const s=kt(t._zod.def,{get shape(){const a=t._zod.def.shape,o={...a};if(r)for(const i in r){if(!(i in a))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=e?new e({type:"optional",innerType:a[i]}):a[i])}else for(const i in a)o[i]=e?new e({type:"optional",innerType:a[i]}):a[i];return _t(this,"shape",o),o},checks:[]});return ot(t,s)}function ru(e,t,r){const s=kt(t._zod.def,{get shape(){const a=t._zod.def.shape,o={...a};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:a[i]}))}else for(const i in a)o[i]=new e({type:"nonoptional",innerType:a[i]});return _t(this,"shape",o),o},checks:[]});return ot(t,s)}function Ct(e,t=0){var r;if(e.aborted===!0)return!0;for(let s=t;s<e.issues.length;s++)if(((r=e.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function Ua(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function mr(e){return typeof e=="string"?e:e==null?void 0:e.message}function jt(e,t,r){var a,o,i,c,l,u;const s={...e,path:e.path??[]};if(!e.message){const h=mr((i=(o=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??mr((c=t==null?void 0:t.error)==null?void 0:c.call(t,e))??mr((l=r.customError)==null?void 0:l.call(r,e))??mr((u=r.localeError)==null?void 0:u.call(r,e))??"Invalid input";s.message=h}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function xs(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Jt(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const Ba=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,ss,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Wa=x("$ZodError",Ba),qa=x("$ZodError",Ba,{Parent:Error});function su(e,t=r=>r.message){const r={},s=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:r}}function nu(e,t=r=>r.message){const r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(i=>s({issues:i}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let i=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(i[l]=i[l]||{_errors:[]},i[l]._errors.push(t(o))):i[l]=i[l]||{_errors:[]},i=i[l],c++}}};return s(e),r}const vs=e=>(t,r,s,a)=>{const o=s?Object.assign(s,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new zt;if(i.issues.length){const c=new((a==null?void 0:a.Err)??e)(i.issues.map(l=>jt(l,o,wt())));throw La(c,a==null?void 0:a.callee),c}return i.value},ys=e=>async(t,r,s,a)=>{const o=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const c=new((a==null?void 0:a.Err)??e)(i.issues.map(l=>jt(l,o,wt())));throw La(c,a==null?void 0:a.callee),c}return i.value},Er=e=>(t,r,s)=>{const a=s?{...s,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise)throw new zt;return o.issues.length?{success:!1,error:new(e??Wa)(o.issues.map(i=>jt(i,a,wt())))}:{success:!0,data:o.value}},au=Er(qa),Ir=e=>async(t,r,s)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>jt(i,a,wt())))}:{success:!0,data:o.value}},ou=Ir(qa),iu=e=>(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return vs(e)(t,r,a)},cu=e=>(t,r,s)=>vs(e)(t,r,s),lu=e=>async(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return ys(e)(t,r,a)},uu=e=>async(t,r,s)=>ys(e)(t,r,s),du=e=>(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Er(e)(t,r,a)},hu=e=>(t,r,s)=>Er(e)(t,r,s),mu=e=>async(t,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ir(e)(t,r,a)},pu=e=>async(t,r,s)=>Ir(e)(t,r,s),fu=/^[cC][^\s-]{8,}$/,gu=/^[0-9a-z]+$/,bu=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xu=/^[0-9a-vA-V]{20}$/,vu=/^[A-Za-z0-9]{27}$/,yu=/^[a-zA-Z0-9_-]{21}$/,wu=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ju=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,en=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,_u=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ku="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Nu(){return new RegExp(ku,"u")}const Su=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cu=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,zu=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Eu=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Iu=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Qa=/^[A-Za-z0-9_-]*$/,Au=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Tu=/^\+(?:[0-9]){6,14}[0-9]$/,Va="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$u=new RegExp(`^${Va}$`);function Ga(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ru(e){return new RegExp(`^${Ga(e)}$`)}function Ou(e){const t=Ga({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${Va}T(?:${s})$`)}const Pu=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Fu=/^-?\d+$/,Mu=/^-?\d+(?:\.\d+)?/,Du=/^null$/i,Lu=/^[^A-Z]*$/,Zu=/^[^a-z]*$/,ve=x("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Ha={number:"number",bigint:"bigint",object:"date"},Ka=x("$ZodCheckLessThan",(e,t)=>{ve.init(e,t);const r=Ha[typeof t.value];e._zod.onattach.push(s=>{const a=s._zod.bag,o=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:r,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ja=x("$ZodCheckGreaterThan",(e,t)=>{ve.init(e,t);const r=Ha[typeof t.value];e._zod.onattach.push(s=>{const a=s._zod.bag,o=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:r,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Uu=x("$ZodCheckMultipleOf",(e,t)=>{ve.init(e,t),e._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):ql(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Bu=x("$ZodCheckNumberFormat",(e,t)=>{var i;ve.init(e,t),t.format=t.format||"float64";const r=(i=t.format)==null?void 0:i.includes("int"),s=r?"int":"number",[a,o]=Hl[t.format];e._zod.onattach.push(c=>{const l=c._zod.bag;l.format=t.format,l.minimum=a,l.maximum=o,r&&(l.pattern=Fu)}),e._zod.check=c=>{const l=c.value;if(r){if(!Number.isInteger(l)){c.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?c.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):c.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}l<a&&c.issues.push({origin:"number",input:l,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),l>o&&c.issues.push({origin:"number",input:l,code:"too_big",maximum:o,inst:e})}}),Wu=x("$ZodCheckMaxLength",(e,t)=>{var r;ve.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!gs(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const a=s.value;if(a.length<=t.maximum)return;const i=xs(a);s.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),qu=x("$ZodCheckMinLength",(e,t)=>{var r;ve.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!gs(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const a=s.value;if(a.length>=t.minimum)return;const i=xs(a);s.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Qu=x("$ZodCheckLengthEquals",(e,t)=>{var r;ve.init(e,t),(r=e._zod.def).when??(r.when=s=>{const a=s.value;return!gs(a)&&a.length!==void 0}),e._zod.onattach.push(s=>{const a=s._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=s=>{const a=s.value,o=a.length;if(o===t.length)return;const i=xs(a),c=o>t.length;s.issues.push({origin:i,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Ar=x("$ZodCheckStringFormat",(e,t)=>{var r,s;ve.init(e,t),e._zod.onattach.push(a=>{const o=a._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),Vu=x("$ZodCheckRegex",(e,t)=>{Ar.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Gu=x("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Lu),Ar.init(e,t)}),Hu=x("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Zu),Ar.init(e,t)}),Ku=x("$ZodCheckIncludes",(e,t)=>{ve.init(e,t);const r=zr(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(s)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),Ju=x("$ZodCheckStartsWith",(e,t)=>{ve.init(e,t);const r=new RegExp(`^${zr(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),Yu=x("$ZodCheckEndsWith",(e,t)=>{ve.init(e,t);const r=new RegExp(`.*${zr(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),Xu=x("$ZodCheckOverwrite",(e,t)=>{ve.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class ed{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(i=>i),a=Math.min(...s.map(i=>i.length-i.trimStart().length)),o=s.map(i=>i.slice(a)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...r,a.join(`
`))}}const td={major:4,minor:1,patch:12},Y=x("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=td;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const o of s)for(const i of o._zod.onattach)i(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const o=(c,l,u)=>{let h=Ct(c),m;for(const g of l){if(g._zod.def.when){if(!g._zod.def.when(c))continue}else if(h)continue;const p=c.issues.length,j=g._zod.check(c);if(j instanceof Promise&&(u==null?void 0:u.async)===!1)throw new zt;if(m||j instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await j,c.issues.length!==p&&(h||(h=Ct(c,p)))});else{if(c.issues.length===p)continue;h||(h=Ct(c,p))}}return m?m.then(()=>c):c},i=(c,l,u)=>{if(Ct(c))return c.aborted=!0,c;const h=o(l,s,u);if(h instanceof Promise){if(u.async===!1)throw new zt;return h.then(m=>e._zod.parse(m,u))}return e._zod.parse(h,u)};e._zod.run=(c,l)=>{if(l.skipChecks)return e._zod.parse(c,l);if(l.direction==="backward"){const h=e._zod.parse({value:c.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(m=>i(m,c,l)):i(h,c,l)}const u=e._zod.parse(c,l);if(u instanceof Promise){if(l.async===!1)throw new zt;return u.then(h=>o(h,s,l))}return o(u,s,l)}}e["~standard"]={validate:o=>{var i;try{const c=au(e,o);return c.success?{value:c.data}:{issues:(i=c.error)==null?void 0:i.issues}}catch{return ou(e,o).then(l=>{var u;return l.success?{value:l.data}:{issues:(u=l.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),ws=x("$ZodString",(e,t)=>{var r;Y.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Pu(e._zod.bag),e._zod.parse=(s,a)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),G=x("$ZodStringFormat",(e,t)=>{Ar.init(e,t),ws.init(e,t)}),rd=x("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ju),G.init(e,t)}),sd=x("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=en(s))}else t.pattern??(t.pattern=en());G.init(e,t)}),nd=x("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=_u),G.init(e,t)}),ad=x("$ZodURL",(e,t)=>{G.init(e,t),e._zod.check=r=>{try{const s=r.value.trim(),a=new URL(s);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Au.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),od=x("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Nu()),G.init(e,t)}),id=x("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=yu),G.init(e,t)}),cd=x("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=fu),G.init(e,t)}),ld=x("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=gu),G.init(e,t)}),ud=x("$ZodULID",(e,t)=>{t.pattern??(t.pattern=bu),G.init(e,t)}),dd=x("$ZodXID",(e,t)=>{t.pattern??(t.pattern=xu),G.init(e,t)}),hd=x("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=vu),G.init(e,t)}),md=x("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ou(t)),G.init(e,t)}),pd=x("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=$u),G.init(e,t)}),fd=x("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Ru(t)),G.init(e,t)}),gd=x("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=wu),G.init(e,t)}),bd=x("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Su),G.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),xd=x("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Cu),G.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),vd=x("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=zu),G.init(e,t)}),yd=x("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Eu),G.init(e,t),e._zod.check=r=>{const s=r.value.split("/");try{if(s.length!==2)throw new Error;const[a,o]=s;if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Ya(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const wd=x("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Iu),G.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Ya(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function jd(e){if(!Qa.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Ya(r)}const _d=x("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Qa),G.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{jd(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),kd=x("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Tu),G.init(e,t)});function Nd(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const a=JSON.parse(atob(s));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const Sd=x("$ZodJWT",(e,t)=>{G.init(e,t),e._zod.check=r=>{Nd(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Xa=x("$ZodNumber",(e,t)=>{Y.init(e,t),e._zod.pattern=e._zod.bag.pattern??Mu,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const o=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...o?{received:o}:{}}),r}}),Cd=x("$ZodNumber",(e,t)=>{Bu.init(e,t),Xa.init(e,t)}),zd=x("$ZodNull",(e,t)=>{Y.init(e,t),e._zod.pattern=Du,e._zod.values=new Set([null]),e._zod.parse=(r,s)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),Ed=x("$ZodUnknown",(e,t)=>{Y.init(e,t),e._zod.parse=r=>r}),Id=x("$ZodNever",(e,t)=>{Y.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function tn(e,t,r){e.issues.length&&t.issues.push(...Ua(r,e.issues)),t.value[r]=e.value}const Ad=x("$ZodArray",(e,t)=>{Y.init(e,t),e._zod.parse=(r,s)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const o=[];for(let i=0;i<a.length;i++){const c=a[i],l=t.element._zod.run({value:c,issues:[]},s);l instanceof Promise?o.push(l.then(u=>tn(u,r,i))):tn(l,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function kr(e,t,r,s){e.issues.length&&t.issues.push(...Ua(r,e.issues)),e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}function eo(e){var s,a,o,i;const t=Object.keys(e.shape);for(const c of t)if(!((i=(o=(a=(s=e.shape)==null?void 0:s[c])==null?void 0:a._zod)==null?void 0:o.traits)!=null&&i.has("$ZodType")))throw new Error(`Invalid element at key "${c}": expected a Zod schema`);const r=Gl(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function to(e,t,r,s,a,o){const i=[],c=a.keySet,l=a.catchall._zod,u=l.def.type;for(const h of Object.keys(t)){if(c.has(h))continue;if(u==="never"){i.push(h);continue}const m=l.run({value:t[h],issues:[]},s);m instanceof Promise?e.push(m.then(g=>kr(g,r,h,t))):kr(m,r,h,t)}return i.length&&r.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const Td=x("$ZodObject",(e,t)=>{Y.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const l={...c};return Object.defineProperty(t,"shape",{value:l}),l}})}const s=fs(()=>eo(t));q(e._zod,"propValues",()=>{const c=t.shape,l={};for(const u in c){const h=c[u]._zod;if(h.values){l[u]??(l[u]=new Set);for(const m of h.values)l[u].add(m)}}return l});const a=_r,o=t.catchall;let i;e._zod.parse=(c,l)=>{i??(i=s.value);const u=c.value;if(!a(u))return c.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),c;c.value={};const h=[],m=i.shape;for(const g of i.keys){const j=m[g]._zod.run({value:u[g],issues:[]},l);j instanceof Promise?h.push(j.then(_=>kr(_,c,g,u))):kr(j,c,g,u)}return o?to(h,u,c,l,s.value,e):h.length?Promise.all(h).then(()=>c):c}}),$d=x("$ZodObjectJIT",(e,t)=>{Td.init(e,t);const r=e._zod.parse,s=fs(()=>eo(t)),a=g=>{const p=new ed(["shape","payload","ctx"]),j=s.value,_=I=>{const k=Xs(I);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};p.write("const input = payload.value;");const v=Object.create(null);let w=0;for(const I of j.keys)v[I]=`key_${w++}`;p.write("const newResult = {};");for(const I of j.keys){const k=v[I],$=Xs(I);p.write(`const ${k} = ${_(I)};`),p.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        
        if (${k}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${k}.value;
        }
        
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const F=p.compile();return(I,k)=>F(g,I,k)};let o;const i=_r,c=!Da.jitless,u=c&&Ql.value,h=t.catchall;let m;e._zod.parse=(g,p)=>{m??(m=s.value);const j=g.value;return i(j)?c&&u&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(o||(o=a(t.shape)),g=o(g,p),h?to([],j,g,p,m,e):g):r(g,p):(g.issues.push({expected:"object",code:"invalid_type",input:j,inst:e}),g)}});function rn(e,t,r,s){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const a=e.filter(o=>!Ct(o));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>jt(i,s,wt())))}),t)}const Rd=x("$ZodUnion",(e,t)=>{Y.init(e,t),q(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),q(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),q(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),q(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${a.map(o=>bs(o.source)).join("|")})$`)}});const r=t.options.length===1,s=t.options[0]._zod.run;e._zod.parse=(a,o)=>{if(r)return s(a,o);let i=!1;const c=[];for(const l of t.options){const u=l._zod.run({value:a.value,issues:[]},o);if(u instanceof Promise)c.push(u),i=!0;else{if(u.issues.length===0)return u;c.push(u)}}return i?Promise.all(c).then(l=>rn(l,a,e,o)):rn(c,a,e,o)}}),Od=x("$ZodIntersection",(e,t)=>{Y.init(e,t),e._zod.parse=(r,s)=>{const a=r.value,o=t.left._zod.run({value:a,issues:[]},s),i=t.right._zod.run({value:a,issues:[]},s);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([l,u])=>sn(r,l,u)):sn(r,o,i)}});function ns(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Kt(e)&&Kt(t)){const r=Object.keys(t),s=Object.keys(e).filter(o=>r.indexOf(o)!==-1),a={...e,...t};for(const o of s){const i=ns(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};a[o]=i.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const a=e[s],o=t[s],i=ns(a,o);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function sn(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Ct(e))return e;const s=ns(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const Pd=x("$ZodEnum",(e,t)=>{Y.init(e,t);const r=Wl(t.entries),s=new Set(r);e._zod.values=s,e._zod.pattern=new RegExp(`^(${r.filter(a=>Vl.has(typeof a)).map(a=>typeof a=="string"?zr(a):a.toString()).join("|")})$`),e._zod.parse=(a,o)=>{const i=a.value;return s.has(i)||a.issues.push({code:"invalid_value",values:r,input:i,inst:e}),a}}),Fd=x("$ZodTransform",(e,t)=>{Y.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new Ma(e.constructor.name);const a=t.transform(r.value,r);if(s.async)return(a instanceof Promise?a:Promise.resolve(a)).then(i=>(r.value=i,r));if(a instanceof Promise)throw new zt;return r.value=a,r}});function nn(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Md=x("$ZodOptional",(e,t)=>{Y.init(e,t),e._zod.optin="optional",e._zod.optout="optional",q(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),q(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${bs(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(o=>nn(o,r.value)):nn(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,s)}}),Dd=x("$ZodNullable",(e,t)=>{Y.init(e,t),q(e._zod,"optin",()=>t.innerType._zod.optin),q(e._zod,"optout",()=>t.innerType._zod.optout),q(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${bs(r.source)}|null)$`):void 0}),q(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),Ld=x("$ZodDefault",(e,t)=>{Y.init(e,t),e._zod.optin="optional",q(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(o=>an(o,t)):an(a,t)}});function an(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Zd=x("$ZodPrefault",(e,t)=>{Y.init(e,t),e._zod.optin="optional",q(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),Ud=x("$ZodNonOptional",(e,t)=>{Y.init(e,t),q(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(o=>on(o,e)):on(a,e)}});function on(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Bd=x("$ZodCatch",(e,t)=>{Y.init(e,t),q(e._zod,"optin",()=>t.innerType._zod.optin),q(e._zod,"optout",()=>t.innerType._zod.optout),q(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>jt(i,s,wt()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(o=>jt(o,s,wt()))},input:r.value}),r.issues=[]),r)}}),Wd=x("$ZodPipe",(e,t)=>{Y.init(e,t),q(e._zod,"values",()=>t.in._zod.values),q(e._zod,"optin",()=>t.in._zod.optin),q(e._zod,"optout",()=>t.out._zod.optout),q(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{if(s.direction==="backward"){const o=t.out._zod.run(r,s);return o instanceof Promise?o.then(i=>pr(i,t.in,s)):pr(o,t.in,s)}const a=t.in._zod.run(r,s);return a instanceof Promise?a.then(o=>pr(o,t.out,s)):pr(a,t.out,s)}});function pr(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const qd=x("$ZodReadonly",(e,t)=>{Y.init(e,t),q(e._zod,"propValues",()=>t.innerType._zod.propValues),q(e._zod,"values",()=>t.innerType._zod.values),q(e._zod,"optin",()=>t.innerType._zod.optin),q(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{if(s.direction==="backward")return t.innerType._zod.run(r,s);const a=t.innerType._zod.run(r,s);return a instanceof Promise?a.then(cn):cn(a)}});function cn(e){return e.value=Object.freeze(e.value),e}const Qd=x("$ZodCustom",(e,t)=>{ve.init(e,t),Y.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,a=t.fn(s);if(a instanceof Promise)return a.then(o=>ln(o,r,s,e));ln(a,r,s,e)}});function ln(e,t,r,s){if(!e){const a={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(a.params=s._zod.def.params),t.issues.push(Jt(a))}}class Vd{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const a={...s,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Gd(){return new Vd}const fr=Gd();function Hd(e,t){return new e({type:"string",...T(t)})}function Kd(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...T(t)})}function un(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...T(t)})}function Jd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...T(t)})}function Yd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...T(t)})}function Xd(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...T(t)})}function eh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...T(t)})}function th(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...T(t)})}function rh(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...T(t)})}function sh(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...T(t)})}function nh(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...T(t)})}function ah(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...T(t)})}function oh(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...T(t)})}function ih(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...T(t)})}function ch(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...T(t)})}function lh(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...T(t)})}function uh(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...T(t)})}function dh(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...T(t)})}function hh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...T(t)})}function mh(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...T(t)})}function ph(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...T(t)})}function fh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...T(t)})}function gh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...T(t)})}function bh(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...T(t)})}function xh(e,t){return new e({type:"string",format:"date",check:"string_format",...T(t)})}function vh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...T(t)})}function yh(e,t){return new e({type:"string",format:"duration",check:"string_format",...T(t)})}function wh(e,t){return new e({type:"number",checks:[],...T(t)})}function jh(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...T(t)})}function _h(e,t){return new e({type:"null",...T(t)})}function kh(e){return new e({type:"unknown"})}function Nh(e,t){return new e({type:"never",...T(t)})}function dn(e,t){return new Ka({check:"less_than",...T(t),value:e,inclusive:!1})}function Pr(e,t){return new Ka({check:"less_than",...T(t),value:e,inclusive:!0})}function hn(e,t){return new Ja({check:"greater_than",...T(t),value:e,inclusive:!1})}function Fr(e,t){return new Ja({check:"greater_than",...T(t),value:e,inclusive:!0})}function mn(e,t){return new Uu({check:"multiple_of",...T(t),value:e})}function ro(e,t){return new Wu({check:"max_length",...T(t),maximum:e})}function Nr(e,t){return new qu({check:"min_length",...T(t),minimum:e})}function so(e,t){return new Qu({check:"length_equals",...T(t),length:e})}function Sh(e,t){return new Vu({check:"string_format",format:"regex",...T(t),pattern:e})}function Ch(e){return new Gu({check:"string_format",format:"lowercase",...T(e)})}function zh(e){return new Hu({check:"string_format",format:"uppercase",...T(e)})}function Eh(e,t){return new Ku({check:"string_format",format:"includes",...T(t),includes:e})}function Ih(e,t){return new Ju({check:"string_format",format:"starts_with",...T(t),prefix:e})}function Ah(e,t){return new Yu({check:"string_format",format:"ends_with",...T(t),suffix:e})}function or(e){return new Xu({check:"overwrite",tx:e})}function Th(e){return or(t=>t.normalize(e))}function $h(){return or(e=>e.trim())}function Rh(){return or(e=>e.toLowerCase())}function Oh(){return or(e=>e.toUpperCase())}function Ph(e,t,r){return new e({type:"array",element:t,...T(r)})}function Fh(e,t,r){return new e({type:"custom",check:"custom",fn:t,...T(r)})}function Mh(e){const t=Dh(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Jt(s,r.value,t._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(Jt(a))}},e(r.value,r)));return t}function Dh(e,t){const r=new ve({check:"custom",...T(t)});return r._zod.check=e,r}const Lh=x("ZodISODateTime",(e,t)=>{md.init(e,t),H.init(e,t)});function Zh(e){return bh(Lh,e)}const Uh=x("ZodISODate",(e,t)=>{pd.init(e,t),H.init(e,t)});function Bh(e){return xh(Uh,e)}const Wh=x("ZodISOTime",(e,t)=>{fd.init(e,t),H.init(e,t)});function qh(e){return vh(Wh,e)}const Qh=x("ZodISODuration",(e,t)=>{gd.init(e,t),H.init(e,t)});function Vh(e){return yh(Qh,e)}const Gh=(e,t)=>{Wa.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>nu(e,r)},flatten:{value:r=>su(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,ss,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,ss,2)}},isEmpty:{get(){return e.issues.length===0}}})},Se=x("ZodError",Gh,{Parent:Error}),Hh=vs(Se),Kh=ys(Se),Jh=Er(Se),Yh=Ir(Se),Xh=iu(Se),em=cu(Se),tm=lu(Se),rm=uu(Se),sm=du(Se),nm=hu(Se),am=mu(Se),om=pu(Se),ee=x("ZodType",(e,t)=>(Y.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(kt(t,{checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]})),e.clone=(r,s)=>ot(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>Hh(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>Jh(e,r,s),e.parseAsync=async(r,s)=>Kh(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>Yh(e,r,s),e.spa=e.safeParseAsync,e.encode=(r,s)=>Xh(e,r,s),e.decode=(r,s)=>em(e,r,s),e.encodeAsync=async(r,s)=>tm(e,r,s),e.decodeAsync=async(r,s)=>rm(e,r,s),e.safeEncode=(r,s)=>sm(e,r,s),e.safeDecode=(r,s)=>nm(e,r,s),e.safeEncodeAsync=async(r,s)=>am(e,r,s),e.safeDecodeAsync=async(r,s)=>om(e,r,s),e.refine=(r,s)=>e.check(Km(r,s)),e.superRefine=r=>e.check(Jm(r)),e.overwrite=r=>e.check(or(r)),e.optional=()=>bn(e),e.nullable=()=>xn(e),e.nullish=()=>bn(xn(e)),e.nonoptional=r=>Bm(e,r),e.array=()=>Gt(e),e.or=r=>oo([e,r]),e.and=r=>Om(e,r),e.transform=r=>vn(e,Fm(r)),e.default=r=>Lm(e,r),e.prefault=r=>Um(e,r),e.catch=r=>qm(e,r),e.pipe=r=>vn(e,r),e.readonly=()=>Gm(e),e.describe=r=>{const s=e.clone();return fr.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){var r;return(r=fr.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return fr.get(e);const s=e.clone();return fr.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),no=x("_ZodString",(e,t)=>{ws.init(e,t),ee.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(Sh(...s)),e.includes=(...s)=>e.check(Eh(...s)),e.startsWith=(...s)=>e.check(Ih(...s)),e.endsWith=(...s)=>e.check(Ah(...s)),e.min=(...s)=>e.check(Nr(...s)),e.max=(...s)=>e.check(ro(...s)),e.length=(...s)=>e.check(so(...s)),e.nonempty=(...s)=>e.check(Nr(1,...s)),e.lowercase=s=>e.check(Ch(s)),e.uppercase=s=>e.check(zh(s)),e.trim=()=>e.check($h()),e.normalize=(...s)=>e.check(Th(...s)),e.toLowerCase=()=>e.check(Rh()),e.toUpperCase=()=>e.check(Oh())}),im=x("ZodString",(e,t)=>{ws.init(e,t),no.init(e,t),e.email=r=>e.check(Kd(cm,r)),e.url=r=>e.check(th(lm,r)),e.jwt=r=>e.check(gh(km,r)),e.emoji=r=>e.check(rh(um,r)),e.guid=r=>e.check(un(pn,r)),e.uuid=r=>e.check(Jd(gr,r)),e.uuidv4=r=>e.check(Yd(gr,r)),e.uuidv6=r=>e.check(Xd(gr,r)),e.uuidv7=r=>e.check(eh(gr,r)),e.nanoid=r=>e.check(sh(dm,r)),e.guid=r=>e.check(un(pn,r)),e.cuid=r=>e.check(nh(hm,r)),e.cuid2=r=>e.check(ah(mm,r)),e.ulid=r=>e.check(oh(pm,r)),e.base64=r=>e.check(mh(wm,r)),e.base64url=r=>e.check(ph(jm,r)),e.xid=r=>e.check(ih(fm,r)),e.ksuid=r=>e.check(ch(gm,r)),e.ipv4=r=>e.check(lh(bm,r)),e.ipv6=r=>e.check(uh(xm,r)),e.cidrv4=r=>e.check(dh(vm,r)),e.cidrv6=r=>e.check(hh(ym,r)),e.e164=r=>e.check(fh(_m,r)),e.datetime=r=>e.check(Zh(r)),e.date=r=>e.check(Bh(r)),e.time=r=>e.check(qh(r)),e.duration=r=>e.check(Vh(r))});function le(e){return Hd(im,e)}const H=x("ZodStringFormat",(e,t)=>{G.init(e,t),no.init(e,t)}),cm=x("ZodEmail",(e,t)=>{nd.init(e,t),H.init(e,t)}),pn=x("ZodGUID",(e,t)=>{rd.init(e,t),H.init(e,t)}),gr=x("ZodUUID",(e,t)=>{sd.init(e,t),H.init(e,t)}),lm=x("ZodURL",(e,t)=>{ad.init(e,t),H.init(e,t)}),um=x("ZodEmoji",(e,t)=>{od.init(e,t),H.init(e,t)}),dm=x("ZodNanoID",(e,t)=>{id.init(e,t),H.init(e,t)}),hm=x("ZodCUID",(e,t)=>{cd.init(e,t),H.init(e,t)}),mm=x("ZodCUID2",(e,t)=>{ld.init(e,t),H.init(e,t)}),pm=x("ZodULID",(e,t)=>{ud.init(e,t),H.init(e,t)}),fm=x("ZodXID",(e,t)=>{dd.init(e,t),H.init(e,t)}),gm=x("ZodKSUID",(e,t)=>{hd.init(e,t),H.init(e,t)}),bm=x("ZodIPv4",(e,t)=>{bd.init(e,t),H.init(e,t)}),xm=x("ZodIPv6",(e,t)=>{xd.init(e,t),H.init(e,t)}),vm=x("ZodCIDRv4",(e,t)=>{vd.init(e,t),H.init(e,t)}),ym=x("ZodCIDRv6",(e,t)=>{yd.init(e,t),H.init(e,t)}),wm=x("ZodBase64",(e,t)=>{wd.init(e,t),H.init(e,t)}),jm=x("ZodBase64URL",(e,t)=>{_d.init(e,t),H.init(e,t)}),_m=x("ZodE164",(e,t)=>{kd.init(e,t),H.init(e,t)}),km=x("ZodJWT",(e,t)=>{Sd.init(e,t),H.init(e,t)}),ao=x("ZodNumber",(e,t)=>{Xa.init(e,t),ee.init(e,t),e.gt=(s,a)=>e.check(hn(s,a)),e.gte=(s,a)=>e.check(Fr(s,a)),e.min=(s,a)=>e.check(Fr(s,a)),e.lt=(s,a)=>e.check(dn(s,a)),e.lte=(s,a)=>e.check(Pr(s,a)),e.max=(s,a)=>e.check(Pr(s,a)),e.int=s=>e.check(fn(s)),e.safe=s=>e.check(fn(s)),e.positive=s=>e.check(hn(0,s)),e.nonnegative=s=>e.check(Fr(0,s)),e.negative=s=>e.check(dn(0,s)),e.nonpositive=s=>e.check(Pr(0,s)),e.multipleOf=(s,a)=>e.check(mn(s,a)),e.step=(s,a)=>e.check(mn(s,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ce(e){return wh(ao,e)}const Nm=x("ZodNumberFormat",(e,t)=>{Cd.init(e,t),ao.init(e,t)});function fn(e){return jh(Nm,e)}const Sm=x("ZodNull",(e,t)=>{zd.init(e,t),ee.init(e,t)});function Cm(e){return _h(Sm,e)}const zm=x("ZodUnknown",(e,t)=>{Ed.init(e,t),ee.init(e,t)});function gn(){return kh(zm)}const Em=x("ZodNever",(e,t)=>{Id.init(e,t),ee.init(e,t)});function Im(e){return Nh(Em,e)}const Am=x("ZodArray",(e,t)=>{Ad.init(e,t),ee.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(Nr(r,s)),e.nonempty=r=>e.check(Nr(1,r)),e.max=(r,s)=>e.check(ro(r,s)),e.length=(r,s)=>e.check(so(r,s)),e.unwrap=()=>e.element});function Gt(e,t){return Ph(Am,e,t)}const Tm=x("ZodObject",(e,t)=>{$d.init(e,t),ee.init(e,t),q(e,"shape",()=>t.shape),e.keyof=()=>js(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:gn()}),e.loose=()=>e.clone({...e._zod.def,catchall:gn()}),e.strict=()=>e.clone({...e._zod.def,catchall:Im()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Yl(e,r),e.safeExtend=r=>Xl(e,r),e.merge=r=>eu(e,r),e.pick=r=>Kl(e,r),e.omit=r=>Jl(e,r),e.partial=(...r)=>tu(io,e,r[0]),e.required=(...r)=>ru(co,e,r[0])});function Zt(e,t){const r={type:"object",shape:e??{},...T(t)};return new Tm(r)}const $m=x("ZodUnion",(e,t)=>{Rd.init(e,t),ee.init(e,t),e.options=t.options});function oo(e,t){return new $m({type:"union",options:e,...T(t)})}const Rm=x("ZodIntersection",(e,t)=>{Od.init(e,t),ee.init(e,t)});function Om(e,t){return new Rm({type:"intersection",left:e,right:t})}const as=x("ZodEnum",(e,t)=>{Pd.init(e,t),ee.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,a)=>{const o={};for(const i of s)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new as({...t,checks:[],...T(a),entries:o})},e.exclude=(s,a)=>{const o={...t.entries};for(const i of s)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new as({...t,checks:[],...T(a),entries:o})}});function js(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new as({type:"enum",entries:r,...T(t)})}const Pm=x("ZodTransform",(e,t)=>{Fd.init(e,t),ee.init(e,t),e._zod.parse=(r,s)=>{if(s.direction==="backward")throw new Ma(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(Jt(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(Jt(i))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(o=>(r.value=o,r)):(r.value=a,r)}});function Fm(e){return new Pm({type:"transform",transform:e})}const io=x("ZodOptional",(e,t)=>{Md.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType});function bn(e){return new io({type:"optional",innerType:e})}const Mm=x("ZodNullable",(e,t)=>{Dd.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xn(e){return new Mm({type:"nullable",innerType:e})}const Dm=x("ZodDefault",(e,t)=>{Ld.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Lm(e,t){return new Dm({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Za(t)}})}const Zm=x("ZodPrefault",(e,t)=>{Zd.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Um(e,t){return new Zm({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Za(t)}})}const co=x("ZodNonOptional",(e,t)=>{Ud.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Bm(e,t){return new co({type:"nonoptional",innerType:e,...T(t)})}const Wm=x("ZodCatch",(e,t)=>{Bd.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function qm(e,t){return new Wm({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Qm=x("ZodPipe",(e,t)=>{Wd.init(e,t),ee.init(e,t),e.in=t.in,e.out=t.out});function vn(e,t){return new Qm({type:"pipe",in:e,out:t})}const Vm=x("ZodReadonly",(e,t)=>{qd.init(e,t),ee.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Gm(e){return new Vm({type:"readonly",innerType:e})}const Hm=x("ZodCustom",(e,t)=>{Qd.init(e,t),ee.init(e,t)});function Km(e,t={}){return Fh(Hm,e,t)}function Jm(e){return Mh(e)}const Ym=js(["S","A","B","C","F"]),Xm=js(["new","purchased"]),ep=Zt({id:le(),name:le(),grade:Ym,intent:ce(),prop:le(),visit:ce(),price:ce(),status:Xm,purchased_at:oo([le(),ce(),Cm()]).optional(),purchased_by:le().nullable().optional(),transaction_hash:le().nullable().optional(),ai:le(),remaining_hours:ce().nullable().optional(),x:ce().optional(),y:ce().optional(),created_at:le().optional()}).passthrough(),lo=ep.extend({remainingHours:ce().optional()}),uo=Zt({title:le(),tags:Gt(le()).optional().nullable(),view_count:ce().optional(),click_count:ce().optional(),fav_count:ce().optional(),thumb_color:le().optional(),view:ce().optional(),click:ce().optional(),fav:ce().optional(),thumbColor:le().optional()}).passthrough(),ho=Zt({title:le(),meta:le(),body:le(),created_at:le().optional()}).passthrough(),mo=Zt({points:ce(),quota:Zt({s:ce(),a:ce()})});Zt({user:mo,leads:Gt(lo),listings:Gt(uo),feed:Gt(ho)});const yn={TABLET:1024},_s={S:120,A:72,B:336,C:336,F:336},tp=(e,t)=>{if(!e)return 0;const r=_s[t]||336,s=new Date(e).getTime(),a=(Date.now()-s)/(1e3*60*60);return Math.max(0,Math.min(r,r-a))},rp=(e,t,r,s)=>{const a={points:e.points,quota:{s:e.quota_s,a:e.quota_a}},o=mo.safeParse(a);if(!o.success)throw console.error("Critical: User Data Validation Failed",o.error),new Error("Failed to load user profile");const i=t.map(u=>{let h=u.remaining_hours!=null?Number(u.remaining_hours):null;return h==null&&u.purchased_at&&u.status==="purchased"&&(h=tp(u.purchased_at,u.grade)),{...u,grade:u.grade,status:u.status,...h!=null?{remainingHours:h}:{}}}).filter(u=>{const h=lo.safeParse(u);return h.success?!0:(console.warn(`Skipping invalid lead (${u.id}):`,h.error.flatten()),!1)}),c=r.map(u=>({...u,title:u.title,tags:u.tags??[],view:u.view_count??0,click:u.click_count??0,fav:u.fav_count??0,thumbColor:u.thumb_color??"#e5e7eb"})).filter(u=>{const h=uo.safeParse(u);return h.success?!0:(console.warn("Skipping invalid listing:",h.error.flatten()),!1)}),l=s.filter(u=>{const h=ho.safeParse(u);return h.success?!0:(console.warn("Skipping invalid feed post:",h.error.flatten()),!1)});return{user:o.data,leads:i,listings:c,feed:l}};class wn{static async fetchAppData(t){const[r,s,a,o]=await Promise.all([Pe.from("users").select("points, quota_s, quota_a").single(),Pe.from("leads").select("*"),Pe.from("listings").select("*").eq("agent_id",t),Pe.from("feed").select("*").order("created_at",{ascending:!1}).limit(5)]);if(r.error)throw r.error;if(s.error)throw s.error;if(a.error)throw a.error;if(o.error)throw o.error;return rp(r.data,s.data,a.data,o.data)}static async purchaseLead(t,r,s,a){const{error:o}=await Pe.rpc("purchase_lead",{p_user_id:t,p_lead_id:r,p_cost:s,p_grade:a});if(o)throw o}}const sp={user:{points:1280,quota:{s:2,a:3}},leads:[{id:"S-5566",name:"買家 S-5566",grade:"S",intent:98,prop:"捷運宅",visit:15,price:20,status:"purchased",purchased_at:Date.now()-2*36e5,ai:"S 級熱度拉滿，請優先處理。",remainingHours:118},{id:"S-9011",name:"買家 S-9011",grade:"S",intent:93,prop:"高樓景觀宅",visit:11,price:20,status:"purchased",purchased_at:Date.now()-6*36e5,ai:"已連續三天造訪同社區。",remainingHours:114},{id:"A-7788",name:"買家 A-7788",grade:"A",intent:79,prop:"學區房",visit:6,price:10,status:"purchased",purchased_at:Date.now()-20*36e5,ai:"A 級學區需求穩定。",remainingHours:52},{id:"A-6600",name:"買家 A-6600",grade:"A",intent:74,prop:"預售捷運宅",visit:5,price:10,status:"purchased",purchased_at:Date.now()-10*36e5,ai:"適合搭配預售案一次推薦。",remainingHours:62},{id:"B218",name:"買家 B218",grade:"S",intent:92,prop:"捷運共構 3 房",visit:7,price:20,status:"new",ai:"🔥 強烈建議立即發送訊息！",x:25,y:25},{id:"A103",name:"買家 A103",grade:"S",intent:88,prop:"惠宇上晴 12F",visit:12,price:20,status:"new",ai:"建議立即發送獨家邀約！",x:15,y:45},{id:"S901",name:"買家 S901",grade:"S",intent:94,prop:"高樓景觀宅",visit:9,price:20,status:"new",ai:"重複詢問同一社區，請發送簡訊跟進。",x:40,y:32},{id:"S880",name:"買家 S880",grade:"S",intent:90,prop:"預售捷運宅",visit:8,price:20,status:"new",ai:"對捷運沿線有強烈偏好。",x:60,y:40},{id:"C055",name:"買家 C055",grade:"A",intent:75,prop:"南屯學區宅",visit:4,price:10,status:"new",ai:"A 級學區需求明確。",x:60,y:20},{id:"A230",name:"買家 A230",grade:"A",intent:71,prop:"次高樓層 3 房",visit:3,price:10,status:"new",ai:"已追蹤兩個以上相似物件。",x:70,y:30},{id:"A550",name:"買家 A550",grade:"A",intent:69,prop:"公園首排",visit:3,price:10,status:"new",ai:"假日時段瀏覽頻繁。",x:50,y:15},{id:"D330",name:"買家 D330",grade:"B",intent:62,prop:"捷運生活圈",visit:3,price:3,status:"new",ai:"建議發送訊息提供車位資訊。",x:40,y:60},{id:"B778",name:"買家 B778",grade:"B",intent:58,prop:"小坪數投資宅",visit:2,price:3,status:"new",ai:"屬於投資族群，可搭配多案推薦。",x:30,y:70},{id:"C021",name:"買家 C021",grade:"C",intent:48,prop:"老屋翻新",visit:2,price:1,status:"new",ai:"對低總價物件有興趣。",x:75,y:55},{id:"C990",name:"買家 C990",grade:"C",intent:42,prop:"套房",visit:1,price:1,status:"new",ai:"瀏覽時間短，建議先以訊息觸及。",x:82,y:65},{id:"H009",name:"買家 H009",grade:"F",intent:28,prop:"小坪數",visit:1,price:.5,status:"new",ai:"潛在客戶。",x:70,y:75},{id:"F778",name:"買家 F778",grade:"F",intent:22,prop:"套房出租",visit:1,price:.5,status:"new",ai:"互動較少，可作為備選追蹤。",x:55,y:80}],listings:[{title:"惠宇上晴｜12/15F 視野戶・雙平車",tags:["南屯區","近捷運","雙平車"],view:1284,click:214,fav:37,thumbColor:"#eef2ff"},{title:"捷運共構 3 房｜視野棟距佳",tags:["捷運共構","次高樓層"],view:986,click:163,fav:22,thumbColor:"#f0fdf4"},{title:"南屯捷運宅｜3房・高樓層",tags:["近學區","雙衛浴"],view:846,click:128,fav:15,thumbColor:"#fff7ed"}],feed:[{title:"成交故事｜12F 視野戶為什麼受歡迎",meta:"來自：社區牆・成交故事",body:"買方看重的是採光、棟距與公設使用率。"},{title:"住戶心得｜公設使用率與噪音表現",meta:"本週一・互動 41",body:"晚間 9 點後社區安靜。"}]},jn=(e,t)=>e.grade==="S"&&t.quota.s<=0?{valid:!1,error:"S 級配額已用完"}:e.grade==="A"&&t.quota.a<=0?{valid:!1,error:"A 級配額已用完"}:{valid:!0};function np(){var m,g;const{session:e}=Pa(),[t,r]=f.useState(!0),s=ds();f.useEffect(()=>{if(typeof window>"u")return;const j=new URLSearchParams(window.location.search).get("mode");let _=!0;if(j==="mock"||j==="live")_=j==="mock",localStorage.setItem("uag_mode",j);else{const v=localStorage.getItem("uag_mode");(v==="mock"||v==="live")&&(_=v==="mock")}r(_)},[]);const a=()=>{{it.error("生產環境無法切換模式");return}},{data:o,isLoading:i,error:c,refetch:l}=zi({queryKey:["uagData",t,(m=e==null?void 0:e.user)==null?void 0:m.id],queryFn:async()=>{var p;if(t)return sp;if(!((p=e==null?void 0:e.user)!=null&&p.id))throw new Error("Not authenticated");return wn.fetchAppData(e.user.id)},enabled:t||!!((g=e==null?void 0:e.user)!=null&&g.id),staleTime:1e3*10,refetchInterval:t?!1:3e4}),u=Ei({mutationFn:async({leadId:p,cost:j,grade:_})=>{var v;if(t){await new Promise(w=>setTimeout(w,500));return}if(!((v=e==null?void 0:e.user)!=null&&v.id))throw new Error("Not authenticated");await wn.purchaseLead(e.user.id,p,j,_)},onMutate:async({leadId:p,cost:j,grade:_})=>{var w,F;await s.cancelQueries({queryKey:["uagData"]});const v=s.getQueryData(["uagData",t,(w=e==null?void 0:e.user)==null?void 0:w.id]);if(v){const I=v.leads.find($=>$.id===p);if(I){const{valid:$,error:O}=jn(I,v.user);if(!$)throw new Error(O||"配額不足 (Optimistic Check)")}const k={...v,user:{...v.user,points:v.user.points-j,quota:{...v.user.quota,s:_==="S"?v.user.quota.s-1:v.user.quota.s,a:_==="A"?v.user.quota.a-1:v.user.quota.a}},leads:v.leads.map($=>$.id===p?{...$,status:"purchased",remainingHours:_s[_]||48}:$)};s.setQueryData(["uagData",t,(F=e==null?void 0:e.user)==null?void 0:F.id],k)}return{previousData:v}},onError:(p,j,_)=>{var v;_!=null&&_.previousData&&s.setQueryData(["uagData",t,(v=e==null?void 0:e.user)==null?void 0:v.id],_.previousData),it.error(`購買失敗: ${p instanceof Error?p.message:"Unknown error"}`)},onSettled:()=>{s.invalidateQueries({queryKey:["uagData"]})}});return{data:o,isLoading:i,error:c,buyLead:async p=>{if(!o||u.isPending)return;const j=o.leads.find(F=>F.id===p);if(!j){it.error("客戶不存在");return}if(j.status!=="new"){it.error("此客戶已被購買");return}const{valid:_,error:v}=jn(j,o.user);if(!_){it.error(v||"配額不足");return}const w=j.price||10;if(o.user.points<w){it.error("點數不足");return}u.mutate({leadId:p,cost:w,grade:j.grade},{onSuccess:()=>{it.success("購買成功")}})},isBuying:u.isPending,useMock:t,toggleMode:a,refetch:l}}function ap(e,t){let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>e(...s),t)}}function op(){const[e,t]=f.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return f.useEffect(()=>{if(typeof window>"u")return;const r=ap(()=>{t({width:window.innerWidth,height:window.innerHeight})},150);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function ip(){const[e,t]=f.useState(null),{width:r}=op();f.useEffect(()=>{r>yn.TABLET&&e&&t(null)},[r,e]);const s=f.useCallback(o=>{t(o),requestAnimationFrame(()=>{var i;window.innerWidth<=yn.TABLET&&((i=document.getElementById("action-panel-container"))==null||i.scrollIntoView({behavior:"smooth",block:"center"}))})},[]),a=f.useCallback(()=>t(null),[]);return{selectedLead:e,selectLead:s,close:a}}const cp=()=>n.jsx("header",{className:b["uag-header"],children:n.jsxs("div",{className:b["uag-header-inner"],children:[n.jsxs("div",{className:b["uag-logo"],children:[n.jsx("div",{className:b["uag-logo-badge"],children:"邁"}),n.jsx("span",{children:"邁房子廣告後台"})]}),n.jsxs("div",{className:b["uag-breadcrumb"],children:[n.jsx("span",{children:"游杰倫 21世紀不動產河南店"}),n.jsx("span",{className:`${b["uag-badge"]} ${b["uag-badge--pro"]}`,children:"專業版 PRO"})]})]})}),lp=({user:e,useMock:t,toggleMode:r})=>n.jsxs("div",{className:b["uag-footer-bar"],children:[n.jsxs("div",{style:{marginRight:"auto",fontSize:"12px",color:"var(--ink-300)"},children:["系統模式：",n.jsx("strong",{style:{color:t?"#f59e0b":"#16a34a"},children:t?"Local Mock":"Live API"}),n.jsx("button",{onClick:r,style:{marginLeft:"10px",fontSize:"10px",cursor:"pointer",border:"1px solid #ccc",padding:"2px 6px",borderRadius:"4px"},children:"切換模式"})]}),n.jsx("button",{className:b["uag-btn"],children:"方案設定"}),n.jsx("button",{className:`${b["uag-btn"]} ${b.primary}`,children:"加值點數"}),n.jsxs("span",{className:b["uag-badge"],style:{fontSize:"14px",background:"#fff8dc",color:"#92400e",borderColor:"#fcd34d"},children:["點數 ",n.jsx("span",{id:"user-points",children:e.points})]})]}),up=()=>n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"animate-pulse flex space-x-4 justify-center",children:n.jsxs("div",{className:"flex-1 space-y-4 py-1 max-w-md",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mx-auto"})]})]})}),n.jsx("div",{className:"mt-4 text-gray-500",children:"載入中..."})]}),dp=({error:e,resetErrorBoundary:t})=>n.jsxs("div",{role:"alert",className:"p-6 text-center text-red-600",children:[n.jsx("p",{className:"font-bold text-lg mb-2",children:"系統發生錯誤"}),n.jsx("pre",{className:"bg-red-50 p-4 rounded text-sm mb-4 overflow-auto max-w-lg mx-auto",children:e.message}),n.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"重試"})]});function hp({leads:e,onSelectLead:t}){const r=e.filter(s=>s.status==="new");return n.jsxs("section",{className:`${b["uag-card"]} ${b["k-span-6"]}`,id:"radar-section",style:{minHeight:"450px"},children:[n.jsxs("div",{className:b["uag-card-header"],children:[n.jsxs("div",{children:[n.jsx("div",{className:b["uag-card-title"],children:"UAG 精準導客雷達"}),n.jsx("div",{className:b["uag-card-sub"],children:"S/A 級獨家聯絡權｜B/C/F 級點數兌換"})]}),n.jsx("div",{className:b["uag-actions"],style:{gap:"4px"}})]}),n.jsxs("div",{className:b["uag-cluster"],id:"radar-container",children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"300px",height:"300px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"150px",height:"150px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),n.jsxs("div",{style:{position:"absolute",left:"16px",top:"16px",background:"rgba(255,255,255,0.9)",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",color:"#0f172a",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0",zIndex:5},children:[n.jsx("span",{style:{width:"8px",height:"8px",background:"#22c55e",borderRadius:"50%",display:"inline-block",marginRight:"4px"}}),n.jsx("span",{style:{fontWeight:700},children:"Live 監控中"})]}),r.map(s=>{const a=s.x!=null?s.x:50,o=s.y!=null?s.y:50,i=s.grade==="S"?120:s.grade==="A"?100:s.grade==="B"?90:s.grade==="C"?80:60,c=5+Math.random()*3+"s";return n.jsxs("div",{className:b["uag-bubble"],"data-grade":s.grade,role:"button","aria-label":`${s.name||s.id} - ${s.grade}級`,tabIndex:0,style:{"--w":i+"px","--float":c,left:a+"%",top:o+"%"},onClick:()=>t(s),onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&t(s)},children:[n.jsx("div",{className:b["uag-bubble-grade"],style:{background:`var(--grade-${s.grade.toLowerCase()})`,color:"#fff"},children:s.grade}),n.jsxs("div",{style:{textAlign:"center",lineHeight:1.2},children:[n.jsx("div",{style:{fontWeight:800,fontSize:"14px"},children:s.id}),n.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:[s.intent,"%"]})]}),n.jsx("div",{className:b["uag-bubble-label"],children:s.prop})]},s.id)})]})]})}const br=({label:e,value:t,highlight:r=!1})=>n.jsxs("div",{className:b["ap-stat"],children:[n.jsx("span",{children:e}),n.jsx("b",{style:r?{color:"var(--uag-brand)"}:{},children:t})]}),mp=f.forwardRef(({selectedLead:e,onBuyLead:t,isProcessing:r},s)=>{const[a,o]=f.useState(!1);if(f.useEffect(()=>{o(!1)},[e]),!e)return n.jsx("section",{className:b["k-span-6"],id:"action-panel-container",ref:s,children:n.jsx("div",{className:b["uag-action-panel"],id:"action-panel",children:n.jsx("div",{style:{height:"100%",minHeight:"200px",display:"grid",placeItems:"center",color:"var(--ink-300)",textAlign:"center",padding:"40px 20px"},children:n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:"👆"}),n.jsxs("div",{children:["請點擊上方雷達泡泡",n.jsx("br",{}),"查看分析與購買"]})]})})})});const i=e.grade==="S"||e.grade==="A",c=()=>{o(!0)},l=()=>{t(e.id),o(!1)},u=()=>{o(!1)};return n.jsx("section",{className:b["k-span-6"],id:"action-panel-container",ref:s,children:n.jsxs("div",{className:b["uag-action-panel"],id:"action-panel",children:[n.jsx("div",{className:b["ap-head"],children:n.jsxs("span",{className:`${b["uag-badge"]} ${b["uag-badge--"+e.grade.toLowerCase()]}`,children:[e.grade,"級｜",e.name]})}),n.jsxs("div",{className:b["ap-body"],children:[n.jsxs("div",{className:b["ap-stats-group"],children:[n.jsx(br,{label:"關注房源",value:e.prop}),n.jsx(br,{label:"意向分數",value:`${e.intent}%`,highlight:!0}),n.jsx(br,{label:"瀏覽次數",value:`${e.visit} 次`}),n.jsx(br,{label:"購買成本",value:`${e.price} 點`})]}),n.jsx("div",{className:`${b["ai-box"]} ${b.urgent}`,children:n.jsx("div",{children:e.ai})}),n.jsxs("div",{className:b["action-zone"],children:[i&&n.jsx("div",{style:{background:"#fff7ed",color:"#ea580c",fontWeight:700,fontSize:"12px",textAlign:"center",padding:"6px",borderRadius:"4px",border:"1px solid #ffedd5",marginBottom:"10px"},children:"✨ 此客戶包含獨家訊息聯絡權 ✨"}),a?n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsx("button",{className:b["btn-attack"],style:{background:"#ef4444",flex:1},onClick:l,disabled:r,children:r?"處理中...":`確定花費 ${e.price} 點?`}),n.jsx("button",{className:b["btn-attack"],style:{background:"#94a3b8",flex:1},onClick:u,disabled:r,children:"取消"})]}):n.jsx("button",{className:b["btn-attack"],onClick:c,disabled:r,children:r?"處理中...":"🚀 獲取聯絡權限 (簡訊/站內信)"}),n.jsxs("div",{style:{textAlign:"center",fontSize:"11px",color:"#94a3b8",marginTop:"8px"},children:["符合個資法規範：僅能以簡訊/站內信聯繫",n.jsx("br",{}),"系統將自動發送您的名片與電話給客戶"]})]})]})]})})}),pp=e=>{const t=_s[e.grade]??336,r=e.remainingHours??t,s=Math.max(0,Math.min(100,r/t*100)),a=e.grade==="S"||e.grade==="A";let o="";return a?o=`${r.toFixed(1)} 小時`:o=`${(r/24).toFixed(1)} 天`,{total:t,remaining:r,percent:s,isExclusive:a,timeDisplay:o}};function fp({leads:e}){const t=e.filter(r=>r.status==="purchased");return n.jsxs("section",{className:`${b["uag-card"]} ${b["k-span-6"]}`,children:[n.jsxs("div",{className:b["uag-card-header"],children:[n.jsxs("div",{children:[n.jsx("div",{className:b["uag-card-title"],children:"已購客戶資產與保護監控"}),n.jsx("div",{className:b["uag-card-sub"],children:"S 級 120hr / A 級 72hr 獨家倒數｜B/C/F 級 14 天防撞"})]}),n.jsx("div",{className:b["uag-actions"],children:n.jsx("button",{className:b["uag-btn"],children:"匯出報表"})})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:b["monitor-table"],children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"25%"},children:"客戶等級/名稱"}),n.jsx("th",{style:{width:"35%"},children:"保護期倒數"}),n.jsx("th",{style:{width:"20%"},children:"目前狀態"}),n.jsx("th",{style:{width:"20%"},children:"操作"})]})}),n.jsx("tbody",{id:"asset-list",children:t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:"尚無已購資產，請從上方雷達進攻。"})}):t.map(r=>{const{percent:s,isExclusive:a,timeDisplay:o}=pp(r),i=`var(--grade-${r.grade.toLowerCase()})`,c=a?"獨家鎖定中":"去重保護中";return n.jsxs("tr",{children:[n.jsx("td",{"data-label":"客戶等級/名稱",children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("span",{style:{display:"inline-grid",placeItems:"center",width:"24px",height:"24px",borderRadius:"50%",fontSize:"11px",fontWeight:900,color:"#fff",marginRight:"8px",background:i},children:r.grade}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:800,color:"var(--ink-100)"},children:r.name}),n.jsx("div",{style:{fontSize:"11px",color:"var(--ink-300)"},children:r.prop})]})]})}),n.jsxs("td",{"data-label":"保護期倒數",children:[n.jsxs("div",{style:{fontSize:"11px",fontWeight:700,marginBottom:"2px",display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{color:i},children:c}),n.jsx("span",{className:b["t-countdown"],children:o})]}),n.jsx("div",{className:b["progress-bg"],children:n.jsx("div",{className:b["progress-fill"],style:{width:`${s}%`,background:i}})})]}),n.jsx("td",{"data-label":"目前狀態",children:n.jsx("span",{className:b["uag-badge"],style:{background:"#f0fdf4",color:"#16a34a",border:"none"},children:"簡訊已發送"})}),n.jsx("td",{"data-label":"操作",children:n.jsx("button",{className:`${b["uag-btn"]} ${b.primary}`,style:{padding:"4px 12px",fontSize:"12px"},children:"寫紀錄 / 預約"})})]},r.id)})})]})})]})}function gp({listings:e,feed:t}){return n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:`${b["uag-card"]} ${b["k-span-3"]}`,children:[n.jsx("div",{className:b["uag-card-header"],children:n.jsxs("div",{children:[n.jsx("div",{className:b["uag-card-title"],children:"我的房源總覽"}),n.jsx("div",{className:b["uag-card-sub"],children:"即時掌握曝光、點擊與收藏"})]})}),n.jsx("div",{id:"listing-container",children:e.length===0?n.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:"尚無房源資料。"}):e.map((r,s)=>{var a;return n.jsxs("article",{className:b["listing-item"],children:[n.jsx("div",{className:b["l-thumb"],style:{background:r.thumbColor}}),n.jsxs("div",{children:[n.jsx("div",{className:b["l-title"],children:r.title}),n.jsx("div",{className:b["l-tags"],children:(a=r.tags)==null?void 0:a.map((o,i)=>n.jsx("span",{className:b["l-tag"],children:o},i))}),n.jsxs("div",{className:b["l-kpi"],children:[n.jsxs("span",{children:["曝光 ",n.jsx("b",{children:r.view})]}),n.jsxs("span",{children:["點擊 ",n.jsx("b",{children:r.click})]}),n.jsxs("span",{children:["收藏 ",n.jsx("b",{children:r.fav})]})]})]})]},s)})})]}),n.jsxs("section",{className:`${b["uag-card"]} ${b["k-span-3"]}`,children:[n.jsxs("div",{className:b["uag-card-header"],children:[n.jsxs("div",{children:[n.jsx("div",{className:b["uag-card-title"],children:"社區牆＆真實口碑"}),n.jsx("div",{className:b["uag-card-sub"],children:"用真實交流建立信任"})]}),n.jsx("div",{className:b["uag-actions"],children:n.jsx("button",{className:b["uag-btn"],children:"貼文"})})]}),n.jsx("div",{id:"feed-container",children:t.length===0?n.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:"尚無社區牆互動。"}):t.map((r,s)=>n.jsxs("article",{className:b["feed-post"],children:[n.jsx("div",{className:b["fp-title"],children:r.title}),n.jsx("div",{className:b["fp-meta"],children:r.meta}),n.jsx("div",{className:b["fp-body"],children:r.body})]},s))})]})]})}function bp({title:e="惠宇上晴 12F｜3房2廳2衛",subTitle:t="南屯區 · 67.3 坪 · 屋齡 5 年",price:r="NT$ 32,880,000",pricePerPing:s="參考：52.1 萬/坪",stats:a=[{label:"議價建議",value:"-2% ~ -6%"},{label:"貸款月付",value:"≈ 8.6 萬"},{label:"近三筆實登",value:"52.8 / 51.5 / 50.9"}],imageUrl:o="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='200'%3E%3Crect width='100%25' height='100%25' fill='%23e5edff'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='%231749d7'%3EMAIN%3C/text%3E%3C/svg%3E"}){const[i,c]=f.useState(e),[l,u]=f.useState(t),[h,m]=f.useState(r),[g,p]=f.useState(s),[j,_]=f.useState(a),[v,w]=f.useState(o),F=f.useRef(null),I=()=>{ge.success("系統提示：報告生成中...")},k=()=>{var O;(O=F.current)==null||O.click()},$=async O=>{var Q;const B=(Q=O.target.files)==null?void 0:Q[0];if(!B)return;const S=ge.loading("正在分析房仲頁面...");try{const P=new FileReader;P.onloadend=async()=>{const te=P.result;w(te),setTimeout(()=>{c("偵測結果：帝寶 18F｜豪宅規格"),u("大安區 · 120.5 坪 · 屋齡 10 年"),m("NT$ 188,000,000"),p("參考：156.0 萬/坪"),_([{label:"議價建議",value:"-5% ~ -8%"},{label:"貸款月付",value:"≈ 45.2 萬"},{label:"近三筆實登",value:"155.0 / 152.3 / 148.9"}]),ge.success("分析完成！已自動填入資訊",{id:S})},1500)},P.readAsDataURL(B)}catch{ge.error("分析失敗",{id:S})}};return n.jsxs("section",{className:`${b["uag-card"]} ${b["k-span-3"]}`,children:[n.jsxs("div",{className:b["uag-card-header"],children:[n.jsxs("div",{children:[n.jsx("div",{className:b["uag-card-title"],children:"手機報告生成器"}),n.jsx("div",{className:b["uag-card-sub"],children:"半屏小卡・行動優先"})]}),n.jsxs("div",{className:b["uag-actions"],children:[n.jsx("input",{type:"file",ref:F,style:{display:"none"},accept:"image/*",onChange:$}),n.jsx("button",{className:`${b["uag-btn"]} ${b.secondary}`,onClick:k,style:{marginRight:"8px"},children:"匯入房仲頁面"}),n.jsx("button",{className:`${b["uag-btn"]} ${b.primary}`,onClick:I,children:"生成報告"})]})]}),n.jsx("div",{className:b["card-body"],children:n.jsxs("section",{"aria-label":"手機報告生成小卡",className:b["mai-card"],children:[n.jsxs("header",{className:b["mai-head"],children:[n.jsx("span",{className:b["mai-tag"],children:"快速報告"}),n.jsx("h3",{className:b["mai-title"],children:i}),n.jsx("p",{className:b["mai-sub"],children:l})]}),n.jsxs("div",{className:b["mai-body"],children:[n.jsxs("div",{className:b["mai-left"],children:[n.jsxs("div",{className:b["mai-price"],children:[n.jsx("div",{className:b["mai-price-label"],children:"開價"}),n.jsx("div",{className:b["mai-price-value"],children:h}),n.jsx("div",{className:b["mai-price-unit"],children:g})]}),n.jsx("ul",{className:b["mai-stats"],children:j.map((O,B)=>n.jsxs("li",{children:[n.jsx("span",{children:O.label}),n.jsx("b",{children:O.value})]},B))})]}),n.jsxs("div",{className:b["mai-right"],children:[n.jsx("div",{className:b["mai-thumb"],children:n.jsx("img",{alt:"物件主圖",src:v,style:{width:"100%",height:"100%",objectFit:"cover"}})}),n.jsxs("div",{className:b["mai-mini"],children:[n.jsx("div",{style:{background:"#f0f4ff",borderRadius:"8px",aspectRatio:"3/2"}}),n.jsx("div",{style:{background:"#f0f4ff",borderRadius:"8px",aspectRatio:"3/2"}}),n.jsx("div",{style:{background:"#f0f4ff",borderRadius:"8px",aspectRatio:"3/2"}})]})]})]}),n.jsxs("div",{className:b["mai-actions"],children:[n.jsx("button",{className:`${b["mai-btn"]} ${b.primary}`,children:"一鍵生成報告"}),n.jsx("button",{className:`${b["mai-btn"]} ${b.line}`,children:"LINE 分享"})]})]})})]})}function xp(){return n.jsxs("section",{className:`${b["uag-card"]} ${b["k-span-3"]}`,children:[n.jsxs("div",{className:b["uag-card-header"],children:[n.jsx("div",{className:b["uag-card-title"],children:"安心流程管理"}),n.jsx("div",{className:b["uag-card-sub"],children:"五階段・交易留痕"})]}),n.jsxs("div",{className:b["card-body"],children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:"8px",marginBottom:"8px"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{className:b["flow-stage"],style:{background:"#16a34a",color:"#fff"},children:"✓"}),n.jsx("div",{className:"small",style:{fontWeight:700,color:"#16a34a"},children:"M1 接洽"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{className:b["flow-stage"],style:{background:"#16a34a",color:"#fff"},children:"✓"}),n.jsx("div",{className:"small",style:{fontWeight:700,color:"#16a34a"},children:"M2 帶看"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{className:b["flow-stage"],style:{background:"#1749d7",color:"#fff"},children:"●"}),n.jsx("div",{className:"small",style:{fontWeight:700,color:"#1749d7"},children:"M3 出價"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{className:b["flow-stage"],style:{background:"#e5e7eb",color:"#6b7280"},children:"・"}),n.jsx("div",{className:"small",style:{color:"#6b7a90"},children:"M4 簽約"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{className:b["flow-stage"],style:{background:"#e5e7eb",color:"#6b7280"},children:"・"}),n.jsx("div",{className:"small",style:{color:"#6b7a90"},children:"M5 交屋"})]})]}),n.jsxs("div",{className:"timeline-wrap",children:[n.jsxs("div",{className:"timeline-header",style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",gap:0,padding:"8px 12px",fontSize:"13px"},children:[n.jsx("div",{children:"時間"}),n.jsx("div",{children:"事件與參與者"}),n.jsx("div",{children:"留痕"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",alignItems:"start",borderBottom:"1px solid var(--line-soft)",padding:"8px 12px"},children:[n.jsx("div",{className:"small",children:"10/30 22:10"}),n.jsxs("div",{children:[n.jsxs("div",{className:"small",style:{color:"var(--ink-100)"},children:[n.jsx("b",{children:"M1 初次接洽建立"}),"｜買方 A103"]}),n.jsx("div",{className:"small",style:{color:"var(--ink-300)"},children:"房源：惠宇上晴 12F"})]}),n.jsx("div",{children:n.jsx("div",{className:b["uag-badge"],style:{fontSize:"10px"},children:"hash: 9f2a…"})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",alignItems:"start",borderBottom:"1px solid var(--line-soft)",padding:"8px 12px"},children:[n.jsx("div",{className:"small",children:"10/31 09:20"}),n.jsxs("div",{children:[n.jsxs("div",{className:"small",style:{color:"var(--ink-100)"},children:[n.jsx("b",{children:"M2 帶看雙方到場"}),"｜買方 A103"]}),n.jsx("div",{className:"small",style:{color:"var(--ink-300)"},children:"GeoTag: 南屯社區大廳"})]}),n.jsx("div",{children:n.jsx("div",{className:b["uag-badge"],style:{fontSize:"10px"},children:"sig: b7aa…"})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 96px",alignItems:"start",background:"#fefce8",padding:"8px 12px"},children:[n.jsx("div",{className:"small",children:"10/31 10:40"}),n.jsxs("div",{children:[n.jsxs("div",{className:"small",style:{color:"var(--ink-100)"},children:[n.jsx("b",{children:"M3 買方出價"}),"｜買方 A103"]}),n.jsx("div",{className:"small",style:{color:"var(--ink-300)"},children:"出價 NT$31,500,000"})]}),n.jsx("div",{children:n.jsx("div",{className:b["uag-badge"],style:{fontSize:"10px",background:"#fef3c7",color:"#92400e",border:"1px solid #f6d88a"},children:"hash: 1a7c…"})})]})]}),n.jsx("div",{style:{padding:"12px",borderTop:"1px solid var(--line-soft)",textAlign:"center"},children:n.jsx(Pn,{to:"/assure",className:`${b["uag-btn"]} ${b.primary}`,style:{width:"100%",display:"block",textAlign:"center",textDecoration:"none"},children:"進入安心留痕 (Trust Room)"})})]})]})}function vp(){const{data:e,isLoading:t,buyLead:r,isBuying:s,useMock:a,toggleMode:o}=np(),{selectedLead:i,selectLead:c,close:l}=ip(),u=f.useRef(null),h=async m=>{!e||s||(r(m),l())};return t?n.jsx(up,{}):e?n.jsxs("div",{className:b["uag-page"],children:[n.jsx(Ln,{position:"top-center"}),n.jsx(cp,{}),n.jsx("main",{className:b["uag-container"],children:n.jsxs("div",{className:b["uag-grid"],children:[n.jsx(hp,{leads:e.leads,onSelectLead:c}),n.jsx(mp,{ref:u,selectedLead:i,onBuyLead:h,isProcessing:s}),n.jsx(fp,{leads:e.leads}),n.jsx(gp,{listings:e.listings,feed:e.feed}),n.jsx(bp,{}),n.jsx(xp,{})]})}),n.jsx(lp,{user:e.user,useMock:a,toggleMode:o})]}):null}function yp(){return n.jsx(yi,{children:({reset:e})=>n.jsx(Pl,{onReset:e,FallbackComponent:dp,children:n.jsx(vp,{})})})}const wp=new gi({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});function jp(){const[e,t]=f.useState(null),r=Fn();return f.useEffect(()=>{aa().then(t)},[]),f.useEffect(()=>{e&&ar("page_view",r.pathname)},[r,e]),e?n.jsx(bi,{client:wp,children:n.jsx(Zi,{children:n.jsxs($l,{children:[n.jsxs(fo,{children:[n.jsx(Te,{path:"/",element:n.jsx(Le,{children:n.jsx(dl,{config:e})})}),n.jsx(Te,{path:"/uag",element:n.jsx(yp,{})}),n.jsx(Te,{path:"/auth/register",element:n.jsx(Le,{children:n.jsx(gl,{})})}),n.jsx(Te,{path:"/auth/login",element:n.jsx(Le,{children:n.jsx(bl,{})})}),n.jsx(Te,{path:"/community/:id/wall",element:n.jsx(Le,{children:n.jsx(xl,{})})}),n.jsx(Te,{path:"/community/suggested",element:n.jsx(Le,{children:n.jsx(vl,{})})}),n.jsx(Te,{path:"/property/:id",element:n.jsx(Le,{children:n.jsx(El,{})})}),n.jsx(Te,{path:"/maihouses/trust/room",element:n.jsx(Le,{children:n.jsx(Js,{})})}),n.jsx(Te,{path:"/assure",element:n.jsx(Le,{children:n.jsx(Js,{})})}),n.jsx(Te,{path:"/chat",element:n.jsx(Le,{children:n.jsx(Al,{})})})]},r.pathname),e.devtools==="1"&&n.jsx(nc,{config:e}),n.jsx(Rl,{})]})})}):n.jsx("div",{className:"p-6 text-sm text-[var(--text-secondary)]",children:"載入中…"})}const _n=document.getElementById("root");_n&&Mr.createRoot(_n).render(n.jsx(Sr.StrictMode,{children:n.jsx(go,{basename:"/maihouses/",children:n.jsx(jp,{})})}));export{aa as g};
//# sourceMappingURL=index-CJPJQPIl.js.map
