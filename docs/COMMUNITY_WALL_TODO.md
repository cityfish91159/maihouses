# ğŸ  MaiHouses æ ¸å¿ƒé–‹ç™¼ TODO (SSOT)

> **æœ€å¾Œæ›´æ–°**: 2025-12-19
> **AI åŸ·è¡Œæº–å‰‡**: 
> 1. ä¿®æ”¹ç‹€æ…‹ç‚º âœ… æ™‚ï¼Œå¿…é ˆé™„ä¸Š `Commit ID` æˆ– `æ¸¬è©¦çµæœ`ã€‚
> 2. ç¦æ­¢åœ¨ã€Œç•¶å‰åŸ·è¡Œå€ã€ä¿ç•™é•·ç¯‡æ­·å²å ±å‘Šã€‚
> 3. å„ªå…ˆè™•ç† P0/P1 ç¼ºå¤±ã€‚

---

## ğŸš€ ç•¶å‰åŸ·è¡Œå€ (Active Tasks)

### ğŸ§© KC1: é‡é»è† å›Šçµ±ä¸€åŒ– (Phase 3-5)
- **ç›®æ¨™**: è®“ `property.html` èˆ‡ React é é¢å…±äº«åŒä¸€å¥—è† å›Šé‚è¼¯ã€‚

| ID | ä»»å‹™æè¿° (Action) | æª”æ¡ˆè·¯å¾‘ (File) | ç‹€æ…‹ | é©—è­‰è­‰æ“š (Evidence) |
|:---|:---|:---|:---|:---|
| KC-3.1 | featured å¤§å¡åŠ å…¥è† å›Š row (é¡¯ç¤º 3 å€‹) | `public/js/property-renderer.js` | âœ… | å·²æ›´æ–° seed è³‡æ–™ä¸¦é©—è­‰ renderer é‚è¼¯ |
| KC-3.2 | æ°´å¹³å¡ç”±å–®ä¸€ tag æ”¹ç‚º tags è¿´åœˆè¼¸å‡º chip | `public/js/property-renderer.js` | âœ… | å·²å°‡ tag æ”¹ç‚º tags é™£åˆ—ä¸¦è¿´åœˆè¼¸å‡º |
| KC-3.3 | proof (badge/quote) ç¶­æŒæ—¢æœ‰é¡¯ç¤ºï¼Œä¸æ··å…¥ tags | `public/js/property-renderer.js` | âœ… | ç¢ºä¿ badge èˆ‡ reviews ç¨ç«‹æ¸²æŸ“ |
| KC-4.1 | æ–°å¢ `/api/property/generate-key-capsules` endpoint | `api/property/generate-key-capsules.ts` | âœ… | å¯¦ä½œ OpenAI ä¸²æ¥èˆ‡é™ç´šé‚è¼¯ |
| KC-4.2 | ä¸Šå‚³é æ•´åˆï¼šä¸Šå‚³å‰/å¾Œå‘¼å«ç”Ÿæˆï¼ŒæˆåŠŸæ‰è¦†å¯« advantage_1/2 | `src/components/upload/UploadContext.tsx` | âœ… | æ•´åˆè‡³ handleSubmitï¼ŒæˆåŠŸå‰‡è¦†å¯«å„ªé» |
| KC-4.3 | åŠ å…¥é™ç´šèˆ‡æç¤ºï¼šAI å¤±æ•—ä¸é˜»å¡ï¼Œä¸¦è¨˜éŒ„ metadata | `src/components/upload/UploadContext.tsx` | âœ… | å¯¦ä½œ try-catch èˆ‡ notify æç¤º |
| KC-5.1 | å–®å…ƒæ¸¬è©¦ï¼šå°è† å›Šç”Ÿæˆå‡½æ•¸åš deterministic æ¸¬è©¦ | `src/utils/__tests__/keyCapsules.test.ts` | â¬œ | |
| KC-5.2 | API æ¸¬è©¦ï¼šç¢ºä¿é¦–é  tags é•·åº¦èˆ‡å…§å®¹ç¬¦åˆ (2 highlights + 1 spec) | `api/home/__tests__/featured-properties.test.ts` | â¬œ | |
| KC-5.3 | åˆ—è¡¨é  (vanilla) æ¸¬è©¦ï¼šfeatured å¤§å¡èˆ‡æ°´å¹³å¡ render tags | `scripts/phase5/e2e-phase5.ts` | â¬œ | |
| KC-5.4 | å›æ­¸æ¸¬è©¦ï¼šç¢ºèªä¸ç ´å£æ—¢æœ‰ Seed/Mock é¡¯ç¤º | `scripts/phase5/e2e-phase5.ts` | â¬œ | |

---

## âœ… å·²å®Œæˆéšæ®µ (Milestones)

### ğŸ§© KC1 Phase 3 & 4: AI è† å›Šèˆ‡ä¸Šå‚³æ•´åˆ (2025-12-22) âœ…
- âœ… **KC-4**: å¯¦ä½œ OpenAI ä¸²æ¥ï¼Œæ ¹æ“šæ¨™é¡Œ/æè¿°è‡ªå‹•ç”Ÿæˆ 2 å€‹äº®é»æ¨™ç±¤ã€‚
- âœ… **KC-3**: æˆ¿æºåˆ—è¡¨é  (Vanilla JS) æ”¯æ´å¤šæ¨™ç±¤æ¸²æŸ“èˆ‡ DOM Diffing å„ªåŒ–ã€‚

#### ğŸ“‹ KC-4 å¯¦ä½œç´€éŒ„ (2025-12-22)
- **API å¯¦ä½œ**: å»ºç«‹ `generate-key-capsules.ts`ï¼Œä½¿ç”¨ GPT-3.5-Turbo æ ¹æ“šæˆ¿æºæ¨™é¡Œèˆ‡æè¿°ç”Ÿæˆ 2 å€‹ 2-5 å­—çš„ç¹é«”ä¸­æ–‡äº®é»æ¨™ç±¤ã€‚
- **å„ªé›…é™ç´š**: API å…§å»ºç’°å¢ƒè®Šæ•¸æª¢æŸ¥ï¼Œè‹¥ç„¡ `OPENAI_API_KEY` å‰‡å›å‚³ç©ºé™£åˆ—èˆ‡ `degraded` ç‹€æ…‹ï¼Œä¸æ‹‹å‡ºéŒ¯èª¤ã€‚
- **å‰ç«¯æ•´åˆ**: åœ¨ `UploadContext.tsx` çš„ `handleSubmit` æµç¨‹ä¸­ï¼Œæ–¼åœ–ç‰‡ä¸Šå‚³å¾Œã€æˆ¿æºå»ºç«‹å‰æ’å…¥ AI ç”Ÿæˆæ­¥é©Ÿã€‚
- **è¦†å¯«é‚è¼¯**: åƒ…åœ¨ AI æˆåŠŸå›å‚³æ¨™ç±¤æ™‚ï¼Œæ‰è¦†å¯« `advantage1` èˆ‡ `advantage2`ï¼Œä¸¦åŒæ­¥æ›´æ–° `highlights` æ¬„ä½ä»¥ä¾› UI æ¸²æŸ“ã€‚
- **å¼·å¥æ€§**: ä½¿ç”¨ `try-catch` èˆ‡ `notify` æç¤ºï¼Œç¢ºä¿ AI å¤±æ•—ä¸å½±éŸ¿ç™¼ä½ˆæµç¨‹ï¼Œä¸¦æä¾›ä½¿ç”¨è€…åé¥‹ã€‚
- **ä»£ç¢¼æ¸…ç†**: ç§»é™¤æ‰€æœ‰ `any` é¡å‹èˆ‡ `console.log` èª¿è©¦ä»£ç¢¼ï¼Œè£œå…¨ `ValidationState` é¡å‹å®šç¾©ã€‚
- **é©—è­‰ä¿®æ­£**: ä¿®æ­£ `propertyService.ts` ä¸­çš„ Zod é©—è­‰é‚è¼¯ï¼Œç¢ºä¿ AI ç”Ÿæˆçš„çŸ­æ¨™ç±¤ä¸æœƒå°è‡´è¡¨å–®æäº¤å¤±æ•—ã€‚
- **ç·Šæ€¥ä¿®å¾©**: ä¿®å¾© `usePropertyFormValidation.ts` èªæ³•éŒ¯èª¤ã€Magic Bytes Hex Padding æ¼æ´ã€UploadContext è¨˜æ†¶é«”æ´©æ¼èˆ‡å‹åˆ¥å®‰å…¨å•é¡Œã€‚

### ğŸ  P11: æˆ¿æºåˆ—è¡¨é æ··åˆå‹•åŠ›å‡ç´š (2025-12-19) âœ…
- âœ… **S1-S4**: 100% å®Œæˆï¼Œå¯¦ä½œ DOM Diffing èˆ‡ç´” DOM APIã€‚
- âœ… **M1-M3**: 100% å®Œæˆï¼Œå¯¦ä½œ Ring Buffer èˆ‡è£œé½Šæ¸¬è©¦ Fixturesã€‚
- âœ… **L1**: 100% å®Œæˆï¼Œæ ¹é™¤ `innerHTML` XSS é¢¨éšªã€‚

### âœ¨ Phase 3: HP é‡æ§‹èˆ‡æ¶æ§‹ç¡¬åŒ– (2025-12-19) âœ…
- âœ… **HP-3**: å¯¦ä½œ `UploadContext` æ¶ˆé™¤ Prop Drillingï¼Œæ•´åˆ Zod é©—è­‰èˆ‡ Regex æ•ˆèƒ½å„ªåŒ–ã€‚
- âœ… **HP-2**: æ¨¡çµ„åŒ–ä¸Šå‚³é é¢ï¼Œå„ªåŒ–æ¨™ç±¤æ¬Šé‡é‚è¼¯èˆ‡æ•æ„Ÿè©éæ¿¾ã€‚
- âœ… **HP-1**: æ•´åˆ `HighlightPicker` ä¸¦ä¸²æ¥ `advantage` æ¬„ä½ã€‚

### ğŸ§© KC1 Phase 1 & 2 (2025-12-18) âœ…
- âœ… åœ¨ API adapter å±¤æ–°å¢ `tags` çµ±ä¸€ç”Ÿæˆå‡½æ•¸ã€‚
- âœ… è©³æƒ…é ç§»é™¤ hardcode tagsï¼Œæ”¹è®€å–çµæ§‹åŒ–æ¬„ä½ã€‚
- âœ… è©³æƒ…é æ–°å¢ã€Œç‰©ä»¶åŸºæœ¬è³‡è¨Šã€å€å¡Šã€‚

### ğŸ  P11 Phase 1 (2025-12-17) âœ…
- âœ… è³‡æ–™æ¨™æº–åŒ– (SSOT) å»ºç«‹ï¼ŒZod Schema é©—è­‰é€šéã€‚
- âœ… Adapter æ¥­å‹™ä»£ç¢¼å¼•ç”¨èˆ‡ Regex ä¿®æ­£ã€‚

---

## ğŸ“œ æ­·å²å­˜æª” (Archive)
