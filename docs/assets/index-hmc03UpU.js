import{g as y}from"./index-BVqO0Z_K.js";let f=97;const i=()=>f=(f*9301+49297)%233280/233280,m=["惠宇上晴","單元二新苑","水湳青庭","七期晶華","北屯新苑","西屯國際"],w=["台中西屯","台中北屯","台中南屯","台中西區","台中北區","台中南區"],l=["雙車位","採光佳","邊間","屋況佳","近公園","24H管理","格局方正"],k=["住戶A","住戶B","住戶C","準住戶D","住戶E"],v=["管理嚴謹","機能方便","中庭維護佳","車位好停","生活圈便利"],$=e=>{let t=2166136261;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=t*16777619>>>0;return t},M=e=>{f=e%233279+1},h=e=>({id:`r${e}`,authorMask:k[e%k.length],content:v[Math.floor(i()*v.length)],ts:new Date(Date.now()-e*36e5).toISOString()});function C(e){const t=m[e%m.length],r=[l[Math.floor(i()*l.length)],l[Math.floor(i()*l.length)]];return{id:`p${e}`,title:`${t} 景觀${e%3+2}房`,price:1500+Math.floor(i()*2e3),communityId:`c${e%m.length}`,communityName:t,cover:`https://picsum.photos/seed/mai-${e}/800/450`,highlights:r,reviewsTop2:[h(e*2),h(e*2+1)]}}function A(e){return{id:`c${e}`,name:m[e%m.length],cover:`https://picsum.photos/seed/comm-${e}/600/300`,score:4+Math.floor(i()*10)/10,reviewCount:10+Math.floor(i()*90),location:w[e%w.length]}}const g=(e=24)=>Array.from({length:e},(t,r)=>C(r+1)),L=(e=6)=>Array.from({length:e},(t,r)=>A(r)),O=(e,t=24)=>(M($(e)),g(t)),u=new Map,S=e=>new Promise(t=>setTimeout(t,e)),D=e=>{if(e>0&&Math.random()<e)throw new Error("Mock 網路失敗")};function N(e,t){var s;const r=e.headers;if(!r)return;if(r instanceof Headers)return r.get(t)||void 0;if(Array.isArray(r))return(s=r.find(([n])=>n.toLowerCase()===t.toLowerCase()))==null?void 0:s[1];const o=r;return o[t]??o[t.toLowerCase()]}async function U(e,t){const r=await y();if(await S(r.latency??0),D(r.error??0),e==="/api/v1/uag/events")return{ok:!0,data:null};if(/^\/api\/v1\/meta$/.test(e))return{ok:!0,data:{backendVersion:"1.0.7",apiVersion:"v1",maintenance:!1}};if(/^\/api\/v1\/properties\?/.test(e)){const o=new URLSearchParams(e.split("?")[1]||""),s=+o.get("page")||1,n=+o.get("pageSize")||8,c=o.get("q")||"",p=`${r.mockSeed??""}|${c}|${s}`;let a=O(p,24);return c&&(a=a.filter(d=>d.title.includes(c)||d.communityName.includes(c))),{ok:!0,data:{items:a.slice((s-1)*n,s*n),page:s,pageSize:n,total:a.length}}}if(/^\/api\/v1\/properties\/[^/?]+$/.test(e)){const o=e.split("/").pop(),s=g(24).find(n=>n.id===o);return s?{ok:!0,data:s}:{ok:!1,error:{code:"NOT_FOUND",message:"物件不存在"}}}if(/^\/api\/v1\/communities\/[^/?]+\/reviews\?/.test(e)){const o=new URLSearchParams(e.split("?")[1]||""),s=+o.get("limit")||2,n=+o.get("offset")||0;return{ok:!0,data:Array.from({length:s},(p,a)=>h(a+n))}}if(/^\/api\/v1\/communities\/preview$/.test(e))return{ok:!0,data:L(6)};if(e==="/api/v1/ai/ask"){const o=N(t,"Idempotency-Key")||"";if(o&&u.has(o))return u.get(o);const s={ok:!0,data:{answers:["好的，根據您的需求，以下是推薦物件。"],recommends:g(3)}};return o&&u.set(o,s),s}return{ok:!1,error:{code:"NOT_FOUND",message:"端點不存在"}}}export{U as mockHandler};
