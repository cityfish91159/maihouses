const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Coi22hMv.js","assets/react-vendor-COAx946C.js","assets/ui-libs-CHr8nHZI.js","assets/supabase-CYJXZqBa.js"])))=>i.map(i=>d[i]);
var ai=e=>{throw TypeError(e)};var _n=(e,t,r)=>t.has(e)||ai("Cannot "+r);var y=(e,t,r)=>(_n(e,t,"read from private field"),r?r.call(e):t.get(e)),se=(e,t,r)=>t.has(e)?ai("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Y=(e,t,r,n)=>(_n(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),le=(e,t,r)=>(_n(e,t,"access private method"),r);var Ar=(e,t,r,n)=>({set _(a){Y(e,t,a,r)},get _(){return y(e,t,n)}});import{r as m,a as xd,R as U,b as gd,L as it,u as br,c as vr,d as ja,e as nl,f as bd,h as nt,B as vd}from"./react-vendor-COAx946C.js";import{L as ii,a as oi,U as li,X as _s,M as yd,S as Zr,P as es,b as wd,H as al,c as jd,d as Nd,K as _d,C as kd,e as Sd,A as il,f as ol,E as dn,g as un,B as ar,D as mn,h as Ed,i as yr,j as Pt,k as Na,l as _a,m as Td,n as Cd,o as Id,p as $n,q as Ad,r as ka,s as Yr,t as ts,u as He,v as St,w as ir,I as Ld,x as Sa,y as ll,z as Md,Z as Un,R as Rd,F as Od,G as ut,J as Pd,N as zd,O as Dd,Q as Kr,T as cl,V as Hr,W as mt,Y as Fd,_ as $d,$ as Ud,a0 as Bn,a1 as ci,a2 as hn,a3 as Bd,a4 as Qr,a5 as Gn,a6 as Ks,a7 as Gd,a8 as Hd,a9 as Ea,aa as Wd,ab as kn,ac as Ut,ad as Vd,ae as Zd,af as Yd,ag as Kd}from"./ui-libs-CHr8nHZI.js";import{c as Qd}from"./supabase-CYJXZqBa.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var dl={exports:{}},fn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=m,Jd=Symbol.for("react.element"),Xd=Symbol.for("react.fragment"),eu=Object.prototype.hasOwnProperty,tu=qd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,su={key:!0,ref:!0,__self:!0,__source:!0};function ul(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)eu.call(t,n)&&!su.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Jd,type:e,key:i,ref:o,props:a,_owner:tu.current}}fn.Fragment=Xd;fn.jsx=ul;fn.jsxs=ul;dl.exports=fn;var s=dl.exports,Hn={},di=xd;Hn.createRoot=di.createRoot,Hn.hydrateRoot=di.hydrateRoot;var Js=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ru={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ht,wa,Zo,nu=(Zo=class{constructor(){se(this,Ht,ru);se(this,wa,!1)}setTimeoutProvider(e){Y(this,Ht,e)}setTimeout(e,t){return y(this,Ht).setTimeout(e,t)}clearTimeout(e){y(this,Ht).clearTimeout(e)}setInterval(e,t){return y(this,Ht).setInterval(e,t)}clearInterval(e){y(this,Ht).clearInterval(e)}},Ht=new WeakMap,wa=new WeakMap,Zo),ls=new nu;function au(e){setTimeout(e,0)}var ys=typeof window>"u"||"Deno"in globalThis;function Ye(){}function iu(e,t){return typeof e=="function"?e(t):e}function Wn(e){return typeof e=="number"&&e>=0&&e!==1/0}function ml(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xt(e,t){return typeof e=="function"?e(t):e}function dt(e,t){return typeof e=="function"?e(t):e}function ui(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Ta(o,t.options))return!1}else if(!or(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function mi(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ws(t.options.mutationKey)!==ws(i))return!1}else if(!or(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Ta(e,t){return((t==null?void 0:t.queryKeyHashFn)||ws)(e)}function ws(e){return JSON.stringify(e,(t,r)=>Vn(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function or(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>or(e[r],t[r])):!1}var ou=Object.prototype.hasOwnProperty;function hl(e,t){if(e===t)return e;const r=hi(e)&&hi(t);if(!r&&!(Vn(e)&&Vn(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=r?d:i[d],u=e[h],x=t[h];if(u===x){l[h]=u,(r?d<a:ou.call(e,h))&&c++;continue}if(u===null||x===null||typeof u!="object"||typeof x!="object"){l[h]=x;continue}const f=hl(u,x);l[h]=f,f===u&&c++}return a===o&&c===a?e:l}function qr(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function hi(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vn(e){if(!fi(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!fi(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function fi(e){return Object.prototype.toString.call(e)==="[object Object]"}function lu(e){return new Promise(t=>{ls.setTimeout(t,e)})}function Zn(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?hl(e,t):t}function cu(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function du(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ca=Symbol();function fl(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ca?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function pl(e,t){return typeof e=="function"?e(...t):!!e}var ds,Wt,zs,Yo,uu=(Yo=class extends Js{constructor(){super();se(this,ds);se(this,Wt);se(this,zs);Y(this,zs,t=>{if(!ys&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){y(this,Wt)||this.setEventListener(y(this,zs))}onUnsubscribe(){var t;this.hasListeners()||((t=y(this,Wt))==null||t.call(this),Y(this,Wt,void 0))}setEventListener(t){var r;Y(this,zs,t),(r=y(this,Wt))==null||r.call(this),Y(this,Wt,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){y(this,ds)!==t&&(Y(this,ds,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof y(this,ds)=="boolean"?y(this,ds):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ds=new WeakMap,Wt=new WeakMap,zs=new WeakMap,Yo),Ia=new uu;function Yn(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var mu=au;function hu(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=mu;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ae=hu(),Ds,Vt,Fs,Ko,fu=(Ko=class extends Js{constructor(){super();se(this,Ds,!0);se(this,Vt);se(this,Fs);Y(this,Fs,t=>{if(!ys&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){y(this,Vt)||this.setEventListener(y(this,Fs))}onUnsubscribe(){var t;this.hasListeners()||((t=y(this,Vt))==null||t.call(this),Y(this,Vt,void 0))}setEventListener(t){var r;Y(this,Fs,t),(r=y(this,Vt))==null||r.call(this),Y(this,Vt,t(this.setOnline.bind(this)))}setOnline(t){y(this,Ds)!==t&&(Y(this,Ds,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return y(this,Ds)}},Ds=new WeakMap,Vt=new WeakMap,Fs=new WeakMap,Ko),Jr=new fu;function pu(e){return Math.min(1e3*2**e,3e4)}function xl(e){return(e??"online")==="online"?Jr.isOnline():!0}var Kn=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function gl(e){let t=!1,r=0,n;const a=Yn(),i=()=>a.status!=="pending",o=b=>{var v;if(!i()){const p=new Kn(b);x(p),(v=e.onCancel)==null||v.call(e,p)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Ia.isFocused()&&(e.networkMode==="always"||Jr.isOnline())&&e.canRun(),h=()=>xl(e.networkMode)&&e.canRun(),u=b=>{i()||(n==null||n(),a.resolve(b))},x=b=>{i()||(n==null||n(),a.reject(b))},f=()=>new Promise(b=>{var v;n=p=>{(i()||d())&&b(p)},(v=e.onPause)==null||v.call(e)}).then(()=>{var b;n=void 0,i()||(b=e.onContinue)==null||b.call(e)}),g=()=>{if(i())return;let b;const v=r===0?e.initialPromise:void 0;try{b=v??e.fn()}catch(p){b=Promise.reject(p)}Promise.resolve(b).then(u).catch(p=>{var S;if(i())return;const w=e.retry??(ys?0:3),k=e.retryDelay??pu,N=typeof k=="function"?k(r,p):k,T=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,p);if(t||!T){x(p);return}r++,(S=e.onFail)==null||S.call(e,r,p),lu(N).then(()=>d()?void 0:f()).then(()=>{t?x(p):g()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?g():f().then(g),a)}}var us,Qo,bl=(Qo=class{constructor(){se(this,us)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wn(this.gcTime)&&Y(this,us,ls.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ys?1/0:5*60*1e3))}clearGcTimeout(){y(this,us)&&(ls.clearTimeout(y(this,us)),Y(this,us,void 0))}},us=new WeakMap,Qo),ms,$s,ct,hs,Me,hr,fs,vt,It,qo,xu=(qo=class extends bl{constructor(t){super();se(this,vt);se(this,ms);se(this,$s);se(this,ct);se(this,hs);se(this,Me);se(this,hr);se(this,fs);Y(this,fs,!1),Y(this,hr,t.defaultOptions),this.setOptions(t.options),this.observers=[],Y(this,hs,t.client),Y(this,ct,y(this,hs).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Y(this,ms,xi(this.options)),this.state=t.state??y(this,ms),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=y(this,Me))==null?void 0:t.promise}setOptions(t){if(this.options={...y(this,hr),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=xi(this.options);r.data!==void 0&&(this.setState(pi(r.data,r.dataUpdatedAt)),Y(this,ms,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&y(this,ct).remove(this)}setData(t,r){const n=Zn(this.state.data,t,this.options);return le(this,vt,It).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){le(this,vt,It).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=y(this,Me))==null?void 0:n.promise;return(a=y(this,Me))==null||a.cancel(t),r?r.then(Ye).catch(Ye):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(y(this,ms))}isActive(){return this.observers.some(t=>dt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ca||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Xt(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ml(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=y(this,Me))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=y(this,Me))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),y(this,ct).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(y(this,Me)&&(y(this,fs)?y(this,Me).cancel({revert:!0}):y(this,Me).cancelRetry()),this.scheduleGc()),y(this,ct).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||le(this,vt,It).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,h,u,x,f,g,b,v,p,w,k;if(this.state.fetchStatus!=="idle"&&((c=y(this,Me))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(y(this,Me))return y(this,Me).continueRetry(),y(this,Me).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(T=>T.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Y(this,fs,!0),n.signal)})},i=()=>{const N=fl(this.options,r),S=(()=>{const C={client:y(this,hs),queryKey:this.queryKey,meta:this.meta};return a(C),C})();return Y(this,fs,!1),this.options.persister?this.options.persister(N,S,this):N(S)},l=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:y(this,hs),state:this.state,fetchFn:i};return a(N),N})();(d=this.options.behavior)==null||d.onFetch(l,this),Y(this,$s,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&le(this,vt,It).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta}),Y(this,Me,gl({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof Kn&&N.revert&&this.setState({...y(this,$s),fetchStatus:"idle"}),n.abort()},onFail:(N,T)=>{le(this,vt,It).call(this,{type:"failed",failureCount:N,error:T})},onPause:()=>{le(this,vt,It).call(this,{type:"pause"})},onContinue:()=>{le(this,vt,It).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await y(this,Me).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(f=(x=y(this,ct).config).onSuccess)==null||f.call(x,N,this),(b=(g=y(this,ct).config).onSettled)==null||b.call(g,N,this.state.error,this),N}catch(N){if(N instanceof Kn){if(N.silent)return y(this,Me).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw le(this,vt,It).call(this,{type:"error",error:N}),(p=(v=y(this,ct).config).onError)==null||p.call(v,N,this),(k=(w=y(this,ct).config).onSettled)==null||k.call(w,this.state.data,N,this),N}finally{this.scheduleGc()}}},ms=new WeakMap,$s=new WeakMap,ct=new WeakMap,hs=new WeakMap,Me=new WeakMap,hr=new WeakMap,fs=new WeakMap,vt=new WeakSet,It=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...vl(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...pi(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Y(this,$s,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ae.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),y(this,ct).notify({query:this,type:"updated",action:t})})},qo);function vl(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xl(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pi(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xi(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Qe,fe,fr,Ve,ps,Us,Lt,Zt,pr,Bs,Gs,xs,gs,Yt,Hs,xe,sr,Qn,qn,Jn,Xn,ea,ta,sa,yl,Jo,gu=(Jo=class extends Js{constructor(t,r){super();se(this,xe);se(this,Qe);se(this,fe);se(this,fr);se(this,Ve);se(this,ps);se(this,Us);se(this,Lt);se(this,Zt);se(this,pr);se(this,Bs);se(this,Gs);se(this,xs);se(this,gs);se(this,Yt);se(this,Hs,new Set);this.options=r,Y(this,Qe,t),Y(this,Zt,null),Y(this,Lt,Yn()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(y(this,fe).addObserver(this),gi(y(this,fe),this.options)?le(this,xe,sr).call(this):this.updateResult(),le(this,xe,Xn).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ra(y(this,fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ra(y(this,fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,le(this,xe,ea).call(this),le(this,xe,ta).call(this),y(this,fe).removeObserver(this)}setOptions(t){const r=this.options,n=y(this,fe);if(this.options=y(this,Qe).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof dt(this.options.enabled,y(this,fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");le(this,xe,sa).call(this),y(this,fe).setOptions(this.options),r._defaulted&&!qr(this.options,r)&&y(this,Qe).getQueryCache().notify({type:"observerOptionsUpdated",query:y(this,fe),observer:this});const a=this.hasListeners();a&&bi(y(this,fe),n,this.options,r)&&le(this,xe,sr).call(this),this.updateResult(),a&&(y(this,fe)!==n||dt(this.options.enabled,y(this,fe))!==dt(r.enabled,y(this,fe))||Xt(this.options.staleTime,y(this,fe))!==Xt(r.staleTime,y(this,fe)))&&le(this,xe,Qn).call(this);const i=le(this,xe,qn).call(this);a&&(y(this,fe)!==n||dt(this.options.enabled,y(this,fe))!==dt(r.enabled,y(this,fe))||i!==y(this,Yt))&&le(this,xe,Jn).call(this,i)}getOptimisticResult(t){const r=y(this,Qe).getQueryCache().build(y(this,Qe),t),n=this.createResult(r,t);return vu(this,n)&&(Y(this,Ve,n),Y(this,Us,this.options),Y(this,ps,y(this,fe).state)),n}getCurrentResult(){return y(this,Ve)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&y(this,Lt).status==="pending"&&y(this,Lt).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){y(this,Hs).add(t)}getCurrentQuery(){return y(this,fe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=y(this,Qe).defaultQueryOptions(t),n=y(this,Qe).getQueryCache().build(y(this,Qe),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return le(this,xe,sr).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),y(this,Ve)))}createResult(t,r){var B;const n=y(this,fe),a=this.options,i=y(this,Ve),o=y(this,ps),l=y(this,Us),d=t!==n?t.state:y(this,fr),{state:h}=t;let u={...h},x=!1,f;if(r._optimisticResults){const j=this.hasListeners(),E=!j&&gi(t,r),O=j&&bi(t,n,r,a);(E||O)&&(u={...u,...vl(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:b,status:v}=u;f=u.data;let p=!1;if(r.placeholderData!==void 0&&f===void 0&&v==="pending"){let j;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(j=i.data,p=!0):j=typeof r.placeholderData=="function"?r.placeholderData((B=y(this,Gs))==null?void 0:B.state.data,y(this,Gs)):r.placeholderData,j!==void 0&&(v="success",f=Zn(i==null?void 0:i.data,j,r),x=!0)}if(r.select&&f!==void 0&&!p)if(i&&f===(o==null?void 0:o.data)&&r.select===y(this,pr))f=y(this,Bs);else try{Y(this,pr,r.select),f=r.select(f),f=Zn(i==null?void 0:i.data,f,r),Y(this,Bs,f),Y(this,Zt,null)}catch(j){Y(this,Zt,j)}y(this,Zt)&&(g=y(this,Zt),f=y(this,Bs),b=Date.now(),v="error");const w=u.fetchStatus==="fetching",k=v==="pending",N=v==="error",T=k&&w,S=f!==void 0,_={status:v,fetchStatus:u.fetchStatus,isPending:k,isSuccess:v==="success",isError:N,isInitialLoading:T,isLoading:T,data:f,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:b,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!k,isLoadingError:N&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:N&&S,isStale:Aa(t,r),refetch:this.refetch,promise:y(this,Lt),isEnabled:dt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const j=L=>{_.status==="error"?L.reject(_.error):_.data!==void 0&&L.resolve(_.data)},E=()=>{const L=Y(this,Lt,_.promise=Yn());j(L)},O=y(this,Lt);switch(O.status){case"pending":t.queryHash===n.queryHash&&j(O);break;case"fulfilled":(_.status==="error"||_.data!==O.value)&&E();break;case"rejected":(_.status!=="error"||_.error!==O.reason)&&E();break}}return _}updateResult(){const t=y(this,Ve),r=this.createResult(y(this,fe),this.options);if(Y(this,ps,y(this,fe).state),Y(this,Us,this.options),y(this,ps).data!==void 0&&Y(this,Gs,y(this,fe)),qr(r,t))return;Y(this,Ve,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!y(this,Hs).size)return!0;const o=new Set(i??y(this,Hs));return this.options.throwOnError&&o.add("error"),Object.keys(y(this,Ve)).some(l=>{const c=l;return y(this,Ve)[c]!==t[c]&&o.has(c)})};le(this,xe,yl).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&le(this,xe,Xn).call(this)}},Qe=new WeakMap,fe=new WeakMap,fr=new WeakMap,Ve=new WeakMap,ps=new WeakMap,Us=new WeakMap,Lt=new WeakMap,Zt=new WeakMap,pr=new WeakMap,Bs=new WeakMap,Gs=new WeakMap,xs=new WeakMap,gs=new WeakMap,Yt=new WeakMap,Hs=new WeakMap,xe=new WeakSet,sr=function(t){le(this,xe,sa).call(this);let r=y(this,fe).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ye)),r},Qn=function(){le(this,xe,ea).call(this);const t=Xt(this.options.staleTime,y(this,fe));if(ys||y(this,Ve).isStale||!Wn(t))return;const n=ml(y(this,Ve).dataUpdatedAt,t)+1;Y(this,xs,ls.setTimeout(()=>{y(this,Ve).isStale||this.updateResult()},n))},qn=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(y(this,fe)):this.options.refetchInterval)??!1},Jn=function(t){le(this,xe,ta).call(this),Y(this,Yt,t),!(ys||dt(this.options.enabled,y(this,fe))===!1||!Wn(y(this,Yt))||y(this,Yt)===0)&&Y(this,gs,ls.setInterval(()=>{(this.options.refetchIntervalInBackground||Ia.isFocused())&&le(this,xe,sr).call(this)},y(this,Yt)))},Xn=function(){le(this,xe,Qn).call(this),le(this,xe,Jn).call(this,le(this,xe,qn).call(this))},ea=function(){y(this,xs)&&(ls.clearTimeout(y(this,xs)),Y(this,xs,void 0))},ta=function(){y(this,gs)&&(ls.clearInterval(y(this,gs)),Y(this,gs,void 0))},sa=function(){const t=y(this,Qe).getQueryCache().build(y(this,Qe),this.options);if(t===y(this,fe))return;const r=y(this,fe);Y(this,fe,t),Y(this,fr,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},yl=function(t){Ae.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(y(this,Ve))}),y(this,Qe).getQueryCache().notify({query:y(this,fe),type:"observerResultsUpdated"})})},Jo);function bu(e,t){return dt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function gi(e,t){return bu(e,t)||e.state.data!==void 0&&ra(e,t,t.refetchOnMount)}function ra(e,t,r){if(dt(t.enabled,e)!==!1&&Xt(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Aa(e,t)}return!1}function bi(e,t,r,n){return(e!==t||dt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Aa(e,r)}function Aa(e,t){return dt(t.enabled,e)!==!1&&e.isStaleByTime(Xt(t.staleTime,e))}function vu(e,t){return!qr(e.getCurrentResult(),t)}function vi(e){return{onFetch:(t,r)=>{var h,u,x,f,g;const n=t.options,a=(x=(u=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:u.fetchMore)==null?void 0:x.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let b=!1;const v=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},p=fl(t.options,t.fetchOptions),w=async(k,N,T)=>{if(b)return Promise.reject();if(N==null&&k.pages.length)return Promise.resolve(k);const C=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:N,direction:T?"backward":"forward",meta:t.options.meta};return v(E),E})(),_=await p(C),{maxPages:B}=t.options,j=T?du:cu;return{pages:j(k.pages,_,B),pageParams:j(k.pageParams,N,B)}};if(a&&i.length){const k=a==="backward",N=k?yu:yi,T={pages:i,pageParams:o},S=N(n,T);l=await w(T,S,k)}else{const k=e??i.length;do{const N=c===0?o[0]??n.initialPageParam:yi(n,l);if(c>0&&N==null)break;l=await w(l,N),c++}while(c<k)}return l};t.options.persister?t.fetchFn=()=>{var b,v;return(v=(b=t.options).persister)==null?void 0:v.call(b,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function yi(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function yu(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var xr,Nt,Ze,bs,_t,$t,Xo,wu=(Xo=class extends bl{constructor(t){super();se(this,_t);se(this,xr);se(this,Nt);se(this,Ze);se(this,bs);Y(this,xr,t.client),this.mutationId=t.mutationId,Y(this,Ze,t.mutationCache),Y(this,Nt,[]),this.state=t.state||wl(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){y(this,Nt).includes(t)||(y(this,Nt).push(t),this.clearGcTimeout(),y(this,Ze).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Y(this,Nt,y(this,Nt).filter(r=>r!==t)),this.scheduleGc(),y(this,Ze).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){y(this,Nt).length||(this.state.status==="pending"?this.scheduleGc():y(this,Ze).remove(this))}continue(){var t;return((t=y(this,bs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,h,u,x,f,g,b,v,p,w,k,N,T,S,C,_,B;const r=()=>{le(this,_t,$t).call(this,{type:"continue"})},n={client:y(this,xr),meta:this.options.meta,mutationKey:this.options.mutationKey};Y(this,bs,gl({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,E)=>{le(this,_t,$t).call(this,{type:"failed",failureCount:j,error:E})},onPause:()=>{le(this,_t,$t).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>y(this,Ze).canRun(this)}));const a=this.state.status==="pending",i=!y(this,bs).canStart();try{if(a)r();else{le(this,_t,$t).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=y(this,Ze).config).onMutate)==null?void 0:l.call(o,t,this,n));const E=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));E!==this.state.context&&le(this,_t,$t).call(this,{type:"pending",context:E,variables:t,isPaused:i})}const j=await y(this,bs).start();return await((u=(h=y(this,Ze).config).onSuccess)==null?void 0:u.call(h,j,t,this.state.context,this,n)),await((f=(x=this.options).onSuccess)==null?void 0:f.call(x,j,t,this.state.context,n)),await((b=(g=y(this,Ze).config).onSettled)==null?void 0:b.call(g,j,null,this.state.variables,this.state.context,this,n)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,j,null,t,this.state.context,n)),le(this,_t,$t).call(this,{type:"success",data:j}),j}catch(j){try{throw await((k=(w=y(this,Ze).config).onError)==null?void 0:k.call(w,j,t,this.state.context,this,n)),await((T=(N=this.options).onError)==null?void 0:T.call(N,j,t,this.state.context,n)),await((C=(S=y(this,Ze).config).onSettled)==null?void 0:C.call(S,void 0,j,this.state.variables,this.state.context,this,n)),await((B=(_=this.options).onSettled)==null?void 0:B.call(_,void 0,j,t,this.state.context,n)),j}finally{le(this,_t,$t).call(this,{type:"error",error:j})}}finally{y(this,Ze).runNext(this)}}},xr=new WeakMap,Nt=new WeakMap,Ze=new WeakMap,bs=new WeakMap,_t=new WeakSet,$t=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ae.batch(()=>{y(this,Nt).forEach(n=>{n.onMutationUpdate(t)}),y(this,Ze).notify({mutation:this,type:"updated",action:t})})},Xo);function wl(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mt,yt,gr,el,ju=(el=class extends Js{constructor(t={}){super();se(this,Mt);se(this,yt);se(this,gr);this.config=t,Y(this,Mt,new Set),Y(this,yt,new Map),Y(this,gr,0)}build(t,r,n){const a=new wu({client:t,mutationCache:this,mutationId:++Ar(this,gr)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){y(this,Mt).add(t);const r=Lr(t);if(typeof r=="string"){const n=y(this,yt).get(r);n?n.push(t):y(this,yt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(y(this,Mt).delete(t)){const r=Lr(t);if(typeof r=="string"){const n=y(this,yt).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&y(this,yt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Lr(t);if(typeof r=="string"){const n=y(this,yt).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Lr(t);if(typeof r=="string"){const a=(n=y(this,yt).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ae.batch(()=>{y(this,Mt).forEach(t=>{this.notify({type:"removed",mutation:t})}),y(this,Mt).clear(),y(this,yt).clear()})}getAll(){return Array.from(y(this,Mt))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>mi(r,n))}findAll(t={}){return this.getAll().filter(r=>mi(t,r))}notify(t){Ae.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ae.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ye))))}},Mt=new WeakMap,yt=new WeakMap,gr=new WeakMap,el);function Lr(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Rt,Kt,qe,Ot,zt,Wr,na,tl,Nu=(tl=class extends Js{constructor(r,n){super();se(this,zt);se(this,Rt);se(this,Kt);se(this,qe);se(this,Ot);Y(this,Rt,r),this.setOptions(n),this.bindMethods(),le(this,zt,Wr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=y(this,Rt).defaultMutationOptions(r),qr(this.options,n)||y(this,Rt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:y(this,qe),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ws(n.mutationKey)!==ws(this.options.mutationKey)?this.reset():((a=y(this,qe))==null?void 0:a.state.status)==="pending"&&y(this,qe).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=y(this,qe))==null||r.removeObserver(this)}onMutationUpdate(r){le(this,zt,Wr).call(this),le(this,zt,na).call(this,r)}getCurrentResult(){return y(this,Kt)}reset(){var r;(r=y(this,qe))==null||r.removeObserver(this),Y(this,qe,void 0),le(this,zt,Wr).call(this),le(this,zt,na).call(this)}mutate(r,n){var a;return Y(this,Ot,n),(a=y(this,qe))==null||a.removeObserver(this),Y(this,qe,y(this,Rt).getMutationCache().build(y(this,Rt),this.options)),y(this,qe).addObserver(this),y(this,qe).execute(r)}},Rt=new WeakMap,Kt=new WeakMap,qe=new WeakMap,Ot=new WeakMap,zt=new WeakSet,Wr=function(){var n;const r=((n=y(this,qe))==null?void 0:n.state)??wl();Y(this,Kt,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},na=function(r){Ae.batch(()=>{var n,a,i,o,l,c,d,h;if(y(this,Ot)&&this.hasListeners()){const u=y(this,Kt).variables,x=y(this,Kt).context,f={client:y(this,Rt),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=y(this,Ot)).onSuccess)==null||a.call(n,r.data,u,x,f),(o=(i=y(this,Ot)).onSettled)==null||o.call(i,r.data,null,u,x,f)):(r==null?void 0:r.type)==="error"&&((c=(l=y(this,Ot)).onError)==null||c.call(l,r.error,u,x,f),(h=(d=y(this,Ot)).onSettled)==null||h.call(d,void 0,r.error,u,x,f))}this.listeners.forEach(u=>{u(y(this,Kt))})})},tl),kt,sl,_u=(sl=class extends Js{constructor(t={}){super();se(this,kt);this.config=t,Y(this,kt,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Ta(a,r);let o=this.get(i);return o||(o=new xu({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){y(this,kt).has(t.queryHash)||(y(this,kt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=y(this,kt).get(t.queryHash);r&&(t.destroy(),r===t&&y(this,kt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ae.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return y(this,kt).get(t)}getAll(){return[...y(this,kt).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>ui(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>ui(t,n)):r}notify(t){Ae.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ae.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ae.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},kt=new WeakMap,sl),Se,Qt,qt,Ws,Vs,Jt,Zs,Ys,rl,ku=(rl=class{constructor(e={}){se(this,Se);se(this,Qt);se(this,qt);se(this,Ws);se(this,Vs);se(this,Jt);se(this,Zs);se(this,Ys);Y(this,Se,e.queryCache||new _u),Y(this,Qt,e.mutationCache||new ju),Y(this,qt,e.defaultOptions||{}),Y(this,Ws,new Map),Y(this,Vs,new Map),Y(this,Jt,0)}mount(){Ar(this,Jt)._++,y(this,Jt)===1&&(Y(this,Zs,Ia.subscribe(async e=>{e&&(await this.resumePausedMutations(),y(this,Se).onFocus())})),Y(this,Ys,Jr.subscribe(async e=>{e&&(await this.resumePausedMutations(),y(this,Se).onOnline())})))}unmount(){var e,t;Ar(this,Jt)._--,y(this,Jt)===0&&((e=y(this,Zs))==null||e.call(this),Y(this,Zs,void 0),(t=y(this,Ys))==null||t.call(this),Y(this,Ys,void 0))}isFetching(e){return y(this,Se).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return y(this,Qt).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=y(this,Se).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=y(this,Se).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Xt(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return y(this,Se).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=y(this,Se).get(n.queryHash),i=a==null?void 0:a.state.data,o=iu(t,i);if(o!==void 0)return y(this,Se).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ae.batch(()=>y(this,Se).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=y(this,Se).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=y(this,Se);Ae.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=y(this,Se);return Ae.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ae.batch(()=>y(this,Se).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ye).catch(Ye)}invalidateQueries(e,t={}){return Ae.batch(()=>(y(this,Se).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ae.batch(()=>y(this,Se).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ye)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ye)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=y(this,Se).build(this,t);return r.isStaleByTime(Xt(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ye).catch(Ye)}fetchInfiniteQuery(e){return e.behavior=vi(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ye).catch(Ye)}ensureInfiniteQueryData(e){return e.behavior=vi(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Jr.isOnline()?y(this,Qt).resumePausedMutations():Promise.resolve()}getQueryCache(){return y(this,Se)}getMutationCache(){return y(this,Qt)}getDefaultOptions(){return y(this,qt)}setDefaultOptions(e){Y(this,qt,e)}setQueryDefaults(e,t){y(this,Ws).set(ws(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...y(this,Ws).values()],r={};return t.forEach(n=>{or(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){y(this,Vs).set(ws(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...y(this,Vs).values()],r={};return t.forEach(n=>{or(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...y(this,qt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ta(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ca&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...y(this,qt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){y(this,Se).clear(),y(this,Qt).clear()}},Se=new WeakMap,Qt=new WeakMap,qt=new WeakMap,Ws=new WeakMap,Vs=new WeakMap,Jt=new WeakMap,Zs=new WeakMap,Ys=new WeakMap,rl),jl=m.createContext(void 0),pn=e=>{const t=m.useContext(jl);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Su=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(jl.Provider,{value:e,children:t})),Nl=m.createContext(!1),Eu=()=>m.useContext(Nl);Nl.Provider;function _l(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var kl=m.createContext(_l()),Tu=()=>m.useContext(kl),Cu=({children:e})=>{const[t]=m.useState(()=>_l());return s.jsx(kl.Provider,{value:t,children:typeof e=="function"?e(t):e})},Iu=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Au=e=>{m.useEffect(()=>{e.clearReset()},[e])},Lu=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||pl(r,[e.error,n])),Mu=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ru=(e,t)=>e.isLoading&&e.isFetching&&!t,Ou=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,wi=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Pu(e,t,r){var u,x,f,g,b;const n=Eu(),a=Tu(),i=pn(),o=i.defaultQueryOptions(e);(x=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||x.call(u,o),o._optimisticResults=n?"isRestoring":"optimistic",Mu(o),Iu(o,a),Au(a);const l=!i.getQueryCache().get(o.queryHash),[c]=m.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),h=!n&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(v=>{const p=h?c.subscribe(Ae.batchCalls(v)):Ye;return c.updateResult(),p},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(o)},[o,c]),Ou(o,d))throw wi(o,c,a);if(Lu({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((g=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,o,d),o.experimental_prefetchInRender&&!ys&&Ru(d,n)){const v=l?wi(o,c,a):(b=i.getQueryCache().get(o.queryHash))==null?void 0:b.promise;v==null||v.catch(Ye).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Sl(e,t){return Pu(e,gu)}function rr(e,t){const r=pn(),[n]=m.useState(()=>new Nu(r,e));m.useEffect(()=>{n.setOptions(e)},[n,e]);const a=m.useSyncExternalStore(m.useCallback(o=>n.subscribe(Ae.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=m.useCallback((o,l)=>{n.mutate(o,l).catch(Ye)},[n]);if(a.error&&pl(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const zu="modulepreload",Du=function(e){return"/maihouses/"+e},ji={},Fu=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Du(c),c in ji)return;ji[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":zu,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((x,f)=>{u.addEventListener("load",x),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function $u(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const Uu=e=>{switch(e){case"success":return Hu;case"info":return Vu;case"warning":return Wu;case"error":return Zu;default:return null}},Bu=Array(12).fill(0),Gu=({visible:e,className:t})=>U.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},U.createElement("div",{className:"sonner-spinner"},Bu.map((r,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Hu=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wu=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Vu=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Zu=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yu=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ku=()=>{const[e,t]=U.useState(document.hidden);return U.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let aa=1;class Qu{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:aa++,o=this.toasts.find(c=>c.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:n}),{...c,...t,id:i,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],U.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(Ju(d)&&!d.ok){i=!1;const u=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,x=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,g=typeof u=="object"&&!U.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:x,...g})}else if(d instanceof Error){i=!1;const u=typeof r.error=="function"?await r.error(d):r.error,x=typeof r.description=="function"?await r.description(d):r.description,g=typeof u=="object"&&!U.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:x,...g})}else if(r.success!==void 0){i=!1;const u=typeof r.success=="function"?await r.success(d):r.success,x=typeof r.description=="function"?await r.description(d):r.description,g=typeof u=="object"&&!U.isValidElement(u)?u:{message:u};this.create({id:n,type:"success",description:x,...g})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){i=!1;const h=typeof r.error=="function"?await r.error(d):r.error,u=typeof r.description=="function"?await r.description(d):r.description,f=typeof h=="object"&&!U.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:u,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((d,h)=>l.then(()=>o[0]==="reject"?h(o[1]):d(o[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||aa++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Je=new Qu,qu=(e,t)=>{const r=(t==null?void 0:t.id)||aa++;return Je.addToast({title:e,...t,id:r}),r},Ju=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Xu=qu,em=()=>Je.toasts,tm=()=>Je.getActiveToasts(),as=Object.assign(Xu,{success:Je.success,info:Je.info,warning:Je.warning,error:Je.error,custom:Je.custom,message:Je.message,promise:Je.promise,dismiss:Je.dismiss,loading:Je.loading},{getHistory:em,getToasts:tm});$u("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Mr(e){return e.label!==void 0}const sm=3,rm="24px",nm="16px",Ni=4e3,am=356,im=14,om=45,lm=200;function jt(...e){return e.filter(Boolean).join(" ")}function cm(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}const dm=e=>{var t,r,n,a,i,o,l,c,d;const{invert:h,toast:u,unstyled:x,interacting:f,setHeights:g,visibleToasts:b,heights:v,index:p,toasts:w,expanded:k,removeToast:N,defaultRichColors:T,closeButton:S,style:C,cancelButtonStyle:_,actionButtonStyle:B,className:j="",descriptionClassName:E="",duration:O,position:L,gap:D,expandByDefault:I,classNames:M,icons:$,closeButtonAriaLabel:R="Close toast"}=e,[ee,Q]=U.useState(null),[F,re]=U.useState(null),[G,te]=U.useState(!1),[ie,pe]=U.useState(!1),[W,K]=U.useState(!1),[de,H]=U.useState(!1),[ae,he]=U.useState(!1),[Tt,rs]=U.useState(0),[yn,Er]=U.useState(0),X=U.useRef(u.duration||O||Ni),ge=U.useRef(null),je=U.useRef(null),be=p===0,We=p+1<=b,Ee=u.type,wt=u.dismissible!==!1,wn=u.className||"",cd=u.descriptionClassName||"",Tr=U.useMemo(()=>v.findIndex(oe=>oe.toastId===u.id)||0,[v,u.id]),dd=U.useMemo(()=>{var oe;return(oe=u.closeButton)!=null?oe:S},[u.closeButton,S]),Ja=U.useMemo(()=>u.duration||O||Ni,[u.duration,O]),jn=U.useRef(0),Es=U.useRef(0),Xa=U.useRef(0),Ts=U.useRef(null),[ud,md]=L.split("-"),ei=U.useMemo(()=>v.reduce((oe,Le,ze)=>ze>=Tr?oe:oe+Le.height,0),[v,Tr]),ti=Ku(),hd=u.invert||h,Nn=Ee==="loading";Es.current=U.useMemo(()=>Tr*D+ei,[Tr,ei]),U.useEffect(()=>{X.current=Ja},[Ja]),U.useEffect(()=>{te(!0)},[]),U.useEffect(()=>{const oe=je.current;if(oe){const Le=oe.getBoundingClientRect().height;return Er(Le),g(ze=>[{toastId:u.id,height:Le,position:u.position},...ze]),()=>g(ze=>ze.filter(rt=>rt.toastId!==u.id))}},[g,u.id]),U.useLayoutEffect(()=>{if(!G)return;const oe=je.current,Le=oe.style.height;oe.style.height="auto";const ze=oe.getBoundingClientRect().height;oe.style.height=Le,Er(ze),g(rt=>rt.find(Re=>Re.toastId===u.id)?rt.map(Re=>Re.toastId===u.id?{...Re,height:ze}:Re):[{toastId:u.id,height:ze,position:u.position},...rt])},[G,u.title,u.description,g,u.id,u.jsx,u.action,u.cancel]);const Dt=U.useCallback(()=>{pe(!0),rs(Es.current),g(oe=>oe.filter(Le=>Le.toastId!==u.id)),setTimeout(()=>{N(u)},lm)},[u,N,g,Es]);U.useEffect(()=>{if(u.promise&&Ee==="loading"||u.duration===1/0||u.type==="loading")return;let oe;return k||f||ti?(()=>{if(Xa.current<jn.current){const rt=new Date().getTime()-jn.current;X.current=X.current-rt}Xa.current=new Date().getTime()})():(()=>{X.current!==1/0&&(jn.current=new Date().getTime(),oe=setTimeout(()=>{u.onAutoClose==null||u.onAutoClose.call(u,u),Dt()},X.current))})(),()=>clearTimeout(oe)},[k,f,u,Ee,ti,Dt]),U.useEffect(()=>{u.delete&&(Dt(),u.onDismiss==null||u.onDismiss.call(u,u))},[Dt,u.delete]);function fd(){var oe;if($!=null&&$.loading){var Le;return U.createElement("div",{className:jt(M==null?void 0:M.loader,u==null||(Le=u.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":Ee==="loading"},$.loading)}return U.createElement(Gu,{className:jt(M==null?void 0:M.loader,u==null||(oe=u.classNames)==null?void 0:oe.loader),visible:Ee==="loading"})}const pd=u.icon||($==null?void 0:$[Ee])||Uu(Ee);var si,ri;return U.createElement("li",{tabIndex:0,ref:je,className:jt(j,wn,M==null?void 0:M.toast,u==null||(t=u.classNames)==null?void 0:t.toast,M==null?void 0:M.default,M==null?void 0:M[Ee],u==null||(r=u.classNames)==null?void 0:r[Ee]),"data-sonner-toast":"","data-rich-colors":(si=u.richColors)!=null?si:T,"data-styled":!(u.jsx||u.unstyled||x),"data-mounted":G,"data-promise":!!u.promise,"data-swiped":ae,"data-removed":ie,"data-visible":We,"data-y-position":ud,"data-x-position":md,"data-index":p,"data-front":be,"data-swiping":W,"data-dismissible":wt,"data-type":Ee,"data-invert":hd,"data-swipe-out":de,"data-swipe-direction":F,"data-expanded":!!(k||I&&G),"data-testid":u.testId,style:{"--index":p,"--toasts-before":p,"--z-index":w.length-p,"--offset":`${ie?Tt:Es.current}px`,"--initial-height":I?"auto":`${yn}px`,...C,...u.style},onDragEnd:()=>{K(!1),Q(null),Ts.current=null},onPointerDown:oe=>{oe.button!==2&&(Nn||!wt||(ge.current=new Date,rs(Es.current),oe.target.setPointerCapture(oe.pointerId),oe.target.tagName!=="BUTTON"&&(K(!0),Ts.current={x:oe.clientX,y:oe.clientY})))},onPointerUp:()=>{var oe,Le,ze;if(de||!wt)return;Ts.current=null;const rt=Number(((oe=je.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Cr=Number(((Le=je.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Re=new Date().getTime()-((ze=ge.current)==null?void 0:ze.getTime()),ot=ee==="x"?rt:Cr,Ir=Math.abs(ot)/Re;if(Math.abs(ot)>=om||Ir>.11){rs(Es.current),u.onDismiss==null||u.onDismiss.call(u,u),re(ee==="x"?rt>0?"right":"left":Cr>0?"down":"up"),Dt(),H(!0);return}else{var pt,xt;(pt=je.current)==null||pt.style.setProperty("--swipe-amount-x","0px"),(xt=je.current)==null||xt.style.setProperty("--swipe-amount-y","0px")}he(!1),K(!1),Q(null)},onPointerMove:oe=>{var Le,ze,rt;if(!Ts.current||!wt||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;const Re=oe.clientY-Ts.current.y,ot=oe.clientX-Ts.current.x;var Ir;const pt=(Ir=e.swipeDirections)!=null?Ir:cm(L);!ee&&(Math.abs(ot)>1||Math.abs(Re)>1)&&Q(Math.abs(ot)>Math.abs(Re)?"x":"y");let xt={x:0,y:0};const ni=ns=>1/(1.5+Math.abs(ns)/20);if(ee==="y"){if(pt.includes("top")||pt.includes("bottom"))if(pt.includes("top")&&Re<0||pt.includes("bottom")&&Re>0)xt.y=Re;else{const ns=Re*ni(Re);xt.y=Math.abs(ns)<Math.abs(Re)?ns:Re}}else if(ee==="x"&&(pt.includes("left")||pt.includes("right")))if(pt.includes("left")&&ot<0||pt.includes("right")&&ot>0)xt.x=ot;else{const ns=ot*ni(ot);xt.x=Math.abs(ns)<Math.abs(ot)?ns:ot}(Math.abs(xt.x)>0||Math.abs(xt.y)>0)&&he(!0),(ze=je.current)==null||ze.style.setProperty("--swipe-amount-x",`${xt.x}px`),(rt=je.current)==null||rt.style.setProperty("--swipe-amount-y",`${xt.y}px`)}},dd&&!u.jsx&&Ee!=="loading"?U.createElement("button",{"aria-label":R,"data-disabled":Nn,"data-close-button":!0,onClick:Nn||!wt?()=>{}:()=>{Dt(),u.onDismiss==null||u.onDismiss.call(u,u)},className:jt(M==null?void 0:M.closeButton,u==null||(n=u.classNames)==null?void 0:n.closeButton)},(ri=$==null?void 0:$.close)!=null?ri:Yu):null,(Ee||u.icon||u.promise)&&u.icon!==null&&(($==null?void 0:$[Ee])!==null||u.icon)?U.createElement("div",{"data-icon":"",className:jt(M==null?void 0:M.icon,u==null||(a=u.classNames)==null?void 0:a.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||fd():null,u.type!=="loading"?pd:null):null,U.createElement("div",{"data-content":"",className:jt(M==null?void 0:M.content,u==null||(i=u.classNames)==null?void 0:i.content)},U.createElement("div",{"data-title":"",className:jt(M==null?void 0:M.title,u==null||(o=u.classNames)==null?void 0:o.title)},u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title),u.description?U.createElement("div",{"data-description":"",className:jt(E,cd,M==null?void 0:M.description,u==null||(l=u.classNames)==null?void 0:l.description)},typeof u.description=="function"?u.description():u.description):null),U.isValidElement(u.cancel)?u.cancel:u.cancel&&Mr(u.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||_,onClick:oe=>{Mr(u.cancel)&&wt&&(u.cancel.onClick==null||u.cancel.onClick.call(u.cancel,oe),Dt())},className:jt(M==null?void 0:M.cancelButton,u==null||(c=u.classNames)==null?void 0:c.cancelButton)},u.cancel.label):null,U.isValidElement(u.action)?u.action:u.action&&Mr(u.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||B,onClick:oe=>{Mr(u.action)&&(u.action.onClick==null||u.action.onClick.call(u.action,oe),!oe.defaultPrevented&&Dt())},className:jt(M==null?void 0:M.actionButton,u==null||(d=u.classNames)==null?void 0:d.actionButton)},u.action.label):null)};function _i(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function um(e,t){const r={};return[e,t].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?nm:rm;function c(d){["top","right","bottom","left"].forEach(h=>{r[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}const mm=U.forwardRef(function(t,r){const{id:n,invert:a,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:h,mobileOffset:u,theme:x="light",richColors:f,duration:g,style:b,visibleToasts:v=sm,toastOptions:p,dir:w=_i(),gap:k=im,icons:N,containerAriaLabel:T="Notifications"}=t,[S,C]=U.useState([]),_=U.useMemo(()=>n?S.filter(G=>G.toasterId===n):S.filter(G=>!G.toasterId),[S,n]),B=U.useMemo(()=>Array.from(new Set([i].concat(_.filter(G=>G.position).map(G=>G.position)))),[_,i]),[j,E]=U.useState([]),[O,L]=U.useState(!1),[D,I]=U.useState(!1),[M,$]=U.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=U.useRef(null),ee=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=U.useRef(null),F=U.useRef(!1),re=U.useCallback(G=>{C(te=>{var ie;return(ie=te.find(pe=>pe.id===G.id))!=null&&ie.delete||Je.dismiss(G.id),te.filter(({id:pe})=>pe!==G.id)})},[]);return U.useEffect(()=>Je.subscribe(G=>{if(G.dismiss){requestAnimationFrame(()=>{C(te=>te.map(ie=>ie.id===G.id?{...ie,delete:!0}:ie))});return}setTimeout(()=>{gd.flushSync(()=>{C(te=>{const ie=te.findIndex(pe=>pe.id===G.id);return ie!==-1?[...te.slice(0,ie),{...te[ie],...G},...te.slice(ie+1)]:[G,...te]})})})}),[S]),U.useEffect(()=>{if(x!=="system"){$(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:te})=>{$(te?"dark":"light")})}catch{G.addListener(({matches:ie})=>{try{$(ie?"dark":"light")}catch(pe){console.error(pe)}})}},[x]),U.useEffect(()=>{S.length<=1&&L(!1)},[S]),U.useEffect(()=>{const G=te=>{var ie;if(o.every(K=>te[K]||te.code===K)){var W;L(!0),(W=R.current)==null||W.focus()}te.code==="Escape"&&(document.activeElement===R.current||(ie=R.current)!=null&&ie.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[o]),U.useEffect(()=>{if(R.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,F.current=!1)}},[R.current]),U.createElement("section",{ref:r,"aria-label":`${T} ${ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},B.map((G,te)=>{var ie;const[pe,W]=G.split("-");return _.length?U.createElement("ol",{key:G,dir:w==="auto"?_i():w,tabIndex:-1,ref:R,className:d,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":pe,"data-x-position":W,style:{"--front-toast-height":`${((ie=j[0])==null?void 0:ie.height)||0}px`,"--width":`${am}px`,"--gap":`${k}px`,...b,...um(h,u)},onBlur:K=>{F.current&&!K.currentTarget.contains(K.relatedTarget)&&(F.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||F.current||(F.current=!0,Q.current=K.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{D||L(!1)},onDragEnd:()=>L(!1),onPointerDown:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},_.filter(K=>!K.position&&te===0||K.position===G).map((K,de)=>{var H,ae;return U.createElement(dm,{key:K.id,icons:N,index:de,toast:K,defaultRichColors:f,duration:(H=p==null?void 0:p.duration)!=null?H:g,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:a,visibleToasts:v,closeButton:(ae=p==null?void 0:p.closeButton)!=null?ae:c,interacting:D,position:G,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,closeButtonAriaLabel:p==null?void 0:p.closeButtonAriaLabel,removeToast:re,toasts:_.filter(he=>he.position==K.position),heights:j.filter(he=>he.position==K.position),setHeights:E,expandByDefault:l,gap:k,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),El="maihouse_config";async function hm(e){return(await fetch(e)).json()}function fm(e){return e&&typeof e=="object"&&typeof e.apiBaseUrl=="string"&&typeof e.appVersion=="string"&&typeof e.minBackend=="string"&&typeof e.features=="object"}async function pm(){try{const r=localStorage.getItem(El);if(r){const n=JSON.parse(r);if(fm(n))return{...n,...Tl()}}}catch{}const t=`${window.location.origin}/maihouses/app.config.json`;return hm(t)}function gt(e){const t=new URLSearchParams(location.search).get(e),r=location.hash.indexOf("?");return(r>-1?new URLSearchParams(location.hash.slice(r)).get(e):null)??t??void 0}function Tl(){const e=gt("slots"),t=e?e.split(",").reduce((r,n)=>(r[n.trim()]=!0,r),{}):void 0;return{apiBaseUrl:gt("api"),features:t,mock:gt("mock")?gt("mock")==="1":void 0,latency:gt("latency")?+gt("latency"):void 0,error:gt("error")?+gt("error"):void 0,q:gt("q"),devtools:gt("devtools"),mockSeed:gt("seed")}}async function Cl(){const e=await pm(),t=Tl(),r={...e,...t,mock:t.mock??e.mock??!0,latency:t.latency??e.latency??0,error:t.error??e.error??0};try{localStorage.setItem(El,JSON.stringify(r))}catch{}return r}let Rr;const xm=new Uint8Array(16);function gm(){if(!Rr&&(Rr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rr(xm)}const Oe=[];for(let e=0;e<256;++e)Oe.push((e+256).toString(16).slice(1));function bm(e,t=0){return Oe[e[t+0]]+Oe[e[t+1]]+Oe[e[t+2]]+Oe[e[t+3]]+"-"+Oe[e[t+4]]+Oe[e[t+5]]+"-"+Oe[e[t+6]]+Oe[e[t+7]]+"-"+Oe[e[t+8]]+Oe[e[t+9]]+"-"+Oe[e[t+10]]+Oe[e[t+11]]+Oe[e[t+12]]+Oe[e[t+13]]+Oe[e[t+14]]+Oe[e[t+15]]}const vm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ki={randomUUID:vm};function Xr(e,t,r){if(ki.randomUUID&&!e)return ki.randomUUID();e=e||{};const n=e.random||(e.rng||gm)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,bm(n)}function et(e,t){try{console.debug("[track]",e,t||{})}catch{}}const tt={QuietOn:"user.needs_quiet_space",QuietOff:"user.back_to_explore",QuietAutoOff:"user.quiet_space_timeout",QuietTurnUsed:"user.quiet_space_turn_used",WarmbarView:"ui.warmbar_view",WarmbarContinue:"ui.warmbar_click_continue",WarmbarDismiss:"ui.warmbar_click_dismiss",MoodPick:"user.feeling_set",NoteSaved:"user.reflects_on_viewing",DebriefGen:"user.debrief_mna_generated",DebriefSave:"user.debrief_saved",BudgetCopy:"user.seeks_budget_clarity",ELI5Open:"user.needs_plain_explain",RewriteGen:"user.needs_polite_message_generated",RewriteAdopt:"user.polite_message_adopted"},Il="mai-quiet-mode-v1",ym=m.createContext(null);function Si(){try{const e=localStorage.getItem(Il);return e?JSON.parse(e):{isQuiet:!1,untilTs:null,remainingTurns:null}}catch{return{isQuiet:!1,untilTs:null,remainingTurns:null}}}function Cs(e){localStorage.setItem(Il,JSON.stringify(e))}const wm=({children:e})=>{const[t,r]=m.useState(()=>{const d=Si(),h=Date.now();if(d.isQuiet&&d.untilTs&&h>d.untilTs){const u={isQuiet:!1,untilTs:null,remainingTurns:null};return Cs(u),u}return d}),n=m.useRef(null),a=m.useCallback(()=>{if(!t.isQuiet)return!1;const d=Date.now();return!(t.untilTs&&d>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)},[t]);m.useEffect(()=>(n.current&&window.clearInterval(n.current),n.current=window.setInterval(()=>{const d=Date.now(),h=Si();h.isQuiet&&h.untilTs&&d>h.untilTs&&(r({isQuiet:!1,untilTs:null,remainingTurns:null}),Cs({isQuiet:!1,untilTs:null,remainingTurns:null}))},3e4),()=>{n.current&&window.clearInterval(n.current)}),[]);const i=m.useCallback(d=>{const h=(d==null?void 0:d.minutes)??null,u=(d==null?void 0:d.turns)??10,x=d==null?void 0:d.reason,f=h?Date.now()+h*6e4:null,g={isQuiet:!0,...x&&{reason:x},untilTs:f,remainingTurns:u};r(g),Cs(g),et(tt.QuietOn,{reason:x,minutes:h,turns:u})},[]),o=m.useCallback(()=>{const d={isQuiet:!1,untilTs:null,remainingTurns:null};r(d),Cs(d),et(tt.QuietOff,{})},[]),l=m.useCallback(()=>{r(d=>{if(!d.isQuiet||d.remainingTurns===null)return d;const h=Math.max(0,(d.remainingTurns??0)-1),u={...d,remainingTurns:h};if(Cs(u),h===0){const x={isQuiet:!1,untilTs:null,remainingTurns:null};return Cs(x),et(tt.QuietAutoOff,{reason:"turns_exhausted"}),x}return u})},[]),c=m.useMemo(()=>({state:t,startQuiet:i,clearQuiet:o,decrementTurn:l,isActive:a}),[t,i,o,l,a]);return s.jsx(ym.Provider,{value:c,children:e})};function jm(){try{const e=localStorage.getItem("mai-quiet-mode-v1");if(!e)return!1;const t=JSON.parse(e),r=Date.now();return!(!t.isQuiet||t.untilTs&&r>t.untilTs||t.remainingTurns!==null&&(t.remainingTurns??0)<=0)}catch{return!1}}const Al="mai-user-profile-v1",Ei="mai-first-seen-ts",Ll="mai-warmbar-dismissed-date";function wr(){try{const e=localStorage.getItem(Al);return e?JSON.parse(e):{tags:[]}}catch{return{tags:[]}}}function Ml(e){localStorage.setItem(Al,JSON.stringify(e))}function Nm(e){const t=wr(),r=new Set([...t.tags||[],...e].filter(Boolean));t.tags=Array.from(r).slice(0,8),Ml(t)}function _m(e){const t=wr();t.lastMood=e,Ml(t)}function km(){return localStorage.getItem(Ei)?{isFirstVisit:!1}:(localStorage.setItem(Ei,String(Date.now())),{isFirstVisit:!0})}function Sm(){localStorage.setItem(Ll,Rl())}function Em(){return localStorage.getItem(Ll)===Rl()}function Tm(e=3){return(wr().tags||[]).slice(0,e)}function Rl(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function Cm(e,t){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((n-a)/864e5)}function Im(e){if(!e)return null;const t=new Date;if(e.birthday){const r=Ti(e.birthday,t,7);if(r)return r}if(e.move_in_date){const r=Ti(e.move_in_date,t,7,"");if(r)return r}return null}function Ti(e,t,r=7,n){const[a,i,o]=e.split("-").map(d=>Number(d));if(!a||!i||!o)return null;const l=new Date(t.getFullYear(),i-1,o);return Math.abs(Cm(l,t))<=r?n===""?"":"":null}const Am=` 20 





- 
-  emoji 1 
- 1-3  4-5 
- 

 




- 80% 20% 
- 
- 
- 


-  2  3 
- 
- ...
- 


- 
- 
- 

 



   
  ...
   24  
  ... 



 


[[:]]


... [[:...]] 



 




- 
- 
- 



 


...
...


 

[[::]]

  

 

 5 
- 
- 
-  OK 




 
[[::]]



 

 
[[::ID]]


 

 
[[:]]


 MaiMai v6.0 5


  


  


  

 

### 
- 
- 
- 
- 
- 

### 
- 
- 
-  2 
-  3 

### 
 
 
 
  5 

### 

- 
- 
-  2-3 


- 
- 
- 
-  AI
- 
- 



`,Lm=["","","",""],Mm=["","","",""];function Rm(e,t){const r=e.toLowerCase();if(["","","","","","","","","","","","","","","",""].some(i=>r.includes(i)))return"explicit";let a=0;return t.forEach(i=>{a+=i}),a>=3?"semi-warm":"exploring"}let Ci=[];function Om(){if(typeof window<"u"){const e=localStorage.getItem("maimai_pain_points");if(e)try{Ci=JSON.parse(e)}catch{Ci=[]}}}const Pm={:{weight:1,category:"education"},:{weight:1,category:"education"},:{weight:2,category:"education"},:{weight:3,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:2,category:"education"},:{weight:1,category:"education"},:{weight:1,category:"commute"},:{weight:3,category:"commute"},:{weight:2,category:"commute"},:{weight:2,category:"commute"},:{weight:1,category:"commute"},:{weight:2,category:"commute"},:{weight:2,category:"commute"},:{weight:3,category:"noise"},:{weight:3,category:"noise"},:{weight:2,category:"noise"},:{weight:1,category:"noise"},:{weight:1,category:"noise"},:{weight:2,category:"noise"},:{weight:2,category:"pet"},:{weight:2,category:"pet"},:{weight:3,category:"pet"},:{weight:3,category:"pet"},:{weight:2,category:"pet"},:{weight:2,category:"life-change"},:{weight:3,category:"life-change"},:{weight:3,category:"life-change"},:{weight:2,category:"life-change"},:{weight:1,category:"life-change"},:{weight:2,category:"life-change"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:1,category:"rental"},:{weight:2,category:"rental"},:{weight:2,category:"rental"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:1,category:"stress"},:{weight:3,category:"quality"},:{weight:3,category:"quality"},:{weight:2,category:"quality"},:{weight:1,category:"quality"},:{weight:2,category:"quality"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:1,category:"amenity"},:{weight:2,category:"healing"},:{weight:2,category:"healing"},:{weight:1,category:"healing"},:{weight:1,category:"healing"},:{weight:1,category:"healing"}};let vs=new Map;function zm(e){const t=e.toLowerCase();return Object.entries(Pm).forEach(([r,{weight:n,category:a}])=>{if(t.includes(r)){const i=vs.get(a)||0;vs.set(a,i+n)}}),vs}function Dm(){return vs}function Fm(){let e=0;return vs.forEach(t=>{e+=t}),e}function $m(){let e=null,t=0;return vs.forEach((r,n)=>{r>t&&(t=r,e=n)}),t>=3?e:null}function Um(){vs=new Map}const Bm={"no-need":[//,//,//,//,//,//,//,/.*/,/.*/,//,//],budget:[//,//,//,//,//,//,//,//,//],later:[//,//,//,//,//,//,//,//,//,//,//],"negative-emotion":[//,//,//,//,//,//,//,//,//]};function Gm(e){const t=e.toLowerCase();for(const[r,n]of Object.entries(Bm))if(n.some(a=>a.test(t)))return r;return null}let Fe={};function Hm(e){const t=e.toLowerCase(),r={},n=[/(?:||).*?(?:|)(.+?)(?:||||$)/,/(.+?)(?:|)/];for(const o of n){const l=t.match(o);if(l&&l[1]){Fe.workArea=l[1].trim(),r.workArea=l[1].trim();break}}const a=[/(?:|).*?(?:|)(.+?)(?:||||$)/,/(.+?)$/];for(const o of a){const l=t.match(o);if(l&&l[1]){Fe.homeArea=l[1].trim(),r.homeArea=l[1].trim();break}}/.*(?:||30||||)/.test(t)&&(Fe.commutePain=e,r.commutePain=e),/||||/.test(t)?(Fe.familyStatus="newlywed",r.familyStatus="newlywed"):/|||||/.test(t)?(Fe.familyStatus="with-kids",r.familyStatus="with-kids"):/||/.test(t)?(Fe.familyStatus="single",r.familyStatus="single"):/|||||/.test(t)?(Fe.familyStatus="couple",r.familyStatus="couple"):/|||/.test(t)&&(Fe.familyStatus="with-parents",r.familyStatus="with-parents");const i={"|||":"fitness","|||":"homebody","||":"social","||":"workaholic","||":"early-bird","||":"night-owl"};for(const[o,l]of Object.entries(i))new RegExp(o).test(t)&&(Fe.lifestyle=[...Fe.lifestyle||[],l],r.lifestyle=Fe.lifestyle);return Object.keys(r).length>0&&(Fe.lastUpdated=Date.now(),Vm()),r}function Wm(){return Fe}function Vm(){typeof window<"u"&&localStorage.setItem("maimai_user_profile",JSON.stringify(Fe))}function Zm(){if(typeof window<"u"){const e=localStorage.getItem("maimai_user_profile");if(e)try{Fe=JSON.parse(e)}catch{Fe={}}}}function Ym(){const e=Fm();return lr>=10&&e>=5?{level:"intimate",label:"",tactics:["","",""],canRecommend:!0}:e>=4?{level:"hot",label:"",tactics:["","",""],canRecommend:!0}:e>=2?{level:"warm",label:"",tactics:["","",""],canRecommend:!1}:{level:"cold",label:"",tactics:["","",""],canRecommend:!1}}function Km(){const e=new Date().getHours();return e>=6&&e<10?"morning":e>=10&&e<14?"lunch":e>=14&&e<17?"afternoon":e>=17&&e<21?"evening":"night"}const Qm={morning:"",lunch:"",afternoon:"",evening:"",night:""};function qm(){return Qm[Km()]}function Jm(e){const t=e.toLowerCase();return["","","","?","","","",""].some(i=>t.includes(i))?"good":["","","","","","","..."].filter(i=>t.includes(i)).length>=2?"bad":"neutral"}let Vr=0,lr=0;function Xm(e){return lr++,e==="exploring"?Vr++:Vr=0,Vr}function eh(){Vr=0}function Ii(){const t=(typeof window<"u"?parseInt(localStorage.getItem("mai-intimacy-rounds")||"0",10):0)+lr;return t>=50?{level:"soulmate",label:"",emoji:""}:t>=30?{level:"bestie",label:"",emoji:""}:t>=15?{level:"close",label:"",emoji:""}:t>=6?{level:"familiar",label:"",emoji:""}:{level:"new",label:"",emoji:""}}function th(){if(typeof window<"u"){const e=parseInt(localStorage.getItem("mai-intimacy-rounds")||"0",10);localStorage.setItem("mai-intimacy-rounds",String(e+lr)),lr=0}}const Ai=["",""," OK ","",""];function sh(){const e=Math.floor(Math.random()*Ai.length),t=Ai[e];return t!==void 0?t:""}function rh(e){const t=e.toLowerCase();if(["","","","",""].filter(c=>t.includes(c)).length>=2)return"storytelling";const n=["","","","","","","",""],a=["","","","","","","",""],i=["","","","","","",""],o=["","","","","",""],l=["","","","","","","","",""];return n.some(c=>t.includes(c))?"frustrated":a.some(c=>t.includes(c))?"stressed":i.some(c=>t.includes(c))?"confused":o.some(c=>t.includes(c))?"curious":l.some(c=>t.includes(c))?"happy":"neutral"}let Rs=!1,La=null;function nh(e){Rs=!0,La=e}function ah(){return{hasPaved:Rs,category:La}}function Ol(){Rs=!1,La=null}function ih(e){return["","","","","","","","","","","","",""].some(r=>e.includes(r))}let Pl=null;function oh(e){Pl=e}function lh(){return Pl}function ch(e,t,r,n,a,i,o){return r==="storytelling"||r==="frustrated"||r==="stressed"||t==="bad"?"none":e==="explicit"&&r==="curious"?"card":e==="explicit"?Rs?"card":"pave":e==="semi-warm"&&Rs&&i?"card":e==="semi-warm"&&t==="good"&&a&&!Rs?"pave":e==="exploring"&&n>=5?"seed":"none"}const dh={education:{name:"",topic:"",pavePhrase:"..."},commute:{name:"",topic:"5",pavePhrase:"..."},noise:{name:"",topic:"",pavePhrase:"... "},pet:{name:"",topic:"",pavePhrase:"..."},"life-change":{name:"",topic:"",pavePhrase:"..."},rental:{name:"",topic:"",pavePhrase:"... "},stress:{name:"",topic:"",pavePhrase:"..."},quality:{name:"",topic:"",pavePhrase:"... "},amenity:{name:"",topic:"",pavePhrase:"..."},healing:{name:"",topic:"",pavePhrase:"..."}};function Li(e){return dh[e]}function uh(e){const t=/[\u{1F300}-\u{1F9FF}]/u.test(e),r=e.length;return r<10&&!t?"brief":t||r>30?"expressive":"neutral"}function mh(e){return["","","","","","","",""].some(r=>e.includes(r))}function hh(){Um(),eh(),Ol(),oh(null)}function fh(e,t,r,n,a,i){let o=Am;const l={exploring:`

 

- 
- 
- `,"semi-warm":`

 
${n||""}
- 
- 
- `,explicit:`

 

- 
- 
- `}[e];switch(o+=l,t==="storytelling"?o+=`

 
`:t==="frustrated"?o+=`

 


`:t==="stressed"&&(o+=`

 


`),r){case"seed":const d=sh();o+=`

 
 ${a} 
${d}
`;break;case"pave":const h=lh();if(h)o+=`

 
${h.script.topic}

${h.script.bridge}

${h.script.feature}
 `;else if(n){const u=Li(n);o+=`

 
${n}
${u.pavePhrase}
 `}break;case"card":if(n){const u=Li(n);o+=`

 
${n}

[[:${u.name}:${u.topic}]]`}break;case"listing":o+=`

 


[[::MH-2024-001]]`;break;default:o+=`

 
`}const c={brief:`

1-2`,expressive:`

`,neutral:""}[i];return c&&(o+=c),o}function ph(e){if(e.size<2)return null;const t={education:"",commute:"",noise:"",pet:"","life-change":"",rental:"",stress:"",quality:"",amenity:"",healing:""},r=[];return e.forEach((n,a)=>{n>=2&&t[a]&&r.push(t[a])}),r.length===0?null:`
 ${r.join("")}

`}function xh(e){typeof window<"u"&&localStorage.setItem("maimai_visit_memory",JSON.stringify(e))}function zl(){if(typeof window<"u"){const e=localStorage.getItem("maimai_visit_memory");if(e)try{return JSON.parse(e)}catch{return null}}return null}function gh(){const e=zl();if(!e)return null;const t=Math.floor((Date.now()-e.lastVisit)/(1e3*60*60*24));if(t<1||t>7)return null;const r={commute:" ",education:"",noise:"",rental:"",pet:"","life-change":"",stress:"",quality:"",amenity:"",healing:""};return e.dominantCategory&&r[e.dominantCategory]?r[e.dominantCategory]:""}function bh(e){const t=zl(),r={lastVisit:Date.now(),dominantCategory:e||(t==null?void 0:t.dominantCategory)||null,keywords:(t==null?void 0:t.keywords)||[],chitchatTopics:(t==null?void 0:t.chitchatTopics)||[]};xh(r)}const Mi={rentalToWall:`
  


  


...


...

 


[[::]]


`,explicitToListing:`
   + 











 
 
 


[[::NH-2024-001]]

 5 


`};function vh(e,t,r){return e==="semi-warm"&&t>=3&&r==="good"}const yh={commute:{communities:["","","",""],features:["","",""]},education:{communities:["","",""],features:["","",""]},noise:{communities:["","",""],features:["","",""]},pet:{communities:["","",""],features:["","",""]},rental:{communities:["","",""],features:["","",""]},quality:{communities:["","",""],features:["","",""]},"life-change":{communities:["","",""],features:["","",""]}};function wh(e){return e&&yh[e]||null}const jh=[//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//,//];function Nh(e){return jh.some(t=>t.test(e))}function _h(){const e=["...  ","... ","","... "," "],t=Math.floor(Math.random()*e.length),r=e[t];return r===void 0?"":r}let at={hasArea:!1,hasBudget:!1,hasTimeline:!1,hasViewedCommunity:!1,hasViewedListing:!1,hasFamilyNeeds:!1};function kh(e){const t=e.toLowerCase();/.*?|||.*|.*/.test(t)&&(at.hasArea=!0),/||||/.test(t)&&(at.hasBudget=!0),/||||||/.test(t)&&(at.hasTimeline=!0),/||||||/.test(t)&&(at.hasFamilyNeeds=!0),Eh()}function Dl(){let e=0;return at.hasArea&&e++,at.hasBudget&&e++,at.hasTimeline&&e++,at.hasViewedCommunity&&e++,at.hasViewedListing&&e++,at.hasFamilyNeeds&&e++,e}function Sh(){return Dl()>=4}function Eh(){typeof window<"u"&&localStorage.setItem("maimai_buying_readiness",JSON.stringify(at))}function Th(){if(typeof window<"u"){const e=localStorage.getItem("maimai_buying_readiness");if(e)try{at={...at,...JSON.parse(e)}}catch{}}}const Sn=[{id:"priority",question:"",options:[{key:"A",text:"",category:"commute"},{key:"B",text:"",category:"education"},{key:"C",text:"",category:"noise"},{key:"D",text:"",category:"rental"}],followUp:"{type}..."},{id:"lifestyle",question:"",options:[{key:"A",text:"",category:"noise"},{key:"B",text:"",category:"amenity"},{key:"C",text:"",category:"education"},{key:"D",text:"",category:"pet"}],followUp:"{feature}"},{id:"dealbreaker",question:"",options:[{key:"A",text:" 1 ",category:"commute"},{key:"B",text:"",category:"noise"},{key:"C",text:"",category:"rental"},{key:"D",text:"",category:"quality"}],followUp:" "}];let Fl=!1;function Ch(e){return Fl||e<4||e>6?!1:Math.random()>.6}function Ih(){const e=Math.floor(Math.random()*Sn.length),t=Sn[e];if(Fl=!0,t===void 0){const r=Sn[0];return r===void 0?{id:"default",question:"",options:[{key:"A",text:"",category:"commute"},{key:"B",text:"",category:"education"},{key:"C",text:"",category:"noise"},{key:"D",text:"",category:"rental"}],followUp:""}:r}return t}const Ah="100%  12 //";let ia=!1;const En=` 20 


- 
- 
- 
- 


- 
-  emoji 1 
-  1-3 
- 

`;function Lh(e){ia=e,hh()}function Mh(e){return["","","","","",""].some(r=>e.includes(r))}function Rh(e){var M,$,R,ee,Q;if(jm())return Ah;const r=localStorage.getItem("mai-mood-v1")||"neutral",a=(wr().tags||[]).slice(0,5),i=((M=e==null?void 0:e.filter(F=>F.role==="user").pop())==null?void 0:M.content)||"";if(Zm(),Th(),Nh(i)){const F=_h();return En+`

 

${F}`}if(ia)if(Mh(i))ia=!1;else return En;const o=Gm(i);if(o&&(o==="no-need"||o==="negative-emotion"))return En+`

${o==="no-need"?"":""} 100% `;Hm(i),kh(i),zm(i);const l=Dm(),c=$m();bh(c);const d=Rm(i,l),h=Xm(d),u=rh(i),x=Jm(i),f=ah();let g=!1;f.hasPaved&&(g=ih(i),mh(i)&&Ol());const b=ch(d,x,u,h,c,g);b==="pave"&&c&&nh(c);const v=uh(i);let p=fh(d,u,b,c,h,v),w=0;if(l.forEach(F=>{w+=F}),vh(d,w,x)){const F=ph(l);F&&(p+=`

 




${F}`)}d==="semi-warm"&&b==="pave"?p+=`

 
${Mi.rentalToWall}`:d==="explicit"&&(p+=`

 
${Mi.explicitToListing}`);const k=Ym();let N=`

 ${k.label}
`;k.tactics.forEach(F=>{N+=`
- ${F}`}),k.canRecommend||(N+=`
 `);const T=`

${qm()}`,S=Wm();let C="";(S.workArea||S.homeArea||S.commutePain||S.familyStatus)&&(C=`

 `,S.workArea&&(C+=`
- ${S.workArea}`),S.homeArea&&(C+=`
- ${S.homeArea}`),S.commutePain&&(C+=`
- `),S.familyStatus&&(C+=`
- ${{single:"",couple:"",newlywed:"","with-kids":"","with-parents":""}[S.familyStatus]||S.familyStatus}`),C+=`
 `);let _="";const B=wh(c);B&&b==="pave"&&(_=`

 
${c}
- ${B.communities.slice(0,2).join("")}
- ${B.features.join("")}
 `);let j="";const E=Dl();Sh()?j=`

 ${E}/6 - 

`:E>=2&&(j=`

 ${E}/6
`);let O="";if(Ch(h)){const F=Ih();F&&F.options.length>=4&&(O=`

 
${F.question}
A) ${(($=F.options[0])==null?void 0:$.text)??""}  B) ${((R=F.options[1])==null?void 0:R.text)??""}
C) ${((ee=F.options[2])==null?void 0:ee.text)??""}  D) ${((Q=F.options[3])==null?void 0:Q.text)??""}
 `)}const L=r==="stress"?`
localStorage `:r==="rest"?`
localStorage `:"",D=a.length?`
${a.join("")}`:"",I=`

[DEBUG] ${d} | ${u} | ${b} | ${c||""} | ${h} | ${k.level} | ${E}/6`;return p+N+T+C+_+j+O+L+D+I}async function jr(e,t,r){var d,h,u,x,f,g;const n=typeof t=="function"?t:void 0,a=typeof t=="object"?t:r,i=Rh(e),o=await fetch("/api/openai-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:i},...e],temperature:(a==null?void 0:a.temperature)??.85,max_tokens:(a==null?void 0:a.max_tokens)??350,stream:!!n})});if(!o.ok)throw new Error(`LLM proxy error: ${o.status}`);if(n&&o.body){const b=o.body.getReader(),v=new TextDecoder;let p="";for(;;){const{done:w,value:k}=await b.read();if(w)break;const T=v.decode(k,{stream:!0}).split(`
`);for(const S of T)if(S.startsWith("data: ")){const C=S.slice(6);if(C==="[DONE]")continue;try{const _=JSON.parse(C),B=(u=(h=(d=_==null?void 0:_.choices)==null?void 0:d[0])==null?void 0:h.delta)==null?void 0:u.content;B&&(p+=B,n(B))}catch{}}}return p}const l=await o.json();return((g=(f=(x=l==null?void 0:l.choices)==null?void 0:x[0])==null?void 0:f.message)==null?void 0:g.content)??""}async function Oh(e,t){const r=(t==null?void 0:t.audience)==="owner"?"":"",n=(()=>{switch(t==null?void 0:t.intent){case"view":return"";case"detail":return"";case"pet":return"";case"price":return"";default:return""}})(),a=`V1/V2${r}${n}
---
${e}
---

V1...
V2...`;return jr([{role:"user",content:a}],{max_tokens:220})}async function Ph(e){const t=` 12 
${e}`;return jr([{role:"user",content:t}],{max_tokens:80})}async function zh(e){const t=`/122
${e}`;return jr([{role:"user",content:t}],{max_tokens:120})}async function Dh(e,t,r){const n=`(Must)(Nice)(Avoid)232 #tags:  35 /
${e}
${t}
${r}`;return jr([{role:"user",content:n}],{max_tokens:160})}let $l=Xr();const Ul=()=>$l;async function Bl(e,t={}){const r=await Cl(),n=`${r.apiBaseUrl}${e}`,a=(t.method||"GET").toUpperCase(),i={Accept:"application/json","X-API-Version":"v1","X-App-Version":r.appVersion,"X-Session-Id":$l,"X-Request-Id":Xr(),"Accept-Language":"zh-Hant-TW"},o=(()=>{const h=t.headers;if(!h)return{};if(h instanceof Headers){const u={};for(const[x,f]of h)u[x]=f;return u}return Array.isArray(h)?Object.fromEntries(h):h})();a==="POST"&&!o["Idempotency-Key"]&&!o["idempotency-key"]&&(o["Idempotency-Key"]=Xr());const l={...i,...o};if(r.mock){const{mockHandler:h}=await Fu(async()=>{const{mockHandler:u}=await import("./index-Coi22hMv.js");return{mockHandler:u}},__vite__mapDeps([0,1,2,3]));return h(e,{...t,headers:l})}const c=new AbortController,d=setTimeout(()=>c.abort(),8e3);try{const h=await fetch(n,{...t,headers:l,signal:c.signal});return h.ok?{ok:!0,data:await h.json()}:{ok:!1,error:{code:"API_ERROR",message:"API "}}}catch(h){return(h==null?void 0:h.name)==="AbortError"?{ok:!1,error:{code:"NETWORK_TIMEOUT",message:""}}:{ok:!1,error:{code:"NETWORK_ERROR",message:h.message}}}finally{clearTimeout(d)}}const Gl=()=>Bl("/api/v1/meta");function Fh({config:e}){const[t,r]=m.useState(!0),[n,a]=m.useState(!!e.mock),[i,o]=m.useState(e.latency??0),[l,c]=m.useState(e.error??0),[d,h]=m.useState(e.q??""),[u,x]=m.useState(""),[f,g]=m.useState(e.mockSeed??"");if(m.useEffect(()=>{Gl().then(p=>x(p.ok&&p.data?p.data.backendVersion:""))},[]),!t)return null;const b=()=>{const p={...e,mock:n,latency:i,error:l,q:d,mockSeed:f,devtools:"1"};try{localStorage.setItem("maihouse_config",JSON.stringify(p))}catch{}location.reload()},v=()=>{const p=String(Date.now());g(p);try{localStorage.setItem("maihouse_config",JSON.stringify({...e,mockSeed:p,mock:n,latency:i,error:l,q:d,devtools:"1"}))}catch{}location.reload()};return s.jsxs("aside",{className:"fixed bottom-4 right-4 z-[var(--z-overlay)] w-[320px] rounded-[var(--r-lg)] bg-white p-4 text-sm shadow-[var(--shadow-card)]",children:[s.jsx("div",{className:"mb-2 font-medium",children:"Developer HUD"}),s.jsxs("div",{className:"space-y-1 text-[var(--text-secondary)]",children:[s.jsxs("div",{children:["API",e.apiBaseUrl]}),s.jsxs("div",{children:["App",e.appVersion]}),s.jsxs("div",{children:["Backend",u]}),s.jsxs("div",{children:["Session",Ul()]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:p=>a(p.target.checked)})," Mock"]}),s.jsxs("label",{className:"flex items-center gap-2",children:["Latency",s.jsx("input",{className:"w-20 rounded border p-1",type:"number",value:i,onChange:p=>o(+p.target.value||0)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["Error",s.jsx("input",{className:"w-20 rounded border p-1",step:"0.1",type:"number",value:l,onChange:p=>c(+p.target.value||0)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["q ",s.jsx("input",{className:"flex-1 rounded border p-1",value:d,onChange:p=>h(p.target.value)})]}),s.jsxs("label",{className:"flex items-center gap-2",children:["seed",s.jsx("input",{className:"flex-1 rounded border p-1",value:f,onChange:p=>g(p.target.value)})]})]}),s.jsxs("div",{className:"mt-3 flex justify-between",children:[s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-100)] px-3 py-1",onClick:()=>r(!1),children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--neutral-300)] px-3 py-1",onClick:v,children:" "}),s.jsx("button",{className:"rounded-[var(--r-pill)] bg-[var(--brand)] px-3 py-1 text-[var(--brand-fg)]",onClick:b,children:""})]})]})]})}const Hl="uag_queue",oa=1e4,$h=200,ye=globalThis.__UAG__||(globalThis.__UAG__={queue:[],backoff:1e4,attempts:0});try{ye.queue=JSON.parse(localStorage.getItem(Hl)||"[]")}catch{ye.queue=[]}const Wl=()=>{try{localStorage.setItem(Hl,JSON.stringify(ye.queue.slice(-oa)))}catch{}},Ma=3e5;async function Vl(e){var r;const t=await Bl("/api/v1/uag/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const n=new Set(e.map(a=>a.requestId));ye.queue=ye.queue.filter(a=>!n.has(a.requestId)),Wl(),ye.attempts=0,ye.backoff=1e4}else{ye.attempts++;const n=(r=t==null?void 0:t.data)==null?void 0:r.retryAfterMs;ye.backoff=Math.min(n??ye.backoff*2,Ma)}}function en(){ye.timer&&clearTimeout(ye.timer),ye.timer=setTimeout(Uh,ye.backoff)}function Uh(){if(ye.queue.length){const e=ye.queue.slice(0,$h);Vl(e).catch(()=>{ye.attempts++,ye.backoff=Math.min(ye.backoff*2,Ma)}).finally(en)}else en()}en();function Bh(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:t&3|8).toString(16)})}function Ra(e,t,r){if(!(e!=null&&e.trim())||!(t!=null&&t.trim())){console.warn("[UAG] ");return}const n={event:e,page:t,sessionId:Ul(),userId:null,ts:new Date().toISOString(),meta:{origin:"gh-pages"},requestId:Bh()};r&&(n.targetId=r),ye.queue.push(n),ye.queue.length>oa&&(ye.queue=ye.queue.slice(-oa)),Wl(),Vl([n]).catch(()=>{ye.attempts++,ye.backoff=Math.min(ye.backoff*2,Ma),en()})}const Ri=({showSlogan:e,className:t,showBadge:r})=>s.jsxs("div",{className:`group flex cursor-pointer items-center gap-3 ${t}`,children:[s.jsxs("div",{className:"relative flex size-[42px] items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-brand-700 to-brand-600 shadow-lg shadow-brand-700/20 transition-all duration-300 group-hover:scale-105 group-hover:shadow-brand-700/30",children:[s.jsx("div",{className:"absolute inset-0 translate-y-full bg-gradient-to-tr from-transparent via-white/10 to-transparent transition-transform duration-700 ease-out group-hover:translate-y-0"}),s.jsxs("svg",{className:"relative z-10 size-[22px] text-white drop-shadow-sm transition-transform duration-300 group-hover:-translate-y-px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 9.5L12 3L21 9.5V20.5C21 21.0523 20.5523 21.5 20 21.5H4C3.44772 21.5 3 21.0523 3 20.5V9.5Z"}),s.jsx("path",{d:"M9 21.5V13H15V21.5"})]}),r&&s.jsx("div",{className:"absolute right-2 top-2 size-1.5 rounded-full bg-red-400 shadow-[0_0_0_1.5px] shadow-brand-600"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"font-serif text-[24px] font-bold leading-none tracking-wide text-brand-700",children:""})}),e&&s.jsx("div",{className:"ml-3 hidden h-5 items-center border-l-2 border-brand-100/80 pl-3 sm:flex",children:s.jsx("span",{className:"pt-px text-[15px] font-bold uppercase leading-none tracking-[0.15em] text-brand-500 transition-colors group-hover:text-brand-700",children:""})})]})]}),Zl=({showSlogan:e=!0,className:t="",onClick:r,href:n="/maihouses/",showBadge:a=!0})=>{const i={showSlogan:e,className:t,showBadge:a};return n?s.jsx("a",{href:n,onClick:r,className:"no-underline",children:s.jsx(Ri,{...i})}):s.jsx("div",{role:"button",tabIndex:0,onClick:r,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&r&&r()},children:s.jsx(Ri,{...i})})},ve={HOME:"/maihouses/",PROPERTY_LIST:"/maihouses/property.html",FEED:e=>`/maihouses/feed/${e}`,FEED_AGENT:"/maihouses/feed/agent",FEED_CONSUMER:"/maihouses/feed/consumer",FEED_AGENT_LEGACY:"/maihouses/feed-agent.html",FEED_CONSUMER_LEGACY:"/maihouses/feed-consumer.html",ASSURE:"/maihouses/assure",COMMUNITY_WALL_MVP:"/maihouses/community-wall_mvp.html",UAG:"https://maihouses.vercel.app/maihouses/uag",TRUST:"/trust",AUTH:"/maihouses/auth.html",COMMUNITY:e=>`/maihouses/community/${e}`,COMMUNITY_WALL:e=>`/maihouses/community/${e}/wall`,PROPERTY:e=>`/maihouses/p/${e}`};function Gh({onOpenAIStudio:e}){const[t,r]=m.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"sticky top-0 z-overlay border-b border-brand-100 bg-white/95 shadow-sm backdrop-blur-sm transition-all",children:[s.jsxs("div",{className:"mx-auto flex h-16 max-w-[1120px] items-center justify-between px-4",children:[s.jsx(Zl,{showSlogan:!0,onClick:()=>window.scrollTo({top:0,behavior:"smooth"})}),s.jsxs("nav",{className:"hidden items-center gap-1 md:flex md:gap-2","aria-label":"",children:[s.jsxs("a",{href:ve.PROPERTY_LIST,className:"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]",children:[s.jsx(ii,{size:18,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:`${ve.AUTH}?mode=login`,className:"flex items-center gap-2 rounded-xl px-4 py-2.5 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50/80 hover:text-brand-600 active:scale-[0.98]",children:[s.jsx(oi,{size:18,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:`${ve.AUTH}?mode=signup`,className:"ml-1 flex items-center gap-2 rounded-xl border border-transparent bg-brand-700 px-5 py-2.5 text-[15px] font-bold text-white shadow-md shadow-brand-700/10 transition-all hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-lg hover:shadow-brand-700/20 active:scale-[0.98]",children:[s.jsx(li,{size:18,strokeWidth:2.5}),s.jsx("span",{children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[s.jsx("a",{href:`${ve.AUTH}?mode=login`,className:"flex items-center justify-center rounded-lg px-3 py-2 text-sm font-bold text-brand-700 transition-all hover:bg-brand-50 active:scale-95",children:s.jsx(oi,{size:18,strokeWidth:2.5})}),s.jsxs("a",{href:`${ve.AUTH}?mode=signup`,className:"flex items-center gap-1.5 rounded-lg bg-brand-700 px-3 py-2 text-sm font-bold text-white shadow-sm transition-all hover:bg-brand-600 active:scale-95",children:[s.jsx(li,{size:16,strokeWidth:2.5}),s.jsx("span",{children:""})]}),s.jsx("button",{onClick:()=>r(!t),className:"flex items-center justify-center rounded-lg p-2 text-brand-700 transition-all hover:bg-brand-50 active:scale-95","aria-label":"",children:t?s.jsx(_s,{size:22,strokeWidth:2.5}):s.jsx(yd,{size:22,strokeWidth:2.5})})]})]}),t&&s.jsx("div",{className:"absolute inset-x-0 top-full border-b border-brand-100 bg-white shadow-lg md:hidden",children:s.jsxs("nav",{className:"mx-auto max-w-[1120px] px-4 py-3",children:[s.jsxs("a",{href:ve.PROPERTY_LIST,className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsx(ii,{size:20,strokeWidth:2.5,className:"opacity-80"}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:ve.COMMUNITY_WALL_MVP,className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsxs("svg",{className:"size-5 opacity-80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),s.jsx("span",{children:""})]}),s.jsxs("a",{href:ve.UAG,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-xl px-4 py-3 text-[15px] font-bold text-brand-700 transition-all hover:bg-brand-50",onClick:()=>r(!1),children:[s.jsxs("svg",{className:"size-5 opacity-80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),s.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),s.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),s.jsx("span",{children:""})]})]})})]}),s.jsx("div",{className:"relative border-b border-brand-100/50 bg-brand-50",children:s.jsx("div",{className:"relative z-10 mx-auto max-w-[1120px] px-4 pb-6 pt-24",children:s.jsxs("div",{className:"relative mx-auto max-w-3xl",children:[s.jsxs("div",{className:"pointer-events-none absolute right-[5%] top-[-44px] z-0 animate-float select-none md:right-[10%] md:animate-float-desktop",children:[s.jsxs("div",{className:"absolute bottom-[92%] right-[55%] w-[260px] origin-bottom-right animate-fadeIn whitespace-normal rounded-2xl rounded-br-none border-2 border-brand-100 bg-white px-5 py-2 shadow-lg md:bottom-[94%] md:right-[65%] md:w-auto md:max-w-none md:whitespace-nowrap md:py-3",children:[s.jsxs("p",{className:"text-left text-[11px] font-bold leading-relaxed text-ink-700 md:text-sm",children:[" ",s.jsx("span",{className:"font-black text-brand-700",children:""}),""]}),s.jsx("div",{className:"absolute -bottom-2.5 right-3 size-5 rotate-45 border-b-2 border-r-2 border-brand-100 bg-white"})]}),s.jsx("div",{className:"relative z-10 size-20 md:size-24",children:s.jsxs("svg",{viewBox:"0 0 200 240",className:"size-full drop-shadow-sm",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"#00385a",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"#00385a",strokeWidth:"6",fill:"#F6F9FF",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"#00385a",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"#00385a",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 55 130 L 35 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 145 130 L 165 100",stroke:"#00385a",strokeWidth:"5",fill:"none",strokeLinecap:"round"})]})})]}),s.jsx("div",{className:"group relative z-20",children:s.jsxs("div",{className:"flex h-[60px] items-center rounded-full border border-brand-100 bg-white pl-[28px] pr-2 shadow-[0_8px_30px_rgba(0,56,90,0.08)] transition-all duration-300 focus-within:border-brand-300 focus-within:ring-4 focus-within:ring-brand-50 group-hover:shadow-[0_12px_40px_rgba(0,56,90,0.12)]",children:[s.jsx("div",{className:"pr-4 text-gray-400 transition-colors group-focus-within:text-gray-600",children:s.jsx(Zr,{size:22,strokeWidth:2.5})}),s.jsx("input",{type:"text",placeholder:"...",className:"size-full bg-transparent text-lg font-bold text-gray-700 outline-none placeholder:font-medium placeholder:text-gray-400"}),s.jsx("button",{className:"flex h-[46px] items-center justify-center whitespace-nowrap rounded-full bg-brand-700 px-8 text-base font-bold tracking-wide text-white shadow-md transition-colors hover:bg-brand-600 hover:shadow-lg active:translate-y-px",children:""})]})}),s.jsx("div",{className:"relative z-10 mt-6 grid grid-cols-3 gap-2",children:["","",""].map(n=>{const i=(l=>l===""?ve.COMMUNITY_WALL_MVP:l===""?ve.UAG:"#")(n),o=n===""?"_blank":void 0;return s.jsx("a",{href:i,target:o,rel:o?"noopener noreferrer":void 0,className:"flex items-center justify-center rounded-2xl border border-brand-700 bg-brand-700 py-3 text-lg font-bold tracking-wide text-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-md active:scale-[0.98]",children:n},n)})})]})})})]})}function Hh({animated:e=!0}){const[t,r]=m.useState(0);m.useEffect(()=>{if(!e)return;const l=setInterval(()=>{r(c=>(c+1)%6)},2500);return()=>clearInterval(l)},[e]);const a=(()=>{switch(t){case 0:return{leftArm:"M 55 130 L 25 100",rightArm:"M 145 130 L 175 90",eyeY:125,mouthCurve:"smile"};case 1:return{leftArm:"M 55 130 L 30 130",rightArm:"M 145 130 L 170 130",eyeY:123,eyeSize:6,mouthCurve:"wow"};case 2:return{leftArm:"M 55 130 L 45 150",rightArm:"M 145 130 L 155 145",eyeY:125,mouthCurve:"focused"};case 3:return{leftArm:"M 55 130 L 30 105",rightArm:"M 145 130 L 170 105",eyeY:124,mouthCurve:"hopeful"};case 4:return{leftArm:"M 55 130 L 20 95",rightArm:"M 145 130 L 180 95",eyeY:122,mouthCurve:"happy",bounce:!0};case 5:return{leftArm:"M 55 130 L 25 120",rightArm:"M 145 130 L 175 120",eyeY:125,mouthCurve:"proud"};default:return{leftArm:"M 55 130 L 25 110",rightArm:"M 145 130 L 175 110",eyeY:125,mouthCurve:"smile"}}})(),i=a.eyeSize||4,o=()=>{switch(a.mouthCurve){case"smile":return s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"wow":return s.jsx("ellipse",{cx:"100",cy:"148",rx:"6",ry:"8",stroke:"currentColor",strokeWidth:"3",fill:"none"});case"focused":return s.jsx("path",{d:"M 92 145 Q 100 152 108 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"hopeful":return s.jsx("path",{d:"M 90 144 Q 100 156 110 144",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"happy":return s.jsx("path",{d:"M 85 142 Q 100 165 115 142",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});case"proud":return s.jsx("path",{d:"M 88 145 Q 100 158 112 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"});default:return s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"})}};return s.jsxs("svg",{viewBox:"0 0 200 240",className:`size-full text-brand drop-shadow-sm transition-transform duration-500 ${e?"hover:scale-105":""} ${a.bounce?"animate-bounce":""}`,children:[t===4&&s.jsxs(s.Fragment,{children:[s.jsx("text",{x:"25",y:"70",className:"animate-ping text-xl",fill:"#FF6B9D",children:""}),s.jsx("text",{x:"165",y:"75",className:"animate-ping text-xl",style:{animationDelay:"0.3s"},fill:"#FF6B9D",children:""})]}),s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:t===4?"animate-pulse":""}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),t===1?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 75 105 Q 85 98 95 105",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 105 105 Q 115 98 125 105",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):t===2?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 108 Q 85 105 92 109",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 107 Q 115 104 122 109",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):t===3?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 76 108 Q 85 103 94 108",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 106 108 Q 115 103 124 108",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}):s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),s.jsx("circle",{cx:"85",cy:a.eyeY,r:i,stroke:"currentColor",strokeWidth:"3",fill:t===4?"currentColor":"none",className:"transition-all duration-300"}),s.jsx("circle",{cx:"115",cy:a.eyeY,r:i,stroke:"currentColor",strokeWidth:"3",fill:t===4?"currentColor":"none",className:"transition-all duration-300"}),t===4&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M 78 122 Q 85 128 92 122",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 122 Q 115 128 122 122",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round"})]}),o(),s.jsx("path",{d:a.leftArm,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:a.rightArm,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:t%2===0?"M 85 180 L 85 215 L 75 215":"M 85 180 L 80 215 L 70 212",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300"}),s.jsx("path",{d:t%2===0?"M 115 180 L 115 215 L 125 215":"M 115 180 L 120 215 L 130 212",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-all duration-300"}),t===5&&s.jsxs("g",{className:"animate-pulse",children:[s.jsx("circle",{cx:"175",cy:"100",r:"8",stroke:"#FFB800",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 175 108 L 175 130 M 172 120 L 178 120 M 172 125 L 178 125",stroke:"#FFB800",strokeWidth:"3",fill:"none",strokeLinecap:"round"})]})]})}const Oi=[{id:"01",title:"",desc:"",icon:es},{id:"02",title:"",desc:"",icon:wd},{id:"03",title:"",desc:"",icon:al},{id:"04",title:"",desc:"",icon:jd},{id:"05",title:"",desc:"",icon:Nd},{id:"06",title:"",desc:"",icon:_d}],Wh=[{id:"J",name:"J*** ",rating:5,tags:["#/"],content:""},{id:"W",name:"W*** ",rating:4,tags:["#"],content:""},{id:"L",name:"L*** ",rating:4,tags:["#/"],content:""},{id:"A",name:"A*** ",rating:5,tags:["#/"],content:""},{id:"H",name:"H*** ",rating:3,tags:["#/"],content:""},{id:"K",name:"K*** ",rating:4,tags:["#/"],content:""}],Vh=[{id:1,image:"https://images.unsplash.com/photo-1600585154526-990dced4db0d?q=80&w=1600&auto=format&fit=crop",badge:" 5 ",title:"",tags:["34.2 ","3  2 ",""],price:"1,288",location:"  ",reviews:[{avatar:"A",name:"",role:"3",tag:"",text:""},{avatar:"B",name:"",role:"",tag:"",text:""}]},{id:2,image:"https://images.unsplash.com/photo-1575517111478-7f6afd0973db?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["28.6 ","2  2 ",""],price:"1,052",location:"  ",reviews:[{avatar:"C",name:"",role:"5",tag:"",text:""},{avatar:"D",name:"",role:"",tag:"",text:" 3 "}]},{id:3,image:"https://images.unsplash.com/photo-1515263487990-61b07816b324?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["22.1 ","2  1 ",""],price:"838",location:"  ",reviews:[{avatar:"E",name:"",role:"",tag:"",text:" 6 "},{avatar:"F",name:"",role:"",tag:"",text:""}]},{id:4,image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["36.8 ","3  2 ",""],price:"1,560",location:"  ",reviews:[{avatar:"G",name:"",role:"",tag:"",text:""},{avatar:"H",name:"",role:"",tag:"",text:" 2 "}]},{id:5,image:"https://images.unsplash.com/photo-1501183638710-841dd1904471?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["27.4 ","2  2 ",""],price:"968",location:"  ",reviews:[{avatar:"I",name:"",role:"",tag:"",text:""},{avatar:"J",name:"",role:"",tag:"",text:""}]},{id:6,image:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1600&auto=format&fit=crop",badge:"",title:"",tags:["24.9 ","2  1 ",""],price:"898",location:"  ",reviews:[{avatar:"K",name:"",role:"",tag:"",text:""},{avatar:"L",name:"",role:"",tag:"",text:""}]}];function Yl(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Yl(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zh(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Yl(e))&&(n&&(n+=" "),n+=t);return n}const Yh=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},Kh=(e,t)=>({classGroupId:e,validator:t}),Kl=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),tn="-",Pi=[],Qh="arbitrary..",qh=e=>{const t=Xh(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Jh(o);const l=o.split(tn),c=l[0]===""&&l.length>1?1:0;return Ql(l,c,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=n[o],d=r[o];return c?d?Yh(d,c):c:d||Pi}return r[o]||Pi}}},Ql=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],i=r.nextPart.get(a);if(i){const d=Ql(e,t+1,i);if(d)return d}const o=r.validators;if(o===null)return;const l=t===0?e.join(tn):e.slice(t).join(tn),c=o.length;for(let d=0;d<c;d++){const h=o[d];if(h.validator(l))return h.classGroupId}},Jh=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Qh+n:void 0})(),Xh=e=>{const{theme:t,classGroups:r}=e;return ef(r,t)},ef=(e,t)=>{const r=Kl();for(const n in e){const a=e[n];Oa(a,r,n,t)}return r},Oa=(e,t,r,n)=>{const a=e.length;for(let i=0;i<a;i++){const o=e[i];tf(o,t,r,n)}},tf=(e,t,r,n)=>{if(typeof e=="string"){sf(e,t,r);return}if(typeof e=="function"){rf(e,t,r,n);return}nf(e,t,r,n)},sf=(e,t,r)=>{const n=e===""?t:ql(t,e);n.classGroupId=r},rf=(e,t,r,n)=>{if(af(e)){Oa(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Kh(r,e))},nf=(e,t,r,n)=>{const a=Object.entries(e),i=a.length;for(let o=0;o<i;o++){const[l,c]=a[o];Oa(c,ql(t,l),r,n)}},ql=(e,t)=>{let r=e;const n=t.split(tn),a=n.length;for(let i=0;i<a;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=Kl(),r.nextPart.set(o,l)),r=l}return r},af=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,of=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const a=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return a(i,o),o},set(i,o){i in r?r[i]=o:a(i,o)}}},la="!",zi=":",lf=[],Di=(e,t,r,n,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:a}),cf=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=a=>{const i=[];let o=0,l=0,c=0,d;const h=a.length;for(let b=0;b<h;b++){const v=a[b];if(o===0&&l===0){if(v===zi){i.push(a.slice(c,b)),c=b+1;continue}if(v==="/"){d=b;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const u=i.length===0?a:a.slice(c);let x=u,f=!1;u.endsWith(la)?(x=u.slice(0,-1),f=!0):u.startsWith(la)&&(x=u.slice(1),f=!0);const g=d&&d>c?d-c:void 0;return Di(i,f,x,g)};if(t){const a=t+zi,i=n;n=o=>o.startsWith(a)?i(o.slice(a.length)):Di(lf,!1,o,void 0,!0)}if(r){const a=n;n=i=>r({className:i,parseClassName:a})}return n},df=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let a=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",c=t.has(o);l||c?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(o)):a.push(o)}return a.length>0&&(a.sort(),n.push(...a)),n}},uf=e=>({cache:of(e.cacheSize),parseClassName:cf(e),sortModifiers:df(e),...qh(e)}),mf=/\s+/,hf=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],l=e.trim().split(mf);let c="";for(let d=l.length-1;d>=0;d-=1){const h=l[d],{isExternal:u,modifiers:x,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:b}=r(h);if(u){c=h+(c.length>0?" "+c:c);continue}let v=!!b,p=n(v?g.substring(0,b):g);if(!p){if(!v){c=h+(c.length>0?" "+c:c);continue}if(p=n(g),!p){c=h+(c.length>0?" "+c:c);continue}v=!1}const w=x.length===0?"":x.length===1?x[0]:i(x).join(":"),k=f?w+la:w,N=k+p;if(o.indexOf(N)>-1)continue;o.push(N);const T=a(p,v);for(let S=0;S<T.length;++S){const C=T[S];o.push(k+C)}c=h+(c.length>0?" "+c:c)}return c},ff=(...e)=>{let t=0,r,n,a="";for(;t<e.length;)(r=e[t++])&&(n=Jl(r))&&(a&&(a+=" "),a+=n);return a},Jl=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Jl(e[n]))&&(r&&(r+=" "),r+=t);return r},pf=(e,...t)=>{let r,n,a,i;const o=c=>{const d=t.reduce((h,u)=>u(h),e());return r=uf(d),n=r.cache.get,a=r.cache.set,i=l,l(c)},l=c=>{const d=n(c);if(d)return d;const h=hf(c,r);return a(c,h),h};return i=o,(...c)=>i(ff(...c))},xf=[],Ie=e=>{const t=r=>r[e]||xf;return t.isThemeGetter=!0,t},Xl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ec=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gf=/^\d+\/\d+$/,bf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,wf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Is=e=>gf.test(e),ue=e=>!!e&&!Number.isNaN(Number(e)),Ft=e=>!!e&&Number.isInteger(Number(e)),Tn=e=>e.endsWith("%")&&ue(e.slice(0,-1)),Ct=e=>bf.test(e),Nf=()=>!0,_f=e=>vf.test(e)&&!yf.test(e),tc=()=>!1,kf=e=>wf.test(e),Sf=e=>jf.test(e),Ef=e=>!q(e)&&!J(e),Tf=e=>Xs(e,nc,tc),q=e=>Xl.test(e),is=e=>Xs(e,ac,_f),Cn=e=>Xs(e,Mf,ue),Fi=e=>Xs(e,sc,tc),Cf=e=>Xs(e,rc,Sf),Or=e=>Xs(e,ic,kf),J=e=>ec.test(e),tr=e=>er(e,ac),If=e=>er(e,Rf),$i=e=>er(e,sc),Af=e=>er(e,nc),Lf=e=>er(e,rc),Pr=e=>er(e,ic,!0),Xs=(e,t,r)=>{const n=Xl.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},er=(e,t,r=!1)=>{const n=ec.exec(e);return n?n[1]?t(n[1]):r:!1},sc=e=>e==="position"||e==="percentage",rc=e=>e==="image"||e==="url",nc=e=>e==="length"||e==="size"||e==="bg-size",ac=e=>e==="length",Mf=e=>e==="number",Rf=e=>e==="family-name",ic=e=>e==="shadow",Of=()=>{const e=Ie("color"),t=Ie("font"),r=Ie("text"),n=Ie("font-weight"),a=Ie("tracking"),i=Ie("leading"),o=Ie("breakpoint"),l=Ie("container"),c=Ie("spacing"),d=Ie("radius"),h=Ie("shadow"),u=Ie("inset-shadow"),x=Ie("text-shadow"),f=Ie("drop-shadow"),g=Ie("blur"),b=Ie("perspective"),v=Ie("aspect"),p=Ie("ease"),w=Ie("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...N(),J,q],S=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],_=()=>[J,q,c],B=()=>[Is,"full","auto",..._()],j=()=>[Ft,"none","subgrid",J,q],E=()=>["auto",{span:["full",Ft,J,q]},Ft,J,q],O=()=>[Ft,"auto",J,q],L=()=>["auto","min","max","fr",J,q],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",..._()],$=()=>[Is,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],R=()=>[e,J,q],ee=()=>[...N(),$i,Fi,{position:[J,q]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",Af,Tf,{size:[J,q]}],re=()=>[Tn,tr,is],G=()=>["","none","full",d,J,q],te=()=>["",ue,tr,is],ie=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[ue,Tn,$i,Fi],K=()=>["","none",g,J,q],de=()=>["none",ue,J,q],H=()=>["none",ue,J,q],ae=()=>[ue,J,q],he=()=>[Is,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ct],breakpoint:[Ct],color:[Nf],container:[Ct],"drop-shadow":[Ct],ease:["in","out","in-out"],font:[Ef],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ct],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ct],shadow:[Ct],spacing:["px",ue],text:[Ct],"text-shadow":[Ct],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Is,q,J,v]}],container:["container"],columns:[{columns:[ue,q,J,l]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[Ft,"auto",J,q]}],basis:[{basis:[Is,"full","auto",l,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ue,Is,"auto","initial","none",q]}],grow:[{grow:["",ue,J,q]}],shrink:[{shrink:["",ue,J,q]}],order:[{order:[Ft,"first","last","none",J,q]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[l,"screen",...$()]}],"min-w":[{"min-w":[l,"screen","none",...$()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",r,tr,is]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,J,Cn]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Tn,q]}],"font-family":[{font:[If,q,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,J,q]}],"line-clamp":[{"line-clamp":[ue,"none",J,Cn]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",J,q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",J,q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[ue,"from-font","auto",J,is]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[ue,"auto",J,q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",J,q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",J,q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ft,J,q],radial:["",J,q],conic:[Ft,J,q]},Lf,Cf]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ie(),"hidden","none"]}],"divide-style":[{divide:[...ie(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ue,J,q]}],"outline-w":[{outline:["",ue,tr,is]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",h,Pr,Or]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",u,Pr,Or]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[ue,is]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",x,Pr,Or]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[ue,J,q]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ue]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[J,q]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[ue]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",J,q]}],filter:[{filter:["","none",J,q]}],blur:[{blur:K()}],brightness:[{brightness:[ue,J,q]}],contrast:[{contrast:[ue,J,q]}],"drop-shadow":[{"drop-shadow":["","none",f,Pr,Or]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",ue,J,q]}],"hue-rotate":[{"hue-rotate":[ue,J,q]}],invert:[{invert:["",ue,J,q]}],saturate:[{saturate:[ue,J,q]}],sepia:[{sepia:["",ue,J,q]}],"backdrop-filter":[{"backdrop-filter":["","none",J,q]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[ue,J,q]}],"backdrop-contrast":[{"backdrop-contrast":[ue,J,q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ue,J,q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ue,J,q]}],"backdrop-invert":[{"backdrop-invert":["",ue,J,q]}],"backdrop-opacity":[{"backdrop-opacity":[ue,J,q]}],"backdrop-saturate":[{"backdrop-saturate":[ue,J,q]}],"backdrop-sepia":[{"backdrop-sepia":["",ue,J,q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",J,q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ue,"initial",J,q]}],ease:[{ease:["linear","initial",p,J,q]}],delay:[{delay:[ue,J,q]}],animate:[{animate:["none",w,J,q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,J,q]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:de()}],"rotate-x":[{"rotate-x":de()}],"rotate-y":[{"rotate-y":de()}],"rotate-z":[{"rotate-z":de()}],scale:[{scale:H()}],"scale-x":[{"scale-x":H()}],"scale-y":[{"scale-y":H()}],"scale-z":[{"scale-z":H()}],"scale-3d":["scale-3d"],skew:[{skew:ae()}],"skew-x":[{"skew-x":ae()}],"skew-y":[{"skew-y":ae()}],transform:[{transform:[J,q,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:he()}],"translate-x":[{"translate-x":he()}],"translate-y":[{"translate-y":he()}],"translate-z":[{"translate-z":he()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",J,q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",J,q]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[ue,tr,is,Cn]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Pf=pf(Of);function zf(...e){return Pf(Zh(e))}const Df=(e,t)=>{const r=e.split(".").map(a=>+a||0),n=t.split(".").map(a=>+a||0);for(let a=0;a<3;a++){const i=r[a]??0,o=n[a]??0;if(i<o)return-1;if(i>o)return 1}return 0},Pa=U.forwardRef(({className:e,variant:t="default",children:r,...n},a)=>{const i="transition-all duration-200 bg-white border border-border-light",o={default:"mh-card p-4 md:p-6",hero:"mh-card mh-card--hero p-6 md:p-10 bg-gradient-to-br from-white to-brand-50",ai:"mh-ai-card"};return s.jsx("section",{ref:a,className:zf(i,o[t],e),...n,children:r})});Pa.displayName="HomeCard";const oc=U.memo(({index:e,title:t,desc:r,icon:n,isLast:a})=>s.jsxs("div",{className:"group relative flex cursor-default items-center gap-3 rounded-xl py-2 pl-2 pr-1 transition-colors duration-300 hover:bg-bg-soft md:flex-col md:items-center md:gap-4 md:p-2",children:[s.jsxs("div",{className:"relative z-10 shrink-0",children:[s.jsx("div",{className:"flex size-10 items-center justify-center rounded-full border-2 border-border-light bg-white text-text-muted shadow-sm transition-all duration-300 group-hover:scale-110 group-hover:border-brand group-hover:text-brand md:size-12",children:s.jsx(n,{size:18,className:"md:h-5 md:w-5"})}),s.jsx("div",{className:"absolute -right-1 -top-0.5 flex size-5 items-center justify-center rounded-full bg-brand text-[10px] font-bold text-white ring-2 ring-white",children:e+1})]}),s.jsxs("div",{className:"flex-1 md:text-center",children:[s.jsx("h4",{className:"mb-0.5 text-sm font-black text-text-ink transition-colors group-hover:text-brand md:mb-1 md:text-base",children:t}),s.jsx("p",{className:"text-[11px] font-medium leading-relaxed text-text-muted md:text-xs",children:r})]}),s.jsx("div",{className:"ml-auto text-border-light transition-colors group-hover:text-brand md:hidden",children:!a&&s.jsx(kd,{size:14,className:"opacity-0 group-hover:opacity-20"})})]}));oc.displayName="HeroStep";function Ff(){return s.jsxs(Pa,{variant:"hero",className:"group/container relative overflow-hidden",children:[s.jsxs("div",{className:"relative z-10 mb-10 flex flex-col items-center gap-6 md:flex-row md:gap-10",children:[s.jsx("div",{className:"relative h-32 w-28 shrink-0",children:s.jsx(Hh,{})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsxs("div",{className:"border-[var(--brand)]/20 mb-3 inline-flex items-center gap-2 rounded-full border bg-[var(--bg-page)] px-3 py-1 text-xs font-bold text-[var(--brand)]",children:[s.jsx(Sd,{size:14}),s.jsx("span",{children:""})]}),s.jsx("h3",{className:"mb-3 text-2xl font-black tracking-tight text-[var(--brand)] md:text-3xl",children:""}),s.jsxs("p",{className:"max-w-2xl text-sm font-medium leading-relaxed text-[var(--text-secondary)] md:text-base",children:[" ",s.jsx("br",{className:"hidden md:block"}),""]})]}),s.jsxs("a",{href:"/#policy",className:"hidden shrink-0 items-center gap-2 rounded-xl border-2 border-[var(--brand)] bg-white px-5 py-2.5 text-sm font-bold text-[var(--brand)] shadow-sm transition-all hover:bg-[var(--brand)] hover:text-white md:flex",children:[" ",s.jsx(il,{size:16})]})]}),s.jsxs("div",{className:"relative mt-2 pl-2 md:mt-4 md:pl-0",children:[s.jsx("div",{className:"absolute left-0 top-8 -z-0 hidden h-0.5 w-full bg-border-light md:block"}),s.jsx("div",{className:"absolute inset-y-0 left-7 -z-0 w-0.5 bg-border-light md:hidden"}),s.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-6 md:gap-2",children:Oi.map((e,t)=>s.jsx(oc,{...e,index:t,isLast:t===Oi.length-1},e.id))})]})]})}function $f(){const[e,t]=m.useState(0);m.useEffect(()=>{const a=setInterval(()=>{t(i=>(i+1)%3)},3e3);return()=>clearInterval(a)},[]);const n=(()=>{switch(e){case 0:return{left:"M 55 130 L 35 145",right:"M 145 130 L 165 145"};case 1:return{left:"M 55 130 L 35 145",right:"M 145 130 L 175 100"};case 2:return{left:"M 55 130 L 25 115",right:"M 145 130 L 175 115"};default:return{left:"M 55 130 L 35 145",right:"M 145 130 L 165 145"}}})();return s.jsxs("div",{className:"relative mb-4 h-40 w-32 text-brand",children:[s.jsx("div",{className:"absolute left-1/2 top-1/2 -z-10 size-24 -translate-x-1/2 -translate-y-1/2 rounded-full bg-brand-100/50 blur-2xl"}),s.jsxs("svg",{viewBox:"0 0 200 240",className:"size-full animate-float drop-shadow-sm",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"100",cy:"85",r:"4",fill:"currentColor"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:n.left,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:n.right,stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",className:"transition-all duration-500"}),s.jsx("path",{d:"M 85 180 L 85 215 L 75 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 115 180 L 115 215 L 125 215",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}const Ui={:{reviewCount:28,rating:4.3},:{reviewCount:45,rating:4.1},:{reviewCount:67,rating:3.9},:{reviewCount:19,rating:4.5},:{reviewCount:32,rating:4.2},:{reviewCount:24,rating:4.4},default:{reviewCount:12,rating:4.2}};function Uf(e){return Ui[e]||Ui.default}function Bf({name:e,topic:t="",reviewCount:r,rating:n}){const a=Uf(e),i=r??(a==null?void 0:a.reviewCount)??10,o=n??(a==null?void 0:a.rating)??4;return s.jsxs("a",{href:"/maihouses/community-wall_mvp.html",target:"_blank",rel:"noopener noreferrer",className:"group mt-3 block rounded-xl border-2 border-brand-100 bg-gradient-to-br from-brand-50 to-white p-4 transition-all hover:border-brand-300 hover:shadow-md",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-brand-100",children:s.jsx(ol,{size:16,className:"text-brand-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-black text-brand-700",children:e}),s.jsx("p",{className:"text-ink-500 text-[11px] font-medium",children:""})]})]}),s.jsx(dn,{size:16,className:"text-brand-400 transition-colors group-hover:text-brand-600"})]}),s.jsxs("p",{className:"mb-3 line-clamp-2 text-xs font-medium text-ink-600",children:[" ",t]}),s.jsxs("div",{className:"text-ink-500 flex items-center gap-4 text-[11px]",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(un,{size:12,className:"fill-amber-500 text-amber-500"}),s.jsx("span",{className:"font-bold text-ink-700",children:o})]}),s.jsxs("span",{children:[i," "]})]}),s.jsx("div",{className:"mt-3 rounded-lg bg-brand-700 px-3 py-2 text-center text-xs font-bold text-white transition-colors group-hover:bg-brand-600",children:" "})]})}const Bi={"MH-2024-001":{title:" 3",price:"2,180",size:"35.8",rooms:"322",address:"16812",highlight:"3"},"MH-2024-002":{title:" ",price:"3,280",size:"52.6",rooms:"422",address:"8818",highlight:""},"MH-2024-003":{title:" ",price:"1,480",size:"26.2",rooms:"211",address:"668",highlight:""},"MH-2024-004":{title:" ",price:"1,980",size:"32.1",rooms:"321",address:"18815",highlight:""},default:{title:"",price:"",size:"-",rooms:"-",address:"",highlight:""}};function Gf(e){return Bi[e]??Bi.default??{title:"",price:"",size:"-",rooms:"-",address:"",highlight:""}}function Hf({community:e,propertyId:t}){const r=Gf(t);return s.jsxs("a",{href:"/property.html",target:"_blank",rel:"noopener noreferrer",className:"group mt-3 block max-w-sm rounded-xl border-2 border-orange-100 bg-gradient-to-br from-orange-50 to-white p-4 transition-all hover:border-orange-300 hover:shadow-md",children:[s.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx(ar,{size:14,className:"text-orange-500"}),s.jsx("span",{className:"text-ink-500 text-[11px] font-medium",children:e})]}),s.jsx("p",{className:"text-ink-800 text-sm font-bold transition-colors group-hover:text-orange-600",children:r.title})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.highlight&&s.jsx("span",{className:"whitespace-nowrap rounded-full bg-orange-500 px-2 py-0.5 text-[10px] font-medium text-white",children:r.highlight}),s.jsx(dn,{size:14,className:"text-orange-400 transition-colors group-hover:text-orange-600"})]})]}),s.jsxs("div",{className:"mb-2 grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(mn,{size:12,className:"text-orange-400"}),s.jsx("span",{className:"font-bold text-orange-600",children:r.price})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-ink-600",children:[s.jsx(Ed,{size:12,className:"text-ink-400"}),s.jsx("span",{children:r.size})]})]}),s.jsxs("div",{className:"text-ink-500 flex items-center gap-1 text-[11px]",children:[s.jsx(yr,{size:11}),s.jsx("span",{children:r.address})]}),s.jsx("div",{className:"mt-1 text-[11px] text-ink-400",children:r.rooms}),s.jsx("div",{className:"mt-3 border-t border-orange-100 pt-2 text-center text-[11px] font-medium text-orange-500 opacity-0 transition-opacity group-hover:opacity-100",children:" "})]})}function Wf(e){const t=/\[\[:([^:]+):([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;){const a=n[1],i=n[2];a&&i&&r.push({name:a.trim(),topic:i.trim()})}return r}function Vf(e){const t=/\[\[:([^:]+):([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;){const a=n[1],i=n[2];a&&i&&r.push({community:a.trim(),propertyId:i.trim()})}return r}function Zf(e){const t=/\[\[:([^\]]+)\]\]/g,r=[];let n;for(;(n=t.exec(e))!==null;)n[1]&&r.push(n[1].trim());return r}function Yf(e){return e.replace(/\[\[:[^:]+:[^\]]+\]\]/g,"").replace(/\[\[:[^:]+:[^\]]+\]\]/g,"").replace(/\[\[:[^\]]+\]\]/g,"").trim()}function Kf({description:e}){return s.jsxs("div",{className:"my-3 rounded-r-lg border-l-4 border-orange-300 bg-gradient-to-r from-orange-50/80 to-amber-50/50 p-3 italic text-gray-600",children:[s.jsx("span",{className:"mr-2 text-lg",children:""}),s.jsx("span",{className:"leading-relaxed",children:e})]})}function Qf({role:e,content:t,timestamp:r}){const n=e==="assistant"?Wf(t):[],a=e==="assistant"?Vf(t):[],i=e==="assistant"?Zf(t):[],o=e==="assistant"?Yf(t):t;return s.jsx("div",{className:`flex ${e==="user"?"justify-end":"justify-start"} animate-fadeIn`,children:s.jsxs("div",{className:`max-w-[85%] rounded-2xl px-5 py-3.5 text-[15px] font-medium leading-relaxed shadow-sm ${e==="user"?"rounded-br-sm bg-brand-700 text-white":"rounded-bl-sm border border-brand-100 bg-white text-ink-900"}`,children:[s.jsx("div",{className:"whitespace-pre-wrap",children:o}),i.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:i.map((l,c)=>s.jsx(Kf,{description:l},`scenario-${c}`))}),n.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:n.map((l,c)=>s.jsx(Bf,{name:l.name,topic:l.topic},`community-${c}`))}),a.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:a.map((l,c)=>s.jsx(Hf,{community:l.community,propertyId:l.propertyId},`property-${c}`))}),r&&s.jsx("div",{className:`mt-1.5 text-[11px] font-bold ${e==="user"?"text-brand-300":"text-brand-600/60"} text-right`,children:new Date(r).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})})]})})}function lc(){const[e,t]=m.useState([]),[r,n]=m.useState(""),[a,i]=m.useState(!1),[o,l]=m.useState(null),[c,d]=m.useState(Ii()),h=m.useRef(null),x=e.filter(g=>g.role==="user").length>=3?Mm:Lm;m.useEffect(()=>{Om();const g=localStorage.getItem("mai-last-chat"),b=new Date().toDateString();if(!g||g!==b){const v=gh();v&&l(v);const p=setTimeout(()=>{t([{role:"assistant",content:v||"",timestamp:new Date().toISOString()}]),localStorage.setItem("mai-last-chat",b)},1500);return()=>clearTimeout(p)}},[]),m.useEffect(()=>{const g=new Date,b=g.getHours(),v=g.getMinutes();if(b===22&&v<30&&!localStorage.getItem("mai-goodnight-"+g.toDateString())&&e.length>0){const w=setTimeout(()=>{t(k=>[...k,{role:"assistant",content:` 
...`,timestamp:new Date().toISOString()}]),localStorage.setItem("mai-goodnight-"+g.toDateString(),"1")},5e3);return()=>clearTimeout(w)}},[e.length]),m.useEffect(()=>{d(Ii())},[e.length]),m.useEffect(()=>{const g=()=>{th()};return window.addEventListener("beforeunload",g),()=>window.removeEventListener("beforeunload",g)},[]),m.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[e]);const f=async(g=r)=>{if(!g.trim()||a)return;g===""&&Lh(!0);const b={role:"user",content:g.trim(),timestamp:new Date().toISOString()};t(p=>[...p,b]),n(""),i(!0);const v={role:"assistant",content:"",timestamp:new Date().toISOString()};t(p=>[...p,v]);try{const p=await jr([...e,b],w=>{t(k=>{const N=[...k],T=N[N.length-1];return T&&T.role==="assistant"&&(T.content+=w),N})})}catch(p){console.error(p),t(w=>{const k=[...w],N=k[k.length-1];return N&&(N.content=""),k})}finally{i(!1)}};return s.jsxs("section",{className:"group relative isolate overflow-hidden rounded-[24px] border border-brand-100 bg-gradient-to-br from-white via-[#F8FAFC] to-[#00385a08] shadow-[0_8px_24px_rgba(0,56,90,0.06)] transition-all duration-300 hover:shadow-[0_12px_32px_rgba(0,56,90,0.1)]",children:[s.jsx("div",{className:"pointer-events-none absolute -right-24 -top-24 size-80 rounded-full bg-brand-100/30 mix-blend-multiply blur-3xl"}),s.jsx("div",{className:"pointer-events-none absolute -bottom-24 -left-24 size-96 rounded-full bg-brand-700/5 mix-blend-multiply blur-3xl"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[linear-gradient(to_right,#00385a08_1px,transparent_1px),linear-gradient(to_bottom,#00385a08_1px,transparent_1px)] [background-size:24px_24px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)]"}),s.jsx("div",{className:"relative z-20 h-1.5 w-full bg-gradient-to-r from-brand-700 via-brand-600 to-brand-500"}),s.jsxs("div",{className:"relative z-10 p-5 md:p-8 md:pt-6",children:[s.jsxs("div",{className:"mb-3 flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"relative flex size-12 shrink-0 items-center justify-center overflow-hidden rounded-2xl border border-brand-100 bg-white/80 text-brand-700 shadow-sm backdrop-blur-sm transition-transform duration-300 group-hover:scale-105",children:s.jsx(Pt,{size:26,strokeWidth:2})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2 text-xl font-black tracking-tight text-brand-700",children:["MaiMai ",s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gradient-to-r from-brand-700 to-brand-600 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider text-white shadow-sm",children:[s.jsx(Na,{size:10})," v6.0"]})]}),s.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[s.jsx("p",{className:"text-xs font-bold tracking-wide text-ink-600",children:" "}),s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-pink-200 bg-pink-50 px-2 py-0.5 text-[10px] font-bold text-pink-600",children:[s.jsx(_a,{size:10,fill:"currentColor"})," ",c.label," ",c.emoji]})]})]})]}),s.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:x.map(g=>s.jsx("button",{onClick:()=>f(g),className:"rounded-full border border-brand-100 bg-white px-3.5 py-1.5 text-xs font-bold text-brand-700 shadow-sm backdrop-blur-sm transition-all hover:border-brand-700 hover:bg-brand-700 hover:text-white hover:shadow-md active:scale-95",children:g},g))})]}),s.jsxs("div",{ref:h,className:"mb-4 flex h-[380px] flex-col gap-4 overflow-y-auto scroll-smooth rounded-2xl border border-brand-100/60 bg-white/50 p-5 shadow-inner backdrop-blur-md",role:"log","aria-live":"polite",children:[e.length===0?s.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center opacity-80",children:[s.jsx($f,{}),s.jsx("p",{className:"mb-2 text-base font-black text-brand-700",children:o?o.split("")[0]+"":" "}),s.jsx("p",{className:"mx-auto max-w-xs text-sm font-medium leading-relaxed text-ink-600",children:o?o.includes("")?o.split("").slice(1).join(""):"":s.jsxs(s.Fragment,{children:["",s.jsx("br",{}),""]})})]}):e.map((g,b)=>s.jsx(Qf,{role:g.role,content:g.content,timestamp:g.timestamp},b)),a&&s.jsx("div",{className:"flex animate-fadeIn justify-start",children:s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl rounded-bl-sm border border-brand-100 bg-white px-4 py-3 text-sm text-brand-600 shadow-sm",children:[s.jsx("span",{className:"font-bold",children:"..."}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("span",{className:"size-1.5 animate-[bounce_1.4s_infinite_ease-in-out_both] rounded-full bg-brand-500"}),s.jsx("span",{className:"size-1.5 animate-[bounce_1.4s_infinite_ease-in-out_both_0.2s] rounded-full bg-brand-500"}),s.jsx("span",{className:"size-1.5 animate-[bounce_1.4s_infinite_ease-in-out_both_0.4s] rounded-full bg-brand-500"})]})]})})]}),s.jsxs("div",{className:"group/input relative",children:[s.jsx("input",{type:"text",className:"w-full rounded-xl border-2 border-brand-100 bg-white/80 py-4 pl-5 pr-14 text-[15px] font-bold text-ink-900 shadow-sm backdrop-blur-sm transition-all placeholder:text-ink-400/80 hover:border-brand-300 focus:border-brand-500 focus:outline-none focus:ring-4 focus:ring-brand-50/50",placeholder:"...",value:r,onChange:g=>n(g.target.value),onKeyDown:g=>g.key==="Enter"&&!g.shiftKey&&f(),disabled:a}),s.jsx("button",{onClick:()=>f(),disabled:a||!r.trim(),className:"absolute inset-y-2 right-2 flex aspect-square items-center justify-center rounded-lg bg-brand-700 text-white shadow-md transition-all hover:-translate-y-0.5 hover:bg-brand-600 hover:shadow-lg active:translate-y-0 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 disabled:shadow-none disabled:hover:transform-none",children:s.jsx(Td,{size:20,strokeWidth:2.5,className:"-ml-0.5 translate-y-px"})})]})]})]})}const cc=U.memo(({id:e,name:t,rating:r,tags:n,content:a})=>s.jsxs("article",{className:"relative flex gap-3 rounded-2xl border border-[#E6EDF7] bg-white p-3.5 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)]",children:[s.jsx("div",{className:"flex size-[38px] shrink-0 items-center justify-center rounded-full border border-[#E6EDF7] bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-[15px] font-black text-[#00385a] shadow-[inset_0_1px_2px_rgba(255,255,255,0.8),0_2px_4px_rgba(0,56,90,0.05)]",children:e}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-1.5 text-[15px] font-black text-primary",children:t}),s.jsx("div",{className:"flex gap-0.5","aria-label":`${r} stars`,children:Array.from({length:5}).map((i,o)=>s.jsx("span",{className:`text-xs ${o<r?"text-[#00385a]":"text-[#E6EDF7]"}`,children:""},o))})]}),s.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:n.map(i=>s.jsx("span",{className:"rounded-md border border-[#E6EDF7] bg-[#F6F9FF] px-2 py-0.5 text-[11px] font-bold tracking-wide text-[#00385a]",children:i},i))}),s.jsx("p",{className:"text-justify text-[13px] font-medium leading-relaxed text-[#4B5563]",children:a})]})]}));cc.displayName="ReviewCard";function qf(){return s.jsxs(Pa,{className:"bg-white/96 border border-[#E6EDF7] p-3 shadow-[0_4px_20px_rgba(0,56,90,0.03)] backdrop-blur-md",children:[s.jsxs("div",{className:"relative mb-4 flex items-center justify-between overflow-hidden rounded-2xl bg-gradient-to-r from-[#00385a] to-[#005585] px-4 py-3 shadow-[0_2px_8px_rgba(0,56,90,0.15)]",children:[s.jsx("div",{className:"pointer-events-none absolute -right-6 -top-6 size-24 rounded-full bg-white/5 blur-2xl"}),s.jsxs("div",{className:"relative z-10 flex items-center gap-2.5",children:[s.jsx("div",{className:"size-1.5 rounded-full bg-[#E63946] shadow-[0_0_8px_rgba(230,57,70,0.6)]"}),s.jsx("h3",{className:"text-shadow-sm m-0 text-lg font-black tracking-wide text-white",children:""}),s.jsx("span",{className:"rounded-full border border-white/20 bg-white/95 px-2.5 py-0.5 text-[11px] font-bold text-[#00385a] shadow-sm backdrop-blur-sm",children:""})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Wh.map(e=>s.jsx(cc,{...e},e.id))}),s.jsxs("a",{className:"group relative mt-4 flex items-center gap-2.5 rounded-xl border border-[#E6EDF7] bg-gradient-to-b from-white to-[#F6F9FF] p-3.5 font-black text-[#00385a] no-underline transition-all duration-200 hover:border-[#00385a]/20 hover:shadow-[0_4px_12px_rgba(0,56,90,0.08)] active:translate-y-px lg:justify-center lg:text-center",href:"/maihouses/community-wall_mvp.html","aria-label":"",children:[s.jsx("span",{className:"text-[15px] tracking-wide transition-colors group-hover:text-[#004E7C] lg:mx-auto",children:""}),s.jsx("span",{className:"ml-auto rounded-lg bg-[#00385a] px-3 py-1.5 text-xs font-bold text-white shadow-sm transition-colors group-hover:bg-[#004E7C] lg:absolute lg:right-[14px] lg:top-1/2 lg:ml-0 lg:-translate-y-1/2",children:" "})]})]})}function Jf({property:e}){return s.jsxs("article",{className:"group relative isolate overflow-hidden rounded-2xl border border-[#E6EDF7] bg-white shadow-none transition-all duration-[180ms] ease-out hover:-translate-y-0.5 hover:border-[#1749d738] hover:shadow-[0_10px_26px_rgba(13,39,94,0.12)]",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(60%_60%_at_80%_-10%,rgba(23,73,215,0.12),transparent_60%)] opacity-80"}),s.jsxs("a",{href:`/property/${e.id}`,className:"relative block aspect-[4/3] overflow-hidden bg-[#e9ecf5]",children:[s.jsx("img",{src:e.image,alt:"",className:"cubic-bezier(0.2,0.65,0.2,1) block size-full scale-100 object-cover transition-transform duration-[600ms] group-hover:scale-105"}),s.jsx("span",{className:"absolute left-2.5 top-2.5 rounded-full bg-black/75 px-2 py-1 text-xs font-extrabold tracking-[0.2px] text-white shadow-[0_4px_10px_rgba(0,0,0,0.18)]",children:e.badge})]}),s.jsxs("div",{className:"p-3 pb-3.5",children:[s.jsx("div",{className:"my-0.5 mb-2 text-base font-extrabold leading-[1.35] tracking-[0.3px] text-primary lg:text-[21px]",children:e.title}),s.jsx("div",{className:"mb-1.5 flex flex-wrap items-center gap-2 text-[13px] text-[#6C7B91]",children:e.tags.map((t,r)=>s.jsx("span",{className:"duration-120 rounded-full border border-[#E6EDF7] bg-[#F6F9FF] px-2.5 py-0.5 font-extrabold text-[#2A2F3A] transition-all ease-out group-hover:-translate-y-px group-hover:shadow-[0_4px_10px_rgba(0,56,90,0.10)]",children:t},r))}),s.jsxs("div",{className:"my-2 mb-1 text-[19px] font-black tracking-[0.2px] text-[#111]",children:["NT$ ",e.price," "]}),s.jsx("div",{className:"text-[13px] text-[#6C7B91]",children:e.location}),s.jsxs("div",{className:"mt-2.5 rounded-xl border border-[#E6EDF7] bg-gradient-to-b from-[#F6F9FF] to-white px-3 py-2.5",children:[s.jsx("div",{className:"mb-2 flex items-center gap-2 text-[13px] font-black text-black/85 before:text-xs before:leading-none before:text-[#00385a] before:drop-shadow-[0_1px_0_rgba(0,56,90,0.12)] before:content-['']",children:""}),e.reviews.map((t,r)=>s.jsxs("div",{className:`flex items-start gap-2.5 py-2 ${r!==0?"border-t border-dashed border-black/10":""}`,children:[s.jsx("div",{className:"grid size-[30px] flex-none place-items-center rounded-full bg-gradient-to-b from-[#F2F5F8] to-[#E1E6EB] text-xs font-black text-[#00385a] shadow-[inset_0_0_0_1px_rgba(0,56,90,0.15)]",children:t.avatar}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"mb-0.5 flex items-center gap-1.5 text-xs text-black/60",children:[s.jsxs("span",{className:"font-black text-black/85",children:[t.name,"  ",t.role]}),s.jsx("span",{className:"inline-block size-1 rounded-full bg-black/20"}),s.jsx("span",{className:"rounded-full bg-[#00385a]/10 px-2 py-0.5 font-black text-[#00385a]",children:t.tag})]}),s.jsx("div",{className:"text-[13px] leading-[1.6] text-black/85",children:t.text})]})]},r)),s.jsx("button",{type:"button",className:"mt-2.5 w-full cursor-pointer rounded-xl border border-[#00385a]/30 bg-gradient-to-b from-white to-[#F5F7FA] px-3 py-2.5 text-[13px] font-black text-[#00385a] transition-all duration-150 ease-out hover:from-white hover:to-[#E8F0FF] hover:shadow-[0_6px_14px_rgba(0,56,90,0.18)] active:translate-y-px",children:""})]})]})]})}function Xf(){return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"my-[18px] mb-3 flex items-center gap-2.5","aria-label":"",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-[#E6EDF7] bg-gradient-to-b from-white to-[#F6F9FF] px-3 py-1.5 text-sm font-black tracking-[0.2px] text-[#00385a]",children:[s.jsx("span",{className:"grid size-[18px] place-items-center rounded-md bg-gradient-to-b from-[#00385a] to-[#004E7C] text-xs font-black text-white shadow-[0_2px_6px_rgba(0,56,90,0.18)]",children:""}),s.jsx("span",{className:"text-base leading-none md:text-lg md:font-bold",children:""}),s.jsx("span",{className:"ml-1.5 text-sm font-bold text-[#6C7B91]",children:""})]}),s.jsx("div",{className:"animate-mhRecoBar ml-2.5 h-1.5 flex-1 rounded-full bg-gradient-to-r from-[#00385a] via-[#004E7C] to-[#7EA5FF] bg-[length:200%_100%] opacity-25","aria-hidden":"true"})]}),s.jsx("div",{className:"grid grid-cols-1 gap-[18px] md:grid-cols-2 lg:grid-cols-3","aria-label":"",title:"",children:Vh.map(e=>s.jsx(Jf,{property:e},e.id))})]})}const ep=()=>{const[e,t]=m.useState(!1),r=m.useMemo(()=>wr(),[]),n=m.useMemo(()=>Tm(3),[]),a=m.useMemo(()=>Im(r.milestones),[r.milestones]),i=m.useMemo(()=>{if(e||typeof window>"u")return!1;const{isFirstVisit:u}=km(),x=n&&n.length>0||!!a||!!r.lastMood;return!u&&!Em()&&x},[e,n,a,r.lastMood]);if(m.useEffect(()=>{i&&et(tt.WarmbarView,{tags:n,milestone:!!a,lastMood:r.lastMood})},[i,n,a,r.lastMood]),!i)return null;const o=u=>u==="stress"?"":u==="rest"?"":"",l=n&&n.length>0?`${n.join("")}`:null,c=a||(l?`${o(r.lastMood)}${l}`:`${o(r.lastMood)}`),d=()=>{et(tt.WarmbarContinue,{tags:n,milestone:!!a});const u=a?"":n&&n.length>0?` ${n.join("")}`:"";window.dispatchEvent(new CustomEvent("mai:chat:start",{detail:{text:u}}))},h=()=>{Sm(),t(!0),et(tt.WarmbarDismiss,{})};return s.jsxs("div",{className:"flex h-[34px] w-full items-center justify-center gap-3 border-b border-[#E6ECFF] bg-[#F5F8FF] text-center text-sm leading-[34px] tracking-wide text-[#0a2246]",role:"status","aria-live":"polite",children:[s.jsx("span",{children:c}),s.jsx("button",{className:"h-[26px] cursor-pointer rounded-full border border-[#1749D7] bg-[#1749D7] px-2.5 py-0.5 leading-6 text-white transition-colors hover:bg-[#123cb3]",onClick:d,children:""}),s.jsx("button",{className:"h-[26px] cursor-pointer rounded-full border border-[#C9D5FF] bg-white px-2.5 py-0.5 leading-6 text-[#1749D7] transition-colors hover:bg-gray-50",onClick:h,children:""})]})};function tp({config:e}){const[t,r]=m.useState(null);m.useEffect(()=>{Gl().then(a=>{a.ok&&a.data&&(a.data.maintenance||Df(a.data.backendVersion,e.minBackend)<0)&&(console.warn(""),r(""))})},[e.minBackend]),m.useEffect(()=>{const a=i=>{var o;try{Ra("unhandled_promise_rejection","/",((o=i.reason)==null?void 0:o.message)||String(i.reason))}catch{}};return globalThis.addEventListener("unhandledrejection",a),()=>globalThis.removeEventListener("unhandledrejection",a)},[]);const n=e.features||{};return s.jsxs(s.Fragment,{children:[s.jsx(Gh,{}),s.jsx(ep,{}),t&&s.jsx("div",{className:"mx-auto mt-4 max-w-container rounded-md bg-yellow-500 p-3 text-sm text-white",children:t}),s.jsxs("main",{className:"relative mx-auto max-w-container space-y-6 p-4 md:space-y-8 md:p-6",children:[n.heroAssure!==!1&&s.jsx(Ff,{}),n.smartAsk!==!1&&s.jsx(lc,{}),s.jsx(qf,{}),n.propertyGrid!==!1&&s.jsx(Xf,{})]})]})}const sp={BASE_URL:"/maihouses/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},rp=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"],Gi="/api/community",np=e=>e.replace(/\/+$/,""),Hi=e=>{try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}},ap=()=>{const e="/maihouses/";return e.endsWith("/")?e:`${e}/`},Wi=(e,t)=>{if(typeof document<"u"&&document.body){const r=ap();document.body.innerHTML=`
      <div style="display:flex;align-items:center;justify-content:center;height:100vh;font-family:system-ui,-apple-system,sans-serif;background:#f8fafc;">
        <div style="text-align:center;max-width:400px;padding:2rem;">
          <div style="font-size:3rem;margin-bottom:1rem;"></div>
          <h1 style="font-size:1.25rem;font-weight:600;color:#1e293b;margin-bottom:0.5rem;">${e}</h1>
          <p style="color:#64748b;margin-bottom:1.5rem;">${t}</p>
          <a href="${r}" style="display:inline-block;padding:0.75rem 1.5rem;background:#3b82f6;color:white;border-radius:0.5rem;text-decoration:none;font-weight:500;"></a>
        </div>
      </div>
    `}};function ip(){const e=rp.filter(n=>!sp[n]);if(e.length>0){const n=`${e.join(", ")}`;throw Wi("",""),new Error(n)}const t=void 0;if(!Hi(t)){const n="VITE_SUPABASE_URL  HTTP(S) URL";throw Wi("",""),new Error(n)}const r={VITE_SUPABASE_URL:t,VITE_SUPABASE_ANON_KEY:void 0,VITE_API_BASE_URL:void 0,VITE_APP_URL:void 0};return r.VITE_API_BASE_URL&&!Hi(r.VITE_API_BASE_URL)&&!r.VITE_API_BASE_URL.startsWith("/")&&console.warn("[env] VITE_API_BASE_URL  HTTP(S) URL  / "),r.VITE_API_BASE_URL,r}const ca=ip();function op(e){if(!e.VITE_API_BASE_URL)return console.warn("[env] VITE_API_BASE_URL  /api/community"),Gi;const t=e.VITE_API_BASE_URL.trim();return t?`${np(t)}/community`:(console.warn("[env] VITE_API_BASE_URL  /api/community"),Gi)}const lp=op(ca),ce=Qd(ca.VITE_SUPABASE_URL,ca.VITE_SUPABASE_ANON_KEY,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),cp=e=>{var r,n;if(!e)return"guest";const t=((r=e.app_metadata)==null?void 0:r.role)??((n=e.user_metadata)==null?void 0:n.role);return t==="resident"||t==="agent"||t==="member"?t:"member"};function Et(){const[e,t]=m.useState({session:null,user:null,role:"guest",isAuthenticated:!1,loading:!0,error:null});return m.useEffect(()=>{let n=!0;const a=(l,c=null)=>{if(!n)return;const d=(l==null?void 0:l.user)??null,h=cp(d);t({session:l,user:d,role:h,isAuthenticated:!!l,loading:!1,error:c})};(async()=>{try{const{data:l,error:c}=await ce.auth.getSession();if(c){a(null,c);return}a(l.session,null)}catch(l){a(null,l instanceof Error?l:new Error("Failed to fetch session"))}})();const{data:{subscription:o}}=ce.auth.onAuthStateChange((l,c)=>{a(c,null)});return()=>{n=!1,o.unsubscribe()}},[]),{...e,signOut:async()=>{const{error:n}=await ce.auth.signOut();if(n)throw n}}}const As=(e={},t,r=3200)=>{const n={duration:e.duration??r,dismissible:e.dismissible??!0};return e.id!==void 0&&(n.id=e.id),t!==void 0?n.description=t:e.description!==void 0&&(n.description=e.description),e.actionLabel&&e.onAction&&(n.action={label:e.actionLabel,onClick:e.onAction}),n},Z={success:(e,t,r)=>as.success(e,As(r,t,3200)),error:(e,t,r)=>as.error(e,As(r,t,(r==null?void 0:r.duration)??5e3)),warning:(e,t,r)=>as.warning(e,As(r,t,(r==null?void 0:r.duration)??4500)),info:(e,t,r)=>as.info(e,As(r,t,3200)),loading:(e,t)=>as.loading(e,As(t,t==null?void 0:t.description,(t==null?void 0:t.duration)??1/0)),dev:(e="",t)=>as.info("",As(t,e,(t==null?void 0:t.duration)??2200)),dismiss:e=>as.dismiss(e)},Ue={BACK_HOME:"",SUBTITLE_WALL:"",AGENT_BADGE:"",BTN_LOGIN:"",BTN_REGISTER:"",BTN_LOGOUT:"",BTN_MY_ACCOUNT:"",LABEL_NOTIFICATIONS:"",LABEL_AVATAR:"",MENU_PROFILE:"",ROLE_GUEST:"",ROLE_MEMBER:"",ROLE_RESIDENT:"",ROLE_AGENT:"",ROLE_OFFICIAL:"",MSG_LOGOUT_SUCCESS:"",MSG_LOGOUT_DESC:"",MSG_LOGOUT_ERROR:"",MSG_LOGOUT_RETRY:"",MSG_FEATURE_DEV:"",MSG_PROFILE_SOON:""},dp=e=>{switch(e){case"resident":return Ue.ROLE_RESIDENT;case"agent":return Ue.ROLE_AGENT;case"official":return Ue.ROLE_OFFICIAL;case"guest":return Ue.ROLE_GUEST;default:return Ue.ROLE_MEMBER}};function cs({mode:e,title:t,className:r="",notificationCount:n=0}){var f,g;const{isAuthenticated:a,user:i,signOut:o,role:l}=Et(),[c,d]=m.useState(!1),h=async()=>{try{await o(),Z.success(Ue.MSG_LOGOUT_SUCCESS,Ue.MSG_LOGOUT_DESC),d(!1),window.location.href=ve.HOME}catch(b){console.error("Logout failed:",b),Z.error(Ue.MSG_LOGOUT_ERROR,Ue.MSG_LOGOUT_RETRY)}};m.useEffect(()=>{const b=v=>{const p=v.target;!p.closest("#gh-user-menu-btn")&&!p.closest("#gh-user-menu-dropdown")&&d(!1)};return document.addEventListener("click",b),()=>document.removeEventListener("click",b)},[]);const u=()=>{let b=ve.HOME;return l==="agent"?b=ve.FEED_AGENT:(l==="resident"||l==="member")&&(b=ve.FEED_CONSUMER),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zl,{showSlogan:!1,href:b,showBadge:!0}),e==="agent"&&s.jsx("span",{className:"rounded bg-gradient-to-br from-amber-400 to-amber-600 px-2 py-0.5 text-[10px] font-extrabold text-white shadow-sm",children:Ue.AGENT_BADGE})]})},x=()=>e==="community"&&t?s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"text-brand-900 m-0 text-base font-extrabold",children:t}),s.jsx("p",{className:"text-ink-500 m-0 text-[11px]",children:Ue.SUBTITLE_WALL})]}):s.jsx("div",{className:"flex-1"});return s.jsx("header",{className:`sticky top-0 z-overlay border-b border-brand-100 bg-white/95 backdrop-blur-md transition-all ${r}`,children:s.jsxs("div",{className:"mx-auto flex h-16 max-w-[1120px] items-center justify-between gap-2.5 px-4",children:[u(),x(),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{className:"relative inline-flex items-center justify-center rounded-xl border border-brand-100 bg-white p-2 text-brand-700 transition-all hover:bg-brand-50","aria-label":Ue.LABEL_NOTIFICATIONS,children:[s.jsx(Cd,{size:18,strokeWidth:2.5}),n>0&&s.jsx("span",{className:"absolute -right-1 -top-1 flex h-[16px] min-w-[16px] items-center justify-center rounded-full border-2 border-white bg-red-600 text-[10px] font-bold text-white shadow-sm",children:n>99?"99+":n})]}),a?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{id:"gh-user-menu-btn",onClick:()=>d(!c),className:"flex items-center gap-1.5 rounded-xl border border-brand-100 bg-white py-1 pl-1 pr-2.5 transition-all hover:bg-brand-50 hover:shadow-sm active:scale-95","aria-label":Ue.LABEL_AVATAR,"aria-expanded":c,children:[s.jsx("div",{className:"flex size-7 items-center justify-center rounded-full bg-brand-50 text-xs font-bold text-brand-700 ring-1 ring-brand-100",children:((f=i==null?void 0:i.email)==null?void 0:f.charAt(0).toUpperCase())||"U"}),s.jsx("span",{className:"hidden max-w-[80px] truncate text-xs font-bold text-brand-700 md:block",children:((g=i==null?void 0:i.user_metadata)==null?void 0:g.name)||""}),s.jsx(Id,{size:14,className:`text-brand-400 transition-transform ${c?"rotate-180":""}`})]}),c&&s.jsxs("div",{id:"gh-user-menu-dropdown",className:"animate-in fade-in zoom-in-95 absolute right-0 top-full mt-2 w-48 origin-top-right rounded-xl border border-brand-100 bg-white p-1 shadow-xl ring-1 ring-black/5 duration-100 focus:outline-none",role:"menu",children:[s.jsxs("div",{className:"mb-1 border-b border-gray-50 px-3 py-2",children:[s.jsx("p",{className:"text-brand-900 truncate text-xs font-bold",children:i==null?void 0:i.email}),s.jsx("p",{className:"text-[10px] text-gray-500",children:dp(l)})]}),s.jsxs("button",{className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold text-gray-700 transition-colors hover:bg-brand-50 hover:text-brand-700",role:"menuitem",onClick:()=>{const b=ve.FEED_CONSUMER,v="profile";location.pathname===b||location.pathname.includes("/feed/consumer")?(window.location.hash=v,window.dispatchEvent(new HashChangeEvent("hashchange")),window.scrollTo({top:0,behavior:"smooth"})):window.location.href=`${b}#${v}`,d(!1)},children:[s.jsx($n,{size:16}),Ue.MENU_PROFILE]}),s.jsxs("button",{onClick:h,className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[s.jsx(Ad,{size:16}),Ue.BTN_LOGOUT]})]})]}):s.jsxs("a",{href:"/maihouses/auth.html?mode=login",className:"flex items-center gap-1 rounded-xl bg-brand-700 px-3 py-1.5 text-xs font-bold text-white shadow-sm transition-all hover:bg-brand-600 hover:shadow-md active:scale-95",children:[s.jsx($n,{size:14,strokeWidth:2.5}),s.jsx("span",{children:Ue.BTN_LOGIN})]})]})]})})}const P={FEED:{TITLE:"",PAGE_TITLE:"",PROFILE:{STATS_DAYS:"",STATS_LIKED:"",STATS_CONTRIB:"",LEVEL_RESIDENT:"",LEVEL_AGENT:"",LEVEL_MEMBER:"",FROM:e=>`${e}`,FROM_MY_COMMUNITY:"",VIEW_WALL:" "},TX_BANNER:{TITLE:"",ENTER_BTN:""},SIDEBAR:{NAV_TITLE:"",HOT_TITLE:"",SALE_TITLE:"",VIEW_ALL:"",HOT_EMPTY:"",SALE_EMPTY:"",HOT_NEW_POSTS:"",HOT_POSTS_UNIT:"",HOT_ACTIVE_COMMUNITIES:"",HOT_COMMUNITIES_UNIT:"",SALE_PREFIX:"",SALE_SUFFIX:""},DEFAULT_USER:"Mike",DEFAULT_COMMUNITY_NAME:"",DEFAULT_COMMUNITY_ID:"test-uuid",DEFAULT_COMMUNITY_LABEL:"",NOTIFY:{LOGIN_REQUIRED:"",LOGIN_REQUIRED_LIKE:"",LOGIN_REQUIRED_POST:"",LIKE_FAILED:"",LIKE_FAILED_DESC:"",FEATURE_WIP:"",REPLY_WIP:"",SHARE_WIP:"",COMMENT_SUCCESS:"",COMMENT_SUCCESS_DESC:""},POST:{LIKE_BTN:"",LIKED_BTN:"",REPLY_BTN:"",SHARE_BTN:"",SHOW_MORE:"",SHOW_LESS:"",TIME_JUST_NOW:"",TIME_MINUTES_AGO:e=>`${e} `,TIME_HOURS_AGO:e=>`${e} `,TIME_DAYS_AGO:e=>`${e} `,BADGE_AGENT:"",BADGE_OFFICIAL:"",VIEWS:e=>`${e} `,PINNED:"",COMMENT_SUCCESS:{TITLE:"",DESC:""}},AI_INSIGHT:{TITLE:"AI ",PUBLIC_RATIO:"",COMMUNITY_RATING:"",ACTIVITY_SCORE:""},NAV:{HOME:"",COMMUNITY:"",NOTIFICATIONS:"",PROFILE:""},EMPTY:{TITLE:"",DESC:""},TABS:{PUBLIC:"",PRIVATE:""},ERROR:{LOAD_FAILED:"",RETRY:""}},COMPOSER:{LOGIN_TITLE:"",LOGIN_DESC:"",CANCEL:"",GO_LOGIN:"",TITLE_PRIVATE:" ",TITLE_PUBLIC:" ",CLOSE:"",CLOSE_ICON:"",VISIBILITY_PUBLIC:" ",VISIBILITY_PRIVATE:" ",PLACEHOLDER_COMMUNITY_PRIVATE:"...",PLACEHOLDER_COMMUNITY_PUBLIC:"...",PLACEHOLDER_FEED:"...",UPLOAD_IMAGE:" ",UPLOAD_IMAGE_DEV:"",SUBMIT:"",SUBMITTING:"...",SUCCESS:"",ERROR_TITLE:""},COMMUNITY:{AGENT_BADGE:"",OFFICIAL_BADGE:"",RESIDENT_BADGE_SUFFIX:" ",PRIVATE_POST_LABEL:"",BTN_MSG_AGENT:"",BTN_LIKE:"",BTN_LIKING:"",BTN_REPLY:"",BTN_REPLY_TOOLTIP:"",BTN_REPLY_ARIA:"",BTN_POST_PUBLIC:"",BTN_POST_PRIVATE:"",SECTION_TITLE:"",TAB_PUBLIC:"",TAB_PRIVATE:"",MSG_AGENT_VIEW_ONLY:"",LOCKED_TITLE:"",LOCKED_DESC_GUEST:"",LOCKED_DESC_USER:"",BTN_UNLOCK_GUEST:" / ",BTN_UNLOCK_USER:"",NOTIFY_LOGIN_TITLE:"",NOTIFY_LOGIN_DESC:"",NOTIFY_PERM_ERROR:"",NOTIFY_PERM_CHECK:"",NOTIFY_PRIVATE_ONLY:"",NOTIFY_PRIVATE_ACCESS_DENIED:"",NOTIFY_PRIVATE_ACCESS_DENIED_DESC:"/",NOTIFY_VERIFY_REQUIRED:"",NOTIFY_VERIFY_REQUIRED_DESC:"",LOCKED_OVERLAY_COUNT_LABEL:"",LOCKED_OVERLAY_BENEFIT_1:"",LOCKED_OVERLAY_BENEFIT_2:""},VALIDATION:{MIN_LENGTH:e=>` ${e} `,MAX_LENGTH:e=>` ${e} `,SUBMIT_ERROR:""},WALL_STATES:{ERROR_TITLE:"",ERROR_DEFAULT:"",RETRY:"",EMPTY_TITLE:"",EMPTY_DEFAULT:"",LOADING_LABEL:"..."},AGENT:{ROLE:{AGENT:"",CONSUMER:""},OOS:{SWITCH_TO_CONSUMER:"",SWITCH_TO_AGENT:""},PROFILE:{FROM_STORE:"21",BADGE_GOLD:"",BADGE_VERIFIED:"",LINK_WORKBENCH:" ",LINK_WALL:"  ",STATS_SCORE:" ",STATS_DAYS:" ",STATS_LIKED:" "},SIDEBAR:{NAV_TITLE:" ",LINK_UAG:" ",LINK_STATS:" ",LINK_TRUST:" ",LINK_WALL:" ",PERF_TITLE:" ",PERF_DEAL_COUNT_PREFIX:"",PERF_DEAL_COUNT_UNIT:"",PERF_AMOUNT_PREFIX:"",PERF_CLIENTS_PREFIX:"",PERF_CLIENTS_UNIT:"",TODO_TITLE:" ",TODO_EMPTY:""},UAG:{TITLE:"UAG ",LINK_WORKBENCH:"",CARD_PREDICT:"",CARD_UNIT:"",CARD_BUDGET:" 1,6001,900 ",CARD_PREF:" 12F "},TRUST:{TITLE:"",DESC_1:"11:3012:05  3 ",DESC_2:" MJ-2025-11-10-0007  ",TAG_COMPLETED:"",TAG_CERT:"",TAG_PRIVATE:"",BTN_LIKE:" ",BTN_REPLY:" ",BTN_DETAIL:" "}}};function dc(e){const t=Date.now(),r=new Date(e).getTime(),n=t-r;if(isNaN(r))return"";if(n<0)return P.FEED.POST.TIME_JUST_NOW;const a=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),o=Math.floor(n/(1e3*60*60*24));return a<1?P.FEED.POST.TIME_JUST_NOW:a<60?P.FEED.POST.TIME_MINUTES_AGO(a):i<24?P.FEED.POST.TIME_HOURS_AGO(i):P.FEED.POST.TIME_DAYS_AGO(o)}const up=({comments:e})=>!e||e.length===0?null:s.jsx("div",{className:"space-y-4 pt-4 border-t border-gray-100/50 mt-4",children:e.map(t=>s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-xs font-medium text-indigo-600 shrink-0",children:t.author.charAt(0)}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"bg-gray-50 rounded-2xl px-4 py-2.5 rounded-tl-none inline-block max-w-[90%]",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t.author}),t.role==="agent"&&s.jsx("span",{className:"bg-indigo-100 text-indigo-600 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:""}),t.role==="resident"&&s.jsx("span",{className:"bg-emerald-100 text-emerald-600 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:""})]}),s.jsx("p",{className:"text-[14px] leading-relaxed text-gray-700 whitespace-pre-wrap",children:t.content})]}),s.jsxs("div",{className:"flex items-center gap-4 px-1",children:[s.jsx("span",{className:"text-xs text-gray-400",children:dc(t.time)}),s.jsx("button",{className:"text-xs font-medium text-gray-500 hover:text-gray-800 transition-colors",children:""}),t.likes>0&&s.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[" ",t.likes," "]})]})]})]},t.id))}),mp=({onSubmit:e,placeholder:t="...",userInitial:r="U",disabled:n=!1})=>{const[a,i]=m.useState(""),[o,l]=m.useState(!1),c=async h=>{if(h.preventDefault(),!(!a.trim()||o)){l(!0);try{await e(a),i("")}finally{l(!1)}}},d=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),c(h))};return s.jsxs("form",{onSubmit:c,className:"flex gap-3 pt-4 border-t border-gray-100/50 mt-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-indigo-600 flex items-center justify-center text-xs font-semibold text-white shadow-sm shrink-0",children:r}),s.jsxs("div",{className:"flex-1 relative group",children:[s.jsx("textarea",{value:a,onChange:h=>i(h.target.value),onKeyDown:d,placeholder:t,disabled:n||o,rows:1,className:"w-full bg-gray-50 hover:bg-gray-100 focus:bg-white text-[14px] text-gray-800 rounded-[20px] px-4 py-2.5 outline-none border border-transparent focus:border-indigo-500/30 ring-0 focus:ring-4 focus:ring-indigo-500/10 transition-all resize-none overflow-hidden min-h-[42px]",style:{height:"auto",minHeight:"42px"}}),s.jsx("div",{className:"absolute right-2 top-1.5 flex items-center gap-1",children:a.trim()&&s.jsx("button",{type:"submit",disabled:n||o,className:"bg-indigo-600 hover:bg-indigo-700 text-white rounded-full p-1.5 w-8 h-8 flex items-center justify-center transition-all shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-4 h-4 transform group-hover:translate-x-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 12h14M12 5l7 7-7 7"})})})})]})]})},Bt=P.FEED.POST;function hp(e){switch(e){case"agent":return"bg-amber-100 text-amber-700 ring-amber-200";case"official":return"bg-brand-700 text-white ring-brand-300";default:return"bg-brand-50 text-brand-700 ring-brand-100"}}function fp(e){switch(e){case"agent":return Bt.BADGE_AGENT;case"official":return Bt.BADGE_OFFICIAL;default:return null}}const da=m.memo(function({post:t,isLiked:r=!1,onLike:n,onReply:a,onShare:i,onComment:o,className:l=""}){const[c,d]=m.useState(!1),[h,u]=m.useState(!1),x=m.useCallback(async()=>{if(!(!n||c)){d(!0);try{await n(t.id)}finally{d(!1)}}},[n,t.id,c]),f=()=>{u(!h),a==null||a(t.id)},g=async w=>{o&&await o(t.id,w)},b=hp(t.type),v=fp(t.type),p=t.author.charAt(0).toUpperCase();return s.jsxs("article",{className:`rounded-2xl border border-brand-100 bg-white p-4 shadow-sm transition-all hover:shadow-md ${l}`,children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-50 pb-3",children:[s.jsx("div",{className:`flex size-10 shrink-0 items-center justify-center rounded-full text-sm font-bold ring-1 ${b}`,"aria-hidden":"true",children:p}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"truncate text-sm font-bold text-gray-900",children:t.author}),t.floor&&s.jsx("span",{className:"text-xs text-gray-500",children:t.floor}),v&&s.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-bold text-amber-700",children:v})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.communityName&&s.jsx("span",{className:"truncate",children:t.communityName}),s.jsx("span",{children:""}),s.jsx("span",{children:dc(t.time)})]})]})]}),s.jsxs("div",{className:"pt-3",children:[t.title&&s.jsx("h3",{className:"mb-1 text-sm font-bold text-gray-900",children:t.title}),s.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed text-gray-700",children:t.content}),t.images&&t.images.length>0&&s.jsx("div",{className:`mt-3 ${t.images.length===1?"block":"grid grid-cols-2 gap-2"}`,children:t.images.map((w,k)=>{var N;return s.jsx("div",{className:"relative overflow-hidden rounded-lg bg-gray-100",children:s.jsx("img",{src:w.src,alt:w.alt,loading:"lazy",onError:T=>{var C,_;T.currentTarget.style.display="none",(C=T.currentTarget.parentElement)==null||C.classList.add("flex","items-center","justify-center","min-h-[200px]");const S=document.createElement("span");S.textContent="",S.className="text-xs text-gray-400 font-medium",(_=T.currentTarget.parentElement)==null||_.appendChild(S)},className:`object-cover transition-opacity duration-300 ${((N=t.images)==null?void 0:N.length)===1?"max-h-80 w-full":"aspect-square w-full"}`})},`${t.id}-img-${k}`)})})]}),s.jsxs("div",{className:"mt-4 flex items-center gap-2 border-t border-gray-50 pt-3",children:[s.jsxs("button",{type:"button",onClick:x,disabled:c,"aria-pressed":r,className:`inline-flex items-center gap-1.5 rounded-lg border px-3 py-1.5 text-xs font-bold transition-all active:scale-95 disabled:cursor-not-allowed disabled:opacity-60 ${r?"border-red-200 bg-red-50 text-red-600":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"}`,children:[s.jsx(_a,{size:14,fill:r?"currentColor":"none"}),s.jsx("span",{children:r?Bt.LIKED_BTN:Bt.LIKE_BTN}),typeof t.likes=="number"&&t.likes>0&&s.jsx("span",{className:"ml-0.5 text-gray-500",children:t.likes})]}),s.jsxs("button",{type:"button",onClick:f,className:`inline-flex items-center gap-1.5 rounded-lg border px-3 py-1.5 text-xs font-bold transition-all active:scale-95 ${h?"border-indigo-200 bg-indigo-50 text-indigo-600":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"}`,children:[s.jsx(Pt,{size:14,fill:h?"currentColor":"none"}),s.jsx("span",{children:Bt.REPLY_BTN}),typeof t.comments=="number"&&t.comments>0&&s.jsx("span",{className:"ml-0.5 text-gray-500",children:t.comments})]}),s.jsxs("button",{type:"button",onClick:()=>i==null?void 0:i(t.id),className:"ml-auto inline-flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-bold text-gray-600 transition-all hover:bg-gray-50 active:scale-95",children:[s.jsx(ka,{size:14}),s.jsx("span",{children:Bt.SHARE_BTN})]})]}),t.type==="agent"&&typeof t.views=="number"&&s.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Yr,{size:12}),Bt.VIEWS(t.views)]}),t.pinned&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ts,{size:12}),Bt.PINNED]})]}),h&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsx(up,{comments:t.commentList||[]}),s.jsx(mp,{onSubmit:g})]})]})}),In=P.FEED.PROFILE;function pp(e){switch(e){case"resident":return P.FEED.PROFILE.LEVEL_RESIDENT;case"agent":return P.FEED.PROFILE.LEVEL_AGENT;default:return P.FEED.PROFILE.LEVEL_MEMBER}}function xp(e){switch(e){case"resident":return"bg-amber-100 text-amber-700 border-amber-300";case"agent":return"bg-blue-100 text-blue-700 border-blue-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}}const gp=m.memo(function({profile:t,className:r=""}){const n=t.name.charAt(0).toUpperCase(),a=pp(t.role),i=xp(t.role);return s.jsxs("section",{className:`rounded-2xl border border-brand-100 bg-white p-4 shadow-sm ${r}`,children:[s.jsxs("div",{className:"flex items-center gap-3.5",children:[s.jsx("div",{className:"flex size-14 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-brand-50 to-white text-xl font-black text-brand-700 ring-1 ring-brand-100","aria-hidden":"true",children:n}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"truncate text-lg font-black text-gray-900",children:t.name}),s.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{className:"truncate",children:P.FEED.PROFILE.FROM(t.communityName||"")}),s.jsxs("span",{className:`inline-flex items-center rounded px-1.5 py-0.5 text-[10px] font-bold ${i}`,children:[" ",a]})]})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[s.jsxs("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-gradient-to-b from-emerald-50 to-emerald-100 px-2.5 py-1 text-xs font-bold text-emerald-700",children:[" ",In.STATS_DAYS," ",t.stats.days," "]}),s.jsxs("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-gradient-to-b from-emerald-50 to-emerald-100 px-2.5 py-1 text-xs font-bold text-emerald-700",children:[" ",In.STATS_LIKED," ",t.stats.liked]}),s.jsxs("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-gradient-to-b from-emerald-50 to-emerald-100 px-2.5 py-1 text-xs font-bold text-emerald-700",children:[" ",In.STATS_CONTRIB," ",t.stats.contributions," "]})]}),t.communityId&&s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("a",{href:`${ve.COMMUNITY_WALL(t.communityId)}?from=consumer`,className:"inline-flex items-center gap-1 rounded-full border border-blue-200 bg-blue-50 px-3 py-1.5 text-xs font-bold text-brand-700 transition-all hover:bg-blue-100 hover:shadow-sm active:scale-95",children:[P.FEED.PROFILE.VIEW_WALL,s.jsx(il,{size:14})]})})]})}),An=P.FEED.TX_BANNER;function bp(e){switch(e){case"negotiation":return"";case"contract":return"";case"loan":return"";case"closing":return"";default:return""}}const vp=m.memo(function({transaction:t,className:r=""}){if(!t.hasActive)return null;const n=bp(t.stage);return s.jsx("div",{className:`mx-auto max-w-[1120px] px-4 ${r}`,children:s.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-cyan-300 bg-gradient-to-r from-cyan-50 to-cyan-100 p-3 shadow-sm",role:"region","aria-label":An.TITLE,children:[s.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-lg bg-white text-xl shadow-sm",children:s.jsx(He,{className:"size-5 text-cyan-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-bold text-cyan-800",children:An.TITLE}),s.jsxs("p",{className:"truncate text-xs text-cyan-700",children:[t.propertyName||"",s.jsx("span",{className:"mx-1",children:""}),n]})]}),s.jsxs("a",{href:ve.ASSURE,className:"inline-flex shrink-0 items-center gap-1 rounded-full bg-cyan-600 px-3 py-1.5 text-xs font-bold text-white shadow-sm transition-all hover:bg-cyan-700 active:scale-95",children:[An.ENTER_BTN,s.jsx(St,{size:14})]})]})})}),Xe=P.FEED.SIDEBAR,yp=[{id:"my-community",label:"",icon:s.jsx(He,{size:16}),href:"#my-community"},{id:"explore",label:"",icon:s.jsx(Zr,{size:16}),href:"#explore"},{id:"fav",label:"",icon:s.jsx(un,{size:16}),href:"#fav"},{id:"history",label:"",icon:s.jsx(ir,{size:16}),href:"#history"}];function cr({title:e,children:t}){return s.jsxs("div",{className:"rounded-xl border border-brand-100 bg-white p-3.5 shadow-sm",children:[s.jsx("h4",{className:"mb-2.5 text-sm font-bold text-brand-700",children:e}),t]})}function wp({activeNav:e}){return s.jsx("nav",{className:"flex flex-col gap-1",children:yp.map(t=>{const r=e===t.id;return s.jsxs("a",{href:t.href,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-semibold transition-all ${r?"bg-gradient-to-r from-brand-700 to-brand-600 text-white shadow-sm":"text-gray-700 hover:bg-brand-50"}`,children:[t.icon,s.jsx("span",{children:t.label})]},t.id)})})}function jp({posts:e}){if(!e||e.length===0)return s.jsx(cr,{title:` ${Xe.HOT_TITLE}`,children:s.jsx("p",{className:"text-sm text-gray-500",children:Xe.HOT_EMPTY})});const t=e.length,r=new Set(e.map(n=>n.communityName)).size;return s.jsx(cr,{title:` ${Xe.HOT_TITLE}`,children:s.jsxs("p",{className:"text-sm leading-relaxed text-gray-600",children:[Xe.HOT_NEW_POSTS," ",s.jsx("span",{className:"font-bold text-brand-700",children:t})," ",Xe.HOT_POSTS_UNIT,s.jsx("br",{}),Xe.HOT_ACTIVE_COMMUNITIES," ",s.jsx("span",{className:"font-bold text-brand-700",children:r})," ",Xe.HOT_COMMUNITIES_UNIT]})})}function Np({items:e}){return!e||e.length===0?s.jsx(cr,{title:` ${Xe.SALE_TITLE}`,children:s.jsx("p",{className:"text-sm text-gray-500",children:Xe.SALE_EMPTY})}):s.jsx(cr,{title:` ${Xe.SALE_TITLE}`,children:s.jsxs("p",{className:"text-sm leading-relaxed text-gray-600",children:[Xe.SALE_PREFIX," ",s.jsx("span",{className:"font-bold text-brand-700",children:e.length})," ",Xe.SALE_SUFFIX,s.jsx("br",{}),s.jsxs("a",{href:"#sale-all",className:"inline-flex items-center gap-0.5 text-xs text-brand-600 hover:underline",children:[Xe.VIEW_ALL,s.jsx(St,{size:12})]})]})})}const _p=m.memo(function({data:t,activeNav:r="my-community",className:n=""}){return s.jsxs("aside",{className:`sticky top-[72px] hidden w-[280px] shrink-0 flex-col gap-3 self-start lg:flex ${n}`,children:[s.jsx(cr,{title:` ${Xe.NAV_TITLE}`,children:s.jsx(wp,{activeNav:r})}),s.jsx(jp,{posts:t==null?void 0:t.hotPosts}),s.jsx(Np,{items:t==null?void 0:t.saleItems})]})}),kp=5*1024*1024,Sp=["image/jpeg","image/png","image/webp"];function uc({onSubmit:e,disabled:t,userInitial:r}){const[n,a]=m.useState(""),[i,o]=m.useState(!1),[l,c]=m.useState(!1),[d,h]=m.useState([]),[u,x]=m.useState([]),f=m.useRef(null);m.useEffect(()=>()=>{u.forEach(p=>URL.revokeObjectURL(p))},[u]);const g=p=>{if(p.target.files&&p.target.files.length>0){const k=Array.from(p.target.files).filter(T=>Sp.includes(T.type)?T.size>kp?(Z.error(` ( 5MB): ${T.name}`),!1):!0:(Z.error(`: ${T.name}`),!1));if(k.length===0)return;if(d.length+k.length>4){Z.error(" 4 ");return}const N=k.map(T=>URL.createObjectURL(T));x(T=>[...T,...N]),h(T=>[...T,...k])}},b=p=>{const w=u[p];w&&URL.revokeObjectURL(w),x(k=>k.filter((N,T)=>T!==p)),h(k=>k.filter((N,T)=>T!==p))},v=async()=>{if(!(!n.trim()&&d.length===0||l)){c(!0);try{await e(n.trim(),d),a(""),h([]),o(!1),f.current&&(f.current.value=""),Z.success(P.COMPOSER.SUCCESS)}catch(p){console.error("Failed to create post",p),Z.error(P.COMPOSER.ERROR_TITLE)}finally{c(!1)}}};return s.jsx("div",{className:`rounded-2xl border bg-white p-3 shadow-sm transition-all ${i?"border-brand-200 shadow-md":"border-brand-100"}`,children:s.jsxs("div",{className:"flex items-start gap-2.5",children:[s.jsx("div",{className:"flex size-9 shrink-0 items-center justify-center rounded-full bg-brand-50 text-sm font-bold text-brand-700 ring-1 ring-brand-100",children:r}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("textarea",{value:n,onChange:p=>a(p.target.value),onFocus:()=>o(!0),placeholder:P.COMPOSER.PLACEHOLDER_FEED,disabled:t,className:"focus:ring-brand-200 min-h-[40px] w-full resize-none rounded-xl border-0 bg-brand-50 px-3 py-2 text-sm leading-relaxed text-gray-800 outline-none transition-all placeholder:text-gray-400 focus:bg-white focus:ring-2",rows:i?3:1}),u.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((p,w)=>s.jsxs("div",{className:"relative size-16 overflow-hidden rounded-lg border border-gray-200",children:[s.jsx("img",{src:p,alt:"Preview",className:"size-full object-cover"}),s.jsx("button",{type:"button",onClick:()=>b(w),className:"absolute right-0.5 top-0.5 rounded-full bg-black/50 p-0.5 text-white hover:bg-black/70",children:s.jsx(_s,{size:12})})]},p))}),i&&s.jsxs("div",{className:"flex items-center justify-between pt-1",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>{var p;return(p=f.current)==null?void 0:p.click()},className:"flex items-center gap-1.5 rounded-full bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-600 hover:bg-gray-100",disabled:t||l,children:[s.jsx(Ld,{size:14}),s.jsx("span",{children:""})]}),s.jsx("input",{type:"file",ref:f,className:"hidden",accept:"image/*",multiple:!0,onChange:g})]}),s.jsx("button",{type:"button",onClick:v,disabled:t||l||!n.trim()&&d.length===0,className:"rounded-full bg-brand-700 px-4 py-2 text-xs font-bold text-white shadow-sm transition-all hover:bg-brand-600 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50",children:l?P.COMPOSER.SUBMITTING:P.COMPOSER.SUBMIT})]})]}),!i&&s.jsx("button",{type:"button",onClick:v,disabled:t||l||!n.trim(),className:"shrink-0 rounded-full bg-brand-700 px-4 py-2 text-xs font-bold text-white shadow-sm transition-all hover:bg-brand-600 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50",children:l?P.COMPOSER.SUBMITTING:P.COMPOSER.SUBMIT})]})})}class Ep extends m.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){return this.state.hasError?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Something went wrong"}),s.jsx("button",{className:"mt-4 rounded bg-brand-600 px-4 py-2 text-white",onClick:()=>this.setState({hasError:!1}),children:"Try again"})]}):this.props.children}}function za({useMock:e,onToggle:t,disabled:r=!1}){const n=()=>{r||t()};return s.jsx("button",{onClick:n,disabled:r,"aria-disabled":r,title:r?" Mock ":void 0,className:`fixed bottom-5 left-5 z-[1000] flex items-center gap-1.5 rounded-xl bg-gradient-to-br from-[#1a1a2e] to-[#16213e] px-4 py-2.5 text-xs font-bold text-white shadow-[0_4px_20px_rgba(0,0,0,0.3)] ${r?"cursor-not-allowed opacity-60":"hover:brightness-110"}`,"aria-label":e?" API ":" Mock ",children:e?" Mock ":" API "})}const ua="mock",Da="mh_mock_mode",Fa=e=>{if(e==null)return null;const t=e.trim().toLowerCase();return["true","1","yes","on"].includes(t)?!0:["false","0","no","off"].includes(t)?!1:null},Tp=()=>{if(typeof window>"u")return null;const e=new URLSearchParams(window.location.search);return Fa(e.get(ua))},Cp=()=>{if(typeof window>"u"||!window.localStorage)return null;try{return Fa(window.localStorage.getItem(Da))}catch{return null}},Ip=e=>{if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(Da,String(e))}catch{}},Ap=e=>{if(!(typeof window>"u"))try{const t=new URL(window.location.href);e?t.searchParams.set(ua,"true"):t.searchParams.delete(ua),window.history.replaceState(null,"",t.toString())}catch{}},Os={isMockEnabled(){const e=Tp();if(e!==null)return e;const t=Cp();return t!==null?t:!1},setMock(e,t){return(t==null?void 0:t.persist)!==!1&&Ip(e),(t==null?void 0:t.updateUrl)!==!1&&Ap(e),e},subscribe(e){if(typeof window>"u")return()=>{};const t=r=>{if(r.storageArea!==window.localStorage||r.key!==Da)return;const n=Fa(r.newValue);n!==null&&e(n)};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)}},mc={"test-uuid":"","community-2":"","community-3":""};function hc(e,t=""){return e?mc[e]??t:t}function Vi(e){return e?e in mc:!1}const Gt={COMMUNITY_NAME:"",PRICE_UNIT:"",TITLE_12F:" 12F",TITLE_8F:" 8F",STAGE:"negotiation"},Zi={days:128,liked:73,contributions:15},fc=[{id:"1",title:Gt.TITLE_12F,price:1280,priceUnit:Gt.PRICE_UNIT,communityName:Gt.COMMUNITY_NAME},{id:"2",title:Gt.TITLE_8F,price:1150,priceUnit:Gt.PRICE_UNIT,communityName:Gt.COMMUNITY_NAME}],Lp={hasActive:!0,propertyName:Gt.TITLE_12F,stage:Gt.STAGE},pc=e=>new Date(Date.now()-e*60*1e3).toISOString(),xc=e=>pc(e*60),os=e=>pc(e*24*60),Be={HUIYU:{id:P.FEED.DEFAULT_COMMUNITY_ID,name:""},FARGLORY:{id:"community-2",name:""},CATHAY:{id:"community-3",name:""}},_e={CHEN_MS:{name:"",floor:"12F",type:"resident"},LI_MR:{name:"",floor:"8F",type:"resident"},WANG_MS:{name:"",floor:"5F",type:"resident"},ZHANG_MR:{name:""},YOU_AGENT:{name:"",type:"agent"},LIN_AGENT:{name:"",type:"agent"}},Mp=e=>[{id:`c-${e}-1`,postId:e,author:_e.WANG_MS.name,role:"resident",content:"",time:new Date(Date.now()-1*60*60*1e3).toISOString(),likes:2},{id:`c-${e}-2`,postId:e,author:_e.LI_MR.name,role:"resident",content:"+1",time:new Date(Date.now()-30*60*1e3).toISOString(),likes:0}],Rp=[{id:1001,author:_e.CHEN_MS.name,floor:_e.CHEN_MS.floor,type:_e.CHEN_MS.type,time:xc(2),title:"",content:" iRobot  5 ",images:[{src:"https://picsum.photos/id/1/800/600",alt:""}],likes:31,comments:2,communityId:Be.HUIYU.id,communityName:Be.HUIYU.name,commentList:Mp(1001)},{id:1002,author:_e.CHEN_MS.name,floor:_e.CHEN_MS.floor,type:"resident",time:os(1),title:" #",content:`

 15 `,images:[{src:"https://picsum.photos/id/13/800/600",alt:""},{src:"https://picsum.photos/id/15/800/600",alt:""}],views:89,likes:12,comments:0,communityId:Be.HUIYU.id,communityName:Be.HUIYU.name,commentList:[]},{id:1003,author:_e.LI_MR.name,floor:_e.LI_MR.floor,type:_e.LI_MR.type,time:os(3),title:" ",content:" B2-128  B1 ",likes:12,comments:1,communityId:Be.FARGLORY.id,communityName:Be.FARGLORY.name,commentList:[{id:"c-1003-1",postId:1003,author:_e.ZHANG_MR.name,role:"member",content:"",time:os(2),likes:1}]},{id:1004,author:_e.WANG_MS.name,floor:_e.WANG_MS.floor,type:_e.WANG_MS.type,time:os(7),title:"",content:"",likes:25,comments:0,communityId:Be.CATHAY.id,communityName:Be.CATHAY.name,commentList:[]},{id:1005,author:_e.LIN_AGENT.name,type:_e.LIN_AGENT.type,time:os(8),title:"  8F",content:"",images:[{src:"https://picsum.photos/id/59/800/600",alt:""},{src:"https://picsum.photos/id/60/800/600",alt:""}],views:156,likes:0,comments:0,communityId:Be.HUIYU.id,communityName:Be.HUIYU.name,commentList:[]}],Op={grade:"S",score:92,growth:15,tags:["","",""]},Pp={score:2560,days:128,liked:73,views:1250,replies:45,contacts:8},zp=[{id:"t1",type:"reply",content:"",isDone:!1,time:"10:00"},{id:"t2",type:"contact",content:"",isDone:!1,time:"14:30"},{id:"t3",type:"system",content:"",isDone:!0,time:"Yesterday"}],Dp=[{id:2101,author:_e.YOU_AGENT.name,type:_e.YOU_AGENT.type,time:xc(1),title:"  12F",content:" 50 AI  31% 4.6",views:89,likes:5,comments:2,communityId:Be.HUIYU.id,communityName:Be.HUIYU.name,commentList:[]},{id:2102,author:_e.LIN_AGENT.name,type:_e.LIN_AGENT.type,time:os(2),title:"  8F",content:"",views:156,likes:3,comments:1,communityId:Be.HUIYU.id,communityName:Be.HUIYU.name,commentList:[]},{id:2103,author:_e.CHEN_MS.name,floor:_e.CHEN_MS.floor,type:_e.CHEN_MS.type,time:os(3),title:"",content:" iRobot  5 ",likes:31,comments:14,communityId:Be.HUIYU.id,communityName:Be.HUIYU.name,commentList:[]}],Nr=e=>typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e)),Fp=()=>Nr(Rp),$p=()=>Nr(Dp),Up=()=>Nr(Op),Bp=()=>Nr(Pp),Gp=()=>Nr(zp),gc=e=>({hotPosts:[...e].sort((n,a)=>(a.likes||0)-(n.likes||0)).slice(0,3).map(n=>({id:n.id,title:n.title,communityName:n.communityName||"",likes:n.likes||0})),saleItems:fc}),bc=()=>{const e=Fp();return{posts:e,totalPosts:e.length,sidebarData:gc(e)}},Hp=()=>{const e=$p();return{posts:e,totalPosts:e.length,sidebarData:gc(e)}},Ke={VIEW_PRIVATE_WALL:"view:private_wall",POST_PRIVATE_WALL:"post:private_wall",VIEW_AGENT_STATS:"view:agent_stats",MANAGE_CLIENTS:"manage:clients",MANAGE_COMMUNITY:"manage:community"},Yi={guest:[],member:[],resident:[Ke.VIEW_PRIVATE_WALL,Ke.POST_PRIVATE_WALL],official:[Ke.VIEW_PRIVATE_WALL,Ke.POST_PRIVATE_WALL],agent:[Ke.VIEW_PRIVATE_WALL,Ke.VIEW_AGENT_STATS,Ke.MANAGE_CLIENTS],admin:[Ke.VIEW_PRIVATE_WALL,Ke.POST_PRIVATE_WALL,Ke.VIEW_AGENT_STATS,Ke.MANAGE_COMMUNITY,Ke.MANAGE_CLIENTS]};function vc(){const{role:e,isAuthenticated:t,loading:r}=Et(),n=m.useMemo(()=>!t||!e?new Set:(c=>typeof c=="string"&&Object.keys(Yi).includes(c))(e)?new Set(Yi[e]):new Set,[t,e]),a=m.useCallback(l=>n.has(l),[n]),i=m.useCallback(l=>l.some(c=>n.has(c)),[n]),o=m.useCallback(l=>l.every(c=>n.has(c)),[n]);return{hasPermission:a,hasAnyPermission:i,hasAllPermissions:o,role:e,isAuthenticated:t,isLoading:r,permissions:n}}const Wp={async uploadImage(e,t="community-images",r="posts"){if(!e.type.startsWith("image/"))throw new Error("");const n=5*1024*1024;if(e.size>n)throw new Error(" 5MB");const a=e.name.split(".").pop(),i=`${Xr()}.${a}`,o=r?`${r}/${i}`:i,{data:l,error:c}=await ce.storage.from(t).upload(o,e,{cacheControl:"3600",upsert:!1});if(c)throw console.error("[UploadService] Upload failed:",c),c;const{data:{publicUrl:d}}=ce.storage.from(t).getPublicUrl(o);return{url:d,path:o}},async uploadFiles(e,t="community-images",r="posts"){return Promise.all(e.map(n=>this.uploadImage(n,t,r)))}},Vp=P.FEED,yc="feed-mock-data-v2",Zp=3,At=e=>({hotPosts:[...e].sort((r,n)=>(n.likes||0)-(r.likes||0)).slice(0,Zp).map(r=>({id:r.id,title:r.title,communityName:r.communityName||Vp.DEFAULT_COMMUNITY_LABEL,likes:r.likes||0})),saleItems:fc}),Yp={posts:[],totalPosts:0,sidebarData:{hotPosts:[],saleItems:[]}},Kp=()=>bc(),Qp=5*60*1e3,ma=new Map,qp=e=>Date.now()-e.timestamp<Qp,Jp=e=>{const t=new Map,r=[];for(const n of e){const a=ma.get(n);a&&qp(a)?t.set(n,a.profile):(r.push(n),a&&ma.delete(n))}return{cached:t,uncached:r}},Xp=e=>{const t=Date.now();for(const r of e)ma.set(r.id,{profile:r,timestamp:t})},ex=(e,t)=>{const r=t?e.posts.filter(n=>n.communityId===t):e.posts;return{posts:r,totalPosts:r.length,sidebarData:At(r)}},tx=e=>e?e.length>40?`${e.slice(0,40)}...`:e:"",wc=()=>{try{return typeof window<"u"&&typeof window.localStorage<"u"}catch{return!1}},Ki=e=>{if(!wc())return e;try{const t=window.localStorage.getItem(yc);if(!t)return e;const r=JSON.parse(t),n=r.posts??e.posts;return{posts:n,totalPosts:r.totalPosts??e.totalPosts,sidebarData:At(n)}}catch(t){return console.error("[useFeedData] Failed to load mock state",t),e}},sx=e=>{if(wc())try{window.localStorage.setItem(yc,JSON.stringify(e))}catch(t){console.error("[useFeedData] Failed to persist mock state",t)}},rx=async e=>{if(!e.length)return new Map;const{cached:t,uncached:r}=Jp(e);if(r.length===0)return t;const{data:n,error:a}=await ce.from("profiles").select("id, name, floor, role").in("id",r);if(a)return console.error("[useFeedData] Fetch profiles failed",a),t;const i=(n??[]).map(l=>l);Xp(i);const o=new Map(t);for(const l of i)o.set(l.id,l);return o},nx=async e=>{const t=Array.from(new Set(e.map(a=>a.author_id).filter(a=>!!a))),r=await rx(t),n=e.map(a=>{const i=a.author_id?r.get(a.author_id):void 0,o=a.liked_by??[],l=(i==null?void 0:i.role)==="agent"?"agent":(i==null?void 0:i.role)==="resident"?"resident":"member",c={id:a.id,author:(i==null?void 0:i.name)??"",type:l,time:a.created_at??new Date().toISOString(),title:tx(a.content),content:a.content,likes:a.likes_count??o.length??0,comments:a.comments_count??0,pinned:a.is_pinned??!1,communityId:a.community_id,communityName:hc(a.community_id),liked_by:o,private:a.visibility==="private"};return i!=null&&i.floor?{...c,floor:i.floor}:c});return{posts:n,totalPosts:n.length,sidebarData:At(n)}},ax=(e,t,r)=>({id:Date.now(),author:"",type:"resident",time:new Date().toISOString(),title:e.substring(0,20)+(e.length>20?"...":""),content:e,likes:0,comments:0,pinned:!1,communityId:t,communityName:r,commentList:[]});function jc(e={}){const{user:t,role:r,isAuthenticated:n}=Et(),{communityId:a,initialMockData:i,persistMockState:o=!0}=e,{hasPermission:l}=vc(),c=l(Ke.VIEW_PRIVATE_WALL),d=i??Kp(),[h,u]=m.useState(()=>Os.isMockEnabled());m.useEffect(()=>Os.subscribe(u),[]);const x=t==null?void 0:t.id,[f,g]=m.useState(()=>{const F=o?Ki(d):d,re=F.posts.filter(G=>!(G.private&&!c));return{...F,posts:re,totalPosts:re.length,sidebarData:At(re)}}),b=m.useRef(!1),[v,p]=m.useState(()=>new Set),w=m.useRef(!1);m.useEffect(()=>{h||(p(new Set),w.current=!1)},[h]),m.useEffect(()=>{if(!o||!h)return;if(!b.current){b.current=!0;return}const F=Ki(d),re=F.posts.filter(G=>!(G.private&&!c));g({...F,posts:re,totalPosts:re.length,sidebarData:At(re)})},[h,o,d,c]),m.useEffect(()=>{!o||!h||sx(f)},[f,o,h]);const[k,N]=m.useState(null),[T,S]=m.useState(!1),[C,_]=m.useState(null),B=m.useRef(null),[j,E]=m.useState(()=>new Set),O=m.useCallback(async()=>{if(!h){S(!0),_(null);try{const F=ce.from("community_posts").select("id, community_id, author_id, content, visibility, likes_count, comments_count, liked_by, is_pinned, created_at, post_type").order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).limit(50);a&&F.eq("community_id",a),c||F.eq("visibility","public");const{data:re,error:G}=await F;if(G)throw G;const te=await nx(re??[]),ie=te.posts.filter(W=>!(W.private&&!c)),pe={...te,posts:ie,totalPosts:ie.length,sidebarData:At(ie)};if(N(pe),B.current=pe,x){const W=new Set;(re??[]).forEach(K=>{(K.liked_by??[]).includes(x)&&W.add(K.id)}),E(W)}}catch(F){const re=F instanceof Error?F:new Error("");_(re)}finally{S(!1)}}},[h,a,x,c]);m.useEffect(()=>{h||O()},[h,O]);const L=m.useMemo(()=>{if(h)return ex(f,a);if(k)return B.current=k,k;const F=B.current??Yp;return c?F:{...F,posts:F.posts.filter(re=>!re.private)}},[h,k,f,a,c]),D=m.useMemo(()=>r??"guest",[r]);m.useEffect(()=>{if(!h||!x||w.current)return;w.current=!0;const F=new Set;f.posts.forEach(re=>{var G;(G=re.liked_by)!=null&&G.includes(x)&&F.add(re.id)}),p(F)},[h,x,f]);const I=m.useCallback(()=>{if(x)return x;const F="mock_user_id";let re=localStorage.getItem(F);return re||(re=`mock-user-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,localStorage.setItem(F,re)),re},[x]),M=m.useCallback(F=>h?v.has(F):j.has(F),[h,v,j]),$=m.useCallback(async()=>{if(h){g(F=>({...F}));return}await O()},[h,O]),R=m.useCallback(async F=>{if(!h&&!n)throw new Error("");if(h){const W=I(),K=v.has(F);g(de=>({...de,posts:de.posts.map(H=>{if(H.id!==F)return H;const ae=H.likes??0,he=H.liked_by??[];return{...H,likes:K?Math.max(0,ae-1):ae+1,liked_by:K?he.filter(Tt=>Tt!==W):[...he,W]}})})),p(de=>{const H=new Set(de);return H.has(F)?H.delete(F):H.add(F),H});return}const re=x;if(!re)throw new Error("");const G=String(F),te=j.has(F),ie=k,pe=new Set(j);N(W=>W&&{...W,posts:W.posts.map(K=>{if(K.id!==F)return K;const de=K.likes??0,H=K.liked_by??[],ae=te?H.filter(he=>he!==re):[...H,re];return{...K,likes:te?Math.max(0,de-1):de+1,liked_by:ae}})}),E(W=>{const K=new Set(W);return K.has(F)?K.delete(F):K.add(F),K});try{const{data:W,error:K}=await ce.rpc("toggle_like",{post_id:G});if(K)throw K;N(de=>de&&{...de,posts:de.posts.map(H=>{if(H.id!==F)return H;const ae=typeof(W==null?void 0:W.likes_count)=="number"?W.likes_count:H.likes??0,he=H.liked_by??[],Tt=W&&"liked"in W?W.liked?[...new Set([...he,re])]:he.filter(rs=>rs!==re):he;return{...H,likes:ae,liked_by:Tt}})})}catch(W){throw N(ie),E(pe),W instanceof Error?W:new Error("")}},[h,v,j,k,I,n,x]),ee=m.useCallback(async(F,re,G)=>{var de;if(!h&&!n)throw new Error("");const te=re??e.communityId;te&&!Vi(te)&&console.warn("[useFeedData] Invalid communityId provided, fallback to undefined");const ie=te&&Vi(te)?te:void 0;if(!h&&!ie)throw new Error("");const pe=hc(ie);if(h){const H=ax(F,ie,pe);G&&G.length>0&&(H.images=G.map((ae,he)=>({src:`https://picsum.photos/seed/${Date.now()+he}/400/300`,alt:"Mock Image"}))),g(ae=>({...ae,posts:[H,...ae.posts],totalPosts:ae.totalPosts+1,sidebarData:At([H,...ae.posts])}));return}const W=-Date.now(),K={id:W,author:((de=t==null?void 0:t.user_metadata)==null?void 0:de.name)||(t==null?void 0:t.email)||"",type:["agent","resident","official"].includes(r||"")?r:"member",time:new Date().toISOString(),title:F.substring(0,20),content:F,likes:0,comments:0,pinned:!1,communityId:ie,communityName:pe,commentList:[],...G&&G.length>0?{images:G.map(H=>({src:URL.createObjectURL(H),alt:H.name}))}:{}};N(H=>H&&{...H,posts:[K,...H.posts],totalPosts:H.totalPosts+1,sidebarData:At([K,...H.posts])});try{let H=[];G&&G.length>0&&(H=(await Wp.uploadFiles(G)).map(Tt=>({src:Tt.url,alt:"Post Image"})));const{error:ae}=await ce.from("community_posts").insert({content:F,community_id:ie,author_id:x,post_type:"general",images:H});if(ae)throw ae;await O()}catch(H){throw console.error("[useFeedData] Create post failed",H),N(ae=>ae&&{...ae,posts:ae.posts.filter(he=>he.id!==W),totalPosts:ae.totalPosts-1,sidebarData:At(ae.posts.filter(he=>he.id!==W))}),H}},[h,n,e.communityId,t,r,x,O]),Q=m.useCallback(async(F,re)=>{var pe;if(!h&&!n)throw new Error("");const te={id:h?Date.now():-Date.now(),postId:F,author:((pe=t==null?void 0:t.user_metadata)==null?void 0:pe.name)||"",role:["agent","resident","official"].includes(r||"")?r:"member",content:re,time:new Date().toISOString(),likes:0,isLiked:!1};if(h){g(W=>({...W,posts:W.posts.map(K=>{if(K.id!==F)return K;const de=[...K.commentList||[],te];return{...K,comments:de.length,commentList:de}})}));return}const ie=k;N(W=>W&&{...W,posts:W.posts.map(K=>{if(K.id!==F)return K;const de=[...K.commentList||[],te];return{...K,comments:de.length,commentList:de}})});try{S(!0);const{error:W}=await ce.from("community_comments").insert({post_id:F,community_id:e.communityId,user_id:x,content:re});if(W)throw W;await O()}catch(W){throw N(ie),_(W),W}finally{S(!1)}},[h,n,t,r,x,e.communityId,k,O]);return{data:L,useMock:h,setUseMock:u,isLoading:h?!1:T,error:h?null:C,refresh:$,toggleLike:R,createPost:ee,addComment:Q,viewerRole:D,isAuthenticated:n,isLiked:M}}const ix=bc(),De=P.FEED;function ox(e,t){const{user:r,isAuthenticated:n,role:a,loading:i}=Et(),{data:o,useMock:l,setUseMock:c,isLoading:d,error:h,refresh:u,toggleLike:x,createPost:f,addComment:g,isLiked:b}=jc({initialMockData:ix}),v=t||(e==null?void 0:e.startsWith("demo-")),p=n||v;m.useEffect(()=>{t!==void 0&&c(t)},[t,c]),m.useEffect(()=>{document.title=P.FEED.PAGE_TITLE},[]);const w=m.useMemo(()=>{var E,O;return p?n&&r?{id:r.id,name:((E=r.user_metadata)==null?void 0:E.name)||((O=r.email)==null?void 0:O.split("@")[0])||De.DEFAULT_USER,role:a||"member",stats:Zi,communityId:De.DEFAULT_COMMUNITY_ID,communityName:De.DEFAULT_COMMUNITY_NAME}:v?{id:"demo-user",name:De.DEFAULT_USER,role:e==="demo-agent"?"agent":"member",stats:Zi,communityId:De.DEFAULT_COMMUNITY_ID,communityName:De.DEFAULT_COMMUNITY_NAME}:null:null},[n,r,a,v,e,p]),[k]=m.useState(()=>{try{return localStorage.getItem("mai_active_tx")==="true"?Lp:{hasActive:!1}}catch{return{hasActive:!1}}}),N=m.useMemo(()=>o.sidebarData,[o.sidebarData]),T=m.useCallback(async E=>{if(!p){Z.error(De.NOTIFY.LOGIN_REQUIRED,De.NOTIFY.LOGIN_REQUIRED_LIKE);return}try{await x(E)}catch{Z.error(De.NOTIFY.LIKE_FAILED,De.NOTIFY.LIKE_FAILED_DESC)}},[x,p]),S=m.useCallback(async(E,O)=>{if(!p){Z.error(De.NOTIFY.LOGIN_REQUIRED,De.NOTIFY.LOGIN_REQUIRED_POST);return}try{await f(E,w==null?void 0:w.communityId,O)}catch(L){throw L}},[f,p,w]),C=m.useCallback(E=>{Z.info("","")},[]),_=m.useCallback(async(E,O)=>{if(!p){Z.error(De.NOTIFY.LOGIN_REQUIRED,De.NOTIFY.LOGIN_REQUIRED_POST);return}try{await g(E,O),Z.success(De.POST.COMMENT_SUCCESS.TITLE,De.POST.COMMENT_SUCCESS.DESC)}catch{Z.error("","")}},[p,g]),B=m.useCallback(async E=>{const O=`${window.location.origin}${window.location.pathname}?post=${E}`,L={title:"MaiHouses ",text:"",url:O};if(navigator.share&&navigator.canShare(L))try{await navigator.share(L)}catch(D){D.name!=="AbortError"&&Z.error("","")}else navigator.clipboard.writeText(O).then(()=>{Z.success("","")}).catch(()=>{Z.error("","")})},[]),j=(w==null?void 0:w.name.charAt(0).toUpperCase())||"U";return{authLoading:i,activeTransaction:k,userProfile:w,userInitial:j,isAuthenticated:p,isLoading:d,error:h,data:o,sidebarData:N,useMock:l,setUseMock:c,refresh:u,isLiked:b,handleLike:T,handleCreatePost:S,handleReply:C,handleComment:_,handleShare:B}}function lx(){return s.jsxs("div",{className:"flex h-40 w-full flex-col items-center justify-center space-y-3 rounded-lg bg-gray-50 p-6",children:[s.jsx("div",{className:"size-8 animate-spin rounded-full border-4 border-brand-200 border-t-brand-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-500",children:P.WALL_STATES.LOADING_LABEL})]})}function cx({permission:e,children:t,fallback:r=null}){const{hasPermission:n,isLoading:a}=vc();return a?s.jsx(lx,{}):n(e)?s.jsx(s.Fragment,{children:t}):s.jsx(s.Fragment,{children:r})}const dx=m.memo(function(){const{isAuthenticated:t}=Et(),r=()=>{t?Z.info(P.COMMUNITY.NOTIFY_VERIFY_REQUIRED,P.COMMUNITY.NOTIFY_VERIFY_REQUIRED_DESC):(Z.info(P.COMMUNITY.NOTIFY_LOGIN_TITLE,P.COMMUNITY.NOTIFY_LOGIN_DESC),setTimeout(()=>{window.location.href=ve.AUTH},1500))};return s.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gray-50 p-6 min-h-[400px] border border-gray-100",role:"alert","aria-live":"polite","aria-labelledby":"lock-title","aria-describedby":"lock-desc",children:[s.jsx("div",{className:"absolute inset-0 z-0 p-6 opacity-40 blur-md pointer-events-none select-none bg-white/50","aria-hidden":"true",children:[1,2,3].map(n=>s.jsxs("div",{className:"mb-4 space-y-3 rounded-lg bg-gray-100 p-4 shadow-sm opacity-60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"size-10 rounded-full bg-gray-300"}),s.jsx("div",{className:"h-4 w-24 rounded bg-gray-300"})]}),s.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-300"}),s.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-300"})]},n))}),s.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center p-6 text-center bg-gradient-to-b from-transparent via-white/80 to-white",children:[s.jsx("div",{className:"mb-4 rounded-full bg-white p-4 shadow-xl ring-1 ring-gray-100 animate-bounce-subtle",children:s.jsx(Sa,{className:"size-8 text-brand-600","aria-hidden":"true"})}),s.jsx("h3",{id:"lock-title",className:"mb-2 text-xl font-bold text-gray-900 drop-shadow-sm",children:P.COMMUNITY.LOCKED_TITLE}),s.jsx("p",{id:"lock-desc",className:"mb-6 max-w-xs text-sm text-gray-600 font-medium",children:t?P.COMMUNITY.LOCKED_DESC_USER:P.COMMUNITY.LOCKED_DESC_GUEST}),s.jsx("button",{onClick:r,className:"rounded-full bg-brand-600 px-8 py-3 text-base font-bold text-white shadow-lg transition-all hover:bg-brand-700 hover:scale-105 active:scale-95 focus:outline-none focus:ring-4 focus:ring-brand-500/30","aria-label":t?P.COMMUNITY.BTN_UNLOCK_USER:P.COMMUNITY.BTN_UNLOCK_GUEST,children:t?P.COMMUNITY.BTN_UNLOCK_USER:P.COMMUNITY.BTN_UNLOCK_GUEST})]})]})});function ux(){const{isAuthenticated:e}=Et();return{count:m.useMemo(()=>0,[e]),isLoading:!1}}const Qs=P.FEED;function Qi(){return s.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(e=>s.jsxs("div",{className:"rounded-2xl border border-brand-100 bg-white p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-50 pb-3",children:[s.jsx("div",{className:"size-10 rounded-full bg-gray-200"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 w-24 rounded bg-gray-200"}),s.jsx("div",{className:"h-3 w-32 rounded bg-gray-200"})]})]}),s.jsxs("div",{className:"space-y-2 pt-3",children:[s.jsx("div",{className:"h-4 w-full rounded bg-gray-200"}),s.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-200"})]})]},e))})}function qi(){return s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-brand-100 bg-white px-6 py-12 text-center shadow-sm",children:[s.jsx("div",{className:"mb-3 text-4xl",children:""}),s.jsx("h3",{className:"mb-1 text-base font-bold text-gray-900",children:Qs.EMPTY.TITLE}),s.jsx("p",{className:"text-sm text-gray-500",children:Qs.EMPTY.DESC})]})}function mx({message:e,onRetry:t}){return s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-red-100 bg-red-50 px-6 py-12 text-center shadow-sm",children:[s.jsx("div",{className:"mb-3 text-4xl",children:""}),s.jsx("h3",{className:"mb-1 text-base font-bold text-red-700",children:Qs.ERROR.LOAD_FAILED}),s.jsx("p",{className:"mb-4 text-sm text-red-600",children:e}),s.jsx("button",{type:"button",onClick:t,className:"rounded-lg bg-brand-700 px-4 py-2 text-sm font-bold text-white shadow-sm hover:bg-brand-600",children:Qs.ERROR.RETRY})]})}function hx({userId:e,forceMock:t}){const{authLoading:r,activeTransaction:n,userProfile:a,userInitial:i,isAuthenticated:o,isLoading:l,error:c,data:d,useMock:h,setUseMock:u,refresh:x,isLiked:f,handleLike:g,handleCreatePost:b,handleReply:v,handleComment:p,handleShare:w}=ox(e,t),{count:k}=ux();m.useEffect(()=>{const _=()=>{window.location.hash==="#profile"&&window.scrollTo({top:0,behavior:"smooth"})};_(),window.addEventListener("hashchange",_);const j=new URLSearchParams(window.location.search).get("post");if(j){const E=(O=0)=>{const L=document.getElementById(`post-${j}`);L?(L.scrollIntoView({behavior:"smooth",block:"center"}),L.classList.add("ring-2","ring-brand-500","ring-offset-2"),setTimeout(()=>L.classList.remove("ring-2","ring-brand-500","ring-offset-2"),2e3)):O<10&&setTimeout(()=>E(O+1),500)};setTimeout(()=>E(),500)}return()=>window.removeEventListener("hashchange",_)},[d.posts]);const N=_=>{},[T,S]=m.useState("public"),C=d.posts.filter(_=>T==="private"?_.private:!_.private);return r?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-brand-50 to-brand-100/50",children:[s.jsx(cs,{mode:"consumer"}),s.jsx("div",{className:"mx-auto max-w-[960px] p-4",children:s.jsx(Qi,{})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 md:pb-0",children:[s.jsx(cs,{mode:"consumer",notificationCount:k,onSearch:N,className:"sticky top-0 z-30"}),n.hasActive&&s.jsx(vp,{transaction:n,className:"mt-2"}),s.jsxs("div",{className:"mx-auto flex max-w-[960px] gap-5 p-4 pb-[calc(80px+env(safe-area-inset-bottom,20px))] lg:pb-4",children:[s.jsxs("main",{className:"flex max-w-[560px] flex-1 flex-col gap-3",children:[a&&s.jsx(gp,{profile:a}),o&&s.jsx(uc,{onSubmit:(_,B)=>b(_,B),disabled:l,userInitial:i}),s.jsxs("div",{className:"flex rounded-lg bg-white p-1 shadow-sm",children:[s.jsx("button",{onClick:()=>S("public"),className:`flex-1 rounded-md py-2 text-sm font-bold transition-all ${T==="public"?"bg-brand-50 text-brand-700 shadow-sm":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:Qs.TABS.PUBLIC}),s.jsx("button",{onClick:()=>S("private"),className:`flex-1 rounded-md py-2 text-sm font-bold transition-all ${T==="private"?"bg-brand-50 text-brand-700 shadow-sm":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:Qs.TABS.PRIVATE})]}),l?s.jsx(Qi,{}):c?s.jsx(mx,{message:c.message,onRetry:x}):s.jsx(s.Fragment,{children:T==="private"?s.jsx(cx,{permission:Ke.VIEW_PRIVATE_WALL,fallback:s.jsx(dx,{}),children:C.length===0?s.jsx(qi,{}):s.jsx("div",{className:"space-y-3",children:C.map(_=>s.jsx(da,{post:_,isLiked:f(_.id),onLike:g,onReply:v,onComment:p,onShare:w},_.id))})}):C.length===0?s.jsx(qi,{}):s.jsx("div",{className:"space-y-3",children:C.map(_=>s.jsx("div",{id:`post-${_.id}`,className:"space-y-3",children:s.jsx(da,{post:_,isLiked:f(_.id),onLike:g,onReply:v,onComment:p,onShare:w})},_.id))})})]}),s.jsxs("aside",{className:"hidden w-[380px] lg:block",children:[s.jsx(_p,{data:d.sidebarData}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(za,{useMock:h,onToggle:()=>u(!h)})})]})]})]})}function fx(e){return s.jsx(Ep,{children:s.jsx(hx,{...e})})}const px=m.memo(function({profile:t,stats:r,className:n=""}){const a=t.name.charAt(0).toUpperCase();return t.communityName||P.FEED.DEFAULT_COMMUNITY_NAME,s.jsxs("section",{className:`bg-white border border-[#e6edf7] rounded-2xl p-4 shadow-[0_4px_14px_rgba(0,51,102,0.04)] flex flex-col gap-3.5 ${n}`,children:[s.jsxs("div",{className:"flex items-center gap-3.5",children:[s.jsx("div",{className:"flex w-[60px] h-[60px] rounded-full bg-gradient-to-br from-[#eef3ff] to-white border border-[#e6edf7] items-center justify-center font-black text-[#00385a] text-[22px]",children:a}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"m-0 mb-1 text-[18px] font-black text-[#0b214a]",children:t.name}),s.jsxs("p",{className:"m-0 text-[13px] text-[#6c7b91] flex items-center gap-1",children:[P.AGENT.PROFILE.FROM_STORE," |",s.jsx("span",{className:"inline-flex items-center px-2 py-[3px] rounded-md font-extrabold text-[11px] text-[#854d0e] bg-[#fef9c3] border border-[#fde047] align-middle",children:P.AGENT.PROFILE.BADGE_GOLD}),s.jsx("span",{className:"inline-flex items-center px-2 py-[3px] rounded-md font-extrabold text-[11px] text-[#854d0e] bg-[#fef9c3] border border-[#fde047] align-middle ml-1",children:P.AGENT.PROFILE.BADGE_VERIFIED})]})]})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs("span",{className:"inline-flex items-center px-2.5 py-[5px] rounded-full border border-[#cbead4] bg-gradient-to-b from-[#f3fff8] to-[#e8faef] font-bold text-[12px] text-[#0e8d52]",children:[P.AGENT.PROFILE.STATS_SCORE," ",r.score.toLocaleString()]}),s.jsxs("span",{className:"inline-flex items-center px-2.5 py-[5px] rounded-full border border-[#cbead4] bg-gradient-to-b from-[#f3fff8] to-[#e8faef] font-bold text-[12px] text-[#0e8d52]",children:[P.AGENT.PROFILE.STATS_DAYS," ",r.days," "]}),s.jsxs("span",{className:"inline-flex items-center px-2.5 py-[5px] rounded-full border border-[#cbead4] bg-gradient-to-b from-[#f3fff8] to-[#e8faef] font-bold text-[12px] text-[#0e8d52]",children:[P.AGENT.PROFILE.STATS_LIKED," ",r.liked]})]}),s.jsxs("div",{className:"flex gap-2.5 flex-wrap justify-start",children:[s.jsx(it,{to:ve.UAG,className:"inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full border-none text-white bg-gradient-to-br from-[#00385a] to-[#005282] font-bold text-[13px] no-underline opacity-100 transition-all hover:opacity-100",children:P.AGENT.PROFILE.LINK_WORKBENCH}),s.jsx(it,{to:`/community/${t.communityId||"test-uuid"}/wall`,className:"inline-flex items-center justify-center gap-1.5 px-4 py-2.5 rounded-full border border-[#bfdbfe] border-solid text-[#00385a] bg-[#eff6ff] font-bold text-[13px] no-underline opacity-100 transition-all ml-auto max-[400px]:ml-0 max-[400px]:w-full",children:P.AGENT.PROFILE.LINK_WALL})]})]})}),xx=({stats:e,todos:t,hotPosts:r=[],className:n=""})=>s.jsxs("aside",{className:`hidden md:flex flex-col gap-3 w-[280px] shrink-0 sticky top-[70px] self-start ${n}`,children:[s.jsxs("div",{className:"bg-white border border-[#e6edf7] rounded-[14px] p-[14px] shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"m-0 mb-2.5 text-[14px] font-bold text-[#00385a]",children:P.AGENT.SIDEBAR.NAV_TITLE}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx(it,{to:ve.UAG,className:"flex items-center gap-2 p-2.5 rounded-[10px] no-underline text-white text-[13px] font-semibold bg-gradient-to-br from-[#00385a] to-[#005282]",children:P.AGENT.SIDEBAR.LINK_UAG}),s.jsx(it,{to:`${ve.UAG}#stats`,className:"flex items-center gap-2 p-2.5 rounded-[10px] no-underline text-[#0b214a] text-[13px] font-semibold hover:bg-[#f0f7ff] transition-colors",children:P.AGENT.SIDEBAR.LINK_STATS}),s.jsx(it,{to:ve.ASSURE,className:"flex items-center gap-2 p-2.5 rounded-[10px] no-underline text-[#0b214a] text-[13px] font-semibold hover:bg-[#f0f7ff] transition-colors",children:P.AGENT.SIDEBAR.LINK_TRUST}),s.jsxs(it,{to:"/community/test-uuid/wall",className:"flex items-center gap-2 p-2.5 rounded-[10px] no-underline text-[#0b214a] text-[13px] font-semibold hover:bg-[#f0f7ff] transition-colors relative",children:[P.AGENT.SIDEBAR.LINK_WALL,s.jsx("span",{className:"absolute right-2 top-3 w-2 h-2 rounded-full bg-red-500"})]})]})]}),s.jsxs("div",{className:"bg-white border border-[#e6edf7] rounded-[14px] p-[14px] shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"m-0 mb-2.5 text-[14px] font-bold text-[#00385a]",children:P.AGENT.SIDEBAR.PERF_TITLE}),s.jsxs("p",{className:"text-[13px] text-[#6c7b91] m-0 leading-[1.8]",children:[P.AGENT.SIDEBAR.PERF_DEAL_COUNT_PREFIX," ",s.jsx("b",{className:"text-[#00385a]",children:"2"})," ",P.AGENT.SIDEBAR.PERF_DEAL_COUNT_UNIT,s.jsx("br",{}),P.AGENT.SIDEBAR.PERF_AMOUNT_PREFIX," ",s.jsx("b",{className:"text-[#00385a]",children:"$3,280"}),s.jsx("br",{}),P.AGENT.SIDEBAR.PERF_CLIENTS_PREFIX," ",s.jsx("b",{className:"text-[#00385a]",children:"18"})," ",P.AGENT.SIDEBAR.PERF_CLIENTS_UNIT]})]}),s.jsxs("div",{className:"bg-white border border-[#e6edf7] rounded-[14px] p-[14px] shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[s.jsx("h4",{className:"m-0 text-[14px] font-bold text-[#00385a]",children:P.AGENT.SIDEBAR.TODO_TITLE}),t.length>0&&s.jsx("span",{className:"bg-red-100 text-red-600 text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:t.length})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[t.map(a=>s.jsxs("div",{className:"text-[13px] text-[#6c7b91] leading-tight flex gap-1.5 align-baseline",children:[s.jsx("span",{className:"shrink-0",children:a.type==="contact"?"":""}),s.jsx("span",{children:a.content})]},a.id)),t.length===0&&s.jsx("span",{className:"text-gray-400 text-xs",children:P.AGENT.SIDEBAR.TODO_EMPTY})]})]}),r.length>0&&s.jsxs("div",{className:"bg-white border border-[#e6edf7] rounded-[14px] p-[14px] shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"m-0 mb-2.5 text-[14px] font-bold text-[#00385a]",children:P.FEED.SIDEBAR.HOT_TITLE}),s.jsx("ul",{className:"m-0 p-0 list-none flex flex-col gap-3",children:r.map(a=>s.jsxs("li",{className:"text-[13px] leading-tight",children:[s.jsx(it,{to:`/post/${a.id}`,className:"text-[#0b214a] no-underline hover:text-[#005282] font-medium block mb-0.5 line-clamp-2",children:a.title}),s.jsxs("span",{className:"text-[#94a3b8] text-[11px] flex items-center gap-1",children:[a.communityName,"   ",a.likes]})]},a.id))})]})]}),gx=({data:e,className:t=""})=>s.jsxs("article",{className:`bg-white border border-[#e6edf7] rounded-2xl p-4 flex flex-col gap-3 shadow-[0_4px_14px_rgba(12,34,80,0.04)] animate-in fade-in slide-in-from-bottom-4 duration-500 ${t}`,children:[s.jsxs("div",{className:"flex gap-3 items-center border-b border-[#f1f5f9] pb-2.5",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#faefe5] flex items-center justify-center text-[#92400e] font-black border border-[#e6edf7]",children:""}),s.jsxs("div",{className:"flex-1 leading-[1.3]",children:[s.jsx("b",{className:"block text-[15px] text-[#0f172a]",children:P.AGENT.UAG.TITLE}),s.jsx("div",{className:"text-[12px] text-[#6c7b91]",children:"UAG   "})]})]}),s.jsx("div",{className:"pt-1",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"flex items-center justify-center h-[34px] border border-[#cbead4] rounded-full text-[14px] font-semibold bg-[#e8faef] text-[#107a39]",children:["S ",e.grade==="S"?"2":"0"]}),s.jsxs("div",{className:"flex items-center justify-center h-[34px] border border-[#cbead4] rounded-full text-[14px] font-semibold bg-[#e8faef] text-[#107a39]",children:["A ",e.grade==="S"?"1":"0"]}),s.jsx("div",{className:"flex items-center justify-center h-[34px] border border-[#e6edf7] rounded-full text-[14px] font-semibold text-[#64748b]",children:"B 0"}),s.jsx("div",{className:"flex items-center justify-center h-[34px] border border-[#e6edf7] rounded-full text-[14px] font-semibold text-[#64748b]",children:" 1"}),s.jsx("div",{className:"flex items-center justify-center h-[34px] border border-[#e6edf7] rounded-full text-[14px] font-semibold text-[#64748b]",children:" 0"}),s.jsxs("div",{className:"flex items-center justify-center h-[34px] border border-[#e6edf7] rounded-full text-[14px] font-semibold text-[#64748b]",children:["7 ",e.growth]})]})}),s.jsx("div",{className:"flex justify-end mt-2.5",children:s.jsx(it,{to:ve.UAG,className:"px-3 py-2 rounded-xl bg-[#00385a] text-white no-underline border-none font-bold text-[14px] hover:bg-[#002840] transition-colors",children:P.AGENT.UAG.LINK_WORKBENCH})})]});function bx(e,t){const r=m.useMemo(()=>Hp(),[]),n=jc({persistMockState:!0,initialMockData:r}),a=m.useMemo(()=>Up(),[]),i=m.useMemo(()=>Bp(),[]),o=m.useMemo(()=>Gp(),[]),{addComment:l}=n,c=m.useCallback(async(d,h)=>{try{await l(d,h),Z.success(P.FEED.POST.COMMENT_SUCCESS.TITLE,P.FEED.POST.COMMENT_SUCCESS.DESC)}catch{Z.error("","")}},[l]);return{...n,uagSummary:a,performanceStats:i,todoList:o,handleComment:c}}function vx({userId:e,forceMock:t}){const{data:r,uagSummary:n,performanceStats:a,todoList:i,viewerRole:o,createPost:l,toggleLike:c,isLiked:d,handleComment:h,useMock:u,setUseMock:x}=bx(),{user:f}=Et(),g=m.useMemo(()=>{var v;return{id:(f==null?void 0:f.id)||"demo-agent",name:((v=f==null?void 0:f.user_metadata)==null?void 0:v.name)||"",role:o||"agent",communityId:P.FEED.DEFAULT_COMMUNITY_ID,communityName:P.FEED.DEFAULT_COMMUNITY_NAME,email:(f==null?void 0:f.email)||"agent@maihouses.com",stats:{days:a.days,liked:a.liked,contributions:a.replies}}},[f,o,a]),b=async(v,p)=>{await l(v,g.communityId,p)};return s.jsxs("div",{className:"min-h-screen bg-[#f6f9ff]",children:[s.jsx(cs,{mode:"agent",title:P.FEED.PAGE_TITLE}),s.jsxs("div",{className:"mx-auto max-w-[960px] flex gap-5 p-2.5 pb-24 md:pb-5",children:[s.jsxs("main",{className:"flex-1 max-w-[560px] flex flex-col gap-3 pb-20 md:pb-0 mx-auto w-full",children:[s.jsx(px,{profile:g,stats:a}),s.jsx(uc,{userInitial:g.name.charAt(0).toUpperCase(),onSubmit:b}),s.jsx(gx,{data:n}),s.jsxs("article",{className:"bg-white border border-[#e6edf7] rounded-2xl p-4 flex flex-col gap-3 shadow-[0_4px_14px_rgba(12,34,80,0.04)] animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("div",{className:"flex gap-3 items-center border-b border-[#f1f5f9] pb-2.5",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#eef3ff] flex items-center justify-center text-[#173a7c] font-black border border-[#e6edf7]",children:""}),s.jsxs("div",{className:"flex-1 leading-[1.3]",children:[s.jsx("b",{className:"block text-[15px] text-[#0f172a]",children:P.AGENT.TRUST.TITLE}),s.jsx("div",{className:"text-[12px] text-[#6c7b91]",children:"   12F A2  "})]})]}),s.jsxs("div",{className:"pt-1",children:[s.jsx("p",{className:"m-0 mb-2.5 leading-[1.6]",children:P.AGENT.TRUST.DESC_1}),s.jsx("p",{className:"m-0 mb-2.5 leading-[1.6]",children:P.AGENT.TRUST.DESC_2}),s.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[s.jsx("span",{className:"border border-[#cbead4] bg-[#e8faef] rounded-full px-2 py-0.5 text-[12px] text-[#107a39]",children:P.AGENT.TRUST.TAG_COMPLETED}),s.jsx("span",{className:"border border-[#e6edf7] bg-white rounded-full px-2 py-0.5 text-[12px]",children:P.AGENT.TRUST.TAG_CERT}),s.jsx("span",{className:"border border-[#e6edf7] bg-white rounded-full px-2 py-0.5 text-[12px]",children:P.AGENT.TRUST.TAG_PRIVATE})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"border border-[#e6edf7] rounded-lg bg-white px-3 py-2 font-extrabold flex-1 text-sm",children:P.AGENT.TRUST.BTN_LIKE}),s.jsx("button",{className:"border border-[#e6edf7] rounded-lg bg-white px-3 py-2 font-extrabold flex-1 text-sm",children:P.AGENT.TRUST.BTN_REPLY}),s.jsx("button",{className:"border border-[#1749d7] rounded-lg bg-[#1749d7] text-white px-3 py-2 font-extrabold flex-1 text-sm",children:P.AGENT.TRUST.BTN_DETAIL})]})]}),r.posts.map(v=>s.jsx(da,{post:v,isLiked:d(v.id),onLike:()=>c(v.id),onComment:h,className:"animate-in fade-in slide-in-from-bottom-4 duration-500"},v.id))]}),s.jsx(xx,{stats:a,todos:i,hotPosts:r.sidebarData.hotPosts})]}),s.jsx(za,{useMock:u,onToggle:()=>x(!u)})]})}function yx({currentRole:e,onToggle:t,className:r=""}){const n=e==="agent";return s.jsxs("button",{onClick:t,className:`fixed bottom-24 right-4 z-[9999] flex items-center gap-2 rounded-full px-4 py-3 font-bold text-white shadow-lg transition-all active:scale-95 ${n?"bg-gradient-to-r from-amber-500 to-amber-600 shadow-amber-200":"bg-gradient-to-r from-brand-500 to-brand-600 shadow-brand-200"} ${r}`,title:n?P.AGENT.OOS.SWITCH_TO_CONSUMER:P.AGENT.OOS.SWITCH_TO_AGENT,children:[n?s.jsx(ll,{size:20}):s.jsx(Md,{size:20}),s.jsx("span",{children:n?P.AGENT.ROLE.AGENT:P.AGENT.ROLE.CONSUMER})]})}const wx=["demo-001","demo-consumer","demo-agent"];function jx(){const{userId:e}=br(),[t]=vr(),[r,n]=m.useState("member"),[a,i]=m.useState(null),[o,l]=m.useState(!0),c=t.get("mock"),d=e?wx.includes(e):!1,h=c==="true"||d;m.useEffect(()=>{if(!e){l(!1);return}if(d){n(e==="demo-agent"?"agent":"member"),l(!1);return}(async()=>{try{const{data:g,error:b}=await ce.from("profiles").select("role").eq("id",e).single();if(b)throw b;n((g==null?void 0:g.role)||"member")}catch(g){console.error("[Feed] Failed to fetch role:",g),n("member")}finally{l(!1)}})()},[e,d]);const u=a||r,x=()=>{i(u==="agent"?"member":"agent")};return o?s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-brand-50",children:s.jsx("div",{className:"text-sm text-gray-500",children:"..."})}):e?s.jsxs(s.Fragment,{children:[u==="agent"?s.jsx(vx,{userId:e,forceMock:h}):s.jsx(fx,{userId:e,forceMock:h}),h&&s.jsx(yx,{currentRole:u,onToggle:x})]}):s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-brand-50",children:s.jsx("div",{className:"text-sm text-red-500",children:" ID"})})}function _r(e){const t=e==="guest",r=e==="member",n=e==="resident",a=e==="agent";return{isGuest:t,isMember:r,isResident:n,isAgent:a,isLoggedIn:!t,canSeeAllReviews:!t,canSeeAllPosts:!t,canAccessPrivate:n||a,canPostPublic:n||a,canPostPrivate:n,canAskQuestion:!t,canAnswer:n||a,showExpertBadge:a}}const Nx=2,_x=3,kx=2;function $a(e,t,r=Nx){return m.useMemo(()=>{if(t)return{visible:e,hiddenCount:0,nextHidden:null};const n=e.slice(0,r),a=Math.max(0,e.length-r),i=a>0?e[r]??null:null;return{visible:n,hiddenCount:a,nextHidden:i}},[e,t,r])}function Ua({children:e,hiddenCount:t,countLabel:r,benefits:n=["",""],ctaText:a=" / ",onCtaClick:i,showCta:o=!0,visible:l=!0}){if(t<=0)return null;const c=!l;return s.jsxs("div",{className:`relative transition-opacity duration-200 ${c?"pointer-events-none opacity-0":"opacity-100"}`,"aria-hidden":c,children:[s.jsx("div",{className:"pointer-events-none select-none blur-sm","aria-hidden":"true",children:e}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center rounded-[14px] bg-white/85 p-5 text-center",children:[s.jsxs("h4",{className:"mb-1 text-sm font-extrabold text-brand-700",children:["  ",t," ",r]}),s.jsx("p",{className:"mb-2.5 text-xs text-ink-600",children:n.map((d,h)=>s.jsxs("span",{children:[h>0&&""," ",d]},h))}),o&&s.jsx("button",{onClick:i,className:"rounded-full bg-gradient-to-br from-brand to-brand-600 px-6 py-2.5 text-[13px] font-bold text-white transition-transform hover:scale-[1.02]",children:a})]})]})}function Ji({entry:e}){const t=e.type==="pro",r=e.visits>0,n=e.deals>0;return s.jsxs("div",{className:"rounded-[14px] border border-border-light bg-white p-3.5 transition-all hover:border-brand/15 hover:shadow-[0_2px_8px_rgba(0,56,90,0.04)]",children:[s.jsxs("div",{className:"mb-2.5 flex items-center gap-2.5",children:[s.jsx("div",{className:"flex size-[38px] items-center justify-center rounded-full border-2 border-brand bg-gradient-to-br from-brand-100/50 to-white text-sm font-extrabold text-brand","aria-hidden":"true",children:e.author.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-[13px] font-bold text-ink-900",children:[e.author,e.company?`${e.company}`:""]}),(r||n)&&s.jsxs("div",{className:"text-[11px] text-ink-600",children:[r&&` ${e.visits} `,r&&n&&"  ",n&&` ${e.deals} `]})]})]}),s.jsxs("div",{className:`flex items-start gap-2.5 rounded-[10px] p-2 text-[13px] leading-relaxed ${t?"bg-gradient-to-br from-brand-50 to-brand-100/50":"bg-gradient-to-br from-brand-100/30 to-brand-100"}`,children:[s.jsx("span",{className:"flex size-6 shrink-0 items-center justify-center text-base","aria-hidden":"true",children:t?"":""}),s.jsx("span",{className:"flex-1 text-ink-900",children:e.text})]})]})}function Sx({viewerRole:e,reviews:t,onUnlock:r}){const n=Array.isArray(t)?t:(t==null?void 0:t.items)??[],a=_r(e),i=m.useMemo(()=>{const d=[];return n.forEach(h=>{h.pros.forEach((x,f)=>{x&&d.push({id:`${h.id}-pro-${f}`,type:"pro",text:x,author:h.author,company:h.company,visits:h.visits,deals:h.deals})}),(Array.isArray(h.cons)?h.cons:[h.cons]).forEach((x,f)=>{x&&d.push({id:`${h.id}-con-${f}`,type:"con",text:x,author:h.author,company:h.company,visits:h.visits,deals:h.deals})})}),d},[n]),{visible:o,hiddenCount:l,nextHidden:c}=$a(i,a.canSeeAllReviews);return s.jsxs("section",{className:"bg-white/98 overflow-hidden rounded-[18px] border border-border-light shadow-[0_2px_12px_rgba(0,51,102,0.04)]","aria-labelledby":"reviews-heading",children:[s.jsxs("div",{className:"from-brand/8 to-brand-600/4 flex items-center justify-between border-b border-brand/5 bg-gradient-to-br px-4 py-3.5",children:[s.jsxs("div",{children:[s.jsx("h2",{id:"reviews-heading",className:"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700",children:" "}),s.jsx("p",{className:"mt-0.5 text-[11px] text-ink-600",children:""})]}),s.jsxs("span",{className:"bg-brand/8 flex items-center gap-1 rounded-full border border-brand-600 px-2.5 py-1 text-[10px] font-bold text-brand",children:[n.length," "]})]}),s.jsxs("div",{className:"flex flex-col gap-2.5 p-3.5",children:[o.map(d=>s.jsx(Ji,{entry:d},d.id)),s.jsx(Ua,{visible:l>0&&!!c,hiddenCount:l,countLabel:"",benefits:["",""],...r?{onCtaClick:r}:{},children:c&&s.jsx(Ji,{entry:c})})]})]})}function Ex(e,t,r={}){const{leading:n=!0,trailing:a=!1}=r,i=m.useRef(0),o=m.useRef(null),l=m.useRef(null),c=m.useRef(e);return m.useEffect(()=>{c.current=e},[e]),m.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]),m.useCallback((...h)=>{const u=Date.now();l.current=h;const x=()=>{l.current&&(c.current(...l.current),i.current=Date.now(),l.current=null)},f=t-(u-i.current);if(f<=0){o.current&&(clearTimeout(o.current),o.current=null),n?x():a&&(o.current=setTimeout(()=>{o.current=null,x()},t));return}a&&!o.current&&(o.current=setTimeout(()=>{o.current=null,x()},f))},[t,n,a])}function Tx({onSubmit:e,onSuccess:t,onError:r,initialVisibility:n="public",minLength:a=5,maxLength:i=500}){const[o,l]=m.useState(""),[c,d]=m.useState(n),[h,u]=m.useState(void 0),[x,f]=m.useState([]),[g,b]=m.useState(!1),[v,p]=m.useState(null);m.useEffect(()=>{d(n)},[n]);const w=m.useCallback(()=>{l(""),d(n),u(void 0),f([]),p(null),b(!1)},[n]),k=m.useCallback(()=>{const T=o.trim();return T.length<a?P.VALIDATION.MIN_LENGTH(a):T.length>i?P.VALIDATION.MAX_LENGTH(i):null},[o,a,i]),N=m.useCallback(async()=>{const T=k();if(T){p(T);return}b(!0),p(null);try{await e({content:o.trim(),visibility:c,communityId:h,images:x}),t==null||t(),w()}catch(S){const C=S instanceof Error?S.message:P.VALIDATION.SUBMIT_ERROR;p(C),r==null||r(S instanceof Error?S:new Error(C))}finally{b(!1)}},[o,c,h,x,e,t,r,w,k]);return{content:o,setContent:l,visibility:c,setVisibility:d,communityId:h,setCommunityId:u,images:x,setImages:f,isSubmitting:g,error:v,submit:N,reset:w,validate:k,isValid:!k(),charCount:o.trim().length,minLength:a,maxLength:i}}function Cx(e,t){m.useEffect(()=>{if(!e)return;const r=document.body.style.overflow;document.body.style.overflow="hidden";const n=t!=null&&t.inertTargetId?document.getElementById(t.inertTargetId):document.getElementById("root"),a=(n==null?void 0:n.getAttribute("aria-hidden"))??null,i=(n==null?void 0:n.hasAttribute("inert"))??!1;return n&&(n.setAttribute("aria-hidden","true"),n.setAttribute("inert","true")),()=>{document.body.style.overflow=r,n&&(a===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",a),i||n.removeAttribute("inert"))}},[e,t==null?void 0:t.inertTargetId])}function Nc({children:e,isActive:t,initialFocusRef:r}){const n=m.useRef(null),a=m.useRef(null);return m.useEffect(()=>{if(t){if(a.current=document.activeElement,r!=null&&r.current)r.current.focus();else if(n.current){const i=n.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');i.length>0&&i[0].focus()}}else a.current&&a.current.focus()},[t,r]),m.useEffect(()=>{if(!t)return;const i=o=>{if(o.key!=="Tab")return;const l=n.current;if(!l)return;const c=l.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),d=c[0],h=c[c.length-1];o.shiftKey?document.activeElement===d&&(o.preventDefault(),h.focus()):document.activeElement===h&&(o.preventDefault(),d.focus())};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),s.jsx("div",{ref:n,children:e})}const Ix=m.memo(function({isOpen:t,onClose:r}){const n=m.useCallback(()=>{r()},[r]);return t?s.jsx(Nc,{isActive:t,children:s.jsx("div",{className:"fixed inset-0 z-modal flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"login-title",children:s.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 text-center shadow-xl",children:[s.jsx("h3",{id:"login-title",className:"mb-2 text-xl font-bold text-gray-900",children:P.COMPOSER.LOGIN_TITLE}),s.jsx("p",{className:"mb-6 text-gray-600",children:P.COMPOSER.LOGIN_DESC}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx("button",{type:"button",onClick:n,className:"rounded-lg px-4 py-2 text-gray-600 transition-colors hover:bg-gray-100",children:P.COMPOSER.CANCEL}),s.jsx("a",{href:ve.AUTH,className:"rounded-lg bg-brand-600 px-4 py-2 text-white transition-colors hover:bg-brand-700",children:P.COMPOSER.GO_LOGIN})]})]})})}):null}),Ax=50;function Lx({isOpen:e,onClose:t,onSubmit:r,mode:n,initialVisibility:a="public",placeholder:i}){const{isAuthenticated:o}=Et(),l=m.useRef(null),c=m.useRef(null),{content:d,setContent:h,visibility:u,setVisibility:x,isSubmitting:f,error:g,submit:b,reset:v,isValid:p,charCount:w,maxLength:k,minLength:N}=Tx({onSubmit:r,onSuccess:()=>{Z.success(P.COMPOSER.SUCCESS),t()},onError:C=>{Z.error(P.COMPOSER.ERROR_TITLE,C.message)},initialVisibility:a});if(Cx(e,{inertTargetId:"root"}),m.useEffect(()=>{l.current&&(l.current.style.height="auto",l.current.style.height=l.current.scrollHeight+"px")},[d,e]),m.useEffect(()=>{e||v()},[e,v]),m.useEffect(()=>{const C=_=>{_.key==="Escape"&&!f&&t(),(_.ctrlKey||_.metaKey)&&_.key==="Enter"&&p&&!f&&b()};return e&&window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[e,t,f,p,b]),m.useEffect(()=>{e&&l.current&&setTimeout(()=>{var C;(C=l.current)==null||C.focus()},Ax)},[e]),!e)return null;if(!o)return s.jsx(Ix,{isOpen:e,onClose:t});const T=u==="private",S=i||(n==="community"?T?P.COMPOSER.PLACEHOLDER_COMMUNITY_PRIVATE:P.COMPOSER.PLACEHOLDER_COMMUNITY_PUBLIC:P.COMPOSER.PLACEHOLDER_FEED);return s.jsx(Nc,{isActive:e,initialFocusRef:l,children:s.jsxs("div",{className:"fixed inset-0 z-modal flex items-center justify-center p-4",children:[s.jsx("button",{type:"button",className:"absolute inset-0 size-full cursor-default border-0 bg-black/50 backdrop-blur-sm",onClick:()=>!f&&t(),"aria-label":P.COMPOSER.CLOSE,tabIndex:-1}),s.jsxs("div",{ref:c,role:"dialog","aria-modal":"true","aria-labelledby":"composer-title",className:"relative z-10 flex max-h-[90dvh] w-full max-w-lg flex-col rounded-2xl bg-white shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-4 py-3",children:[s.jsx("h2",{id:"composer-title",className:"flex items-center gap-2 text-lg font-bold text-gray-800",children:n==="community"&&T?P.COMPOSER.TITLE_PRIVATE:P.COMPOSER.TITLE_PUBLIC}),s.jsx("button",{onClick:t,disabled:f,"aria-label":P.COMPOSER.CLOSE,className:"rounded-full p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600 disabled:opacity-50",children:P.COMPOSER.CLOSE_ICON})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[n==="community"&&s.jsxs("div",{className:"mb-4 flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>x("public"),className:`flex-1 rounded-lg border px-3 py-2 text-sm font-medium transition-colors ${u==="public"?"border-brand-200 bg-brand-50 text-brand-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"}`,children:P.COMPOSER.VISIBILITY_PUBLIC}),s.jsx("button",{type:"button",onClick:()=>x("private"),className:`flex-1 rounded-lg border px-3 py-2 text-sm font-medium transition-colors ${u==="private"?"border-amber-200 bg-amber-50 text-amber-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"}`,children:P.COMPOSER.VISIBILITY_PRIVATE})]}),s.jsx("textarea",{ref:l,value:d,onChange:C=>h(C.target.value),placeholder:S,className:"min-h-[150px] w-full resize-none text-base text-gray-800 placeholder:text-gray-400 focus:outline-none",disabled:f,minLength:N,maxLength:k,"aria-describedby":"composer-counter"}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{type:"button",onClick:()=>Z.dev(P.COMPOSER.UPLOAD_IMAGE_DEV),className:"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-gray-500 transition-colors hover:bg-gray-50 hover:text-brand-600",children:P.COMPOSER.UPLOAD_IMAGE})}),g&&s.jsx("div",{className:"mt-3 rounded-lg bg-red-50 p-3 text-sm text-red-600",role:"alert",children:g})]}),s.jsxs("div",{className:"flex items-center justify-between rounded-b-2xl border-t border-gray-100 bg-gray-50 px-4 py-3",children:[s.jsxs("span",{id:"composer-counter",className:`text-xs ${w>k?"text-red-500":"text-gray-400"}`,children:[w," / ",k]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,disabled:f,className:"rounded-lg px-4 py-2 font-medium text-gray-600 transition-colors hover:bg-gray-200 disabled:opacity-50",children:P.COMPOSER.CANCEL}),s.jsx("button",{type:"button",onClick:b,disabled:!p||f,className:"rounded-lg bg-brand-600 px-6 py-2 font-bold text-white shadow-sm transition-colors hover:bg-brand-700 hover:shadow disabled:cursor-not-allowed disabled:opacity-50",children:f?P.COMPOSER.SUBMITTING:P.COMPOSER.SUBMIT})]})]})]})]})})}const Ls=new Intl.RelativeTimeFormat("zh-TW",{numeric:"auto"}),sn=60*1e3,ha=60*sn,dr=24*ha,Xi=7*dr,eo=30*dr,to=365*dr,Mx=e=>{if(e instanceof Date)return Number.isNaN(e.getTime())?null:e;if(typeof e=="number"){const r=new Date(e);return Number.isNaN(r.getTime())?null:r}const t=new Date(e);return Number.isNaN(t.getTime())?null:t};function _c(e){const t=Mx(e);if(!t)return typeof e=="string"&&e.trim()?e:"";const r=Date.now()-t.getTime();if(r<0)return t.toLocaleDateString("zh-TW");if(r<sn)return"";if(r<ha){const a=Math.round(r/sn);return Ls.format(-a,"minute")}if(r<dr){const a=Math.round(r/ha);return Ls.format(-a,"hour")}if(r<Xi){const a=Math.round(r/dr);return Ls.format(-a,"day")}if(r<eo){const a=Math.round(r/Xi);return Ls.format(-a,"week")}if(r<to){const a=Math.round(r/eo);return Ls.format(-a,"month")}const n=Math.round(r/to);return Ls.format(-n,"year")}function ht(e){const t=Date.now()-e*sn;return new Date(t).toISOString()}const{COMMUNITY:me}=P;function Rx({post:e}){const t=e.type==="agent",r=e.type==="official";return t?s.jsx("span",{className:"rounded bg-brand-100 px-1.5 py-0.5 text-[9px] font-bold text-brand-600",children:me.AGENT_BADGE}):r?s.jsx("span",{className:"rounded bg-brand-50 px-1.5 py-0.5 text-[9px] font-bold text-brand",children:me.OFFICIAL_BADGE}):e.floor?s.jsxs("span",{className:"rounded bg-brand-100 px-1.5 py-0.5 text-[9px] font-bold text-brand",children:[e.floor,me.RESIDENT_BADGE_SUFFIX]}):null}function Ln({post:e,onLike:t}){const[r,n]=m.useState(!1),a=m.useRef(!0),i=e.type==="agent",o=_c(e.time),l=e.likes!==void 0?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",e.likes]}):e.views!==void 0?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",e.views]}):null,c=e.comments!==void 0?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",e.comments]}):null;m.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]);const d=Ex(async()=>{if(!(!t||r)){n(!0);try{await t(e.id)}catch(h){console.error("Failed to toggle like",h),Z.error("","")}finally{a.current&&n(!1)}}},1e3,{trailing:!0});return s.jsxs("article",{className:"flex gap-2.5 rounded-[14px] border border-border-light bg-white p-3 transition-all hover:border-brand-600 hover:shadow-[0_2px_8px_rgba(0,56,90,0.06)]",children:[s.jsx("div",{className:`flex size-10 shrink-0 items-center justify-center rounded-full border-2 bg-gradient-to-br from-brand-100/50 to-white text-base font-extrabold ${i?"border-brand-light text-brand-600":"border-brand text-brand"}`,"aria-hidden":"true",children:e.author.charAt(0)}),s.jsxs("div",{className:"flex flex-1 flex-col gap-1.5",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-[13px] font-bold text-ink-900",children:e.author}),s.jsx(Rx,{post:e}),s.jsx("span",{className:"text-[11px] text-ink-600",children:o})]}),s.jsxs("div",{className:"text-[13px] leading-relaxed text-ink-900",children:[s.jsx("b",{children:e.title}),s.jsx("br",{}),e.content]}),s.jsxs("div",{className:"flex gap-3 text-[11px] text-ink-600",children:[l,c,e.private&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.PRIVATE_POST_LABEL]})]}),s.jsx("div",{className:"mt-1 flex gap-2",children:i?s.jsxs("button",{className:"bg-brand/6 hover:bg-brand/12 flex items-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition-all","aria-label":me.BTN_MSG_AGENT,children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.BTN_MSG_AGENT]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"bg-brand/6 hover:bg-brand/12 flex items-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition-all disabled:cursor-not-allowed disabled:opacity-60",onClick:d,"aria-label":"","aria-busy":r,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.BTN_LIKING]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.BTN_LIKE]})}),s.jsxs("button",{className:"bg-brand/6 flex cursor-not-allowed items-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand/50 opacity-60 transition-all","aria-label":me.BTN_REPLY_ARIA,title:me.BTN_REPLY_TOOLTIP,disabled:!0,children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.BTN_REPLY]})]})})]})]})}function Ox({viewerRole:e,currentTab:t,onTabChange:r,publicPosts:n,privatePosts:a,onLike:i,onCreatePost:o,onUnlock:l}){const c=_r(e),d=c.isGuest,h=m.useId(),u=`${h}-public`,x=`${h}-private`,f=`${h}-panel`,g=m.useRef({public:null,private:null}),[b,v]=m.useState(!1),[p,w]=m.useState("public"),k=E=>{if(d){Z.error(me.NOTIFY_LOGIN_TITLE,me.NOTIFY_LOGIN_DESC);return}if(E==="public"&&!c.canPostPublic){Z.error(me.NOTIFY_PERM_ERROR,me.NOTIFY_PERM_CHECK);return}if(E==="private"&&!c.canPostPrivate){Z.error(me.NOTIFY_PRIVATE_ONLY);return}w(E),v(!0)},{visible:N,hiddenCount:T,nextHidden:S}=$a(n,c.canSeeAllPosts),C=m.useCallback(E=>{var O;(O=g.current[E])==null||O.focus()},[]),_=m.useMemo(()=>c.canAccessPrivate?["public","private"]:["public"],[c.canAccessPrivate]),B=()=>{if(!c.canAccessPrivate){Z.error(c.isGuest?me.NOTIFY_PRIVATE_ACCESS_DENIED:me.NOTIFY_VERIFY_REQUIRED,c.isGuest?` ${me.NOTIFY_PRIVATE_ACCESS_DENIED_DESC}`:` ${me.NOTIFY_VERIFY_REQUIRED_DESC}`);return}r("private")},j=m.useCallback((E,O)=>{if(!["ArrowLeft","ArrowRight","Home","End"].includes(E.key))return;E.preventDefault();const L=_[_.length-1];if(E.key==="Home"){C("public"),t!=="public"&&r("public");return}if(E.key==="End"){L&&L!==t?(C(L),r(L)):L&&C(L);return}const D=_.indexOf(O);if(D===-1)return;const I=E.key==="ArrowLeft"?-1:1,M=(D+I+_.length)%_.length,$=_[M];if($){if($==="private"&&!c.canAccessPrivate){C("public"),r("public");return}C($),r($)}},[_,t,C,r,c.canAccessPrivate]);return s.jsxs("section",{id:"public-wall",className:"bg-white/98 scroll-mt-20 overflow-hidden rounded-[18px] border border-border-light shadow-[0_2px_12px_rgba(0,51,102,0.04)]","aria-labelledby":"posts-heading",children:[s.jsx("div",{className:"from-brand/3 to-brand-600/1 flex items-center justify-between border-b border-brand/5 bg-gradient-to-br px-4 py-3.5",children:s.jsxs("h2",{id:"posts-heading",className:"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.SECTION_TITLE]})}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 px-3.5 pb-3.5 pt-2",role:"tablist","aria-label":"",children:[s.jsx("button",{role:"tab",id:u,ref:E=>{g.current.public=E},"aria-selected":t==="public","aria-controls":f,onClick:()=>r("public"),onKeyDown:E=>j(E,"public"),tabIndex:t==="public"?0:-1,className:`rounded-full border px-3.5 py-1.5 text-xs font-semibold transition-all ${t==="public"?"border-brand-600 bg-brand/10 font-bold text-brand":"hover:bg-brand/8 border-transparent bg-brand-100/80 text-ink-600 hover:text-brand"}`,children:me.TAB_PUBLIC}),s.jsxs("button",{role:"tab",id:x,ref:E=>{g.current.private=E},"aria-selected":t==="private","aria-controls":f,"aria-disabled":!c.canAccessPrivate,onClick:B,onKeyDown:E=>j(E,"private"),tabIndex:c.canAccessPrivate&&t==="private"?0:-1,className:`rounded-full border px-3.5 py-1.5 text-xs font-semibold transition-all ${t==="private"?"border-brand-600 bg-brand/10 font-bold text-brand":"hover:bg-brand/8 border-transparent bg-brand-100/80 text-ink-600 hover:text-brand"} ${c.canAccessPrivate?"":"opacity-60"}`,children:[me.TAB_PRIVATE," ",!c.canAccessPrivate&&s.jsx("span",{role:"img","aria-label":"",children:""})]})]}),s.jsx("div",{id:f,role:"tabpanel","aria-labelledby":t==="public"?u:x,tabIndex:0,className:"flex flex-col gap-2.5 px-3.5 pb-3.5",children:t==="public"?s.jsxs(s.Fragment,{children:[N.map(E=>s.jsx(Ln,{post:E,...i?{onLike:i}:{}},E.id)),s.jsx(Ua,{visible:T>0&&!!S,hiddenCount:T,countLabel:me.LOCKED_OVERLAY_COUNT_LABEL,benefits:[me.LOCKED_OVERLAY_BENEFIT_1,me.LOCKED_OVERLAY_BENEFIT_2],showCta:!0,...l?{onCtaClick:l}:{},children:S&&s.jsx(Ln,{post:S})}),c.canPostPublic&&s.jsx("div",{className:"bg-brand/3 flex justify-center rounded-[14px] border border-dashed border-border-light p-5",children:s.jsxs("button",{onClick:()=>k("public"),className:"bg-brand/6 hover:bg-brand/12 flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.BTN_POST_PUBLIC]})})]}):c.canAccessPrivate?s.jsxs(s.Fragment,{children:[a.map(E=>s.jsx(Ln,{post:E,...i?{onLike:i}:{}},E.id)),c.canPostPrivate?s.jsx("div",{className:"bg-brand/3 flex justify-center rounded-[14px] border border-dashed border-border-light p-5",children:s.jsxs("button",{onClick:()=>k("private"),className:"bg-brand/6 hover:bg-brand/12 flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand",children:[s.jsx("span",{role:"img","aria-label":"",children:""})," ",me.BTN_POST_PRIVATE]})}):s.jsxs("p",{className:"py-3 text-center text-[11px] text-ink-600",children:[" ",me.MSG_AGENT_VIEW_ONLY]})]}):s.jsxs("div",{className:"bg-brand/3 flex flex-col items-center justify-center rounded-[14px] px-5 py-10 text-center",children:[s.jsx("div",{className:"mb-3 text-5xl opacity-50","aria-hidden":"true",children:""}),s.jsx("h4",{className:"mb-1.5 text-sm font-bold text-brand-700",children:me.LOCKED_TITLE}),s.jsx("p",{className:"mb-4 text-xs text-ink-600",children:c.isGuest?me.LOCKED_DESC_GUEST:me.LOCKED_DESC_USER}),s.jsx("button",{onClick:l,className:"rounded-full bg-brand px-5 py-2.5 text-xs font-bold text-white",children:c.isGuest?me.BTN_UNLOCK_GUEST:me.BTN_UNLOCK_USER})]})}),s.jsx(Lx,{isOpen:b,onClose:()=>v(!1),onSubmit:async E=>{if(d){Z.error(me.NOTIFY_LOGIN_TITLE,me.NOTIFY_LOGIN_DESC);return}o&&await o(E.content,E.visibility)},mode:"community",initialVisibility:p})]})}function Mn({q:e,perm:t,isUnanswered:r=!1,onAnswer:n,isAnswering:a,onUnlock:i,hideUnlockButton:o=!1}){const l=_c(e.time);return s.jsxs("article",{className:`rounded-[12px] border p-3 transition-all hover:border-brand/15 ${r?"border-brand-light/30 bg-gradient-to-br from-brand-50 to-brand-100/30":"border-border-light bg-white"}`,children:[s.jsxs("div",{className:"mb-1.5 text-[13px] font-bold leading-snug text-brand-700",children:["Q: ",e.question]}),s.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-1.5 text-[11px] text-ink-600",children:[s.jsx("span",{children:" "}),s.jsxs("span",{children:[" ",l]}),r?s.jsx("span",{className:"font-bold text-brand-light",children:" "}):s.jsxs("span",{children:[" ",e.answersCount," "]})]}),r?s.jsx("div",{className:"bg-brand/2 mt-2 rounded-[10px] p-4 text-center text-[13px] text-ink-600",children:" "}):s.jsxs("div",{className:"flex flex-col gap-1.5 border-l-[3px] border-border-light pl-3",children:[e.answers.map((c,d)=>s.jsxs("div",{className:"py-1.5 text-[12px] leading-relaxed",children:[s.jsxs("div",{className:"mb-1 flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:`rounded px-2 py-0.5 text-[10px] font-bold ${c.type==="agent"?"bg-brand-100 text-brand-600":c.type==="official"?"bg-brand-50 text-brand":"bg-brand-100 text-brand"}`,children:c.type==="agent"?" ":c.type==="official"?` ${c.author}`:` ${c.author}`}),c.expert&&s.jsx("span",{className:"rounded bg-brand-100 px-2 py-0.5 text-[10px] font-bold text-brand-600",children:" "})]}),c.content]},d)),!o&&e.hasMoreAnswers&&e.totalAnswers&&s.jsxs("div",{className:"mt-2 rounded-lg border border-brand/10 bg-gradient-to-r from-brand-50 to-brand-100/50 p-3 text-center",children:[s.jsxs("p",{className:"mb-2 text-[13px] text-ink-700",children:["  ",s.jsx("span",{className:"font-bold text-brand",children:e.totalAnswers-e.answers.length})," "]}),s.jsx("button",{type:"button",onClick:i,className:"rounded-lg bg-brand px-4 py-2 text-[12px] font-bold text-white shadow-sm transition-all hover:bg-brand-dark hover:shadow-md",children:" /  "})]})]}),t.canAnswer&&s.jsx("div",{className:"mt-2",children:s.jsx("button",{type:"button",className:`flex w-full items-center justify-center gap-1 rounded-lg border px-2.5 py-1.5 text-[11px] font-semibold transition-all ${r?"border-brand-light/30 bg-brand-light/10 text-brand-600":"bg-brand/6 border-brand/10 text-brand"} hover:bg-brand/12`,onClick:()=>n==null?void 0:n(e),disabled:a,"aria-busy":a,"aria-label":r?"":"",children:a?" ":` ${r?"":""}${t.isAgent?"":""}`})})]})}function Px({viewerRole:e,questions:t,onAskQuestion:r,onAnswerQuestion:n,feedbackDurationMs:a=5e3,onUnlock:i}){const o=Array.isArray(t)?t:(t==null?void 0:t.items)||[],l=_r(e),[c,d]=m.useState(!1),[h,u]=m.useState(""),[x,f]=m.useState(!1),[g,b]=m.useState(""),[v,p]=m.useState(null),[w,k]=m.useState(null),[N,T]=m.useState(""),[S,C]=m.useState(""),[_,B]=m.useState(""),j=m.useRef(null),E=m.useRef(null),O=m.useRef(null),L=m.useRef(null),D=m.useRef(null),I=m.useRef(null),M=o.filter(X=>(X.totalAnswers??X.answersCount??X.answers.length)>0),$=o.filter(X=>(X.totalAnswers??X.answersCount??X.answers.length)===0),{visible:R,hiddenCount:ee,nextHidden:Q}=$a(M,l.isLoggedIn),F=M.length-R.length,re=!l.isLoggedIn,G=!!i&&(re||ee>0||F>0),te=10,ie=5,pe=()=>{u(""),T("")},W=()=>{b(""),C(""),p(null)},K=()=>{I.current=document.activeElement},de=()=>{if(!l.canAskQuestion){if(i){i();return}B(" ");return}K(),pe(),d(!0)},H=X=>{if(!l.canAnswer){if(i){i();return}B(" ");return}K(),W(),p(X),f(!0)},ae=()=>c?j.current:x?E.current:null,he=X=>X?Array.from(X.querySelectorAll("a[href], button, textarea, input, select, [tabindex]")).filter(je=>{const be=je.getAttribute("tabindex"),We=typeof be=="string"?Number(be):void 0,Ee=je.hasAttribute("disabled")||je.getAttribute("aria-disabled")==="true",wt=je.hasAttribute("aria-hidden"),wn=typeof We=="number"&&We<0;return!Ee&&!wt&&!wn}):[],Tt=()=>{const X=[document.querySelector("main"),document.querySelector("[data-app-root]"),document.getElementById("root"),document.body];for(const ge of X)if(ge instanceof HTMLElement){const je=ge.getAttribute("tabindex");ge.dataset.prevTabindex=je??"",ge.tabIndex=-1,ge.focus(),setTimeout(()=>{const be=ge.dataset.prevTabindex;be===""?ge.removeAttribute("tabindex"):be!==void 0&&(ge.tabIndex=Number(be)),delete ge.dataset.prevTabindex},0);return}},rs=X=>{if(X.key!=="Tab")return;const ge=ae();if(!ge)return;const je=he(ge);if(!je.length){const wt=ge.getAttribute("tabindex");ge.dataset.prevTabindex=wt??"",ge.tabIndex=-1,ge.focus(),X.preventDefault();return}const[be]=je,We=je[je.length-1],Ee=document.activeElement;if(!Ee||!ge.contains(Ee)){be==null||be.focus(),X.preventDefault();return}!X.shiftKey&&Ee===We&&(be==null||be.focus(),X.preventDefault()),X.shiftKey&&Ee===be&&(We==null||We.focus(),X.preventDefault())};m.useEffect(()=>{const X=ae();if(!X){document.body.style.overflow="";return}document.body.style.overflow="hidden";const ge=be=>{be.key==="Escape"&&w!=="ask"&&w!=="answer"&&(c&&(d(!1),pe()),x&&(f(!1),W())),rs(be)},je=be=>{var We;X.contains(be.target)||((We=he(X)[0])==null||We.focus(),be.preventDefault(),be.stopPropagation())};return document.addEventListener("keydown",ge),document.addEventListener("focusin",je),()=>{if(document.body.style.overflow="",document.removeEventListener("keydown",ge),document.removeEventListener("focusin",je),X&&X.dataset.prevTabindex!==void 0){const We=X.dataset.prevTabindex;We===""?X.removeAttribute("tabindex"):X.tabIndex=Number(We),delete X.dataset.prevTabindex}const be=I.current;be&&document.body.contains(be)?be.focus():Tt(),I.current=null}},[c,x,w]),m.useEffect(()=>_?(D.current&&clearTimeout(D.current),D.current=window.setTimeout(()=>{B("")},a),()=>{D.current&&(clearTimeout(D.current),D.current=null)}):()=>{},[_,a]),m.useEffect(()=>{c&&requestAnimationFrame(()=>{var X;(X=O.current)==null||X.focus()})},[c]),m.useEffect(()=>{x&&requestAnimationFrame(()=>{var X;(X=L.current)==null||X.focus()})},[x]);const yn=async()=>{const X=h.trim();if(X.length<te){T(` ${te} `);return}if(!r){T("");return}k("ask"),T("");try{await r(X),d(!1),pe(),B(" ")}catch(ge){console.error("Failed to submit question",ge),T("")}finally{k(null)}},Er=async()=>{const X=g.trim();if(!v){C("");return}if(X.length<ie){C(` ${ie} `);return}if(!n){C("");return}k("answer"),C("");try{await n(String(v.id),X),f(!1),W(),B(" ")}catch(ge){console.error("Failed to submit answer",ge),C("")}finally{k(null)}};return s.jsxs("section",{className:"bg-white/98 scroll-mt-20 overflow-hidden rounded-[18px] border border-border-light shadow-[0_2px_12px_rgba(0,51,102,0.04)]","aria-labelledby":"qa-heading",id:"qa-section",children:[s.jsx("div",{className:"from-brand/3 to-brand-600/1 flex items-center justify-between border-b border-brand/5 bg-gradient-to-br px-4 py-3.5",children:s.jsxs("div",{children:[s.jsxs("h2",{id:"qa-heading",className:"flex items-center gap-1.5 text-[15px] font-extrabold text-brand-700",children:[" ",$.length>0&&s.jsxs("span",{className:"ml-1.5 rounded-full bg-brand-100 px-2 py-0.5 text-xs font-bold text-brand-600",children:[$.length," "]})]}),s.jsx("p",{className:"mt-0.5 text-[11px] text-ink-600",children:""})]})}),s.jsxs("div",{className:"flex flex-col gap-2.5 p-3.5 pb-12",children:[R.map(X=>s.jsx(Mn,{q:X,perm:l,onAnswer:H,isAnswering:w==="answer"&&(v==null?void 0:v.id)===X.id,...i&&{onUnlock:i}},X.id)),s.jsx(Ua,{visible:ee>0&&!!Q,hiddenCount:ee,countLabel:"",benefits:["",""],...i?{onCtaClick:i}:{},children:Q&&s.jsx(Mn,{q:Q,perm:l,onAnswer:H,isAnswering:w==="answer"&&(v==null?void 0:v.id)===Q.id,hideUnlockButton:!0})}),s.jsxs("div",{className:"bg-brand/3 rounded-[14px] border border-dashed border-border-light p-3.5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-[12px] font-semibold text-brand-700",children:""}),$.length>0?$.map(X=>s.jsx(Mn,{q:X,perm:l,isUnanswered:!0,onAnswer:H,isAnswering:w==="answer"&&(v==null?void 0:v.id)===X.id,...i&&{onUnlock:i}},X.id)):s.jsx("div",{className:"rounded-[10px] border border-dashed border-border-light bg-white/80 p-3 text-center text-[12px] text-ink-600",children:""})]}),s.jsxs("div",{className:"mt-3 flex flex-col gap-1",children:[s.jsx("div",{className:"text-sm font-bold text-ink-600",children:" "}),s.jsx("p",{className:"text-xs text-ink-600",children:" 24 "}),s.jsx("button",{type:"button",onClick:de,className:"bg-brand/6 hover:bg-brand/12 flex w-full items-center justify-center gap-1 rounded-lg border border-brand/10 px-2.5 py-1.5 text-[11px] font-semibold text-brand transition",children:l.canAskQuestion?"":""})]})]}),G&&s.jsxs("div",{className:"bg-brand/4 rounded-[12px] border border-brand/10 p-3 text-center",children:[s.jsx("div",{className:"text-sm font-bold text-brand-700",children:" / "}),s.jsx("p",{className:"mt-1 text-[12px] text-ink-600",children:F>0?` ${F} `:""}),s.jsx("button",{type:"button",onClick:i,className:"mt-2 w-full rounded-lg bg-brand px-3 py-2 text-[12px] font-semibold text-white shadow-sm transition hover:bg-brand-dark",children:""})]}),_&&s.jsx("p",{className:"text-center text-[11px] text-brand-600",role:"status","aria-live":"polite",children:_})]}),c&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:s.jsxs("div",{ref:j,role:"dialog","aria-modal":"true","aria-labelledby":"ask-modal-title",className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{id:"ask-modal-title",className:"text-base font-bold text-ink-700",children:""}),s.jsx("p",{className:"text-ink-500 text-xs",children:""})]}),s.jsx("button",{type:"button",className:"text-sm text-ink-400 transition hover:text-ink-700",onClick:()=>{w!=="ask"&&(d(!1),pe())},"aria-label":"",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-ink-600",htmlFor:"qa-ask-textarea",children:""}),s.jsx("textarea",{ref:O,id:"qa-ask-textarea",className:"bg-ink-50/40 h-28 w-full rounded-xl border border-border-light p-3 text-sm outline-none focus:border-brand",placeholder:"",value:h,onChange:X=>u(X.target.value),maxLength:500,disabled:w==="ask"}),N&&s.jsx("p",{className:"text-error-500 text-xs",role:"alert",children:N}),s.jsxs("div",{className:"flex items-center justify-between text-[11px] text-ink-400",children:[s.jsxs("span",{children:[" ",te," "]}),s.jsxs("span",{children:[h.length,"/500"]})]}),s.jsx("button",{type:"button",onClick:yn,disabled:w==="ask",className:`w-full rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white transition ${w==="ask"?"opacity-70":"hover:bg-brand-600"}`,children:w==="ask"?"":""})]})]})}),x&&v&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 px-4",children:s.jsxs("div",{ref:E,role:"dialog","aria-modal":"true","aria-labelledby":"answer-modal-title",className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{id:"answer-modal-title",className:"text-base font-bold text-ink-700",children:""}),s.jsx("p",{className:"text-ink-500 text-xs",children:v.question})]}),s.jsx("button",{type:"button",className:"text-sm text-ink-400 transition hover:text-ink-700",onClick:()=>{w!=="answer"&&(f(!1),W())},"aria-label":"",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-xs font-semibold text-ink-600",htmlFor:"qa-answer-textarea",children:""}),s.jsx("textarea",{ref:L,id:"qa-answer-textarea",className:"bg-ink-50/40 h-32 w-full rounded-xl border border-border-light p-3 text-sm outline-none focus:border-brand",placeholder:"",value:g,onChange:X=>b(X.target.value),maxLength:800,disabled:w==="answer"}),S&&s.jsx("p",{className:"text-error-500 text-xs",role:"alert",children:S}),s.jsxs("div",{className:"flex items-center justify-between text-[11px] text-ink-400",children:[s.jsxs("span",{children:[" ",ie," "]}),s.jsxs("span",{children:[g.length,"/800"]})]}),s.jsx("button",{type:"button",onClick:Er,disabled:w==="answer",className:`w-full rounded-xl bg-brand px-4 py-2 text-sm font-semibold text-white transition ${w==="answer"?"opacity-70":"hover:bg-brand-600"}`,children:w==="answer"?"":""})]})]})})]})}function zr(e,t=""){return e==null?"-":`${e}${t}`}function zx({info:e,questions:t,posts:r}){const n=m.useMemo(()=>Array.isArray(t)?t:(t==null?void 0:t.items)||[],[t]),a=m.useMemo(()=>n.slice(0,_x),[n]),i=m.useMemo(()=>[...r].sort((o,l)=>{const c=(o.likes||0)+(o.views||0)*.1;return(l.likes||0)+(l.views||0)*.1-c}).slice(0,kx),[r]);return s.jsxs("aside",{className:"hidden w-[280px] shrink-0 flex-col gap-3 self-start lg:sticky lg:top-[70px] lg:flex",children:[s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"mt-2.5 grid grid-cols-2 gap-2",children:[[zr(e.members),""],[zr(e.avgRating),""],[zr(e.monthlyInteractions),""],[zr(e.forSale),""]].map(([o,l])=>s.jsxs("div",{className:"rounded-[10px] bg-gradient-to-br from-[#f8faff] to-[#f0f5ff] p-3 text-center",children:[s.jsx("div",{className:"text-xl font-black text-[var(--brand)]",children:o}),s.jsx("div",{className:"mt-0.5 text-[11px] text-[var(--text-secondary)]",children:l})]},l))})]}),s.jsxs("nav",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]","aria-label":"",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"flex flex-col gap-1",children:[" "," "," "].map(o=>s.jsx("button",{type:"button",className:"flex w-full items-center gap-2 rounded-[10px] px-3 py-2.5 text-left text-[13px] font-semibold text-[var(--text-primary)] transition-all hover:bg-[#f0f7ff]",children:o},o))})]}),s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"flex flex-col gap-1",children:a.map(o=>s.jsxs("a",{href:"#qa-section",className:"flex items-start gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]",children:[s.jsx("span",{className:"shrink-0","aria-hidden":"true",children:""}),s.jsx("span",{className:"truncate",children:o.question.length>18?o.question.substring(0,18)+"...":o.question})]},o.id))}),s.jsx("a",{href:"#qa-section",className:"mt-2 block text-center text-xs text-[var(--brand-light)] no-underline",children:" "})]}),s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-white p-3.5 shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsx("h4",{className:"mb-2.5 flex items-center gap-1.5 text-sm font-extrabold text-[var(--brand)]",children:" "}),s.jsx("div",{className:"flex flex-col gap-1",children:i.map(o=>s.jsxs("a",{href:"#public-wall",className:"flex items-start gap-2 rounded-[10px] px-3 py-2.5 text-[13px] font-semibold text-[var(--text-primary)] no-underline transition-all hover:bg-[#f0f7ff]",children:[s.jsxs("span",{className:"shrink-0","aria-hidden":"true",children:[" ",o.likes]}),s.jsx("span",{className:"truncate",children:o.title.length>15?o.title.substring(0,15)+"...":o.title})]},o.id))}),s.jsx("a",{href:"#public-wall",className:"mt-2 block text-center text-xs text-[var(--brand-light)] no-underline",children:" "})]}),s.jsxs("div",{className:"rounded-[14px] border border-[var(--line)] bg-gradient-to-br from-[#f0f7ff] to-[#e8f4ff] p-3.5 text-center shadow-[0_4px_14px_rgba(0,51,102,0.04)]",children:[s.jsxs("svg",{className:"mx-auto mb-2 h-24 w-20 text-[#00385a]",viewBox:"0 0 200 240","aria-hidden":"true",children:[s.jsx("path",{d:"M 85 40 L 85 15 L 100 30 L 115 15 L 115 40",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 40 80 L 100 40 L 160 80",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("rect",{x:"55",y:"80",width:"90",height:"100",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 78 110 Q 85 105 92 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 108 110 Q 115 105 122 110",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"85",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("circle",{cx:"115",cy:"125",r:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 90 145 Q 100 155 110 145",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 55 130 L 25 110",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{className:"origin-[85%_60%] animate-[wave_2.5s_ease-in-out_infinite]",d:"M 145 130 L 175 100",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{className:"origin-[85%_60%] animate-[wave_2.5s_ease-in-out_infinite]",cx:"180",cy:"95",r:"6",stroke:"currentColor",strokeWidth:"3",fill:"none"}),s.jsx("path",{d:"M 85 180 L 85 210 L 75 210",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M 115 180 L 115 210 L 125 210",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]}),s.jsx("p",{className:"mb-2.5 text-[13px] font-bold text-[var(--brand)]",children:""}),s.jsx("a",{href:"#qa-section",className:"inline-block rounded-full bg-[var(--brand)] px-4 py-2 text-xs font-bold text-white no-underline",children:" "})]})]})}const so={guest:"",member:"",resident:"",agent:"",official:"",admin:""},ro={guest:" ",member:" ",resident:" ",agent:" ",official:" ",admin:" "};function Dx({role:e,onRoleChange:t}){const[r,n]=m.useState(!1);return s.jsxs("div",{className:"fixed bottom-5 right-5 z-[1000]",children:[s.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-1.5 rounded-xl bg-gradient-to-br from-[#1a1a2e] to-[#16213e] px-4 py-2.5 text-xs font-bold text-white shadow-[0_4px_20px_rgba(0,0,0,0.3)]","aria-expanded":r,"aria-haspopup":"listbox","aria-label":`${so[e]}`,children:[" ",s.jsx("span",{children:so[e]})," "]}),r&&s.jsx("div",{className:"absolute bottom-[50px] right-0 min-w-[180px] rounded-xl border border-[var(--border)] bg-white p-2 shadow-[0_8px_30px_rgba(0,0,0,0.15)]",role:"listbox","aria-label":"",children:Object.keys(ro).map(a=>s.jsx("button",{role:"option","aria-selected":e===a,onClick:()=>{t(a),n(!1)},className:`block w-full rounded-lg px-3 py-2.5 text-left text-xs ${e===a?"bg-[rgba(0,56,90,0.1)] font-bold text-[var(--primary)]":"text-[var(--text-primary)] hover:bg-[#f6f9ff]"}`,children:ro[a]},a))})]})}function Fx({viewerRole:e}){const t=_r(e);if(t.canAccessPrivate)return null;t.isGuest;const r=t.isMember;return s.jsxs("div",{className:"fixed inset-x-0 bottom-0 z-overlay flex items-center justify-center gap-3 border-t border-[var(--border)] bg-[rgba(255,255,255,0.95)] px-4 py-3 backdrop-blur-md",children:[s.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:r?" ":"  + "}),s.jsx("button",{onClick:()=>window.location.href="/maihouses/auth.html",className:"rounded-full bg-gradient-to-br from-[var(--primary)] to-[#005282] px-5 py-2.5 text-[13px] font-bold text-white shadow-lg transition-transform hover:scale-105 active:scale-95",children:r?"":""})]})}function Rn(){return s.jsxs("div",{className:"flex animate-pulse gap-2.5 rounded-[14px] border border-border-light bg-white p-3",children:[s.jsx("div",{className:"size-10 shrink-0 rounded-full bg-gray-200"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-16 rounded bg-gray-200"}),s.jsx("div",{className:"h-3 w-12 rounded bg-gray-200"})]}),s.jsx("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),s.jsx("div",{className:"h-12 w-full rounded bg-gray-200"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-3 w-10 rounded bg-gray-200"}),s.jsx("div",{className:"h-3 w-10 rounded bg-gray-200"})]})]})]})}function no(){return s.jsxs("div",{role:"status","aria-live":"polite","aria-busy":"true","aria-label":"",className:"flex flex-col gap-3",children:[s.jsx("span",{className:"sr-only",children:"..."}),s.jsxs("div",{className:"bg-white/98 overflow-hidden rounded-[18px] border border-border-light p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[s.jsx("div",{className:"h-5 w-24 animate-pulse rounded bg-gray-200"}),s.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"h-24 w-full animate-pulse rounded-[14px] bg-gray-100"}),s.jsx("div",{className:"h-24 w-full animate-pulse rounded-[14px] bg-gray-100"})]})]}),s.jsxs("div",{className:"bg-white/98 overflow-hidden rounded-[18px] border border-border-light p-4",children:[s.jsx("div",{className:"mb-3 flex items-center gap-2",children:s.jsx("div",{className:"h-5 w-24 animate-pulse rounded bg-gray-200"})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(Rn,{}),s.jsx(Rn,{}),s.jsx(Rn,{})]})]})]})}const $x=e=>{const t=[e.message];let r=e.cause;for(;r instanceof Error;)t.push(r.message),r=r.cause;return t.join(" ").toLowerCase()},Ux=e=>{const t=$x(e);return t.includes("401")||t.includes("403")||t.includes("unauthorized")?{category:"permission",title:"",message:"",actionText:"",actionHref:"/auth"}:t.includes("404")||t.includes("not found")?{category:"notFound",title:"",message:"",actionText:"",actionHref:"/maihouses/"}:t.includes("network")||t.includes("fetch")||t.includes("timeout")?{category:"network",title:"",message:"",actionText:"",onAction:()=>window.location.reload()}:{category:"runtime",title:"",message:e.message||"",actionText:""}};class Bx extends U.Component{constructor(t){super(t),this.resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})},this.copyErrorToClipboard=()=>{if(!this.state.error)return;const{error:r,errorInfo:n,errorId:a}=this.state,i=[`Message: ${r.message}`,`Stack: ${r.stack??"N/A"}`,`Component Stack: ${(n==null?void 0:n.componentStack)??"N/A"}`,`URL: ${typeof window<"u"?window.location.href:"N/A"}`,`Timestamp: ${new Date().toISOString()}`,a?`Error ID: ${a}`:null].filter(Boolean).join(`
`);navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(i).catch(()=>{console.warn("[WallErrorBoundary] Failed to copy error details")})},this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var n,a;this.setState({errorInfo:r}),typeof window<"u"&&fetch("/api/log-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:{message:t.message,stack:t.stack,name:t.name},componentStack:r.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(i=>{console.error("[WallErrorBoundary] Failed to report error",i)}),(a=(n=this.props).onError)==null||a.call(n,t,r)}render(){if(this.state.hasError&&this.state.error){if(this.props.fallback)return this.props.fallback;const t=Ux(this.state.error);return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-b from-bg-base to-bg-soft px-4",children:s.jsxs("div",{className:"border-error-200 max-w-md rounded-2xl border bg-white p-8 text-center shadow-xl",children:[s.jsxs("div",{className:"mb-4 text-5xl",children:[t.category==="network"&&"",t.category==="permission"&&"",t.category==="notFound"&&"",t.category==="runtime"&&"",t.category==="unknown"&&""]}),s.jsx("h2",{className:"mb-2 text-xl font-bold text-ink-900",children:t.title}),s.jsx("p",{className:"mb-6 text-sm text-ink-600",children:t.message}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[t.onAction&&s.jsx("button",{onClick:t.onAction??this.resetErrorBoundary,className:"rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand/10",children:t.actionText}),t.actionHref&&s.jsx("a",{href:t.actionHref,className:"inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-600",children:t.actionText}),!t.onAction&&!t.actionHref&&s.jsx("button",{onClick:this.resetErrorBoundary,className:"rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand/10",children:" "})]}),!1]})})}return this.props.children}}const Gx="98b0372",Hx="2025-12-15T07:36:17.986Z",Wx=(()=>{const e=new Date(Hx);return Number.isNaN(e.getTime())?null:e})(),kc=Wx??new Date,Vx=e=>new Intl.DateTimeFormat("zh-TW",{dateStyle:"short",timeStyle:"medium",hour12:!1,timeZone:"Asia/Taipei"}).format(e),Sc=Gx;kc.toISOString();const Ec=Vx(kc),Zx=`v${Sc}`,ao=` ${Sc}   ${Ec}`,io="inline-flex items-center gap-2 rounded-full border border-ink/10 bg-white/90 px-4 py-2 text-[11px] font-medium text-ink-600 shadow-md backdrop-blur";function oo({variant:e="floating",className:t=""}){const r=s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px] uppercase tracking-wider text-ink-400",children:""}),s.jsx("span",{className:"font-mono text-sm text-ink-900","aria-label":"build-version",children:Zx}),s.jsx("span",{className:"text-ink-500 text-[10px]","aria-label":"build-time",children:Ec})]});return e==="inline"?s.jsx("div",{className:`${io} ${t}`,title:ao,children:r}):s.jsx("div",{className:`${io} pointer-events-auto fixed bottom-5 right-5 z-40 ${t}`,title:ao,children:r})}const Yx=lp;async function Kx(){const{data:{session:e}}=await ce.auth.getSession();return(e==null?void 0:e.access_token)??null}async function kr(e,t={}){var i;const r=await Kx(),n={"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},a=await fetch(`${Yx}${e}`,{...t,headers:n});if(!a.ok){const o=await a.json().catch(()=>({error:""}));let l="";typeof o.error=="string"?l=o.error:(i=o.error)!=null&&i.message?l=o.error.message:o.message?l=o.message:Array.isArray(o.error)&&(l=o.error.map(d=>d.message||d).join(", "));const c=new Error(l||`HTTP ${a.status}`);throw c.status=a.status,c.code=o.code,c}return a.json()}async function Qx(e,t={}){const{includePrivate:r=!1}=t;return kr(`/wall?communityId=${e}&type=all&includePrivate=${r?"1":"0"}`)}async function qx(e,t,r="public"){return kr("/post",{method:"POST",body:JSON.stringify({communityId:e,content:t,visibility:r})})}async function Jx(e){return kr("/like",{method:"POST",body:JSON.stringify({postId:e})})}async function Xx(e,t){return kr("/question",{method:"POST",body:JSON.stringify({communityId:e,question:t})})}async function eg(e,t){return kr("/question",{method:"POST",body:JSON.stringify({action:"answer",questionId:e,content:t})})}const bt={all:["communityWall"],wall:(e,t)=>[...bt.all,"wall",e,t],posts:(e,t)=>[...bt.all,"posts",e,t]};function tg(e,t={}){const{includePrivate:r=!1,staleTime:n=5*60*1e3,refetchOnWindowFocus:a=!0,enabled:i=!0,currentUserId:o}=t,l=pn(),[c,d]=m.useState(!1),h=!!o,u=o??"",{data:x,isLoading:f,isFetching:g,error:b,refetch:v}=Sl({queryKey:bt.wall(e||"",r),queryFn:()=>Qx(e,{includePrivate:r}),enabled:i&&!!e,staleTime:n,refetchOnWindowFocus:a,retry:(j,E)=>{const O=E==null?void 0:E.status;return O&&[400,401,403,404].includes(O)?!1:j<1},retryDelay:1e3}),p=m.useCallback(async()=>{e&&await v()},[e,v]),w=rr({mutationFn:Jx,onMutate:async j=>{if(!h)return{previousData:void 0};d(!0),await l.cancelQueries({queryKey:bt.wall(e||"",r)});const E=l.getQueryData(bt.wall(e||"",r));if(E){const O=L=>L.map(D=>{if(D.id!==j)return D;const I=D.liked_by.includes(u);return{...D,likes_count:I?Math.max(0,D.likes_count-1):D.likes_count+1,liked_by:I?D.liked_by.filter(M=>M!==u):[...D.liked_by,u]}});l.setQueryData(bt.wall(e||"",r),{...E,posts:{...E.posts,public:O(E.posts.public),private:O(E.posts.private)}})}return{previousData:E}},onError:(j,E,O)=>{O!=null&&O.previousData&&l.setQueryData(bt.wall(e||"",r),O.previousData)},onSettled:()=>{d(!1),l.invalidateQueries({queryKey:bt.wall(e||"",r)})}}),k=rr({mutationFn:({content:j,visibility:E})=>qx(e,j,E),onSuccess:()=>{l.invalidateQueries({queryKey:bt.wall(e||"",r)})}}),N=rr({mutationFn:j=>Xx(e,j),onSuccess:()=>{l.invalidateQueries({queryKey:bt.wall(e||"",r)})}}),T=rr({mutationFn:({questionId:j,content:E})=>eg(j,E),onSuccess:()=>{l.invalidateQueries({queryKey:bt.wall(e||"",r)})}}),S=m.useCallback(async j=>{await w.mutateAsync(j)},[w]),C=m.useCallback(async(j,E="public")=>{if(!e)throw new Error(" ID");await k.mutateAsync({content:j,visibility:E})},[e,k]),_=m.useCallback(async j=>{if(!e)throw new Error(" ID");await N.mutateAsync(j)},[e,N]),B=m.useCallback(async(j,E)=>{await T.mutateAsync({questionId:j,content:E})},[T]);return{data:x,isLoading:f,isFetching:g,error:b,refresh:p,toggleLike:S,createPost:C,askQuestion:_,answerQuestion:B,isOptimisticUpdating:c}}const lo=[{id:1,author:"",floor:"12F",type:"resident",time:ht(120),title:"",content:" iRobot  5 ",likes:31,comments:14},{id:2,author:"",type:"agent",time:ht(1440),title:"  12F",content:" 50 ",views:89,likes:0,comments:5},{id:3,author:"",floor:"8F",type:"resident",time:ht(3*24*60),title:" ",content:" B2-128  B1 ",likes:12,comments:8},{id:4,author:"",floor:"5F",type:"resident",time:ht(7*24*60),title:"",content:"",likes:25,comments:6},{id:5,author:"",type:"agent",time:ht(8*24*60),title:"  8F",content:"",views:156,likes:0,comments:12}],co=[{id:101,author:"",type:"official",time:ht(3*24*60),title:" ",content:"12/15 10:00 ",pinned:!0,likes:0,comments:0},{id:102,author:"15F ",floor:"15F",type:"resident",time:ht(8*24*60),title:"",content:" 2,800  3,200...",likes:0,comments:28,private:!0},{id:103,author:"3F ",floor:"3F",type:"resident",time:ht(14*24*60),title:"",content:"",likes:0,comments:15,private:!0}],uo=[{id:1,author:"",company:"21",visits:12,deals:3,pros:["",""],cons:""},{id:2,author:"",company:"",visits:8,deals:2,pros:["",""],cons:""},{id:3,author:"",company:"",visits:6,deals:1,pros:["",""],cons:""},{id:4,author:"",company:"",visits:10,deals:2,pros:["5",""],cons:""},{id:5,author:"",company:"",visits:5,deals:1,pros:["",""],cons:""}],mo=[{id:1,question:"",time:ht(2*24*60),answersCount:2,answers:[{author:"12F ",type:"resident",content:"B2 B1 "},{author:"",type:"agent",content:" 1:1.2",expert:!0}]},{id:2,question:"",time:ht(5*24*60),answersCount:2,answers:[{author:"3F ",type:"resident",content:""},{author:"10F ",type:"resident",content:""}]},{id:3,question:"",time:ht(7*24*60),answersCount:1,answers:[{author:"",type:"official",content:" 85  24 "}]},{id:4,question:"",time:ht(3*24*60),answersCount:0,answers:[]}],sg={communityInfo:{name:"",year:2018,units:280,managementFee:85,builder:"",members:88,avgRating:4.2,monthlyInteractions:156,forSale:23},posts:{public:lo,private:co,publicTotal:lo.length,privateTotal:co.length},reviews:{items:uo,total:uo.length},questions:{items:mo,total:mo.length}},rg=(e,t)=>({id:Date.now(),author:"",type:"resident",time:new Date().toISOString(),title:e.substring(0,20)+(e.length>20?"...":""),content:e,likes:0,comments:0,pinned:!1,private:t==="private"}),ng=e=>({id:Date.now(),question:e,time:new Date().toISOString(),answersCount:0,answers:[]}),ag=e=>({author:"",type:"resident",content:e,expert:!1}),ig=["","","N/A","","-"],og={resident:"",member:"",agent:"",official:""};function lg(e){return e==="agent"?"agent":e==="official"?"official":e==="member"?"member":"resident"}function cg(e){return e?e.length>=6?e.slice(0,6):e:""}function dg(e,t){const r=og[e],n=cg(t);return n?`${r}-${n}`:r}function Ba(e,t){var o,l;const r=lg(t==null?void 0:t.role),n=dg(r,e),a=((o=t==null?void 0:t.name)==null?void 0:o.trim())||n,i=(l=t==null?void 0:t.floor)==null?void 0:l.trim();return{name:a,role:r,...i?{floor:i}:{}}}function rn(e){return e.map((t,r)=>({post:t,index:r})).sort((t,r)=>{const n=(r.post.pinned?1:0)-(t.post.pinned?1:0);return n!==0?n:t.index-r.index}).map(({post:t})=>t)}function Tc(e){const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date().getTime()-t.getTime(),a=Math.floor(n/6e4),i=Math.floor(a/60),o=Math.floor(i/24),l=Math.floor(o/7);return n<0?t.toLocaleDateString("zh-TW"):a<1?"":a<60?`${a}`:i<24?`${i}`:o<7?`${o}`:l<4?`${l}`:t.toLocaleDateString("zh-TW")}function ho(e){const t=Ba(e.author_id,e.author);return{id:e.id,author:t.name,...t.floor?{floor:t.floor}:{},type:t.role,time:Tc(e.created_at),title:e.content.substring(0,20)+(e.content.length>20?"...":""),content:e.content,likes:e.likes_count,comments:e.comments_count??0,pinned:e.is_pinned??!1,private:e.visibility==="private",liked_by:e.liked_by}}function ug(e){var i,o,l,c,d;const t=e.agent,r=((i=t==null?void 0:t.company)==null?void 0:i.trim())??"",n=Ba(e.author_id,{name:(t==null?void 0:t.name)??null,role:"agent"}),a=ig.includes(r)?"":r;return{id:e.id,author:n.name,company:a,visits:((o=t==null?void 0:t.stats)==null?void 0:o.visits)??0,deals:((l=t==null?void 0:t.stats)==null?void 0:l.deals)??0,pros:((c=e.content)==null?void 0:c.pros)??[],cons:((d=e.content)==null?void 0:d.cons)??""}}function mg(e){const t=e.answers??[];return{id:e.id,question:e.question,time:Tc(e.created_at),answersCount:t.length,answers:t.map(r=>{const n=Ba(r.author_id,r.author);return{author:n.name,type:n.role,content:r.content,expert:r.is_expert}}),hasMoreAnswers:e.hasMoreAnswers??!1,totalAnswers:e.totalAnswers??e.answers_count??t.length}}function hg(e){var h,u,x,f,g,b,v,p;const t=((h=e.posts)==null?void 0:h.public)??[],r=((u=e.posts)==null?void 0:u.private)??[],n=((x=e.reviews)==null?void 0:x.items)??[],a=((f=e.questions)==null?void 0:f.items)??[],i=t.map(ho),o=r.map(ho),l=rn(i),c=rn(o);return{communityInfo:e.communityInfo?{name:e.communityInfo.name??"",year:e.communityInfo.year??null,units:e.communityInfo.units??null,managementFee:e.communityInfo.managementFee??null,builder:e.communityInfo.builder??null,members:e.communityInfo.members??null,avgRating:e.communityInfo.avgRating??null,monthlyInteractions:e.communityInfo.monthlyInteractions??null,forSale:e.communityInfo.forSale??null}:{name:"",year:null,units:null,managementFee:null,builder:null,members:null,avgRating:null,monthlyInteractions:null,forSale:null},posts:{public:l,private:c,publicTotal:((g=e.posts)==null?void 0:g.publicTotal)??0,privateTotal:((b=e.posts)==null?void 0:b.privateTotal)??0},reviews:{items:n.map(ug),total:((v=e.reviews)==null?void 0:v.total)??0},questions:{items:a.map(mg),total:((p=e.questions)==null?void 0:p.total)??0}}}const Cc="community-wall-mock-data-v1",fg=250,fo={communityInfo:{name:"...",year:null,units:null,managementFee:null,builder:null,members:null,avgRating:null,monthlyInteractions:null,forSale:null},posts:{public:[],private:[],publicTotal:0,privateTotal:0},reviews:{items:[],total:0},questions:{items:[],total:0}},pg=e=>new Promise(t=>setTimeout(t,e)),Ic=()=>{try{return typeof window<"u"&&typeof window.localStorage<"u"}catch{return!1}},xg=(e,t)=>{var r,n,a,i;return t?{...e,...t,communityInfo:{...e.communityInfo,...t.communityInfo??{}},posts:{public:((r=t.posts)==null?void 0:r.public)??e.posts.public,private:((n=t.posts)==null?void 0:n.private)??e.posts.private,publicTotal:((a=t.posts)==null?void 0:a.publicTotal)??e.posts.publicTotal,privateTotal:((i=t.posts)==null?void 0:i.privateTotal)??e.posts.privateTotal},reviews:t.reviews??e.reviews,questions:t.questions??e.questions}:e},gg=e=>{if(!Ic())return e;try{const t=window.localStorage.getItem(Cc);if(!t)return e;const r=JSON.parse(t);return xg(e,r)}catch(t){return console.error("Failed to load community wall mock state",t),e}},bg=e=>{if(Ic())try{window.localStorage.setItem(Cc,JSON.stringify(e))}catch(t){console.error("Failed to persist community wall mock state",t)}},vg=["guest","member","resident","agent"],yg=(e,t)=>typeof e=="string"&&vg.includes(e)?e:t?"member":"guest";function wg(e,t={}){const{includePrivate:r=!1,initialMockData:n=sg,persistMockState:a=!0}=t,[i,o]=m.useState(()=>Os.isMockEnabled());m.useEffect(()=>Os.subscribe(o),[]);const[l,c]=m.useState(void 0);m.useEffect(()=>{let M=!0;(async()=>{try{const{data:{user:ee}}=await ce.auth.getUser();M&&(ee!=null&&ee.id)&&c(ee.id)}catch{}})();const{data:{subscription:R}}=ce.auth.onAuthStateChange((ee,Q)=>{var F;M&&c((F=Q==null?void 0:Q.user)==null?void 0:F.id)});return()=>{M=!1,R.unsubscribe()}},[]);const[d,h]=m.useState(()=>a?gg(n):n),[u,x]=m.useState(()=>new Set),f=!!l;m.useEffect(()=>{!a||!i||bg(d)},[d,a,i]);const{data:g,isLoading:b,error:v,refresh:p,toggleLike:w,createPost:k,askQuestion:N,answerQuestion:T}=tg(e,{enabled:!i,includePrivate:r,currentUserId:l}),S=m.useMemo(()=>{var M;if(i)return{...d,posts:{...d.posts,public:rn(d.posts.public),private:rn(d.posts.private)}};if(g){const $=hg(g),R=(M=$.communityInfo)!=null&&M.name?$.communityInfo:{...fo.communityInfo,name:""};return{...$,communityInfo:R}}return fo},[i,d,g]),C=m.useCallback(async()=>{if(i){h(M=>({...M}));return}await p()},[i,p]),_=m.useMemo(()=>i?f?"member":"guest":yg(g==null?void 0:g.viewerRole,f),[i,g==null?void 0:g.viewerRole,f]),B=_!=="guest",j=m.useCallback(()=>{if(l)return l;const M="mock_user_id";let $=localStorage.getItem(M);return $||($=`mock-user-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,localStorage.setItem(M,$)),$},[l]),E=m.useCallback(async M=>{if(i){await pg(fg);const $=j(),R=u.has(M);h(ee=>{const Q=F=>F.map(re=>{if(re.id!==M)return re;const G=re.likes??0,te=re.liked_by??[];return{...re,likes:R?Math.max(0,G-1):G+1,liked_by:R?te.filter(ie=>ie!==$):[...te,$]}});return{...ee,posts:{...ee.posts,public:Q(ee.posts.public),private:Q(ee.posts.private)}}}),x(ee=>{const Q=new Set(ee);return Q.has(M)?Q.delete(M):Q.add(M),Q});return}await w(String(M))},[i,w,u,j]),O=m.useCallback(async(M,$="public")=>{if(i){const R=rg(M,$);h(ee=>{const Q=$==="private"?"private":"public",F=$==="private"?"privateTotal":"publicTotal";return{...ee,posts:{...ee.posts,[Q]:[R,...ee.posts[Q]],[F]:ee.posts[F]+1}}});return}await k(M,$)},[i,k]),L=m.useCallback(async M=>{if(i){const $=ng(M);h(R=>({...R,questions:{...R.questions,items:[$,...R.questions.items],total:R.questions.total+1}}));return}await N(M)},[i,N]),D=m.useCallback(async(M,$)=>{if(i){h(R=>({...R,questions:{...R.questions,items:R.questions.items.map(ee=>{if(ee.id.toString()!==M)return ee;const Q=ag($);return{...ee,answers:[...ee.answers,Q],answersCount:ee.answersCount+1}})}}));return}await T(M,$)},[i,T]),I=m.useCallback(M=>{const $=Os.setMock(M);o($),x(new Set)},[]);return{data:S,useMock:i,setUseMock:I,isLoading:!i&&b,error:i?null:v,refresh:C,toggleLike:E,createPost:O,askQuestion:L,answerQuestion:D,viewerRole:_,isAuthenticated:B}}const jg="".trim().toLowerCase(),Ng=jg!=="false";function _g(){const e=br(),[t,r]=vr();ja();const n=e.id,a=m.useRef(t);m.useEffect(()=>{a.current=t},[t]);const i=m.useMemo(()=>"guest",[]),[o,l]=m.useState(i),[c,d]=m.useState("public"),[h,u]=m.useState(!1),{isAuthenticated:x,role:f,loading:g,error:b}=Et(),v=m.useMemo(()=>g?"guest":x?f:"guest",[f,x,o,g]),p=m.useMemo(()=>_r(v),[v]),w=Ng,{data:k,useMock:N,setUseMock:T,isLoading:S,error:C,refresh:_,toggleLike:B,createPost:j,askQuestion:E,answerQuestion:O,viewerRole:L}=wg(n??"",{includePrivate:p.canAccessPrivate}),D=w||N,I=N,M=!D&&!N;m.useEffect(()=>{b&&Z.error("",b.message)},[b]),m.useEffect(()=>{N||L&&L!==o&&l(L)},[L,o,N]);const $=m.useCallback(()=>{const H=Os.setMock(!0);T(H)},[T]),R=m.useCallback(H=>{I&&l(H)},[I,r]);m.useEffect(()=>{},[o,t,l]),m.useEffect(()=>{if(typeof window>"u")return;const H=ae=>{ae.storageArea!==window.localStorage||ae.newValue};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[o,l]),m.useCallback(()=>{window.location.href=ve.AUTH},[]);const ee=m.useCallback(H=>{H==="private"&&!p.canAccessPrivate||d(H)},[p.canAccessPrivate]);m.useEffect(()=>{c==="private"&&!p.canAccessPrivate&&d("public")},[c,p.canAccessPrivate]);const Q=m.useCallback(async H=>{if(!x){Z.error("","");return}try{await B(H)}catch(ae){console.error("Failed to toggle like",ae),Z.error("","")}},[B,x]),F=m.useCallback(H=>{console.log("Unlock post:",H),Z.info("","")},[]),re=m.useCallback(async(H,ae="public")=>{try{await j(H,ae)}catch(he){console.error("Failed to create post",he),Z.error("","")}},[j]),G=m.useCallback(async H=>{try{await E(H)}catch(ae){throw console.error("Failed to submit question",ae),Z.error("",""),ae}},[E]),te=m.useCallback(async(H,ae)=>{try{await O(H,ae)}catch(he){throw console.error("Failed to submit answer",he),Z.error("",""),he}},[O]),ie=m.useCallback(async()=>{if(!h){u(!0);try{await _()}catch(H){console.error("Failed to refresh community wall",H)}finally{u(!1)}}},[h,_]);if(!n)return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:s.jsxs("div",{className:"rounded-2xl border border-brand/10 bg-white px-8 py-10 text-center shadow-[0_10px_30px_rgba(0,34,73,0.08)]",children:[s.jsx("div",{className:"mb-3 text-4xl",children:""}),s.jsx("p",{className:"mb-4 text-base font-semibold text-ink-900",children:""}),s.jsx("p",{className:"mb-6 text-sm text-ink-600",children:""}),s.jsx("a",{href:ve.HOME,className:"inline-flex items-center justify-center rounded-full bg-brand px-5 py-2.5 text-sm font-bold text-white shadow hover:bg-brand-600",children:""})]})});if(g)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(cs,{mode:"community",title:"..."}),s.jsx("div",{className:"mx-auto max-w-[960px] p-2.5",children:s.jsx(no,{})})]});if(b)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(cs,{mode:"community",title:""}),s.jsx("div",{className:"mx-auto max-w-[960px] p-4",children:s.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-center shadow-sm",children:[s.jsx("p",{className:"text-lg font-semibold text-red-700",children:""}),s.jsx("p",{className:"mt-2 text-sm text-red-600",children:b.message}),s.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"mt-4 inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-bold text-white hover:bg-brand-700",children:""})]})})]});if(S)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(cs,{mode:"community",title:"..."}),s.jsx("div",{className:"mx-auto max-w-[960px] p-2.5",children:s.jsx(no,{})})]});if(C){const H=C.message||"",ae=H.includes("401")||H.includes("403")||H.includes("");return s.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-b from-bg-base to-bg-soft",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-2 text-2xl",children:ae?"":""}),s.jsx("div",{className:"mb-2 text-sm text-ink-600",children:ae?"":""}),ae?s.jsx("button",{onClick:()=>window.location.href="/auth",className:"rounded-lg bg-brand px-4 py-2 text-sm text-white",children:""}):s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[s.jsx("button",{onClick:ie,disabled:h,"aria-busy":h,className:`rounded-lg border border-brand/40 px-4 py-2 text-sm font-semibold transition hover:bg-brand/10 ${h?"cursor-not-allowed text-brand/60":"text-brand"}`,children:h?" ":" "}),s.jsx("button",{onClick:$,className:"rounded-lg bg-[#1a1a2e] px-4 py-2 text-sm font-semibold text-white shadow hover:brightness-110",children:" "})]})]}),s.jsx(oo,{})]})}const{communityInfo:pe,posts:W,reviews:K,questions:de}=k;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[var(--bg-base)] to-[var(--bg-alt)]",children:[s.jsx(cs,{mode:"community",title:pe.name}),s.jsxs("div",{className:"mx-auto flex max-w-[960px] gap-5 p-2.5 pb-[calc(80px+env(safe-area-inset-bottom,20px))] lg:p-2.5",children:[s.jsxs("main",{className:"flex max-w-[600px] flex-1 animate-[fadeInUp_0.5s_ease-out] flex-col gap-3",children:[s.jsx(Sx,{viewerRole:v,reviews:K,onUnlock:F}),s.jsx(Ox,{viewerRole:v,currentTab:c,onTabChange:ee,publicPosts:W.public,privatePosts:W.private,onLike:Q,onCreatePost:re,onUnlock:F}),s.jsx(Px,{viewerRole:v,questions:de,onAskQuestion:G,onAnswerQuestion:te,onUnlock:F})]}),s.jsx(zx,{info:pe,questions:de,posts:W.public})]}),s.jsx(Fx,{viewerRole:v}),(w||N)&&s.jsx(za,{useMock:N,onToggle:()=>T(!N),disabled:M}),N&&s.jsx(Dx,{role:o,onRoleChange:R}),s.jsx(oo,{}),s.jsx("style",{children:`
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(8px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes wave {
          0%, 100% { transform: rotate(0deg); }
          20% { transform: rotate(-25deg); }
          40% { transform: rotate(10deg); }
          60% { transform: rotate(-20deg); }
          80% { transform: rotate(5deg); }
        }
      `})]})}function kg(){return s.jsx(Bx,{children:s.jsx(_g,{})})}function Sg(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""})]})}function Eg(e,t,r){const n=t/12/100,a=r*12;return n===0?e/a:e*n/(1-Math.pow(1+n,-a))}const Tg=()=>{const[e,t]=m.useState(1500),[r,n]=m.useState(30),[a,i]=m.useState(2.25),[o,l]=m.useState(20),[c,d]=m.useState(""),h=m.useMemo(()=>Math.max(0,e*(1-r/100)),[e,r]),u=m.useMemo(()=>Math.round(Eg(h*1e4,a,o)),[h,a,o]),x=3e3,f=m.useMemo(()=>typeof c!="number"||c<=0?null:Math.round((u+x)/c*100),[c,u]),g=()=>{const v=`
${e}${r}%  ${h.toFixed(0)}${o}${a}%   ${u}  ${x} `+(f!==null?`
 ${f}%`:"");navigator.clipboard.writeText(v).then(()=>et(tt.BudgetCopy,{}))},b=f===null?"":f>=50?"":f>=35?"/":"";return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Lite"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:8},children:[s.jsxs("label",{children:["()",s.jsx("input",{type:"number",value:e,onChange:v=>t(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["(%)",s.jsx("input",{type:"number",value:r,onChange:v=>n(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["(%)",s.jsx("input",{type:"number",value:a,onChange:v=>i(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["",s.jsx("input",{type:"number",value:o,onChange:v=>l(Number(v.target.value)),style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("label",{children:["()",s.jsx("input",{type:"number",value:typeof c=="number"?c:"",onChange:v=>{const p=Number(v.target.value);d(Number.isFinite(p)?p:"")},style:{width:"100%",padding:6,borderRadius:8,border:"1px solid #ddd"}})]})]}),s.jsxs("div",{style:{marginTop:10,fontSize:14,color:"#0a2246"},children:[" ",s.jsx("b",{children:u.toLocaleString()}),"  ",s.jsx("b",{children:h.toFixed(0)})," ",f!==null&&s.jsxs(s.Fragment,{children:[" ",s.jsxs("b",{children:[f,"%"]}),""]})]}),s.jsx("div",{style:{marginTop:8,color:"#6b7280"},children:b}),s.jsx("button",{onClick:g,style:{marginTop:8,padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:""})]})},Cg=({onAdopt:e})=>{const[t,r]=m.useState(""),[n,a]=m.useState("agent"),[i,o]=m.useState("detail"),[l,c]=m.useState(null),[d,h]=m.useState(null),[u,x]=m.useState(!1),[f,g]=m.useState(!1),b=async()=>{const p=t.trim();if(p){x(!0);try{const k=(await Oh(p,{audience:n,intent:i})).split(/\n+/).map(S=>S.trim()).filter(Boolean),N=k.find(S=>/^V1/.test(S))||"",T=k.find(S=>/^V2/.test(S))||"";c(N.replace(/^V1[:]\s?/,"")),h(T.replace(/^V2[:]\s?/,"")),et(tt.RewriteGen,{audience:n,intent:i})}finally{x(!1)}}},v=p=>{e==null||e(p),g(!0),et(tt.RewriteAdopt,{audience:n,intent:i}),setTimeout(()=>g(!1),2500)};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:""}),s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[s.jsxs("label",{children:["",s.jsxs("select",{value:n,onChange:p=>a(p.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[s.jsx("option",{value:"agent",children:""}),s.jsx("option",{value:"owner",children:""})]})]}),s.jsxs("label",{children:["",s.jsxs("select",{value:i,onChange:p=>o(p.target.value),style:{marginLeft:6,padding:6,borderRadius:8,border:"1px solid #ddd"},children:[s.jsx("option",{value:"detail",children:""}),s.jsx("option",{value:"view",children:""}),s.jsx("option",{value:"pet",children:""}),s.jsx("option",{value:"price",children:"/"})]})]})]}),s.jsx("textarea",{rows:3,placeholder:"/",value:t,onChange:p=>r(p.target.value),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:s.jsx("button",{onClick:b,disabled:u,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:u?"":""})}),(l||d)&&s.jsxs("div",{style:{marginTop:10,display:"grid",gap:8},children:[l&&s.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:""}),s.jsx("div",{style:{marginBottom:6},children:l}),s.jsx("button",{onClick:()=>v(l),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"/"})]}),d&&s.jsxs("div",{style:{border:"1px solid #E6ECFF",borderRadius:8,padding:8},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:""}),s.jsx("div",{style:{marginBottom:6},children:d}),s.jsx("button",{onClick:()=>v(d),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:"/"})]}),f&&s.jsx("div",{style:{color:"#16a34a"},children:" "})]})]})},Ac="mai-notes-v1";function Ig(){try{const e=localStorage.getItem(Ac);return e?JSON.parse(e):[]}catch{return[]}}function Ag(e){localStorage.setItem(Ac,JSON.stringify(e))}function fa(e,t){const r=Ig(),n={id:Math.random().toString(36).slice(2),createdAt:Date.now(),note:e,...t&&{echo:t}};return r.unshift(n),Ag(r),n}const Lg=()=>{const[e,t]=m.useState(""),[r,n]=m.useState(null),[a,i]=m.useState(!1),[o,l]=m.useState(!1),c=async()=>{const d=e.trim();if(d){i(!0);try{const h=await Ph(d);n(h),fa(d,h),et(tt.NoteSaved,{})}catch{fa(d)}finally{i(!1)}}};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:""}),s.jsx("textarea",{rows:3,placeholder:"",value:e,onChange:d=>t(d.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),style:{width:"100%",padding:8,borderRadius:8,border:"1px solid #ddd"}}),o&&s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:4},children:""}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{onClick:c,disabled:a,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:a?"":""}),r&&s.jsxs("span",{style:{color:"#6b7280"},children:["AI ",r]})]})]})};function Mg(e){const t=e.split(`
`).find(n=>n.trim().startsWith("#tags"));return t?t.replace(/^#tags\s*[:]\s*/i,"").split(",").map(n=>n.trim()).filter(Boolean).slice(0,5):[]}const Rg=()=>{const[e,t]=m.useState(""),[r,n]=m.useState(""),[a,i]=m.useState(""),[o,l]=m.useState(null),[c,d]=m.useState(!1),h=async()=>{d(!0);try{const x=await Dh(e,r,a);l(x);const f=Mg(x);f.length&&Nm(f),et(tt.DebriefGen,{tags:f})}finally{d(!1)}},u=()=>{const x=`
${e}
${r}
${a}
---
${o??""}`;fa(x),et(tt.DebriefSave,{})};return s.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Mini Debrief"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("input",{value:e,onChange:x=>t(x.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("input",{value:r,onChange:x=>n(x.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}}),s.jsx("input",{value:a,onChange:x=>i(x.target.value),placeholder:"",style:{padding:8,borderRadius:8,border:"1px solid #ddd"}})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{onClick:h,disabled:c,style:{padding:"8px 12px",borderRadius:8,background:"#1749D7",color:"#fff",border:"1px solid #1749D7"},children:c?"":" Must/Nice/Avoid + #tags"}),o&&s.jsx("button",{onClick:u,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #1749D7",background:"#fff",color:"#1749D7"},children:""})]}),o&&s.jsx("div",{style:{marginTop:10,whiteSpace:"pre-wrap",color:"#0a2246"},children:o})]})},Og=["","","","","",""],po=({text:e})=>{const[t,r]=m.useState(!1),[n,a]=m.useState(""),[i,o]=m.useState(!1),l=async()=>{if(!n){o(!0);try{const d=await zh(e);a(d),et(tt.ELI5Open,{term:e})}finally{o(!1)}}};m.useEffect(()=>{const h=`mai-eli5-suggest-${new Date().toISOString().slice(0,10)}`;Og.some(x=>e.includes(x))&&!localStorage.getItem(h)&&(localStorage.setItem(h,"1"),r(!0),l())},[]);const c=async()=>{const d=!t;r(d),d&&await l()};return s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",position:"relative"},children:[s.jsx("button",{"aria-label":"",onClick:c,style:{marginLeft:6,width:18,height:18,borderRadius:999,border:"1px solid #C9D5FF",background:"#F5F8FF",color:"#1749D7",fontSize:12,cursor:"pointer"},children:"?"}),t&&s.jsxs("div",{style:{position:"absolute",top:"120%",left:0,background:"#fff",border:"1px solid #E6ECFF",borderRadius:8,padding:10,width:280,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",zIndex:50},children:[s.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:6},children:""}),s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:i?"":n})]})]})};function Pg(){return s.jsxs("section",{className:"mx-auto mt-8 max-w-container space-y-6 rounded-[var(--r-lg)] bg-white p-6 shadow-[var(--shadow-card)]",children:[s.jsx("h1",{className:"text-xl font-semibold",children:""}),s.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Tg,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Cg,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Lg,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsx(Rg,{})]}),s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsx("h2",{className:"mb-3 text-lg font-medium",children:""}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",s.jsx(po,{text:""})," ",s.jsx(po,{text:""})," "]})]})]})}const zg={5:30*1e3},pa=e=>({id:e,currentStep:1,isPaid:!1,steps:{1:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},2:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,data:{risks:{water:!1,wall:!1,structure:!1,other:!1}}},3:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},4:{name:"",agentStatus:"pending",buyerStatus:"pending",data:{},locked:!1},5:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,paymentStatus:"pending",paymentDeadline:null,data:{}},6:{name:"",agentStatus:"pending",buyerStatus:"pending",locked:!1,checklist:[],data:{}}},supplements:[]}),xo=e=>{if(typeof window>"u")return pa(e);const t=sessionStorage.getItem(`mock_tx_${e}`);return t?JSON.parse(t):pa(e)},go=e=>{typeof window<"u"&&sessionStorage.setItem(`mock_tx_${e.id}`,JSON.stringify(e))},Dr={fetchData:async e=>xo(e),dispatch:async(e,t,r,n)=>{var l,c,d;await new Promise(h=>setTimeout(h,600));const a=xo(t),i=JSON.parse(JSON.stringify(a)),o=parseInt(n.step||i.currentStep);try{switch(e){case"submit":if(r!=="agent")throw new Error("");i.steps[o]&&(i.steps[o].data={...i.steps[o].data,...n.data},i.steps[o].agentStatus="submitted");break;case"confirm":if(r!=="buyer")throw new Error("");if(i.steps[o]&&(i.steps[o].buyerStatus="confirmed",n.note&&(i.steps[o].data={...i.steps[o].data,buyerNote:n.note})),o===5)i.steps[5]&&(i.steps[5].paymentStatus="initiated",i.steps[5].paymentDeadline=Date.now()+(zg[5]||3e4));else if(o===6){if(!((c=(l=i.steps[6])==null?void 0:l.checklist)==null?void 0:c.every(f=>f.checked)))throw new Error("");i.steps[6]&&(i.steps[6].locked=!0)}else i.steps[o]&&(i.steps[o].locked=!0),i.currentStep+=1;break;case"payment":if(r!=="agent")throw new Error("");if(((d=i.steps[5])==null?void 0:d.paymentStatus)!=="initiated")throw new Error("");i.isPaid=!0,i.steps[5]&&(i.steps[5].paymentStatus="completed",i.steps[5].locked=!0),i.currentStep=6,i.steps[6]&&(i.steps[6].checklist=[{id:"utilities",label:" ",checked:!1},{id:"security",label:" ",checked:!1},{id:"keys",label:" ",checked:!1},{id:"condition",label:"  (/)",checked:!1}]);break;case"checklist":const h=i.steps[6];if(h&&h.checklist){const x=h.checklist.find(f=>f.id===n.itemId);x&&(x.checked=n.checked)}break;case"supplement":i.supplements.push({role:r,content:n.content,timestamp:Date.now()});break;case"reset":const u=pa(t);return go(u),{success:!0,tx:u}}return go(i),{success:!0,tx:i}}catch(h){return{success:!1,error:h.message}}}},On={fetchData:async(e,t)=>{try{const r=await fetch(`/api/trust/status?id=${e}`);if(r.ok)return await r.json();if(r.status===401||r.status===403)throw new Error("UNAUTHORIZED");return null}catch(r){if(r.message==="UNAUTHORIZED")throw r;return console.error(r),null}},dispatch:async(e,t,r,n)=>{try{const a=await fetch(`/api/trust/${e}?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.status===401||a.status===403)return{success:!1,error:"UNAUTHORIZED"};const i=await a.json();return i.error?{success:!1,error:i.error}:{success:!0,tx:i.state||i}}catch(a){return{success:!1,error:a.message}}}};function Dg(){const[e,t]=m.useState(!1),[r,n]=m.useState(""),[a,i]=m.useState("agent"),[o,l]=m.useState(null),[c,d]=m.useState(!0),[h,u]=m.useState(!1),[x,f]=m.useState("--:--:--"),[g,b]=m.useState(!1);m.useEffect(()=>{if(typeof window>"u")return;(async()=>{const N=window.location.hash;if(N.includes("token=")){const T=N.split("token=")[1];window.history.replaceState(null,"",window.location.pathname);try{await fetch("/api/trust/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:T})})}catch(S){console.error("Session exchange failed",S),Z.error("")}}try{const T=await fetch("/api/trust/me");if(T.ok){const S=await T.json();i(S.role),n(S.caseId),t(!1),b(!1),await p(S.caseId)}else d(!1)}catch(T){console.error(T),d(!1)}})()},[]);const v=m.useCallback(async()=>{t(!0),b(!1);const k="MOCK-DEMO-01";n(k),i("agent");const N=await Dr.fetchData(k);l(N),Z.success(" ()")},[]),p=m.useCallback(async k=>{const N=k||r;if(N&&!(g&&!e)){d(!0);try{let T;e?T=await Dr.fetchData(N):T=await On.fetchData(N,""),T&&(l(T),b(!1))}catch(T){console.error(T),T.message==="UNAUTHORIZED"&&(b(!0),Z.error(""))}finally{d(!1)}}},[e,r,g]);m.useEffect(()=>{if(!e&&r&&!g){const k=setInterval(()=>p(),5e3);return()=>clearInterval(k)}},[r,e,p,g]),m.useEffect(()=>{const k=setInterval(()=>{var N,T;if(((T=(N=o==null?void 0:o.steps)==null?void 0:N[5])==null?void 0:T.paymentStatus)==="initiated"&&o.steps[5].paymentDeadline){const S=o.steps[5].paymentDeadline-Date.now();if(S<=0)f(""),e||p();else{const C=Math.floor(S/36e5),_=Math.floor(S%36e5/6e4),B=Math.floor(S%6e4/1e3);f(`${C}:${_.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`)}}},1e3);return()=>clearInterval(k)},[o,e,p]);const w=m.useCallback(async(k,N={})=>{if(!h){u(!0);try{const T=e?Dr:On;let S;return e?S=await Dr.dispatch(k,r,a,N):S=await On.dispatch(k,r,"",N),S.success?(S.tx&&l(S.tx),await p(),Z.success(""),!0):(S.error==="UNAUTHORIZED"?(b(!0),Z.error("")):Z.error(S.error||""),!1)}catch(T){return console.error(T),Z.error(""),!1}finally{u(!1)}}},[e,r,a,p,h]);return{isMock:e,caseId:r,setCaseId:n,role:a,setRole:i,setToken:()=>{},token:"",tx:o,setTx:l,loading:c,isBusy:h,timeLeft:x,startMockMode:v,dispatchAction:w,fetchData:p}}function bo(){nl();const{isMock:e,caseId:t,role:r,setRole:n,tx:a,loading:i,isBusy:o,timeLeft:l,startMockMode:c,dispatchAction:d}=Dg(),[h,u]=m.useState(""),[x,f]=m.useState("");typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"));const g=async(C,_={})=>{await d(C,_)&&(u(""),f(""))},b=C=>g("submit",{step:C,data:{note:h}}),v=C=>g("confirm",{step:C,note:h}),p=()=>{confirm("")&&g("payment")},w=(C,_)=>{r==="buyer"&&g("checklist",{itemId:C,checked:_})},k=()=>g("supplement",{content:x}),N=()=>{confirm("")&&g("reset")},T=()=>{n(r==="agent"?"buyer":"agent")};if(!a&&!i)return s.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-slate-100 p-4 font-sans",children:s.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white p-8 text-center shadow-xl",children:[s.jsx("div",{className:"mx-auto mb-4 flex size-16 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:s.jsx(Un,{size:32})}),s.jsx("h2",{className:"mb-2 text-xl font-bold text-gray-800",children:" Trust Room"}),s.jsx("p",{className:"mb-6 text-sm text-gray-500",children:" (Token)"}),s.jsxs("button",{onClick:c,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-blue-600 py-3 font-bold text-white shadow-lg transition hover:bg-blue-700",children:[s.jsx(Un,{size:18})," (Demo Mode)"]}),s.jsx("p",{className:"mt-4 text-xs text-gray-400",children:""})]})});if(!a)return s.jsx("div",{className:"p-8 text-center",children:"..."});const S=C=>{switch(C){case"1":return s.jsx(es,{size:14});case"2":return s.jsx(Dd,{size:14});case"3":return s.jsx(al,{size:14});case"4":return s.jsx(ol,{size:14});case"5":return s.jsx(zd,{size:14});case"6":return s.jsx(He,{size:14});default:return s.jsx(Pd,{size:14})}};return s.jsxs("div",{className:"relative mx-auto min-h-screen max-w-md bg-white pb-24 font-sans text-gray-800 shadow-2xl",children:[s.jsxs("header",{className:`${e?"bg-indigo-900":"bg-slate-900"} sticky top-0 z-overlay flex items-center justify-between p-4 text-white shadow-lg transition-colors`,children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"flex items-center gap-2 text-lg font-bold tracking-wide",children:["MaiHouses ",s.jsx("span",{className:`rounded px-1 text-xs ${e?"bg-yellow-500 text-black":"bg-blue-600"}`,children:e?"DEMO":"V10"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[": ",t]}),i&&s.jsx("span",{className:"animate-pulse",children:""})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:N,className:"flex size-8 items-center justify-center rounded bg-white/10 transition hover:bg-white/20",children:s.jsx(Rd,{size:14})}),s.jsxs("button",{onClick:T,className:`flex items-center gap-1 rounded-md border border-white/20 px-3 py-1 text-xs font-bold transition ${r==="agent"?"bg-blue-600":"bg-green-600"}`,children:[r==="agent"?s.jsx(Od,{size:12}):s.jsx($n,{size:12}),r==="agent"?"":""]})]})]}),s.jsxs("div",{className:"sticky top-[60px] z-40 border-b bg-slate-50 p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[" ",a.currentStep,"/6"]}),a.isPaid&&s.jsx("span",{className:"rounded-full bg-green-100 px-2 py-0.5 text-xs font-bold text-green-800",children:""})]}),s.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200",children:s.jsx("div",{className:"h-2 rounded-full bg-blue-600 transition-all duration-700",style:{width:`${a.currentStep/6*100}%`}})})]}),s.jsxs("div",{className:"space-y-0 p-4",children:[Object.entries(a.steps).map(([C,_])=>{var D;const B=parseInt(C),j=B===a.currentStep,E=B<a.currentStep,O=B>a.currentStep;let L="bg-gray-300 border-gray-300";return E||_.locked?L="bg-green-500 border-green-500":j&&(L="bg-blue-600 border-blue-600"),s.jsxs("div",{className:`relative py-3 pl-14 ${O?"opacity-50 grayscale":""}`,children:[s.jsx("div",{className:`absolute left-0 top-3 z-10 flex size-10 items-center justify-center rounded-full border-4 border-white text-white shadow-sm transition-colors ${L}`,children:S(C)}),C!=="6"&&s.jsx("div",{className:"absolute bottom-[-20px] left-[24px] top-[50px] z-0 w-[2px] bg-gray-200"}),s.jsxs("div",{className:`rounded-xl border bg-white p-4 shadow-sm transition-all ${j?"border-blue-500 ring-2 ring-blue-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[s.jsxs("h3",{className:"flex items-center gap-2 font-bold text-gray-800",children:[_.name,C==="5"&&_.paymentStatus==="initiated"&&!_.locked&&s.jsx("span",{className:"animate-pulse rounded bg-orange-50 px-2 text-[10px] text-orange-500",children:""}),C==="5"&&_.paymentStatus==="expired"&&s.jsx("span",{className:"rounded bg-red-50 px-2 text-[10px] text-red-500",children:""})]}),_.locked&&s.jsx(Sa,{size:14,className:"text-green-600"})]}),C==="2"&&_.data.note&&s.jsxs("div",{className:"mb-3 rounded border border-gray-100 bg-gray-50 p-3",children:[s.jsx("p",{className:"mb-2 border-b pb-1 text-xs font-bold text-gray-500",children:" "}),s.jsx("div",{className:"whitespace-pre-wrap text-sm",children:_.data.note})]}),C==="5"&&_.paymentStatus==="initiated"&&!_.locked&&s.jsxs("div",{className:"mb-4 rounded-lg border border-orange-200 bg-orange-50 p-4 text-center",children:[s.jsx("div",{className:"mb-1 font-mono text-2xl font-bold text-orange-600",children:l}),s.jsx("div",{className:"mb-3 text-xs text-orange-400",children:""}),r==="agent"?s.jsx("button",{onClick:p,disabled:o||l==="",className:`w-full rounded py-2 font-bold text-white shadow ${l===""?"cursor-not-allowed bg-gray-400":"bg-gradient-to-r from-orange-500 to-red-500 hover:shadow-lg"}`,children:l===""?"":o?"...":" NT$ 2,000"}):s.jsx("div",{className:"text-xs text-gray-400",children:"..."})]}),C==="6"&&!_.locked&&a.isPaid&&s.jsxs("div",{className:"mt-2 space-y-2",children:[(D=_.checklist)==null?void 0:D.map(I=>s.jsxs("div",{onClick:()=>w(I.id,!I.checked),className:`flex cursor-pointer items-center rounded border p-4 transition ${I.checked?"border-indigo-200 bg-indigo-50":"hover:bg-gray-50"}`,children:[s.jsx("div",{className:`flex size-5 items-center justify-center rounded border bg-white ${I.checked?"border-indigo-600 bg-indigo-600":""}`,children:I.checked&&s.jsx(ut,{size:12,className:"text-white"})}),s.jsx("span",{className:`ml-3 text-sm ${I.checked?"font-bold text-indigo-800":""}`,children:I.label})]},I.id)),s.jsx("button",{onClick:()=>v("6"),className:"mt-2 w-full rounded bg-indigo-600 py-2 font-bold text-white",children:""})]}),!_.locked&&j&&C!=="5"&&C!=="6"&&s.jsxs("div",{children:[r==="agent"&&(_.agentStatus==="pending"?s.jsxs("div",{children:[s.jsx("textarea",{value:h,onChange:I=>u(I.target.value),className:"mb-2 w-full rounded border p-2 text-sm outline-none ring-blue-200 focus:ring-2",placeholder:"..."}),s.jsx("button",{onClick:()=>b(C),disabled:o,className:"w-full rounded bg-slate-800 py-2 text-sm text-white",children:o?"...":""})]}):s.jsx("div",{className:"rounded bg-gray-50 py-2 text-center text-xs text-gray-400",children:"..."})),r==="buyer"&&(_.agentStatus==="submitted"?s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-xs text-gray-500",children:""}),s.jsx("div",{className:"mb-2 whitespace-pre-wrap rounded border bg-gray-50 p-2 text-sm",children:_.data.note||""}),s.jsx("textarea",{value:h,onChange:I=>u(I.target.value),className:"mb-2 w-full rounded border p-2 text-sm outline-none ring-green-200 focus:ring-2",placeholder:" ()..."}),s.jsx("button",{onClick:()=>v(C),disabled:o,className:"w-full rounded bg-green-600 py-2 text-sm text-white",children:o?"...":""})]}):s.jsx("div",{className:"py-2 text-center text-xs text-gray-400",children:"..."}))]}),_.data.buyerNote&&s.jsxs("div",{className:"mt-2 rounded border border-green-100 bg-green-50 p-2 text-xs",children:[s.jsx("span",{className:"font-bold text-green-700",children:""})," ",_.data.buyerNote]}),C==="5"&&!_.locked&&_.paymentStatus==="pending"&&s.jsxs("div",{children:[r==="agent"&&_.agentStatus==="pending"&&s.jsx("button",{onClick:()=>b("5"),className:"w-full rounded bg-slate-800 py-2 text-white",children:""}),r==="buyer"&&_.agentStatus==="submitted"&&s.jsx("button",{onClick:()=>v("5"),className:"w-full rounded bg-green-600 py-2 text-white",children:" ()"})]}),a.supplements.length>0&&s.jsx("div",{className:"mt-4 border-t border-dashed pt-4",children:a.supplements.map((I,M)=>s.jsxs("div",{className:"mb-1 flex gap-2 rounded border border-gray-100 bg-gray-50 p-2 text-xs",children:[s.jsx("span",{className:"font-bold",children:I.role==="agent"?"":""}),s.jsx("span",{className:"flex-1",children:I.content})]},M))})]})]},C)}),s.jsxs("div",{className:"mt-8 rounded-xl border bg-white p-4 shadow-sm",children:[s.jsx("h4",{className:"mb-2 text-xs font-bold text-gray-500",children:"  (/)"}),s.jsx("p",{className:"mb-2 text-[10px] text-gray-400",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:x,onChange:C=>f(C.target.value),className:"flex-1 rounded border px-3 py-2 text-sm",placeholder:"..."}),s.jsx("button",{onClick:k,disabled:!x,className:"rounded bg-gray-800 px-4 text-sm text-white",children:""})]})]})]})]})}function Fg(){return s.jsx("main",{className:"mx-auto max-w-container p-4 md:p-6",children:s.jsx(lc,{})})}let lt=class extends m.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.error(t);try{Ra("error_boundary","*",String(t.message||t))}catch{}}render(){return this.state.hasError?s.jsx("div",{className:"rounded-[var(--r-lg)] bg-white p-4 text-[var(--danger)] shadow-[var(--shadow-card)]",children:""}):this.props.children}};const $g=m.createContext(null),Ug=({children:e})=>{const[t,r]=m.useState(()=>localStorage.getItem("mai-mood-v1")||"neutral"),n=m.useCallback(i=>{r(i),localStorage.setItem("mai-mood-v1",i),_m(i),et(tt.MoodPick,{mood:i})},[]),a=m.useMemo(()=>({mood:t,setMood:n,tone:t==="stress"?"soothe":t==="rest"?"warm":"light",throttleLevel:t==="stress"?2:t==="rest"?1:0}),[t,n]);return s.jsx($g.Provider,{value:a,children:e})};function Bg(){const[e,t]=m.useState(()=>typeof window>"u"?!1:!localStorage.getItem("cookie-consent")),r=()=>{localStorage.setItem("cookie-consent","true"),t(!1)};return e?s.jsx("div",{className:"fixed inset-x-0 bottom-0 z-overlay bg-gray-900 p-4 text-white shadow-lg md:p-6",children:s.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 md:flex-row",children:[s.jsx("div",{className:"text-sm text-gray-300",children:" Cookie "}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:r,className:"rounded-full bg-brand px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",children:""})})]})}):null}const Gg=m.createContext(null),Pn={didCatch:!1,error:null};class Hg extends m.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Pn}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(Pn)}}componentDidCatch(t,r){var n,a;(n=(a=this.props).onError)===null||n===void 0||n.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:a}=this.props;if(n&&r.error!==null&&Wg(t.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(Pn)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let l=t;if(i){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(c);else if(n)l=m.createElement(n,c);else if(a!==void 0)l=a;else throw o}return m.createElement(Gg.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function Wg(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}const Vg="_primary_89vf5_307",Zg="_float_89vf5_1",Yg="_pulse_89vf5_1",Kg="_selected_89vf5_419",Qg="_urgent_89vf5_575",qg="_shimmer_89vf5_1",z={"uag-page":"_uag-page_89vf5_51","uag-header":"_uag-header_89vf5_101","uag-header-inner":"_uag-header-inner_89vf5_115","uag-logo":"_uag-logo_89vf5_125","uag-logo-badge":"_uag-logo-badge_89vf5_127","uag-container":"_uag-container_89vf5_139","uag-grid":"_uag-grid_89vf5_141","k-span-2":"_k-span-2_89vf5_147","k-span-3":"_k-span-3_89vf5_149","k-span-4":"_k-span-4_89vf5_151","k-span-6":"_k-span-6_89vf5_153","uag-breadcrumb":"_uag-breadcrumb_89vf5_173","uag-badge--pro":"_uag-badge--pro_89vf5_201","uag-card":"_uag-card_89vf5_215","uag-card-header":"_uag-card-header_89vf5_243","uag-card-title":"_uag-card-title_89vf5_245","uag-card-sub":"_uag-card-sub_89vf5_255","uag-actions":"_uag-actions_89vf5_265","uag-btn":"_uag-btn_89vf5_287",primary:Vg,"uag-badge":"_uag-badge_89vf5_201","uag-badge--s":"_uag-badge--s_89vf5_337","uag-badge--a":"_uag-badge--a_89vf5_339","uag-cluster":"_uag-cluster_89vf5_345","uag-bubble":"_uag-bubble_89vf5_397",float:Zg,pulse:Yg,selected:Kg,"uag-bubble-grade":"_uag-bubble-grade_89vf5_443","uag-bubble-label":"_uag-bubble-label_89vf5_453","uag-action-panel":"_uag-action-panel_89vf5_479","ap-head":"_ap-head_89vf5_493","ap-body":"_ap-body_89vf5_505","ap-stats-group":"_ap-stats-group_89vf5_523","ai-box":"_ai-box_89vf5_525","action-zone":"_action-zone_89vf5_527","ap-stat":"_ap-stat_89vf5_523",urgent:Qg,"btn-attack":"_btn-attack_89vf5_589",shimmer:qg,"monitor-table":"_monitor-table_89vf5_669","progress-bg":"_progress-bg_89vf5_715","progress-fill":"_progress-fill_89vf5_717","t-countdown":"_t-countdown_89vf5_719","listing-item":"_listing-item_89vf5_725","l-thumb":"_l-thumb_89vf5_737","l-title":"_l-title_89vf5_739","l-tags":"_l-tags_89vf5_741","l-tag":"_l-tag_89vf5_741","l-kpi":"_l-kpi_89vf5_745","feed-post":"_feed-post_89vf5_763","fp-title":"_fp-title_89vf5_767","fp-meta":"_fp-meta_89vf5_769","fp-body":"_fp-body_89vf5_771","mai-card":"_mai-card_89vf5_777","mai-head":"_mai-head_89vf5_805","mai-tag":"_mai-tag_89vf5_815","mai-title":"_mai-title_89vf5_817","mai-sub":"_mai-sub_89vf5_819","mai-body":"_mai-body_89vf5_821","mai-left":"_mai-left_89vf5_823","mai-price":"_mai-price_89vf5_825","mai-price-label":"_mai-price-label_89vf5_827","mai-price-value":"_mai-price-value_89vf5_829","mai-price-unit":"_mai-price-unit_89vf5_831","mai-stats":"_mai-stats_89vf5_833","mai-right":"_mai-right_89vf5_839","mai-thumb":"_mai-thumb_89vf5_841","mai-mini":"_mai-mini_89vf5_843","mai-actions":"_mai-actions_89vf5_847","mai-btn":"_mai-btn_89vf5_849","flow-stage":"_flow-stage_89vf5_889","uag-footer-bar":"_uag-footer-bar_89vf5_895"};function A(e,t,r){function n(l,c){var d;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(d=l._zod).traits??(d.traits=new Set),l._zod.traits.add(e),t(l,c);for(const h in o.prototype)h in l||Object.defineProperty(l,h,{value:o.prototype[h].bind(l)});l._zod.constr=o,l._zod.def=c}const a=(r==null?void 0:r.Parent)??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(l){var c;const d=r!=null&&r.Parent?new i:this;n(d,l),(c=d._zod).deferred??(c.deferred=[]);for(const h of d._zod.deferred)h();return d}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>{var c,d;return r!=null&&r.Parent&&l instanceof r.Parent?!0:(d=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:d.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Ps extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Lc extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Mc={};function js(e){return Mc}function Jg(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function xa(e,t){return typeof t=="bigint"?t.toString():t}function Ga(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Ha(e){return e==null}function Wa(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Xg(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let a=(n.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(n)){const c=n.match(/\d?e-(\d?)/);c!=null&&c[1]&&(a=Number.parseInt(c[1]))}const i=r>a?r:a,o=Number.parseInt(e.toFixed(i).replace(".","")),l=Number.parseInt(t.toFixed(i).replace(".",""));return o%l/10**i}const vo=Symbol("evaluating");function we(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==vo)return n===void 0&&(n=vo,n=r()),n},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function ks(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ss(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function yo(e){return JSON.stringify(e)}const Rc="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function nn(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const e0=Ga(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ur(e){if(nn(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(nn(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Oc(e){return ur(e)?{...e}:Array.isArray(e)?[...e]:e}const t0=new Set(["string","number","symbol"]);function xn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ss(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function ne(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function s0(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const r0={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function n0(e,t){const r=e._zod.def,n=Ss(e._zod.def,{get shape(){const a={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(a[i]=r.shape[i])}return ks(this,"shape",a),a},checks:[]});return ss(e,n)}function a0(e,t){const r=e._zod.def,n=Ss(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete a[i]}return ks(this,"shape",a),a},checks:[]});return ss(e,n)}function i0(e,t){if(!ur(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=Ss(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return ks(this,"shape",i),i},checks:[]});return ss(e,a)}function o0(e,t){if(!ur(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return ks(this,"shape",n),n},checks:e._zod.def.checks};return ss(e,r)}function l0(e,t){const r=Ss(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return ks(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return ss(e,r)}function c0(e,t,r){const n=Ss(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:a[o]}):a[o])}else for(const o in a)i[o]=e?new e({type:"optional",innerType:a[o]}):a[o];return ks(this,"shape",i),i},checks:[]});return ss(t,n)}function d0(e,t,r){const n=Ss(t._zod.def,{get shape(){const a=t._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:a[o]}))}else for(const o in a)i[o]=new e({type:"nonoptional",innerType:a[o]});return ks(this,"shape",i),i},checks:[]});return ss(t,n)}function Ms(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Pc(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Fr(e){return typeof e=="string"?e:e==null?void 0:e.message}function Ns(e,t,r){var a,i,o,l,c,d;const n={...e,path:e.path??[]};if(!e.message){const h=Fr((o=(i=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Fr((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Fr((c=r.customError)==null?void 0:c.call(r,e))??Fr((d=r.localeError)==null?void 0:d.call(r,e))??"Invalid input";n.message=h}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function Va(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function mr(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const zc=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,xa,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Dc=A("$ZodError",zc),Fc=A("$ZodError",zc,{Parent:Error});function u0(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function m0(e,t=r=>r.message){const r={_errors:[]},n=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>n({issues:o}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let o=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(e),r}const Za=e=>(t,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Ps;if(o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(c=>Ns(c,i,js())));throw Rc(l,a==null?void 0:a.callee),l}return o.value},Ya=e=>async(t,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(c=>Ns(c,i,js())));throw Rc(l,a==null?void 0:a.callee),l}return o.value},gn=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Ps;return i.issues.length?{success:!1,error:new(e??Dc)(i.issues.map(o=>Ns(o,a,js())))}:{success:!0,data:i.value}},h0=gn(Fc),bn=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>Ns(o,a,js())))}:{success:!0,data:i.value}},f0=bn(Fc),p0=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Za(e)(t,r,a)},x0=e=>(t,r,n)=>Za(e)(t,r,n),g0=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Ya(e)(t,r,a)},b0=e=>async(t,r,n)=>Ya(e)(t,r,n),v0=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return gn(e)(t,r,a)},y0=e=>(t,r,n)=>gn(e)(t,r,n),w0=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return bn(e)(t,r,a)},j0=e=>async(t,r,n)=>bn(e)(t,r,n),N0=/^[cC][^\s-]{8,}$/,_0=/^[0-9a-z]+$/,k0=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,S0=/^[0-9a-vA-V]{20}$/,E0=/^[A-Za-z0-9]{27}$/,T0=/^[a-zA-Z0-9_-]{21}$/,C0=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,I0=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,wo=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,A0=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,L0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function M0(){return new RegExp(L0,"u")}const R0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O0=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,P0=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,z0=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,D0=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,$c=/^[A-Za-z0-9_-]*$/,F0=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,$0=/^\+(?:[0-9]){6,14}[0-9]$/,Uc="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",U0=new RegExp(`^${Uc}$`);function Bc(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function B0(e){return new RegExp(`^${Bc(e)}$`)}function G0(e){const t=Bc({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${Uc}T(?:${n})$`)}const H0=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},W0=/^-?\d+$/,V0=/^-?\d+(?:\.\d+)?/,Z0=/^null$/i,Y0=/^[^A-Z]*$/,K0=/^[^a-z]*$/,st=A("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Gc={number:"number",bigint:"bigint",object:"date"},Hc=A("$ZodCheckLessThan",(e,t)=>{st.init(e,t);const r=Gc[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Wc=A("$ZodCheckGreaterThan",(e,t)=>{st.init(e,t);const r=Gc[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Q0=A("$ZodCheckMultipleOf",(e,t)=>{st.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Xg(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),q0=A("$ZodCheckNumberFormat",(e,t)=>{var o;st.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[a,i]=r0[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=a,c.maximum=i,r&&(c.pattern=W0)}),e._zod.check=l=>{const c=l.value;if(r){if(!Number.isInteger(c)){l.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}c<a&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),c>i&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),J0=A("$ZodCheckMaxLength",(e,t)=>{var r;st.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!Ha(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const o=Va(a);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),X0=A("$ZodCheckMinLength",(e,t)=>{var r;st.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!Ha(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const o=Va(a);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),eb=A("$ZodCheckLengthEquals",(e,t)=>{var r;st.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!Ha(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,i=a.length;if(i===t.length)return;const o=Va(a),l=i>t.length;n.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),vn=A("$ZodCheckStringFormat",(e,t)=>{var r,n;st.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),tb=A("$ZodCheckRegex",(e,t)=>{vn.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),sb=A("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Y0),vn.init(e,t)}),rb=A("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=K0),vn.init(e,t)}),nb=A("$ZodCheckIncludes",(e,t)=>{st.init(e,t);const r=xn(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),ab=A("$ZodCheckStartsWith",(e,t)=>{st.init(e,t);const r=new RegExp(`^${xn(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),ib=A("$ZodCheckEndsWith",(e,t)=>{st.init(e,t);const r=new RegExp(`.*${xn(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ob=A("$ZodCheckOverwrite",(e,t)=>{st.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class lb{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const cb={major:4,minor:1,patch:12},Te=A("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=cb;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const i=(l,c,d)=>{let h=Ms(l),u;for(const x of c){if(x._zod.def.when){if(!x._zod.def.when(l))continue}else if(h)continue;const f=l.issues.length,g=x._zod.check(l);if(g instanceof Promise&&(d==null?void 0:d.async)===!1)throw new Ps;if(u||g instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await g,l.issues.length!==f&&(h||(h=Ms(l,f)))});else{if(l.issues.length===f)continue;h||(h=Ms(l,f))}}return u?u.then(()=>l):l},o=(l,c,d)=>{if(Ms(l))return l.aborted=!0,l;const h=i(c,n,d);if(h instanceof Promise){if(d.async===!1)throw new Ps;return h.then(u=>e._zod.parse(u,d))}return e._zod.parse(h,d)};e._zod.run=(l,c)=>{if(c.skipChecks)return e._zod.parse(l,c);if(c.direction==="backward"){const h=e._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(u=>o(u,l,c)):o(h,l,c)}const d=e._zod.parse(l,c);if(d instanceof Promise){if(c.async===!1)throw new Ps;return d.then(h=>i(h,n,c))}return i(d,n,c)}}e["~standard"]={validate:i=>{var o;try{const l=h0(e,i);return l.success?{value:l.data}:{issues:(o=l.error)==null?void 0:o.issues}}catch{return f0(e,i).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),Ka=A("$ZodString",(e,t)=>{var r;Te.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??H0(e._zod.bag),e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Ne=A("$ZodStringFormat",(e,t)=>{vn.init(e,t),Ka.init(e,t)}),db=A("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=I0),Ne.init(e,t)}),ub=A("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=wo(n))}else t.pattern??(t.pattern=wo());Ne.init(e,t)}),mb=A("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=A0),Ne.init(e,t)}),hb=A("$ZodURL",(e,t)=>{Ne.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),a=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:F0.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),fb=A("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=M0()),Ne.init(e,t)}),pb=A("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=T0),Ne.init(e,t)}),xb=A("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=N0),Ne.init(e,t)}),gb=A("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=_0),Ne.init(e,t)}),bb=A("$ZodULID",(e,t)=>{t.pattern??(t.pattern=k0),Ne.init(e,t)}),vb=A("$ZodXID",(e,t)=>{t.pattern??(t.pattern=S0),Ne.init(e,t)}),yb=A("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=E0),Ne.init(e,t)}),wb=A("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=G0(t)),Ne.init(e,t)}),jb=A("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=U0),Ne.init(e,t)}),Nb=A("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=B0(t)),Ne.init(e,t)}),_b=A("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=C0),Ne.init(e,t)}),kb=A("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=R0),Ne.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Sb=A("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=O0),Ne.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Eb=A("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=P0),Ne.init(e,t)}),Tb=A("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=z0),Ne.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[a,i]=n;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Vc(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Cb=A("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=D0),Ne.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Vc(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Ib(e){if(!$c.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Vc(r)}const Ab=A("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=$c),Ne.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Ib(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Lb=A("$ZodE164",(e,t)=>{t.pattern??(t.pattern=$0),Ne.init(e,t)});function Mb(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const Rb=A("$ZodJWT",(e,t)=>{Ne.init(e,t),e._zod.check=r=>{Mb(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Zc=A("$ZodNumber",(e,t)=>{Te.init(e,t),e._zod.pattern=e._zod.bag.pattern??V0,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),r}}),Ob=A("$ZodNumber",(e,t)=>{q0.init(e,t),Zc.init(e,t)}),Pb=A("$ZodNull",(e,t)=>{Te.init(e,t),e._zod.pattern=Z0,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),zb=A("$ZodUnknown",(e,t)=>{Te.init(e,t),e._zod.parse=r=>r}),Db=A("$ZodNever",(e,t)=>{Te.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function jo(e,t,r){e.issues.length&&t.issues.push(...Pc(r,e.issues)),t.value[r]=e.value}const Fb=A("$ZodArray",(e,t)=>{Te.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const l=a[o],c=t.element._zod.run({value:l,issues:[]},n);c instanceof Promise?i.push(c.then(d=>jo(d,r,o))):jo(c,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function an(e,t,r,n){e.issues.length&&t.issues.push(...Pc(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function Yc(e){var n,a,i,o;const t=Object.keys(e.shape);for(const l of t)if(!((o=(i=(a=(n=e.shape)==null?void 0:n[l])==null?void 0:a._zod)==null?void 0:i.traits)!=null&&o.has("$ZodType")))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const r=s0(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function Kc(e,t,r,n,a,i){const o=[],l=a.keySet,c=a.catchall._zod,d=c.def.type;for(const h of Object.keys(t)){if(l.has(h))continue;if(d==="never"){o.push(h);continue}const u=c.run({value:t[h],issues:[]},n);u instanceof Promise?e.push(u.then(x=>an(x,r,h,t))):an(u,r,h,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const $b=A("$ZodObject",(e,t)=>{Te.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const l=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...l};return Object.defineProperty(t,"shape",{value:c}),c}})}const n=Ga(()=>Yc(t));we(e._zod,"propValues",()=>{const l=t.shape,c={};for(const d in l){const h=l[d]._zod;if(h.values){c[d]??(c[d]=new Set);for(const u of h.values)c[d].add(u)}}return c});const a=nn,i=t.catchall;let o;e._zod.parse=(l,c)=>{o??(o=n.value);const d=l.value;if(!a(d))return l.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),l;l.value={};const h=[],u=o.shape;for(const x of o.keys){const g=u[x]._zod.run({value:d[x],issues:[]},c);g instanceof Promise?h.push(g.then(b=>an(b,l,x,d))):an(g,l,x,d)}return i?Kc(h,d,l,c,n.value,e):h.length?Promise.all(h).then(()=>l):l}}),Ub=A("$ZodObjectJIT",(e,t)=>{$b.init(e,t);const r=e._zod.parse,n=Ga(()=>Yc(t)),a=x=>{const f=new lb(["shape","payload","ctx"]),g=n.value,b=k=>{const N=yo(k);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};f.write("const input = payload.value;");const v=Object.create(null);let p=0;for(const k of g.keys)v[k]=`key_${p++}`;f.write("const newResult = {};");for(const k of g.keys){const N=v[k],T=yo(k);f.write(`const ${N} = ${b(k)};`),f.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${T}, ...iss.path] : [${T}]
          })));
        }
        
        
        if (${N}.value === undefined) {
          if (${T} in input) {
            newResult[${T}] = undefined;
          }
        } else {
          newResult[${T}] = ${N}.value;
        }
        
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const w=f.compile();return(k,N)=>w(x,k,N)};let i;const o=nn,l=!Mc.jitless,d=l&&e0.value,h=t.catchall;let u;e._zod.parse=(x,f)=>{u??(u=n.value);const g=x.value;return o(g)?l&&d&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=a(t.shape)),x=i(x,f),h?Kc([],g,x,f,u,e):x):r(x,f):(x.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),x)}});function No(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const a=e.filter(i=>!Ms(i));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>Ns(o,n,js())))}),t)}const Bb=A("$ZodUnion",(e,t)=>{Te.init(e,t),we(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),we(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),we(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),we(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>Wa(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(r)return n(a,i);let o=!1;const l=[];for(const c of t.options){const d=c._zod.run({value:a.value,issues:[]},i);if(d instanceof Promise)l.push(d),o=!0;else{if(d.issues.length===0)return d;l.push(d)}}return o?Promise.all(l).then(c=>No(c,a,e,i)):No(l,a,e,i)}}),Gb=A("$ZodIntersection",(e,t)=>{Te.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,d])=>_o(r,c,d)):_o(r,i,o)}});function ga(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ur(e)&&ur(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=ga(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=ga(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function _o(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Ms(e))return e;const n=ga(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Hb=A("$ZodEnum",(e,t)=>{Te.init(e,t);const r=Jg(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(a=>t0.has(typeof a)).map(a=>typeof a=="string"?xn(a):a.toString()).join("|")})$`),e._zod.parse=(a,i)=>{const o=a.value;return n.has(o)||a.issues.push({code:"invalid_value",values:r,input:o,inst:e}),a}}),Wb=A("$ZodTransform",(e,t)=>{Te.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Lc(e.constructor.name);const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new Ps;return r.value=a,r}});function ko(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Vb=A("$ZodOptional",(e,t)=>{Te.init(e,t),e._zod.optin="optional",e._zod.optout="optional",we(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),we(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Wa(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>ko(i,r.value)):ko(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Zb=A("$ZodNullable",(e,t)=>{Te.init(e,t),we(e._zod,"optin",()=>t.innerType._zod.optin),we(e._zod,"optout",()=>t.innerType._zod.optout),we(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Wa(r.source)}|null)$`):void 0}),we(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Yb=A("$ZodDefault",(e,t)=>{Te.init(e,t),e._zod.optin="optional",we(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>So(i,t)):So(a,t)}});function So(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Kb=A("$ZodPrefault",(e,t)=>{Te.init(e,t),e._zod.optin="optional",we(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Qb=A("$ZodNonOptional",(e,t)=>{Te.init(e,t),we(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Eo(i,e)):Eo(a,e)}});function Eo(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const qb=A("$ZodCatch",(e,t)=>{Te.init(e,t),we(e._zod,"optin",()=>t.innerType._zod.optin),we(e._zod,"optout",()=>t.innerType._zod.optout),we(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>Ns(o,n,js()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>Ns(i,n,js()))},input:r.value}),r.issues=[]),r)}}),Jb=A("$ZodPipe",(e,t)=>{Te.init(e,t),we(e._zod,"values",()=>t.in._zod.values),we(e._zod,"optin",()=>t.in._zod.optin),we(e._zod,"optout",()=>t.out._zod.optout),we(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>$r(o,t.in,n)):$r(i,t.in,n)}const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(i=>$r(i,t.out,n)):$r(a,t.out,n)}});function $r(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Xb=A("$ZodReadonly",(e,t)=>{Te.init(e,t),we(e._zod,"propValues",()=>t.innerType._zod.propValues),we(e._zod,"values",()=>t.innerType._zod.values),we(e._zod,"optin",()=>t.innerType._zod.optin),we(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(To):To(a)}});function To(e){return e.value=Object.freeze(e.value),e}const ev=A("$ZodCustom",(e,t)=>{st.init(e,t),Te.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>Co(i,r,n,e));Co(a,r,n,e)}});function Co(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(mr(a))}}class tv{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const a={...n,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function sv(){return new tv}const Ur=sv();function rv(e,t){return new e({type:"string",...ne(t)})}function nv(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ne(t)})}function Io(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ne(t)})}function av(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ne(t)})}function iv(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ne(t)})}function ov(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ne(t)})}function lv(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ne(t)})}function cv(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ne(t)})}function dv(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ne(t)})}function uv(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ne(t)})}function mv(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ne(t)})}function hv(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ne(t)})}function fv(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ne(t)})}function pv(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ne(t)})}function xv(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ne(t)})}function gv(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ne(t)})}function bv(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ne(t)})}function vv(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ne(t)})}function yv(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ne(t)})}function wv(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ne(t)})}function jv(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ne(t)})}function Nv(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ne(t)})}function _v(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ne(t)})}function kv(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ne(t)})}function Sv(e,t){return new e({type:"string",format:"date",check:"string_format",...ne(t)})}function Ev(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ne(t)})}function Tv(e,t){return new e({type:"string",format:"duration",check:"string_format",...ne(t)})}function Cv(e,t){return new e({type:"number",checks:[],...ne(t)})}function Iv(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ne(t)})}function Av(e,t){return new e({type:"null",...ne(t)})}function Lv(e){return new e({type:"unknown"})}function Mv(e,t){return new e({type:"never",...ne(t)})}function Ao(e,t){return new Hc({check:"less_than",...ne(t),value:e,inclusive:!1})}function zn(e,t){return new Hc({check:"less_than",...ne(t),value:e,inclusive:!0})}function Lo(e,t){return new Wc({check:"greater_than",...ne(t),value:e,inclusive:!1})}function Dn(e,t){return new Wc({check:"greater_than",...ne(t),value:e,inclusive:!0})}function Mo(e,t){return new Q0({check:"multiple_of",...ne(t),value:e})}function Qc(e,t){return new J0({check:"max_length",...ne(t),maximum:e})}function on(e,t){return new X0({check:"min_length",...ne(t),minimum:e})}function qc(e,t){return new eb({check:"length_equals",...ne(t),length:e})}function Rv(e,t){return new tb({check:"string_format",format:"regex",...ne(t),pattern:e})}function Ov(e){return new sb({check:"string_format",format:"lowercase",...ne(e)})}function Pv(e){return new rb({check:"string_format",format:"uppercase",...ne(e)})}function zv(e,t){return new nb({check:"string_format",format:"includes",...ne(t),includes:e})}function Dv(e,t){return new ab({check:"string_format",format:"starts_with",...ne(t),prefix:e})}function Fv(e,t){return new ib({check:"string_format",format:"ends_with",...ne(t),suffix:e})}function Sr(e){return new ob({check:"overwrite",tx:e})}function $v(e){return Sr(t=>t.normalize(e))}function Uv(){return Sr(e=>e.trim())}function Bv(){return Sr(e=>e.toLowerCase())}function Gv(){return Sr(e=>e.toUpperCase())}function Hv(e,t,r){return new e({type:"array",element:t,...ne(r)})}function Wv(e,t,r){return new e({type:"custom",check:"custom",fn:t,...ne(r)})}function Vv(e){const t=Zv(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(mr(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(mr(a))}},e(r.value,r)));return t}function Zv(e,t){const r=new st({check:"custom",...ne(t)});return r._zod.check=e,r}const Yv=A("ZodISODateTime",(e,t)=>{wb.init(e,t),ke.init(e,t)});function Kv(e){return kv(Yv,e)}const Qv=A("ZodISODate",(e,t)=>{jb.init(e,t),ke.init(e,t)});function qv(e){return Sv(Qv,e)}const Jv=A("ZodISOTime",(e,t)=>{Nb.init(e,t),ke.init(e,t)});function Xv(e){return Ev(Jv,e)}const ey=A("ZodISODuration",(e,t)=>{_b.init(e,t),ke.init(e,t)});function ty(e){return Tv(ey,e)}const sy=(e,t)=>{Dc.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>m0(e,r)},flatten:{value:r=>u0(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,xa,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,xa,2)}},isEmpty:{get(){return e.issues.length===0}}})},ft=A("ZodError",sy,{Parent:Error}),ry=Za(ft),ny=Ya(ft),ay=gn(ft),iy=bn(ft),oy=p0(ft),ly=x0(ft),cy=g0(ft),dy=b0(ft),uy=v0(ft),my=y0(ft),hy=w0(ft),fy=j0(ft),Ce=A("ZodType",(e,t)=>(Te.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Ss(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),e.clone=(r,n)=>ss(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>ry(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>ay(e,r,n),e.parseAsync=async(r,n)=>ny(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>iy(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>oy(e,r,n),e.decode=(r,n)=>ly(e,r,n),e.encodeAsync=async(r,n)=>cy(e,r,n),e.decodeAsync=async(r,n)=>dy(e,r,n),e.safeEncode=(r,n)=>uy(e,r,n),e.safeDecode=(r,n)=>my(e,r,n),e.safeEncodeAsync=async(r,n)=>hy(e,r,n),e.safeDecodeAsync=async(r,n)=>fy(e,r,n),e.refine=(r,n)=>e.check(n1(r,n)),e.superRefine=r=>e.check(a1(r)),e.overwrite=r=>e.check(Sr(r)),e.optional=()=>zo(e),e.nullable=()=>Do(e),e.nullish=()=>zo(Do(e)),e.nonoptional=r=>qy(e,r),e.array=()=>nr(e),e.or=r=>ed([e,r]),e.and=r=>Gy(e,r),e.transform=r=>Fo(e,Wy(r)),e.default=r=>Yy(e,r),e.prefault=r=>Qy(e,r),e.catch=r=>Xy(e,r),e.pipe=r=>Fo(e,r),e.readonly=()=>s1(e),e.describe=r=>{const n=e.clone();return Ur.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Ur.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Ur.get(e);const n=e.clone();return Ur.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Jc=A("_ZodString",(e,t)=>{Ka.init(e,t),Ce.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Rv(...n)),e.includes=(...n)=>e.check(zv(...n)),e.startsWith=(...n)=>e.check(Dv(...n)),e.endsWith=(...n)=>e.check(Fv(...n)),e.min=(...n)=>e.check(on(...n)),e.max=(...n)=>e.check(Qc(...n)),e.length=(...n)=>e.check(qc(...n)),e.nonempty=(...n)=>e.check(on(1,...n)),e.lowercase=n=>e.check(Ov(n)),e.uppercase=n=>e.check(Pv(n)),e.trim=()=>e.check(Uv()),e.normalize=(...n)=>e.check($v(...n)),e.toLowerCase=()=>e.check(Bv()),e.toUpperCase=()=>e.check(Gv())}),py=A("ZodString",(e,t)=>{Ka.init(e,t),Jc.init(e,t),e.email=r=>e.check(nv(xy,r)),e.url=r=>e.check(cv(gy,r)),e.jwt=r=>e.check(_v(Ly,r)),e.emoji=r=>e.check(dv(by,r)),e.guid=r=>e.check(Io(Ro,r)),e.uuid=r=>e.check(av(Br,r)),e.uuidv4=r=>e.check(iv(Br,r)),e.uuidv6=r=>e.check(ov(Br,r)),e.uuidv7=r=>e.check(lv(Br,r)),e.nanoid=r=>e.check(uv(vy,r)),e.guid=r=>e.check(Io(Ro,r)),e.cuid=r=>e.check(mv(yy,r)),e.cuid2=r=>e.check(hv(wy,r)),e.ulid=r=>e.check(fv(jy,r)),e.base64=r=>e.check(wv(Cy,r)),e.base64url=r=>e.check(jv(Iy,r)),e.xid=r=>e.check(pv(Ny,r)),e.ksuid=r=>e.check(xv(_y,r)),e.ipv4=r=>e.check(gv(ky,r)),e.ipv6=r=>e.check(bv(Sy,r)),e.cidrv4=r=>e.check(vv(Ey,r)),e.cidrv6=r=>e.check(yv(Ty,r)),e.e164=r=>e.check(Nv(Ay,r)),e.datetime=r=>e.check(Kv(r)),e.date=r=>e.check(qv(r)),e.time=r=>e.check(Xv(r)),e.duration=r=>e.check(ty(r))});function Ge(e){return rv(py,e)}const ke=A("ZodStringFormat",(e,t)=>{Ne.init(e,t),Jc.init(e,t)}),xy=A("ZodEmail",(e,t)=>{mb.init(e,t),ke.init(e,t)}),Ro=A("ZodGUID",(e,t)=>{db.init(e,t),ke.init(e,t)}),Br=A("ZodUUID",(e,t)=>{ub.init(e,t),ke.init(e,t)}),gy=A("ZodURL",(e,t)=>{hb.init(e,t),ke.init(e,t)}),by=A("ZodEmoji",(e,t)=>{fb.init(e,t),ke.init(e,t)}),vy=A("ZodNanoID",(e,t)=>{pb.init(e,t),ke.init(e,t)}),yy=A("ZodCUID",(e,t)=>{xb.init(e,t),ke.init(e,t)}),wy=A("ZodCUID2",(e,t)=>{gb.init(e,t),ke.init(e,t)}),jy=A("ZodULID",(e,t)=>{bb.init(e,t),ke.init(e,t)}),Ny=A("ZodXID",(e,t)=>{vb.init(e,t),ke.init(e,t)}),_y=A("ZodKSUID",(e,t)=>{yb.init(e,t),ke.init(e,t)}),ky=A("ZodIPv4",(e,t)=>{kb.init(e,t),ke.init(e,t)}),Sy=A("ZodIPv6",(e,t)=>{Sb.init(e,t),ke.init(e,t)}),Ey=A("ZodCIDRv4",(e,t)=>{Eb.init(e,t),ke.init(e,t)}),Ty=A("ZodCIDRv6",(e,t)=>{Tb.init(e,t),ke.init(e,t)}),Cy=A("ZodBase64",(e,t)=>{Cb.init(e,t),ke.init(e,t)}),Iy=A("ZodBase64URL",(e,t)=>{Ab.init(e,t),ke.init(e,t)}),Ay=A("ZodE164",(e,t)=>{Lb.init(e,t),ke.init(e,t)}),Ly=A("ZodJWT",(e,t)=>{Rb.init(e,t),ke.init(e,t)}),Xc=A("ZodNumber",(e,t)=>{Zc.init(e,t),Ce.init(e,t),e.gt=(n,a)=>e.check(Lo(n,a)),e.gte=(n,a)=>e.check(Dn(n,a)),e.min=(n,a)=>e.check(Dn(n,a)),e.lt=(n,a)=>e.check(Ao(n,a)),e.lte=(n,a)=>e.check(zn(n,a)),e.max=(n,a)=>e.check(zn(n,a)),e.int=n=>e.check(Oo(n)),e.safe=n=>e.check(Oo(n)),e.positive=n=>e.check(Lo(0,n)),e.nonnegative=n=>e.check(Dn(0,n)),e.negative=n=>e.check(Ao(0,n)),e.nonpositive=n=>e.check(zn(0,n)),e.multipleOf=(n,a)=>e.check(Mo(n,a)),e.step=(n,a)=>e.check(Mo(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Pe(e){return Cv(Xc,e)}const My=A("ZodNumberFormat",(e,t)=>{Ob.init(e,t),Xc.init(e,t)});function Oo(e){return Iv(My,e)}const Ry=A("ZodNull",(e,t)=>{Pb.init(e,t),Ce.init(e,t)});function Oy(e){return Av(Ry,e)}const Py=A("ZodUnknown",(e,t)=>{zb.init(e,t),Ce.init(e,t)});function Po(){return Lv(Py)}const zy=A("ZodNever",(e,t)=>{Db.init(e,t),Ce.init(e,t)});function Dy(e){return Mv(zy,e)}const Fy=A("ZodArray",(e,t)=>{Fb.init(e,t),Ce.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(on(r,n)),e.nonempty=r=>e.check(on(1,r)),e.max=(r,n)=>e.check(Qc(r,n)),e.length=(r,n)=>e.check(qc(r,n)),e.unwrap=()=>e.element});function nr(e,t){return Hv(Fy,e,t)}const $y=A("ZodObject",(e,t)=>{Ub.init(e,t),Ce.init(e,t),we(e,"shape",()=>t.shape),e.keyof=()=>Qa(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Po()}),e.loose=()=>e.clone({...e._zod.def,catchall:Po()}),e.strict=()=>e.clone({...e._zod.def,catchall:Dy()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>i0(e,r),e.safeExtend=r=>o0(e,r),e.merge=r=>l0(e,r),e.pick=r=>n0(e,r),e.omit=r=>a0(e,r),e.partial=(...r)=>c0(td,e,r[0]),e.required=(...r)=>d0(sd,e,r[0])});function qs(e,t){const r={type:"object",shape:e??{},...ne(t)};return new $y(r)}const Uy=A("ZodUnion",(e,t)=>{Bb.init(e,t),Ce.init(e,t),e.options=t.options});function ed(e,t){return new Uy({type:"union",options:e,...ne(t)})}const By=A("ZodIntersection",(e,t)=>{Gb.init(e,t),Ce.init(e,t)});function Gy(e,t){return new By({type:"intersection",left:e,right:t})}const ba=A("ZodEnum",(e,t)=>{Hb.init(e,t),Ce.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new ba({...t,checks:[],...ne(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new ba({...t,checks:[],...ne(a),entries:i})}});function Qa(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new ba({type:"enum",entries:r,...ne(t)})}const Hy=A("ZodTransform",(e,t)=>{Wb.init(e,t),Ce.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Lc(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(mr(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(mr(o))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function Wy(e){return new Hy({type:"transform",transform:e})}const td=A("ZodOptional",(e,t)=>{Vb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zo(e){return new td({type:"optional",innerType:e})}const Vy=A("ZodNullable",(e,t)=>{Zb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Do(e){return new Vy({type:"nullable",innerType:e})}const Zy=A("ZodDefault",(e,t)=>{Yb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Yy(e,t){return new Zy({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Oc(t)}})}const Ky=A("ZodPrefault",(e,t)=>{Kb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Qy(e,t){return new Ky({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Oc(t)}})}const sd=A("ZodNonOptional",(e,t)=>{Qb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType});function qy(e,t){return new sd({type:"nonoptional",innerType:e,...ne(t)})}const Jy=A("ZodCatch",(e,t)=>{qb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Xy(e,t){return new Jy({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const e1=A("ZodPipe",(e,t)=>{Jb.init(e,t),Ce.init(e,t),e.in=t.in,e.out=t.out});function Fo(e,t){return new e1({type:"pipe",in:e,out:t})}const t1=A("ZodReadonly",(e,t)=>{Xb.init(e,t),Ce.init(e,t),e.unwrap=()=>e._zod.def.innerType});function s1(e){return new t1({type:"readonly",innerType:e})}const r1=A("ZodCustom",(e,t)=>{ev.init(e,t),Ce.init(e,t)});function n1(e,t={}){return Wv(r1,e,t)}function a1(e){return Vv(e)}const i1=Qa(["S","A","B","C","F"]),o1=Qa(["new","purchased"]),l1=qs({id:Ge(),name:Ge(),grade:i1,intent:Pe(),prop:Ge(),visit:Pe(),price:Pe(),status:o1,purchased_at:ed([Ge(),Pe(),Oy()]).optional(),purchased_by:Ge().nullable().optional(),transaction_hash:Ge().nullable().optional(),ai:Ge(),remaining_hours:Pe().nullable().optional(),x:Pe().optional(),y:Pe().optional(),created_at:Ge().optional()}).passthrough(),rd=l1.extend({remainingHours:Pe().optional()}),nd=qs({title:Ge(),tags:nr(Ge()).optional().nullable(),view_count:Pe().optional(),click_count:Pe().optional(),fav_count:Pe().optional(),thumb_color:Ge().optional(),view:Pe().optional(),click:Pe().optional(),fav:Pe().optional(),thumbColor:Ge().optional()}).passthrough(),ad=qs({title:Ge(),meta:Ge(),body:Ge(),created_at:Ge().optional()}).passthrough(),id=qs({points:Pe(),quota:qs({s:Pe(),a:Pe()})});qs({user:id,leads:nr(rd),listings:nr(nd),feed:nr(ad)});const $o={TABLET:1024},qa={S:120,A:72,B:336,C:336,F:336},c1=(e,t)=>{if(!e)return 0;const r=qa[t]||336,n=new Date(e).getTime(),a=(Date.now()-n)/(1e3*60*60);return Math.max(0,Math.min(r,r-a))},d1=(e,t,r,n)=>{const a={points:e.points,quota:{s:e.quota_s,a:e.quota_a}},i=id.safeParse(a);if(!i.success)throw console.error("Critical: User Data Validation Failed",i.error),new Error("Failed to load user profile");const o=t.map(d=>{let h=d.remaining_hours!=null?Number(d.remaining_hours):null;return h==null&&d.purchased_at&&d.status==="purchased"&&(h=c1(d.purchased_at,d.grade)),{...d,grade:d.grade,status:d.status,...h!=null?{remainingHours:h}:{}}}).filter(d=>{const h=rd.safeParse(d);return h.success?!0:(console.warn(`Skipping invalid lead (${d.id}):`,h.error.flatten()),!1)}),l=r.map(d=>({...d,title:d.title,tags:d.tags??[],view:d.view_count??0,click:d.click_count??0,fav:d.fav_count??0,thumbColor:d.thumb_color??"#e5e7eb"})).filter(d=>{const h=nd.safeParse(d);return h.success?!0:(console.warn("Skipping invalid listing:",h.error.flatten()),!1)}),c=n.filter(d=>{const h=ad.safeParse(d);return h.success?!0:(console.warn("Skipping invalid feed post:",h.error.flatten()),!1)});return{user:i.data,leads:o,listings:l,feed:c}};class ln{static async fetchAppData(t){const[r,n,a,i]=await Promise.all([ce.from("users").select("points, quota_s, quota_a").single(),ce.from("leads").select("*"),ce.from("listings").select("*").eq("agent_id",t),ce.from("feed").select("*").order("created_at",{ascending:!1}).limit(5)]);if(r.error)throw r.error;if(n.error)throw n.error;if(a.error)throw a.error;if(i.error)throw i.error;return d1(r.data,n.data,a.data,i.data)}static async fetchPropertyViewStats(t){try{const{data:r,error:n}=await ce.rpc("get_agent_property_stats",{p_agent_id:t});return n?(console.warn("PropertyViewStats RPC error, using fallback:",n),await ln.fetchPropertyViewStatsFallback(t)):r||[]}catch(r){return console.error("fetchPropertyViewStats error:",r),[]}}static async fetchPropertyViewStatsFallback(t){const{data:r,error:n}=await ce.from("properties").select("public_id").eq("agent_id",t);if(n||!(r!=null&&r.length))return[];const a=r.map(d=>d.public_id),{data:i,error:o}=await ce.from("uag_events").select("property_id, session_id, duration, actions").in("property_id",a);if(o||!i)return[];const l=new Map;for(const d of i){const h=d.property_id;l.has(h)||l.set(h,{property_id:h,view_count:0,unique_sessions:0,total_duration:0,line_clicks:0,call_clicks:0});const u=l.get(h);u.view_count++,u.total_duration+=d.duration||0;const x=d.actions;x!=null&&x.click_line&&u.line_clicks++,x!=null&&x.click_call&&u.call_clicks++}const c=new Map;for(const d of i)c.has(d.property_id)||c.set(d.property_id,new Set),c.get(d.property_id).add(d.session_id);for(const[d,h]of c){const u=l.get(d);u&&(u.unique_sessions=h.size)}return Array.from(l.values())}static async purchaseLead(t,r,n,a){const{error:i}=await ce.rpc("purchase_lead",{p_user_id:t,p_lead_id:r,p_cost:n,p_grade:a});if(i)throw i}}const u1={user:{points:1280,quota:{s:2,a:3}},leads:[{id:"S-5566",name:" S-5566",grade:"S",intent:98,prop:"",visit:15,price:20,status:"purchased",purchased_at:Date.now()-2*36e5,ai:"S ",remainingHours:118},{id:"S-9011",name:" S-9011",grade:"S",intent:93,prop:"",visit:11,price:20,status:"purchased",purchased_at:Date.now()-6*36e5,ai:"",remainingHours:114},{id:"A-7788",name:" A-7788",grade:"A",intent:79,prop:"",visit:6,price:10,status:"purchased",purchased_at:Date.now()-20*36e5,ai:"A ",remainingHours:52},{id:"A-6600",name:" A-6600",grade:"A",intent:74,prop:"",visit:5,price:10,status:"purchased",purchased_at:Date.now()-10*36e5,ai:"",remainingHours:62},{id:"B218",name:" B218",grade:"S",intent:92,prop:" 3 ",visit:7,price:20,status:"new",ai:" ",x:25,y:25},{id:"A103",name:" A103",grade:"S",intent:88,prop:" 12F",visit:12,price:20,status:"new",ai:"",x:15,y:45},{id:"S901",name:" S901",grade:"S",intent:94,prop:"",visit:9,price:20,status:"new",ai:"",x:40,y:32},{id:"S880",name:" S880",grade:"S",intent:90,prop:"",visit:8,price:20,status:"new",ai:"",x:60,y:40},{id:"C055",name:" C055",grade:"A",intent:75,prop:"",visit:4,price:10,status:"new",ai:"A ",x:60,y:20},{id:"A230",name:" A230",grade:"A",intent:71,prop:" 3 ",visit:3,price:10,status:"new",ai:"",x:70,y:30},{id:"A550",name:" A550",grade:"A",intent:69,prop:"",visit:3,price:10,status:"new",ai:"",x:50,y:15},{id:"D330",name:" D330",grade:"B",intent:62,prop:"",visit:3,price:3,status:"new",ai:"",x:40,y:60},{id:"B778",name:" B778",grade:"B",intent:58,prop:"",visit:2,price:3,status:"new",ai:"",x:30,y:70},{id:"C021",name:" C021",grade:"C",intent:48,prop:"",visit:2,price:1,status:"new",ai:"",x:75,y:55},{id:"C990",name:" C990",grade:"C",intent:42,prop:"",visit:1,price:1,status:"new",ai:"",x:82,y:65},{id:"H009",name:" H009",grade:"F",intent:28,prop:"",visit:1,price:.5,status:"new",ai:"",x:70,y:75},{id:"F778",name:" F778",grade:"F",intent:22,prop:"",visit:1,price:.5,status:"new",ai:"",x:55,y:80}],listings:[{title:"12/15F ",tags:["","",""],view:1284,click:214,fav:37,thumbColor:"#eef2ff"},{title:" 3 ",tags:["",""],view:986,click:163,fav:22,thumbColor:"#f0fdf4"},{title:"3",tags:["",""],view:846,click:128,fav:15,thumbColor:"#fff7ed"}],feed:[{title:"12F ",meta:"",body:""},{title:"",meta:" 41",body:" 9 "}]},Uo=(e,t)=>e.grade==="S"&&t.quota.s<=0?{valid:!1,error:"S "}:e.grade==="A"&&t.quota.a<=0?{valid:!1,error:"A "}:{valid:!0};function m1(){if(typeof window>"u")return!0;const t=new URLSearchParams(window.location.search).get("mode");if(t==="mock"||t==="live")return localStorage.setItem("uag_mode",t),t==="mock";const r=localStorage.getItem("uag_mode");return r==="mock"||r==="live"?r==="mock":!0}function h1(){var u,x;const{session:e}=Et(),[t,r]=m.useState(m1),n=pn(),a=()=>{{Z.error("");return}},{data:i,isLoading:o,error:l,refetch:c}=Sl({queryKey:["uagData",t,(u=e==null?void 0:e.user)==null?void 0:u.id],queryFn:async()=>{var f;if(t)return u1;if(!((f=e==null?void 0:e.user)!=null&&f.id))throw new Error("Not authenticated");return ln.fetchAppData(e.user.id)},enabled:t||!!((x=e==null?void 0:e.user)!=null&&x.id),staleTime:1e3*10,refetchInterval:t?!1:3e4}),d=rr({mutationFn:async({leadId:f,cost:g,grade:b})=>{var v;if(t){await new Promise(p=>setTimeout(p,500));return}if(!((v=e==null?void 0:e.user)!=null&&v.id))throw new Error("Not authenticated");await ln.purchaseLead(e.user.id,f,g,b)},onMutate:async({leadId:f,cost:g,grade:b})=>{var p,w;await n.cancelQueries({queryKey:["uagData"]});const v=n.getQueryData(["uagData",t,(p=e==null?void 0:e.user)==null?void 0:p.id]);if(v){const k=v.leads.find(T=>T.id===f);if(k){const{valid:T,error:S}=Uo(k,v.user);if(!T)throw Z.error(S||""),new Error(S||" (Optimistic Check)")}const N={...v,user:{...v.user,points:v.user.points-g,quota:{...v.user.quota,s:b==="S"?v.user.quota.s-1:v.user.quota.s,a:b==="A"?v.user.quota.a-1:v.user.quota.a}},leads:v.leads.map(T=>T.id===f?{...T,status:"purchased",remainingHours:qa[b]||48}:T)};n.setQueryData(["uagData",t,(w=e==null?void 0:e.user)==null?void 0:w.id],N)}return{previousData:v}},onError:(f,g,b)=>{var v;b!=null&&b.previousData&&n.setQueryData(["uagData",t,(v=e==null?void 0:e.user)==null?void 0:v.id],b.previousData),Z.error(`: ${f instanceof Error?f.message:"Unknown error"}`)},onSettled:()=>{n.invalidateQueries({queryKey:["uagData"]})}});return{data:i,isLoading:o,error:l,buyLead:async f=>{if(!i||d.isPending)return;const g=i.leads.find(w=>w.id===f);if(!g){Z.error("");return}if(g.status!=="new"){Z.error("");return}const{valid:b,error:v}=Uo(g,i.user);if(!b){Z.error(v||"");return}const p=g.price||10;if(i.user.points<p){Z.error("");return}d.mutate({leadId:f,cost:p,grade:g.grade},{onSuccess:()=>{Z.success("")}})},isBuying:d.isPending,useMock:t,toggleMode:a,refetch:c}}function f1(e,t){let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e(...n),t)}}function p1(){const[e,t]=m.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return m.useEffect(()=>{if(typeof window>"u")return;const r=f1(()=>{t({width:window.innerWidth,height:window.innerHeight})},150);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function x1(){const[e,t]=m.useState(null),{width:r}=p1(),n=r<=$o.TABLET,a=m.useMemo(()=>!e||e.selectedOnMobile&&!n?null:e.lead,[e,n]),i=m.useCallback(l=>{const c=window.innerWidth<=$o.TABLET;t({lead:l,selectedOnMobile:c}),requestAnimationFrame(()=>{var d;c&&((d=document.getElementById("action-panel-container"))==null||d.scrollIntoView({behavior:"smooth",block:"center"}))})},[]),o=m.useCallback(()=>t(null),[]);return{selectedLead:a,selectLead:i,close:o}}const g1=()=>s.jsx("header",{className:z["uag-header"],children:s.jsxs("div",{className:z["uag-header-inner"],children:[s.jsxs("div",{className:z["uag-logo"],children:[s.jsx("div",{className:z["uag-logo-badge"],children:""}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:z["uag-breadcrumb"],children:[s.jsx("span",{children:" 21"}),s.jsx("span",{className:`${z["uag-badge"]} ${z["uag-badge--pro"]}`,children:" PRO"})]})]})}),b1=({user:e,useMock:t,toggleMode:r})=>s.jsxs("div",{className:z["uag-footer-bar"],children:[s.jsxs("div",{style:{marginRight:"auto",fontSize:"12px",color:"var(--ink-300)"},children:["",s.jsx("strong",{style:{color:t?"#f59e0b":"#16a34a"},children:t?"Local Mock":"Live API"}),s.jsx("button",{onClick:r,style:{marginLeft:"10px",fontSize:"10px",cursor:"pointer",border:"1px solid #ccc",padding:"2px 6px",borderRadius:"4px"},children:""})]}),s.jsx("button",{className:z["uag-btn"],children:""}),s.jsx("button",{className:`${z["uag-btn"]} ${z.primary}`,children:""}),s.jsxs("span",{className:z["uag-badge"],style:{fontSize:"14px",background:"#fff8dc",color:"#92400e",borderColor:"#fcd34d"},children:[" ",s.jsx("span",{id:"user-points",children:e.points})]})]}),v1=()=>s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"flex animate-pulse justify-center space-x-4",children:s.jsxs("div",{className:"max-w-md flex-1 space-y-4 py-1",children:[s.jsx("div",{className:"mx-auto h-4 w-3/4 rounded bg-gray-200"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 rounded bg-gray-200"}),s.jsx("div",{className:"mx-auto h-4 w-5/6 rounded bg-gray-200"})]})]})}),s.jsx("div",{className:"mt-4 text-gray-500",children:"..."})]}),y1=({error:e,resetErrorBoundary:t})=>s.jsxs("div",{role:"alert",className:"p-6 text-center text-red-600",children:[s.jsx("p",{className:"mb-2 text-lg font-bold",children:""}),s.jsx("pre",{className:"mx-auto mb-4 max-w-lg overflow-auto rounded bg-red-50 p-4 text-sm",children:e.message}),s.jsx("button",{onClick:t,className:"rounded bg-red-600 px-4 py-2 text-white transition-colors hover:bg-red-700",children:""})]});function w1(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return Math.abs(Math.sin(t)*1e4%1)}function j1({leads:e,onSelectLead:t}){const r=e.filter(a=>a.status==="new"),n=m.useMemo(()=>{const a={};for(const i of r){const o=w1(i.id)*3;a[i.id]=5+o+"s"}return a},[r]);return s.jsxs("section",{className:`${z["uag-card"]} ${z["k-span-6"]}`,id:"radar-section",style:{minHeight:"450px"},children:[s.jsxs("div",{className:z["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:z["uag-card-title"],children:"UAG "}),s.jsx("div",{className:z["uag-card-sub"],children:"S/A B/C/F "})]}),s.jsx("div",{className:z["uag-actions"],style:{gap:"4px"}})]}),s.jsxs("div",{className:z["uag-cluster"],id:"radar-container",children:[s.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"300px",height:"300px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),s.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"150px",height:"150px",border:"1px dashed #cbd5e1",borderRadius:"50%",pointerEvents:"none"}}),s.jsxs("div",{style:{position:"absolute",left:"16px",top:"16px",background:"rgba(255,255,255,0.9)",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",color:"#0f172a",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e2e8f0",zIndex:5},children:[s.jsx("span",{style:{width:"8px",height:"8px",background:"#22c55e",borderRadius:"50%",display:"inline-block",marginRight:"4px"}}),s.jsx("span",{style:{fontWeight:700},children:"Live "})]}),r.map(a=>{const i=a.x!=null?a.x:50,o=a.y!=null?a.y:50,l=a.grade==="S"?120:a.grade==="A"?100:a.grade==="B"?90:a.grade==="C"?80:60,c=n[a.id]??"6s";return s.jsxs("div",{className:z["uag-bubble"],"data-grade":a.grade,role:"button","aria-label":`${a.name||a.id} - ${a.grade}`,tabIndex:0,style:{"--w":l+"px","--float":c,left:i+"%",top:o+"%"},onClick:()=>t(a),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&t(a)},children:[s.jsx("div",{className:z["uag-bubble-grade"],style:{background:`var(--grade-${a.grade.toLowerCase()})`,color:"#fff"},children:a.grade}),s.jsxs("div",{style:{textAlign:"center",lineHeight:1.2},children:[s.jsx("div",{style:{fontWeight:800,fontSize:"14px"},children:a.id}),s.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:[a.intent,"%"]})]}),s.jsx("div",{className:z["uag-bubble-label"],children:a.prop})]},a.id)})]})]})}const Gr=({label:e,value:t,highlight:r=!1})=>s.jsxs("div",{className:z["ap-stat"],children:[s.jsx("span",{children:e}),s.jsx("b",{style:r?{color:"var(--uag-brand)"}:{},children:t})]}),N1=m.forwardRef(({selectedLead:e,onBuyLead:t,isProcessing:r},n)=>{const[a,i]=m.useState(!1),o=m.useRef(null),l=(e==null?void 0:e.id)??null;if(l!==o.current&&(o.current=l,a&&i(!1)),!e)return s.jsx("section",{className:z["k-span-6"],id:"action-panel-container",ref:n,children:s.jsx("div",{className:z["uag-action-panel"],id:"action-panel",children:s.jsx("div",{style:{height:"100%",minHeight:"200px",display:"grid",placeItems:"center",color:"var(--ink-300)",textAlign:"center",padding:"40px 20px"},children:s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:""}),s.jsxs("div",{children:["",s.jsx("br",{}),""]})]})})})});const c=e.grade==="S"||e.grade==="A",d=()=>{i(!0)},h=()=>{t(e.id),i(!1)},u=()=>{i(!1)};return s.jsx("section",{className:z["k-span-6"],id:"action-panel-container",ref:n,children:s.jsxs("div",{className:z["uag-action-panel"],id:"action-panel",children:[s.jsx("div",{className:z["ap-head"],children:s.jsxs("span",{className:`${z["uag-badge"]} ${z["uag-badge--"+e.grade.toLowerCase()]}`,children:[e.grade,"",e.name]})}),s.jsxs("div",{className:z["ap-body"],children:[s.jsxs("div",{className:z["ap-stats-group"],children:[s.jsx(Gr,{label:"",value:e.prop}),s.jsx(Gr,{label:"",value:`${e.intent}%`,highlight:!0}),s.jsx(Gr,{label:"",value:`${e.visit} `}),s.jsx(Gr,{label:"",value:`${e.price} `})]}),s.jsx("div",{className:`${z["ai-box"]} ${z.urgent}`,children:s.jsx("div",{children:e.ai})}),s.jsxs("div",{className:z["action-zone"],children:[c&&s.jsx("div",{style:{background:"#fff7ed",color:"#ea580c",fontWeight:700,fontSize:"12px",textAlign:"center",padding:"6px",borderRadius:"4px",border:"1px solid #ffedd5",marginBottom:"10px"},children:"  "}),a?s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("button",{className:z["btn-attack"],style:{background:"#ef4444",flex:1},onClick:h,disabled:r,children:r?"...":` ${e.price} ?`}),s.jsx("button",{className:z["btn-attack"],style:{background:"#94a3b8",flex:1},onClick:u,disabled:r,children:""})]}):s.jsx("button",{className:z["btn-attack"],onClick:d,disabled:r,children:r?"...":"  (/)"}),s.jsxs("div",{style:{textAlign:"center",fontSize:"11px",color:"#94a3b8",marginTop:"8px"},children:["/",s.jsx("br",{}),""]})]})]})]})})}),_1=e=>{const t=qa[e.grade]??336,r=e.remainingHours??t,n=Math.max(0,Math.min(100,r/t*100)),a=e.grade==="S"||e.grade==="A";let i="";return a?i=`${r.toFixed(1)} `:i=`${(r/24).toFixed(1)} `,{total:t,remaining:r,percent:n,isExclusive:a,timeDisplay:i}};function k1({leads:e}){const t=e.filter(r=>r.status==="purchased");return s.jsxs("section",{className:`${z["uag-card"]} ${z["k-span-6"]}`,children:[s.jsxs("div",{className:z["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:z["uag-card-title"],children:""}),s.jsx("div",{className:z["uag-card-sub"],children:"S  120hr / A  72hr B/C/F  14 "})]}),s.jsx("div",{className:z["uag-actions"],children:s.jsx("button",{className:z["uag-btn"],children:""})})]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{className:z["monitor-table"],children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"25%"},children:"/"}),s.jsx("th",{style:{width:"35%"},children:""}),s.jsx("th",{style:{width:"20%"},children:""}),s.jsx("th",{style:{width:"20%"},children:""})]})}),s.jsx("tbody",{id:"asset-list",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:""})}):t.map(r=>{const{percent:n,isExclusive:a,timeDisplay:i}=_1(r),o=`var(--grade-${r.grade.toLowerCase()})`,l=a?"":"";return s.jsxs("tr",{children:[s.jsx("td",{"data-label":"/",children:s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("span",{style:{display:"inline-grid",placeItems:"center",width:"24px",height:"24px",borderRadius:"50%",fontSize:"11px",fontWeight:900,color:"#fff",marginRight:"8px",background:o},children:r.grade}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:800,color:"var(--ink-100)"},children:r.name}),s.jsx("div",{style:{fontSize:"11px",color:"var(--ink-300)"},children:r.prop})]})]})}),s.jsxs("td",{"data-label":"",children:[s.jsxs("div",{style:{fontSize:"11px",fontWeight:700,marginBottom:"2px",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{color:o},children:l}),s.jsx("span",{className:z["t-countdown"],children:i})]}),s.jsx("div",{className:z["progress-bg"],children:s.jsx("div",{className:z["progress-fill"],style:{width:`${n}%`,background:o}})})]}),s.jsx("td",{"data-label":"",children:s.jsx("span",{className:z["uag-badge"],style:{background:"#f0fdf4",color:"#16a34a",border:"none"},children:""})}),s.jsx("td",{"data-label":"",children:s.jsx("button",{className:`${z["uag-btn"]} ${z.primary}`,style:{padding:"4px 12px",fontSize:"12px"},children:" / "})})]},r.id)})})]})})]})}function S1({listings:e,feed:t}){return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`${z["uag-card"]} ${z["k-span-3"]}`,children:[s.jsxs("div",{className:z["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:z["uag-card-title"],children:""}),s.jsx("div",{className:z["uag-card-sub"],children:""})]}),s.jsx("div",{className:z["uag-actions"],children:s.jsxs(it,{to:"/property/upload",className:z["uag-btn"],style:{display:"inline-flex",alignItems:"center",gap:"4px",textDecoration:"none"},children:[s.jsx(Kr,{size:14}),""]})})]}),s.jsx("div",{id:"listing-container",children:e.length===0?s.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:""}):e.map((r,n)=>{var a,i;return s.jsx("article",{className:z["listing-item"],children:n===0?s.jsxs(it,{to:"/property/MH-100001",style:{display:"contents",textDecoration:"none",color:"inherit"},children:[s.jsx("div",{className:z["l-thumb"],style:{background:r.thumbColor}}),s.jsxs("div",{children:[s.jsx("div",{className:z["l-title"],children:r.title}),s.jsx("div",{className:z["l-tags"],children:(a=r.tags)==null?void 0:a.map((o,l)=>s.jsx("span",{className:z["l-tag"],children:o},l))}),s.jsxs("div",{className:z["l-kpi"],children:[s.jsxs("span",{children:[" ",s.jsx("b",{children:r.view})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.click})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.fav})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:z["l-thumb"],style:{background:r.thumbColor}}),s.jsxs("div",{children:[s.jsx("div",{className:z["l-title"],children:r.title}),s.jsx("div",{className:z["l-tags"],children:(i=r.tags)==null?void 0:i.map((o,l)=>s.jsx("span",{className:z["l-tag"],children:o},l))}),s.jsxs("div",{className:z["l-kpi"],children:[s.jsxs("span",{children:[" ",s.jsx("b",{children:r.view})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.click})]}),s.jsxs("span",{children:[" ",s.jsx("b",{children:r.fav})]})]})]})]})},n)})})]}),s.jsxs("section",{className:`${z["uag-card"]} ${z["k-span-3"]}`,children:[s.jsxs("div",{className:z["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:z["uag-card-title"],children:""}),s.jsx("div",{className:z["uag-card-sub"],children:""})]}),s.jsx("div",{className:z["uag-actions"],children:s.jsx("button",{className:z["uag-btn"],children:""})})]}),s.jsx("div",{id:"feed-container",children:t.length===0?s.jsx("div",{style:{padding:"12px",fontSize:"13px",color:"#94a3b8"},children:""}):t.map((r,n)=>s.jsxs("article",{className:z["feed-post"],children:[s.jsx("div",{className:z["fp-title"],children:r.title}),s.jsx("div",{className:z["fp-meta"],children:r.meta}),s.jsx("div",{className:z["fp-body"],children:r.body})]},n))})]})]})}const E1="_reportContainer_1v0u0_7",T1="_reportStep_1v0u0_17",C1="_reportStepHeader_1v0u0_29",I1="_reportStepBadge_1v0u0_53",A1="_reportStepHint_1v0u0_71",L1="_reportBackBtn_1v0u0_83",M1="_reportImportSection_1v0u0_123",R1="_reportImportBtn_1v0u0_131",O1="_reportDivider_1v0u0_193",P1="_reportListings_1v0u0_227",z1="_reportListingItem_1v0u0_243",D1="_reportListingThumb_1v0u0_279",F1="_reportListingInfo_1v0u0_303",$1="_reportListingTitle_1v0u0_313",U1="_reportListingMeta_1v0u0_331",B1="_reportListingArrow_1v0u0_359",G1="_reportSelectedProperty_1v0u0_371",H1="_reportStyles_1v0u0_397",W1="_reportStyleItem_1v0u0_409",V1="_selected_1v0u0_443",Z1="_reportStyleIcon_1v0u0_453",Y1="_reportStyleInfo_1v0u0_461",K1="_reportStyleTitle_1v0u0_469",Q1="_reportStyleDesc_1v0u0_481",q1="_reportStyleCheck_1v0u0_493",J1="_reportHighlights_1v0u0_503",X1="_reportHighlightItem_1v0u0_519",ew="_reportHighlightIcon_1v0u0_563",tw="_reportHighlightInfo_1v0u0_571",sw="_reportHighlightTitle_1v0u0_579",rw="_reportHighlightDesc_1v0u0_591",nw="_reportHighlightCheck_1v0u0_603",aw="_reportHighlightUnchecked_1v0u0_611",iw="_reportStepFooter_1v0u0_635",ow="_reportNextBtn_1v0u0_655",lw="_reportPhoneFrame_1v0u0_697",cw="_reportPhoneNotch_1v0u0_719",dw="_reportPhoneContent_1v0u0_743",uw="_reportPreviewHero_1v0u0_761",mw="_reportPreviewHeroImg_1v0u0_779",hw="_reportPreviewHeroOverlay_1v0u0_787",fw="_reportPreviewPrice_1v0u0_807",pw="_reportPreviewTitle_1v0u0_817",xw="_reportPreviewSpecs_1v0u0_829",gw="_reportPreviewMortgage_1v0u0_863",bw="_reportPreviewMortgageLabel_1v0u0_875",vw="_reportPreviewMortgageValue_1v0u0_885",yw="_reportPreviewHighlights_1v0u0_897",ww="_reportPreviewHighlight_1v0u0_897",jw="_reportPreviewAgent_1v0u0_953",Nw="_reportPreviewAgentAvatar_1v0u0_971",_w="_reportPreviewAgentInfo_1v0u0_993",kw="_reportGenerateBtn_1v0u0_1023",Sw="_reportSuccess_1v0u0_1081",Ew="_reportSuccessIcon_1v0u0_1091",Tw="_reportUrlBox_1v0u0_1113",Cw="_reportUrlInput_1v0u0_1129",Iw="_reportUrlCopy_1v0u0_1149",Aw="_reportShareButtons_1v0u0_1183",Lw="_reportShareBtnPrimary_1v0u0_1197",Mw="_reportShareBtnLine_1v0u0_1199",Rw="_reportPreviewLink_1v0u0_1267",Ow="_reportResetBtn_1v0u0_1311",V={reportContainer:E1,reportStep:T1,reportStepHeader:C1,reportStepBadge:I1,reportStepHint:A1,reportBackBtn:L1,reportImportSection:M1,reportImportBtn:R1,reportDivider:O1,reportListings:P1,reportListingItem:z1,reportListingThumb:D1,reportListingInfo:F1,reportListingTitle:$1,reportListingMeta:U1,reportListingArrow:B1,reportSelectedProperty:G1,reportStyles:H1,reportStyleItem:W1,selected:V1,reportStyleIcon:Z1,reportStyleInfo:Y1,reportStyleTitle:K1,reportStyleDesc:Q1,reportStyleCheck:q1,reportHighlights:J1,reportHighlightItem:X1,reportHighlightIcon:ew,reportHighlightInfo:tw,reportHighlightTitle:sw,reportHighlightDesc:rw,reportHighlightCheck:nw,reportHighlightUnchecked:aw,reportStepFooter:iw,reportNextBtn:ow,reportPhoneFrame:lw,reportPhoneNotch:cw,reportPhoneContent:dw,reportPreviewHero:uw,reportPreviewHeroImg:mw,reportPreviewHeroOverlay:hw,reportPreviewPrice:fw,reportPreviewTitle:pw,reportPreviewSpecs:xw,reportPreviewMortgage:gw,reportPreviewMortgageLabel:bw,reportPreviewMortgageValue:vw,reportPreviewHighlights:yw,reportPreviewHighlight:ww,reportPreviewAgent:jw,reportPreviewAgentAvatar:Nw,reportPreviewAgentInfo:_w,reportGenerateBtn:kw,reportSuccess:Sw,reportSuccessIcon:Ew,reportUrlBox:Tw,reportUrlInput:Cw,reportUrlCopy:Iw,reportShareButtons:Aw,reportShareBtnPrimary:Lw,reportShareBtnLine:Mw,reportPreviewLink:Rw,reportResetBtn:Ow},Pw={id:"demo-001",title:" 12F322",address:" 168 ",district:"",price:3288e4,pricePerPing:521e3,size:67.3,rooms:"322",floor:"12F/15F",age:5,direction:"",parking:"",managementFee:3500,community:"",communityYear:2019,communityUnits:280,images:[],highlights:[{id:"commute",icon:"",title:"",description:" 5 ",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"view",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:"7-11  3 ",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1}]},zw=[Pw,{id:"demo-002",title:"423",address:" 256 ",district:"",price:88e6,pricePerPing:112e4,size:78.5,rooms:"423",floor:"18F/22F",age:3,direction:"",parking:"",managementFee:6800,community:"",communityYear:2021,communityUnits:156,images:[],highlights:[{id:"commute",icon:"",title:"",description:" 3 ",selected:!0},{id:"view",icon:"",title:"",description:" 101",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:" 5 ",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1}]},{id:"demo-003",title:"211",address:" 88 ",district:"",price:245e5,pricePerPing:68e4,size:36,rooms:"211",floor:"5F/12F",age:15,direction:"",parking:"",managementFee:2200,community:"",communityYear:2009,communityUnits:88,images:[],highlights:[{id:"amenity",icon:"",title:"",description:"SOGO",selected:!0},{id:"school",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"commute",icon:"",title:"",description:"",selected:!1},{id:"view",icon:"",title:"",description:"",selected:!1},{id:"renovated",icon:"",title:"",description:"",selected:!1},{id:"parking",icon:"",title:"",description:"",selected:!1}]}],Dw=[{id:"simple",icon:"",title:"",desc:""},{id:"investment",icon:"",title:"",desc:""},{id:"marketing",icon:"",title:"",desc:""}];function Fw({listings:e=[]}){const[t,r]=m.useState(1),[n,a]=m.useState(null),[i,o]=m.useState("simple"),[l,c]=m.useState([]),[d,h]=m.useState(""),[u,x]=m.useState(!1),f=m.useRef(null),g=I=>I>=1e8?`${(I/1e8).toFixed(2)} `:`${(I/1e4).toFixed(0)} `,b=(I,M=.2,$=30,R=.021)=>{const ee=I*(1-M),Q=R/12,F=$*12,re=ee*(Q*Math.pow(1+Q,F))/(Math.pow(1+Q,F)-1);return Math.round(re)},v=I=>{a(I),c(I.highlights),r(2)},p=I=>{o(I),r(3)},w=I=>{const M=l.filter($=>$.selected).length;c($=>$.map(R=>R.id===I?!R.selected&&M>=3?(Z.error(" 3 "),R):{...R,selected:!R.selected}:R))},k=()=>{if(l.filter(M=>M.selected).length<1){Z.error(" 1 ");return}r(4)},N=async()=>{if(!n)return;x(!0);const I=Z.loading("...");try{await new Promise(R=>setTimeout(R,1500));const M=`R-${Date.now().toString(36).toUpperCase()}`,$=`${window.location.origin}/r/${M}`;h($),r(5),Z.success("",void 0,{id:I})}catch{Z.error("",void 0,{id:I})}finally{x(!1)}},T=async()=>{try{await navigator.clipboard.writeText(d),Z.success(" LINE")}catch{Z.error("")}},S=()=>{const I=encodeURIComponent(`${n==null?void 0:n.title}

 

${d}`);window.open(`https://line.me/R/msg/text/?${I}`,"_blank")},C=()=>{r(1),a(null),o("simple"),c([]),h("")},_=()=>{var I;(I=f.current)==null||I.click()},B=async I=>{var R;if(!((R=I.target.files)==null?void 0:R[0]))return;const $=Z.loading("AI ...");try{await new Promise(Q=>setTimeout(Q,2e3));const ee={id:"detected-001",title:" 18F",address:"",district:"",price:188e6,pricePerPing:156e4,size:120.5,rooms:"434",floor:"18F/24F",age:10,direction:"",parking:"",managementFee:15e3,community:"",communityYear:2014,communityUnits:52,images:[],highlights:[{id:"view",icon:"",title:"",description:"",selected:!0},{id:"community",icon:"",title:"",description:"",selected:!0},{id:"renovated",icon:"",title:"",description:"",selected:!0},{id:"parking",icon:"",title:"",description:"",selected:!1},{id:"amenity",icon:"",title:"",description:"",selected:!1},{id:"commute",icon:"",title:"",description:" 8 ",selected:!1},{id:"school",icon:"",title:"",description:"",selected:!1}]};a(ee),c(ee.highlights),r(2),Z.success("AI ",void 0,{id:$})}catch{Z.error("",void 0,{id:$})}},j=()=>s.jsxs("div",{className:V.reportStep,children:[s.jsxs("div",{className:V.reportStepHeader,children:[s.jsx("span",{className:V.reportStepBadge,children:"1/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:V.reportImportSection,children:[s.jsx("input",{type:"file",ref:f,style:{display:"none"},accept:"image/*",onChange:B}),s.jsxs("button",{className:V.reportImportBtn,onClick:_,children:[s.jsx(cl,{size:20}),s.jsx("span",{children:""}),s.jsx("small",{children:"AI "})]})]}),s.jsx("div",{className:V.reportDivider,children:s.jsx("span",{children:""})}),s.jsx("div",{className:V.reportListings,children:zw.map(I=>s.jsxs("button",{className:V.reportListingItem,onClick:()=>v(I),children:[s.jsx("div",{className:V.reportListingThumb,children:s.jsx(He,{size:24})}),s.jsxs("div",{className:V.reportListingInfo,children:[s.jsx("div",{className:V.reportListingTitle,children:I.title}),s.jsxs("div",{className:V.reportListingMeta,children:[s.jsxs("span",{children:[s.jsx(yr,{size:12})," ",I.district]}),s.jsxs("span",{children:[s.jsx(mn,{size:12})," ",g(I.price)]})]})]}),s.jsx(St,{size:20,className:V.reportListingArrow})]},I.id))})]}),E=()=>s.jsxs("div",{className:V.reportStep,children:[s.jsxs("div",{className:V.reportStepHeader,children:[s.jsx("button",{className:V.reportBackBtn,onClick:()=>r(1),children:s.jsx(Hr,{size:20})}),s.jsx("span",{className:V.reportStepBadge,children:"2/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:V.reportSelectedProperty,children:[s.jsx(He,{size:18}),s.jsx("span",{children:n==null?void 0:n.title})]}),s.jsx("div",{className:V.reportStyles,children:Dw.map(I=>s.jsxs("button",{className:`${V.reportStyleItem} ${i===I.id?V.selected:""}`,onClick:()=>p(I.id),children:[s.jsx("span",{className:V.reportStyleIcon,children:I.icon}),s.jsxs("div",{className:V.reportStyleInfo,children:[s.jsx("div",{className:V.reportStyleTitle,children:I.title}),s.jsx("div",{className:V.reportStyleDesc,children:I.desc})]}),i===I.id&&s.jsx(mt,{size:20,className:V.reportStyleCheck})]},I.id))})]}),O=()=>s.jsxs("div",{className:V.reportStep,children:[s.jsxs("div",{className:V.reportStepHeader,children:[s.jsx("button",{className:V.reportBackBtn,onClick:()=>r(2),children:s.jsx(Hr,{size:20})}),s.jsx("span",{className:V.reportStepBadge,children:"3/4"}),s.jsx("h3",{children:" 3 "})]}),s.jsx("p",{className:V.reportStepHint,children:""}),s.jsx("div",{className:V.reportHighlights,children:l.map(I=>s.jsxs("button",{className:`${V.reportHighlightItem} ${I.selected?V.selected:""}`,onClick:()=>w(I.id),children:[s.jsx("span",{className:V.reportHighlightIcon,children:I.icon}),s.jsxs("div",{className:V.reportHighlightInfo,children:[s.jsx("div",{className:V.reportHighlightTitle,children:I.title}),s.jsx("div",{className:V.reportHighlightDesc,children:I.description})]}),s.jsx("div",{className:V.reportHighlightCheck,children:I.selected?s.jsx(mt,{size:20}):s.jsx("div",{className:V.reportHighlightUnchecked})})]},I.id))}),s.jsxs("div",{className:V.reportStepFooter,children:[s.jsxs("span",{children:[" ",l.filter(I=>I.selected).length,"/3"]}),s.jsxs("button",{className:V.reportNextBtn,onClick:k,children:[" ",s.jsx(St,{size:18})]})]})]}),L=()=>{if(!n)return null;const I=l.filter($=>$.selected),M=b(n.price);return s.jsxs("div",{className:V.reportStep,children:[s.jsxs("div",{className:V.reportStepHeader,children:[s.jsx("button",{className:V.reportBackBtn,onClick:()=>r(3),children:s.jsx(Hr,{size:20})}),s.jsx("span",{className:V.reportStepBadge,children:"4/4"}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:V.reportPhoneFrame,children:[s.jsx("div",{className:V.reportPhoneNotch}),s.jsxs("div",{className:V.reportPhoneContent,children:[s.jsxs("div",{className:V.reportPreviewHero,children:[s.jsx("div",{className:V.reportPreviewHeroImg,children:s.jsx(He,{size:48})}),s.jsxs("div",{className:V.reportPreviewHeroOverlay,children:[s.jsxs("div",{className:V.reportPreviewPrice,children:["NT$ ",g(n.price)]}),s.jsx("div",{className:V.reportPreviewTitle,children:n.title})]})]}),s.jsxs("div",{className:V.reportPreviewSpecs,children:[s.jsxs("div",{children:[s.jsx(Fd,{size:14})," ",n.size," "]}),s.jsxs("div",{children:[s.jsx($d,{size:14})," ",n.floor]}),s.jsxs("div",{children:[s.jsx(ts,{size:14})," ",n.age," "]}),s.jsxs("div",{children:[s.jsx(Ud,{size:14})," ",n.direction]})]}),s.jsxs("div",{className:V.reportPreviewMortgage,children:[s.jsx("div",{className:V.reportPreviewMortgageLabel,children:" 8 30 "}),s.jsxs("div",{className:V.reportPreviewMortgageValue,children:[" NT$ ",M.toLocaleString()]})]}),s.jsx("div",{className:V.reportPreviewHighlights,children:I.map($=>s.jsxs("div",{className:V.reportPreviewHighlight,children:[s.jsx("span",{children:$.icon}),s.jsxs("div",{children:[s.jsx("strong",{children:$.title}),s.jsx("p",{children:$.description})]})]},$.id))}),s.jsxs("div",{className:V.reportPreviewAgent,children:[s.jsx("div",{className:V.reportPreviewAgentAvatar,children:""}),s.jsxs("div",{className:V.reportPreviewAgentInfo,children:[s.jsx("strong",{children:""}),s.jsx("span",{children:"MaiHouses "})]})]})]})]}),s.jsx("button",{className:V.reportGenerateBtn,onClick:N,disabled:u,children:u?s.jsx(s.Fragment,{children:" ..."}):s.jsxs(s.Fragment,{children:[s.jsx(Na,{size:18})," "]})})]})},D=()=>s.jsxs("div",{className:V.reportStep,children:[s.jsxs("div",{className:V.reportStepHeader,children:[s.jsx("span",{className:V.reportStepBadge,children:""}),s.jsx("h3",{children:""})]}),s.jsxs("div",{className:V.reportSuccess,children:[s.jsx("div",{className:V.reportSuccessIcon,children:""}),s.jsx("p",{children:""})]}),s.jsxs("div",{className:V.reportUrlBox,children:[s.jsx("input",{type:"text",value:d,readOnly:!0,className:V.reportUrlInput}),s.jsx("button",{className:V.reportUrlCopy,onClick:T,children:s.jsx(Bn,{size:18})})]}),s.jsxs("div",{className:V.reportShareButtons,children:[s.jsxs("button",{className:V.reportShareBtnPrimary,onClick:T,children:[s.jsx(Bn,{size:18}),""]}),s.jsxs("button",{className:V.reportShareBtnLine,onClick:S,children:[s.jsx(Pt,{size:18}),"LINE "]})]}),s.jsxs("button",{className:V.reportPreviewLink,onClick:()=>window.open(d,"_blank"),children:[s.jsx(dn,{size:16}),""]}),s.jsx("button",{className:V.reportResetBtn,onClick:C,children:""})]});return s.jsxs("section",{className:`${z["uag-card"]} ${z["k-span-3"]}`,children:[s.jsxs("div",{className:z["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:z["uag-card-title"],children:" "}),s.jsx("div",{className:z["uag-card-sub"],children:" Word "})]}),t>1&&t<5&&s.jsxs("button",{className:`${z["uag-btn"]} ${z.secondary}`,onClick:C,children:[s.jsx(_s,{size:14})," "]})]}),s.jsxs("div",{className:V.reportContainer,children:[t===1&&j(),t===2&&E(),t===3&&O(),t===4&&L(),t===5&&D()]})]})}const Bo=[{id:"TR-2024-001",buyerId:"A103",buyerName:" A103",propertyTitle:" 12F",currentStep:3,status:"active",lastUpdate:Date.now()-30*6e4,offerPrice:315e5,events:[{id:"e1",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-2*864e5,hash:"9f2a...c8d1"},{id:"e2",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-1*864e5,hash:"b7aa...f3e2",detail:"GeoTag: "},{id:"e3",step:3,stepName:"M3 ",action:"",actor:"buyer",timestamp:Date.now()-30*6e4,hash:"1a7c...92b4",detail:" NT$31,500,000"}]},{id:"TR-2024-002",buyerId:"B218",buyerName:" B218",propertyTitle:" 3",currentStep:2,status:"active",lastUpdate:Date.now()-2*36e5,events:[{id:"e4",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-3*864e5,hash:"3c5d...a7b9"},{id:"e5",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-2*36e5,hash:"d8e2...1f4c",detail:" 11/30 14:00"}]},{id:"TR-2024-003",buyerId:"S901",buyerName:" S901",propertyTitle:"",currentStep:4,status:"active",lastUpdate:Date.now()-12*36e5,offerPrice:288e5,events:[{id:"e6",step:1,stepName:"M1 ",action:"",actor:"agent",timestamp:Date.now()-7*864e5,hash:"f1a2...b3c4"},{id:"e7",step:2,stepName:"M2 ",action:"",actor:"buyer",timestamp:Date.now()-5*864e5,hash:"e5d6...c7f8"},{id:"e8",step:3,stepName:"M3 ",action:"",actor:"buyer",timestamp:Date.now()-3*864e5,hash:"a9b0...d1e2"},{id:"e9",step:4,stepName:"M4 ",action:"",actor:"agent",timestamp:Date.now()-12*36e5,hash:"c3d4...e5f6",detail:""}]}],Go=[{key:1,name:"M1 ",icon:es},{key:2,name:"M2 ",icon:Yr},{key:3,name:"M3 ",icon:mn},{key:4,name:"M4 ",icon:hn},{key:5,name:"M5 ",icon:He}];function $w(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}function Uw(e){const t=Date.now()-e;return t<6e4?"":t<36e5?`${Math.floor(t/6e4)} `:t<864e5?`${Math.floor(t/36e5)} `:`${Math.floor(t/864e5)} `}function Bw(e){switch(e){case"active":return{text:"",bg:"#dcfce7",color:"#16a34a"};case"completed":return{text:"",bg:"#dbeafe",color:"#2563eb"};case"pending":return{text:"",bg:"#fef3c7",color:"#d97706"};case"expired":return{text:"",bg:"#fee2e2",color:"#dc2626"}}}function Gw(){const[e,t]=m.useState(!0),[r,n]=m.useState([]),[a,i]=m.useState(null),[o,l]=m.useState(!1),[c,d]=m.useState(!1),h=m.useCallback(async()=>{l(!0);try{if(e){await new Promise(g=>setTimeout(g,300)),n(Bo);const f=Bo[0];!a&&f&&i(f.id)}else{const f=await fetch("/api/trust/cases");if(f.ok){const b=(await f.json()).cases||[];n(b),b.length>0&&!a&&i(b[0].id)}}}catch(f){console.error("Failed to load cases:",f)}finally{l(!1)}},[e,a]);m.useEffect(()=>{h()},[h]);const u=r.find(f=>f.id===a),x=(u==null?void 0:u.events.slice(-3).reverse())||[];return s.jsxs("section",{className:`${z["uag-card"]} ${z["k-span-3"]}`,children:[s.jsxs("div",{className:z["uag-card-header"],children:[s.jsxs("div",{children:[s.jsx("div",{className:z["uag-card-title"],children:""}),s.jsxs("div",{className:z["uag-card-sub"],children:["",e&&s.jsx("span",{style:{marginLeft:8,color:"#f59e0b",fontSize:11},children:" Mock"})]})]}),s.jsxs("div",{className:z["uag-actions"],children:[s.jsxs("button",{className:z["uag-btn"],onClick:()=>t(!e),title:e?"":"",children:[s.jsx(Un,{size:14,style:{marginRight:4}}),e?"Mock":"Live"]}),s.jsx("button",{className:z["uag-btn"],onClick:h,disabled:o,children:s.jsx(ci,{size:14,className:o?"animate-spin":""})})]})]}),r.length>0&&s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:4},children:[r.map(f=>{const g=f.id===a,b=Bw(f.status);return s.jsxs("button",{onClick:()=>i(f.id),style:{padding:"8px 12px",borderRadius:8,border:g?"2px solid #1749d7":"1px solid #e2e8f0",background:g?"#eef2ff":"#fff",cursor:"pointer",textAlign:"left",minWidth:140,transition:"all 0.2s"},children:[s.jsx("div",{style:{fontSize:12,fontWeight:700,color:g?"#1749d7":"#334155",marginBottom:2},children:f.buyerName}),s.jsx("div",{style:{fontSize:11,color:"#64748b",marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:f.propertyTitle}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsxs("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:b.bg,color:b.color,fontWeight:600},children:["M",f.currentStep]}),s.jsx("span",{style:{fontSize:10,color:"#94a3b8"},children:Uw(f.lastUpdate)})]})]},f.id)}),s.jsx("button",{style:{padding:"8px 12px",borderRadius:8,border:"1px dashed #cbd5e1",background:"#f8fafc",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:60,color:"#64748b"},onClick:()=>{},children:s.jsx(Kr,{size:16})})]}),u&&s.jsx("div",{style:{display:"flex",alignItems:"center",gap:0,marginBottom:8},children:Go.map((f,g)=>{const b=f.key<u.currentStep,v=f.key===u.currentStep,p=f.icon;return s.jsxs(U.Fragment,{children:[s.jsxs("div",{style:{flex:1,textAlign:"center"},children:[s.jsx("div",{style:{width:32,height:32,borderRadius:"50%",margin:"0 auto 4px",display:"flex",alignItems:"center",justifyContent:"center",background:b?"#16a34a":v?"#1749d7":"#e5e7eb",color:b||v?"#fff":"#6b7280",transition:"all 0.3s"},children:b?s.jsx(ut,{size:16}):s.jsx(p,{size:14})}),s.jsx("div",{style:{fontSize:11,fontWeight:v?700:500,color:b?"#16a34a":v?"#1749d7":"#94a3b8"},children:f.name})]}),g<Go.length-1&&s.jsx("div",{style:{flex:.5,height:2,background:b?"#16a34a":"#e5e7eb",marginBottom:20}})]},f.key)})}),u&&s.jsxs("div",{style:{background:"#f8fafc",borderRadius:8,overflow:"hidden"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 80px",padding:"8px 12px",fontSize:11,fontWeight:600,color:"#64748b",background:"#f1f5f9",borderBottom:"1px solid #e2e8f0"},children:[s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""})]}),x.map((f,g)=>{const b=g===0;return s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 80px",padding:"10px 12px",borderBottom:g<x.length-1?"1px solid #e2e8f0":"none",background:b?"#fefce8":"transparent",alignItems:"start"},children:[s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:$w(f.timestamp)}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:12,color:"#0f172a"},children:[s.jsxs("b",{children:[f.stepName," ",f.action]}),s.jsxs("span",{style:{color:"#64748b"},children:["",f.actor==="agent"?"":f.actor==="buyer"?"":""]})]}),f.detail&&s.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:f.detail})]}),s.jsx("div",{children:f.hash&&s.jsx("span",{style:{fontSize:10,padding:"3px 8px",borderRadius:4,background:b?"#fef3c7":"#f1f5f9",color:b?"#92400e":"#64748b",border:b?"1px solid #fcd34d":"1px solid #e2e8f0",fontFamily:"monospace"},children:f.hash})})]},f.id)}),u.events.length>3&&s.jsx("button",{onClick:()=>d(!c),style:{width:"100%",padding:"8px",fontSize:11,color:"#1749d7",background:"transparent",border:"none",cursor:"pointer",fontWeight:600},children:c?"":` ${u.events.length} `})]}),!u&&!o&&s.jsxs("div",{style:{textAlign:"center",padding:"32px 16px",color:"#64748b"},children:[s.jsx(Bd,{size:32,style:{margin:"0 auto 8px",opacity:.5}}),s.jsx("div",{style:{fontSize:13,marginBottom:8},children:""}),s.jsxs("button",{className:`${z["uag-btn"]} ${z.primary}`,children:[s.jsx(Kr,{size:14,style:{marginRight:4}}),""]})]}),o&&s.jsxs("div",{style:{textAlign:"center",padding:"24px",color:"#64748b"},children:[s.jsx(ci,{size:20,className:"animate-spin",style:{margin:"0 auto 8px"}}),s.jsx("div",{style:{fontSize:12},children:"..."})]}),u&&s.jsxs("div",{style:{display:"flex",gap:8,paddingTop:8,borderTop:"1px solid #e2e8f0"},children:[s.jsxs(it,{to:`/assure?case=${u.id}`,className:`${z["uag-btn"]} ${z.primary}`,style:{flex:1,textAlign:"center",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[" Trust Room",s.jsx(St,{size:14})]}),u.currentStep===3&&u.offerPrice&&s.jsxs("button",{className:z["uag-btn"],style:{background:"#fef3c7",borderColor:"#fcd34d",color:"#92400e"},children:[s.jsx(mn,{size:14,style:{marginRight:4}}),""]})]}),r.length>0&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,padding:"12px 0 0",borderTop:"1px solid #e2e8f0"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#1749d7"},children:r.length}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#16a34a"},children:r.filter(f=>f.currentStep>=3).length}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#f59e0b"},children:r.filter(f=>f.status==="pending").length||0}),s.jsx("div",{style:{fontSize:11,color:"#64748b"},children:""})]})]})]})}function Hw(){const{data:e,isLoading:t,buyLead:r,isBuying:n,useMock:a,toggleMode:i}=h1(),{selectedLead:o,selectLead:l,close:c}=x1(),d=m.useRef(null),h=async u=>{!e||n||(r(u),c())};return t?s.jsx(v1,{}):e?s.jsxs("div",{className:z["uag-page"],children:[s.jsx(g1,{}),s.jsx("main",{className:z["uag-container"],children:s.jsxs("div",{className:z["uag-grid"],children:[s.jsx(j1,{leads:e.leads,onSelectLead:l}),s.jsx(N1,{ref:d,selectedLead:o,onBuyLead:h,isProcessing:n}),s.jsx(k1,{leads:e.leads}),s.jsx(S1,{listings:e.listings,feed:e.feed}),s.jsx(Fw,{listings:e.listings}),s.jsx(Gw,{})]})}),s.jsx(b1,{user:e.user,useMock:a,toggleMode:i})]}):null}function Ww(){return s.jsx(Cu,{children:({reset:e})=>s.jsx(Hg,{onReset:e,FallbackComponent:y1,children:s.jsx(Hw,{})})})}const Vw=e=>{const t=Math.floor(e*.4),r=Math.floor(e*.3),n=Math.floor(e*.3);return[{label:"",value:t,icon:mt},{label:"",value:r,icon:ir},{label:"",value:n,icon:hn}]},Zw=({isOpen:e,onClose:t,agentName:r})=>{const[n,a]=m.useState(null),[i,o]=m.useState(""),[l,c]=m.useState(!1),d=m.useMemo(()=>{const u=[],x=["","","","","","",""];for(let f=1;f<=7;f++){const g=new Date;g.setDate(g.getDate()+f);const b=`${g.getMonth()+1}/${g.getDate()}`,v=x[g.getDay()]??"",p=g.getDay()===0||g.getDay()===6?["10:00","11:00","14:00","15:00","16:00"]:["14:00","15:00","19:00"];u.push({date:b,day:v,times:p})}return u},[]);if(!e)return null;const h=()=>{!n||!i||(c(!0),setTimeout(()=>{t(),c(!1),a(null),o("")},2e3))};return s.jsx("div",{className:"fixed inset-0 z-modal flex items-end justify-center bg-black/50 p-4 backdrop-blur-sm sm:items-center",children:s.jsxs("div",{className:"max-h-[80vh] w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-2xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:""}),s.jsxs("p",{className:"text-sm opacity-80",children:["",r," "]})]}),s.jsx("button",{onClick:t,className:"rounded-full p-1 transition-colors hover:bg-white/20",children:s.jsx(_s,{size:20})})]})}),l?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex size-16 items-center justify-center rounded-full bg-green-100",children:s.jsx(mt,{className:"text-green-500",size:32})}),s.jsx("h4",{className:"mb-2 text-xl font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-slate-500",children:""})]}):s.jsxs("div",{className:"max-h-[60vh] overflow-y-auto p-4",children:[s.jsx("div",{className:"mb-4 space-y-3",children:d.slice(0,4).map(u=>s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2 text-xs font-medium text-slate-500",children:[u.date," (",u.day,")"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.times.map(x=>{const f=`${u.date}-${x}`,g=n===f;return s.jsx("button",{onClick:()=>a(f),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-all ${g?"bg-[#003366] text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:x},f)})})]},u.date))}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"booking-phone",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("input",{id:"booking-phone",type:"tel",value:i,onChange:u=>o(u.target.value),placeholder:"0912-345-678",className:"w-full rounded-xl border border-slate-200 p-3 outline-none focus:border-transparent focus:ring-2 focus:ring-[#003366]"})]}),s.jsxs("button",{onClick:h,disabled:!n||!i,className:`mt-4 flex w-full items-center justify-center gap-2 rounded-xl py-3 font-bold transition-all ${n&&i?"bg-[#003366] text-white hover:bg-[#004488]":"cursor-not-allowed bg-slate-100 text-slate-400"}`,children:[s.jsx(ts,{size:18}),""]})]})]})})},Yw=({agent:e,onLineClick:t,onCallClick:r,onBookingClick:n})=>{const[a,i]=m.useState(!1),[o,l]=m.useState(!1),c=m.useMemo(()=>e.internalCode%10>3,[e.internalCode]),d=Vw(e.trustScore),h=m.useMemo(()=>({responseTime:c?"5 ":"2 ",closureRate:Math.min(95,60+e.trustScore%30),totalDeals:e.encouragementCount*2+10,experience:Math.floor(e.trustScore/25)+1}),[e.trustScore,e.encouragementCount,c]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.avatarUrl,alt:e.name,className:"size-16 rounded-full border-2 border-white object-cover shadow-md"}),s.jsxs("div",{className:`absolute -bottom-1 -right-1 ${c?"bg-green-500":"bg-slate-400"} flex items-center gap-0.5 rounded-full border border-white px-1.5 py-0.5 text-[10px] text-white`,children:[s.jsx("div",{className:`size-1.5 rounded-full ${c?"animate-pulse bg-white":"bg-slate-300"}`}),s.jsx("span",{children:c?"":""})]})]}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold text-slate-800",children:[e.name,s.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-xs font-normal text-slate-500",children:e.company})]}),s.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[s.jsxs("p",{className:"text-xs text-slate-400",children:["#",e.internalCode]}),s.jsxs("div",{className:"flex items-center gap-0.5 rounded bg-green-50 px-1.5 py-0.5 text-[10px] text-green-600",children:[s.jsx(Qr,{size:10}),s.jsx("span",{children:""})]})]})]})}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex cursor-pointer items-center gap-1.5",role:"button",tabIndex:0,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&i(!a)},children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-blue-50 text-[#003366]",children:s.jsx(un,{size:16,fill:"currentColor"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-[#003366]",children:e.trustScore}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),a&&s.jsxs("div",{className:"absolute bottom-full left-0 z-10 mb-2 w-48 rounded-lg bg-slate-800 p-3 text-xs text-white shadow-xl",children:[s.jsx("div",{className:"mb-2 font-bold",children:""}),d.map(u=>s.jsxs("div",{className:"flex items-center justify-between py-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(u.icon,{size:12,className:"text-green-400"}),s.jsx("span",{children:u.label})]}),s.jsxs("span",{className:"font-medium",children:["+",u.value]})]},u.label)),s.jsxs("div",{className:"mt-2 flex justify-between border-t border-slate-600 pt-2 font-bold",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-green-400",children:e.trustScore})]}),s.jsx("div",{className:"absolute left-4 top-full border-8 border-transparent border-t-slate-800"})]})]}),s.jsx("div",{className:"h-8 w-px bg-slate-100"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-orange-50 text-orange-500",children:s.jsx(Gn,{size:16})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-800",children:e.encouragementCount}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]})]})]}),c&&s.jsxs("div",{className:"mt-3 inline-flex items-center gap-1 rounded-lg bg-green-50 px-2 py-1 text-xs text-green-600",children:[s.jsx(ir,{size:12})," ",h.responseTime," "]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 border-y border-slate-100 py-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-[#003366]",children:[h.closureRate,"%"]}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),s.jsxs("div",{className:"border-x border-slate-100 text-center",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:h.totalDeals}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[h.experience,""]}),s.jsx("div",{className:"text-[10px] text-slate-500",children:""})]})]}),s.jsxs("div",{className:"mt-4 space-y-2 border-t border-slate-50 pt-3",children:[s.jsxs("button",{onClick:t,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-[#06C755] py-2.5 text-sm font-bold text-white shadow-sm transition-colors hover:bg-[#05B04A]",children:[s.jsx(Pt,{size:18})," LINE "]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>n?n():l(!0),className:"flex flex-1 items-center justify-center gap-1.5 rounded-lg bg-[#003366] py-2 text-sm font-medium text-white transition-colors hover:bg-[#004488]",children:[s.jsx(ts,{size:16}),""]}),s.jsxs("button",{onClick:r,className:"flex flex-1 items-center justify-center gap-1.5 rounded-lg border border-[#003366] bg-white py-2 text-sm font-medium text-[#003366] transition-colors hover:bg-blue-50",children:[s.jsx(es,{size:16}),""]})]})]})]}),s.jsx(Zw,{isOpen:o,onClose:()=>l(!1),agentName:e.name})]})},va=e=>{let t=e;return t=t.replace(/^\d{3,5}/,""),t=t.replace(/(\d+[fF].*)$/,""),t=t.replace(/[\-]\d+/g,""),t=t.replace(//g,""),t=t.replace(/\s+/g,""),t},Ho=e=>e.trim().replace(/\s+/g,"").replace(/[]/g,"").replace(/[]/g,t=>t===""?"(":")").replace(/[]/g,"").replace(/[]/g,"").toLowerCase(),ya={id:"b0eebc99-9c0b-4ef8-bb6d-6bb9bd380a22",publicId:"MH-100001",title:"101",price:3680,address:"",description:"101",images:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"],agent:{id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",internalCode:1,name:"",avatarUrl:"https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",company:"",trustScore:92,encouragementCount:156}},cn={getPropertyByPublicId:async e=>{try{const{data:t,error:r}=await ce.from("properties").select(`
          *,
          agent:agents (*)
        `).eq("public_id",e).single();return r||!t?(console.warn("",r),e==="MH-100001"?ya:null):{id:t.id,publicId:t.public_id,title:t.title,price:Number(t.price),address:t.address,description:t.description,images:t.images||[],sourcePlatform:t.source_platform,agent:{id:t.agent.id,internalCode:t.agent.internal_code,name:t.agent.name,avatarUrl:t.agent.avatar_url||"https://via.placeholder.com/150",company:t.agent.company,trustScore:t.agent.trust_score,encouragementCount:t.agent.encouragement_count}}}catch(t){return console.error("Service Error:",t),ya}},createProperty:async(e,t)=>{const{data:r,error:n}=await ce.from("properties").insert({title:e.title,price:e.price,address:e.address,description:e.description,images:e.images,source_platform:e.sourcePlatform,source_external_id:e.sourceExternalId,agent_id:t}).select().single();if(n)throw n;return r},uploadImages:async(e,t)=>{const r=(t==null?void 0:t.concurrency)||3,n=[],a=[];let i=0;for(let o=0;o<e.length;o+=r){const c=e.slice(o,o+r).map(async h=>{var u,x;try{const f=((u=h.name.split(".").pop())==null?void 0:u.toLowerCase())||"jpg",g=`${crypto.randomUUID()}.${f}`,{error:b}=await ce.storage.from("property-images").upload(g,h,{contentType:h.type,cacheControl:"31536000"});if(b)return console.error("Image upload error:",b),a.push({file:h,error:b.message}),null;const{data:v}=ce.storage.from("property-images").getPublicUrl(g);return v.publicUrl}catch(f){return console.error("Image upload exception:",f),a.push({file:h,error:f.message||""}),null}finally{i++,(x=t==null?void 0:t.onProgress)==null||x.call(t,i,e.length)}}),d=await Promise.all(c);n.push(...d.filter(h=>!!h))}return{urls:n,failed:a,allSuccess:a.length===0}},uploadImagesLegacy:async e=>(await cn.uploadImages(e)).urls,createPropertyWithForm:async(e,t,r)=>{var u,x,f,g;const{data:{user:n}}=await ce.auth.getUser(),a=(n==null?void 0:n.id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11";let i=r||null,o=((u=e.communityName)==null?void 0:u.trim())||null,l=!1;if(o==="")i=null,o="",console.log(" /");else if(r)console.log("  ID:",r);else if(e.address&&o){const b=va(e.address);if(b.length>=5){const{data:v}=await ce.from("communities").select("id, name").eq("address_fingerprint",b).single();v&&(i=v.id,console.log(" :",v.name))}if(!i&&o.length>=2){const v=Ho(o),p=((x=e.address.match(/([^]+[])/))==null?void 0:x[1])||"",{data:w}=await ce.from("communities").select("id, name").eq("district",p).limit(50);if(w&&w.length>0){const k=w.find(N=>Ho(N.name)===v);k&&(i=k.id,o=k.name,console.log(" :",k.name))}if(!i){const{data:k}=await ce.from("communities").select("id, name").eq("name",o).single();k&&(i=k.id,console.log(" :",k.name))}}if(!i){const v=((f=e.address.match(/([^]+[])/))==null?void 0:f[1])||"",p=((g=e.address.match(/^(.*?[])/))==null?void 0:g[1])||"",{data:w,error:k}=await ce.from("communities").insert({name:o,address:e.address,address_fingerprint:b,district:v,city:p,is_verified:!1,completeness_score:20,features:[e.type].filter(Boolean)}).select("id").single();!k&&w?(i=w.id,l=!0,console.log(" :",o)):console.error(" :",k)}}const c=e.address?va(e.address):null,{data:d,error:h}=await ce.from("properties").insert({agent_id:a,title:e.title,price:Number(e.price),address:e.address,address_fingerprint:c,community_name:o,community_id:i,size:Number(e.size||0),age:Number(e.age||0),rooms:Number(e.rooms),halls:Number(e.halls),bathrooms:Number(e.bathrooms),floor_current:e.floorCurrent,floor_total:Number(e.floorTotal||0),property_type:e.type,advantage_1:e.advantage1,advantage_2:e.advantage2,disadvantage:e.disadvantage,description:e.description,images:t,features:[e.type,e.advantage1,e.advantage2].filter(Boolean),source_platform:e.sourceExternalId?"591":"MH",source_external_id:e.sourceExternalId||null}).select().single();if(h)throw h;return i&&(e.advantage1||e.advantage2||e.disadvantage)&&(await ce.from("community_reviews").insert({community_id:i,property_id:d.id,source:"agent",advantage_1:e.advantage1||null,advantage_2:e.advantage2||null,disadvantage:e.disadvantage||null}),fetch("/api/generate-community-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({communityId:i})}).catch(b=>console.warn("AI :",b))),{...d,is_new_community:l}},checkCommunityExists:async e=>{if(!e||e.trim().length<2)return{exists:!1};const{data:t}=await ce.from("communities").select("id, name").ilike("name",`%${e.trim()}%`).limit(1).single();return t?{exists:!0,community:t}:{exists:!1}}};async function Kw(e){try{const{data:t,error:r}=await ce.rpc("create_lead",{p_customer_name:e.customerName,p_customer_phone:e.customerPhone,p_customer_email:e.customerEmail||null,p_customer_line_id:e.customerLineId||null,p_agent_id:e.agentId,p_property_id:e.propertyId,p_source:e.source,p_budget_range:e.budgetRange||null,p_preferred_contact_time:e.preferredContactTime||null,p_needs_description:e.needsDescription||null});return r?(console.error("[LeadService] Create lead error:",r),{success:!1,error:r.message}):{success:!0,leadId:t}}catch(t){const r=t instanceof Error?t.message:"";return console.error("[LeadService] Create lead exception:",t),{success:!1,error:r}}}const Qw=({isOpen:e,onClose:t,propertyId:r,propertyTitle:n,agentId:a,agentName:i,source:o})=>{const[l,c]=m.useState("form"),[d,h]=m.useState({name:"",phone:"",preferredChannel:"line",preferredTime:"",budget:"",needs:""});if(!e)return null;const u=async b=>{if(b.preventDefault(),!d.name.trim()||!d.phone.trim()){Z.error("");return}c("submitting");try{const v=await Kw({customerName:d.name,customerPhone:d.phone,agentId:a,propertyId:r,source:o,...d.budget?{budgetRange:d.budget}:{},...d.preferredTime?{preferredContactTime:d.preferredTime}:{},...d.needs?{needsDescription:d.needs}:{}});v.success?(c("success"),setTimeout(()=>{t(),c("form"),h({name:"",phone:"",preferredChannel:"line",preferredTime:"",budget:"",needs:""})},3e3)):(Z.error("",v.error||""),c("form"))}catch{Z.error(""),c("form")}},x=[{value:"line",label:"LINE",icon:s.jsx(Pt,{size:18,className:"text-[#00c300]"})},{value:"phone",label:"",icon:s.jsx(es,{size:18,className:"text-blue-600"})},{value:"message",label:"",icon:s.jsx(Gd,{size:18,className:"text-slate-600"})}],f=[" 09:00-12:00"," 14:00-18:00"," 19:00-21:00"," 10:00-12:00"," 14:00-18:00",""],g=["1000","1000-2000","2000-3000","3000-5000","5000",""];return s.jsx("div",{className:"fixed inset-0 z-modal flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:s.jsxs("div",{className:"max-h-[90vh] w-full max-w-lg overflow-hidden rounded-2xl bg-white shadow-2xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#003366] to-[#00A8E8] p-5 text-white",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:""}),s.jsxs("p",{className:"mt-1 text-sm opacity-90",children:[i,"  ",s.jsx("span",{className:"font-bold",children:"10 "})," "]})]}),s.jsx("button",{onClick:t,className:"rounded-full p-1.5 transition-colors hover:bg-white/20",children:s.jsx(_s,{size:22})})]}),s.jsxs("div",{className:"mt-3 rounded-lg bg-white/10 px-3 py-2 text-sm",children:[s.jsx("span",{className:"opacity-80",children:""}),s.jsx("span",{className:"ml-1 font-medium",children:n})]})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-5",children:l==="success"?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex size-16 items-center justify-center rounded-full bg-green-100",children:s.jsx(mt,{className:"text-green-600",size:32})}),s.jsx("h4",{className:"mb-2 text-xl font-bold text-slate-800",children:""}),s.jsxs("p",{className:"mb-4 text-slate-600",children:[i,"  ",s.jsx("span",{className:"font-bold text-[#003366]",children:"10 "})," "]}),s.jsxs("div",{className:"rounded-xl bg-blue-50 p-4 text-left text-sm",children:[s.jsx("p",{className:"mb-2 font-medium text-[#003366]",children:" "}),s.jsxs("ul",{className:"space-y-1 text-slate-600",children:[s.jsx("li",{children:" "}),s.jsx("li",{children:" "}),s.jsx("li",{children:" "})]})]})]}):l==="submitting"?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Ks,{className:"mx-auto mb-4 animate-spin text-[#003366]",size:40}),s.jsx("p",{className:"text-slate-600",children:"..."})]}):s.jsxs("form",{onSubmit:u,className:"space-y-5",children:[s.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3",children:[s.jsxs("p",{className:"mb-2 flex items-center gap-1.5 text-sm font-bold text-amber-900",children:[s.jsx(ir,{size:14}),""]}),s.jsxs("ul",{className:"space-y-1 text-xs text-amber-800",children:[s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(mt,{size:12,className:"shrink-0 text-green-600"})," ",i,"  ",s.jsx("strong",{children:"10 "})," "]}),s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(mt,{size:12,className:"shrink-0 text-green-600"}),""]}),s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx(mt,{size:12,className:"shrink-0 text-green-600"}),""]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"contact-name",className:"mb-1.5 block text-sm font-medium text-slate-700",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{id:"contact-name",type:"text",value:d.name,onChange:b=>h({...d,name:b.target.value}),placeholder:"",className:"w-full rounded-xl border border-slate-200 px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"contact-phone",className:"mb-1.5 block text-sm font-medium text-slate-700",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{id:"contact-phone",type:"tel",value:d.phone,onChange:b=>h({...d,phone:b.target.value}),placeholder:"0912-345-678",className:"w-full rounded-xl border border-slate-200 px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20",required:!0})]})]}),s.jsxs("div",{role:"group","aria-labelledby":"preferred-channel-label",children:[s.jsx("span",{id:"preferred-channel-label",className:"mb-2 block text-sm font-medium text-slate-700",children:""}),s.jsx("div",{className:"flex gap-2",children:x.map(b=>s.jsxs("button",{type:"button",onClick:()=>h({...d,preferredChannel:b.value}),className:`flex flex-1 items-center justify-center gap-2 rounded-xl border-2 py-2.5 transition-all ${d.preferredChannel===b.value?"border-[#003366] bg-blue-50 text-[#003366]":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[b.icon,s.jsx("span",{className:"text-sm font-medium",children:b.label})]},b.value))})]}),s.jsxs("div",{role:"group","aria-labelledby":"preferred-time-label",children:[s.jsxs("span",{id:"preferred-time-label",className:"mb-2 block text-sm font-medium text-slate-700",children:[s.jsx(ir,{size:14,className:"mr-1 inline"}),""]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:f.map(b=>s.jsx("button",{type:"button",onClick:()=>h({...d,preferredTime:b}),className:`rounded-lg px-3 py-2 text-xs font-medium transition-all ${d.preferredTime===b?"bg-[#003366] text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:b},b))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contact-budget",className:"mb-2 block text-sm font-medium text-slate-700",children:""}),s.jsxs("select",{id:"contact-budget",value:d.budget,onChange:b=>h({...d,budget:b.target.value}),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20",children:[s.jsx("option",{value:"",children:""}),g.map(b=>s.jsx("option",{value:b,children:b},b))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contact-needs",className:"mb-1.5 block text-sm font-medium text-slate-700",children:""}),s.jsx("textarea",{id:"contact-needs",value:d.needs,onChange:b=>h({...d,needs:b.target.value}),placeholder:"...",rows:3,className:"w-full resize-none rounded-xl border border-slate-200 px-4 py-2.5 outline-none transition-all focus:border-[#003366] focus:ring-2 focus:ring-[#003366]/20"})]}),s.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-green-100 bg-green-50 p-3",children:[s.jsx("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-full bg-green-100",children:s.jsx(mt,{size:16,className:"text-green-600"})}),s.jsxs("div",{className:"text-xs text-green-800",children:[s.jsx("p",{className:"mb-1 font-medium",children:" "}),s.jsx("p",{children:""})]})]}),s.jsxs("button",{type:"submit",className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3.5 font-bold text-white shadow-lg shadow-blue-900/20 transition-colors hover:bg-[#004488]",children:[s.jsx(ts,{size:18}),""]})]})})]})})},od=[{id:"commute",icon:"",title:"",subtitle:"/",description:""},{id:"school",icon:"",title:"",subtitle:"",description:""},{id:"community",icon:"",title:"",subtitle:"",description:""},{id:"view",icon:"",title:"",subtitle:"",description:""},{id:"amenity",icon:"",title:"",subtitle:"",description:""},{id:"parking",icon:"",title:"",subtitle:"",description:""},{id:"renovated",icon:"",title:"",subtitle:"",description:""}],qw={simple:{id:"simple",name:"",description:"",icon:""},investment:{id:"investment",name:"",description:"",icon:""},marketing:{id:"marketing",name:"",description:"",icon:""}},Wo={id:"demo",publicId:"MH-100001",title:"101",price:3680,address:"100",description:"",images:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800","https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800","https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800","https://images.unsplash.com/photo-1600573472592-401b489a3cdc?w=800"],size:45.2,age:8,rooms:3,halls:2,bathrooms:2,floorCurrent:"12",floorTotal:15,propertyType:"",direction:"",parking:"",communityName:"",communityYear:2016,communityUnits:420,managementFee:80,advantage1:"",advantage2:"",disadvantage:"",agent:{id:"agent-1",name:"",avatarUrl:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200",company:"",phone:"0912-345-678",lineId:"@maihouses",trustScore:92,reviewCount:156,experience:10}};function Jw(e,t=.8,r=30,n=.02){const a=e*1e4*t,i=n/12,o=r*12,l=a*(i*Math.pow(1+i,o))/(Math.pow(1+i,o)-1);return Math.round(l)}function Xw(){var v;const{id:e}=br(),[t]=vr(),[r,n]=m.useState(Wo),[a,i]=m.useState(0),[o,l]=m.useState(0),[c,d]=m.useState(!0),h=t.get("aid"),u=t.get("src")||"direct",x=((v=t.get("h"))==null?void 0:v.split(","))||["commute","school","community"];m.useEffect(()=>{const p=async()=>{try{await fetch("/api/report/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:e,agentId:h,source:u,userAgent:navigator.userAgent})})}catch(k){console.log("Track failed:",k)}},w=async()=>{d(!0);try{await new Promise(k=>setTimeout(k,300)),n(Wo),l(Math.floor(Math.random()*20)+5)}catch(k){console.error("Load report failed:",k)}finally{d(!1)}};p(),w()},[e,h,u]);const f=od.filter(p=>x.includes(p.id)),g=Jw(r.price),b=async()=>{const p=window.location.href,w=`${r.title} - NT$${r.price}`;if(navigator.share)try{await navigator.share({title:w,url:p})}catch{console.log("Share cancelled")}else await navigator.clipboard.writeText(p),Z.success("","")};return c?s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 size-12 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),s.jsx("p",{className:"text-slate-500",children:"..."})]})}):s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx("section",{className:"relative",children:s.jsxs("div",{className:"aspect-[4/3] overflow-hidden bg-slate-200",children:[s.jsx("img",{src:r.images[a],alt:r.title,className:"size-full object-cover"}),r.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>i(p=>p>0?p-1:r.images.length-1),className:"absolute left-2 top-1/2 flex size-10 -translate-y-1/2 items-center justify-center rounded-full bg-black/30 text-white transition hover:bg-black/50",children:s.jsx(Hr,{size:24})}),s.jsx("button",{onClick:()=>i(p=>p<r.images.length-1?p+1:0),className:"absolute right-2 top-1/2 flex size-10 -translate-y-1/2 items-center justify-center rounded-full bg-black/30 text-white transition hover:bg-black/50",children:s.jsx(St,{size:24})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 flex -translate-x-1/2 gap-1.5",children:r.images.map((p,w)=>s.jsx("button",{onClick:()=>i(w),className:`size-2 rounded-full transition ${w===a?"bg-white":"bg-white/50"}`},w))})]}),s.jsxs("div",{className:"absolute right-4 top-4 flex items-center gap-1.5 rounded-full bg-white/90 px-3 py-1.5 text-sm font-bold text-[#003366] backdrop-blur",children:[s.jsx(He,{size:14}),""]})]})}),s.jsxs("section",{className:"border-b border-slate-100 bg-white px-4 py-5",children:[s.jsxs("div",{className:"mb-1 text-3xl font-black text-[#003366]",children:["NT$ ",r.price.toLocaleString()," "]}),s.jsx("h1",{className:"mb-2 text-lg font-bold text-slate-800",children:r.title}),s.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[s.jsx(yr,{size:14,className:"mr-1"}),r.address]})]}),s.jsx("section",{className:"border-b border-slate-100 bg-white p-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[s.jsxs("div",{className:"rounded-xl bg-slate-50 py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.rooms,"",r.halls,"",r.bathrooms,""]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"rounded-xl bg-slate-50 py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.size," "]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"rounded-xl bg-slate-50 py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.age," "]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"rounded-xl bg-slate-50 py-3",children:[s.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[r.floorCurrent,"/",r.floorTotal,"F"]}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"rounded-xl bg-slate-50 py-3",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.direction}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"rounded-xl bg-slate-50 py-3",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.parking||""}),s.jsx("div",{className:"text-xs text-slate-500",children:""})]})]})}),s.jsxs("section",{className:"border-b border-slate-100 bg-white p-4",children:[s.jsx("h2",{className:"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800",children:" "}),s.jsxs("div",{className:"rounded-xl border border-blue-100 bg-gradient-to-r from-blue-50 to-cyan-50 p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:" 8 30 "}),s.jsx("span",{className:"text-xs text-slate-400",children:" 2%"})]}),s.jsxs("div",{className:"text-2xl font-black text-[#003366]",children:[" NT$ ",g.toLocaleString()]})]})]}),s.jsxs("section",{className:"border-b border-slate-100 bg-white p-4",children:[s.jsx("h2",{className:"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800",children:" "}),s.jsx("div",{className:"space-y-3",children:f.map(p=>s.jsxs("div",{className:"flex items-start gap-3 rounded-xl bg-slate-50 p-3",children:[s.jsx("span",{className:"text-2xl",children:p.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-slate-800",children:p.title}),s.jsx("div",{className:"text-sm text-slate-500",children:p.description})]})]},p.id))})]}),r.communityName&&s.jsxs("section",{className:"border-b border-slate-100 bg-white p-4",children:[s.jsx("h2",{className:"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800",children:" "}),s.jsxs("div",{className:"space-y-2 rounded-xl bg-slate-50 p-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsx("span",{className:"font-medium text-slate-800",children:r.communityName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.communityYear," "]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.communityUnits," "]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-medium text-slate-800",children:[r.managementFee," /"]})]})]})]}),r.images.length>1&&s.jsxs("section",{className:"border-b border-slate-100 bg-white p-4",children:[s.jsx("h2",{className:"mb-3 flex items-center gap-2 text-sm font-bold text-slate-800",children:" "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.images.slice(0,6).map((p,w)=>s.jsx("button",{onClick:()=>i(w),className:"aspect-square overflow-hidden rounded-lg bg-slate-100",children:s.jsx("img",{src:p,alt:"",className:"size-full object-cover"})},w))})]}),s.jsxs("section",{className:"border-b border-slate-100 bg-white px-4 py-5",children:[s.jsx("h2",{className:"mb-4 flex items-center gap-2 text-sm font-bold text-slate-800",children:" "}),s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsx("img",{src:r.agent.avatarUrl,alt:r.agent.name,className:"size-16 rounded-full border-2 border-slate-100 object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.agent.name}),s.jsx("div",{className:"text-sm text-slate-500",children:r.agent.company}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-amber-500",children:[" ",(r.agent.trustScore/20).toFixed(1)]}),s.jsxs("span",{className:"text-xs text-slate-400",children:["(",r.agent.reviewCount," )"]}),r.agent.experience&&s.jsxs("span",{className:"text-xs text-slate-400",children:["",r.agent.experience,""]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:`tel:${r.agent.phone}`,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3.5 font-bold text-white transition hover:bg-[#002244]",children:[s.jsx(es,{size:18})," ",r.agent.phone]}),s.jsxs("a",{href:`https://line.me/R/ti/p/${r.agent.lineId}`,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3.5 font-bold text-white transition hover:bg-[#05a847]",children:[s.jsx(Pt,{size:18}),"LINE "]}),s.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-slate-200 py-3.5 font-bold text-slate-700 transition hover:border-slate-300",children:[s.jsx(ts,{size:18}),""]})]})]}),s.jsxs("section",{className:"bg-slate-100 px-4 py-6 text-center",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-center gap-2 font-bold text-[#003366]",children:[s.jsx(He,{size:18}),"MaiHouses "]}),s.jsx("div",{className:"mb-3 text-sm text-slate-500",children:""}),o>0&&s.jsxs("div",{className:"mb-2 text-xs text-slate-400",children:["  ",o," "]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["",new Date().toLocaleDateString("zh-TW")]}),s.jsxs("button",{onClick:b,className:"mt-4 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm text-slate-600 transition hover:bg-slate-50",children:[s.jsx(ka,{size:14}),""]}),s.jsxs("a",{href:`/maihouses/property/${r.publicId}?aid=${h||""}&src=report`,className:"mt-3 flex items-center justify-center gap-1 text-sm text-[#003366] hover:underline",children:["",s.jsx(dn,{size:14})]})]})]})}function ej({property:e,isOpen:t,onClose:r}){const[n,a]=m.useState("style"),[i,o]=m.useState("simple"),[l,c]=m.useState(["commute","school","community"]),[d,h]=m.useState([0,1,2,3]),[u,x]=m.useState(""),[f,g]=m.useState(!1),[b,v]=m.useState(null),p=m.useMemo(()=>`${e.title} `,[e.title]),w=()=>{const j=window.location.origin,E=new URLSearchParams({aid:e.agent.id,src:"line_share",h:l.join(","),s:i});return`${j}/maihouses/r/${e.publicId}?${E.toString()}`},k=j=>{c(E=>E.includes(j)?E.filter(O=>O!==j):E.length>=3?[...E.slice(1),j]:[...E,j])},N=j=>{h(E=>E.includes(j)?E.filter(O=>O!==j):E.length>=5?[...E.slice(1),j]:[...E,j])},T=async()=>{g(!0);try{await new Promise(E=>setTimeout(E,800));const j=w();v(j),a("preview")}catch{Z.error("")}finally{g(!1)}},S=async()=>{if(b)try{await navigator.clipboard.writeText(b),Z.success("")}catch{Z.error("")}},C=()=>{const j=u||p,E=encodeURIComponent(b||""),O=encodeURIComponent(j);window.open(`https://line.me/R/msg/text/?${O}%0A${E}`,"_blank")},_=async()=>{if(!navigator.share||!b){S();return}try{await navigator.share({title:e.title,text:u||p,url:b})}catch{}},B=()=>{a("style"),v(null),r()};return t?s.jsxs("div",{className:"fixed inset-0 z-modal flex items-end justify-center sm:items-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:B}),s.jsxs("div",{className:"relative flex max-h-[90vh] w-full max-w-lg flex-col overflow-hidden rounded-t-3xl bg-white sm:rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-800",children:""}),s.jsx("button",{onClick:B,className:"rounded-full p-2 transition hover:bg-slate-100",children:s.jsx(_s,{size:20,className:"text-slate-500"})})]}),s.jsx("div",{className:"border-b border-slate-100 bg-slate-50 px-5 py-3",children:s.jsx("div",{className:"flex items-center gap-2 text-sm",children:["style","highlights","photos","preview"].map((j,E)=>s.jsxs(U.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-1.5 ${n===j?"font-bold text-[#003366]":"text-slate-400"}`,children:[s.jsx("div",{className:`flex size-6 items-center justify-center rounded-full text-xs font-bold ${n===j?"bg-[#003366] text-white":["style","highlights","photos","preview"].indexOf(n)>E?"bg-green-500 text-white":"bg-slate-200"}`,children:["style","highlights","photos","preview"].indexOf(n)>E?s.jsx(ut,{size:14}):E+1}),s.jsxs("span",{className:"hidden sm:inline",children:[j==="style"&&"",j==="highlights"&&"",j==="photos"&&"",j==="preview"&&""]})]}),E<3&&s.jsx(St,{size:16,className:"text-slate-300"})]},j))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5",children:[n==="style"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"mb-4 text-sm text-slate-500",children:""}),Object.values(qw).map(j=>s.jsx("button",{onClick:()=>o(j.id),className:`w-full rounded-xl border-2 p-4 text-left transition ${i===j.id?"border-[#003366] bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:j.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-800",children:j.name}),s.jsx("div",{className:"text-sm text-slate-500",children:j.description})]}),i===j.id&&s.jsx("div",{className:"flex size-6 items-center justify-center rounded-full bg-[#003366]",children:s.jsx(ut,{size:14,className:"text-white"})})]})},j.id))]}),n==="highlights"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4 text-sm text-slate-500",children:[" 3  ",l.length,"/3"]}),od.map(j=>s.jsx("button",{onClick:()=>k(j.id),className:`w-full rounded-xl border-2 p-3 text-left transition ${l.includes(j.id)?"border-[#003366] bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:j.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-800",children:j.title}),s.jsx("div",{className:"text-xs text-slate-500",children:j.subtitle})]}),l.includes(j.id)&&s.jsx("div",{className:"flex size-6 items-center justify-center rounded-full bg-[#003366]",children:s.jsx(ut,{size:14,className:"text-white"})})]})},j.id))]}),n==="photos"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4 text-sm text-slate-500",children:[" ",d.length,"/5"]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.images.map((j,E)=>s.jsxs("button",{onClick:()=>N(E),className:`relative aspect-square overflow-hidden rounded-lg border-2 transition ${d.includes(E)?"border-[#003366] ring-2 ring-[#003366]/20":"border-transparent"}`,children:[s.jsx("img",{src:j,alt:"",className:"size-full object-cover"}),d.includes(E)&&s.jsx("div",{className:"absolute right-1 top-1 flex size-5 items-center justify-center rounded-full bg-[#003366]",children:s.jsx(ut,{size:12,className:"text-white"})})]},E))})]}),n==="preview"&&b&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"py-4 text-center",children:[s.jsx("div",{className:"mx-auto mb-3 flex size-16 items-center justify-center rounded-full bg-green-100",children:s.jsx(ut,{size:32,className:"text-green-600"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-800",children:""}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:""})]}),s.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(Hd,{size:14}),""]}),s.jsx("div",{className:"break-all rounded-lg border border-slate-200 bg-white p-2 text-xs text-slate-500",children:b})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"share-message",className:"mb-2 block text-sm text-slate-600",children:""}),s.jsx("textarea",{id:"share-message",value:u||p,onChange:j=>x(j.target.value),className:"w-full resize-none rounded-xl border border-slate-200 p-3 text-sm focus:border-[#003366] focus:outline-none focus:ring-2 focus:ring-[#003366]/20",rows:3})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:S,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white transition hover:bg-[#002244]",children:[s.jsx(Bn,{size:18}),""]}),s.jsxs("button",{onClick:C,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3 font-bold text-white transition hover:bg-[#05a847]",children:[s.jsx("svg",{viewBox:"0 0 24 24",className:"size-5 fill-current",children:s.jsx("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),"LINE "]}),s.jsxs("button",{onClick:_,className:"flex w-full items-center justify-center gap-2 rounded-xl border-2 border-slate-200 py-3 font-bold text-slate-700 transition hover:border-slate-300",children:[s.jsx(ka,{size:18}),""]})]}),s.jsxs("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-[#003366] hover:underline",children:[s.jsx(hn,{size:14}),""]})]})]}),n!=="preview"&&s.jsxs("div",{className:"flex gap-3 border-t border-slate-100 px-5 py-4",children:[n!=="style"&&s.jsx("button",{onClick:()=>{const j=["style","highlights","photos","preview"],E=j.indexOf(n);if(E>0){const O=j[E-1];O&&a(O)}},className:"flex-1 rounded-xl border-2 border-slate-200 py-3 font-bold text-slate-700 transition hover:border-slate-300",children:""}),s.jsx("button",{onClick:()=>{n==="style"?a("highlights"):n==="highlights"?a("photos"):n==="photos"&&T()},disabled:f||n==="highlights"&&l.length===0,className:"flex flex-1 items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white transition hover:bg-[#002244] disabled:bg-slate-300",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"size-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"..."]}):n==="photos"?"":s.jsxs(s.Fragment,{children:["",s.jsx(St,{size:18})]})})]})]})]}):null}const tj=(e,t,r,n)=>{const[a]=m.useState(()=>Date.now()),i=m.useRef({click_photos:0,click_line:0,click_call:0,scroll_depth:0}),o=m.useRef(!1),l=m.useRef("F"),c=m.useCallback(()=>{let u=localStorage.getItem("uag_session");return u||(u=`u_${Math.random().toString(36).substring(2,11)}`,localStorage.setItem("uag_session",u)),u},[]),d=m.useCallback(u=>({session_id:c(),agent_id:t,fingerprint:btoa(JSON.stringify({screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language})),event:{type:u,property_id:e,district:r||"unknown",duration:Math.round((Date.now()-a)/1e3),actions:{...i.current},focus:[]}}),[e,t,r,c,a]),h=m.useCallback(async(u,x=!1)=>{const f=d(u);if(x||u==="page_exit"){const g=new Blob([JSON.stringify(f)],{type:"application/json"});navigator.sendBeacon("/api/uag-track",g);return}try{const b=await(await fetch("/api/uag-track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f),keepalive:!0})).json();if(b.success&&b.grade){const v={S:5,A:4,B:3,C:2,F:1},p=v[b.grade]||1,w=v[l.current]||1;p>w&&(l.current=b.grade,b.grade==="S"&&n&&n("S",b.reason))}}catch{const b=new Blob([JSON.stringify(f)],{type:"application/json"});navigator.sendBeacon("/api/uag-track",b)}},[d,n]);return m.useEffect(()=>{const u=()=>{const x=Math.round((window.scrollY+window.innerHeight)/document.body.scrollHeight*100);x>i.current.scroll_depth&&(i.current.scroll_depth=x)};return window.addEventListener("scroll",u,{passive:!0}),()=>window.removeEventListener("scroll",u)},[]),m.useEffect(()=>{if(!e)return;h("page_view",!0);const u=()=>{o.current||(o.current=!0,h("page_exit",!0))};return window.addEventListener("pagehide",u),window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&u()}),()=>{window.removeEventListener("pagehide",u),u()}},[e,h]),{trackPhotoClick:()=>{i.current.click_photos++},trackLineClick:()=>{i.current.click_line=1,h("click_line")},trackCallClick:()=>{i.current.click_call=1,h("click_call")}}},sj=()=>{var E,O,L;const{id:e}=br(),[t]=vr(),[r,n]=m.useState(!1),a=!1,[i,o]=m.useState(0),[l,c]=m.useState(!1),[d,h]=m.useState("sidebar"),[u,x]=m.useState(!1),[f,g]=m.useState(""),[b,v]=m.useState(!1),[p,w]=m.useState(ya),k=()=>{let D=t.get("aid");return D||(D=localStorage.getItem("uag_last_aid")),D&&D!=="unknown"&&localStorage.setItem("uag_last_aid",D),D||"unknown"},N=m.useCallback((D,I)=>{D==="S"&&(I&&g(I),setTimeout(()=>x(!0),500))},[]),T=D=>{const I=D.match(/[](.{2,3}[])/);return(I==null?void 0:I[1])??"unknown"},S=tj(e||"",k(),T(p.address),N),C=D=>{h(D),c(!0),D==="mobile_bar"?S.trackLineClick():S.trackCallClick()},_=m.useMemo(()=>{var I;const D=((I=p.publicId)==null?void 0:I.charCodeAt(3))||0;return{currentViewers:Math.floor(D%5)+2,weeklyBookings:Math.floor(D%8)+5,isHot:D%3===0}},[p.publicId]);m.useEffect(()=>{(async()=>{if(e)try{const I=await cn.getPropertyByPublicId(e);I&&w(I)}catch(I){console.error("Fetch error:",I)}})()},[e]);const B="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80";let j=p.images&&p.images.length>0&&p.images[0]?p.images[0]:B;return j&&j.includes("picsum")&&(j=B),s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-overlay flex h-16 items-center justify-between border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{className:"rounded-full p-2 transition-colors hover:bg-slate-100",children:s.jsx(Ea,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center gap-2 text-xl font-extrabold text-[#003366]",children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white",children:s.jsx(He,{size:18})}),""]})]}),s.jsxs("div",{className:"flex items-center rounded-lg border border-slate-200 bg-slate-50 px-3 py-1.5 font-mono text-xs text-slate-500",children:[s.jsx(Wd,{size:12,className:"mr-1 text-gray-400"}),"",s.jsx("span",{className:"ml-1 font-bold text-[#003366]",children:p.publicId})]})]}),s.jsxs("main",{className:"mx-auto max-w-4xl p-4 pb-24",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"group relative aspect-video overflow-hidden rounded-2xl bg-slate-200",children:[s.jsx("img",{src:((E=p.images)==null?void 0:E[i])||j,alt:p.title,onError:D=>{D.currentTarget.src!==B&&(D.currentTarget.src=B)},className:"size-full object-cover transition-transform duration-700 group-hover:scale-105"}),s.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-1 rounded-full bg-black/50 px-3 py-1.5 text-xs text-white backdrop-blur-md",children:[s.jsx(He,{size:12}),s.jsxs("span",{children:[i+1," / ",((O=p.images)==null?void 0:O.length)||1]})]})]}),p.images&&p.images.length>1&&s.jsx("div",{className:"scrollbar-hide -mx-4 mt-3 flex gap-2 overflow-x-auto px-4 pb-2",children:p.images.map((D,I)=>s.jsx("button",{onClick:()=>{o(I),S.trackPhotoClick()},className:`h-14 w-20 shrink-0 overflow-hidden rounded-lg border-2 transition-all ${I===i?"border-[#003366] ring-2 ring-[#003366]/20":"border-transparent opacity-70 hover:opacity-100"}`,children:s.jsx("img",{src:D,alt:` ${I+1}`,onError:M=>{M.currentTarget.src=B},className:"size-full object-cover"})},I))})]}),s.jsx("div",{className:"mb-6 lg:hidden",children:s.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-4 shadow-lg",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>C("mobile_bar"),className:"flex flex-1 items-center justify-center gap-2 rounded-xl bg-[#003366] py-4 text-base font-bold text-white shadow-lg",children:[s.jsx(es,{size:20}),""]}),s.jsx("button",{onClick:()=>C("mobile_bar"),className:"flex w-14 items-center justify-center rounded-xl bg-[#06C755] text-white shadow-lg",children:s.jsx(Pt,{size:22})})]}),s.jsxs("p",{className:"mt-2 text-center text-xs text-slate-500",children:["  ",_.weeklyBookings," "]})]})}),s.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[s.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold leading-tight text-slate-900",children:p.title}),s.jsx("button",{onClick:()=>n(!r),className:`rounded-full p-2 transition-all ${r?"bg-red-50 text-red-500":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:s.jsx(_a,{size:24,fill:r?"currentColor":"none"})})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-slate-500",children:[s.jsx(yr,{size:16}),p.address]}),s.jsxs("div",{className:"mt-4 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-3xl font-extrabold text-[#003366]",children:p.price}),s.jsx("span",{className:"text-lg font-medium text-slate-500",children:""}),s.jsx("span",{className:"ml-2 text-sm font-medium text-red-500",children:""})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[_.isHot&&s.jsxs("div",{className:"inline-flex animate-pulse items-center gap-1 rounded-full bg-orange-50 px-2 py-1 text-xs font-medium text-orange-600",children:[s.jsx(kn,{size:12}),""]}),s.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-slate-50 px-2 py-1 text-xs text-slate-600",children:[s.jsx(Yr,{size:12,className:"text-blue-500"}),_.currentViewers," "]}),s.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-slate-50 px-2 py-1 text-xs text-slate-600",children:[s.jsx(ll,{size:12,className:"text-green-500"})," ",_.weeklyBookings," "]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["","","",""].map(D=>s.jsx("span",{className:"rounded-full bg-blue-50 px-3 py-1 text-xs font-medium text-[#003366]",children:D},D))}),s.jsx("div",{className:"h-px bg-slate-100"}),s.jsxs("div",{className:"prose prose-slate max-w-none",children:[s.jsx("h3",{className:"mb-3 text-lg font-bold text-slate-900",children:""}),s.jsx("p",{className:"whitespace-pre-line leading-relaxed text-slate-600",children:p.description})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold text-slate-900",children:[s.jsx(un,{size:18,className:"text-yellow-500",fill:"currentColor"}),""]}),s.jsx("span",{className:"rounded-full bg-slate-50 px-2 py-1 text-xs text-slate-500",children:"88 "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3 rounded-xl bg-slate-50 p-3",children:[s.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-full bg-[#003366] text-lg font-bold text-white",children:"J"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-bold text-slate-800",children:"J***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"B"}),s.jsx("span",{className:"text-xs text-yellow-500",children:""})]}),s.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:""})]})]}),s.jsxs("div",{className:"flex gap-3 rounded-xl bg-slate-50 p-3",children:[s.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-full bg-[#00A8E8] text-lg font-bold text-white",children:"W"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-bold text-slate-800",children:"W***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"12F"}),s.jsx("span",{className:"text-xs text-yellow-500",children:""})]}),s.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:""})]})]})]}),s.jsxs("div",{className:"relative mt-3 overflow-hidden rounded-xl",children:[s.jsxs("div",{className:"flex gap-3 bg-slate-50 p-3 select-none blur-sm",children:[s.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-full bg-green-500 text-lg font-bold text-white",children:"L"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-bold text-slate-800",children:"L***"}),s.jsx("span",{className:"text-xs text-slate-500",children:"C"}),a]}),s.jsx("p",{className:"text-sm text-slate-600",children:"..."})]})]}),s.jsx("div",{className:"absolute inset-0 flex items-end justify-center bg-gradient-to-b from-transparent via-white/80 to-white pb-3",children:s.jsxs("button",{onClick:()=>{window.location.href="/auth.html?redirect=community"},className:"flex items-center gap-2 rounded-full bg-[#003366] px-4 py-2 text-sm font-bold text-white shadow-lg transition-colors hover:bg-[#004488]",children:[s.jsx(Sa,{size:14})," 6 ",s.jsx(St,{size:14})]})})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-slate-100 pt-3",children:[s.jsx("p",{className:"text-xs text-slate-500",children:" "}),s.jsxs("button",{onClick:()=>window.location.href="/maihouses/community-wall_mvp.html",className:"flex items-center gap-1 text-xs font-bold text-[#003366] hover:underline",children:["",s.jsx(St,{size:12})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"sticky top-24 space-y-4",children:[s.jsx(Yw,{agent:p.agent,onLineClick:()=>C("sidebar"),onCallClick:()=>C("sidebar"),onBookingClick:()=>C("booking")}),s.jsxs("div",{className:"rounded-xl border border-blue-100 bg-blue-50 p-4",children:[s.jsxs("h4",{className:"mb-2 flex items-center gap-2 text-sm font-bold text-[#003366]",children:[s.jsx(Qr,{size:16}),""]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-center gap-2 text-xs text-slate-600",children:[s.jsx("div",{className:"size-1 rounded-full bg-blue-400"}),""]}),s.jsxs("li",{className:"flex items-center gap-2 text-xs text-slate-600",children:[s.jsx("div",{className:"size-1 rounded-full bg-blue-400"}),""]}),s.jsxs("li",{className:"flex items-center gap-2 text-xs text-slate-600",children:[s.jsx("div",{className:"size-1 rounded-full bg-blue-400"}),""]})]})]})]})})]})]}),s.jsxs("button",{onClick:()=>C("booking"),className:"fixed bottom-28 right-4 z-40 flex size-16 animate-bounce flex-col items-center justify-center rounded-full bg-orange-500 text-xs font-bold text-white shadow-2xl transition-transform hover:scale-110 hover:bg-orange-600 lg:bottom-8",style:{animationDuration:"2s"},children:[s.jsx(es,{size:22}),s.jsx("span",{className:"mt-0.5 text-[10px]",children:"30"})]}),s.jsxs("div",{className:"pb-safe fixed inset-x-0 bottom-0 z-overlay border-t border-slate-100 bg-white p-3 lg:hidden",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-center gap-4 text-[10px] text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Qr,{size:10,className:"text-green-500"}),""]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Yr,{size:10,className:"text-blue-500"}),_.currentViewers," "]}),_.isHot&&s.jsxs("span",{className:"flex items-center gap-1 font-medium text-orange-500",children:[s.jsx(kn,{size:10}),""]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>C("mobile_bar"),className:"flex flex-[4] items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3 font-bold text-white shadow-lg shadow-green-500/20",children:[s.jsx(Pt,{size:20})," LINE "]}),s.jsxs("button",{onClick:()=>C("booking"),className:"flex flex-[6] items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white shadow-lg shadow-blue-900/20",children:[s.jsx(ts,{size:20}),""]})]})]}),s.jsx(Qw,{isOpen:l,onClose:()=>c(!1),propertyId:p.publicId,propertyTitle:p.title,agentId:k(),agentName:((L=p.agent)==null?void 0:L.name)||"",source:d}),u&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4",onClick:()=>x(!1),children:s.jsxs("div",{className:"animate-in zoom-in-95 w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl duration-300",onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 text-center",children:[s.jsx("div",{className:"mx-auto mb-3 flex size-16 items-center justify-center rounded-full bg-gradient-to-br from-orange-400 to-red-500",children:s.jsx(kn,{size:32,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800",children:""}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:f||" VIP "})]}),s.jsxs("div",{className:"mb-4 space-y-2 rounded-xl bg-slate-50 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(mt,{size:16,className:"shrink-0 text-green-500"}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(mt,{size:16,className:"shrink-0 text-green-500"}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(mt,{size:16,className:"shrink-0 text-green-500"}),s.jsx("span",{children:""})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{S.trackLineClick(),x(!1),C("mobile_bar")},className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#06C755] py-3 font-bold text-white shadow-lg",children:[s.jsx(Pt,{size:20})," LINE "]}),s.jsxs("button",{onClick:()=>{S.trackCallClick(),x(!1),C("booking")},className:"flex w-full items-center justify-center gap-2 rounded-xl bg-[#003366] py-3 font-bold text-white",children:[s.jsx(ts,{size:20}),"VIP "]}),s.jsx("button",{onClick:()=>x(!1),className:"w-full py-2 text-sm text-slate-400 hover:text-slate-600",children:""})]})]})}),s.jsxs("button",{onClick:()=>v(!0),className:"group fixed bottom-24 right-4 z-40 flex size-14 items-center justify-center rounded-full bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white shadow-lg transition-all hover:scale-105 hover:shadow-xl",title:"",children:[s.jsx(hn,{size:24}),s.jsx("span",{className:"absolute right-full mr-3 whitespace-nowrap rounded-lg bg-slate-800 px-3 py-1.5 text-sm font-medium text-white opacity-0 transition-opacity group-hover:opacity-100",children:""})]}),s.jsx(ej,{property:{id:p.id,publicId:p.publicId,title:p.title,price:p.price,address:p.address,description:p.description,images:p.images,agent:{id:p.agent.id,name:p.agent.name,avatarUrl:p.agent.avatarUrl,company:p.agent.company,trustScore:p.agent.trustScore,reviewCount:p.agent.encouragementCount}},isOpen:b,onClose:()=>v(!1)})]})},rj={id:"NONE",name:"",address:"//"};function ld({value:e,address:t,onChange:r,className:n="",required:a=!1}){const[i,o]=m.useState(!1),[l,c]=m.useState(e),[d,h]=m.useState([]),[u,x]=m.useState(!1),[f,g]=m.useState(null),b=m.useRef(null),v=m.useRef(null),p=m.useRef(0),w=j=>{const E=j.match(/([^]+[])/);return(E==null?void 0:E[1])||""},k=async(j,E)=>{if(!j&&!E){h([]);return}v.current&&v.current.abort(),v.current=new AbortController;const O=++p.current;x(!0);try{const L=w(E),D=E?va(E):"";if(D){const{data:R}=await ce.from("communities").select("id, name, address, property_count, is_verified").eq("address_fingerprint",D).limit(1).abortSignal(v.current.signal);if(O!==p.current)return;if(R&&R.length>0){h(R),x(!1);return}}let I=ce.from("communities").select("id, name, address, property_count, is_verified").limit(8);j&&(I=I.ilike("name",`%${j}%`)),L&&(I=I.eq("district",L));const{data:M,error:$}=await I.order("property_count",{ascending:!1}).abortSignal(v.current.signal);if(O!==p.current)return;if($)throw $;h(M||[])}catch(L){if((L==null?void 0:L.name)==="AbortError")return;console.error(":",L),h([])}finally{O===p.current&&x(!1)}};m.useEffect(()=>{const j=setTimeout(()=>{k(l,t)},300);return()=>clearTimeout(j)},[l,t]),m.useEffect(()=>()=>{v.current&&v.current.abort()},[]),m.useEffect(()=>{const j=E=>{b.current&&!b.current.contains(E.target)&&o(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const N=j=>{g(j),c(j.name);const E=j.id==="NONE"?void 0:j.id;r(j.name,E),o(!1)},T=()=>{g(rj),c(""),r("",void 0),o(!1)},S=()=>{l.trim()&&(g(null),r(l.trim(),void 0),o(!1))},_=(j=>{const E=j.trim();return E.length<2?{valid:!1,reason:""}:/^(||||||A|B|C|[A-Z]\d*?)$/.test(E)?{valid:!1,reason:""}:/^.*[]\d+?$/.test(E)&&!/|||/.test(E)?{valid:!1,reason:""}:/|||||/.test(E)?{valid:!1,reason:""}:/|||||||||||$/.test(E)?{valid:!0}:E.length>=3&&/^[\u4e00-\u9fa5\d]+$/.test(E)?{valid:!0}:{valid:!1,reason:""}})(l),B=l.trim()&&!d.some(j=>j.name===l.trim())&&_.valid;return s.jsxs("div",{ref:b,className:`relative ${n}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx(ar,{size:16})}),s.jsx("input",{type:"text",value:l,onChange:j=>{c(j.target.value),g(null),o(!0)},onFocus:()=>o(!0),placeholder:"...",className:`
            w-full rounded-xl border bg-slate-50 px-10 py-3 text-sm outline-none
            focus:border-transparent focus:ring-2 focus:ring-[#003366]
            ${f?"border-green-300 bg-green-50/50":"border-slate-200"}
          `}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:u?s.jsx(Ks,{size:16,className:"animate-spin text-slate-400"}):f?s.jsx(ut,{size:16,className:"text-green-600"}):s.jsx(Zr,{size:16,className:"text-slate-400"})})]}),f&&f.name!==""&&s.jsxs("p",{className:"mt-1 flex items-center gap-1 text-xs text-green-600",children:[s.jsx(ut,{size:12}),"",f.name,"",f.property_count?` (${f.property_count} )`:""]}),f&&f.name===""&&s.jsx("p",{className:"mt-1 flex items-center gap-1 text-xs text-slate-500",children:" /"}),!f&&l&&_.valid&&s.jsxs("p",{className:"mt-1 text-xs text-amber-600",children:[" ",l.trim(),""]}),!f&&l&&!_.valid&&l.length>=2&&s.jsxs("p",{className:"mt-1 text-xs text-amber-600",children:[" ",_.reason||"","8"]}),i&&s.jsxs("div",{className:"absolute z-dropdown mt-1 max-h-80 w-full overflow-hidden overflow-y-auto rounded-xl border border-slate-200 bg-white shadow-lg",children:[s.jsxs("button",{onClick:T,className:"flex w-full items-center gap-3 border-b border-slate-100 bg-slate-50/50 px-4 py-3 text-left hover:bg-slate-50",children:[s.jsx("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-lg bg-slate-200",children:s.jsx(He,{size:16,className:"text-slate-500"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-600",children:""}),s.jsx("span",{className:"ml-2 text-xs text-slate-400",children:""})]})]}),d.map(j=>s.jsxs("button",{onClick:()=>N(j),className:"flex w-full items-start gap-3 border-b border-slate-100 px-4 py-3 text-left last:border-0 hover:bg-slate-50",children:[s.jsx("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-lg bg-blue-100",children:s.jsx(ar,{size:16,className:"text-blue-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"truncate font-medium text-slate-800",children:j.name}),j.is_verified&&s.jsx("span",{className:"rounded bg-green-100 px-1.5 py-0.5 text-[10px] text-green-700",children:""})]}),j.address&&s.jsx("p",{className:"truncate text-xs text-slate-500",children:j.address}),j.property_count?s.jsxs("p",{className:"text-xs text-slate-400",children:[j.property_count," "]}):null]})]},j.id)),B&&s.jsxs("button",{onClick:S,className:"flex w-full items-center gap-3 border-t border-amber-100 bg-amber-50/50 px-4 py-3 text-left hover:bg-amber-50",children:[s.jsx("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-lg bg-amber-500",children:s.jsx(Kr,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-amber-700",children:""}),s.jsx("span",{className:"ml-1 text-amber-600",children:l.trim()}),s.jsx("p",{className:"mt-0.5 text-xs text-amber-600",children:" "})]})]}),d.length===0&&!B&&l.length>=2&&!u&&s.jsxs("div",{className:"px-4 py-6 text-center",children:[s.jsx("div",{className:"mx-auto mb-3 flex size-12 items-center justify-center rounded-full bg-slate-100",children:s.jsx(Zr,{size:20,className:"text-slate-400"})}),s.jsx("p",{className:"text-sm font-medium text-slate-600",children:""}),s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:""})]}),u&&d.length===0&&s.jsx("div",{className:"space-y-3 p-4",children:[1,2,3].map(j=>s.jsxs("div",{className:"flex animate-pulse items-center gap-3",children:[s.jsx("div",{className:"size-8 rounded-lg bg-slate-200"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 w-3/4 rounded bg-slate-200"}),s.jsx("div",{className:"h-3 w-1/2 rounded bg-slate-100"})]})]},j))})]})]})}const nj=["","","","","","","","","","","","",""],aj=["LINE","","","","","","bit.ly","tinyurl","","","",""];function Fn(e){const t=[],r=e.toLowerCase();for(const n of nj)e.includes(n)&&t.push({type:"sensitive",word:n,message:`${n}`});for(const n of aj)r.includes(n.toLowerCase())&&t.push({type:"ad",word:n,message:`${n}`});return{passed:t.length===0,issues:t}}const $e={advantage:{minLength:5},disadvantage:{minLength:10},communityName:{minLength:2},title:{minLength:1},price:{minLength:1},address:{minLength:5},images:{minCount:1,maxSizeMB:10}},ij=["image/jpeg","image/jpg","image/png","image/webp","image/heic","image/heif"],oj=$e.images.maxSizeMB*1024*1024;function lj(e){if(!ij.includes(e.type))return{valid:!1,file:e,error:`${e.type||""} JPGPNG  WebP`};if(e.size>oj){const t=(e.size/1024/1024).toFixed(1);return{valid:!1,file:e,error:`${t}MB ${$e.images.maxSizeMB}MB`}}return{valid:!0,file:e}}function cj(e){const t=e.map(lj),r=t.filter(a=>a.valid).map(a=>a.file),n=t.filter(a=>!a.valid);return{validFiles:r,invalidFiles:n,allValid:n.length===0}}function dj(e,t){return m.useMemo(()=>{const n=[],a=e.title.length>=$e.title.minLength,i=a?"":"";!a&&e.title.length>0&&n.push({field:"title",message:i});const o=e.price.length>=$e.price.minLength&&/^\d+$/.test(e.price),l=e.price?o?"":"":"";!o&&e.price.length>0&&n.push({field:"price",message:l});const c=e.address.length>=$e.address.minLength,d=e.address.length===0?"":c?"":` ${$e.address.minLength} `;!c&&e.address.length>0&&n.push({field:"address",message:d});const h=e.communityName===""||e.communityName.length>=$e.communityName.minLength,u=h?"":"";!h&&e.communityName.length>0&&n.push({field:"communityName",message:u});const x=e.advantage1.length,f=x>=$e.advantage.minLength,g=f?"":` ${$e.advantage.minLength-x} `;!f&&x>0&&n.push({field:"advantage1",message:`1${g}`});const b=e.advantage2.length,v=b>=$e.advantage.minLength,p=v?"":` ${$e.advantage.minLength-b} `;!v&&b>0&&n.push({field:"advantage2",message:`2${p}`});const w=e.disadvantage.length,k=w>=$e.disadvantage.minLength,N=k?"":` ${$e.disadvantage.minLength-w} `;!k&&w>0&&n.push({field:"disadvantage",message:`${N}`});const T=[];let S=!1;const C=e.advantage1.length>0?Fn(e.advantage1):null,_=e.advantage2.length>0?Fn(e.advantage2):null,B=e.disadvantage.length>0?Fn(e.disadvantage):null,j=!C||C.passed?void 0:C.issues.map(Q=>Q.message).join(""),E=!_||_.passed?void 0:_.issues.map(Q=>Q.message).join(""),O=!B||B.passed?void 0:B.issues.map(Q=>Q.message).join(""),L=Q=>Q?Q.issues.some(F=>F.type==="sensitive"):!1;if(C&&!C.passed){const Q=`1${j}`;T.push(Q),L(C)&&(S=!0,n.push({field:"advantage1",message:j}))}if(_&&!_.passed){const Q=`2${E}`;T.push(Q),L(_)&&(S=!0,n.push({field:"advantage2",message:E}))}if(B&&!B.passed){const Q=`${O}`;T.push(Q),L(B)&&(S=!0,n.push({field:"disadvantage",message:O}))}const D=t>=$e.images.minCount,I=D?"":"";D||n.push({field:"images",message:I});const M=a&&o&&c&&h,$=f&&v&&k,R=M&&$&&D,ee=R&&!S;return{title:{valid:a,message:i},price:{valid:o,message:l},address:{valid:c,message:d},communityName:{valid:h,message:u},advantage1:{valid:f,message:g,charCount:x,...j&&{contentWarning:j}},advantage2:{valid:v,message:p,charCount:b,...E&&{contentWarning:E}},disadvantage:{valid:k,message:N,charCount:w,...O&&{contentWarning:O}},images:{valid:D,message:I,count:t},adv1Valid:f,adv2Valid:v,disValid:k,communityValid:h,basicValid:M,twoGoodOneFairValid:$,allValid:R,canSubmit:ee,contentCheck:{hasIssues:T.length>0,blockSubmit:S,warnings:T},errors:n}},[e,t])}const uj=()=>{const e=ja(),t=m.useRef(null),[r,n]=m.useState(!1),[a,i]=m.useState(null),[o,l]=m.useState([]),[c,d]=m.useState([]),[h,u]=m.useState(null),[x,f]=m.useState(),[g,b]=m.useState(null),[v,p]=m.useState(!1),[w,k]=m.useState({title:"",price:"",address:"",communityName:"",size:"",age:"",floorCurrent:"",floorTotal:"",rooms:"3",halls:"2",bathrooms:"2",type:"",description:"",advantage1:"",advantage2:"",disadvantage:"",sourceExternalId:""});m.useEffect(()=>{ce.auth.getUser().then(({data:L})=>{u(L.user)})},[]);const N=L=>{k({...w,[L.target.name]:L.target.value})},T=(L,D)=>{k({...w,communityName:L}),f(D)},S=dj({title:w.title,price:w.price,address:w.address,communityName:w.communityName,advantage1:w.advantage1,advantage2:w.advantage2,disadvantage:w.disadvantage},c.length),C=S.canSubmit,_=()=>{prompt(" 591 ")&&(n(!0),setTimeout(()=>{k(D=>({...D,title:"",price:"2880",address:"",size:"45.2",sourceExternalId:"591-MOCK-ID"})),n(!1)},1e3))},B=L=>{if(L.target.files&&L.target.files.length>0){const D=Array.from(L.target.files),{validFiles:I,invalidFiles:M,allValid:$}=cj(D);if($||M.forEach(({file:R,error:ee})=>{Z.warning(`${R.name} `,ee||"",{duration:5e3})}),I.length>0){d(ee=>[...ee,...I]);const R=I.map(ee=>URL.createObjectURL(ee));l(ee=>[...ee,...R])}}},j=L=>{l(D=>D.filter((I,M)=>M!==L)),d(D=>D.filter((I,M)=>M!==L))},E=async()=>{if(!S.basicValid){Z.error("",S.errors.filter(L=>["title","price","address","communityName"].includes(L.field)).map(L=>L.message).join(""));return}if(!S.twoGoodOneFairValid){Z.error("",` ${$e.advantage.minLength}  ${$e.disadvantage.minLength} `);return}if(!S.images.valid){Z.error("","");return}n(!0),i({current:0,total:c.length});try{const L=await cn.uploadImages(c,{concurrency:3,onProgress:(I,M)=>i({current:I,total:M})});if(!L.allSuccess){const I=L.failed.map(M=>M.file.name).join("");Z.warning("",`${I} `,{duration:5e3})}if(L.urls.length===0)throw new Error("");const D=await cn.createPropertyWithForm(w,L.urls,x);Z.success(" ",`${D.public_id}`,{duration:3e3}),b({public_id:D.public_id,community_id:D.community_id,community_name:D.community_name||w.communityName,is_new_community:!x&&D.community_id!==null}),p(!0)}catch(L){console.error("Publish error:",L),Z.error("",(L==null?void 0:L.message)||"",{actionLabel:"",onAction:E,duration:5500})}finally{n(!1),i(null)}},O="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-[#003366] focus:border-transparent outline-none text-sm";return v&&g?s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsx("nav",{className:"sticky top-0 z-overlay flex h-16 items-center border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md",children:s.jsxs("div",{className:"flex items-center gap-2 text-xl font-extrabold text-[#003366]",children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white",children:s.jsx(He,{size:18})}),""]})}),s.jsxs("main",{className:"mx-auto max-w-lg p-6 py-12",children:[s.jsxs("div",{className:"mb-8 text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex size-20 items-center justify-center rounded-full bg-green-100",children:s.jsx(ut,{size:40,className:"text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:" "}),s.jsxs("p",{className:"mt-2 text-slate-500",children:["",g.public_id]})]}),g.community_name&&g.community_name!==""&&s.jsxs("section",{className:"mb-6 rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-xl bg-blue-100",children:s.jsx(ar,{size:20,className:"text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:""}),s.jsx("p",{className:"mt-1 text-lg font-medium text-[#003366]",children:g.community_name}),g.is_new_community?s.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-amber-600",children:[s.jsx(Ut,{size:14}),""]}):s.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-green-600",children:[s.jsx(ut,{size:14}),""]})]})]}),g.community_id&&s.jsx(it,{to:`/community/${g.community_id}`,className:"mt-4 block w-full rounded-xl bg-blue-50 py-2 text-center text-sm font-medium text-blue-600 transition hover:bg-blue-100",children:" "})]}),g.community_name&&g.community_name!==""&&s.jsxs("section",{className:"mb-6 rounded-2xl border border-amber-200 bg-amber-50 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[s.jsx(Ut,{size:18}),s.jsx("span",{className:"font-medium",children:""})]}),s.jsx("p",{className:"mt-2 text-sm text-amber-700",children:""}),s.jsxs("button",{onClick:()=>{e(`/property/${g.public_id}/edit?fix=community`)},className:"mt-3 flex w-full items-center justify-center gap-2 rounded-xl bg-amber-100 py-2 text-sm font-medium text-amber-800 transition hover:bg-amber-200",children:[s.jsx(Vd,{size:16}),""]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(it,{to:`/property/${g.public_id}`,className:"block w-full rounded-xl bg-gradient-to-r from-[#003366] to-[#00A8E8] py-4 text-center font-bold text-white shadow-lg",children:""}),s.jsx("button",{onClick:()=>{p(!1),b(null),k({title:"",price:"",address:"",communityName:"",size:"",age:"",floorCurrent:"",floorTotal:"",rooms:"3",halls:"2",bathrooms:"2",type:"",description:"",advantage1:"",advantage2:"",disadvantage:"",sourceExternalId:""}),l([]),d([]),f(void 0)},className:"block w-full rounded-xl bg-slate-100 py-3 text-center font-medium text-slate-600 transition hover:bg-slate-200",children:""})]})]})]}):s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-overlay flex h-16 items-center justify-between border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e(-1),className:"rounded-full p-2 transition-colors hover:bg-slate-100",children:s.jsx(Ea,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center gap-2 text-xl font-extrabold text-[#003366]",children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white",children:s.jsx(He,{size:18})}),""]})]}),s.jsxs("button",{onClick:_,disabled:r,className:"flex items-center gap-1 rounded-lg border border-blue-100 bg-blue-50 px-3 py-1.5 text-xs font-bold text-[#00A8E8] hover:bg-blue-100",children:[r?s.jsx(Ks,{size:12,className:"animate-spin"}):s.jsx(Zd,{size:12}),"591 "]})]}),s.jsxs("main",{className:"mx-auto max-w-2xl space-y-5 p-4 pb-32",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[s.jsxs("h2",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-[#003366]",children:[s.jsx(He,{size:18})," "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-title",className:"mb-1 block text-xs font-medium text-slate-600",children:" *"}),s.jsx("input",{id:"upload-title",name:"title",value:w.title,onChange:N,className:O+" font-bold",placeholder:"101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-price",className:"mb-1 block text-xs font-medium text-slate-600",children:" () *"}),s.jsx("input",{id:"upload-price",name:"price",type:"number",value:w.price,onChange:N,className:O,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-address",className:"mb-1 block text-xs font-medium text-slate-600",children:" *"}),s.jsx("input",{id:"upload-address",name:"address",value:w.address,onChange:N,className:O,placeholder:"..."})]})]}),s.jsxs("div",{children:[s.jsxs("span",{id:"upload-community-label",className:"mb-1 block text-xs font-medium text-slate-600",children:[" * ",s.jsx("span",{className:"text-slate-400",children:"(/)"})]}),s.jsx(ld,{value:w.communityName,address:w.address,onChange:T,required:!0}),!S.communityValid&&w.communityName.length>0&&s.jsx("p",{className:"mt-1 text-[10px] text-red-500",children:"2"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-size",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("input",{id:"upload-size",name:"size",type:"number",value:w.size,onChange:N,className:O,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-age",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("input",{id:"upload-age",name:"age",type:"number",value:w.age,onChange:N,className:O,placeholder:"0"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{htmlFor:"upload-type",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsxs("select",{id:"upload-type",name:"type",value:w.type,onChange:N,className:O,children:[s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""}),s.jsx("option",{children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-rooms",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("input",{id:"upload-rooms",name:"rooms",type:"number",value:w.rooms,onChange:N,className:O})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-halls",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("input",{id:"upload-halls",name:"halls",type:"number",value:w.halls,onChange:N,className:O})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-bathrooms",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("input",{id:"upload-bathrooms",name:"bathrooms",type:"number",value:w.bathrooms,onChange:N,className:O})]})]})]})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(Qr,{className:"text-orange-500",size:20}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-[#003366]",children:""}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"upload-advantage1",className:"mb-1 flex items-center gap-1.5 text-xs font-medium text-green-700",children:[s.jsx(Gn,{size:14}),"  1 ( 5 )"]}),s.jsx("input",{id:"upload-advantage1",name:"advantage1",value:w.advantage1,onChange:N,className:O+(S.adv1Valid?" border-green-300 bg-green-50/50":"")+(S.advantage1.contentWarning?" border-red-300":""),placeholder:""}),s.jsxs("div",{className:"mt-0.5 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs "+(S.adv1Valid?"text-green-600":"text-slate-400"),children:[w.advantage1.length,"/5  ",S.adv1Valid&&""]}),S.advantage1.contentWarning&&s.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-500",children:[s.jsx(Ut,{size:12})," ",S.advantage1.contentWarning]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"upload-advantage2",className:"mb-1 flex items-center gap-1.5 text-xs font-medium text-green-700",children:[s.jsx(Gn,{size:14}),"  2 ( 5 )"]}),s.jsx("input",{id:"upload-advantage2",name:"advantage2",value:w.advantage2,onChange:N,className:O+(S.adv2Valid?" border-green-300 bg-green-50/50":"")+(S.advantage2.contentWarning?" border-red-300":""),placeholder:""}),s.jsxs("div",{className:"mt-0.5 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs "+(S.adv2Valid?"text-green-600":"text-slate-400"),children:[w.advantage2.length,"/5  ",S.adv2Valid&&""]}),S.advantage2.contentWarning&&s.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-500",children:[s.jsx(Ut,{size:12})," ",S.advantage2.contentWarning]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"upload-disadvantage",className:"mb-1 flex items-center gap-1.5 text-xs font-medium text-orange-700",children:[s.jsx(Yd,{size:14}),"  ( 10 )"]}),s.jsx("input",{id:"upload-disadvantage",name:"disadvantage",value:w.disadvantage,onChange:N,className:O+(S.disValid?" border-orange-300 bg-orange-50/50":"")+(S.disadvantage.contentWarning?" border-red-300":""),placeholder:""}),s.jsxs("div",{className:"mt-0.5 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs "+(S.disValid?"text-orange-600":"text-red-400"),children:[w.disadvantage.length,"/10  ",S.disValid?"":"()"]}),S.disadvantage.contentWarning&&s.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-500",children:[s.jsx(Ut,{size:12})," ",S.disadvantage.contentWarning]})]})]})]}),S.contentCheck.hasIssues&&s.jsxs("div",{className:`mt-4 flex items-start gap-2 rounded-lg p-3 ${S.contentCheck.blockSubmit?"border border-red-200 bg-red-50":"border border-yellow-200 bg-yellow-50"}`,children:[s.jsx(Ut,{className:S.contentCheck.blockSubmit?"text-red-500":"text-yellow-600",size:18}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${S.contentCheck.blockSubmit?"text-red-700":"text-yellow-700"}`,children:S.contentCheck.blockSubmit?"":""}),s.jsx("ul",{className:"mt-1 space-y-0.5 text-xs text-slate-600",children:S.contentCheck.warnings.map((L,D)=>s.jsxs("li",{children:[" ",L]},D))})]})]})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[s.jsxs("h2",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-[#003366]",children:[s.jsx(Na,{size:18,className:"text-yellow-500"})," "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"upload-description",className:"mb-1 block text-xs font-medium text-slate-600",children:""}),s.jsx("textarea",{id:"upload-description",name:"description",value:w.description,onChange:N,rows:4,className:O+" resize-none",placeholder:"..."})]}),s.jsxs("div",{children:[s.jsxs("span",{id:"upload-photos-label",className:"mb-2 block text-xs font-medium text-slate-600",children:[" * ",s.jsx("span",{className:"text-slate-400",children:"( 1 )"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[o.map((L,D)=>s.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-xl border border-slate-200",children:[s.jsx("img",{src:L,alt:"",className:"size-full object-cover"}),s.jsx("button",{onClick:()=>j(D),className:"absolute right-1 top-1 rounded-full bg-red-500 p-1 text-white opacity-0 transition group-hover:opacity-100",children:s.jsx(_s,{size:12})}),D===0&&s.jsx("span",{className:"absolute bottom-1 left-1 rounded bg-[#003366] px-1.5 py-0.5 text-[10px] text-white",children:""})]},D)),s.jsxs("button",{onClick:()=>{var L;return(L=t.current)==null?void 0:L.click()},className:"flex aspect-square flex-col items-center justify-center rounded-xl border-2 border-dashed border-slate-300 text-slate-400 transition-colors hover:border-[#00A8E8] hover:text-[#00A8E8]",children:[s.jsx(cl,{size:24}),s.jsx("span",{className:"mt-1 text-xs",children:""})]}),s.jsx("input",{type:"file",multiple:!0,ref:t,onChange:B,className:"hidden",accept:"image/*"})]})]})]})]}),(w.title||w.price||o.length>0)&&s.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-bold text-slate-500",children:[s.jsx(yr,{size:14})," "]}),s.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white",children:[o.length>0&&s.jsx("div",{className:"aspect-video",children:s.jsx("img",{src:o[0],alt:"",className:"size-full object-cover"})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:"font-bold text-slate-900",children:w.title||""}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:w.address||""}),s.jsxs("div",{className:"mt-2 flex items-baseline gap-1",children:[s.jsx("span",{className:"text-xl font-extrabold text-[#003366]",children:w.price||"0"}),s.jsx("span",{className:"text-sm text-slate-500",children:""})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:[w.type,w.size&&w.size+"",w.rooms+""+w.halls+""+w.bathrooms+""].filter(Boolean).map((L,D)=>s.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs text-[#003366]",children:L},D))}),w.communityName&&s.jsx("div",{className:"mt-3 border-t border-slate-100 pt-2 text-xs text-slate-500",children:s.jsxs("span",{className:"flex items-center gap-1",children:[" ",s.jsx("span",{className:x?"font-medium text-green-600":"font-medium text-blue-600",children:w.communityName}),x?s.jsx("span",{className:"text-green-600",children:""}):s.jsx("span",{className:"text-blue-600",children:""})]})})]})]})]})]}),s.jsx("div",{className:"fixed inset-x-0 bottom-0 z-overlay border-t border-slate-100 bg-white p-4",children:s.jsxs("div",{className:"mx-auto max-w-2xl",children:[s.jsxs("button",{onClick:E,disabled:r||!C,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all "+(C?"bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg shadow-blue-900/20 hover:scale-[1.01]":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:[r?s.jsx(Ks,{className:"animate-spin",size:20}):s.jsx(ut,{size:20}),r?"...":C?"":""]}),!C&&s.jsxs("div",{className:"mt-2 flex justify-center gap-4 text-xs text-slate-400",children:[s.jsx("span",{className:S.basicValid?"text-green-600":"",children:S.basicValid?" ":" "}),s.jsx("span",{className:S.twoGoodOneFairValid?"text-green-600":"",children:S.twoGoodOneFairValid?" ":" "}),s.jsx("span",{className:c.length>0?"text-green-600":"",children:c.length>0?" ":" "})]})]})})]})},mj=()=>{const{publicId:e}=br(),[t]=vr(),r=ja(),[n,a]=m.useState(!0),[i,o]=m.useState(!1),[l,c]=m.useState(null),[d,h]=m.useState(null),[u,x]=m.useState(""),[f,g]=m.useState(),[b,v]=m.useState(!1),p=t.get("fix")==="community";m.useEffect(()=>{(async()=>{if(e)try{const{data:T,error:S}=await ce.from("properties").select("id, public_id, title, address, community_id, community_name").eq("public_id",e).single();if(S)throw S;c(T),x(T.community_name||""),g(T.community_id||void 0)}catch(T){h(""+T.message)}finally{a(!1)}})()},[e]);const w=(N,T)=>{x(N),g(T),v(N!==(l==null?void 0:l.community_name)||T!==(l==null?void 0:l.community_id))},k=async()=>{if(!(!l||!b)){o(!0);try{const{error:N}=await ce.from("properties").update({community_id:f||null,community_name:u||null}).eq("id",l.id);if(N)throw N;r(`/property/${e}`,{state:{message:""}})}catch(N){h(""+N.message)}finally{o(!1)}}};return n?s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[#f8fafc]",children:s.jsx(Ks,{className:"animate-spin text-[#003366]",size:40})}):d||!l?s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ut,{size:48,className:"mx-auto mb-4 text-red-500"}),s.jsx("p",{className:"text-red-600",children:d||""}),s.jsx("button",{onClick:()=>r(-1),className:"mt-4 text-blue-600 underline",children:""})]})}):s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-800",children:[s.jsxs("nav",{className:"sticky top-0 z-overlay flex h-16 items-center border-b border-slate-100 bg-white/90 px-4 shadow-sm backdrop-blur-md",children:[s.jsx("button",{onClick:()=>r(-1),className:"mr-3 rounded-full p-2 transition-colors hover:bg-slate-100",children:s.jsx(Ea,{size:20,className:"text-slate-600"})}),s.jsxs("div",{className:"flex items-center gap-2 text-xl font-extrabold text-[#003366]",children:[s.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#003366] to-[#00A8E8] text-white",children:s.jsx(He,{size:18})}),p?"":""]})]}),s.jsxs("main",{className:"mx-auto max-w-lg p-6 py-8",children:[s.jsxs("section",{className:"mb-6 rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[s.jsx("h2",{className:"mb-2 font-bold text-slate-800",children:l.title}),s.jsx("p",{className:"text-sm text-slate-500",children:l.address}),s.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["",l.public_id]})]}),s.jsxs("section",{className:"mb-6 rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx(ar,{className:"text-blue-600",size:20}),s.jsx("h3",{className:"font-bold text-slate-800",children:""})]}),s.jsxs("div",{className:"mb-4 rounded-xl bg-slate-50 p-3",children:[s.jsx("p",{className:"mb-1 text-xs text-slate-500",children:""}),s.jsx("p",{className:"font-medium text-slate-700",children:l.community_name||""})]}),s.jsxs("div",{children:[s.jsx("span",{id:"edit-community-label",className:"mb-2 block text-xs font-medium text-slate-600",children:""}),s.jsx(ld,{value:u,address:l.address,onChange:w,required:!0})]}),b&&s.jsx("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 p-3",children:s.jsxs("p",{className:"flex items-center gap-2 text-sm text-amber-700",children:[s.jsx(Ut,{size:16}),"",s.jsx("span",{className:"font-medium",children:u||""})]})})]}),s.jsx("button",{onClick:k,disabled:!b||i,className:`
            flex w-full items-center justify-center gap-2 rounded-xl py-4 text-lg font-bold transition-all
            ${b&&!i?"bg-gradient-to-r from-[#003366] to-[#00A8E8] text-white shadow-lg hover:scale-[1.01]":"cursor-not-allowed bg-slate-200 text-slate-400"}
          `,children:i?s.jsxs(s.Fragment,{children:[s.jsx(Ks,{className:"animate-spin",size:20}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kd,{size:20}),b?"":""]})}),s.jsx("button",{onClick:()=>r(-1),className:"mt-3 w-full rounded-xl bg-slate-100 py-3 font-medium text-slate-600 transition hover:bg-slate-200",children:""})]})]})},hj=new ku({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});function fj(){const[e,t]=m.useState(null),r=nl();return m.useEffect(()=>{Cl().then(t)},[]),m.useEffect(()=>{e&&Ra("page_view",r.pathname)},[r,e]),e?s.jsx(Su,{client:hj,children:s.jsx(wm,{children:s.jsxs(Ug,{children:[s.jsx(mm,{position:"top-right",theme:"light",richColors:!0,closeButton:!0,toastOptions:{duration:3200}}),s.jsxs(bd,{children:[s.jsx(nt,{path:"/",element:s.jsx(lt,{children:s.jsx(tp,{config:e})})}),s.jsx(nt,{path:"/feed/:userId",element:s.jsx(lt,{children:s.jsx(jx,{})})}),s.jsx(nt,{path:"/uag",element:s.jsx(Ww,{})}),s.jsx(nt,{path:"/community/:id/wall",element:s.jsx(lt,{children:s.jsx(kg,{})})}),s.jsx(nt,{path:"/community/suggested",element:s.jsx(lt,{children:s.jsx(Sg,{})})}),s.jsx(nt,{path:"/property/upload",element:s.jsx(lt,{children:s.jsx(uj,{})})}),s.jsx(nt,{path:"/property/:publicId/edit",element:s.jsx(lt,{children:s.jsx(mj,{})})}),s.jsx(nt,{path:"/property/:id",element:s.jsx(lt,{children:s.jsx(sj,{})})}),s.jsx(nt,{path:"/p/:id",element:s.jsx(lt,{children:s.jsx(Pg,{})})}),s.jsx(nt,{path:"/maihouses/trust/room",element:s.jsx(lt,{children:s.jsx(bo,{})})}),s.jsx(nt,{path:"/assure",element:s.jsx(lt,{children:s.jsx(bo,{})})}),s.jsx(nt,{path:"/chat",element:s.jsx(lt,{children:s.jsx(Fg,{})})}),s.jsx(nt,{path:"/r/:id",element:s.jsx(lt,{children:s.jsx(Xw,{})})})]},r.pathname),!1,e.devtools==="1"&&s.jsx(Fh,{config:e}),s.jsx(Bg,{})]})})}):s.jsx("div",{className:"p-6 text-sm text-[var(--text-secondary)]",children:""})}const Vo=document.getElementById("root");if(Vo){const e=window.location.pathname.startsWith("/maihouses")?"/maihouses":"/";Hn.createRoot(Vo).render(s.jsx(U.StrictMode,{children:s.jsx(vd,{basename:e,future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(fj,{})})}))}export{Cl as g};
//# sourceMappingURL=index-DRqPYFmb.js.map
