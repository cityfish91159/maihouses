import{g as w}from"./index-BnTJYcTQ.js";let u=97;const i=()=>u=(u*9301+49297)%233280/233280,m=["惠宇上晴","單元二新苑","水湳青庭","七期晶華","北屯新苑","西屯國際"],p=["台中西屯","台中北屯","台中南屯","台中西區","台中北區","台中南區"],l=["雙車位","採光佳","邊間","屋況佳","近公園","24H管理","格局方正"],k=["住戶A","住戶B","住戶C","準住戶D","住戶E"],d=["管理嚴謹","機能方便","中庭維護佳","車位好停","生活圈便利"],y=e=>{let t=2166136261;for(let o=0;o<e.length;o++)t^=e.charCodeAt(o),t=t*16777619>>>0;return t},$=e=>{u=e%233279+1},f=e=>({id:`r${e}`,authorMask:k[e%k.length]??"",content:d[Math.floor(i()*d.length)]??"",ts:new Date(Date.now()-e*36e5).toISOString()});function A(e){const t=m[e%m.length]??"",o=[l[Math.floor(i()*l.length)]??"",l[Math.floor(i()*l.length)]??""].filter(Boolean);return{id:`p${e}`,title:`${t} 景觀${e%3+2}房`,price:1500+Math.floor(i()*2e3),communityId:`c${e%m.length}`,communityName:t,cover:`https://picsum.photos/seed/mai-${e}/800/450`,highlights:o,reviewsTop2:[f(e*2),f(e*2+1)]}}function M(e){return{id:`c${e}`,name:m[e%m.length]??"",cover:`https://picsum.photos/seed/comm-${e}/600/300`,score:4+Math.floor(i()*10)/10,reviewCount:10+Math.floor(i()*90),location:p[e%p.length]??""}}const v=(e=24)=>Array.from({length:e},(t,o)=>A(o+1)),C=(e=6)=>Array.from({length:e},(t,o)=>M(o)),O=(e,t=24)=>($(y(e)),v(t)),P=e=>new Promise(t=>setTimeout(t,e)),S=e=>{if(e>0&&Math.random()<e)throw new Error("Mock 網路失敗")};async function I(e,t){const o=await w();if(await P(o.latency??0),S(o.error??0),e==="/api/v1/uag/events")return{ok:!0,data:null};if(/^\/api\/v1\/meta$/.test(e))return{ok:!0,data:{backendVersion:"1.0.7",apiVersion:"v1",maintenance:!1}};if(/^\/api\/v1\/properties\?/.test(e)){const s=new URLSearchParams(e.split("?")[1]||""),r=+s.get("page")||1,a=+s.get("pageSize")||8,c=s.get("q")||"",h=`${o.mockSeed??""}|${c}|${r}`;let n=O(h,24);return c&&(n=n.filter(g=>g.title.includes(c)||g.communityName.includes(c))),{ok:!0,data:{items:n.slice((r-1)*a,r*a),page:r,pageSize:a,total:n.length}}}if(/^\/api\/v1\/properties\/[^/?]+$/.test(e)){const s=e.split("/").pop(),r=v(24).find(a=>a.id===s);return r?{ok:!0,data:r}:{ok:!1,error:{code:"NOT_FOUND",message:"物件不存在"}}}if(/^\/api\/v1\/communities\/[^/?]+\/reviews\?/.test(e)){const s=new URLSearchParams(e.split("?")[1]||""),r=+s.get("limit")||2,a=+s.get("offset")||0;return{ok:!0,data:Array.from({length:r},(h,n)=>f(n+a))}}return/^\/api\/v1\/communities\/preview$/.test(e)?{ok:!0,data:C(6)}:e==="/api/v1/ai/ask"?{ok:!1,error:{code:"USE_REAL_API",message:"AI 助理使用真實 OpenAI API"}}:{ok:!1,error:{code:"NOT_FOUND",message:"端點不存在"}}}export{I as mockHandler};
