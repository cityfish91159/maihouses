import{g as O}from"./main-FOLnWMik.js";import"./index-BQdygpFQ.js";import"./react-vendor-DeRakCLa.js";import"./ui-libs-BngQYO1V.js";import"./supabase-Gcu3lQsR.js";let d=97;const m=()=>d=(d*9301+49297)%233280/233280,g=["惠宇上晴","單元二新苑","水湳青庭","七期晶華","北屯新苑","西屯國際"],S=["台中西屯","台中北屯","台中南屯","台中西區","台中北區","台中南區"],p=["雙車位","採光佳","邊間","屋況佳","近公園","24H管理","格局方正"],v=["住戶A","住戶B","住戶C","準住戶D","住戶E"],M=["管理嚴謹","機能方便","中庭維護佳","車位好停","生活圈便利"],$=t=>{var o;let e=2166136261;for(let r=0;r<t.length;r++)e^=(o=t.codePointAt(r))!=null?o:0,e=e*16777619>>>0;return e},A=t=>{d=t%233279+1},k=t=>{var e,o;return{id:"r".concat(t),authorMask:(e=v[t%v.length])!=null?e:"",content:(o=M[Math.floor(m()*M.length)])!=null?o:"",ts:new Date(Date.now()-t*36e5).toISOString()}};function P(t){var r,l,u;const e=(r=g[t%g.length])!=null?r:"",o=[(l=p[Math.floor(m()*p.length)])!=null?l:"",(u=p[Math.floor(m()*p.length)])!=null?u:""].filter(Boolean);return{id:"p".concat(t),title:"".concat(e," 景觀").concat(t%3+2,"房"),price:1500+Math.floor(m()*2e3),communityId:"c".concat(t%g.length),communityName:e,cover:"https://picsum.photos/seed/mai-".concat(t,"/800/450"),highlights:o,reviewsTop2:[k(t*2),k(t*2+1)]}}function C(t){var e,o;return{id:"c".concat(t),name:(e=g[t%g.length])!=null?e:"",cover:"https://picsum.photos/seed/comm-".concat(t,"/600/300"),score:4+Math.floor(m()*10)/10,reviewCount:10+Math.floor(m()*90),location:(o=S[t%S.length])!=null?o:""}}const D=(t=24)=>Array.from({length:t},(e,o)=>P(o+1)),_=(t=6)=>Array.from({length:t},(e,o)=>C(o)),N=(t,e=24)=>(A($(t)),D(e)),U={c0:[{id:"c0r1",authorMask:"J***",content:"公設維護得乾淨，假日草皮有人整理。之前反映停車動線，管委會一週內就公告改善。",ts:new Date(Date.now()-2*36e5).toISOString()},{id:"c0r2",authorMask:"W***",content:"住起來整體舒服，但面向上路的低樓層在上下班尖峰車聲明顯，喜靜的買家可考慮中高樓層。",ts:new Date(Date.now()-4*36e5).toISOString()},{id:"c0r3",authorMask:"L***",content:"頂樓排水設計不錯，颱風天也沒有積水問題。不過垃圾車時間稍晚，家裡偶爾會有下水道味。",ts:new Date(Date.now()-6*36e5).toISOString()},{id:"c0r4",authorMask:"H***",content:"晚間公共照明足夠，走廊不陰暗。建議之後能更新健身房幾台老舊器材。",ts:new Date(Date.now()-8*36e5).toISOString()},{id:"c0r5",authorMask:"A***",content:"垃圾分類與回收管理還不錯，管理員態度親切。有時收包裹要稍等，但整體效率可以接受。",ts:new Date(Date.now()-10*36e5).toISOString()},{id:"c0r6",authorMask:"K***",content:"車道轉彎半徑偏小，新手第一次會緊張；不過停車場指示標示清楚，熟悉後就順手。",ts:new Date(Date.now()-12*36e5).toISOString()}]},E=t=>new Promise(e=>setTimeout(e,t)),L=t=>{if(t>0&&Math.random()<t)throw new Error("Mock 網路失敗")};async function V(t,e){var r,l,u,w;const o=await O();if(await E((r=o.latency)!=null?r:0),L((l=o.error)!=null?l:0),t==="/api/v1/uag/events")return{ok:!0,data:null};if(/^\/api\/v1\/meta$/.test(t))return{ok:!0,data:{backendVersion:"1.0.7",apiVersion:"v1",maintenance:!1}};if(t.startsWith("/api/v1/properties?")){const n=new URLSearchParams(t.split("?")[1]||""),s=+n.get("page")||1,a=+n.get("pageSize")||8,c=n.get("q")||"",h="".concat((u=o.mockSeed)!=null?u:"","|").concat(c,"|").concat(s);let i=N(h,24);return c&&(i=i.filter(f=>f.title.includes(c)||f.communityName.includes(c))),{ok:!0,data:{items:i.slice((s-1)*a,s*a),page:s,pageSize:a,total:i.length}}}if(/^\/api\/v1\/properties\/[^/?]+$/.test(t)){const n=t.split("/").pop(),s=D(24).find(a=>a.id===n);return s?{ok:!0,data:s}:{ok:!1,error:{code:"NOT_FOUND",message:"物件不存在"}}}if(/^\/api\/v1\/communities\/.+\/reviews\?/.test(t)){const n=/^\/api\/v1\/communities\/([^/?]+)\/reviews\?/.exec(t),s=(w=n==null?void 0:n[1])!=null?w:"",a=new URLSearchParams(t.split("?")[1]||""),c=+a.get("limit")||2,h=+a.get("offset")||0,i=U[s];return i&&i.length>0?{ok:!0,data:i.slice(h,h+c)}:{ok:!0,data:Array.from({length:c},(f,I)=>k(I+h))}}return/^\/api\/v1\/communities\/preview$/.test(t)?{ok:!0,data:_(6)}:t==="/api/v1/ai/ask"?{ok:!1,error:{code:"USE_REAL_API",message:"AI 助理使用真實 OpenAI API"}}:{ok:!1,error:{code:"NOT_FOUND",message:"端點不存在"}}}export{V as mockHandler};
